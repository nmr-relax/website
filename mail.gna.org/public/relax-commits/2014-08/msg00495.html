<!-- MHonArc v2.6.18 -->
<!--X-Subject: r25361 &#45; in /trunk: auto_analyses/relax_disp.py gui/analyses/auto_relax_disp.py -->
<!--X-From-R13: gyvaargNaze&#45;erynk.pbz -->
<!--X-Date: Wed, 27 Aug 2014 23:45:27 +0200 -->
<!--X-Message-Id: E1XMl1y&#45;0003QX&#45;SN@subversion.gna.org -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>r25361 - in /trunk: auto_analyses/relax_disp.py gui/analyses/auto_relax_disp.py -- August 27, 2014 - 23:45</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />r25361 - in /trunk: auto_analyses/relax_disp.py gui/analyses/auto_relax_disp.py</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00495" class="tabs">Index by Date</a> | <a href="threads.html#00495" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00494.html">Date Prev</a>] [<a href="msg00496.html">Date Next</a>] [<a href="msg00494.html">Thread Prev</a>] [<a href="msg00496.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: relax-commits@xxxxxxx</li>
<li class="menuitem">
<em>Date</em>: Wed, 27 Aug 2014 21:45:26 -0000</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00495.html">E1XMl1y-0003QX-SN@subversion.gna.org</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>tlinnet</strong> on August 27, 2014 - 23:45:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Author: tlinnet
Date: Wed Aug 27 23:45:26 2014
New Revision: 25361

URL: <a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax?rev=25361&amp;view=rev">http://svn.gna.org/viewcvs/relax?rev=25361&amp;view=rev</a>
Log:
Added keyword &quot;exp_mc_sim_num&quot;, to the auto analyses in the GUI.

This sets the number of Monte Carlo simulations for R2eff error estimation in 
exponential curve fitting.

When setting to -1, the errors are estimated from the Covariance Matrix.

These errors are highly likely to be wrong, but can be used in Rapid testing 
of data and plotting.

task #7822(<a  rel="nofollow" href="https://gna.org/task/index.php?7822">https://gna.org/task/index.php?7822</a>): Implement user function to 
estimate R2eff and associated errors for exponential curve fitting.

Modified:
    trunk/auto_analyses/relax_disp.py
    trunk/gui/analyses/auto_relax_disp.py

Modified: trunk/auto_analyses/relax_disp.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/trunk/auto_analyses/relax_disp.py?rev=25361&amp;r1=25360&amp;r2=25361&amp;view=diff">http://svn.gna.org/viewcvs/relax/trunk/auto_analyses/relax_disp.py?rev=25361&amp;r1=25360&amp;r2=25361&amp;view=diff</a>
==============================================================================
--- trunk/auto_analyses/relax_disp.py   (original)
+++ trunk/auto_analyses/relax_disp.py   Wed Aug 27 23:45:26 2014
@@ -66,7 +66,7 @@
         @type grid_inc:                     int or None
         @keyword mc_sim_num:                The number of Monte Carlo 
simulations to be used for error analysis at the end of the analysis.
         @type mc_sim_num:                   int
-        @keyword exp_mc_sim_num:            The number of Monte Carlo 
simulations for the error analysis in the 'R2eff' model when exponential 
curves are fitted.  This defaults to the value of the mc_sim_num argument 
when not given.  For the 2-point fixed-time calculation for the 'R2eff' 
model, this argument is ignored.
+        @keyword exp_mc_sim_num:            The number of Monte Carlo 
simulations for the error analysis in the 'R2eff' model when exponential 
curves are fitted.  This defaults to the value of the mc_sim_num argument 
when not given.  When set to '-1', the R2eff errors are estimated from the 
Covariance matrix.  For the 2-point fixed-time calculation for the 'R2eff' 
model, this argument is ignored.
         @type exp_mc_sim_num:               int or None
         @keyword modsel:                    The model selection technique to 
use in the analysis to determine which model is the best for each spin 
cluster.  This can currently be one of 'AIC', 'AICc', and 'BIC'.
         @type modsel:                       str

Modified: trunk/gui/analyses/auto_relax_disp.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/trunk/gui/analyses/auto_relax_disp.py?rev=25361&amp;r1=25360&amp;r2=25361&amp;view=diff">http://svn.gna.org/viewcvs/relax/trunk/gui/analyses/auto_relax_disp.py?rev=25361&amp;r1=25360&amp;r2=25361&amp;view=diff</a>
==============================================================================
--- trunk/gui/analyses/auto_relax_disp.py       (original)
+++ trunk/gui/analyses/auto_relax_disp.py       Wed Aug 27 23:45:26 2014
@@ -118,6 +118,7 @@
             ds.relax_gui.analyses[data_index].numeric_only = False
             ds.relax_gui.analyses[data_index].grid_inc = None
             ds.relax_gui.analyses[data_index].mc_sim_num = None
+            ds.relax_gui.analyses[data_index].exp_mc_sim_num = None
             ds.relax_gui.analyses[data_index].pre_run_dir = None
             ds.relax_gui.analyses[data_index].mc_sim_all_models = False
             ds.relax_gui.analyses[data_index].insignificance = 1.0
@@ -298,6 +299,7 @@
 
         # The number of Monte Carlo simulations to be used for error 
analysis at the end of the analysis.
         data.mc_sim_num = gui_to_int(self.mc_sim_num.GetValue())
+        data.exp_mc_sim_num = gui_to_int(self.exp_mc_sim_num.GetValue())
         data.mc_sim_all_models = self.mc_sim_all_models.GetValue()
 
         # The insignificance level.
@@ -370,6 +372,7 @@
 
         # The MC simulation settings.
         self.mc_sim_num = Spin_ctrl(box, self, text=&quot;Monte Carlo simulation 
number:&quot;, default=500, min=1, max=100000, tooltip=&quot;This is the number of 
Monte Carlo simulations performed for error propagation and analysis.  For 
best results, at least 500 is recommended.&quot;, width_text=self.width_text, 
width_button=self.width_button, spacer=self.spacer_horizontal)
+        self.exp_mc_sim_num = Spin_ctrl(box, self, text=&quot;Exponential Monte 
Carlo simulation:&quot;, default=500, min=-1, max=100000, tooltip=&quot;This is the 
number of Monte Carlo simulations performed for error propagation and 
analysis, when estimating R2eff errors from exponential curve fitting.  
Setting to '-1', estimates error from the Covariance matrix.&quot;, 
width_text=self.width_text, width_button=self.width_button, 
spacer=self.spacer_horizontal)
         self.mc_sim_all_models = Boolean_ctrl(box, self, text=&quot;Per model 
error analysis:&quot;, default=False, tooltip=&quot;A flag which if True will cause 
Monte Carlo simulations to be performed for each individual model.  Otherwise 
Monte Carlo simulations will be reserved for the final model.&quot;, 
width_text=self.width_text, width_button=self.width_button, 
spacer=self.spacer_horizontal)
 
         # The speed up of grid search.
@@ -628,6 +631,12 @@
             self.data.mc_sim_num = gui_to_int(self.mc_sim_num.GetValue())
         elif hasattr(self.data, 'mc_sim_num'):
             self.mc_sim_num.SetValue(int(self.data.mc_sim_num))
+
+        # The EXP MC sim number.
+        if upload:
+            self.data.exp_mc_sim_num = 
gui_to_int(self.exp_mc_sim_num.GetValue())
+        elif hasattr(self.data, 'exp_mc_sim_num'):
+            self.exp_mc_sim_num.SetValue(int(self.data.exp_mc_sim_num))
 
         # The All model MC sim flag.
         if upload:
@@ -713,7 +722,7 @@
         Relax_disp.opt_max_iterations = self.data.opt_max_iterations
 
         # Execute.
-        Relax_disp(pipe_name=self.data.pipe_name, 
pipe_bundle=self.data.pipe_bundle, results_dir=self.data.save_dir, 
models=self.data.models, grid_inc=self.data.inc, 
mc_sim_num=self.data.mc_sim_num, pre_run_dir=self.data.pre_run_dir, 
mc_sim_all_models=self.data.mc_sim_all_models, 
insignificance=self.data.insignificance, numeric_only=self.data.numeric_only, 
r1_fit=self.data.r1_fit)
+        Relax_disp(pipe_name=self.data.pipe_name, 
pipe_bundle=self.data.pipe_bundle, results_dir=self.data.save_dir, 
models=self.data.models, grid_inc=self.data.inc, 
mc_sim_num=self.data.mc_sim_num, exp_mc_sim_num=self.data.exp_mc_sim_num, 
pre_run_dir=self.data.pre_run_dir, 
mc_sim_all_models=self.data.mc_sim_all_models, 
insignificance=self.data.insignificance, numeric_only=self.data.numeric_only, 
r1_fit=self.data.r1_fit)
 
         # Alias the relax data store data.
         data = ds.relax_gui.analyses[self.data_index]



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Thu Aug 28 00:00:02 2014</div>  
</body>
</html>
