<!-- MHonArc v2.6.16 -->
<!--X-Subject: r20310 &#45; /branches/relax_disp/user_functions/relax_disp.py -->
<!--X-From-R13: rqjneqNaze&#45;erynk.pbz -->
<!--X-Date: Tue, 16 Jul 2013 09:05:13 +0200 -->
<!--X-Message-Id: E1UyzJx&#45;0004N7&#45;5g@subversion.gna.org -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>r20310 - /branches/relax_disp/user_functions/relax_disp.py -- July 16, 2013 - 09:05</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />r20310 - /branches/relax_disp/user_functions/relax_disp.py</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00052" class="tabs">Index by Date</a> | <a href="threads.html#00052" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00051.html">Date Prev</a>] [<a href="msg00053.html">Date Next</a>] [<a href="msg00051.html">Thread Prev</a>] [<a href="msg00053.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: relax-commits@xxxxxxx</li>
<li class="menuitem">
<em>Date</em>: Tue, 16 Jul 2013 07:05:13 -0000</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00052.html">E1UyzJx-0004N7-5g@subversion.gna.org</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>edward</strong> on July 16, 2013 - 09:05:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Author: bugman
Date: Tue Jul 16 09:05:12 2013
New Revision: 20310

URL: <a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax?rev=20310&amp;view=rev">http://svn.gna.org/viewcvs/relax?rev=20310&amp;view=rev</a>
Log:
Rewrote the relax_disp.select_model user function documentation.

All of the detailed model information has been removed as it is now in the 
relax user manual.  The
model lists have been modified to match the analytic-numeric sectioning of 
the manual.


Modified:
    branches/relax_disp/user_functions/relax_disp.py

Modified: branches/relax_disp/user_functions/relax_disp.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/relax_disp/user_functions/relax_disp.py?rev=20310&amp;r1=20309&amp;r2=20310&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/relax_disp/user_functions/relax_disp.py?rev=20310&amp;r1=20309&amp;r2=20310&amp;view=diff</a>
==============================================================================
--- branches/relax_disp/user_functions/relax_disp.py (original)
+++ branches/relax_disp/user_functions/relax_disp.py Tue Jul 16 09:05:12 2013
@@ -462,154 +462,32 @@
 )
 # Description.
 uf.desc.append(Desc_container())
-uf.desc[-1].add_paragraph(&quot;A number of different dispersion models are 
supported.  These models are dependent upon whether the data originates from 
a CPMG-type or R1rho-type experiment.  For the CPMG-type experiments, the 
currently supported models are:&quot;)
+uf.desc[-1].add_paragraph(&quot;A number of different dispersion models are 
supported.  This includes both analytic models and numerical models.&quot;)
+# Analytic models.
+uf.desc.append(Desc_container('Analytic models'))
+uf.desc[-1].add_paragraph(&quot;The analytic models are closed solutions to the 
Bloch-McConnell equations under specific conditions.  The analytic models are 
dependent upon whether the data originates from a CPMG-type or R1rho-type 
experiment.  For the CPMG-type experiments, the currently supported models 
are:&quot;)
 uf.desc[-1].add_item_list_element(&quot;'%s'&quot; % MODEL_R2EFF, &quot;This is the model 
used to determine the R2eff values and errors required as the base data for 
all other models,&quot;)
 uf.desc[-1].add_item_list_element(&quot;'%s'&quot; % MODEL_NOREX, &quot;This is the model 
for no chemical exchange being present,&quot;)
 uf.desc[-1].add_item_list_element(&quot;'%s'&quot; % MODEL_LM63, &quot;The original Luz and 
Meiboom (1963) 2-site fast exchange equation with parameters {R20, ..., 
phi_ex, kex},&quot;)
 uf.desc[-1].add_item_list_element(&quot;'%s'&quot; % MODEL_CR72, &quot;The Carver and 
Richards (1972) 2-site equation for all time scales with parameters {R20, 
..., pA, dw, kex}.&quot;)
 uf.desc[-1].add_item_list_element(&quot;'%s'&quot; % MODEL_IT99, &quot;The Ishima and 
Torchia (1999) 2-site model for all time scales with pA &gt;&gt; pB and with 
parameters {R20, ..., phi_ex, padw2, kex}.&quot;)
-uf.desc[-1].add_item_list_element(&quot;'%s'&quot; % MODEL_NS_2SITE_STAR, &quot;The 
numerical solution for the 2-site Bloch-McConnell equations using complex 
conjugate matrices with parameters {R20A, R20B, ..., pA, dw, kex}.&quot;)
 uf.desc[-1].add_paragraph(&quot;For the R1rho-type experiment, the currently 
supported models are:&quot;)
 uf.desc[-1].add_item_list_element(&quot;'%s'&quot; % MODEL_R2EFF, &quot;This is the same 
model model as for the CPMG-type experiments except that the R1rho and not 
R2eff values are determined.&quot;)
 uf.desc[-1].add_item_list_element(&quot;'%s'&quot; % MODEL_NOREX, &quot;This is the model 
for no chemical exchange being present,&quot;)
 uf.desc[-1].add_item_list_element(&quot;'%s'&quot; % MODEL_M61, &quot;The Meiboom (1961) 
2-site fast exchange equation with parameters {R1rho', ..., phi_ex, kex},&quot;)
 uf.desc[-1].add_item_list_element(&quot;'%s'&quot; % MODEL_DPL94, &quot;The Davis, Perlman 
and London (1994) 2-site fast exchange equation with parameters {R1rho', ..., 
phi_ex, kex},&quot;)
 uf.desc[-1].add_item_list_element(&quot;'%s'&quot; % MODEL_M61B, &quot;The Meiboom (1961) 
2-site equation for all time scales with pA &gt;&gt; pB and with parameters 
{R1rho', ..., pA, dw, kex},&quot;)
-uf.desc[-1].add_paragraph(&quot;Except for '%s' and '%s', these CPMG and R1rho 
models are fit to clusterings of spins, or spin blocks.  The models are 
described in more detail below.&quot; % (MODEL_R2EFF, MODEL_NOREX))
-# R2eff model.
-uf.desc.append(Desc_container(&quot;The R2eff model&quot;))
-uf.desc[-1].add_paragraph(&quot;This is the simplest of all models in that the 
dispersion component of the data is not modelled.  It is used to determine 
either the R2eff or R1rho values and errors which are required as the base 
data for all other models.  It can be selected by setting the model to '%s'.  
Depending on the experiment type, this model will be handled differently.  
The R2eff/R1rho values determined can be later copied to the data pipes of 
the other dispersion models using the appropriate user functions.&quot; % 
MODEL_R2EFF)
-uf.desc[-1].add_paragraph(&quot;For the fixed relaxation time period CPMG-type 
experiments, the R2eff values are determined by direct calculation using the 
formula:&quot;)
-uf.desc[-1].add_verbatim(&quot;&quot;&quot;\
-                       -1         / I1(nu_CPMG) \ 
-    R2eff(nu_CPMG) = ------- * ln | ----------- | ,
-                     relax_T      \     I0      /\
-&quot;&quot;&quot;)
-uf.desc[-1].add_paragraph(&quot;where nu_CPMG is the CPMG frequency in Hz, equal 
to:&quot;)
-uf.desc[-1].add_verbatim(&quot;&quot;&quot;\
-                  1
-    nu_CPMG = ---------- ,
-              2 tau_CPMG\
-&quot;&quot;&quot;)
-uf.desc[-1].add_paragraph(&quot;relax_T is the fixed delay time, I0 is the 
reference peak intensity when relax_T is zero, and I1 is the peak intensity 
in a spectrum for a given nu_CPMG frequency.  The values and errors are 
determined with a single call of the calc user function.  The R1rho version 
of the equation is essentially the same:&quot;)
-uf.desc[-1].add_verbatim(&quot;&quot;&quot;\
-                   -1         / I1(nu1) \ 
-    R1rho(nu1) = ------- * ln | ------- | ,
-                 relax_T      \   I0    /\
-&quot;&quot;&quot;)
-uf.desc[-1].add_paragraph(&quot;where I1 is the peak intensity in a spectrum for 
a given spin-lock field strength nu1.&quot;)
-uf.desc[-1].add_paragraph(&quot;For the variable relaxation time period type 
experiments, the R2eff/R1rho values are determined by fitting to the simple 
two parameter exponential as in a R1 or R2 analysis.  Both R2eff/R1rho and 
the initial peak intensity I0 are optimised using the minimise user function 
for each exponential curve separately.  Monte Carlo simulations are used to 
obtain the parameter errors.&quot;)
-# The no exchange model.
-uf.desc.append(Desc_container(&quot;The model for no chemical exchange 
relaxation&quot;))
-uf.desc[-1].add_paragraph(&quot;This model is provided for model selection 
purposes.  In combination with frequentist methods, such as AIC, or Bayesian 
methods it can show if the presence of chemical exchange is statistically 
significant.  Optimisation is still required as one R20 value per magnetic 
field strength will be fit to the measured data for each spin system.  It is 
selected by setting the model to '%s'.&quot; % MODEL_NOREX)
-# LM63 model.
-uf.desc.append(Desc_container(&quot;The LM63 2-site fast exchange CPMG model&quot;))
-uf.desc[-1].add_paragraph(&quot;This is the original model for 2-site fast 
exchange for CPMG-type experiments.  It is selected by setting the model to 
'%s', here named after Luz and Meiboom 1963.  The equation for the exchange 
process is:&quot; % MODEL_LM63)
-uf.desc[-1].add_verbatim(&quot;&quot;&quot;\
-                  phi_ex   /     4 * nu_cpmg         /     kex     \ \ 
-    R2eff = R20 + ------ * | 1 - -----------  * tanh | ----------- | | ,
-                   kex     \         kex             \ 4 * nu_cpmg / /\
-&quot;&quot;&quot;)
-uf.desc[-1].add_paragraph(&quot;where:&quot;)
-uf.desc[-1].add_verbatim(&quot;&quot;&quot;\
-    phi_ex = pA * pB * delta_omega^2 ,\
-&quot;&quot;&quot;)
-uf.desc[-1].add_paragraph(&quot;kex is the chemical exchange rate constant, pA 
and pB are the populations of states A and B, and delta_omega is the chemical 
shift difference between the two states.&quot;)
-uf.desc[-1].add_paragraph(&quot;The reference for this equation is:&quot;)
-uf.desc[-1].add_list_element(&quot;Luz, S. and Meiboom S. (1963).  Nuclear 
Magnetic Resonance study of protolysis of trimethylammonium ion in aqueous 
solution - order of reaction with respect to solvent.  J. Chem. Phys., 39, 
366-370.  (DOI: 10.1063/1.1734254).&quot;)
-# CR72 model.
-uf.desc.append(Desc_container(&quot;The CR72 2-site CPMG model&quot;))
-uf.desc[-1].add_paragraph(&quot;This is the model for 2-site exchange on all 
times scales (with the constraint that pA &gt; pB), named after Carver and 
Richards 1972.  Is it selected by setting the model to '%s'.  The equation 
is:&quot; % MODEL_CR72)
-uf.desc[-1].add_verbatim(&quot;&quot;&quot;\
-    R2eff = 1/2 [ R2A0 + R2B0 + kex - 2.nu_cpmg.cosh^-1 (D+.cosh(eta+) - 
D-.cos(eta-) ] ,\
-&quot;&quot;&quot;)
-uf.desc[-1].add_paragraph(&quot;where:&quot;)
-uf.desc[-1].add_verbatim(&quot;&quot;&quot;\
-           1 /        Psi + 2delta_omega^2 \ 
-    D+/- = - | +/-1 + -------------------- | ,
-           2 \        sqrt(Psi^2 + zeta^2) /
-
-             2^(2/3)
-    eta+/- = ------- sqrt(+/-Psi + sqrt(Psi^2 + zeta^2)) ,
-             nu_cpmg
-
-    Psi = (R2A0 - R2B0 - pA.kex + pB.kex)^2 - delta_omega^2 + 4pA.pB.kex^2 ,
-
-    zeta = 2delta_omega (R2A0 - R2B0 - pA.kex + pB.kex).\
-&quot;&quot;&quot;)
-uf.desc[-1].add_paragraph(&quot;The reference for this equation is:&quot;)
-uf.desc[-1].add_list_element(&quot;Carver, J. P. and Richards, R. E. (1972).  
General 2-site solution for chemical exchange produced dependence of T2 upon 
Carr-Purcell pulse separation.  J. Magn. Reson., 6, 89-105.  (DOI: 
10.1016/0022-2364(72)90090-X).&quot;)
-uf.desc[-1].add_paragraph(&quot;For this model, the R20 relaxation rates for 
states A and B are assumed to be the same.  This simplifies the equations 
to:&quot;)
-uf.desc[-1].add_verbatim(&quot;&quot;&quot;\
-    R2eff = R20 + kex/2 - nu_cpmg.cosh^-1 (D+.cosh(eta+) - D-.cos(eta-) ,\
-&quot;&quot;&quot;)
-uf.desc[-1].add_paragraph(&quot;where:&quot;)
-uf.desc[-1].add_verbatim(&quot;&quot;&quot;\
-
-    Psi = kex^2 - delta_omega^2 ,
-
-    zeta = -2delta_omega (pA.kex - pB.kex).\
-&quot;&quot;&quot;)
-# IT99 model.
-uf.desc.append(Desc_container(&quot;The IT99 2-site CPMG model&quot;))
-uf.desc[-1].add_paragraph(&quot;This is the model for 2-site exchange on all 
times scales (with the constraint that pA &gt;&gt; pB), named after Ishima and 
Torchia 1999.  Is it selected by setting the model to '%s'.  The equation 
is:&quot; % MODEL_IT99)
-uf.desc[-1].add_verbatim(&quot;&quot;&quot;\
-              phi_ex * tex
-    Rex ~= ------------------- ,
-           1 + omega_a^2*tex^2
-
-    phi_ex = pA * pB * delta_omega^2 ,
-    
-    omega_a^2 = sqrt(omega_1^4 + pA^2*delta_omega^4) ,\
-&quot;&quot;&quot;)
-uf.desc[-1].add_paragraph(&quot;where tex = 1/(2kex), kex is the chemical 
exchange rate constant, pA and pB are the populations of states A and B, and 
delta_omega is the chemical shift difference between the two states.&quot;)
-uf.desc[-1].add_paragraph(&quot;The reference for this equation is:&quot;)
-uf.desc[-1].add_list_element(&quot;Ishima R. and Torchia D.A. (1999).  Estimating 
the time scale of chemical exchange of proteins from measurements of 
transverse relaxation rates in solution.  J. Biomol. NMR, 14, 369-372.  (DOI: 
10.1023/A:1008324025406).&quot;)
-# M61 model.
-uf.desc.append(Desc_container(&quot;The M61 2-site fast exchange R1rho model&quot;))
-uf.desc[-1].add_paragraph(&quot;This is the model for 2-site fast exchange for 
R1rho-type experiments.  It is selected by setting the model to '%s', here 
named after Meiboom 1961.  The equation for the exchange process is:&quot; % 
MODEL_M61)
-uf.desc[-1].add_verbatim(&quot;&quot;&quot;\
-                                      phi_ex * kex
-    R1rho = R1rho' + sin^2(theta) * ----------------- ,
-                                    kex^2 + omega_e^2\
-&quot;&quot;&quot;)
-uf.desc[-1].add_paragraph(&quot;where R1rho' is the R1rho value in the absence of 
exchange, theta is the rotating frame tilt angle,&quot;)
-uf.desc[-1].add_verbatim(&quot;&quot;&quot;\
-    phi_ex = pA * pB * delta_omega^2 ,\
-&quot;&quot;&quot;)
-uf.desc[-1].add_paragraph(&quot;kex is the chemical exchange rate constant, pA 
and pB are the populations of states A and B, delta_omega is the chemical 
shift difference between the two states, and omega_e is the effective field 
in the rotating frame.&quot;)
-uf.desc[-1].add_paragraph(&quot;The reference for this equation is:&quot;)
-uf.desc[-1].add_list_element(&quot;Meiboom S. (1961).  Nuclear magnetic resonance 
study of the proton transfer in water.  J. Chem. Phys., 34, 375-388.  (DOI: 
10.1063/1.1700960).&quot;)
-# DPL94 model.
-uf.desc.append(Desc_container(&quot;The DPL94 2-site fast exchange R1rho model&quot;))
-uf.desc[-1].add_paragraph(&quot;This is the model for 2-site fast exchange for 
R1rho-type experiments.  It is selected by setting the model to '%s', here 
named after Davis, Perlman and London 1994.  The equation for the exchange 
process is:&quot; % MODEL_DPL94)
-uf.desc[-1].add_verbatim(&quot;&quot;&quot;\
-                                      phi_ex * kex
-    R1rho = R1rho' + sin^2(theta) * ----------------- ,
-                                    kex^2 + omega_e^2\
-&quot;&quot;&quot;)
-uf.desc[-1].add_paragraph(&quot;where R1rho' is the R1rho value in the absence of 
exchange equal to&quot;)
-uf.desc[-1].add_verbatim(&quot;&quot;&quot;\
-    R1rho' = R1.cos^2(theta) + R2.sin^2(theta) ,\
-&quot;&quot;&quot;)
-uf.desc[-1].add_paragraph(&quot;theta is the rotating frame tilt angle,&quot;)
-uf.desc[-1].add_verbatim(&quot;&quot;&quot;\
-    phi_ex = pA * pB * delta_omega^2 ,\
-&quot;&quot;&quot;)
-uf.desc[-1].add_paragraph(&quot;kex is the chemical exchange rate constant, pA 
and pB are the populations of states A and B, delta_omega is the chemical 
shift difference between the two states, and omega_e is the effective field 
in the rotating frame.&quot;)
-uf.desc[-1].add_paragraph(&quot;The reference for this equation is:&quot;)
-uf.desc[-1].add_list_element(&quot;Davis, D. G., Perlman, M. E. and London, R. E. 
(1994).  Direct measurements of the dissociation-rate constant for 
inhibitor-enzyme complexes via the T1rho and T2 (CPMG) methods.  J. Magn. 
Reson, Series B, 104, 266-275.  (DOI: 10.1006/jmrb.1994.1084).&quot;)
-# M61 skew model.
-uf.desc.append(Desc_container(&quot;The M61 2-site, skewed, on-resonance R1rho 
model&quot;))
-uf.desc[-1].add_paragraph(&quot;This is the Meiboom 1961 model for 2-site 
exchange on all time scales for R1rho-type experiments.  It only holds for 
on-resonance experiments and when the populations are significantly skewed 
(pA &gt;&gt; pB).  It is selected by setting the model to '%s'.  The equation for 
the exchange process is:&quot; % MODEL_M61B)
-uf.desc[-1].add_verbatim(&quot;&quot;&quot;\
-                           pA^2.pB.delta_omega^2.kex
-    R1rho = R1rho' + -------------------------------------- ,
-                     kex^2 + pA^2.delta_omega^2 + omega_1^2\
-&quot;&quot;&quot;)
-uf.desc[-1].add_paragraph(&quot;where omega_1 = omega_e.&quot;)
-uf.desc[-1].add_paragraph(&quot;The reference for this equation is:&quot;)
-uf.desc[-1].add_list_element(&quot;Meiboom S. (1961).  Nuclear magnetic resonance 
study of the proton transfer in water.  J. Chem. Phys., 34, 375-388.  (DOI: 
10.1063/1.1700960).&quot;)
+uf.desc[-1].add_paragraph(&quot;Except for '%s' and '%s', these CPMG and R1rho 
models are fit to clusterings of spins, or spin blocks.&quot; % (MODEL_R2EFF, 
MODEL_NOREX))
+# Numerical models.
+uf.desc.append(Desc_container('Numerical models'))
+uf.desc[-1].add_paragraph(&quot;The Bloch-McConnell equations can also be solved 
numerically.  The numeric models are also dependent upon whether the data 
originates from a CPMG-type or R1rho-type experiment.  For the CPMG-type 
experiments, the currently supported models are:&quot;)
+uf.desc[-1].add_item_list_element(&quot;'%s'&quot; % MODEL_R2EFF, &quot;This is the model 
used to determine the R2eff values and errors required as the base data for 
all other models,&quot;)
+uf.desc[-1].add_item_list_element(&quot;'%s'&quot; % MODEL_NOREX, &quot;This is the model 
for no chemical exchange being present,&quot;)
+uf.desc[-1].add_item_list_element(&quot;'%s'&quot; % MODEL_NS_2SITE_STAR, &quot;The 
numerical solution for the 2-site Bloch-McConnell equations using complex 
conjugate matrices with parameters {R20A, R20B, ..., pA, dw, kex}.&quot;)
+uf.desc[-1].add_paragraph(&quot;For the R1rho-type experiment, only the base 
models are currently supported:&quot;)
+uf.desc[-1].add_item_list_element(&quot;'%s'&quot; % MODEL_R2EFF, &quot;This is the same 
model model as for the CPMG-type experiments except that the R1rho and not 
R2eff values are determined.&quot;)
+uf.desc[-1].add_item_list_element(&quot;'%s'&quot; % MODEL_NOREX, &quot;This is the model 
for no chemical exchange being present,&quot;)
+uf.desc[-1].add_paragraph(&quot;Again as for the analytic models, except for '%s' 
and '%s', these CPMG and R1rho models are fit to clusterings of spins, or 
spin blocks.  All models are described in full detail in the relax user 
manual.&quot; % (MODEL_R2EFF, MODEL_NOREX))
 # Prompt examples.
 uf.desc.append(Desc_container(&quot;Prompt examples&quot;))
 uf.desc[-1].add_paragraph(&quot;To pick the 2-site fast exchange model for all 
selected spins, type one of:&quot;)



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Tue Jul 16 09:20:01 2013</div>  
</body>
</html>
