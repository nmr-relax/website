<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: Looping over incomplete data&#45;set -->
<!--X-From-R13: "Sqjneq q'Ohiretar" <rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Fri, 13 Dec 2013 14:27:33 +0100 -->
<!--X-Message-Id: CAED9pY_1i_TZTGnLeJu8+cEWXmEXQie=f1cnyLmnoQU_py5sfA@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: CA+CBx2OzasbKcOVP1pC28227VzvwGxLr&#45;C6optLCDFo_hEuVNQ@mail.gmail.com -->
<!--X-Reference: CAED9pY9XYnLf43G=v4p9a3xMkBOP6wqFweCEy2e=o5KhxBpY7g@mail.gmail.com -->
<!--X-Reference: CA+CBx2PxQstpEeYaefoVUAjGn13vK9M&#45;w0Wo&#45;r=pbUH5EAqxig@mail.gmail.com -->
<!--X-Reference: CAED9pY_bN4&#45;V0M=dWcwb1ywyaNhRCK7f4fxq9hSLGvO+=A+u4g@mail.gmail.com -->
<!--X-Reference: CA+CBx2M&#45;0TdH=qV9+9h394HVw8&#45;4B6ToZcA9FfB1ZygNU9TOgA@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: Looping over incomplete data-set -- December 13, 2013 - 14:27</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: Looping over incomplete data-set</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00139" class="tabs">Index by Date</a> | <a href="threads.html#00139" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00138.html">Date Prev</a>] [<a href="msg00140.html">Date Next</a>] [<a href="msg00121.html">Thread Prev</a>] [<a href="msg00122.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Fri, 13 Dec 2013 14:27:00 +0100</li>
<li class="menuitem">
<em>Cc</em>: &quot;relax-devel@xxxxxxx&quot; &lt;relax-devel@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;	h=mime-version:sender:in-reply-to:references:date:message-id:subject	:from:to:cc:content-type:content-transfer-encoding;	bh=5eQ7WtyG+c5Ns4zIjXbnW54xk15OYEgSNwK9gCr1EaA=;	b=cJzpBISQ3snd7a81JuAaeBti9GgYrQtF/U3TthI39fpdJEXvDfJvbvx3/8xmuJxuCm	twWO9IZlRH/TwuZtEfQ2Y9qEQDLMk7ZYpEhTueI+s0A/JXD5RsPTFYXpZfXxHWvHW5aE	waroWqMgRdI+Chg9rm6F3H3aWLDU3uc3P2kcIppaGmkQ+H/zK21KfLud6/7QgKu/2//c	ydkDCZrIHEDMj1OuxB/EQ273+NpoHa6UZCVPWmbUYXH6XIhMkjresTyWjgs9FyZwRoiL	ukPONPDt2PkXjgMxmDUX3xa+HLz4C3A9WRsYpc7xy8TD8wY40z7fI59lBf/kLJauyz/p	PzDA==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00139.html">CAED9pY_1i_TZTGnLeJu8+cEWXmEXQie=f1cnyLmnoQU_py5sfA@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;CA+CBx2OzasbKcOVP1pC28227VzvwGxLr-C6optLCDFo_hEuVNQ@xxxxxxxxxxxxxx&gt;	&lt;CAED9pY9XYnLf43G=v4p9a3xMkBOP6wqFweCEy2e=o5KhxBpY7g@xxxxxxxxxxxxxx&gt;	&lt;CA+CBx2PxQstpEeYaefoVUAjGn13vK9M-w0Wo-r=pbUH5EAqxig@xxxxxxxxxxxxxx&gt;	&lt;CAED9pY_bN4-V0M=dWcwb1ywyaNhRCK7f4fxq9hSLGvO+=A+u4g@xxxxxxxxxxxxxx&gt;	&lt;CA+CBx2M-0TdH=qV9+9h394HVw8-4B6ToZcA9FfB1ZygNU9TOgA@xxxxxxxxxxxxxx&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on December 13, 2013 - 14:27:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Hi Troels,

I would suggest creating a bug report for this.  It could be that
other relax users encounter this exact problem.  So having a bug
report will help them understand what is happening.  It will also show
up as being fixed in the relax 3.1.2 release messages, once that
release is made.  This is also very useful for users who are following
the relax developments.

Cheers,

Edward



On 10 December 2013 21:41, Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi Edward.

Thank you for the generous explanation. :-)

I will dick into it.

Best
Troels


Troels Emtekær Linnet


2013/12/10 Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt;
</pre><blockquote class="blockquote"><pre style="margin: 0em;">

Hi,

How is your investigation of this problem going?  I've had a look and
have a few pointers for you.  See the
specific_analyses.relax_disp.disp_data module docstring to understand
this:

- Each exponential curve is specific to Ei (the experiment type, which
in this case is just R1rho), Mi (the magnetic field strength), Oi (the
spin-lock offset), and Di (the dispersion point, in this case the
spin-lock field strength).

- The current assumption in relax is that Ti (the time points of the
exponential curves) are the same for all Ei, Mi, Oi, and Di.

- For your R1rho data this is not the case!  It is probably a fair
assumption that this assumption will not hold in many cases.

- The &quot;for time in cdp.relax_time_list&quot; code just before the error
occurs is the problem.

- Instead, the loop_time() function should be used.

- However this function makes the above Ti assumption.

- So the solution would be to make the loop_time() function Ei, Mi,
Oi, and Di specific.  See the loop_offset() function for inspiration.
It should be very similar but loop over all Ti instead of all Oi, and
there should be 2 new checks for the dispersion point and time values
added there.  To check the dispersion points, you will need to fetch
that data in a similar way as is done in loop_point() (see the lines
under the comment &quot;# Assemble the dispersion data&quot;).  The key to this,
as well as all handling of dispersion data in the relax data store, is
that you loop over all spectrum or experiment IDs, matching to Ei, Mi,
Oi, Di, and Ti as needed to find if data exists for that combination.

I will be travelling tomorrow so may not be able to answer your
questions for a while.  I'll let you try to fix this one with the
above hints.

Regards,

Edward



On 10 December 2013 19:05, Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxx&gt;
wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi Edward.

The official repository passes all test at my place.

For the above mentioned case, I un-commented the line again
at my computer, to try to track down where I should make a plan for
future modifications.

Best
Troels


</pre></blockquote></blockquote><pre style="margin: 0em;">


</pre></blockquote><pre style="margin: 0em;">


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00117" href="msg00117.html">Looping over incomplete data-set</a></strong>
<ul><li><em>From:</em> Troels Emtekær Linnet</li></ul></li>
<li><strong><a name="00118" href="msg00118.html">Re: Looping over incomplete data-set</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00119" href="msg00119.html">Re: Looping over incomplete data-set</a></strong>
<ul><li><em>From:</em> Troels Emtekær Linnet</li></ul></li>
<li><strong><a name="00120" href="msg00120.html">Re: Looping over incomplete data-set</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00121" href="msg00121.html">Re: Looping over incomplete data-set</a></strong>
<ul><li><em>From:</em> Troels Emtekær Linnet</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Fri Dec 13 14:40:10 2013</div>  
</body>
</html>
