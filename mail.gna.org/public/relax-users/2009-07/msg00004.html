<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: [sr #2336] xpk files -->
<!--X-From-R13: "Sqjneq q'Ohiretar" <rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Mon, 20 Jul 2009 13:24:54 +0200 -->
<!--X-Message-Id: 7f080ed10907200423o2b55f6a2i5b3ea171f111e86b@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 20090501&#45;211120.sv0.75925@gna.org -->
<!--X-Reference: 20090525&#45;140921.sv7147.10456@gna.org -->
<!--X-Reference: 20090525&#45;181044.sv11501.1216@gna.org -->
<!--X-Reference: 20090527&#45;164445.sv0.40012@gna.org -->
<!--X-Reference: 20090527&#45;182518.sv11501.30268@gna.org -->
<!--X-Reference: 20090527&#45;204043.sv0.47671@gna.org -->
<!--X-Reference: 20090528&#45;224604.sv11501.4372@gna.org -->
<!--X-Reference: 20090529&#45;050440.sv0.81243@gna.org -->
<!--X-Reference: 7f080ed10905290247k191ae043habd278b50e63e6c7@mail.gmail.com -->
<!--X-Reference: fc45df4b3fac.4a1fa765@uwo.ca -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [sr #2336] xpk files -- July 20, 2009 - 13:24</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: [sr #2336] xpk files</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00004" class="tabs">Index by Date</a> | <a href="threads.html#00004" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00003.html">Date Prev</a>] [<a href="msg00005.html">Date Next</a>] [<a href="msg00002.html">Thread Prev</a>] [<a href="msg00007.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Elio Cino &lt;ecino@xxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Mon, 20 Jul 2009 13:23:40 +0200</li>
<li class="menuitem">
<em>Cc</em>: relax-users@xxxxxxx</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00004.html">7f080ed10907200423o2b55f6a2i5b3ea171f111e86b@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;20090501-211120.sv0.75925@xxxxxxx&gt;	&lt;20090525-140921.sv7147.10456@xxxxxxx&gt;	&lt;20090525-181044.sv11501.1216@xxxxxxx&gt;	&lt;20090527-164445.sv0.40012@xxxxxxx&gt;	&lt;20090527-182518.sv11501.30268@xxxxxxx&gt;	&lt;20090527-204043.sv0.47671@xxxxxxx&gt;	&lt;20090528-224604.sv11501.4372@xxxxxxx&gt;	&lt;20090529-050440.sv0.81243@xxxxxxx&gt;	&lt;7f080ed10905290247k191ae043habd278b50e63e6c7@xxxxxxxxxxxxxx&gt;	&lt;fc45df4b3fac.4a1fa765@xxxxxx&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on July 20, 2009 - 13:24:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Dear Elio,

Sorry for the delay.  I hadn't realised that there were unanswered
questions here.  Please see below for more comments.


On Fri, May 29, 2009 at 3:14 PM, Elio Cino &lt;ecino@xxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Thanks for the reply.


1)  Which program are you using to measure peak intensities?
</pre><blockquote class="blockquote"><pre style="margin: 0em;"> nmrviewj
</pre></blockquote><pre style="margin: 0em;">

</pre><blockquote class="blockquote"><pre style="margin: 0em;">2)  For peak intensities, are you using heights or volumes?
 intensities from nmrviewj
</pre></blockquote></blockquote><pre style="margin: 0em;">

The intensity just is the amount of signal, and can be the height at
the top of the peak, the volume of part or all of the peak, or some
other measure.  This is important for the error analysis part.


</pre><blockquote class="blockquote"><blockquote class="blockquote"><pre style="margin: 0em;">3)  How exactly are you getting your noise estimates?
RMSD of the
entire spectrum?  RMSD of a box over the peak?  Or
RMSD of the region
between peaks?
</pre></blockquote><pre style="margin: 0em;">I think this only applies for the NOE. I am using a box between peaks, and
getval in nmrviewj to get the Sdev (usually around 0.018 for my NOE data). I
just put this value into the noe.py script.
</pre></blockquote><pre style="margin: 0em;">

Does anyone know how getval works?  Does it give an RMSD?  A SSE?  A
chi-squared?  Is it the integral of absolute values?


</pre><blockquote class="blockquote"><blockquote class="blockquote"><pre style="margin: 0em;">4)  Are you using the same program for peak intensities and peak
errors?  If not, this is fatal - absolute values change
wildly between
different programs and spectrum formats.  Hence why S/N
ratios are
important.
 Yes, I use nmrviewj for both.
</pre></blockquote><pre style="margin: 0em;">

</pre><blockquote class="blockquote"><pre style="margin: 0em;">5)  You mentioned you have duplicates.  Could you
elaborate?  Do you
have 10 spectra for the R1 experiment and 2 of these are in duplicate?
 For the NOE, are these in duplicate or triplicate (note
that single
spectra are all that are necessary)?
</pre></blockquote><pre style="margin: 0em;">For T1, and T1rho, I have 12 spectra each, and 2 from each are duplicates
(10 novel spectra for each T1 and T1rho).
</pre><blockquote class="blockquote"><pre style="margin: 0em;">

6)  You said that spectrum.read_intensities() with NMRView
worked in
the end, but this is impossible with relax-1.3.3.  Have you
checkedout a copy of the 1.3 repository line with this new code?
</pre></blockquote><pre style="margin: 0em;">

</pre><blockquote class="blockquote"><pre style="margin: 0em;"> Hmm... maybe I was not clear. I didn't know how to get nmrview lists read
(relax was looking for sparky), and was asking how to do this. I was 
getting
some strange responses for some reason, but eventually found out all I had
to do was include &quot;format='nmrview' into the relax_fit.py script where I
load in the xpk files. This allowed relax to run successfully. I am using
1.3.3 on linux. I have not made any other changes to the sample 
relax_fit.py
script besides adding the format='nmrview' part.
</pre></blockquote></blockquote><pre style="margin: 0em;">

Ok, rudimentary NMRView support is in relax-1.3.3.  I can't remember
exactly, but I think the support has significant problems.  This
should be fixed in the 1.3 line, where format detection is now
automatic.


</pre><blockquote class="blockquote"><blockquote class="blockquote"><pre style="margin: 0em;">7)  If you are using the 1.3 repository line code, have you
carefullyread the documentation for all the 'spectrum' user
functions?  E.g:
relax&gt; help(spectrum.baseplane_rmsd)
relax&gt; help(spectrum.error_analysis)
relax&gt; help(spectrum.integration_points)
relax&gt; help(spectrum.read_intensities)
relax&gt; help(spectrum.replicated)
</pre></blockquote><pre style="margin: 0em;">

</pre><blockquote class="blockquote"><pre style="margin: 0em;"> I looked over some of the briefly. Am I supposed to be doing anything else
other than running the sample script with my xpk files in order to
successfully get relaxation rates for my data?
</pre></blockquote></blockquote><pre style="margin: 0em;">

The script should be modified to suit your system, but other than that
it should be the same.


</pre><blockquote class="blockquote"><blockquote class="blockquote"><pre style="margin: 0em;">8)  Could you attach your relax script to your email?
And maybe the
input and output data for a single spin system where you see a
difference between the matlab script and relax?
</pre></blockquote><pre style="margin: 0em;">


I am not currently at my workplace. I can get the script later, and some
differences later. But, it is just the sample script provided with 1.3.3
with my xpk files being loaded. The same goes for the noe.py script (I also
put in the noise sdev value from nmrview for this one). The T1, T1rho rates,
and NOE all have fairly high errors when processed with relax compared to my
other method. I would like to use relax, but need to figure out why it is
giving such high errors. Many of the T1 rates have errors 150+% in relax for
some reason. I am only using well-resolved peaks. Maybe there
is something small I am missing..any help is appreciated.
</pre></blockquote><pre style="margin: 0em;">

Is this now working?  In all of my test data, I have not seen this
error.  Oh, do you mean T1 or R1?  If you invert the R1 value to get
T1 and then invert the sigma_R1 value to get the sigma_T1 standard
deviation, this is a mistake that would cause errors &gt; 100%.  To find
the exact problem (assuming it still exists and is really a problem),
creating a bug report would be very useful.  This process is described
in detail in the manual.  Attaching files containing one or two lines
of data which reproduce the problem would be extremely useful for me
to be able to track down the problem.  A full description of the other
programs and values obtained would also be very useful.

Cheers,

Edward


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Wed Jul 29 22:21:38 2009</div>  
</body>
</html>
