<!-- MHonArc v2.6.16 -->
<!--X-Subject: r13191 &#45; /branches/gui_testing/gui/wizard.py -->
<!--X-From-R13: rqjneqNaze&#45;erynk.pbz -->
<!--X-Date: Thu, 23 Jun 2011 19:48:36 +0200 -->
<!--X-Message-Id: E1QZo16&#45;0001L7&#45;SB@subversion.gna.org -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>r13191 - /branches/gui_testing/gui/wizard.py -- June 23, 2011 - 19:48</title>
<link rel="stylesheet" type="text/css" href="/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="https://gna.org/images/gna.theme/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />r13191 - /branches/gui_testing/gui/wizard.py</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00358" class="tabs">Index by Date</a> | <a href="threads.html#00358" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00357.html">Date Prev</a>] [<a href="msg00359.html">Date Next</a>] [<a href="msg00357.html">Thread Prev</a>] [<a href="msg00359.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: relax-commits@xxxxxxx</li>
<li class="menuitem">
<em>Date</em>: Thu, 23 Jun 2011 17:48:36 -0000</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00358.html">E1QZo16-0001L7-SB@subversion.gna.org</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>edward</strong> on June 23, 2011 - 19:48:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Author: bugman
Date: Thu Jun 23 19:48:36 2011
New Revision: 13191

URL: <a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax?rev=13191&amp;view=rev">http://svn.gna.org/viewcvs/relax?rev=13191&amp;view=rev</a>
Log:
Rearrangement of the wizard page methods and variables.

Many variables and methods which should not be touched by the derived classes 
have been made
private.  The execute() and update() methods have been deleted.  And the 
class docstring has been
updated to describe which methods should be over-written and which should be 
used.


Modified:
    branches/gui_testing/gui/wizard.py

Modified: branches/gui_testing/gui/wizard.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/gui_testing/gui/wizard.py?rev=13191&amp;r1=13190&amp;r2=13191&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/gui_testing/gui/wizard.py?rev=13191&amp;r1=13190&amp;r2=13191&amp;view=diff</a>
==============================================================================
--- branches/gui_testing/gui/wizard.py (original)
+++ branches/gui_testing/gui/wizard.py Thu Jun 23 19:48:36 2011
@@ -84,7 +84,24 @@
 class Wiz_page(wx.Panel):
     &quot;&quot;&quot;The wizard pages to be placed inside the wizard.
 
-    To inherit from this class, you must supply minimally the add_contents() 
and on_exit() methods.  The add_contents() method should build the specific 
GUI elements, and the on_exit() method is called when clicking on the apply, 
ok, or finish buttons.  All other methods which are not private can be 
over-written.
+    To inherit from this class, you must supply minimally the add_contents() 
and on_exit() methods.  The add_contents() method should build the specific 
GUI elements, and the on_exit() method is called when clicking on the apply, 
ok, or finish buttons.  The following methods are also designed to be 
overwritten:
+
+        - add_artwork(), this builds the left hand artwork section of the 
page.
+        - add_contents(), this builds the right hand section of the page.
+        - on_display(), this is executed when the page is displayed.
+        - on_exit(), this is executed when the wizard is terminated or the 
apply button is hit.
+        - on_next(), this is executed when moving to the next wizard page.
+
+    The following methods can be used by add_contents() to create standard 
GUI elements:
+
+        - chooser()
+        - combo_box()
+        - file_selection()
+        - free_file_format()
+        - input_field()
+        - text()
+
+    These are described in full detail in their docstrings.
     &quot;&quot;&quot;
 
     # Some class variables.
@@ -119,21 +136,21 @@
         image_x, image_y = self.image.GetSize()
 
         # Calculate the size of the main section, and the subdivisions.
-        self.main_size = parent._size_x - image_x - self.art_spacing - 
2*parent._border
+        self._main_size = parent._size_x - image_x - self.art_spacing - 
2*parent._border
         if self.divider:
-            self.div_left = self.divider
-            self.div_right = self.main_size - self.divider
+            self._div_left = self.divider
+            self._div_right = self._main_size - self.divider
         else:
-            self.div_left = self.div_right = self.main_size / 2
+            self._div_left = self._div_right = self._main_size / 2
 
         # Add the main sizer.
-        main_sizer = self.build_main_section(box_main)
+        main_sizer = self._build_main_section(box_main)
 
         # Add the title.
-        self.add_title(main_sizer)
+        self._add_title(main_sizer)
 
         # Add the description.
-        self.add_desc(main_sizer)
+        self._add_desc(main_sizer)
 
         # Add the specific GUI elements (bounded by spacers).
         main_sizer.AddStretchSpacer()
@@ -142,23 +159,7 @@
         main_sizer.AddStretchSpacer()
 
 
-    def add_artwork(self, sizer):
-        &quot;&quot;&quot;Add the artwork to the dialog.
-
-        @param sizer:   A sizer object.
-        @type sizer:    wx.Sizer instance
-        &quot;&quot;&quot;
-
-        # Add the graphics.
-        if self.image_path:
-            self.image = wx.StaticBitmap(self, -1, 
wx.Bitmap(self.image_path, wx.BITMAP_TYPE_ANY))
-            sizer.Add(self.image, 0, wx.TOP|wx.ALIGN_CENTER_HORIZONTAL, 0)
-
-        # A spacer.
-        sizer.AddSpacer(self.art_spacing)
-
-
-    def add_desc(self, sizer):
+    def _add_desc(self, sizer):
         &quot;&quot;&quot;Add the description to the dialog.
 
         @param sizer:   A sizer object.
@@ -177,7 +178,7 @@
         #text.SetFont(wx.Font(18, wx.DEFAULT, wx.NORMAL, wx.NORMAL))
 
         # Wrap the text.
-        text.Wrap(self.main_size)
+        text.Wrap(self._main_size)
 
         # Add the text.
         sizer.Add(text, 0, wx.ALIGN_LEFT|wx.ALL, 0)
@@ -188,7 +189,7 @@
         sizer.AddSpacer(5)
 
 
-    def add_title(self, sizer):
+    def _add_title(self, sizer):
         &quot;&quot;&quot;Add the title to the dialog.
 
         @param sizer:   A sizer object.
@@ -211,17 +212,7 @@
         sizer.AddSpacer(10)
 
 
-    def add_contents(self, sizer):
-        &quot;&quot;&quot;Add the specific GUI elements (dummy method).
-
-        @param sizer:   A sizer object.
-        @type sizer:    wx.Sizer instance
-        &quot;&quot;&quot;
-
-        raise RelaxImplementError
-
-
-    def apply(self, event):
+    def _apply(self, event):
         &quot;&quot;&quot;Apply the operation.
 
         @param event:   The wx event.
@@ -235,26 +226,7 @@
             error_message(instance.text, instance.__class__.__name__)
 
 
-    def build_central_section(self, sizer):
-        &quot;&quot;&quot;Add the centre part of the dialog.
-
-        @param sizer:   A sizer object.
-        @type sizer:    wx.Sizer instance
-        @return:        The sizer object for the centre part of the dialog.
-        @rtype:         wx.Sizer instance
-        &quot;&quot;&quot;
-
-        # Use a grid sizer for packing the elements.
-        centre_sizer = wx.BoxSizer(wx.HORIZONTAL)
-
-        # Pack the sizer into the frame.
-        sizer.Add(centre_sizer, 1, wx.EXPAND|wx.ALL, 0)
-
-        # Return the sizer.
-        return centre_sizer
-
-
-    def build_main_section(self, sizer):
+    def _build_main_section(self, sizer):
         &quot;&quot;&quot;Add the main part of the dialog.
 
         @param sizer:   A sizer object.
@@ -271,6 +243,60 @@
 
         # Return the sizer.
         return main_sizer
+
+
+    def _free_file_format_save(self, event):
+        &quot;&quot;&quot;Save the free file format widget contents into the relax data 
store.
+
+        @param event:   The wx event.
+        @type event:    wx event
+        &quot;&quot;&quot;
+
+        # Get the column numbers.
+        ds.relax_gui.free_file_format.spin_id_col =   
gui_to_int(self.spin_id_col.GetValue())
+        ds.relax_gui.free_file_format.mol_name_col =  
gui_to_int(self.mol_name_col.GetValue())
+        ds.relax_gui.free_file_format.res_num_col =   
gui_to_int(self.res_num_col.GetValue())
+        ds.relax_gui.free_file_format.res_name_col =  
gui_to_int(self.res_name_col.GetValue())
+        ds.relax_gui.free_file_format.spin_num_col =  
gui_to_int(self.spin_num_col.GetValue())
+        ds.relax_gui.free_file_format.spin_name_col = 
gui_to_int(self.spin_name_col.GetValue())
+
+        # The data and error.
+        if hasattr(self, 'data_col'):
+            ds.relax_gui.free_file_format.data_col = 
gui_to_int(self.data_col.GetValue())
+        if hasattr(self, 'err_col'):
+            ds.relax_gui.free_file_format.err_col = 
gui_to_int(self.err_col.GetValue())
+
+        # The column separator.
+        ds.relax_gui.free_file_format.sep = str(self.sep.GetValue())
+        if ds.relax_gui.free_file_format.sep == 'white space':
+            ds.relax_gui.free_file_format.sep = None
+
+
+    def add_artwork(self, sizer):
+        &quot;&quot;&quot;Add the artwork to the dialog.
+
+        @param sizer:   A sizer object.
+        @type sizer:    wx.Sizer instance
+        &quot;&quot;&quot;
+
+        # Add the graphics.
+        if self.image_path:
+            self.image = wx.StaticBitmap(self, -1, 
wx.Bitmap(self.image_path, wx.BITMAP_TYPE_ANY))
+            sizer.Add(self.image, 0, wx.TOP|wx.ALIGN_CENTER_HORIZONTAL, 0)
+
+        # A spacer.
+        sizer.AddSpacer(self.art_spacing)
+
+
+    def add_contents(self, sizer):
+        &quot;&quot;&quot;Add the specific GUI elements (dummy method).
+
+        @param sizer:   A sizer object.
+        @type sizer:    wx.Sizer instance
+        &quot;&quot;&quot;
+
+        # This must be supplied.
+        raise RelaxImplementError
 
 
     def chooser(self, sizer, desc, func, choices):
@@ -319,7 +345,7 @@
         @type evt_fn:       func
         @keyword tooltip:   The tooltip which appears on hovering over the 
text or input field.
         @type tooltip:      str
-        @keyword divider:   The optional position of the divider.  If None, 
the class variable div_left will be used.
+        @keyword divider:   The optional position of the divider.  If None, 
the class variable _div_left will be used.
         @type divider:      None or int
         @keyword padding:   Spacing to the left and right of the widgets.
         @type padding:      int
@@ -343,7 +369,7 @@
 
         # The divider.
         if not divider:
-            divider = self.div_left
+            divider = self._div_left
 
         # Spacing.
         x, y = text.GetSize()
@@ -406,11 +432,11 @@
 
         # Spacing.
         x, y = text.GetSize()
-        sub_sizer.AddSpacer((self.div_left - x, 0))
+        sub_sizer.AddSpacer((self._div_left - x, 0))
 
         # The input field.
         field = wx.TextCtrl(self, -1, '')
-        field.SetMinSize((self.div_right - 27, 27))
+        field.SetMinSize((self._div_right - 27, 27))
         sub_sizer.Add(field, 0, wx.ALIGN_CENTER_VERTICAL, 0)
 
         # The file selection object.
@@ -448,7 +474,7 @@
         # Init.
         sub_sizer = wx.StaticBoxSizer(box, wx.VERTICAL)
         sub_sizer.AddSpacer(10)
-        divider = self.div_left - 15
+        divider = self._div_left - 15
         padding = 10
         spacer = 3
 
@@ -498,7 +524,7 @@
             button_sizer.AddSpacer(padding)
 
             # Bind the click event.
-            self.Bind(wx.EVT_BUTTON, self.free_file_format_save, button)
+            self.Bind(wx.EVT_BUTTON, self._free_file_format_save, button)
 
             # Add the button sizer to the widget (with spacing).
             sub_sizer.AddSpacer(10-spacer)
@@ -507,7 +533,7 @@
         # Set the size of the widget.
         sub_sizer.AddSpacer(10)
         x, y = box.GetSize()
-        box.SetMinSize((self.main_size, y))
+        box.SetMinSize((self._main_size, y))
 
         # The border of the widget.
         border = wx.BoxSizer()
@@ -518,33 +544,6 @@
         # Add to the main sizer (followed by stretchable spacing).
         sizer.Add(border, 0, wx.EXPAND)
         sizer.AddStretchSpacer()
-
-
-    def free_file_format_save(self, event):
-        &quot;&quot;&quot;Save the free file format widget contents into the relax data 
store.
-
-        @param event:   The wx event.
-        @type event:    wx event
-        &quot;&quot;&quot;
-
-        # Get the column numbers.
-        ds.relax_gui.free_file_format.spin_id_col =   
gui_to_int(self.spin_id_col.GetValue())
-        ds.relax_gui.free_file_format.mol_name_col =  
gui_to_int(self.mol_name_col.GetValue())
-        ds.relax_gui.free_file_format.res_num_col =   
gui_to_int(self.res_num_col.GetValue())
-        ds.relax_gui.free_file_format.res_name_col =  
gui_to_int(self.res_name_col.GetValue())
-        ds.relax_gui.free_file_format.spin_num_col =  
gui_to_int(self.spin_num_col.GetValue())
-        ds.relax_gui.free_file_format.spin_name_col = 
gui_to_int(self.spin_name_col.GetValue())
-
-        # The data and error.
-        if hasattr(self, 'data_col'):
-            ds.relax_gui.free_file_format.data_col = 
gui_to_int(self.data_col.GetValue())
-        if hasattr(self, 'err_col'):
-            ds.relax_gui.free_file_format.err_col = 
gui_to_int(self.err_col.GetValue())
-
-        # The column separator.
-        ds.relax_gui.free_file_format.sep = str(self.sep.GetValue())
-        if ds.relax_gui.free_file_format.sep == 'white space':
-            ds.relax_gui.free_file_format.sep = None
 
 
     def input_field(self, sizer, desc, tooltip=None, divider=None, 
padding=0, spacer=None):
@@ -556,7 +555,7 @@
         @type desc:         str
         @keyword tooltip:   The tooltip which appears on hovering over the 
text or input field.
         @type tooltip:      str
-        @keyword divider:   The optional position of the divider.  If None, 
the class variable div_left will be used.
+        @keyword divider:   The optional position of the divider.  If None, 
the class variable _div_left will be used.
         @type divider:      None or int
         @keyword padding:   Spacing to the left and right of the widgets.
         @type padding:      int
@@ -578,7 +577,7 @@
 
         # The divider.
         if not divider:
-            divider = self.div_left
+            divider = self._div_left
 
         # Spacing.
         x, y = text.GetSize()
@@ -620,14 +619,17 @@
     def on_exit(self):
         &quot;&quot;&quot;To be over-ridden if an action is to be performed just before 
exiting the page.
 
-        This method is called when moving 
-        &quot;&quot;&quot;
+        This method is called when terminating the wizard or hitting the 
apply button. 
+        &quot;&quot;&quot;
+
+        # This must be supplied.
+        raise RelaxImplementError
 
 
     def on_next(self):
         &quot;&quot;&quot;To be over-ridden if an action is to be performed just before 
moving to the next page.
 
-        This method is called when moving 
+        This method is called when moving to the next page of the wizard.
         &quot;&quot;&quot;
 
 
@@ -653,14 +655,14 @@
 
         # Spacing.
         x, y = text.GetSize()
-        sub_sizer.AddSpacer((self.div_left - x, 0))
+        sub_sizer.AddSpacer((self._div_left - x, 0))
 
         # The non-editable text.
         text = wx.TextCtrl(self, -1, default, style=wx.ALIGN_LEFT)
         text.SetEditable(False)
         colour = self.GetBackgroundColour()
         text.SetOwnBackgroundColour(colour)
-        text.SetMinSize((self.div_right, 27))
+        text.SetMinSize((self._div_right, 27))
         sub_sizer.Add(text, 0, wx.ALIGN_CENTER_VERTICAL, 0)
 
         # Add to the main sizer (followed by stretchable spacing).
@@ -669,10 +671,6 @@
 
         # Return the object.
         return text
-
-
-    def update(self, event):
-        &quot;&quot;&quot;Dummy method for updating the UI.&quot;&quot;&quot;
 
 
 
@@ -769,7 +767,7 @@
                 button.SetToolTipString(&quot;Apply the operation&quot;)
                 button.SetSize(self._size_button)
                 self._button_sizers[i].Add(button, 0, wx.ADJUST_MINSIZE, 0)
-                self.Bind(wx.EVT_BUTTON, self._pages[i].apply, button)
+                self.Bind(wx.EVT_BUTTON, self._pages[i]._apply, button)
                 self._buttons[i]['apply'] = button
 
                 # Spacer.
@@ -890,10 +888,10 @@
         @type event:    wx event
         &quot;&quot;&quot;
 
-        # Loop over all pages and execute their apply() methods.
+        # Loop over all pages and execute their _apply() methods.
         for i in range(self._num_pages):
-            # Execute the apply method.
-            self._pages[i].apply(event)
+            # Execute the _apply method.
+            self._pages[i]._apply(event)
 
         # Then destroy the dialog.
         self.Destroy()



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer">You are on the <a href="http://gna.org">Gna!</a> mail server.</div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Thu Jun 23 20:00:02 2011</div>  
</body>
</html>
