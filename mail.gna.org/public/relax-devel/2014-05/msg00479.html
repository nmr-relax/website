<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [bug #22071] relax unit test and system test not functional -->
<!--X-From-R13: "Sqjneq q'Ohiretar" &#60;rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Fri, 23 May 2014 11:02:01 +0200 -->
<!--X-Message-Id: CAED9pY_qccE8QL9u8+Vi5jbdTdy+w9soWNk1n_u6_6KQJ3awWA@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 20140522&#45;195700.sv20529.15353@gna.org -->
<!--X-Reference: 20140522&#45;205022.sv20529.52321@gna.org -->
<!--X-Reference: 20140522&#45;205801.sv20529.6936@gna.org -->
<!--X-Reference: CAED9pY_=NBp9Ef=duUxuX1yAtyjTqUR1Z=Y2R2hPyn=WyR=2Fw@mail.gmail.com -->
<!--X-Reference: CAED9pY&#45;ufrNCzfChXLCzYp2HOsUXJEix4mtHwHv67qOy25K2Ew@mail.gmail.com -->
<!--X-Reference: CAED9pY8L5mC=LBb9d6V4XWYWyXRryQRuLxGfc&#45;YFUi1XO2jP0g@mail.gmail.com -->
<!--X-Reference: CA+CBx2NdcDdbaYmFHfoW2Vc389mieWFs2wgc083W57jOw5=uAw@mail.gmail.com -->
<!--X-Reference: CAED9pY80Cp8fEmb1z=6wu2o3xv+duO8Go7GqOm9SOuNDEw0&#45;jQ@mail.gmail.com -->
<!--X-Reference: CA+CBx2M0H&#45;W=Tp4fJmPSJDx6wuEYuh0t91yekLG+0TWCx16ALw@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [bug #22071] relax unit test and system test not functional -- May 23, 2014 - 11:02</title>
<link rel="stylesheet" type="text/css" href="/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="https://gna.org/images/gna.theme/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: [bug #22071] relax unit test and system test not functional</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00479" class="tabs">Index by Date</a> | <a href="threads.html#00479" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00478.html">Date Prev</a>] [<a href="msg00480.html">Date Next</a>] [<a href="msg00478.html">Thread Prev</a>] [<a href="msg00481.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Fri, 23 May 2014 11:01:11 +0200</li>
<li class="menuitem">
<em>Cc</em>: &quot;Troels E. Linnet&quot; &lt;NO-REPLY.INVALID-ADDRESS@xxxxxxx&gt;, &quot;relax-devel@xxxxxxx&quot; &lt;relax-devel@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113; h=mime-version:sender:in-reply-to:references:date:message-id:subject :from:to:cc:content-type:content-transfer-encoding; bh=7Y1XJG9cZP82EHP5TC5Et1/p1Pd5Uk/pGz8t3lqqdbY=; b=E9725swTdDD+L70OiFlg0aZb+rujfWbwXerxaGBJvVfJgSUH86pOmlse2ByZ2tPfxT W6V+SmnqAY9s5Qn80r77JtJs5dTBBCe4vYoL46MgLfOvOdtvuH/ovWFoX9Kiu2T5a7bT EJpLiPYKrik/1xtRnLghU+/FLo8IsaELNjNyAY581OFLe1cYUseNI/C2mQU6Lo2bLoxW ZlwpTLV+cxap7uRmbJQGYhBOsjyDLHAb0rnmT/BA7FKtkernSqZ4MXh0mS3NAvLFRWJc fqtkX/hqaKArWrv8iPGHyGedY1zoCBBcpTp+JtecNeaWHEVBZgdLKv3wbyaFktsuKsmT PsRw==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00479.html">CAED9pY_qccE8QL9u8+Vi5jbdTdy+w9soWNk1n_u6_6KQJ3awWA@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;<a href="msg00463.html">20140522-195700.sv20529.15353@gna.org</a>&gt; &lt;<a href="msg00464.html">20140522-205022.sv20529.52321@gna.org</a>&gt; &lt;<a href="msg00465.html">20140522-205801.sv20529.6936@gna.org</a>&gt; &lt;CAED9pY_=NBp9Ef=duUxuX1yAtyjTqUR1Z=Y2R2hPyn=WyR=2Fw@mail.gmail.com&gt; &lt;<a href="msg00468.html">CAED9pY-ufrNCzfChXLCzYp2HOsUXJEix4mtHwHv67qOy25K2Ew@mail.gmail.com</a>&gt; &lt;CAED9pY8L5mC=LBb9d6V4XWYWyXRryQRuLxGfc-YFUi1XO2jP0g@mail.gmail.com&gt; &lt;CA+CBx2NdcDdbaYmFHfoW2Vc389mieWFs2wgc083W57jOw5=uAw@mail.gmail.com&gt; &lt;CAED9pY80Cp8fEmb1z=6wu2o3xv+duO8Go7GqOm9SOuNDEw0-jQ@mail.gmail.com&gt; &lt;CA+CBx2M0H-W=Tp4fJmPSJDx6wuEYuh0t91yekLG+0TWCx16ALw@mail.gmail.com&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on May 23, 2014 - 11:02:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">You might have to help me work this one out, as everything works for
me on all test systems.  What exactly do you see?  Can you run
individual tests:

$ ./relax -s Relax_disp.test_cpmg_synthetic_dx_map_points

How long do you wait?  Does the test suite hang indefinitely, or is it
just slower to start?  Is this only on your git-svn code, or svn as
well?  Can you go back to r23342, i.e. before the git-svn info
changes, and see if the problem is there.  Or back to r23359, just
before the test suite printout changes, and check at that point too.

Cheers!

Edward


On 23 May 2014 10:46, Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Yup:

relax_disp_speed -s
tlinnet@linmac:disp_speed$ cd $s; git svn info
Path: .
URL: svn+ssh://svn.gna.org/svn/relax/branches/disp_speed
Repository Root: svn+ssh://svn.gna.org/svn/relax
Repository UUID: b7916896-f9f9-0310-9fe5-b3996d8957d5
Revision: 23372
Node Kind: directory
Schedule: normal
Last Changed Author: tlinnet
Last Changed Rev: 23372
Last Changed Date: 2014-05-23 10:30:49 +0200 (Fri, 23 May 2014)

2014-05-23 10:42 GMT+02:00 Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt;:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi,

Cheers.  The change I made at r23366
(<a  rel="nofollow" href="http://article.gmane.org/gmane.science.nmr.relax.scm/21112">http://article.gmane.org/gmane.science.nmr.relax.scm/21112</a>) however
replaces this with:

$ cd $s; git svn info

Does this work for you?

Regards,

Edward



On 23 May 2014 10:38, Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi Ed.

It still does not work:
But

relax&gt; from status import Status; status = Status()
relax&gt; print status.install_path
/Users/tlinnet/software/disp_speed
relax&gt;
tlinnet@linmac:disp_speed$ s=/Users/tlinnet/software/disp_speed
tlinnet@linmac:disp_speed$ cd $s; git svn find-rev $(git rev-parse HEAD)
23372

2014-05-23 9:21 GMT+02:00 Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt;:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi,

I just made another simplification for the git-svn version.py support:

r23366:  <a  rel="nofollow" href="http://article.gmane.org/gmane.science.nmr.relax.scm/21112">http://article.gmane.org/gmane.science.nmr.relax.scm/21112</a>

Once this issue is resolved, I'll look at releasing relax 3.2.1 with
all the recent bugfixes.

Cheers,

Edward




On 23 May 2014 09:12, Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi Troels,

If that change doesn't work, could you try running:

$ cd %s; git svn find-rev $(git rev-parse HEAD)

where the %s is replaced by the value of status.install_path.  This is
the command in the version file for obtaining the subversion revision
number from a git-svn copy.  Or:

$ cd %s; git svn info

This is the command used to find the repository URL.  These two bits
of information are used for the relax intro text, which used to look
like:

&quot;&quot;&quot;

                                  relax repository checkout rNone
                                                None

                              Molecular dynamics by NMR data analysis

                             Copyright (C) 2001-2006 Edward d'Auvergne
                         Copyright (C) 2006-2014 the relax development 
team

&quot;&quot;&quot;

But this new git-svn support:

&quot;&quot;&quot;

                                  relax repository checkout r23365
                               svn+ssh://svn.gna.org/svn/relax/trunk

                              Molecular dynamics by NMR data analysis

                             Copyright (C) 2001-2006 Edward d'Auvergne
                         Copyright (C) 2006-2014 the relax development 
team

&quot;&quot;&quot;

Maybe there is a shell incompatibility with one of these commands, so
make sure you use the 'cd %s; ' part to check that too.

Cheers,

Edward





On 23 May 2014 09:05, Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi,

I first thought that it might have been this test suite printout 
change:

r23360:  <a  rel="nofollow" href="http://article.gmane.org/gmane.science.nmr.relax.scm/21105">http://article.gmane.org/gmane.science.nmr.relax.scm/21105</a>

But now, with that last message, it's clear that it is these two to
the version.py module:

r23345:  <a  rel="nofollow" href="http://article.gmane.org/gmane.science.nmr.relax.scm/21088">http://article.gmane.org/gmane.science.nmr.relax.scm/21088</a>
r23343:  <a  rel="nofollow" href="http://article.gmane.org/gmane.science.nmr.relax.scm/21090">http://article.gmane.org/gmane.science.nmr.relax.scm/21090</a>

The git-svn support for extracting the repository information I added
mustn't be functioning as I expected.  I've attempted a fix at:

r23365:  <a  rel="nofollow" href="http://article.gmane.org/gmane.science.nmr.relax.scm/21111">http://article.gmane.org/gmane.science.nmr.relax.scm/21111</a>

Cheers,

Edward




On 22 May 2014 22:58, Troels E. Linnet 
&lt;NO-REPLY.INVALID-ADDRESS@xxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Follow-up Comment #2, bug #22071 (project relax):

If I break, this comes:

  File &quot;./relax&quot;, line 7, in &lt;module&gt;
    relax.start(profile_flag=False)
  File &quot;/sbinlab2/tlinnet/software/NMR-relax/relax_trunk/relax.py&quot;, 
line 118,
in start
    processor.run()
  File 
&quot;/sbinlab2/tlinnet/software/NMR-relax/relax_trunk/multi/processor.py&quot;,
line 494, in run
    self.callback.init_master(self)
  File 
&quot;/sbinlab2/tlinnet/software/NMR-relax/relax_trunk/multi/__init__.py&quot;,
line 318, in default_init_master
    self.master.run()
  File &quot;/sbinlab2/tlinnet/software/NMR-relax/relax_trunk/relax.py&quot;, 
line 246,
in run
    runner.run_unit_tests()
  File
&quot;/sbinlab2/tlinnet/software/NMR-relax/relax_trunk/test_suite/test_suite_runner.py&quot;,
line 192, in run_unit_tests
    self.unit_result = unit_runner.run(runner=self.runner)
  File
&quot;/sbinlab2/tlinnet/software/NMR-relax/relax_trunk/test_suite/unit_tests/unit_test_runner.py&quot;,
line 624, in run
    finder.scan_paths()
  File
&quot;/sbinlab2/tlinnet/software/NMR-relax/relax_trunk/test_suite/unit_tests/unit_test_runner.py&quot;,
line 378, in scan_paths
    test_case = load_test_case(dir_path, module_name, class_name)
  File
&quot;/sbinlab2/tlinnet/software/NMR-relax/relax_trunk/test_suite/unit_tests/unit_test_runner.py&quot;,
line 316, in load_test_case
    return TestLoader().loadTestsFromTestCase(clazz)
  File
&quot;/sbinlab2/tlinnet/software/NMR-relax/relax_trunk/test_suite/relax_test_loader.py&quot;,
line 56, in loadTestsFromTestCase
    test_case = testCaseClass(testCaseNames[i])
  File
&quot;/sbinlab2/tlinnet/software/NMR-relax/relax_trunk/test_suite/unit_tests/_prompt/test_spectrum.py&quot;,
line 43, in __init__
    self.interpreter = Interpreter(show_script=False, 
raise_relax_error=True)
  File
&quot;/sbinlab2/tlinnet/software/NMR-relax/relax_trunk/prompt/interpreter.py&quot;,
 line
87, in __init__
    self.__intro_string = info.intro_text()
  File &quot;/sbinlab2/tlinnet/software/NMR-relax/relax_trunk/info.py&quot;, 
line 287,
in intro_text
    text2 = &quot;%s&quot; % (url())
  File &quot;/sbinlab2/tlinnet/software/NMR-relax/relax_trunk/version.py&quot;, 
line
120, in url
    if not pipe.stderr.readlines():


    _______________________________________________________

Reply to this item at:

  &lt;<a  rel="nofollow" href="http://gna.org/bugs/?22071">http://gna.org/bugs/?22071</a>&gt;

_______________________________________________
  Message sent via/by Gna!
  <a  rel="nofollow" href="http://gna.org/">http://gna.org/</a>


_______________________________________________
relax (<a  rel="nofollow" href="http://www.nmr-relax.com">http://www.nmr-relax.com</a>)

This is the relax-devel mailing list
relax-devel@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="https://mail.gna.org/listinfo/relax-devel">https://mail.gna.org/listinfo/relax-devel</a>
</pre></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote><pre style="margin: 0em;">


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00481" href="msg00481.html">Re: [bug #22071] relax unit test and system test not functional</a></strong>
<ul><li><em>From:</em> Troels Emtekær Linnet</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00463" href="msg00463.html">[bug #22071] relax unit test and system test not functional</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
<li><strong><a name="00464" href="msg00464.html">[bug #22071] relax unit test and system test not functional</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
<li><strong><a name="00465" href="msg00465.html">[bug #22071] relax unit test and system test not functional</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
<li><strong><a name="00467" href="msg00467.html">Re: [bug #22071] relax unit test and system test not functional</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00468" href="msg00468.html">Re: [bug #22071] relax unit test and system test not functional</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00469" href="msg00469.html">Re: [bug #22071] relax unit test and system test not functional</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00473" href="msg00473.html">Re: [bug #22071] relax unit test and system test not functional</a></strong>
<ul><li><em>From:</em> Troels Emtekær Linnet</li></ul></li>
<li><strong><a name="00475" href="msg00475.html">Re: [bug #22071] relax unit test and system test not functional</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00478" href="msg00478.html">Re: [bug #22071] relax unit test and system test not functional</a></strong>
<ul><li><em>From:</em> Troels Emtekær Linnet</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer">You are on the <a href="http://gna.org">Gna!</a> mail server.</div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Fri May 23 11:20:14 2014</div>  
</body>
</html>
