<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: Implement handles for nmrglue in relax -->
<!--X-From-R13: "Sqjneq q'Ohiretar" &#60;rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Thu, 27 Nov 2014 14:31:24 +0100 -->
<!--X-Message-Id: CAED9pY9UnksSbfm4b2bBXWDcoJv&#45;9xGfdepB9RmhGAnEc5eZnA@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: CA+CBx2N9gB94wrRMMjh8ETw8yZxmtL5c5uhJx58sCdtV_7HYMQ@mail.gmail.com -->
<!--X-Reference: CAED9pY&#45;vUGKBSrvK2WJw2=6kUXC&#45;0OnVeWTp+17TEJSijSgwBg@mail.gmail.com -->
<!--X-Reference: CA+CBx2NOfBd_LRo5yLuygzqJY7YfFTXX_NzhbFd_10QSvqr16A@mail.gmail.com -->
<!--X-Reference: CAED9pY_hXBUo1MzqTq7y9_JW8Zrq_JOW38rpMNAp6LPatRn8cw@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: Implement handles for nmrglue in relax -- November 27, 2014 - 14:31</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: Implement handles for nmrglue in relax</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00061" class="tabs">Index by Date</a> | <a href="threads.html#00061" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00060.html">Date Prev</a>] [<a href="msg00062.html">Date Next</a>] [<a href="msg00058.html">Thread Prev</a>] [<a href="msg00044.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Thu, 27 Nov 2014 14:30:54 +0100</li>
<li class="menuitem">
<em>Cc</em>: Jonathan Helmus &lt;jjhelmus@xxxxxxxxx&gt;, &quot;relax-devel@xxxxxxx&quot; &lt;relax-devel@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113; h=mime-version:sender:in-reply-to:references:date:message-id:subject :from:to:cc:content-type:content-transfer-encoding; bh=7VuCJYTzl4UESyG+Q21sh1T37oGVzmtJl+Q4q6BOupY=; b=lJM96J96wcR2YiRQZ6W2Gp29UpRj+1TooiYFpH5hIbAeBgfdEIvn3Cl99Lj1S98pAR iGacft8Xncl3mJPgxRoDSzN21QL9bSXGBihTrSUMOkfi2Hqn53mUh1Xr7afbyFXz3+G6 kMKjftSCLL/X4QFwpe3EZdpS8MrW15sBvrdjcSOhCE5sFRYUrrIJhAMgCYmyimdh8P2m P3VSxx8JSR06/cpapu5ReqepMidGYD+0LXPLuvnKQ75etCF7IlDjnB4Z2khkDcnjm5aF OcvQWmGambwU0IifECW8wfmCfxccik0F+ldl7cIodyEXrVQTVl/TwlQkIjHC95jxJZHo P/2Q==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00061.html">CAED9pY9UnksSbfm4b2bBXWDcoJv-9xGfdepB9RmhGAnEc5eZnA@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;<a href="msg00043.html">CA+CBx2N9gB94wrRMMjh8ETw8yZxmtL5c5uhJx58sCdtV_7HYMQ@mail.gmail.com</a>&gt; &lt;CAED9pY-vUGKBSrvK2WJw2=6kUXC-0OnVeWTp+17TEJSijSgwBg@mail.gmail.com&gt; &lt;<a href="msg00052.html">CA+CBx2NOfBd_LRo5yLuygzqJY7YfFTXX_NzhbFd_10QSvqr16A@mail.gmail.com</a>&gt; &lt;<a href="msg00053.html">CAED9pY_hXBUo1MzqTq7y9_JW8Zrq_JOW38rpMNAp6LPatRn8cw@mail.gmail.com</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on November 27, 2014 - 14:31:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Hi Troels,

This appears to be the main nmrglue website <a  rel="nofollow" href="http://www.nmrglue.com/">http://www.nmrglue.com/</a> .
I can see here that there is an nmrglue icon
(<a  rel="nofollow" href="http://www.nmrglue.com/images/nmrglue_logo.jpg">http://www.nmrglue.com/images/nmrglue_logo.jpg</a>).  This may be useful
for the relax GUI graphics for the spectrum.nmrglue_* user function
menu entries and wizard pages.  The wizard graphics (in the
graphics/wizard directory) have a width of 200 px though.  You should
ask on the nmrglue forum
(<a  rel="nofollow" href="http://groups.google.com/group/nmrglue-discuss">http://groups.google.com/group/nmrglue-discuss</a>) about the use of such
a graphic and if there is a higher resolution version.

Cheers,

Edward

On 27 November 2014 at 12:16, Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi,

This sounds good.  And rather simple, the backend of the
spectrum.nmrglue_read user function could simply be the single line of
the tutorial 
<a  rel="nofollow" href="http://nmrglue.readthedocs.org/en/latest/tutorial.html#reading-nmr-files:">http://nmrglue.readthedocs.org/en/latest/tutorial.html#reading-nmr-files:</a>

</pre><blockquote class="blockquote"><blockquote class="blockquote"><blockquote class="blockquote"><pre style="margin: 0em;">import nmrglue as ng
dic,data = ng.pipe.read(&quot;test.fid&quot;)
</pre></blockquote></blockquote></blockquote><pre style="margin: 0em;">

For the *.ft2 files, how big are they?  I wonder if you can downsample
the original *.fid files so that the *.ft2 files are within 10 to 100
kB (using the nmrPipe extract command, etc.).  Anyway, just add a
system test, and we can then discuss more of the design before
implementing the nmrglue interface.  From your aims, it sounds pretty
straightforward.  If the number of relax spectrum.nmrglue_* user
functions expand significantly to access more of the nmrglue
functionality, maybe we can create a dedicated nmrglue user function
class later on.  Anyway, we just have to make sure that relax
continues to operate smoothly when the scipy/matplotlib/nmrglue
packages are absent.

One problem will be storage of the nmrglue data.  This will probably
not fit into the relax data store, as it absolutely requires to_xml()
and from_xml() methods to allow the data to be saved and read again.
Any ideas?  We could create a special class in lib.spectrum.nmrglue
which uses the singleton design pattern
(<a  rel="nofollow" href="https://en.wikipedia.org/wiki/Singleton_pattern">https://en.wikipedia.org/wiki/Singleton_pattern</a>), as is used
extensively in relax.  Just 'grep -i' for 'singleton'.  The data
storage would then be temporary.  Or, ideally, we could modify the
nmrglue data structures to be convertible to and from XML.  Some ideas
should be discussed with the nmrglue authors though (which is why I
have CCed Jonathan, so he knows we are developing a simple
relax-nmrglue interface).  At the moment, I don't know much about the
nmrglue designs.

For the user functions, do you know if nmrglue has an icon that we can
use for the menus and user function wizard pages in the GUI?

Cheers,

Edward



On 27 November 2014 at 11:54, Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxx&gt; 
wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi Edward.

To:
test_suite/shared_data/dispersion/repeated_analysis/SOD1/cpmg_disp_sod1d90a_060521/cpmg_disp_sod1d90a_060521_normal.fid/ft2_data

I will add the corresponding .ft2 files. To limit size use, I will add just
very few .ft2 files.

I will add wrapper functions which will:
- read a ft2 file
- read a range of ft2 files according to a glob of file names
- plot the spectrum

manipulate the numpy arrray, to certain functions.

Plotting in matplotlib.

Best
Troels




Troels Emtekær Linnet

2014-11-27 11:33 GMT+01:00 Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt;:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">

Hi Troels,

This is no problem.  Just create the branch.  But before adding code,
we should discuss the design.  This has two benefits - it will be much
simpler for you in the long run, and it would avoid any redesigns if
the first attempt doesn't fit into the relax infrastructure well.
Could you describe nmrglue, including links, and what you'd like to do
with it?  Would you like to interact with the program at runtime, or
simply read its output?  Would you like to create input files?

Cheers,

Edward



On 27 November 2014 at 11:01, Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxx&gt;
wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Dear Edward.

I am about to setup a new test branch for using nmrglue.

I would need to compare all intensities in a long range of spectra.

I will setup a new branch by:
<a  rel="nofollow" href="http://wiki.nmr-relax.com/Git_branch_creation">http://wiki.nmr-relax.com/Git_branch_creation</a>

I already have some test code, which is working.

I am a little unsure where this will be going.

But essentially, I would like to write some wrapper functions to
nmrglue,
which can be handsome.

Best
Troels Emtekær Linnet
_______________________________________________
relax (<a  rel="nofollow" href="http://www.nmr-relax.com">http://www.nmr-relax.com</a>)

This is the relax-devel mailing list
relax-devel@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="https://mail.gna.org/listinfo/relax-devel">https://mail.gna.org/listinfo/relax-devel</a>
</pre></blockquote></blockquote><pre style="margin: 0em;">


</pre></blockquote></blockquote><pre style="margin: 0em;">


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00043" href="msg00043.html">Implement handles for nmrglue in relax</a></strong>
<ul><li><em>From:</em> Troels Emtekær Linnet</li></ul></li>
<li><strong><a name="00048" href="msg00048.html">Re: Implement handles for nmrglue in relax</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00052" href="msg00052.html">Re: Implement handles for nmrglue in relax</a></strong>
<ul><li><em>From:</em> Troels Emtekær Linnet</li></ul></li>
<li><strong><a name="00053" href="msg00053.html">Re: Implement handles for nmrglue in relax</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Thu Nov 27 16:40:16 2014</div>  
</body>
</html>
