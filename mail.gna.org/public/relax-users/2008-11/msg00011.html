<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: Writing/displaying output from full_analysis.py -->
<!--X-From-R13: Flyre Drqql <FDSRRKNROZ.QO> -->
<!--X-Date: Wed, 05 Nov 2008 21:31:22 +0100 -->
<!--X-Message-Id: 20081105162311.4z6o73tkueu0wc8g@my4.dal.ca -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: F2F028294A326444B36F3F127765451F015E6470@mailbe02.mc.vanderbilt.edu -->
<!--X-Reference: 20081105150311.c0tzb7nb2am30ook@my1.dal.ca -->
<!--X-Reference: 7f080ed10811051158i14b378eftf600f38251032345@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: Writing/displaying output from full_analysis.py -- November 05, 2008 - 21:31</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: Writing/displaying output from full_analysis.py</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00011" class="tabs">Index by Date</a> | <a href="threads.html#00011" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00010.html">Date Prev</a>] [<a href="msg00012.html">Date Next</a>] [<a href="msg00009.html">Thread Prev</a>] [<a href="msg00018.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: &quot;Edward d'Auvergne&quot; &lt;edward.dauvergne@xxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Wed,  5 Nov 2008 16:23:11 -0400</li>
<li class="menuitem">
<em>Cc</em>: &quot;Brosey, Chris A&quot; &lt;chris.a.brosey@xxxxxxxxxxxxxx&gt;, relax-users@xxxxxxx</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00011.html">20081105162311.4z6o73tkueu0wc8g@my4.dal.ca</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;F2F028294A326444B36F3F127765451F015E6470@xxxxxxxxxxxxxxxxxxxxxxxxxx&gt;	&lt;20081105150311.c0tzb7nb2am30ook@xxxxxxxxxx&gt;	&lt;7f080ed10811051158i14b378eftf600f38251032345@xxxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>User-agent</em>: Internet Messaging Program (IMP) H3 (4.0.3)</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Tyler Reddy</strong> on November 05, 2008 - 21:31:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">
Since I've been setting up relax on other machines I also remembered that you
will have problems if you don't get the latest build of minfx by going
into the
directory for minfx and using subversion:

svn co svn://svn.gna.org/svn/minfx/trunk minfx

(and then all further updates can be done with svn up, as Edward says)

Also, for minfx, don't forget to actually install the new version. You have to
change directory to the nested minfx folder and run

python setup.py install

Tyler

Quoting Edward d'Auvergne &lt;edward.dauvergne@xxxxxxxxx&gt;:

</pre><blockquote class="blockquote"><pre style="margin: 0em;">
Cheers!  That response pretty much covers it.  I'm not sure if this is
exactly the error I fixed for you Tyler, but I think the repository
version doesn't have this problem.  It would be useful to get the
repository version anyway as then the debugged version will be
instantly acessable by typing:

$ svn up

in the directory of the checked out copy.  I can't guarantee a quick
response time though as RSI in my wrist is slowing things down
significantly - writing an email only with my left hand is hard
enough, and debugging one handed would be a nightmare!

Regards,

Edward


On Wed, Nov 5, 2008 at 8:03 PM, Tyler Reddy &lt;TREDDY@xxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">
For the sequence input file I think you want Spin_Name to be N if
this is 15N
relaxation data. I'm also thinking it's not a bad idea to update to
the latest
build of relax using subversion (can easily find/download this software via
google). This looks vaguely similar to some of the problems Edward had
debugged
for me, so probably worth the time to update if you're going to use this
script.

The command to execute in the relax directory would be:

svn co svn://svn.gna.org/svn/relax/1.3 relax-1.3

And then a newer version of relax is put in a nested folder in the relax
directory. You want to make sure that the system path refers to the
newer build
of relax instead of the one you originally downloaded. When you type
'relax' it
should say something like 'system repository checkout' instead of 'relax
1.3.2.'

So the new directory would be ../relax-1.3.2/relax-1.3

Edward will probably have a more effective response, but this stuff will
probably prevent other problems in any case.

Tyler


Quoting &quot;Brosey, Chris A&quot; &lt;chris.a.brosey@xxxxxxxxxxxxxx&gt;:

</pre><blockquote class="blockquote"><pre style="margin: 0em;">
Greetings,

I have encountered a problem running the script full_analysis.py
using v1.3.2 of relax (and python v2.5).  I am currently executing
the script with the MI option (DIFF_MODEL = 'local_tm').  I find that
the script successfully reads in data files and carries out the grid
search and minimization specified under the multi_model function for
the very first 'tm0' model.  However, it appears that there is a
problem executing the final command of the function – writing the
results to an output file (see reproduction of log file and traceback
below).  The proper directory and file are created, but the 'results'
file remains empty; and the script returns the error message
'IndexError: list index out of range'.

I obtain the same error using various formatted versions of my own
data files, as well as the test data files found in
/test_suite/shared_data/model_free/S2_0….0.149/, modified to include
None for data values of GLY 1.  Running multi_model commands manually
through the relax prompt also returns the same error for both
'results.write' and 'results.display.'  I also obtain the same result
running the analysis with sample_scripts/model-free.py.

I am new to python and the relax interface and apologize if I am
bringing up a very basic question.  I appreciate any help and
suggestions you might have.  Thanks!

Regards,

Chris


Log File (edited)

relax&gt; pipe.create(pipe_name='tm0', pipe_type='mf')

relax&gt; sequence.read(file='noe.500.out',
dir='~/relax/relax-1.3.2/sample_scripts/data', mol_name_col=None,
res_num_col=0, res_name_col=1, spin_num_col=None, spin_name_col=None,
sep=None)
Opening the file
'/home/broseyca/relax/relax-1.3.2/sample_scripts/data/noe.500.out'
for reading.
Mol_name   Res_num    Res_name   Spin_num   Spin_name
None       1          GLY        None       None
None       2          ALA        None       None

relax&gt; relax_data.read(ri_label='R1', frq_label='500',
frq=500100000.0, file='r1.500.out',
dir='~/relax/relax-1.3.2/sample_scripts/data', mol_name_col=None,
res_num_col=0, res_name_col=1, spin_num_col=None, spin_name_col=None,
data_col=2, error_col=3, sep=None)
Opening the file
'/home/broseyca/relax/relax-1.3.2/sample_scripts/data/r1.500.out' for
reading.

#(A total of 6 relaxation files were read in).

relax&gt; model_free.select_model(model='tm0', spin_id=None)

relax&gt; grid_search(lower=None, upper=None, inc=11, constraints=True,
verbosity=1)

relax&gt; minimise(*args=('newton',), func_tol=1e-25,
max_iterations=10000000, constraints=True, scaling=True, verbosity=1)

relax&gt; results.write(file='results', dir='local_tm/tm0', force=True,
format='xml', compress_type=1)
Opening the file 'local_tm/tm0/results.bz2' for writing.


Traceback Message

77 sweet:/home/broseyca/relax/relax-1.3.2% Traceback (most recent
call last):
 File &quot;relax&quot;, line 410, in &lt;module&gt;
   Relax()
 File &quot;relax&quot;, line 127, in __init__
   self.interpreter.run(self.script_file)
 File &quot;/home/broseyca/relax/relax-1.3.2/prompt/interpreter.py&quot;, line
270, in run
   return run_script(intro=self.__intro_string, local=self.local,
script_file=script_file, quit=self.__quit_flag,
show_script=self.__show_script,
raise_relax_error=self.__raise_relax_error)
 File &quot;/home/broseyca/relax/relax-1.3.2/prompt/interpreter.py&quot;, line
531, in run_script
   return console.interact(intro, local, script_file, quit,
show_script=show_script, raise_relax_error=raise_relax_error)
 File &quot;/home/broseyca/relax/relax-1.3.2/prompt/interpreter.py&quot;, line
427, in interact_script
   execfile(script_file, local)
 File &quot;prompt/full_analysis2.py&quot;, line 668, in &lt;module&gt;
   Main(self.relax)
 File &quot;prompt/full_analysis2.py&quot;, line 221, in __init__
   self.multi_model(local_tm=True)
 File &quot;prompt/full_analysis2.py&quot;, line 664, in multi_model
   results.write(file='results', dir=dir, force=True)
 File &quot;/home/broseyca/relax/relax-1.3.2/prompt/results.py&quot;, line 173,
in write
   results.write(file=file, directory=dir, force=force,
format=format, compress_type=compress_type)
 File &quot;/home/broseyca/relax/relax-1.3.2/generic_fns/results.py&quot;, line
164, in write
   write_function(results_file)
 File &quot;/home/broseyca/relax/relax-1.3.2/data/__init__.py&quot;, line 222,
in to_xml
   self[self.current_pipe].to_xml(self.xmldoc, pipe_element)
 File &quot;/home/broseyca/relax/relax-1.3.2/data/pipe_container.py&quot;, line
234, in to_xml
   self.mol.to_xml(doc, element)
 File &quot;/home/broseyca/relax/relax-1.3.2/data/mol_res_spin.py&quot;, line
690, in to_xml
   self[i].res.to_xml(doc, mol_element)
 File &quot;/home/broseyca/relax/relax-1.3.2/data/mol_res_spin.py&quot;, line
492, in to_xml
   self[i].spin.to_xml(doc, res_element)
 File &quot;/home/broseyca/relax/relax-1.3.2/data/mol_res_spin.py&quot;, line
242, in to_xml
   desc = return_data_desc(name, spin=self[i])
 File
&quot;/home/broseyca/relax/relax-1.3.2/specific_fns/model_free/main.py&quot;,
line 2082, in return_data_desc
   rex_units = self.return_units('rex', spin=spin)
 File
&quot;/home/broseyca/relax/relax-1.3.2/specific_fns/model_free/main.py&quot;,
line 2285, in return_units
   return spin.frq_labels[0] + ' MHz'
IndexError: list index out of range




</pre></blockquote><pre style="margin: 0em;">




_______________________________________________
relax (<a  rel="nofollow" href="http://nmr-relax.com">http://nmr-relax.com</a>)

This is the relax-users mailing list
relax-users@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="/mail.gna.org/listinfo/relax-users">https://mail.gna.org/listinfo/relax-users</a>

</pre></blockquote><pre style="margin: 0em;">

_______________________________________________
relax (<a  rel="nofollow" href="http://nmr-relax.com">http://nmr-relax.com</a>)

This is the relax-users mailing list
relax-users@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="/mail.gna.org/listinfo/relax-users">https://mail.gna.org/listinfo/relax-users</a>

</pre></blockquote><pre style="margin: 0em;">





</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00024" href="msg00024.html">RE: Writing/displaying output from full_analysis.py</a></strong>
<ul><li><em>From:</em> Brosey, Chris A</li></ul></li>
<li><strong><a name="00018" href="msg00018.html">RE: Writing/displaying output from full_analysis.py</a></strong>
<ul><li><em>From:</em> Brosey, Chris A</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00004" href="msg00004.html">Writing/displaying output from full_analysis.py</a></strong>
<ul><li><em>From:</em> Brosey, Chris A</li></ul></li>
<li><strong><a name="00005" href="msg00005.html">Re: Writing/displaying output from full_analysis.py</a></strong>
<ul><li><em>From:</em> Tyler Reddy</li></ul></li>
<li><strong><a name="00006" href="msg00006.html">Re: Writing/displaying output from full_analysis.py</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Mon Nov 10 18:00:27 2008</div>  
</body>
</html>
