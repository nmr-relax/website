<!-- MHonArc v2.6.19+ -->
<!--X-Subject: Re: Using Model&#45;free models -->
<!--X-From-R13: "[nuqv, Enz" &#60;fnz.znuqv.846Nzl.pfha.rqh> -->
<!--X-Date: Fri, 11 Nov 2016 19:43:15 +0100 -->
<!--X-Message-Id: CALgM0gUcR+S+vGwEEz3abLAskbUfqAS1ixozRrJNxZW&#45;YeEVnw@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: CALgM0gVYEvcSdZMbUnjJQpQgKLcr+bEtq&#45;9wzSGB8ktS2iuLKw@mail.gmail.com -->
<!--X-Reference: CAED9pY&#45;X=zNb20vMO4f=JOCB37V29QAM9o2Az7judRx=4nG3rA@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: Using Model-free models -- November 11, 2016 - 19:43</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: Using Model-free models</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00006" class="tabs">Index by Date</a> | <a href="threads.html#00006" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00005.html">Date Prev</a>] [<a href="msg00007.html">Date Next</a>] [<a href="msg00002.html">Thread Prev</a>] [<a href="msg00004.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: &quot;Edward d'Auvergne&quot; &lt;edward@xxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Fri, 11 Nov 2016 10:42:44 -0800</li>
<li class="menuitem">
<em>Cc</em>: &quot;relax-users@xxxxxxx&quot; &lt;relax-users@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=my-csun-edu.20150623.gappssmtp.com; s=20150623; h=mime-version:in-reply-to:references:from:date:message-id:subject:to :cc; bh=ImA9axH4U97hBtQmglczVKV1HGNB6UH4XIsIAVaf7KQ=; b=h26Zqju3nsVEoqcz0dcKlxBTqPpUye1KTptvkYO35haN/TPwmNtP+UUuY/TKROj8+W pz81v42xiK5jJMyfWhsIMvZiYeLyA7cbr4We1GzLYZakoJoFZFfQ7m3l0ZJLnvkJIw3v vED5imO32x2RDySf4kIVRu9H0F/yFULTgOd6c52imwnETGeI18h4+KVLaveP7njNN6tG C1Ayn1N3x8hd6U5aKmuX5grdS5vUcSBq6lBYaYYg6A80My5AsIbUahoyPM65AhoHI8qs Iv12f5ivArB43KXyHsRfYL/GHgm8UaBXufG9RFzInxpnao8UuAepvgfDiST/2qVqJjHr Wo4g==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00006.html">CALgM0gUcR+S+vGwEEz3abLAskbUfqAS1ixozRrJNxZW-YeEVnw@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;<a href="msg00001.html">CALgM0gVYEvcSdZMbUnjJQpQgKLcr+bEtq-9wzSGB8ktS2iuLKw@mail.gmail.com</a>&gt; &lt;CAED9pY-X=zNb20vMO4f=JOCB37V29QAM9o2Az7judRx=4nG3rA@mail.gmail.com&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Mahdi, Sam</strong> on November 11, 2016 - 19:43:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Hi Edward,

So there is no point in running model-free unless you have data at 2 field
strengths? I also had a slight side question. I've read your papers on the
diffusion seeded paradigm, and dynamic models 1 and 2. I understand the
importance of the diffusion tensor value, and understand how the d'Auvergne
protocol fixes that. My question is, does the diffusion tensor help the
model selection then? I've run the new protocol on a protein that had data
at 2 different frequencies. I then found out what model it picked for each
residue. Then I ran the model free models with the estimated diffusion
tensor, and selected the model I wanted it to run, to see whether or not I
would obtain a similar value to the d'Auvergne protocol run for those
residues, which it did (i.e. for residues that had S^2 from m4 in
d'Auvergne protocol, the S^2 from my m4 single model free run gave almost
the same values for those residues). From that I assumed, model free models
data would give similar values to the d'Auvergne protocol, if the correct
model was selected; however, I wasn't able to get any model selection which
is why I sent the initial email. That's why my question is, is the
diffusion tensor crucial then for selecting the proper model?

Sincerely,
Sam

On Fri, Nov 11, 2016 at 1:21 AM, Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt;
wrote:

</pre><blockquote class="blockquote"><pre style="margin: 0em;">On 10 November 2016 at 23:50, Mahdi, Sam &lt;sam.mahdi.846@xxxxxxxxxxx&gt;
wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hello everyone,

I've been attempting to run model free models (due to only have data at
</pre></blockquote><pre style="margin: 0em;">one
</pre><blockquote class="blockquote"><pre style="margin: 0em;">field strength), but I've come across a problem. I have set up both the
model free models script and the model free model selection, both models
run fine, and I do end up receiving data that does make sense and is
</pre></blockquote><pre style="margin: 0em;">good;
</pre><blockquote class="blockquote"><pre style="margin: 0em;">however, the script doesn't seem to actually select any models. I.e. if I
put in the m0-m9 in the script, it'll select m9 for every single reside
</pre></blockquote><pre style="margin: 0em;">and
</pre><blockquote class="blockquote"><pre style="margin: 0em;">only give me Rex data and no S^2. If I run m0-m4 same thing, it'll run
every residue at m4, instead of running through all the models and
selecting the data that fits that model. I know it states that the model
</pre></blockquote><pre style="margin: 0em;">is
</pre><blockquote class="blockquote"><pre style="margin: 0em;">supposed to loop through every model, then you run the model selection to
select what model fits which data set, but I don't know if my script is
</pre></blockquote><pre style="margin: 0em;">set
</pre><blockquote class="blockquote"><pre style="margin: 0em;">up incorrectly or what. Here is my script for model-free models:
pipes = ['m0','m1','m2','m3','m4']
for name in pipes:
    pipe.create(name,'mf')
sequence.read('ssNOE_RGS4Agnes',res_num_col=1)
spin.name('N')
spin.element(element='N',spin_id='@N')
spin.isotope('15N',spin_id='@N')
structure.read_pdb('cluster1_12.pdb',read_mol=1)
relax_data.read(ri_id='R1_Agnes',ri_type='R1',frq=599.642*1e6,
file='R1_RGS4Agnes',res_num_col=1,spin_name_col=2,data_
</pre></blockquote><pre style="margin: 0em;">col=3,error_col=4)
</pre><blockquote class="blockquote"><pre style="margin: 0em;">relax_data.read(ri_id='R2_Agnes',ri_type='R2',frq=599.642*1e6,
file='R2_RGS4Agnes',res_num_col=1,spin_name_col=2,data_
</pre></blockquote><pre style="margin: 0em;">col=3,error_col=4)
</pre><blockquote class="blockquote"><pre style="margin: 0em;">relax_data.read(ri_id='ssNOE_Agnes',ri_type='NOE',frq=599.642*1e6,
file='ssNOE_RGS4Agnes',res_num_col=1,spin_name_col=2,
</pre></blockquote><pre style="margin: 0em;">data_col=3,error_col=4)
</pre><blockquote class="blockquote"><pre style="margin: 0em;">diffusion_tensor.init(1e-8,fixed=True)
sequence.attach_protons()
interatom.define(spin_id1='@N',spin_id2='@H',direct_bond=True)
interatom.set_dist(spin_id1='@N',spin_id2='@H',ave_dist=1.02*1e-10)
structure.get_pos('@N')
structure.get_pos('@H')
interatom.unit_vectors()
value.set(-172*1e-6,'csa',spin_id='@N')
model_free.select_model(model=name)
minimise.grid_search(inc=11)
minimise.execute('newton')
results.write(file='results',force=True)
state.save('save',force=True)

Again I only have it at m0-m4 because I wanted to obtain the m4 data, but
even if it is to m9, it'll only run the m9 model (i.e. I will only
</pre></blockquote><pre style="margin: 0em;">receive
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Rex data because that's whats attributed to m9).  Here is my model
selection script:
pipes = ['m0','m1','m2','m3','m4']
for name in pipes:
    print(&quot;\n\n#&quot;+name+&quot;#&quot;)
pipe.create(name,'mf')
results.read(file='results.bz2',dir=name)
eliminate()
model_selection(method='AIC',modsel_pipe='aic')
state.save('save',force=True)
results.write(file='results',force=True)

Again, this is only set up to m4 for the same reasons as before. I don't
know whether or not I have something in my script set up, but my final
results file just shows the model that was selected for every residue, is
the last model I have in my pipes (i.e. if m4 is the last model, it'll
</pre></blockquote><pre style="margin: 0em;">run
</pre><blockquote class="blockquote"><pre style="margin: 0em;">model 4, if m9 is the last one, it'll run m9). In this sence it appears
</pre></blockquote><pre style="margin: 0em;">to
</pre><blockquote class="blockquote"><pre style="margin: 0em;">be a single model scenario even though I've set up to be for multiple
models. Thank you again in advance.
</pre></blockquote><pre style="margin: 0em;">

Hi Sam,

This is perfectly normal!  The key is the line:

diffusion_tensor.init(1e-8,fixed=True)

Here you have fixed the diffusion tensor to spherical tumbling of 10
ns.  Note that &gt;80% of the contribution to relaxation is due to the
global tumbling.  So if you get this global tumbling wrong, it has an
absolute crushing effect on the remaining 20% and the fine model-free
parameter values and model selection dependent on that 20%.  So
obtaining a very good estimate for the molecular Brownian diffusion is
essential, otherwise you should expect catastrophic failures in the
fine internal motions (which is what you are seeing).  This is why in
the last 20 years, that no one will take any published results
seriously if you do not have data at two field strengths.  It is also
why I developed that long protocol for obtaining a highly refined
diffusion tensor together with the internal motions.

You may think that you can obtain a diffusion estimate from another
technique (optical rotation data, hydrodynamics bead modelling, MD
simulation, etc.), however these are either not good enough or plain
wrong, specifically because of the packing interactions and
microviscosity in your NMR tube being poorly, or not at all, modelled.
It is imperative that the diffusion tensor is optimised against the
relaxation data.

Regards,

Edward

</pre></blockquote><pre style="margin: 0em;">

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00001" href="msg00001.html">Using Model-free models</a></strong>
<ul><li><em>From:</em> Mahdi, Sam</li></ul></li>
<li><strong><a name="00002" href="msg00002.html">Re: Using Model-free models</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Tue Nov 15 14:40:11 2016</div>  
</body>
</html>
