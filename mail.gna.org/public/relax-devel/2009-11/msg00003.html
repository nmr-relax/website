<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: [task #6438] To relax the BMRB. -->
<!--X-From-R13: "Sqjneq q'Ohiretar" <rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Thu, 05 Nov 2009 11:24:53 +0100 -->
<!--X-Message-Id: 7f080ed10911050224p748ab555h24036f6c41002cab@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 20090116&#45;210329.sv2782.83772@gna.org -->
<!--X-Reference: 20090119&#45;181515.sv2782.87600@gna.org -->
<!--X-Reference: 20090310&#45;142747.sv2782.77941@gna.org -->
<!--X-Reference: 20091027&#45;231111.sv2782.85712@gna.org -->
<!--X-Reference: 20091027&#45;232302.sv2782.58246@gna.org -->
<!--X-Reference: 20091028&#45;154110.sv2782.36787@gna.org -->
<!--X-Reference: 4AE86868.30800@bmrb.wisc.edu -->
<!--X-Reference: 7f080ed10910280944t77268bedk32785fbf54281e7d@mail.gmail.com -->
<!--X-Reference: 4AEFB7A9.3010206@bmrb.wisc.edu -->
<!--X-Reference: 7f080ed10911040244q63b487dke9134fd5d3413b0b@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [task #6438] To relax the BMRB. -- November 05, 2009 - 11:24</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: [task #6438] To relax the BMRB.</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00003" class="tabs">Index by Date</a> | <a href="threads.html#00003" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00002.html">Date Prev</a>] [<a href="msg00004.html">Date Next</a>] [<a href="msg00002.html">Thread Prev</a>] [<a href="msg00004.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Eldon Ulrich &lt;elu@xxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Thu, 5 Nov 2009 11:24:09 +0100</li>
<li class="menuitem">
<em>Cc</em>: Edward d Auvergne &lt;NO-REPLY.INVALID-ADDRESS@xxxxxxx&gt;, relax-devel@xxxxxxx</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00003.html">7f080ed10911050224p748ab555h24036f6c41002cab@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;20090116-210329.sv2782.83772@xxxxxxx&gt;	&lt;20090119-181515.sv2782.87600@xxxxxxx&gt;	&lt;20090310-142747.sv2782.77941@xxxxxxx&gt;	&lt;20091027-231111.sv2782.85712@xxxxxxx&gt;	&lt;20091027-232302.sv2782.58246@xxxxxxx&gt;	&lt;20091028-154110.sv2782.36787@xxxxxxx&gt; &lt;4AE86868.30800@xxxxxxxxxxxxx&gt;	&lt;7f080ed10910280944t77268bedk32785fbf54281e7d@xxxxxxxxxxxxxx&gt;	&lt;4AEFB7A9.3010206@xxxxxxxxxxxxx&gt;	&lt;7f080ed10911040244q63b487dke9134fd5d3413b0b@xxxxxxxxxxxxxx&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on November 05, 2009 - 11:24:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Hi Eldon,

Just a quick question this time.  For
_Heteronucl_NOE_list.Heteronuclear_NOE_val_type, is there going to be
a similar tag in general relaxation (which will be called
auto-relaxation in then end)?  This is pretty general for all
relaxation studies - did the person measure peak heights or peak
volumes.  I would suggest _Heteronucl_NOE_list.Peak_intensity_type and
_Auto_relaxation_list.Peak_intensity_type as being a more
understandable and descriptive tag name but, as this is automatic
created and read in the bmrblib package I'm writing, any tag name will
no problem for me.

Cheers,

Edward


2009/11/4 Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt;:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi,

Thank you for all the info.  My responses are also below.


2009/11/3 Eldon Ulrich &lt;elu@xxxxxxxxxxxxx&gt;:

</pre><blockquote class="blockquote"><blockquote class="blockquote"><pre style="margin: 0em;">For testing deposition against the new dictionary, is there a
non-production machine that could be used?  If I can submit and check
against your changes, this should speed up development.  I have made a
few improvements since the file at
<a  rel="nofollow" href="https://gna.org/support/download.php?file_id=7140">https://gna.org/support/download.php?file_id=7140</a>, and using the new
file, a few of the issues identified by ADIT-NMR include (I'll number
these for future reference):
</pre></blockquote><pre style="margin: 0em;">

ADIT-NMR is a relatively complex (several components and lots of legacy
code) system. Updating an instance of the system with a new dictionary
requires a bit of work that is carried out by Steve Mading in the group.
Other parts of the system also are under development to handle mandatory
chemical shift deposition with PDB depositions. Unfortunately, this all
makes it difficult to create a unique test system for this project that I
could keep up to date with changes.
</pre></blockquote><pre style="margin: 0em;">

Oh.  Hopefully we can work to get the new saveframes finalised and
then added to the production system without too many problems.  Maybe
I can develop these in relax first, and then once the NMR-STAR file
with this data is ready then it be added to ADIT-NMR?


</pre><blockquote class="blockquote"><blockquote class="blockquote"><pre style="margin: 0em;">1.  The author info is missing - this can probably be added by the
submitter afterwards.

</pre></blockquote><pre style="margin: 0em;">That would be the normal procedure.
</pre></blockquote><pre style="margin: 0em;">

Ok, relax will leave this empty.


</pre><blockquote class="blockquote"><blockquote class="blockquote"><pre style="margin: 0em;">2.  The entity entry is not complete - relax needs to add a few
additional tags for this.

</pre></blockquote><pre style="margin: 0em;">OK
</pre></blockquote><pre style="margin: 0em;">

I think this is now complete in the new file attached to the task at
<a  rel="nofollow" href="https://web.archive.org/web/https://gna.org/task/index.php?6438">https://gna.org/task/index.php?6438</a>
(<a  rel="nofollow" href="https://gna.org/support/download.php?file_id=7171">https://gna.org/support/download.php?file_id=7171</a>).


</pre><blockquote class="blockquote"><blockquote class="blockquote"><pre style="margin: 0em;">3.  In the Molecular assembly saveframe supergroup 3, three saveframes
appear to be required - Molecular assembly, Natural source, and
Experimental source.  Should relax create these?

</pre></blockquote><pre style="margin: 0em;">Natural source and experimental source would normally be filled in by the
depositor. For simple single polymer systems, the molecular assembly might
be filled in by relax. But if the system is more complex (ligands, multiple
polymer, etc.), it might be easier to have the depositor enter the
information.
</pre></blockquote><pre style="margin: 0em;">

For the entity saveframe, relax is simply depositing the data loaded
into relax as spin systems - i.e. not the entire information from the
PDB file.  Therefore sections and components not used in the
model-free analysis are excluded from the NMR-STAR file.  This is
because structural information could actually be absent in an
analysis.  If there are missing amino-acids or nucleic acids, how
should relax handle this in _Entity.Polymer_seq_one_letter_code?  For
completeness of the model-free data storage, this is all that is
really needed.  If you would like more, I can add it.  I might be able
to change this current behaviour by dumping all the PDB info - if
available - but would this be a useful aim?


</pre><blockquote class="blockquote"><blockquote class="blockquote"><pre style="margin: 0em;">4.  For the Experimental_descriptions saveframe supergroup, only the
software saveframe is being created by relax.  I have used $sample_1
and $conditions_1 in the other saveframes so these exist but are
empty.  Should relax do more with this?

</pre></blockquote><pre style="margin: 0em;">This should be all you need to do. Sample and conditions information is
usually hidden in a lab book and the depositor has to dig it out and enter
it at the time of deposition.
</pre></blockquote><pre style="margin: 0em;">

Ok, that makes it easier.

Can I do something similar with the file name in point 7?  I.e. say
$file_1 and then have only one place where you specify that all the
data comes from the same file?  I would really like to remove this
step from the user, if possible, because it is so obvious.  The only
reason for having the user specify that the file that created the
saveframe plus contains the data is the file that created the
saveframe would be legacy code, so I'm looking for a workaround that
can be implemented in relax.


</pre><blockquote class="blockquote"><blockquote class="blockquote"><pre style="margin: 0em;">5.  _Software.Version is only allowed to be 31 characters.  For
non-released software (a number of users utilise the repository code
rather than released versions) I would like to have something like
&quot;repository checkout r9832
svn+ssh://bugman@xxxxxxxxxxx/svn/relax/branches/bmrb&quot;.  Can this be
extended into VARCHAR(127)?

</pre></blockquote><pre style="margin: 0em;">This has been changed to VARCHAR(127).
</pre></blockquote><pre style="margin: 0em;">

Thank you.  Does this take a while to reach the production server?
I'm still having the error message &quot;*Invalid input: should be 31
characters or less&quot;.


</pre><blockquote class="blockquote"><blockquote class="blockquote"><pre style="margin: 0em;">6.  The citations section of the software saveframe appears to be
missing.  Is this not metadata?

</pre></blockquote><pre style="margin: 0em;">I will need to do more investigating on this one. I do not know of anyone
who has provided this information and there is probably a flag set 
somewhere
that is causing the problem.
</pre></blockquote><pre style="margin: 0em;">

Ok.  I would like to use this tag category as it is a tiny investment
for relax to implement and it makes the file more complete.  It is
also automatic from a user's perspective so entails zero cost,
timewise.  It will also encourage users to add the relevant references
for the implementation of their analysis next to these standard
program references.


</pre><blockquote class="blockquote"><blockquote class="blockquote"><pre style="margin: 0em;">7.  The chemical shift anisotropy saveframe requires the deposited
data file name.  I've tried supplying '?', but nothing I do appears
remove this issue from the user.  Is there some way I can specify that
it all comes from the same file?

</pre></blockquote><pre style="margin: 0em;">I uploaded your temp_bmrb file and then entered it as the deposited data
file name in both the CSA and the Het NOE fields and this was accepted and
the green check marks appeared.
</pre></blockquote><pre style="margin: 0em;">

As above, I would like to remove this step from the user if at all
possible.  I would like to have as many green check marks as possible
throughout the deposited data in the ADIT-NMR system with all tags
ticked (excluding those that the user needs to add additional
information).  My aim would be to have green check marks the following
saveframe categories, as the user shouldn't really change anything
there:

Citations.
Molecular_assembly (well most of this super group).
Software descriptions in Experimental_descriptions.
NMR_parameters.
Kinetic_data.

relax can supply 100% of the relevant information in these sections
(though Citations and Molecular assembly could be added to during
deposition).


</pre><blockquote class="blockquote"><blockquote class="blockquote"><pre style="margin: 0em;">8.  The chemical shift anisotropy saveframe is asking for the NMR
experiment used.  You usually set this to -160 or -172 ppm in
model-free analyses.  Can this be made non-compulsory or at least put
a tick in the ADIT-NMR system for it.

</pre></blockquote><pre style="margin: 0em;">Data had to be collected from an experiment run on an NMR spectrometer. One
or more NMR experiments like a '1H-15N het NOE' experiment needs to be
entered by the depositor and linked to the sample, sample conditions, and
NMR spectrometer used. This is filled in in the 'NMR experiments and
samples' section after the Sample, Sample conditions, and NMR spectrometer
list have been completed. The deposition system is asking for the name of 
an
NMR experiment not for parameters.
</pre></blockquote><pre style="margin: 0em;">

I can probably add this for the het NOE, R1, and R2 but in the case of
the CSA values used, there may be no NMR experiment involved.  Almost
100% of model-free analyses (and SRLS and reduced spectral density
mapping) fix the CSA value of all similar spins to one value.  For
model-free analysis, this is now almost always -172 ppm.  Although
almost never used, the source of CSA values could be experimental,
from the literature, by direct calculation, or maybe even direct
fitting as a parameter of the model (relax allows for all of these
scenarios).  Therefore there could be a per spin CSA value utilised
that comes from no NMR experiment.  It can be experimental data, a
permanently fixed value, or a model parameter.


</pre><blockquote class="blockquote"><blockquote class="blockquote"><pre style="margin: 0em;">9.  Save as 6. for the heteronuclear NOE saveframes.

</pre></blockquote><pre style="margin: 0em;">Not sure about this one.
</pre></blockquote><pre style="margin: 0em;">

Sorry, I meant &quot;Same as 7. for the heteronuclear NOE saveframes.&quot;  The
file name needs to be specified, and I can't work out how relax can do
this automatically.


</pre><blockquote class="blockquote"><blockquote class="blockquote"><pre style="margin: 0em;">10.  _Heteronucl_NOE_list.Heteronuclear_NOE_val_type appears to be
compulsory in ADIT-NMR but not in the dictionary at

<a  rel="nofollow" href="http://www.bmrb.wisc.edu/dictionary/3.1html_frame/frame_HeteronuclNOEList.html#_Heteronucl_NOE_list.Heteronuclear_NOE_val_type">http://www.bmrb.wisc.edu/dictionary/3.1html_frame/frame_HeteronuclNOEList.html#_Heteronucl_NOE_list.Heteronuclear_NOE_val_type</a>.

</pre></blockquote><pre style="margin: 0em;">This information is not available from legacy data and so in the dictionary
the field is allowed to have a null value, however it was felt that the NOE
val type should be a mandatory item in the deposition system so that this
information would be collected for all future depositions.
</pre></blockquote><pre style="margin: 0em;">

Ok, I'll make sure that relax forces the user to input this information.


</pre><blockquote class="blockquote"><blockquote class="blockquote"><pre style="margin: 0em;">11.  I'm not sure what _Heteronucl_NOE_list.NOE_ref_val is or why it
is compulsory.

</pre></blockquote><pre style="margin: 0em;">It is no longer compulsory. I think it was intended as an intensity value
that is used to normalize the data or as a reference to compare with other
values in the spectrum.
</pre></blockquote><pre style="margin: 0em;">

Should I set this to something like 1, or wait for the production
system to accept a null value.


Ok, I'll update the relax output
_Heteronucl_NOE_list.Heteronuclear_NOE_val_type.  I eagerly await to
read your notes from our meeting at the 2009 ENC, so I can add to
relax the new saveframes necessary to hold all information in a
model-free analysis.

Cheers,

Edward

</pre></blockquote><pre style="margin: 0em;">


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00004" href="msg00004.html">Re: [task #6438] To relax the BMRB.</a></strong>
<ul><li><em>From:</em> Eldon Ulrich</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00000" href="msg00000.html">Re: [task #6438] To relax the BMRB.</a></strong>
<ul><li><em>From:</em> Eldon Ulrich</li></ul></li>
<li><strong><a name="00001" href="msg00001.html">Re: [task #6438] To relax the BMRB.</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Thu Nov 05 18:20:11 2009</div>  
</body>
</html>
