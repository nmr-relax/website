<!-- MHonArc v2.6.16 -->
<!--X-Subject: r13664 &#45; in /branches/gui_testing/gui: menu.py spin_viewer/frame.py	user_functions/spin.py -->
<!--X-From-R13: rqjneqNaze&#45;erynk.pbz -->
<!--X-Date: Fri, 15 Jul 2011 20:25:46 +0200 -->
<!--X-Message-Id: E1Qhn58&#45;0005D2&#45;GB@subversion.gna.org -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>r13664 - in /branches/gui_testing/gui: menu.py spin_viewer/frame.py	user_functions/spin.py -- July 15, 2011 - 20:25</title>
<link rel="stylesheet" type="text/css" href="/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="https://gna.org/images/gna.theme/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />r13664 - in /branches/gui_testing/gui: menu.py spin_viewer/frame.py	user_functions/spin.py</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00307" class="tabs">Index by Date</a> | <a href="threads.html#00307" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00306.html">Date Prev</a>] [<a href="msg00308.html">Date Next</a>] [<a href="msg00306.html">Thread Prev</a>] [<a href="msg00308.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: relax-commits@xxxxxxx</li>
<li class="menuitem">
<em>Date</em>: Fri, 15 Jul 2011 18:25:46 -0000</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00307.html">E1Qhn58-0005D2-GB@subversion.gna.org</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>edward</strong> on July 15, 2011 - 20:25:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Author: bugman
Date: Fri Jul 15 20:25:44 2011
New Revision: 13664

URL: <a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax?rev=13664&amp;view=rev">http://svn.gna.org/viewcvs/relax?rev=13664&amp;view=rev</a>
Log:
Implemented all the rest of the spin user function GUI pages and menu entries.

These include:
    spin.create_pseudo
    spin.display
    spin.element
    spin.name
    spin.number


Modified:
    branches/gui_testing/gui/menu.py
    branches/gui_testing/gui/spin_viewer/frame.py
    branches/gui_testing/gui/user_functions/spin.py

Modified: branches/gui_testing/gui/menu.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/gui_testing/gui/menu.py?rev=13664&amp;r1=13663&amp;r2=13664&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/gui_testing/gui/menu.py?rev=13664&amp;r1=13663&amp;r2=13664&amp;view=diff</a>
==============================================================================
--- branches/gui_testing/gui/menu.py (original)
+++ branches/gui_testing/gui/menu.py Fri Jul 15 20:25:44 2011
@@ -252,7 +252,12 @@
             [wx.NewId(), &quot;&amp;spin&quot;, paths.icon_16x16.spin, None, [
                 [wx.NewId(), &quot;&amp;copy&quot;,   paths.icon_16x16.copy, 
self.gui.user_functions.spin.copy],
                 [wx.NewId(), &quot;crea&amp;te&quot;, paths.icon_16x16.add, 
self.gui.user_functions.spin.create],
-                [wx.NewId(), &quot;&amp;delete&quot;, paths.icon_16x16.remove, 
self.gui.user_functions.spin.delete]
+                [wx.NewId(), &quot;create_&amp;pseudo&quot;, paths.icon_16x16.add, 
self.gui.user_functions.spin.create_pseudo],
+                [wx.NewId(), &quot;&amp;delete&quot;, paths.icon_16x16.remove, 
self.gui.user_functions.spin.delete],
+                [wx.NewId(), &quot;displa&amp;y&quot;, None, 
self.gui.user_functions.spin.display],
+                [wx.NewId(), &quot;&amp;element&quot;, None, 
self.gui.user_functions.spin.element],
+                [wx.NewId(), &quot;&amp;name&quot;, None, 
self.gui.user_functions.spin.name],
+                [wx.NewId(), &quot;num&amp;ber&quot;, None, 
self.gui.user_functions.spin.number]
             ]],
             [wx.NewId(), &quot;s&amp;tructure&quot;, paths.icon_16x16.structure, None, [
                 [wx.NewId(), &quot;&amp;delete&quot;, paths.icon_16x16.remove, 
self.gui.user_functions.structure.delete],

Modified: branches/gui_testing/gui/spin_viewer/frame.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/gui_testing/gui/spin_viewer/frame.py?rev=13664&amp;r1=13663&amp;r2=13664&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/gui_testing/gui/spin_viewer/frame.py?rev=13664&amp;r1=13663&amp;r2=13664&amp;view=diff</a>
==============================================================================
--- branches/gui_testing/gui/spin_viewer/frame.py (original)
+++ branches/gui_testing/gui/spin_viewer/frame.py Fri Jul 15 20:25:44 2011
@@ -108,7 +108,12 @@
         menu = wx.Menu()
         menu.AppendItem(self.gui.menu.build_menu_item(menu, parent=self, 
text=&quot;&amp;copy&quot;, icon=paths.icon_16x16.copy, 
fn=self.gui.user_functions.spin.copy))
         menu.AppendItem(self.gui.menu.build_menu_item(menu, parent=self, 
text=&quot;crea&amp;te&quot;, icon=paths.icon_16x16.add, 
fn=self.gui.user_functions.spin.create))
+        menu.AppendItem(self.gui.menu.build_menu_item(menu, parent=self, 
text=&quot;create_&amp;pseudo&quot;, icon=paths.icon_16x16.add, 
fn=self.gui.user_functions.spin.create_pseudo))
         menu.AppendItem(self.gui.menu.build_menu_item(menu, parent=self, 
text=&quot;&amp;delete&quot;, icon=paths.icon_16x16.remove, 
fn=self.gui.user_functions.spin.delete))
+        menu.AppendItem(self.gui.menu.build_menu_item(menu, parent=self, 
text=&quot;displa&amp;y&quot;, icon=None, fn=self.gui.user_functions.spin.display))
+        menu.AppendItem(self.gui.menu.build_menu_item(menu, parent=self, 
text=&quot;&amp;element&quot;, icon=None, fn=self.gui.user_functions.spin.element))
+        menu.AppendItem(self.gui.menu.build_menu_item(menu, parent=self, 
text=&quot;&amp;name&quot;, icon=None, fn=self.gui.user_functions.spin.name))
+        menu.AppendItem(self.gui.menu.build_menu_item(menu, parent=self, 
text=&quot;num&amp;ber&quot;, icon=None, fn=self.gui.user_functions.spin.number))
         self.menubar.Append(menu, &quot;&amp;spin&quot;)
 
         # The select menu entry.

Modified: branches/gui_testing/gui/user_functions/spin.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/gui_testing/gui/user_functions/spin.py?rev=13664&amp;r1=13663&amp;r2=13664&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/gui_testing/gui/user_functions/spin.py?rev=13664&amp;r1=13663&amp;r2=13664&amp;view=diff</a>
==============================================================================
--- branches/gui_testing/gui/user_functions/spin.py (original)
+++ branches/gui_testing/gui/user_functions/spin.py Fri Jul 15 20:25:44 2011
@@ -32,7 +32,7 @@
 
 # GUI module imports.
 from base import UF_base, UF_page
-from gui.misc import gui_to_str, str_to_gui
+from gui.misc import gui_to_bool, gui_to_int, gui_to_list, gui_to_str, 
str_to_gui
 from gui.paths import WIZARD_IMAGE_PATH
 from gui.user_functions.mol_res_spin import Mol_res_spin
 from gui.wizard import Wiz_window
@@ -83,6 +83,20 @@
             page.res.SetValue(&quot;%s %s&quot; % (res_num, res_name))
 
         # Execute the wizard.
+        wizard.run()
+
+
+    def create_pseudo(self, event):
+        &quot;&quot;&quot;The spin.create_pseudo user function.
+
+        @param event:       The wx event.
+        @type event:        wx event
+        &quot;&quot;&quot;
+
+        # Execute the wizard.
+        wizard = Wiz_window(size_x=800, size_y=600, 
title=self.get_title('spin', 'create_pseudo'))
+        page = Create_pseudo_page(wizard, self.gui)
+        wizard.add_page(page)
         wizard.run()
 
 
@@ -124,6 +138,62 @@
         wizard.run()
 
 
+    def display(self, event):
+        &quot;&quot;&quot;The spin.display user function.
+
+        @param event:       The wx event.
+        @type event:        wx event
+        &quot;&quot;&quot;
+
+        # Execute the wizard.
+        wizard = Wiz_window(size_x=800, size_y=600, 
title=self.get_title('spin', 'display'))
+        page = Display_page(wizard, self.gui)
+        wizard.add_page(page)
+        wizard.run()
+
+
+    def element(self, event):
+        &quot;&quot;&quot;The spin.element user function.
+
+        @param event:       The wx event.
+        @type event:        wx event
+        &quot;&quot;&quot;
+
+        # Execute the wizard.
+        wizard = Wiz_window(size_x=800, size_y=600, 
title=self.get_title('spin', 'element'))
+        page = Element_page(wizard, self.gui)
+        wizard.add_page(page)
+        wizard.run()
+
+
+    def name(self, event):
+        &quot;&quot;&quot;The spin.name user function.
+
+        @param event:       The wx event.
+        @type event:        wx event
+        &quot;&quot;&quot;
+
+        # Execute the wizard.
+        wizard = Wiz_window(size_x=800, size_y=600, 
title=self.get_title('spin', 'name'))
+        page = Name_page(wizard, self.gui)
+        wizard.add_page(page)
+        wizard.run()
+
+
+    def number(self, event):
+        &quot;&quot;&quot;The spin.number user function.
+
+        @param event:       The wx event.
+        @type event:        wx event
+        &quot;&quot;&quot;
+
+        # Execute the wizard.
+        wizard = Wiz_window(size_x=800, size_y=600, 
title=self.get_title('spin', 'number'))
+        page = Number_page(wizard, self.gui)
+        wizard.add_page(page)
+        wizard.run()
+
+
 
 class Copy_page(UF_page, Mol_res_spin):
     &quot;&quot;&quot;The spin.copy() user function page.&quot;&quot;&quot;
@@ -133,7 +203,7 @@
     uf_path = ['spin', 'copy']
 
     def add_contents(self, sizer):
-        &quot;&quot;&quot;Add the spin specific GUI elements.
+        &quot;&quot;&quot;Add the page specific GUI elements.
 
         @param sizer:   A sizer object.
         @type sizer:    wx.Sizer instance
@@ -288,7 +358,7 @@
     uf_path = ['spin', 'create']
 
     def add_contents(self, sizer):
-        &quot;&quot;&quot;Add the spin specific GUI elements.
+        &quot;&quot;&quot;Add the page specific GUI elements.
 
         @param sizer:   A sizer object.
         @type sizer:    wx.Sizer instance
@@ -346,6 +416,50 @@
 
 
 
+class Create_pseudo_page(UF_page, Mol_res_spin):
+    &quot;&quot;&quot;The spin.create_pseudo() user function page.&quot;&quot;&quot;
+
+    # Some class variables.
+    image_path = WIZARD_IMAGE_PATH + 'spin.png'
+    uf_path = ['spin', 'create_pseudo']
+
+    def add_contents(self, sizer):
+        &quot;&quot;&quot;Add the page specific GUI elements.
+
+        @param sizer:   A sizer object.
+        @type sizer:    wx.Sizer instance
+        &quot;&quot;&quot;
+
+        # The name and number of the spin.
+        self.spin_name = self.input_field(sizer, &quot;The pseudo-spin name:&quot;, 
tooltip=self.uf._doc_args_dict['spin_name'])
+        self.spin_num = self.input_field(sizer, &quot;The pseudo-spin number:&quot;, 
tooltip=self.uf._doc_args_dict['spin_num'])
+
+        # The spin ID.
+        self.res_id = self.spin_id_element(sizer, desc=&quot;The residue ID 
string:&quot;, choices=[])
+
+        # The members.
+        self.members = self.input_field(sizer, &quot;The pseudo-spin members:&quot;, 
tooltip=self.uf._doc_args_dict['members'])
+
+        # The pos averaging.
+        self.averaging = self.combo_box(sizer, &quot;The positional averaging:&quot;, 
tooltip=self.uf._doc_args_dict['averaging'], choices=['linear'])
+        self.averaging.SetValue('linear')
+
+
+    def on_execute(self):
+        &quot;&quot;&quot;Execute the user function.&quot;&quot;&quot;
+
+        # Get the values.
+        spin_name = gui_to_str(self.spin_name.GetValue())
+        spin_num = gui_to_int(self.spin_num.GetValue())
+        res_id = gui_to_str(self.res_id.GetValue())
+        members = gui_to_list(self.members.GetValue())
+        averaging = gui_to_str(self.averaging.GetValue())
+
+        # Execute.
+        self.gui.interpreter.spin.create_pseudo(spin_name=spin_name, 
spin_num=spin_num, res_id=res_id, members=members, averaging=averaging)
+
+
+
 class Delete_page(UF_page, Mol_res_spin):
     &quot;&quot;&quot;The spin.delete() user function page.&quot;&quot;&quot;
 
@@ -354,7 +468,7 @@
     uf_path = ['spin', 'delete']
 
     def add_contents(self, sizer):
-        &quot;&quot;&quot;Add the spin specific GUI elements.
+        &quot;&quot;&quot;Add the page specific GUI elements.
 
         @param sizer:   A sizer object.
         @type sizer:    wx.Sizer instance
@@ -395,3 +509,146 @@
 
         # Update the spin list.
         self._update_spins(None)
+
+
+
+class Display_page(UF_page, Mol_res_spin):
+    &quot;&quot;&quot;The spin.display() user function page.&quot;&quot;&quot;
+
+    # Some class variables.
+    image_path = WIZARD_IMAGE_PATH + 'spin.png'
+    uf_path = ['spin', 'display']
+
+    def add_contents(self, sizer):
+        &quot;&quot;&quot;Add the page specific GUI elements.
+
+        @param sizer:   A sizer object.
+        @type sizer:    wx.Sizer instance
+        &quot;&quot;&quot;
+
+        # The spin ID.
+        self.spin_id = self.spin_id_element(sizer, desc=&quot;Restrict to the 
spin ID:&quot;)
+
+
+    def on_execute(self):
+        &quot;&quot;&quot;Execute the user function.&quot;&quot;&quot;
+
+        # Get the values.
+        spin_id = gui_to_str(self.spin_id.GetValue())
+
+        # Execute.
+        self.gui.interpreter.spin.display(spin_id=spin_id)
+
+
+
+class Element_page(UF_page, Mol_res_spin):
+    &quot;&quot;&quot;The spin.element() user function page.&quot;&quot;&quot;
+
+    # Some class variables.
+    image_path = WIZARD_IMAGE_PATH + 'spin.png'
+    uf_path = ['spin', 'element']
+
+    def add_contents(self, sizer):
+        &quot;&quot;&quot;Add the page specific GUI elements.
+
+        @param sizer:   A sizer object.
+        @type sizer:    wx.Sizer instance
+        &quot;&quot;&quot;
+
+        # The spin ID.
+        self.spin_id = self.spin_id_element(sizer, desc=&quot;Restrict the 
element setting to the spins:&quot;)
+
+        # The element.
+        self.element = self.combo_box(sizer, &quot;The element:&quot;, 
tooltip=self.uf._doc_args_dict['element'], choices=['H', 'N', 'C','O', 'P'], 
read_only=False)
+
+        # The force flag.
+        self.force = self.boolean_selector(sizer, &quot;The force flag:&quot;, 
tooltip=self.uf._doc_args_dict['force'])
+        self.force.SetValue('False')
+
+
+    def on_execute(self):
+        &quot;&quot;&quot;Execute the user function.&quot;&quot;&quot;
+
+        # Get the values.
+        spin_id = gui_to_str(self.spin_id.GetValue())
+        element = gui_to_str(self.element.GetValue())
+        force = gui_to_bool(self.force.GetValue())
+
+        # Execute.
+        self.gui.interpreter.spin.element(spin_id=spin_id, element=element, 
force=force)
+
+
+
+class Name_page(UF_page, Mol_res_spin):
+    &quot;&quot;&quot;The spin.name() user function page.&quot;&quot;&quot;
+
+    # Some class variables.
+    image_path = WIZARD_IMAGE_PATH + 'spin.png'
+    uf_path = ['spin', 'name']
+
+    def add_contents(self, sizer):
+        &quot;&quot;&quot;Add the page specific GUI elements.
+
+        @param sizer:   A sizer object.
+        @type sizer:    wx.Sizer instance
+        &quot;&quot;&quot;
+
+        # The spin ID.
+        self.spin_id = self.spin_id_element(sizer, desc=&quot;Restrict the naming 
to the spins:&quot;)
+
+        # The name.
+        self.name = self.input_field(sizer, &quot;The name:&quot;, 
tooltip=self.uf._doc_args_dict['name'])
+
+        # The force flag.
+        self.force = self.boolean_selector(sizer, &quot;The force flag:&quot;, 
tooltip=self.uf._doc_args_dict['force'])
+        self.force.SetValue('False')
+
+
+    def on_execute(self):
+        &quot;&quot;&quot;Execute the user function.&quot;&quot;&quot;
+
+        # Get the values.
+        spin_id = gui_to_str(self.spin_id.GetValue())
+        name = gui_to_str(self.name.GetValue())
+        force = gui_to_bool(self.force.GetValue())
+
+        # Execute.
+        self.gui.interpreter.spin.name(spin_id=spin_id, name=name, 
force=force)
+
+
+
+class Number_page(UF_page, Mol_res_spin):
+    &quot;&quot;&quot;The spin.number() user function page.&quot;&quot;&quot;
+
+    # Some class variables.
+    image_path = WIZARD_IMAGE_PATH + 'spin.png'
+    uf_path = ['spin', 'number']
+
+    def add_contents(self, sizer):
+        &quot;&quot;&quot;Add the page specific GUI elements.
+
+        @param sizer:   A sizer object.
+        @type sizer:    wx.Sizer instance
+        &quot;&quot;&quot;
+
+        # The spin ID.
+        self.spin_id = self.spin_id_element(sizer, desc=&quot;Restrict the 
numbering to the spins:&quot;)
+
+        # The number.
+        self.number = self.input_field(sizer, &quot;The number:&quot;, 
tooltip=self.uf._doc_args_dict['number'])
+
+        # The force flag.
+        self.force = self.boolean_selector(sizer, &quot;The force flag:&quot;, 
tooltip=self.uf._doc_args_dict['force'])
+        self.force.SetValue('False')
+
+
+    def on_execute(self):
+        &quot;&quot;&quot;Execute the user function.&quot;&quot;&quot;
+
+        # Get the values.
+        spin_id = gui_to_str(self.spin_id.GetValue())
+        number = gui_to_int(self.number.GetValue())
+        force = gui_to_bool(self.force.GetValue())
+
+        # Execute.
+        self.gui.interpreter.spin.number(spin_id=spin_id, number=number, 
force=force)



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer">You are on the <a href="http://gna.org">Gna!</a> mail server.</div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Fri Jul 15 21:40:02 2011</div>  
</body>
</html>
