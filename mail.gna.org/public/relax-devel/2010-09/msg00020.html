<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: CST branch -->
<!--X-From-R13: Bniry Ynqrenirx <cniry.xnqrenirxNtznvy.pbz> -->
<!--X-Date: Tue, 28 Sep 2010 12:08:15 +0200 -->
<!--X-Message-Id: AANLkTimBsSm504qysJd8&#45;e0O_thUdcwvciKrNhMTdoQW@mail.gmail.com -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: p2l6052a51004080823g94a64268lf8af8d3e332c2a03@mail.gmail.com -->
<!--X-Reference: j2i7f080ed11004120000r80bba9bch9556be67b0c1707@mail.gmail.com -->
<!--X-Reference: g2v6052a51004131048sb5c01509sfc9a77045ad33310@mail.gmail.com -->
<!--X-Reference: r2g7f080ed11004131113mb209905eh63ff1eb61c171fee@mail.gmail.com -->
<!--X-Reference: l2q6052a51004301221h9ad09886ha016465129beb516@mail.gmail.com -->
<!--X-Reference: g2m7f080ed11005050153y2ad8b4bfjb4eb8191b0efd0cc@mail.gmail.com -->
<!--X-Reference: AANLkTin4nzkkOCxs94vUKCpT00R7ak22gLaL5rK&#45;VjPN@mail.gmail.com -->
<!--X-Reference: AANLkTinF4yNXoJQS&#45;rd81VBi3keRURUNeb&#45;_GdkxqqsG@mail.gmail.com -->
<!--X-Reference: AANLkTinibyBQvsoG1&#45;0vmzOXFmRJxD95VMF3eGxzSMMB@mail.gmail.com -->
<!--X-Reference: AANLkTimFT0&#45;Kbgdz_U5LeOW5Ln22mPBZBC8FL68n6CeF@mail.gmail.com -->
<!--X-Reference: AANLkTikhknBoHTc7B7GCRULkrEnxSx+PpqPP=x6KrDOH@mail.gmail.com -->
<!--X-Reference: AANLkTim0B&#45;E6kMW9Nn47o+u+atxrm38540u1Xhaoe6j0@mail.gmail.com -->
<!--X-Reference: AANLkTi=m5S08Nd1F5VDnMGTOu2s+j2Euz1t&#45;ytw0zOAf@mail.gmail.com -->
<!--X-Reference: AANLkTinxUWLu2N19dc3eaPgh22igv_SGy=6qmVnJN=Qj@mail.gmail.com -->
<!--X-Reference: AANLkTik0K3B7huKE8hJtAkXL_yzJmNa9BFxfczu8Sfx9@mail.gmail.com -->
<!--X-Reference: AANLkTin1JfUtMoVqR4c&#45;5dRHTf58N&#45;FAcv4_bc=LpH2b@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: CST branch -- September 28, 2010 - 12:08</title>
<link rel="stylesheet" type="text/css" href="/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="https://gna.org/images/gna.theme/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: CST branch</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00020" class="tabs">Index by Date</a> | <a href="threads.html#00020" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00019.html">Date Prev</a>] [<a href="msg00021.html">Date Next</a>] [<a href="msg00006.html">Thread Prev</a>] [<a href="msg00021.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: &quot;Edward d'Auvergne&quot; &lt;edward@xxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Tue, 28 Sep 2010 12:07:39 +0200</li>
<li class="menuitem">
<em>Cc</em>: relax-devel@xxxxxxx</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00020.html">AANLkTimBsSm504qysJd8-e0O_thUdcwvciKrNhMTdoQW@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;p2l6052a51004080823g94a64268lf8af8d3e332c2a03@xxxxxxxxxxxxxx&gt;	&lt;j2i7f080ed11004120000r80bba9bch9556be67b0c1707@xxxxxxxxxxxxxx&gt;	&lt;g2v6052a51004131048sb5c01509sfc9a77045ad33310@xxxxxxxxxxxxxx&gt;	&lt;r2g7f080ed11004131113mb209905eh63ff1eb61c171fee@xxxxxxxxxxxxxx&gt;	&lt;l2q6052a51004301221h9ad09886ha016465129beb516@xxxxxxxxxxxxxx&gt;	&lt;g2m7f080ed11005050153y2ad8b4bfjb4eb8191b0efd0cc@xxxxxxxxxxxxxx&gt;	&lt;AANLkTin4nzkkOCxs94vUKCpT00R7ak22gLaL5rK-VjPN@xxxxxxxxxxxxxx&gt;	&lt;AANLkTinF4yNXoJQS-rd81VBi3keRURUNeb-_GdkxqqsG@xxxxxxxxxxxxxx&gt;	&lt;AANLkTinibyBQvsoG1-0vmzOXFmRJxD95VMF3eGxzSMMB@xxxxxxxxxxxxxx&gt;	&lt;AANLkTimFT0-Kbgdz_U5LeOW5Ln22mPBZBC8FL68n6CeF@xxxxxxxxxxxxxx&gt;	&lt;AANLkTikhknBoHTc7B7GCRULkrEnxSx+PpqPP=x6KrDOH@xxxxxxxxxxxxxx&gt;	&lt;AANLkTim0B-E6kMW9Nn47o+u+atxrm38540u1Xhaoe6j0@xxxxxxxxxxxxxx&gt;	&lt;AANLkTi=m5S08Nd1F5VDnMGTOu2s+j2Euz1t-ytw0zOAf@xxxxxxxxxxxxxx&gt;	&lt;AANLkTinxUWLu2N19dc3eaPgh22igv_SGy=6qmVnJN=Qj@xxxxxxxxxxxxxx&gt;	&lt;AANLkTik0K3B7huKE8hJtAkXL_yzJmNa9BFxfczu8Sfx9@xxxxxxxxxxxxxx&gt;	&lt;AANLkTin1JfUtMoVqR4c-5dRHTf58N-FAcv4_bc=LpH2b@xxxxxxxxxxxxxx&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Pavel Kaderavek</strong> on September 28, 2010 - 12:08:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
Hi,<br>we were thinking about next necessary changes in the CST branch.<br><br>Now
we need to break through the problem, which implies the fact we split
the relaxation rate calculation into contributions of individual
interactions. Each of them has its own data class to store its
parameters (so far called data[i][j], where the [i] was a spin index
and [j] was the interaction index).<br>
<br>It seems to us, that it the best way to deal with it is to edit
functions: func_mf, func_local_tm , func_diff, func_all and their
equivalents for a first and second derivatives (defined in mf.py file).<br><br>Within
these functions the calculations of direction cosines, diffusion tensor
weight calculations, components of the spectral densities and so on are
performed. All these must be calculated for each interaction
separately, because each interaction has its own data storage (which
replaced previously used one data class container for the whole IS spin
system). <br>
<br>Instead of: <br><br><br>        # Direction cosine calculations.<br>        if self.diff_data.calc_di:<br>            self.diff_data.calc_di(data, self.diff_data)<br><br>        # Diffusion tensor weight calculations.<br>

        self.diff_data.calc_ci(data, self.diff_data)<br><br>        # Diffusion tensor correlation times.<br>        self.diff_data.calc_ti(data, self.diff_data)<br><br>        # Calculate the components of the spectral densities.<br>

        if data.calc_jw_comps:<br>            data.calc_jw_comps(data, params)<br>      <br>        # Calculate the R1, R2, and sigma_noe values.<br>        data.ri_prime = data.create_ri_prime(data)<br><br><br>we would suggest to introduce a loop over interacations<br>

        for j in xrange(self.num_interactions[i]):<br>            # Direction cosine calculations.<br>            if self.diff_data.calc_di:<br>                self.diff_data.calc_di(data[j], self.diff_data)<br>        <br>

            # Diffusion tensor weight calculations.<br>            self.diff_data.calc_ci(data[j], self.diff_data)<br>        <br>            # Diffusion tensor correlation times.<br>            self.diff_data.calc_ti(data[j], self.diff_data)<br>

        <br>            # Calculate the components of the spectral densities.<br>            if data.calc_jw_comps:<br>                data.calc_jw_comps(data[j], params)<br><br>            # Calculate the R1, R2, and sigma_noe components.<br>

            data.ri_prime = data.create_ri_prime(data[j])<br><br><br>It
must be accompanied in the next step by a change the ri_prime function
so that it just calculate only a product of specific interaction
constant and corresponding linear combination of spectral densities.
While the final sumation over all interactions should be done in a
separate step.<br>
<br>Moreover it will be also necessary to distinguish within the
function setup_equation the type of equation used for contribution of
individual interactions according to their type. <br><br>Best<br><font color="#888888">Pavel<br></font><br><br><div class="gmail_quote">On 10 September 2010 15:43, Edward d&#39;Auvergne <span dir="ltr">&lt;<a rel="nofollow" href="mailto:edward@xxxxxxxxxxxxx">edward@xxxxxxxxxxxxx</a>&gt;</span> wrote:<br>
<blockquote class="gmail_quote" style="border-left: 1px solid rgb(204, 204, 204); margin: 0pt 0pt 0pt 0.8ex; padding-left: 1ex;">Hi Pavel,<br>
<br>
I missed it in the patches, but there were tab characters &#39;\t&#39; causing<br>
problems.  These are now fixed.  relax requires that a tab is replaced<br>
by 4 spaces.  I have also added you to the copyright notices<br>
(<a rel="nofollow" href="http://svn.gna.org/viewcvs/relax?view=rev&amp;revision=11543" target="_blank">http://svn.gna.org/viewcvs/relax?view=rev&amp;revision=11543</a>) of the<br>
files you have modified.<br>
<br>
Regards,<br>
<font color="#888888"><br>
Edward<br>
</font><div><div></div><div class="h5"><br>
On 10 September 2010 15:36, Edward d&#39;Auvergne &lt;<a rel="nofollow" href="mailto:edward@xxxxxxxxxxxxx">edward@xxxxxxxxxxxxx</a>&gt; wrote:<br>
&gt; Hi,<br>
&gt;<br>
&gt; I&#39;ve carefully checked the patches and committed them with the<br>
&gt; messages you wrote.  Sorry again for the delays.  It should be faster<br>
&gt; now that I am no longer in the tropical wilderness of far north<br>
&gt; Australia.<br>
&gt;<br>
&gt; Regards,<br>
&gt;<br>
&gt; Edward<br>
&gt;<br>
&gt;<br>
&gt; On 6 September 2010 13:23, Edward d&#39;Auvergne &lt;<a rel="nofollow" href="mailto:edward@xxxxxxxxxxxxx">edward@xxxxxxxxxxxxx</a>&gt; wrote:<br>
&gt;&gt; Hi Pavel,<br>
&gt;&gt;<br>
&gt;&gt; Sorry for the delayed response.  I was at the ICMRBS conference in<br>
&gt;&gt; Australia and then travelled through the tropical north end of<br>
&gt;&gt; Australia afterwards.  I came back yesterday out of the remote<br>
&gt;&gt; wilderness and can soon start looking at this patches.<br>
&gt;&gt;<br>
&gt;&gt; Regards,<br>
&gt;&gt;<br>
&gt;&gt; Edward<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt; On 31 August 2010 18:00, Pavel Kaderavek &lt;<a rel="nofollow" href="mailto:pavel.kaderavek@xxxxxxxxx">pavel.kaderavek@xxxxxxxxx</a>&gt; wrote:<br>
&gt;&gt;&gt; Hi,<br>
&gt;&gt;&gt;<br>
&gt;&gt;&gt; some time ago, we submitted two patches regarding CST branch. We are not<br>
&gt;&gt;&gt; sure if we should wait for some additional comment from your side, or we can<br>
&gt;&gt;&gt; continue with introducing further changes in the code.<br>
&gt;&gt;&gt; Next step would be a splitting of the relaxation equation so that<br>
&gt;&gt;&gt; contribution to the relaxation due to the individual types of interaction<br>
&gt;&gt;&gt; (dipole-dipole, CSA) can be calculated separately.<br>
&gt;&gt;&gt;<br>
&gt;&gt;&gt;<br>
&gt;&gt;&gt; Regars,<br>
&gt;&gt;&gt;<br>
&gt;&gt;&gt; Pavel, Petr<br>
&gt;&gt;&gt;<br>
&gt;&gt;<br>
&gt;<br>
</div></div></blockquote></div><br>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00021" href="msg00021.html">Re: CST branch</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00000" href="msg00000.html">Re: CST branch</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00005" href="msg00005.html">Re: CST branch</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00006" href="msg00006.html">Re: CST branch</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer">You are on the <a href="http://gna.org">Gna!</a> mail server.</div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Wed Sep 29 11:00:24 2010</div>  
</body>
</html>
