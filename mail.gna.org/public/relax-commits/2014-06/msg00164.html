<!-- MHonArc v2.6.18 -->
<!--X-Subject: r23777 &#45; in /branches/frame_order_cleanup: ./ lib/compat.py sconstruct -->
<!--X-From-R13: rqjneqNaze&#45;erynk.pbz -->
<!--X-Date: Tue, 10 Jun 2014 09:46:20 +0200 -->
<!--X-Message-Id: E1WuGlA&#45;0003iM&#45;JK@subversion.gna.org -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>r23777 - in /branches/frame_order_cleanup: ./ lib/compat.py sconstruct -- June 10, 2014 - 09:46</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />r23777 - in /branches/frame_order_cleanup: ./ lib/compat.py sconstruct</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00164" class="tabs">Index by Date</a> | <a href="threads.html#00164" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00163.html">Date Prev</a>] [<a href="msg00165.html">Date Next</a>] [<a href="msg00163.html">Thread Prev</a>] [<a href="msg00165.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: relax-commits@xxxxxxx</li>
<li class="menuitem">
<em>Date</em>: Tue, 10 Jun 2014 07:46:20 -0000</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00164.html">E1WuGlA-0003iM-JK@subversion.gna.org</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>edward</strong> on June 10, 2014 - 09:46:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Author: bugman
Date: Tue Jun 10 09:46:20 2014
New Revision: 23777

URL: <a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax?rev=23777&amp;view=rev">http://svn.gna.org/viewcvs/relax?rev=23777&amp;view=rev</a>
Log:
Merged revisions 23753,23774 via svnmerge from 
svn+ssh://bugman@xxxxxxxxxxx/svn/relax/trunk

........
  r23753 | tlinnet | 2014-06-09 19:23:21 +0200 (Mon, 09 Jun 2014) | 7 lines
  
  Added searching for enviroment variable PYTHON_INCLUDE_DIR if Python.h is 
not found in
  standard python library.
  
  This can be very handsome, if one has a python virtual enviroment for 
multiple users.
  
  This relates to the wiki page:
  <a  rel="nofollow" href="http://wiki.nmr-relax.com/Epd_canopy">http://wiki.nmr-relax.com/Epd_canopy</a>
........
  r23774 | bugman | 2014-06-10 09:40:22 +0200 (Tue, 10 Jun 2014) | 6 lines
  
  The lib.compat.norm() replacement function for numpy.linalg.norm() now 
handles no axis argument.
  
  This is to allow the function to be used in all cases where 
numpy.linalg.norm() is used, while
  providing compatibility with the axis argument and all numpy versions.
........

Modified:
    branches/frame_order_cleanup/   (props changed)
    branches/frame_order_cleanup/lib/compat.py
    branches/frame_order_cleanup/sconstruct

Propchange: branches/frame_order_cleanup/
------------------------------------------------------------------------------
--- svnmerge-integrated (original)
+++ svnmerge-integrated Tue Jun 10 09:46:20 2014
@@ -1 +1 @@
-/trunk:1-23715,23720,23743
+/trunk:1-23776

Modified: branches/frame_order_cleanup/lib/compat.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/frame_order_cleanup/lib/compat.py?rev=23777&amp;r1=23776&amp;r2=23777&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/frame_order_cleanup/lib/compat.py?rev=23777&amp;r1=23776&amp;r2=23777&amp;view=diff</a>
==============================================================================
--- branches/frame_order_cleanup/lib/compat.py  (original)
+++ branches/frame_order_cleanup/lib/compat.py  Tue Jun 10 09:46:20 2014
@@ -237,13 +237,16 @@
     @type axis:     {int, 2-tuple of ints, None}, optional
     &quot;&quot;&quot;
 
+    # No axis argument given.
+    if axis == None:
+        return numpy.linalg.norm(x, ord=ord)
+
     # The axis argument exists.
     if numpy_norm_axis:
         return numpy.linalg.norm(x, ord=ord, axis=axis)
 
     # Support for older version (this is much slower).
-    else:
-        return numpy.apply_along_axis(numpy.linalg.norm, axis, x)
+    return numpy.apply_along_axis(numpy.linalg.norm, axis, x)
 
 
 def sorted(data):

Modified: branches/frame_order_cleanup/sconstruct
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/frame_order_cleanup/sconstruct?rev=23777&amp;r1=23776&amp;r2=23777&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/frame_order_cleanup/sconstruct?rev=23777&amp;r1=23776&amp;r2=23777&amp;view=diff</a>
==============================================================================
--- branches/frame_order_cleanup/sconstruct     (original)
+++ branches/frame_order_cleanup/sconstruct     Tue Jun 10 09:46:20 2014
@@ -572,6 +572,18 @@
         py_include_minpath = sys.prefix + path.sep + 'include'
         py_include_fullpath = py_include_minpath + path.sep + 'python' + 
`sys.version_info[0]` + '.' + `sys.version_info[1]`
 
+        # Test if Python.h resides here.
+        f_name_pyth = py_include_minpath + path.sep + 'Python.h'
+        if not access(f_name_pyth, F_OK):
+
+            # Test if 'PYTHON_INCLUDE_DIR' has been set to system 
environment.
+            if 'PYTHON_INCLUDE_DIR' in environ:
+
+                # Test if Python.h is here.
+                f_name_pyth = environ['PYTHON_INCLUDE_DIR'] + path.sep + 
'Python.h'
+                if access(f_name_pyth, F_OK):
+                    py_include_fullpath = environ['PYTHON_INCLUDE_DIR']
+
         # Construct the python bin path.
         py_bin_minpath = sys.prefix + path.sep + 'bin'
         py_bin_fullpath = py_bin_minpath + path.sep + 'python' + 
`sys.version_info[0]` + '.' + `sys.version_info[1]`



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Tue Jun 10 10:00:02 2014</div>  
</body>
</html>
