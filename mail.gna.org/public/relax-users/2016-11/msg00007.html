<!-- MHonArc v2.6.19+ -->
<!--X-Subject: Re: Dispersion Back Calculation -->
<!--X-From-R13: Xrerzl Oaqrefba &#60;wnaqr118Nwuh.rqh> -->
<!--X-Date: Tue, 15 Nov 2016 14:33:32 +0100 -->
<!--X-Message-Id: CAO4bU8iA0NiOZCuzuGp2ke=oKYfZNQaNChLjEzjHJvhT+8esLA@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: CAO4bU8h4WYFKXoaO=94kRKBXTJrs430tDEgipnTMqGoOzbAiSg@mail.gmail.com -->
<!--X-Reference: CAED9pY&#45;HQnA7+rX7s35RUQQQCg_dA3srjBCMUepcpTFH0erMHA@mail.gmail.com -->
<!--X-Reference: CAO4bU8h9khPCTY8BU9He&#45;TT7xz7U7iZNagu7D0KB+dr2FO4gNw@mail.gmail.com -->
<!--X-Reference: CAED9pY9UaYFPw9QrbQ9qJe1nO2WyMiH1VmH1DM2s_GCfzxBrkA@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: Dispersion Back Calculation -- November 15, 2016 - 14:33</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: Dispersion Back Calculation</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00007" class="tabs">Index by Date</a> | <a href="threads.html#00007" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00006.html">Date Prev</a>] [<a href="msg00008.html">Date Next</a>] [<a href="msg00005.html">Thread Prev</a>] [<a href="msg00008.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: &quot;Edward d'Auvergne&quot; &lt;edward@xxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Tue, 15 Nov 2016 08:33:00 -0500</li>
<li class="menuitem">
<em>Cc</em>: &quot;relax-users@xxxxxxx&quot; &lt;relax-users@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113; h=mime-version:sender:in-reply-to:references:from:date:message-id :subject:to:cc; bh=D9byHwxc3L/Tywn84UaoyOE0x5vyi2Jp1nmrbfqP22c=; b=BeOBGuS9nVj2kOtnSWT6Ug0CJjFuTTilvWUWwdXEWh0uBo688RxLo4+sH6wMYuEkpE 5gnAbn0JZnj22rL4SK/UYbEs0UUBOekoFNQrb6Jl9wfhQZsI8fFigDHA7cXoz1ASwjpO 8X4TzsOIuhC2TCthTwsbDMKXeF2yDkiDcVrsb/4lQv/1t+H5M/cP6SCSG13sJIF6qigm ZmnMBMllMG/wNVXb+GlbNuNA3pISOuqDKqO9DI6gaDPUqhZSkYFbmBTBo5Qw5+Y3hsUw MASVI/pQ8+KbmC3ufOLk1aKOI2nxi8870xOo3d1I02CfakEavlPQhAxIbs9dl/xlVVqH z16w==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;CAO4bU8iA0NiOZCuzuGp2ke=oKYfZNQaNChLjEzjHJvhT+8esLA@mail.gmail.com&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;CAO4bU8h4WYFKXoaO=94kRKBXTJrs430tDEgipnTMqGoOzbAiSg@mail.gmail.com&gt; &lt;CAED9pY-HQnA7+rX7s35RUQQQCg_dA3srjBCMUepcpTFH0erMHA@mail.gmail.com&gt; &lt;CAO4bU8h9khPCTY8BU9He-TT7xz7U7iZNagu7D0KB+dr2FO4gNw@mail.gmail.com&gt; &lt;<a href="msg00005.html">CAED9pY9UaYFPw9QrbQ9qJe1nO2WyMiH1VmH1DM2s_GCfzxBrkA@mail.gmail.com</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Jeremy Anderson</strong> on November 15, 2016 - 14:33:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Hi Edward,

Thanks for the follow up.  I totally understand the reasons for not having
fixed values within a relax analysis, it seems like a special case relative
to what I've seen in the literature and increases ones ability to skew the
results to their liking, I'm doing my best to safeguard against that
myself.

I was able to implement such an analysis in python using the RD models from
relax as well as the scipy and lmfit packages to both hold the dw
parameters constant while performing the usual grid search then nonlinear
least squares minimization and perform a cluster analysis holding the rate
constant and/or the major population constant amongst all residues.  The
code is a bit of a mess at the moment but I'm hoping to clean it up and
make a repository on github, so I can better document what I did and so
other folks can check it out if they want.

Thanks for your assistance.

Jeremy Anderson



Ph.D. Candidate

Johns Hopkins University
Program in Molecular Biophysics
Laboratory of Dr. Vincent J. Hilser, Ph.D.
3400 N Charles St, 104 Mudd Hall
Baltimore, MD 21218

(Lab) *410-516-6757*
(Cell) 715-613-0274


On Fri, Nov 11, 2016 at 5:07 AM, Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt;
wrote:

</pre><blockquote class="blockquote"><pre style="margin: 0em;">On 27 October 2016 at 18:10, Jeremy Anderson &lt;jande118@xxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi Edward and Troels,

Thanks for pointing me in the right direction.  I had dug around a bit in
the test_suite directory but wanted to make sure I was looking in the
</pre></blockquote><pre style="margin: 0em;">right
</pre><blockquote class="blockquote"><pre style="margin: 0em;">place before I descended into the rabbit hole.

I got the back calculation to work using the
./test_suite/shared_data/dispersion/ns_mmq_3site_
</pre></blockquote><pre style="margin: 0em;">linear/relax_results/solution.py
</pre><blockquote class="blockquote"><pre style="margin: 0em;">script pretty much as-is, just changing the spin parameters to my liking,
calculating the curve, and outputting the values (ignoring the data and
residuals in the output file).

Something I didn't mention is that the reason I've been importing the
</pre></blockquote><pre style="margin: 0em;">models
</pre><blockquote class="blockquote"><pre style="margin: 0em;">into ipython is so I can hold parameters constant through my own grid
</pre></blockquote><pre style="margin: 0em;">search
</pre><blockquote class="blockquote"><pre style="margin: 0em;">and minimization functions, which I had found somewhere in the
</pre></blockquote><pre style="margin: 0em;">documentation
</pre><blockquote class="blockquote"><pre style="margin: 0em;">was not possible inside relax for the minimization.  I originally thought
this would be easier outside of relax.

The reason for this is because I'm in a situation where I can observe
</pre></blockquote><pre style="margin: 0em;">HSQC
</pre><blockquote class="blockquote"><pre style="margin: 0em;">peaks in slow exchange in one variant and skewed populations of one or
</pre></blockquote><pre style="margin: 0em;">the
</pre><blockquote class="blockquote"><pre style="margin: 0em;">other peaks in two other variants.  I've been working on using the
complementary information, in this case the observed dw and the kex from
</pre></blockquote><pre style="margin: 0em;">ZZ
</pre><blockquote class="blockquote"><pre style="margin: 0em;">exchange experiments, to investigate multi-state exchange in all
</pre></blockquote><pre style="margin: 0em;">variants.
</pre><blockquote class="blockquote"><pre style="margin: 0em;">

The chem. shift differences of the two skewed variants match the measured
nicely but the rates from CPMG are ~20 fold higher.  Therefore I wanted
</pre></blockquote><pre style="margin: 0em;">to
</pre><blockquote class="blockquote"><pre style="margin: 0em;">check and see if a 3-state model with some parameters held constant would
have infinite solutions (my assumption) or pop out something interesting
</pre></blockquote><pre style="margin: 0em;">and
</pre><blockquote class="blockquote"><pre style="margin: 0em;">be able to distinguish between a couple models of the conformational
</pre></blockquote><pre style="margin: 0em;">process
</pre><blockquote class="blockquote"><pre style="margin: 0em;">that I have in mind, which seems like a long shot.

Sorry if thats too much information/way too open-ended but I figured I
</pre></blockquote><pre style="margin: 0em;">would
</pre><blockquote class="blockquote"><pre style="margin: 0em;">give some context to the greater situation I have found myself in.
</pre></blockquote><pre style="margin: 0em;">Thanks
</pre><blockquote class="blockquote"><pre style="margin: 0em;">again!
</pre></blockquote><pre style="margin: 0em;">

Hi Jeremy,

It is true that you cannot fix a parameter in relax and optimise the
others.  The reason is two-fold.  Firstly the minfx library (
<a  rel="nofollow" href="https://gna.org/projects/minfx/">https://gna.org/projects/minfx/</a> ) does support this functionality.
Secondly, this functionality would be highly abused and a lot of
rubbish results will appear in the scientific literature, with a
detrimental effect on the reputation of the whole NMR field.

Also, I didn't think it was worth the time investment compared to
expanding relax to handle multiple data types at the same time, and
then optimising one set of parameters for all experimental data
simultaneously.  In your case, that would be loading the ZZ exchange
and CPMG data at the same time, and optimising the single model.  This
would be interesting, as the two experiment types contain both
complementary and overlapping information content.  So saying that the
overlapping content should only come from the ZZ experiment might
over-constrain the CPMG experiment due to any biases or experimental
noise from that experiment.  Are you able to set up the problem in
this alternative way in iPython?

Regards,

Edward

</pre></blockquote><pre style="margin: 0em;">

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00008" href="msg00008.html">Re: Dispersion Back Calculation</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00005" href="msg00005.html">Re: Dispersion Back Calculation</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Tue Nov 15 15:00:08 2016</div>  
</body>
</html>
