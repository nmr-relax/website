<!-- MHonArc v2.6.16 -->
<!--X-Subject: r15446 &#45; in /branches/frame_order_testing: ./ data/ multi/	specific_fns/model_free/ -->
<!--X-From-R13: rqjneqNaze&#45;erynk.pbz -->
<!--X-Date: Wed, 07 Mar 2012 10:26:29 +0100 -->
<!--X-Message-Id: E1S5D8f&#45;0004kn&#45;UE@subversion.gna.org -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>r15446 - in /branches/frame_order_testing: ./ data/ multi/	specific_fns/model_free/ -- March 07, 2012 - 10:26</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />r15446 - in /branches/frame_order_testing: ./ data/ multi/	specific_fns/model_free/</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00031" class="tabs">Index by Date</a> | <a href="threads.html#00031" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00030.html">Date Prev</a>] [<a href="msg00032.html">Date Next</a>] [<a href="msg00030.html">Thread Prev</a>] [<a href="msg00032.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: relax-commits@xxxxxxx</li>
<li class="menuitem">
<em>Date</em>: Wed, 07 Mar 2012 09:26:29 -0000</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00031.html">E1S5D8f-0004kn-UE@subversion.gna.org</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>edward</strong> on March 07, 2012 - 10:26:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Author: bugman
Date: Wed Mar  7 10:26:29 2012
New Revision: 15446

URL: <a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax?rev=15446&amp;view=rev">http://svn.gna.org/viewcvs/relax?rev=15446&amp;view=rev</a>
Log:
Merged revisions 15440-15445 via svnmerge from 
svn+ssh://bugman@xxxxxxxxxxx/svn/relax/1.3

........
  r15440 | bugman | 2012-03-06 14:32:08 +0100 (Tue, 06 Mar 2012) | 11 lines
  
  Bug fix for relax not starting on 32-bit machines.
  
  This was first reported by Hugh Dannatt &lt;h dott dannatt att sheffield dot 
ac dot uk&gt; in the post at
  <a  rel="nofollow" href="http://www.nmr-relax.com/mail.gna.org/public/relax-users/2012-03/msg00011.html">https://mail.gna.org/public/relax-users/2012-03/msg00011.html</a>.
  
  The numpy.float128 object appears to be missing on 32-bit numpy versions 
(at least on old numpy
  versions).  In such cases, float128 is aliased to float64.  This should 
only affect relax users who
  place special high precision (float128) objects into the relax data store, 
when loading a save file
  with such an object on a 32-bit machine.  This should practically never 
happen!
........
  r15441 | bugman | 2012-03-06 15:15:10 +0100 (Tue, 06 Mar 2012) | 5 lines
  
  Expansion and improvement of the information printed out by 'relax --info'.
  
  A number of details are now taken from the sys module.
........
  r15442 | bugman | 2012-03-06 15:48:22 +0100 (Tue, 06 Mar 2012) | 3 lines
  
  For Unix and GNU/Linux systems, the relax info printout now shows the ram 
and swap size.
........
  r15443 | bugman | 2012-03-06 15:57:04 +0100 (Tue, 06 Mar 2012) | 3 lines
  
  Updated the value.set user function unknown parameter error message to list 
the known ones.
........
  r15444 | bugman | 2012-03-06 17:11:02 +0100 (Tue, 06 Mar 2012) | 3 lines
  
  Added support for the memory size on MS Windows to the relax info print out.
........
  r15445 | bugman | 2012-03-06 18:29:47 +0100 (Tue, 06 Mar 2012) | 3 lines
  
  Updated the multi-processor package __all__ list.
........

Modified:
    branches/frame_order_testing/   (props changed)
    branches/frame_order_testing/arg_check.py
    branches/frame_order_testing/data/relax_xml.py
    branches/frame_order_testing/info.py
    branches/frame_order_testing/multi/__init__.py
    branches/frame_order_testing/specific_fns/model_free/main.py

Propchange: branches/frame_order_testing/
------------------------------------------------------------------------------
--- svnmerge-integrated (original)
+++ svnmerge-integrated Wed Mar  7 10:26:29 2012
@@ -1,1 +1,1 @@
-/1.3:1-15435
+/1.3:1-15445

Modified: branches/frame_order_testing/arg_check.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/frame_order_testing/arg_check.py?rev=15446&amp;r1=15445&amp;r2=15446&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/frame_order_testing/arg_check.py?rev=15446&amp;r1=15445&amp;r2=15446&amp;view=diff</a>
==============================================================================
--- branches/frame_order_testing/arg_check.py (original)
+++ branches/frame_order_testing/arg_check.py Wed Mar  7 10:26:29 2012
@@ -24,11 +24,15 @@
 &quot;&quot;&quot;Argument checking functions for the relax user functions.&quot;&quot;&quot;
 
 # Python module imports.
-from numpy import float32, float64, float128, ndarray
+from numpy import float32, float64, ndarray
 try:
     from numpy import float16
-except:
-    float16 = float32
+except ImportError:
+    float16 = float32    # Support for old numpy versions.
+try:
+    from numpy import float128
+except ImportError:
+    float128 = float64    # Support for 32-bit numpy versions.
 
 # relax module imports.
 from relax_errors import RelaxBoolError, RelaxFloatError, 
RelaxFunctionError, RelaxIntError, RelaxIntListIntError, RelaxListFloatError, 
RelaxListIntError, RelaxMatrixFloatError, RelaxNoneFloatError, 
RelaxNoneFunctionError, RelaxListNumError, RelaxListStrError, RelaxNoneError, 
RelaxNoneIntError, RelaxNoneIntListIntError, RelaxNoneListFloatError, 
RelaxNoneListIntError, RelaxNoneMatrixFloatError, RelaxNoneListNumError, 
RelaxNoneListStrError, RelaxNoneNumError, RelaxNoneNumStrListNumStrError, 
RelaxNoneNumTupleNumError, RelaxNoneStrError, RelaxNoneStrFileError, 
RelaxNoneStrListNumError, RelaxNoneStrListStrError, RelaxNumError, 
RelaxNumStrListNumStrError, RelaxNumTupleNumError, RelaxStrError, 
RelaxStrFileError, RelaxStrListNumError, RelaxStrListStrError, 
RelaxTupleError, RelaxTupleNumError

Modified: branches/frame_order_testing/data/relax_xml.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/frame_order_testing/data/relax_xml.py?rev=15446&amp;r1=15445&amp;r2=15446&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/frame_order_testing/data/relax_xml.py?rev=15446&amp;r1=15445&amp;r2=15446&amp;view=diff</a>
==============================================================================
--- branches/frame_order_testing/data/relax_xml.py (original)
+++ branches/frame_order_testing/data/relax_xml.py Wed Mar  7 10:26:29 2012
@@ -24,11 +24,15 @@
 &quot;&quot;&quot;Module containing generic fns for creation and parsing of XML 
representations of python objects.&quot;&quot;&quot;
 
 # Python module imports.
-from numpy import set_printoptions, array, float32, float64, float128, inf, 
nan
+from numpy import set_printoptions, array, float32, float64, inf, nan
 try:
     from numpy import float16
-except:
-    float16 = float32
+except ImportError:
+    float16 = float32    # Support for old numpy versions.
+try:
+    from numpy import float128
+except ImportError:
+    float128 = float64    # Support for 32-bit numpy versions.
 from re import search
 from string import strip
 

Modified: branches/frame_order_testing/info.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/frame_order_testing/info.py?rev=15446&amp;r1=15445&amp;r2=15446&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/frame_order_testing/info.py?rev=15446&amp;r1=15445&amp;r2=15446&amp;view=diff</a>
==============================================================================
--- branches/frame_order_testing/info.py (original)
+++ branches/frame_order_testing/info.py Wed Mar  7 10:26:29 2012
@@ -24,9 +24,14 @@
 &quot;&quot;&quot;Module containing the introductory text container.&quot;&quot;&quot;
 
 # Python module imports.
+import ctypes
+if hasattr(ctypes, 'windll'):
+    import ctypes.wintypes
 import numpy
+from os import popen3
 import platform
 from string import split
+import sys
 from textwrap import wrap
 
 # relax module imports.
@@ -302,6 +307,55 @@
         return text
 
 
+    def ram_info(self, format=&quot;    %-25s%s\n&quot;):
+        &quot;&quot;&quot;Return a string for printing to STDOUT with info from the Python 
packages used by relax.
+
+        @keyword format:    The formatting string.
+        @type format:       str
+        @return:            The info string.
+        @rtype:             str
+        &quot;&quot;&quot;
+
+        # Init.
+        text = ''
+
+        # Unix and GNU/Linux systems.
+        stdin, stdout, stderr = popen3('free -m')
+        free_lines = stdout.readlines()
+        if free_lines:
+            # Extract the info.
+            for line in free_lines:
+                # Split up the line.
+                row = split(line)
+
+                # The RAM size.
+                if row[0] == 'Mem:':
+                    text += format % (&quot;Total RAM size: &quot;, row[1], &quot;Mb&quot;)
+
+                # The swap size.
+                if row[0] == 'Swap:':
+                    text += format % (&quot;Total swap size: &quot;, row[1], &quot;Mb&quot;)
+
+        # Windows systems (supported by ctypes.windll).
+        if not text and hasattr(ctypes, 'windll'):
+            # Initialise the memory info class.
+            mem = MemoryStatusEx()
+
+            # The RAM size.
+            text += format % (&quot;Total RAM size: &quot;, mem.ullTotalPhys / 
1024.**2, &quot;Mb&quot;)
+
+            # The swap size.
+            text += format % (&quot;Total swap size: &quot;, mem.ullTotalVirtual / 
1024.**2, &quot;Mb&quot;)
+
+        # Unknown.
+        if not text:
+            text += format % (&quot;Total RAM size: &quot;, &quot;?&quot;, &quot;Mb&quot;)
+            text += format % (&quot;Total swap size: &quot;, &quot;?&quot;, &quot;Mb&quot;)
+
+        # Return the info string.
+        return text
+
+
     def sys_info(self):
         &quot;&quot;&quot;Return a string for printing to STDOUT with info about the 
current relax instance.
 
@@ -313,7 +367,8 @@
         text = self.intro_text()
 
         # Formatting string.
-        format = &quot;    %-25s%s\n&quot;
+        format  = &quot;    %-25s%s\n&quot;
+        format2 = &quot;    %-25s%s %s\n&quot;
 
         # Hardware info.
         text = text + (&quot;\nHardware information:\n&quot;)
@@ -321,9 +376,11 @@
             text = text + (format % (&quot;Machine: &quot;, platform.machine()))
         if hasattr(platform, 'processor'):
             text = text + (format % (&quot;Processor: &quot;, platform.processor()))
-
-        # System info.
-        text = text + (&quot;\nSystem information:\n&quot;)
+        text = text + (format % (&quot;Endianness: &quot;, sys.byteorder))
+        text = text + self.ram_info(format=format2)
+
+        # OS info.
+        text = text + (&quot;\nOperating system information:\n&quot;)
         if hasattr(platform, 'system'):
             text = text + (format % (&quot;System: &quot;, platform.system()))
         if hasattr(platform, 'release'):
@@ -341,8 +398,8 @@
         if hasattr(platform, 'platform'):
             text = text + (format % (&quot;Full platform string: &quot;, 
(platform.platform())))
 
-        # Software info.
-        text = text + (&quot;\nSoftware information:\n&quot;)
+        # Python info.
+        text = text + (&quot;\nPython information:\n&quot;)
         if hasattr(platform, 'architecture'):
             text = text + (format % (&quot;Architecture: &quot;, 
(platform.architecture()[0] + &quot; &quot; + platform.architecture()[1])))
         if hasattr(platform, 'python_version'):
@@ -353,14 +410,17 @@
             text = text + ((format[:-1]+', %s\n') % (&quot;Python build: &quot;, 
platform.python_build()[0], platform.python_build()[1]))
         if hasattr(platform, 'python_compiler'):
             text = text + (format % (&quot;Python compiler: &quot;, 
platform.python_compiler()))
+        if hasattr(platform, 'libc_ver'):
+            text = text + (format % (&quot;Libc version: &quot;, 
(platform.libc_ver()[0] + &quot; &quot; + platform.libc_ver()[1])))
         if hasattr(platform, 'python_implementation'):
             text = text + (format % (&quot;Python implementation: &quot;, 
platform.python_implementation()))
         if hasattr(platform, 'python_revision'):
             text = text + (format % (&quot;Python revision: &quot;, 
platform.python_revision()))
-        if hasattr(numpy, '__version__'):
-            text = text + (format % (&quot;Numpy version: &quot;, numpy.__version__))
-        if hasattr(platform, 'libc_ver'):
-            text = text + (format % (&quot;Libc version: &quot;, 
(platform.libc_ver()[0] + &quot; &quot; + platform.libc_ver()[1])))
+        if sys.executable:
+            text = text + (format % (&quot;Python executable: &quot;, sys.executable))
+        text = text + (format % (&quot;Python flags: &quot;, sys.flags))
+        text = text + (format % (&quot;Python float info: &quot;, sys.float_info))
+        text = text + (format % (&quot;Python module path: &quot;, sys.path))
 
         # Python packages.
         text = text + self.package_info(format=format)
@@ -374,6 +434,32 @@
 
         # Return the text.
         return text
+
+
+
+class MemoryStatusEx(ctypes.Structure):
+    &quot;&quot;&quot;Special object for obtaining hardware info in MS Windows.&quot;&quot;&quot;
+
+    if hasattr(ctypes, 'windll'):
+        _fields_ = [
+            ('dwLength', ctypes.wintypes.DWORD),
+            ('dwMemoryLoad', ctypes.wintypes.DWORD),
+            ('ullTotalPhys', ctypes.c_ulonglong),
+            ('ullAvailPhys', ctypes.c_ulonglong),
+            ('ullTotalPageFile', ctypes.c_ulonglong),
+            ('ullAvailPageFile', ctypes.c_ulonglong),
+            ('ullTotalVirtual', ctypes.c_ulonglong),
+            ('ullAvailVirtual', ctypes.c_ulonglong),
+            ('ullExtendedVirtual', ctypes.c_ulonglong),
+        ]
+
+    def __init__(self):
+        &quot;&quot;&quot;Set up the information and handle non MS Windows systems.&quot;&quot;&quot;
+
+        # Get the required info (for MS Windows only).
+        if hasattr(ctypes, 'windll'):
+            self.dwLength = ctypes.sizeof(self)
+            ctypes.windll.kernel32.GlobalMemoryStatusEx(ctypes.byref(self))
 
 
 

Modified: branches/frame_order_testing/multi/__init__.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/frame_order_testing/multi/__init__.py?rev=15446&amp;r1=15445&amp;r2=15446&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/frame_order_testing/multi/__init__.py?rev=15446&amp;r1=15445&amp;r2=15446&amp;view=diff</a>
==============================================================================
--- branches/frame_order_testing/multi/__init__.py (original)
+++ branches/frame_order_testing/multi/__init__.py Wed Mar  7 10:26:29 2012
@@ -1,7 +1,7 @@
 
###############################################################################
 #                                                                            
 #
 # Copyright (C) 2007 Gary S Thompson (<a  rel="nofollow" href="https://gna.org/users/varioustoxins">https://gna.org/users/varioustoxins</a>)   
 #
-# Copyright (C) 2011 Edward d'Auvergne                                       
 #
+# Copyright (C) 2011-2012 Edward d'Auvergne                                  
 #
 #                                                                            
 #
 # This file is part of the program relax.                                    
 #
 #                                                                            
 #
@@ -103,7 +103,10 @@
 &quot;&quot;&quot;
 
 
-__all__ = ['commands',
+__all__ = ['api',
+           'commands',
+           'memo',
+           'misc',
            'mpi4py_processor',
            'multi_processor_base',
            'processor_io',

Modified: branches/frame_order_testing/specific_fns/model_free/main.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/frame_order_testing/specific_fns/model_free/main.py?rev=15446&amp;r1=15445&amp;r2=15446&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/frame_order_testing/specific_fns/model_free/main.py?rev=15446&amp;r1=15445&amp;r2=15446&amp;view=diff</a>
==============================================================================
--- branches/frame_order_testing/specific_fns/model_free/main.py (original)
+++ branches/frame_order_testing/specific_fns/model_free/main.py Wed Mar  7 
10:26:29 2012
@@ -2313,7 +2313,7 @@
 
             # Check if it is a model-free parameter.
             if obj_name not in self.data_names(set='params') and obj_name 
not in self.data_names(set='generic'):
-                raise RelaxError(&quot;The parameter '%s' is unknown.&quot; % 
mf_params[i])
+                raise RelaxError(&quot;The parameter '%s' is unknown.  It should 
be one of %s or %s&quot; % (mf_params[i], self.data_names(set='params'), 
self.data_names(set='generic')))
 
             # Set the parameter.
             for spin in spin_loop(spin_id):



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Wed Mar 07 11:00:01 2012</div>  
</body>
</html>
