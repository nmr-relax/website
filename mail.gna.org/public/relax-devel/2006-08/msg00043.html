<!-- MHonArc v2.6.10 -->
<!--X-Subject: Re: Proposed solution to bug #6503. -->
<!--X-From-R13: "Unel E. Fubzcfba" <tnelgNozo.yrrqf.np.hx> -->
<!--X-Date: Wed, 09 Aug 2006 17:54:16 +0200 -->
<!--X-Message-Id: 44DA0500.2060509@bmb.leeds.ac.uk -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 7f080ed10608082240r114cf35an60af62836fcc81bf@mail.gmail.com -->
<!--X-Reference: 1155116086.28764.393.camel@fbsdpcu021 -->
<!--X-Reference: 7f080ed10608090248i5c3a5832h166bc8c07f2cbc93@mail.gmail.com -->
<!--X-Reference: 1155120829.28764.436.camel@fbsdpcu021 -->
<!--X-Reference: 44D9CA33.9090000@bmb.leeds.ac.uk -->
<!--X-Reference: 1155128346.28764.450.camel@fbsdpcu021 -->
<!--X-Reference: 7f080ed10608090817u4ee62fa7g6418a4b68cc3b334@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: Proposed solution to bug #6503. -- August 09, 2006 - 17:54</title>
<link rel="stylesheet" type="text/css" href="/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="https://gna.org/images/gna.theme/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: Proposed solution to bug #6503.</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00043" class="tabs">Index by Date</a> | <a href="threads.html#00043" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00042.html">Date Prev</a>] [<a href="msg00044.html">Date Next</a>] [<a href="msg00039.html">Thread Prev</a>] [<a href="msg00047.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Edward d'Auvergne &lt;edward.dauvergne@xxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Wed, 09 Aug 2006 16:53:36 +0100</li>
<li class="menuitem">
<em>Cc</em>: relax-devel@xxxxxxx</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00043.html">44DA0500.2060509@bmb.leeds.ac.uk</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;<a href="msg00029.html">7f080ed10608082240r114cf35an60af62836fcc81bf@mail.gmail.com</a>&gt;	&lt;<a href="msg00031.html">1155116086.28764.393.camel@fbsdpcu021</a>&gt;	&lt;<a href="msg00032.html">7f080ed10608090248i5c3a5832h166bc8c07f2cbc93@mail.gmail.com</a>&gt;	&lt;<a href="msg00034.html">1155120829.28764.436.camel@fbsdpcu021</a>&gt;	&lt;44D9CA33.9090000@bmb.leeds.ac.uk&gt;	&lt;<a href="msg00036.html">1155128346.28764.450.camel@fbsdpcu021</a>&gt;	&lt;<a href="msg00039.html">7f080ed10608090817u4ee62fa7g6418a4b68cc3b334@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>User-agent</em>: Mozilla Thunderbird 1.0 (X11/20041206)</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Gary S. Thompson</strong> on August 09, 2006 - 17:54:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Edward d'Auvergne wrote:</pre><br>
<blockquote class="blockquote"><pre style="margin: 0em;">On 8/9/06, Chris MacRaild wrote:</pre><br>
<blockquote class="blockquote"><tt>On Wed, 2006-08-09 at 12:42 +0100, Gary S. Thompson wrote:<br>
&gt; Chris MacRaild wrote:<br>
&gt;<br>
&gt; &gt;On Wed, 2006-08-09 at 19:48 +1000, Edward d'Auvergne wrote:<br>
&gt; &gt;<br>
&gt; &gt;<br>
&gt; &gt;&gt;&gt;&gt;As the function 'self.grid_search()' executes 'self.minimise()' 
this<br>
&gt; &gt;&gt;&gt;&gt;single change will cover both the grid search and 
minimisation.  The<br>
&gt; &gt;&gt;&gt;&gt;function 'isnan()' currently non-existent but could be 
implemented as<br>
&gt; &gt;&gt;&gt;&gt;Gary previously mentioned by checking the hex bit pattern of NaN.<br>
&gt; &gt;&gt;&gt;&gt;<br>
&gt; &gt;&gt;&gt;&gt;<br>
&gt; &gt;&gt;&gt;If isnan() is to be implimented in this way, then a similar 
isinf() is<br>
&gt; &gt;&gt;&gt;by far the best way to go. float('inf') is platform dependent, and<br>
&gt; &gt;&gt;&gt;certainly will not work under Windows (I think I'm right in saying<br>
&gt; &gt;&gt;&gt;windows has no valid string representation of inf or nan that 
would work<br>
&gt; &gt;&gt;&gt;in that context).<br>
&gt; &gt;&gt;&gt;<br>
&gt; &gt;&gt;&gt;<br>
&gt; &gt;&gt;That one I didn't know about.  I thought Python handled inf 
correctly<br>
&gt; &gt;&gt;but checking the bit value should be easy.  What about checking that<br>
&gt; &gt;&gt;the value is less than 1e300 instead, as that is the arbitrary<br>
&gt; &gt;&gt;starting point for the grid search?<br>
&gt; &gt;&gt;<br>
&gt; &gt;&gt;<br>
&gt; &gt;<br>
&gt; &gt;In practise I'm fairly sure that will work. The purist might say that<br>
&gt; &gt;the starting value should be INF, and the test should be for INF, 
but I<br>
&gt; &gt;can't imagine anyone wanting to accept a grid search with Chi2 &gt; 
1e300<br>
&gt; &gt;<br>
&gt; &gt;<br>
&gt;<br>
&gt; does comparison against inf work on all architectures/compilers....<br>
&gt;</tt><br>
<br>
<pre style="margin: 0em;">The official line is that all Python behaviour with respect to special
float values is an accident arising from the specific
architecture/compiler comination. This applies to NaN, +INF, -INF, and
signed zero. That said, I dont recall INF behaviour being raised as an
issue in the various email list discussions I've read. I've just done a
quick test on my machine and see none of the craziness I saw with NaN
comparisons.
</pre></blockquote><pre style="margin: 0em;"><br></pre><br>
<tt>Maybe we could add to the test-suite two tests, one to see if the<br>
isnan() functions properly and the other to test if isinf() functions.<br>
The NaN and Inf values can be generated and the functions tested to<br>
see if they recognise them.  These two functions need to be added to<br>
the 'nan_catch_test' branch.  An idea may be to implement both of<br>
these within a file called something like 'float.py' in the base relax<br>
directory.  Both functions could be accessible in the structure<br>
'self.relax.float'.  Gary, would you like to use the information in<br>
your post at 
<a  href="https://mail.gna.org/public/relax-devel/2006-08/msg00013.html">https://mail.gna.org/public/relax-devel/2006-08/msg00013.html</a><br>
and try to implement the NaN bit pattern matching function?  Do you<br>
think signalling NaNs are an issue or would the generated NaN be a<br>
quite NaN?</tt><br>
<br>
<pre style="margin: 0em;">Edward</pre><br>
<pre style="margin: 0em;">.</pre><br>
</blockquote><tt>yep I can have a go at that. As to signalling to the difference between 
signalling and non signalling nans I am fairly hazy...;-) I can't see 
any use to make a distinction at the moment. If this is a problem we can 
always add a flag to the function plus default behaviour. Anyway just to 
be sure I will dig a little deaper...</tt><br>
<br>
<pre style="margin: 0em;">regards
gary</pre><br>
<pre style="margin: 0em;">--
-------------------------------------------------------------------
Dr Gary Thompson
Astbury Centre for Structural Molecular Biology,
University of Leeds, Astbury Building,
Leeds, LS2 9JT, West-Yorkshire, UK             Tel. +44-113-3433024
email: garyt@xxxxxxxxxxxxxxx                   Fax  +44-113-2331407
-------------------------------------------------------------------</pre><br>
<pre style="margin: 0em;"><br></pre><br>
<br>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00047" href="msg00047.html">Re: Proposed solution to bug #6503.</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00029" href="msg00029.html">Proposed solution to bug #6503.</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00031" href="msg00031.html">Re: Proposed solution to bug #6503.</a></strong>
<ul><li><em>From:</em> Chris MacRaild</li></ul></li>
<li><strong><a name="00032" href="msg00032.html">Re: Proposed solution to bug #6503.</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00034" href="msg00034.html">Re: Proposed solution to bug #6503.</a></strong>
<ul><li><em>From:</em> Chris MacRaild</li></ul></li>
<li><strong><a name="00036" href="msg00036.html">Re: Proposed solution to bug #6503.</a></strong>
<ul><li><em>From:</em> Chris MacRaild</li></ul></li>
<li><strong><a name="00039" href="msg00039.html">Re: Proposed solution to bug #6503.</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer">You are on the <a href="http://gna.org">Gna!</a> mail server.</div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Wed Aug 09 18:20:54 2006</div>  
</body>
</html>
