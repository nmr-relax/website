<!-- MHonArc v2.6.19+ -->
<!--X-Subject: Re: RelaxWarning: comparison to `None` will result in an elementwise object comparison in the future -->
<!--X-From-R13: "Sqjneq q'Ohiretar" &#60;rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Tue, 20 Oct 2015 09:59:40 +0200 -->
<!--X-Message-Id: CAED9pY8MjXcKg7289gLdP2smenxTONrAOHoVv0LJGdt=4p32RQ@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: CY1PR0301MB12092E63CBEF7E79A3298FB7DA320@CY1PR0301MB1209.namprd03.prod.outlook.com -->
<!--X-Reference: CAED9pY9B14c0&#45;Jrp5dao2hLUQpLYAwo1T+&#45;2sha9NdMApLQjDA@mail.gmail.com -->
<!--X-Reference: CY1PR0301MB120988839FEC333C74E98DFCDA3D0@CY1PR0301MB1209.namprd03.prod.outlook.com -->
<!--X-Reference: CAED9pY9W6HAfuMVTLgYrj_2_viDkY4OFLXZbKZH2Ua8t8BVvsg@mail.gmail.com -->
<!--X-Reference: CY1PR0301MB1209349A9E799E3642B4B300DA3D0@CY1PR0301MB1209.namprd03.prod.outlook.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: RelaxWarning: comparison to `None` will result in an elementwise object comparison in the future -- October 20, 2015 - 09:59</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: RelaxWarning: comparison to `None` will result in an elementwise object comparison in the future</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00008" class="tabs">Index by Date</a> | <a href="threads.html#00008" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00007.html">Date Prev</a>] [<a href="msg00009.html">Date Next</a>] [<a href="msg00007.html">Thread Prev</a>] [<a href="msg00009.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Sze Chan &lt;samuelsw.chan@xxxxxxxxxxxxxxxx&gt;,  &quot;relax-users@xxxxxxx&quot; &lt;relax-users@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Tue, 20 Oct 2015 09:59:10 +0200</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113; h=mime-version:sender:in-reply-to:references:date:message-id:subject :from:to:content-type; bh=gljqjayoOjfFWv1lgaZwimuixVL/F7zES6onjLR8E34=; b=YRogmyWOs8Eed6BXfRoACbzA27IUvin7AF0sBfPL0FQIVj8StyAC8Htx4Ntimtt3q2 piqadZH8U6ywGPLJHd83EpBwwy9YYD/cteHo+m+PNF1ydVlDF53StyLYQiJ+3+vxopfv jY8emz+m7uFce6wCgxXbzO4++uqa0IgCtbqCzPHn7rFnErqZjO+/86FTnD8N9bib6FQu NJhLFl1PBrxTG3yXy/+Sl71rnLG7NW/nMVrpn1bPpPpFWx1dpySUjwjKS+t8m5qf/+// nIyJwKEfl/SHgSxR1GhQc4tMCzV9VemwbJVdOE9/sIILdvdjz6pUVr2G/JYRPRWCmHcn R1FA==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;CAED9pY8MjXcKg7289gLdP2smenxTONrAOHoVv0LJGdt=4p32RQ@mail.gmail.com&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;<a href="msg00003.html">CY1PR0301MB12092E63CBEF7E79A3298FB7DA320@CY1PR0301MB1209.namprd03.prod.outlook.com</a>&gt; &lt;<a href="msg00006.html">CAED9pY9B14c0-Jrp5dao2hLUQpLYAwo1T+-2sha9NdMApLQjDA@mail.gmail.com</a>&gt; &lt;<a href="msg00007.html">CY1PR0301MB120988839FEC333C74E98DFCDA3D0@CY1PR0301MB1209.namprd03.prod.outlook.com</a>&gt; &lt;CAED9pY9W6HAfuMVTLgYrj_2_viDkY4OFLXZbKZH2Ua8t8BVvsg@mail.gmail.com&gt; &lt;CY1PR0301MB1209349A9E799E3642B4B300DA3D0@CY1PR0301MB1209.namprd03.prod.outlook.com&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on October 20, 2015 - 09:59:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">On 16 October 2015 at 17:42, Sze Chan &lt;samuelsw.chan@xxxxxxxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hello Edward,

The problem to load into @N* appears when I use my full data, but using a 
truncated version does not cause a problem.

I attached, the truncated data, full data, and the PDB I've been using (its 
a truncated version of a PDB from the RCSB) in the bug report.
</pre></blockquote><pre style="margin: 0em;">

Cheers!  I've create a system test and now fixed the problem in relax.
See <a  rel="nofollow" href="https://web.archive.org/web/https://gna.org/bugs/?23933#comment3">https://gna.org/bugs/?23933#comment3</a> .  The problem was introduced
in Nov. 2014.  It might take me a while to release a new version of
minfx, bmrblib, and relax to have all these issues resolved.  Anyway,
you can ignore the comparison to 'None' warnings, as these are
harmless for now.  And they are fixed in minfx, bmrblib, and relax and
so will be part of relax 4.0.1.  With the fixes, the relax log will
look like:


&quot;&quot;&quot;
relax&gt; pipe.create(pipe_name='mf', pipe_type='mf', bundle=None)

relax&gt; structure.read_pdb(file='LARA_N_term_no_helixFH_reg.pdb',
dir='/data/relax/relax-trunk/test_suite/shared_data/model_free/bug_23933_relax_data_read_ids',
read_mol=None, set_mol_name=None, read_model=None, set_model_num=None,
alt_loc=None, verbosity=1, merge=False)

Internal relax PDB parser.
Opening the file
'/data/relax/relax-trunk/test_suite/shared_data/model_free/bug_23933_relax_data_read_ids/LARA_N_term_no_helixFH_reg.pdb'
for reading.
Adding molecule 'LARA_N_term_no_helixFH_reg_mol24' (from the original
molecule number 24).

relax&gt; structure.load_spins(spin_id='@N', from_mols=None,
mol_name_target=None, ave_pos=True)
Adding the following spins to the relax data store.

# mol_name                          res_num    res_name    spin_num
spin_name
LARA_N_term_no_helixFH_reg_mol24    329        GLN         1
N
LARA_N_term_no_helixFH_reg_mol24    330        GLN         10
N
LARA_N_term_no_helixFH_reg_mol24    331        SER         19
N

relax&gt; structure.load_spins(spin_id='@H', from_mols=None,
mol_name_target=None, ave_pos=True)
Adding the following spins to the relax data store.

# mol_name                          res_num    res_name    spin_num
spin_name
LARA_N_term_no_helixFH_reg_mol24    330        GLN         0
H
LARA_N_term_no_helixFH_reg_mol24    331        SER         0
H

relax&gt; structure.load_spins(spin_id='@NE1', from_mols=None,
mol_name_target=None, ave_pos=True)
Adding the following spins to the relax data store.

RelaxWarning: No spins matching the '@NE1' ID string could be found.

relax&gt; structure.load_spins(spin_id='@HE1', from_mols=None,
mol_name_target=None, ave_pos=True)
Adding the following spins to the relax data store.

RelaxWarning: No spins matching the '@HE1' ID string could be found.

relax&gt; relax_data.read(ri_id='R1_600', ri_type='R1', frq=600402816.0,
file='r1_600.txt',
dir='/data/relax/relax-trunk/test_suite/shared_data/model_free/bug_23933_relax_data_read_ids',
spin_id_col=None, mol_name_col=None, res_num_col=1, res_name_col=None,
spin_num_col=None, spin_name_col=None, data_col=2, error_col=3,
sep=None, spin_id=None)
Opening the file
'/data/relax/relax-trunk/test_suite/shared_data/model_free/bug_23933_relax_data_read_ids/r1_600.txt'
for reading.
Traceback (most recent call last):
  File &quot;/data/relax/relax-trunk/test_suite/system_tests/model_free.py&quot;,
line 499, in test_bug_23933_relax_data_read_ids
    self.interpreter.relax_data.read(ri_id='R1_600', ri_type='R1',
frq=600402816.0, file='r1_600.txt', dir=path, res_num_col=1,
data_col=2, error_col=3)
  File &quot;/data/relax/relax-trunk/prompt/uf_objects.py&quot;, line 225, in __call__
    self._backend(*new_args, **uf_kargs)
  File &quot;/data/relax/relax-trunk/pipe_control/relax_data.py&quot;, line 925, in read
    pack_data(ri_id, ri_type, frq, values, errors,
mol_names=mol_names, res_nums=res_nums, res_names=res_names,
spin_nums=spin_nums, spin_names=spin_names, spin_id=spin_id)
  File &quot;/data/relax/relax-trunk/pipe_control/relax_data.py&quot;, line 773,
in pack_data
    raise RelaxMultiSpinIDError(spin_ids[i], new_ids)
RelaxMultiSpinIDError: RelaxError: The spin ID
'#LARA_N_term_no_helixFH_reg_mol24:331' corresponds to multiple spins,
including '#LARA_N_term_no_helixFH_reg_mol24:331@N' and
'#LARA_N_term_no_helixFH_reg_mol24:331@H'.
&quot;&quot;&quot;


The bug that was hidden from you in the GUI will now stop relax and
pop up a RelaxError dialog.  Therefore you don't need the new relax
version or use a checked out copy of the source code repository
(unless you'd like the new code to remove all of the numpy
FutureWarning messages).  You just need to set the spin_id argument to
'@N'.  This allows relax to understand that you have nitrogen and not
proton relaxation data - relax will accept both and it is currently
ambiguous if it is 'N' or 'H' data.  Anyway, thank you for the bug
report and attached files.  This has allowed me to fix both the numpy
FutureWarning and missing 'ids' variable problems.  If you see any
other strange warnings or errors, it would be appreciated if you could
report them so that they can be resolved for future relax versions.

Cheers,

Edward


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00003" href="msg00003.html">RelaxWarning: comparison to `None` will result in an elementwise object comparison in the future</a></strong>
<ul><li><em>From:</em> Sze Chan</li></ul></li>
<li><strong><a name="00006" href="msg00006.html">Re: RelaxWarning: comparison to `None` will result in an elementwise object comparison in the future</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00007" href="msg00007.html">Re: RelaxWarning: comparison to `None` will result in an elementwise object comparison in the future</a></strong>
<ul><li><em>From:</em> Sze Chan</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Fri Oct 23 13:00:12 2015</div>  
</body>
</html>
