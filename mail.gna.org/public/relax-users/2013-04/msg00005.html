<!-- MHonArc v2.6.16 -->
<!--X-Subject: Is it possible to analyse CPMG experiments with relax? -->
<!--X-From-R13: Febryf Szgrxæe Zvaarg <gyvaargNtznvy.pbz> -->
<!--X-Date: Tue, 30 Apr 2013 18:40:59 +0200 -->
<!--X-Message-Id: CA+CBx2OZQqMPa+0+KDKnBPOsVSo405KqnR=1B1_3CspRhOaOSA@mail.gmail.com -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Is it possible to analyse CPMG experiments with relax? -- April 30, 2013 - 18:40</title>
<link rel="stylesheet" type="text/css" href="/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="https://gna.org/images/gna.theme/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Is it possible to analyse CPMG experiments with relax?</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00005" class="tabs">Index by Date</a> | <a href="threads.html#00005" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00004.html">Date Prev</a>] [Date Next] [<a href="msg00002.html">Thread Prev</a>] [Thread Next]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: relax-users@xxxxxxx</li>
<li class="menuitem">
<em>Date</em>: Tue, 30 Apr 2013 18:40:07 +0200</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;	h=x-received:mime-version:from:date:message-id:subject:to	:content-type; bh=onaDN/EP6ebcDkmv4ho6a4qBrRGKqIpvPiVNiVYV68g=;	b=Izr8WS78zJ8RhO6AxD4/lXWNAhzoV2bzdLMjQsgtXF2j7C7JczB2Zs/ysLzmflKIv2	0E3xt0rowPFTfX4XuQD8h4/Xrk7xrYBzvXOBct5qZkg9exz4jNjzOZNH28rQY8vfAPLU	sFB9MqAbtHj+PocBlVF/aABv4tZ32APo0IIr9nkzb6qv/ivqRPLvF84ONLlpKOofhJcb	tIwbBYt7asoKZwhpg9U6O9ogZHug2Ovwp5AQGYGH+bYdJ9A0OS10lvFWhPLwNcUbMYD4	teO7DWK9aiJw1hbY7m/1erCXSqwTrsUGu4Ae/9b8SeuTBhxTm7r5kOrciTtEqCOmVDiL	s4GQ==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00005.html">CA+CBx2OZQqMPa+0+KDKnBPOsVSo405KqnR=1B1_3CspRhOaOSA@mail.gmail.com</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Troels Emtekær Linnet</strong> on April 30, 2013 - 18:40:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
Dear relax users.<br clear="all"><div><br></div><div>I am looking into different NMR programs to fit</div><div>relaxation data for CPMG relaxation dispersion experiments and T1rho.</div><div><br></div><div>Essentially, I am looking for programs for which can fit functions, which for example nessy provide:</div>

<div><a rel="nofollow" href="http://home.gna.org/nessy/reference.html">http://home.gna.org/nessy/reference.html</a></div>The Meiboom equation or Richard-Carver equation<br><div><br></div><div>Nessy is very buggy, and I am looking for a replacement.</div>

<div><br></div><div>I should be able to:</div><div>R2eff = -1.0/time_T2*log(Intensity/averageZero)</div><div><br></div><div>ncyc_arr=[28, 0, 4, 32, 60, 2, 10, 16, 8, 20, 50, 18, 40, 6, 12, 0, 24]</div><div>time_T2 = 0.06 second</div>

<div>nu = ncyc_arr[i]/time_T2</div><div><br></div><div><div>R2cpmg_slow:</div><div>tau_cpmg = 1.0/(4*nu)</div><div>R2eff = R2+ka*(1.0-sin(Domega*tau_cpmg)/(Domega*tau_cpmg))</div><div><br></div></div><div><br></div><div>
I have followed the tutorial in the homepage manual:</div>
<div><br></div><div>Can relax analyse these kinds of experiments?</div><div>Should i provide the: <b>relax_fit.relax_time(time </b>to be equal tau_cpmg ?</div><div>I put in time_T2, even though its wrong. I just wanted to try the program. :-)</div>

<div><br></div><div>----------------------------------------------------------------</div><div>&quot;&quot;&quot;Script for relaxation curve fitting.&quot;&quot;&quot;</div><div><div># Create the &#39;rx&#39; data pipe.</div>

<div>pipe.create(&#39;rx&#39;, &#39;relax_fit&#39;)</div><div>## Load the backbone amide 15N spins from a PDB file.</div><div>pdbfile=False</div><div>if pdbfile:</div><div>    structure.read_pdb(pdbfile)</div><div>    structure.load_spins(spin_id=&#39;@N&#39;)</div>

<div>else:</div><div>    molecule.create(mol_name=&#39;protein&#39;, mol_type=&#39;protein&#39;)</div><div>    residue.create(res_num=2, res_name=&#39;VAL&#39;)</div><div>    spin.create(res_num=2, spin_name=&#39;N&#39;)</div>

<div>    residue.create(res_num=3, res_name=&#39;PHE&#39;)</div><div>    spin.create(res_num=3, spin_name=&#39;N&#39;)</div><div>    residue.create(res_num=4, res_name=&#39;GLY&#39;)</div><div>    spin.create(res_num=4, spin_name=&#39;N&#39;)</div>

<div>    residue.create(res_num=5, res_name=&#39;ARG&#39;)</div><div>    spin.create(res_num=5, spin_name=&#39;N&#39;)</div><div>    residue.create(res_num=6, res_name=&#39;CYS&#39;)</div><div>    .... and so on</div><div>

<br></div><div>## Loop over the spectra intensities. Relaxation times should be in seconds.</div><div>readint=True</div><div>if readint:</div><div>    spectrum.read_intensities(dir=&#39;relax&#39;, file=&#39;proc_list.txt.0int&#39;, spectrum_id=&#39;0_0.0&#39;, int_method=&#39;point sum&#39;, heteronuc=&#39;N&#39;, proton=&#39;HN&#39;, int_col=3)</div>

<div>    relax_fit.relax_time(time=0.06, spectrum_id=&#39;0_0.0&#39;)</div><div>    spectrum.read_intensities(dir=&#39;relax&#39;, file=&#39;proc_list.txt.1int&#39;, spectrum_id=&#39;1_133.33&#39;, int_method=&#39;point sum&#39;, heteronuc=&#39;N&#39;, proton=&#39;HN&#39;, int_col=3)</div>

<div>    relax_fit.relax_time(time=0.06, spectrum_id=&#39;1_133.33&#39;)</div><div>    spectrum.read_intensities(dir=&#39;relax&#39;, file=&#39;proc_list.txt.2int&#39;, spectrum_id=&#39;2_166.67&#39;, int_method=&#39;point sum&#39;, heteronuc=&#39;N&#39;, proton=&#39;HN&#39;, int_col=3)</div>

<div>    relax_fit.relax_time(time=0.06, spectrum_id=&#39;2_166.67&#39;)</div><div>    spectrum.read_intensities(dir=&#39;relax&#39;, file=&#39;proc_list.txt.3int&#39;, spectrum_id=&#39;3_333.33&#39;, int_method=&#39;point sum&#39;, heteronuc=&#39;N&#39;, proton=&#39;HN&#39;, int_col=3)</div>

<div>    relax_fit.relax_time(time=0.06, spectrum_id=&#39;3_333.33&#39;)</div><div>    spectrum.read_intensities(dir=&#39;relax&#39;, file=&#39;proc_list.txt.4int&#39;, spectrum_id=&#39;4_33.33&#39;, int_method=&#39;point sum&#39;, heteronuc=&#39;N&#39;, proton=&#39;HN&#39;, int_col=3)</div>

<div>    relax_fit.relax_time(time=0.06, spectrum_id=&#39;4_33.33&#39;)</div><div>   ... and so on</div><div><br></div><div># Specify the duplicated spectra.</div><div>spectrum.replicated(spectrum_ids=[&#39;0_0.0&#39;, &#39;18_0.0&#39;])</div>

<div>spectrum.error_analysis()</div><div><br></div><div># Deselect unresolved spins.</div><div>#deselect.read(file=&#39;unresolved&#39;, mol_name_col=1, res_num_col=2, res_name_col=3, spin_num_col=4, spin_name_col=5)</div>

<div><br></div><div># Set the relaxation curve type.</div><div>relax_fit.select_model(&#39;exp&#39;)</div><div><br></div><div># Grid search.</div><div>grid_search(inc=11)</div><div><br></div><div># Minimise.</div><div>minimise(&#39;simplex&#39;, scaling=False, constraints=False)</div>

<div><br></div><div>## Monte Carlo simulations.</div><div>monte_carlo.setup(number=10)</div><div>monte_carlo.create_data()</div><div>monte_carlo.initial_values()</div><div>minimise(&#39;simplex&#39;, scaling=False, constraints=False)</div>

<div>monte_carlo.error_analysis()</div><div><br></div><div>## Save the relaxation rates.</div><div>value.write(param=&#39;rx&#39;, file=&#39;rx.out&#39;, force=True)</div><div><br></div><div>## Save the results.</div><div>

results.write(file=&#39;results&#39;, force=True)</div><div><br></div><div># Save the program state.</div><div>state.save(&#39;rx.save&#39;, force=True)</div></div><div><br></div><div>Best</div><div><br>Troels Emtekær Linnet<br>


<div><span dir="ltr"><span style="font-family:sans-serif;font-size:13px;line-height:19px;background-color:rgb(255,255,255)">Ved kløvermarken 9, <a rel="nofollow" href="http://1.th" target="_blank">1.th</a></span></span></div><div><span dir="ltr"><font face="sans-serif"><span style="line-height:19px">2300 København S<br>

</span></font>Mobil: </span><span style="font-family:Arial,Helvetica,sans-serif;color:rgb(0,0,0);font-size:12px">+45 60210234</span></div><div style="display:inline"></div></div>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer">You are on the <a href="http://gna.org">Gna!</a> mail server.</div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Tue Apr 30 19:00:07 2013</div>  
</body>
</html>
