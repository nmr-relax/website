<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: relaxing the BMRB. -->
<!--X-From-R13: "Sqjneq q'Ohiretar" <rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Mon, 12 Jan 2009 22:46:49 +0100 -->
<!--X-Message-Id: 7f080ed10901121344v3b964847y1fae836ba4666d7@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 7f080ed10901111029p3aad1df5qce9193ce1d926cec@mail.gmail.com -->
<!--X-Reference: 686861180901120233q3bad8846xa1a527a667e1984@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: relaxing the BMRB. -- January 12, 2009 - 22:46</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: relaxing the BMRB.</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00069" class="tabs">Index by Date</a> | <a href="threads.html#00069" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00072.html">Date Prev</a>] [<a href="msg00070.html">Date Next</a>] [<a href="msg00071.html">Thread Prev</a>] [<a href="msg00072.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: &quot;Jurgen F. Doreleijers&quot; &lt;jurgenfd@xxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Mon, 12 Jan 2009 22:44:00 +0100</li>
<li class="menuitem">
<em>Cc</em>: relax-devel@xxxxxxx, Eldon Ulrich &lt;elu@xxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00069.html">7f080ed10901121344v3b964847y1fae836ba4666d7@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;7f080ed10901111029p3aad1df5qce9193ce1d926cec@xxxxxxxxxxxxxx&gt;	&lt;686861180901120233q3bad8846xa1a527a667e1984@xxxxxxxxxxxxxx&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on January 12, 2009 - 22:46:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Hi,

Thanks for the quick response.  I've used the SaveFrameTest.py test
code as an example but also found that using pystarlib to read a full
BMRB record, such as Sebasian Morin's
<a  rel="nofollow" href="http://www.bmrb.wisc.edu/cgi-bin/explore.cgi?format=raw&amp;bmrbId=6838">http://www.bmrb.wisc.edu/cgi-bin/explore.cgi?format=raw&amp;bmrbId=6838</a>
data, helps to explain the python data structure design.  Using this
I've worked out the 'free' argument to TabTable and the significance
of a few other arguments.  relax is now outputting relaxation data in
STAR format, and the pystarlib code seems to be working perfectly.
Apart from the import issues that I fixed in the relax copy of
pystarlib (<a  rel="nofollow" href="http://www.nmr-relax.com/mail.gna.org/public/relax-commits/2009-01/msg00155.html">https://mail.gna.org/public/relax-commits/2009-01/msg00155.html</a>),
it looks like the code requires zero modification to read and write
these BMRB files.  This is perfect!

Cheers,

Edward


On Mon, Jan 12, 2009 at 11:33 AM, Jurgen F. Doreleijers
&lt;jurgenfd@xxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi Edward,

Nice to hear from you again. It has been a while indeed. I joined an
NMR lab in the Netherlands since but am still collaborating with BMRB
too.

The best thing to start off with would be to look at the python unit
tests such as the one in:

<a  rel="nofollow" href="http://code.google.com/p/pystarlib/source/browse/trunk/src/STAR/SaveFrameTest.py">http://code.google.com/p/pystarlib/source/browse/trunk/src/STAR/SaveFrameTest.py</a>

It shows you how to fill in a python data structure that can then be
rendered to STAR text.

All the best,
Jurgen

On Sun, Jan 11, 2009 at 7:29 PM, Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt; 
wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Dear Eldon and Jurgen,

I have finally made some progress in interfacing relax with the BMRB
using the pystarlib library.  Getting relax to produce perfectly
formatted and complete NMR_STAR v3.1 files for submission to the BMRB
is still a way off though.  For this, I have a few questions regarding
both getting pystarlib to produce the v3.1 format and what the final
result should look like.  For reference, the relax formatted XML file
which I would like to convert to NMR-STAR v3.1 format is located at:

<a  rel="nofollow" href="http://svn.gna.org/svn/relax/branches/bmrb/test_suite/shared_data/model_free/OMP/final_results_trunc_1.3.bz2">http://svn.gna.org/svn/relax/branches/bmrb/test_suite/shared_data/model_free/OMP/final_results_trunc_1.3.bz2</a>

This file is part of the relax test suite and is distributed with
relax.  For submission, I would like to convert 100% of the data in
this file but I'm not exactly sure how this would look yet.  Eldon, is
there a complete v3.1 formatted file containing model-free results
that I can use for a reference?  It would be extremely useful if we
could find or create a complete reference file for relaxation data
using currently deposited data.  This would be better if it was the
file for submission rather than for storage in the BMRB.  Or, as I
will get relax to force the user into inputting all required fields
before relax creates the file, would the submitted file be identical
to the stored file?  I have been using Steven van Doren's deposited
data at 
<a  rel="nofollow" href="http://www.bmrb.wisc.edu/cgi-bin/explore.cgi?format=raw&amp;bmrbId=5841">http://www.bmrb.wisc.edu/cgi-bin/explore.cgi?format=raw&amp;bmrbId=5841</a>,
but this is obviously quite different from the v3.1 format.

For the formatting using pystarlib, I am using as reference
<a  rel="nofollow" href="ftp://ftp.bmrb.wisc.edu/pub/data/nmr-star_dict/dictionary_files/nmrstar3_fake.txt">ftp://ftp.bmrb.wisc.edu/pub/data/nmr-star_dict/dictionary_files/nmrstar3_fake.txt</a>.
 I am currently trying to get relax to produce a file with just
relaxation data.  The relevant section for R1 relaxation in this file
is:

save_&lt;heteronucl_T1_relaxation&gt;
 _Heteronucl_T1_list.Sf_category     heteronucl_T1_relaxation
 _Heteronucl_T1_list.Sf_framecode     &lt;heteronucl_T1_relaxation&gt;
 _Heteronucl_T1_list.Entry_ID                             1
 _Heteronucl_T1_list.Sf_ID                                2
 _Heteronucl_T1_list.ID                                   2
 _Heteronucl_T1_list.Data_file_name                       &quot;Long string 
value&quot;
 _Heteronucl_T1_list.Sample_condition_list_ID             2
 _Heteronucl_T1_list.Sample_condition_list_label          &quot;Long string 
value&quot;
 _Heteronucl_T1_list.Spectrometer_frequency_1H            110.234
 _Heteronucl_T1_list.T1_coherence_type                    &quot;String value&quot;
 _Heteronucl_T1_list.T1_val_units                         &quot;Short string 
value&quot;
 _Heteronucl_T1_list.Details                              &quot;Possible
multiline text&quot;
 _Heteronucl_T1_list.Text_data_format                     &quot;String value&quot;
 _Heteronucl_T1_list.Text_data                            &quot;Possible
multiline text&quot;

 loop_
    _Heteronucl_T1_experiment.Experiment_ID
    _Heteronucl_T1_experiment.Experiment_name
    _Heteronucl_T1_experiment.Sample_ID
    _Heteronucl_T1_experiment.Sample_label
    _Heteronucl_T1_experiment.Sample_state
    _Heteronucl_T1_experiment.Sf_ID
    _Heteronucl_T1_experiment.Entry_ID
    _Heteronucl_T1_experiment.Heteronucl_T1_list_ID

   2  &quot;Long string value&quot;  2  &quot;Long string value&quot;  &quot;String value&quot;    2  1  
2

 stop_

 loop_
    _Heteronucl_T1_software.Software_ID
    _Heteronucl_T1_software.Software_label
    _Heteronucl_T1_software.Method_ID
    _Heteronucl_T1_software.Method_label
    _Heteronucl_T1_software.Sf_ID
    _Heteronucl_T1_software.Entry_ID
    _Heteronucl_T1_software.Heteronucl_T1_list_ID

   2  &quot;Long string value&quot;  2  &quot;Long string value&quot;  2    1  2

 stop_

 loop_
    _T1.ID
    _T1.Assembly_atom_ID
    _T1.Entity_assembly_ID
    _T1.Entity_ID
    _T1.Comp_index_ID
    _T1.Seq_ID
    _T1.Comp_ID
    _T1.Atom_ID
    _T1.Atom_type
    _T1.Atom_isotope_number
    _T1.Val
    _T1.Val_err
    _T1.Resonance_ID
    _T1.Auth_entity_assembly_ID
    _T1.Auth_seq_ID
    _T1.Auth_comp_ID
    _T1.Auth_atom_ID
    _T1.Sf_ID
    _T1.Entry_ID
    _T1.Heteronucl_T1_list_ID

   2  2  2  2  2    2  1  1  &quot;Short string value&quot;  2    110.234
110.234  2  &quot;Short string value&quot;  &quot;Short string value&quot;    &quot;Short
string value&quot;  &quot;Short string value&quot;  2  1  2

 stop_

save_

Jurgen, my question is how do you produce the correct File.datanodes
list using the SaveFrame and Tagtable objects to reproduce this when
calling File.write()?  For example, how do you create the
_Heteronucl_T1_list.Sf_category entry?

Cheers,

Edward


P.S.  It would be much appreciated if you could use reply-to-all
rather than simply replying, as this will include the relax-devel
mailing list in the CC list.  Thanks.

</pre></blockquote><pre style="margin: 0em;">



--
Jurgen F. Doreleijers
Centre for Molecular &amp; Biomolecular Informatics, NCMLS &amp;
Protein Biophysics, Institute for Molecules &amp; Materials
Radboud University of Nijmegen
Visitors: NCMLS Research building, room 0.25, Geert-Grooteplein 26-28,
6525 GA Nijmegen, The Netherlands
Mail: Protein Biophysics 260, PO Box 9101, 6500 HB Nijmegen, The
Netherlands
Tel: +31 24 3619674

</pre></blockquote><pre style="margin: 0em;">


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00055" href="msg00055.html">relaxing the BMRB.</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00071" href="msg00071.html">Re: relaxing the BMRB.</a></strong>
<ul><li><em>From:</em> Jurgen F. Doreleijers</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Tue Jan 13 00:00:20 2009</div>  
</body>
</html>
