<!-- MHonArc v2.6.18 -->
<!--X-Subject: r23218 &#45; in /branches/disp_speed/test_suite/system_tests: relax_disp.py scripts/relax_disp/hansen_data_missing.py -->
<!--X-From-R13: gyvaargNaze&#45;erynk.pbz -->
<!--X-Date: Mon, 19 May 2014 00:51:16 +0200 -->
<!--X-Message-Id: E1Wm9vI&#45;0003Vu&#45;Gt@subversion.gna.org -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>r23218 - in /branches/disp_speed/test_suite/system_tests: relax_disp.py scripts/relax_disp/hansen_data_missing.py -- May 19, 2014 - 00:51</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />r23218 - in /branches/disp_speed/test_suite/system_tests: relax_disp.py scripts/relax_disp/hansen_data_missing.py</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00321" class="tabs">Index by Date</a> | <a href="threads.html#00321" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00320.html">Date Prev</a>] [<a href="msg00322.html">Date Next</a>] [<a href="msg00320.html">Thread Prev</a>] [<a href="msg00322.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: relax-commits@xxxxxxx</li>
<li class="menuitem">
<em>Date</em>: Sun, 18 May 2014 22:51:16 -0000</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00321.html">E1Wm9vI-0003Vu-Gt@subversion.gna.org</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>tlinnet</strong> on May 19, 2014 - 00:51:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Author: tlinnet
Date: Mon May 19 00:51:15 2014
New Revision: 23218

URL: <a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax?rev=23218&amp;view=rev">http://svn.gna.org/viewcvs/relax?rev=23218&amp;view=rev</a>
Log:
Critical fixes for systemtest: 
Relax_disp.test_hansen_cpmg_data_missing_auto_analysis.

task #7793: (<a  rel="nofollow" href="https://gna.org/task/?7793">https://gna.org/task/?7793</a>) Speed-up of dispersion models.

This was found necessary after commit 23216.

It is suspected that when relax have touched boundary values which made
math domain errors, the error cathing have created local minima or
interfered with the simplex search algorithm.

Modified:
    branches/disp_speed/test_suite/system_tests/relax_disp.py
    
branches/disp_speed/test_suite/system_tests/scripts/relax_disp/hansen_data_missing.py

Modified: branches/disp_speed/test_suite/system_tests/relax_disp.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/disp_speed/test_suite/system_tests/relax_disp.py?rev=23218&amp;r1=23217&amp;r2=23218&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/disp_speed/test_suite/system_tests/relax_disp.py?rev=23218&amp;r1=23217&amp;r2=23218&amp;view=diff</a>
==============================================================================
--- branches/disp_speed/test_suite/system_tests/relax_disp.py   (original)
+++ branches/disp_speed/test_suite/system_tests/relax_disp.py   Mon May 19 
00:51:15 2014
@@ -2019,12 +2019,12 @@
         print(&quot;%-20s %20.15g %20.15g %20.15g&quot; % (&quot;dw&quot;, spin4.dw, spin70.dw, 
spin71.dw))
         print(&quot;%-20s %20.15g %20.15g %20.15g&quot; % (&quot;kex&quot;, spin4.kex, 
spin70.kex, spin71.kex))
         print(&quot;%-20s %20.15g %20.15g %20.15g\n&quot; % (&quot;chi2&quot;, spin4.chi2, 
spin70.chi2, spin71.chi2))
-        self.assertAlmostEqual(spin4.r2[r20_key1], 1.58622828626709, 2)
-        self.assertAlmostEqual(spin4.r2[r20_key2], 1.58592122315687, 3)
-        self.assertAlmostEqual(spin4.pA, 0.51276361588332, 3)
-        self.assertAlmostEqual(spin4.dw, 0.0677279657953332, 3)
-        self.assertAlmostEqual(spin4.kex/10000, 2448.82586714642/10000, 3)
-        self.assertAlmostEqual(spin4.chi2, 20.4855900585583, 3)
+        self.assertAlmostEqual(spin4.r2[r20_key1], 1.57480192608393, 3)
+        self.assertAlmostEqual(spin4.r2[r20_key2], 1.58040540737526, 3)
+        self.assertAlmostEqual(spin4.pA, 0.99989610153257, 3)
+        self.assertAlmostEqual(spin4.dw, 4.98844001184952, 3)
+        self.assertAlmostEqual(spin4.kex/10000, 1207.34953794617/10000, 3)
+        self.assertAlmostEqual(spin4.chi2, 20.334049906085, 3)
         self.assertAlmostEqual(spin70.r2[r20_key1], 6.97252087724882, 3)
         self.assertAlmostEqual(spin70.r2[r20_key2], 9.40960089079409, 3)
         self.assertAlmostEqual(spin70.pA, 0.989857038532724, 3)
@@ -2033,7 +2033,7 @@
         self.assertAlmostEqual(spin70.chi2, 53.8382162820491, 3)
         self.assertAlmostEqual(spin71.r2[r20_key1], 4.98111206240747, 3)
         self.assertAlmostEqual(spin71.pA, 0.996607989009612, 3)
-        self.assertAlmostEqual(spin71.dw, 4.34436483888832, 3)
+        self.assertAlmostEqual(spin71.dw, 4.34436483888832, 2)
         self.assertAlmostEqual(spin71.kex/10000, 1936.74679136572/10000, 3)
         self.assertAlmostEqual(spin71.chi2, 5.5170374277749, 3)
 

Modified: 
branches/disp_speed/test_suite/system_tests/scripts/relax_disp/hansen_data_missing.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/disp_speed/test_suite/system_tests/scripts/relax_disp/hansen_data_missing.py?rev=23218&amp;r1=23217&amp;r2=23218&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/disp_speed/test_suite/system_tests/scripts/relax_disp/hansen_data_missing.py?rev=23218&amp;r1=23217&amp;r2=23218&amp;view=diff</a>
==============================================================================
--- 
branches/disp_speed/test_suite/system_tests/scripts/relax_disp/hansen_data_missing.py
       (original)
+++ 
branches/disp_speed/test_suite/system_tests/scripts/relax_disp/hansen_data_missing.py
       Mon May 19 00:51:15 2014
@@ -51,7 +51,7 @@
 ##########################
 
 # Run fast.
-Relax_disp.opt_func_tol = 1e-5
+Relax_disp.opt_func_tol = 1e-7
 Relax_disp.opt_max_iterations = 10000
 
 # Do not change!



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Mon May 19 01:00:03 2014</div>  
</body>
</html>
