<!-- MHonArc v2.6.18 -->
<!--X-Subject: r26799 &#45; in /branches/frame_order_cleanup: ./ pipe_control/ target_functions/ test_suite/unit_tests/ -->
<!--X-From-R13: rqjneqNaze&#45;erynk.pbz -->
<!--X-Date: Fri, 28 Nov 2014 09:35:56 +0100 -->
<!--X-Message-Id: E1XuH1v&#45;0005bX&#45;UL@subversion.gna.org -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>r26799 - in /branches/frame_order_cleanup: ./ pipe_control/ target_functions/ test_suite/unit_tests/ -- November 28, 2014 - 09:35</title>
<link rel="stylesheet" type="text/css" href="/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="https://gna.org/images/gna.theme/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />r26799 - in /branches/frame_order_cleanup: ./ pipe_control/ target_functions/ test_suite/unit_tests/</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00403" class="tabs">Index by Date</a> | <a href="threads.html#00403" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00402.html">Date Prev</a>] [<a href="msg00404.html">Date Next</a>] [<a href="msg00402.html">Thread Prev</a>] [<a href="msg00404.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: relax-commits@xxxxxxx</li>
<li class="menuitem">
<em>Date</em>: Fri, 28 Nov 2014 08:35:55 -0000</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00403.html">E1XuH1v-0005bX-UL@subversion.gna.org</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>edward</strong> on November 28, 2014 - 09:35:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Author: bugman
Date: Fri Nov 28 09:35:55 2014
New Revision: 26799

URL: <a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax?rev=26799&amp;view=rev">http://svn.gna.org/viewcvs/relax?rev=26799&amp;view=rev</a>
Log:
Merged revisions 26794-26795,26798 via svnmerge from 
svn+ssh://bugman@xxxxxxxxxxx/svn/relax/trunk

........
  r26794 | bugman | 2014-11-27 21:48:08 +0100 (Thu, 27 Nov 2014) | 3 lines
  
  Updated the target_functions package __all__ list to include the relax_fit* 
modules.
........
  r26795 | bugman | 2014-11-27 21:50:50 +0100 (Thu, 27 Nov 2014) | 3 lines
  
  Modified the package __all__ list checking unit test to accept *.so C 
modules.
........
  r26798 | bugman | 2014-11-28 09:34:02 +0100 (Fri, 28 Nov 2014) | 9 lines
  
  Bug fix for the pymol.view user function for when no PDB file exists.
  
  The pymol.view user function would fail with an AttributeError when the 
currently loaded data does
  not exist as a PDB file.  This is now caught and the non-existent PDB is no 
longer displayed.  A
  better solution might be to dump all the current structural data into a 
temporary file and load
  that, all within a try-finally statement to be sure to delete the temporary 
file.  This solution may
  not be what the user is interested in anyway.
........

Modified:
    branches/frame_order_cleanup/   (props changed)
    branches/frame_order_cleanup/pipe_control/pymol_control.py
    branches/frame_order_cleanup/target_functions/__init__.py
    branches/frame_order_cleanup/test_suite/unit_tests/package_checking.py

Propchange: branches/frame_order_cleanup/
------------------------------------------------------------------------------
--- svnmerge-integrated (original)
+++ svnmerge-integrated Fri Nov 28 09:35:55 2014
@@ -1 +1 @@
-/trunk:1-26791
+/trunk:1-26798

Modified: branches/frame_order_cleanup/pipe_control/pymol_control.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/frame_order_cleanup/pipe_control/pymol_control.py?rev=26799&amp;r1=26798&amp;r2=26799&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/frame_order_cleanup/pipe_control/pymol_control.py?rev=26799&amp;r1=26798&amp;r2=26799&amp;view=diff</a>
==============================================================================
--- branches/frame_order_cleanup/pipe_control/pymol_control.py  (original)
+++ branches/frame_order_cleanup/pipe_control/pymol_control.py  Fri Nov 28 
09:35:55 2014
@@ -34,9 +34,11 @@
     from subprocess import PIPE, Popen
 from tempfile import mktemp
 from time import sleep
+from warnings import warn
 
 # relax module imports.
 from lib.errors import RelaxError, RelaxNoPdbError, RelaxNoSequenceError
+from lib.warnings import RelaxWarning
 from lib.io import delete, file_root, get_file_path, open_read_file, 
open_write_file, test_binary
 from lib.structure.files import find_pdb_files
 from pipe_control.mol_res_spin import exists_mol_res_spin_data
@@ -145,6 +147,11 @@
         open_files = []
         for model in cdp.structure.structural_data:
             for mol in model.mol:
+                # No file path.
+                if not hasattr(mol, 'file_name'):
+                    warn(RelaxWarning(&quot;Cannot display the current molecular 
data in PyMOL as it has not be exported as a PDB file.&quot;))
+                    continue
+
                 # The file path as the current directory.
                 file_path = None
                 if access(mol.file_name, F_OK):

Modified: branches/frame_order_cleanup/target_functions/__init__.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/frame_order_cleanup/target_functions/__init__.py?rev=26799&amp;r1=26798&amp;r2=26799&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/frame_order_cleanup/target_functions/__init__.py?rev=26799&amp;r1=26798&amp;r2=26799&amp;view=diff</a>
==============================================================================
--- branches/frame_order_cleanup/target_functions/__init__.py   (original)
+++ branches/frame_order_cleanup/target_functions/__init__.py   Fri Nov 28 
09:35:55 2014
@@ -33,5 +33,7 @@
     'mf',
     'n_state_model',
     'potential',
-    'relax_disp'
+    'relax_disp',
+    'relax_fit',
+    'relax_fit_wrapper'
 ]

Modified: 
branches/frame_order_cleanup/test_suite/unit_tests/package_checking.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/frame_order_cleanup/test_suite/unit_tests/package_checking.py?rev=26799&amp;r1=26798&amp;r2=26799&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/frame_order_cleanup/test_suite/unit_tests/package_checking.py?rev=26799&amp;r1=26798&amp;r2=26799&amp;view=diff</a>
==============================================================================
--- branches/frame_order_cleanup/test_suite/unit_tests/package_checking.py    
  (original)
+++ branches/frame_order_cleanup/test_suite/unit_tests/package_checking.py    
  Fri Nov 28 09:35:55 2014
@@ -89,6 +89,10 @@
             if access(self.package_path+sep+module+'.py', F_OK):
                 continue
 
+            # Check for the C module.
+            if access(self.package_path+sep+module+'.so', F_OK):
+                continue
+
             # Check for the package.
             if access(self.package_path+sep+module, F_OK):
                 continue



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer">You are on the <a href="http://gna.org">Gna!</a> mail server.</div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Fri Nov 28 12:20:04 2014</div>  
</body>
</html>
