<!-- MHonArc v2.6.10 -->
<!--X-Subject: Re: Redesign of the relax data model: 1. Why change? &#45; 1.2 -->
<!--X-From-R13: "Oyrknaqne Vnafra" <ivbpurzvfgNtznvy.pbz> -->
<!--X-Date: Wed, 11 Oct 2006 15:25:32 +0200 -->
<!--X-Message-Id: 481156b20610110624x7015706o3f7e84f0d2c9c9d0@mail.gmail.com -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: Redesign of the relax data model: 1. Why change? - 1.2 -- October 11, 2006 - 15:25</title>
<link rel="stylesheet" type="text/css" href="/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="https://gna.org/images/gna.theme/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: Redesign of the relax data model: 1. Why change? - 1.2</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00064" class="tabs">Index by Date</a> | <a href="threads.html#00064" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00063.html">Date Prev</a>] [<a href="msg00065.html">Date Next</a>] [<a href="msg00063.html">Thread Prev</a>] [<a href="msg00067.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: &quot;Edward d'Auvergne&quot; &lt;edward.dauvergne@xxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Wed, 11 Oct 2006 09:24:54 -0400</li>
<li class="menuitem">
<em>Cc</em>: relax-devel@xxxxxxx</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00064.html">481156b20610110624x7015706o3f7e84f0d2c9c9d0@mail.gmail.com</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Alexandar Hansen</strong> on October 11, 2006 - 15:25:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
I have implemented code in C to read pdbs primarily using a string matching approach.&nbsp; I have run into only a few problems, but it can read most any pdb.&nbsp; I have an option in it that allows you to select which molecule number (0-9,A-Z) to read in from the pdb in cases where there are more than one.&nbsp; I haven't modified my code for this for a long time since it works well for what we use it for and it has some issues with certain formats that I know about (ie DNA where each strand has a different number) but it could possibly be a useful starting point for anyone wanting to develop it further and interested in making it comply with all the various weird PDBs.&nbsp; I have it written as a subroutine and stores the pdb into a structure variable that I created.&nbsp; Let me know if providing this code would be useful.
<br><br>Of note, it does NOT require spacings to be perfect and does not care about tabs, unlike a number of programs I have used.<br><br>Alex<br><br><div><span class="gmail_quote">On 10/11/06, <b class="gmail_sendername">
Edward d'Auvergne</b> &lt;<a href="mailto:edward.dauvergne@xxxxxxxxx">edward.dauvergne@xxxxxxxxx</a>&gt; wrote:</span><blockquote class="gmail_quote" style="border-left: 1px solid rgb(204, 204, 204); margin: 0pt 0pt 0pt 0.8ex; padding-left: 1ex;">
On Wed, 2006-10-11 at 17:02 +1000, Edward d'Auvergne wrote:<br>&gt; This post is proposal for the redesign the relax data model.&nbsp;&nbsp;This will<br>&gt; affect how data is input into the program, how data is selected, how<br>&gt; molecular structures are handled, how spin systems are handled, and how
<br>&gt; many other parts of relax function.&nbsp;&nbsp;Importantly the internal structure<br>&gt; of 'self.relax.data' will completely change.&nbsp;&nbsp;These modifications will<br>&gt; essentially break every part of relax (the isolated code in the
<br>&gt; directories 'minimise', 'maths_fns', and 'docs' will be safe from the<br>&gt; carnage, as will a few files in the base directory).&nbsp;&nbsp;If you have any<br>&gt; ideas for extending or improving the proposed data model, can see any
<br>&gt; short-comings, deficiencies, or flaws, are familiar with the PDB<br>&gt; conventions, etc., your input is very much sought after.&nbsp;&nbsp;The changes<br>&gt; should occur in the 1.3 line of the repository.&nbsp;&nbsp;1.2 versions will be
<br>&gt; unaffected - scripts will remain compatible and the 1.2 line will<br>&gt; continue to be supported with bug fixes, etc.<br>&gt;<br>&gt; I have to apologise in advance for the size of this proposal, to<br>&gt; simplify it I have divided the text into numbered sections.&nbsp;&nbsp;Once this
<br>&gt; initial parent message has been sent I will respond to it with the text<br>&gt; of the 4 major sections.&nbsp;&nbsp;This will allow 4 major threads to branch off<br>&gt; from this message on the mailing list archive<br>&gt; (
<a href="https://mail.gna.org/public/relax-devel">https://mail.gna.org/public/relax-devel</a>).&nbsp;&nbsp;If you have an opinion,<br>&gt; idea, etc. about a specific section, could you please post a separate<br>&gt; message in response to the relevant major section post?&nbsp;&nbsp;Also if you
<br>&gt; have unrelated ideas for one of these sections, could you post these as<br>&gt; separate messages as well?&nbsp;&nbsp;For example if you have separate points<br>&gt; about sections 3.1 and 3.5.1, two different posts responding to the
<br>&gt; parent Section 3 post would be appreciated.&nbsp;&nbsp;Thanks.&nbsp;&nbsp;This will help to<br>&gt; focus each discussion point into specific threads.<br>&gt;<br>&gt; Edward<br>&gt;<br>&gt;<br>&gt;<br>&gt; Redesign of the relax data model
<br>&gt;<br>&gt; Index:<br>&gt; 1.&nbsp;&nbsp;Why change?<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; 1.1&nbsp;&nbsp;The runs<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; 1.2&nbsp;&nbsp;The molecules<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; 1.3&nbsp;&nbsp;The residues<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; 1.4&nbsp;&nbsp;The spins<br>&gt; 2.&nbsp;&nbsp;A new run concept<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; 2.1&nbsp;&nbsp;Parcelling up an abstract space
<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; 2.2&nbsp;&nbsp;The run data model<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; 2.3&nbsp;&nbsp;The pipe concept<br>&gt; 3.&nbsp;&nbsp;Molecules, residues, and spins<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; 3.1&nbsp;&nbsp;The spin data model<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; 3.2&nbsp;&nbsp;The data selection concept - identifying spin systems
<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3.2.1&nbsp;&nbsp;Function arguments<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3.2.2&nbsp;&nbsp;NH data of a single protein macromolecule<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3.2.3&nbsp;&nbsp;A single organic molecule (non-polymeric)<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3.2.4&nbsp;&nbsp;A single RNA or DNA macromolecule
<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3.2.5&nbsp;&nbsp;Complexes<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; 3.3&nbsp;&nbsp;Regular _expression_<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; 3.4&nbsp;&nbsp;The spin loop<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; 3.5&nbsp;&nbsp;Molecule, sequence, and spin user function classes<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3.5.1&nbsp;&nbsp;The 'molecule' user function class
<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3.5.2&nbsp;&nbsp;The 'sequence' user function class<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3.5.3&nbsp;&nbsp;The 'spin' user function class<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; 3.6&nbsp;&nbsp;The input and output files<br>&gt; 4.&nbsp;&nbsp;Conclusion<br><br><br><br>Before reading this post, please read the parent message 'Redesign of
<br>the relax data model:&nbsp;&nbsp;A HOWTO for breaking relax.' located at<br><a href="http://https://mail.gna.org/public/relax-devel/2006-10/msg00053.html">http://https://mail.gna.org/public/relax-devel/2006-10/msg00053.html</a>
<br>(Message-id:<br>&lt;<a href="mailto:1160550133.9523.54.camel@xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx">1160550133.9523.54.camel@xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</a>&gt;).<br><br><br>1.&nbsp;&nbsp;Why change?<br><br>It is becoming apparent that the capability and flexibility of the
<br>current relax data model is very limited.&nbsp;&nbsp;For example posts to both the<br>relax-users (<a href="https://mail.gna.org/public/relax-users">https://mail.gna.org/public/relax-users</a>) and relax-devel<br>(<a href="https://mail.gna.org/public/relax-devel">
https://mail.gna.org/public/relax-devel</a>) mailing lists by Alex Hansen<br>demonstrate that the data model is not flexible enough to handle<br>relaxation data from RNA or DNA.&nbsp;&nbsp;While handling the RNA data in the 1.2<br>
relax versions is possible, the required script would be far too<br>complex.&nbsp;&nbsp;I have identified four major categories where I believe that<br>the relax data model is not flexible or elegant enough:&nbsp;&nbsp;the runs, the<br>molecules, the residues, and the spin systems (or atoms).&nbsp;&nbsp;If you can
<br>think of any other logical categories, please say.&nbsp;&nbsp;As the planned<br>changes are so disruptive, fine tuning and perfecting the design now is<br>very important.<br><br><br>1.1&nbsp;&nbsp;The runs<br><br>The way runs are currently handled in relax is far from optimal.&nbsp;&nbsp;The
<br>history of the run concept is linked to the history of the program.<br>relax was originally designed as a small program for the creation of<br>input files for Art Palmer's Modelfree program, for reading the output<br>
files, and as an implementation of the model selection data analysis<br>step.&nbsp;&nbsp;While relax still does all of these things (with Dasha now<br>supported as well), it has evolved such that it implements all of the<br>steps of the data analysis chain and can be used as a complete
<br>replacement.&nbsp;&nbsp;The origin of the run was the Modelfree input and output<br>file handling function where each model-free model optimised was called<br>a run.&nbsp;&nbsp;When the prompt and script based interfaces were implemented and
<br>user functions first created, no user functions were associated with a<br>'run'.&nbsp;&nbsp;As relax has evolved, the percentage of user functions<br>associated with the run concept has gradually risen.&nbsp;&nbsp;Now almost every<br>single user function requires a run argument.
<br><br>The problem with the current run concept is that, because you must<br>supply the run name to each user function, the run string needs to be<br>passed to all relevant functions in the program.&nbsp;&nbsp;For each user function
<br>called this results in the string bouncing around many functions, each<br>time being placed into 'self.run'.&nbsp;&nbsp;This dense branching effect means<br>that the text 'self.run' is extremely widespread within the relax code
<br>base.&nbsp;&nbsp;For example, by grepping the source code, the number of lines<br>containing the text 'self.run' in relax version 1.2.7 is 1645!&nbsp;&nbsp;This<br>branching approach mandates knowing which functions require the run<br>argument, passing the string to that function, and then making sure that
<br>the run argument is placed into 'self.run' so that the previous run is<br>not accidentally accessed.&nbsp;&nbsp;The current branching run concept is an<br>important and constant source of bugs.&nbsp;&nbsp;The complexity of the source<br>
code is unnecessarily high.<br><br><br>1.2&nbsp;&nbsp;The molecules<br><br>In the 1.2 relax versions only a single molecule is supported.&nbsp;&nbsp;This<br>molecule must also be the first molecule in the supplied PDB file.<br>relax cannot currently handle molecular complexes.&nbsp;&nbsp;For example in PDB
<br>file of an RNA/protein complex there is no way of specifying whether you<br>are studying the RNA or the protein.<br><br><br>1.3&nbsp;&nbsp;The residues<br><br>Currently relax assumes that you are studying a polymer system in which
<br>the data can be characterised by residue number (and name).&nbsp;&nbsp;However if<br>you are studying a molecule that isn't a polymer, there are no residues.<br>A 'residue number' and 'residue name' could be invented for the system
<br>but, as the residue concept is entrenched into relax, there may be<br>problems with this approach.<br><br><br>1.4&nbsp;&nbsp;The spins<br><br>relax also assumes that you only have a single relaxation data set per<br>residue.&nbsp;&nbsp;For studying the backbone NH relaxation of a protein this
<br>isn't a problem.&nbsp;&nbsp;However in RNA, DNA, and non-polymeric molecules,<br>there are likely to be multiple spins studied per 'residue'.&nbsp;&nbsp;The data<br>model should be modified to allow the analysis of these types of<br>molecules.&nbsp;&nbsp;An additional benefit when studying a protein is that you
<br>would then be able to study the backbone NH data simultaneously with CA<br>data (together with any other data sets you may have collected).<br><br><br><br>_______________________________________________<br>relax (<a href="http://nmr-relax.com">
http://nmr-relax.com</a>)<br><br>This is the relax-devel mailing list<br><a href="mailto:relax-devel@xxxxxxx">relax-devel@xxxxxxx</a><br><br>To unsubscribe from this list, get a password<br>reminder, or change your subscription options,
<br>visit the list information page at<br><a href="https://mail.gna.org/listinfo/relax-devel">https://mail.gna.org/listinfo/relax-devel</a><br></blockquote></div><br><br clear="all"><br>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00067" href="msg00067.html">Re: Redesign of the relax data model: 1. Why change? - 1.2</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer">You are on the <a href="http://gna.org">Gna!</a> mail server.</div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Thu Oct 12 17:00:26 2006</div>  
</body>
</html>
