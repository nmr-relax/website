<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: r22480 &#45; /trunk/specific_analyses/relax_disp/disp_data.py -->
<!--X-From-R13: "Sqjneq q'Ohiretar" &#60;rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Mon, 17 Mar 2014 14:11:27 +0100 -->
<!--X-Message-Id: CAED9pY_jFmJde9pUiYO3wEFj3s0v_iR7DtPANByrWPtTPZsgJg@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: E1WOaTi&#45;0004p2&#45;TG@subversion.gna.org -->
<!--X-Reference: CAED9pY_vjCtyoX8RfbjiqpfWSf7tDuhNxe_VgMAnL_CkwFAZYA@mail.gmail.com -->
<!--X-Reference: CA+CBx2Pq1QrRRu3VRQecc9gzEWS6F7a5QgyCRq3txCygNZDHXw@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: r22480 - /trunk/specific_analyses/relax_disp/disp_data.py -- March 17, 2014 - 14:11</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: r22480 - /trunk/specific_analyses/relax_disp/disp_data.py</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00085" class="tabs">Index by Date</a> | <a href="threads.html#00085" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00084.html">Date Prev</a>] [<a href="msg00086.html">Date Next</a>] [<a href="msg00083.html">Thread Prev</a>] [Thread Next]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Mon, 17 Mar 2014 14:10:55 +0100</li>
<li class="menuitem">
<em>Cc</em>: &quot;relax-devel@xxxxxxx&quot; &lt;relax-devel@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113; h=mime-version:sender:in-reply-to:references:date:message-id:subject :from:to:cc:content-type:content-transfer-encoding; bh=4udfANdYqmjQzxO/ZNThC3tEKl/k6lDzRsuIBsG0F6s=; b=jurSQCzFdAeo4aNG7zeX2tfl+8NxDgE3DOI1WWIAMYl2+QJCUtvE+aeNdbR2bhqtzC gPPbigrHj9Umvq/ZglO8N5Zo5sA5GacnnJFmioUQK7Zxip58GXZavK8plHdsK2cEmzYP Fg+DdoU0mtjvzdBp8XHUR+q1pVK8If4SGvfjGUVVA+ka9Nwwg5SMiBRl9tuJyF/gCO7L ig70HTUbL9eFoaNTuLi1T72PIiHPKrMtGfuYJ1Xk1rFOdOoELYBJerfpaMeliFgeYELP diLShK1MaH6BxsBZeRTQ7yOpapm+WxmjA8eCXA5Kiv/cekdXoxFCITPd4J3lQnImRuJr Y3Qg==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00085.html">CAED9pY_jFmJde9pUiYO3wEFj3s0v_iR7DtPANByrWPtTPZsgJg@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;E1WOaTi-0004p2-TG@subversion.gna.org&gt; &lt;<a href="msg00082.html">CAED9pY_vjCtyoX8RfbjiqpfWSf7tDuhNxe_VgMAnL_CkwFAZYA@mail.gmail.com</a>&gt; &lt;<a href="msg00083.html">CA+CBx2Pq1QrRRu3VRQecc9gzEWS6F7a5QgyCRq3txCygNZDHXw@mail.gmail.com</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on March 17, 2014 - 14:11:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Hi,

If the angles are to be wrapped between 0 and 2pi, then there is the
lib.geometry.angles.wrap_angles() function.  As a side note, this has
just been shifted into the relax library - it was located previously
in the pipe_control.angles module.  As for the spin-lock phase, anyone
can use any phase, so we shouldn't make any assumptions there with
relax.  The angle should be defined by the orientation of the starting
spin magnetisation and the spin-lock phase.

Regards,

Edward



On 17 March 2014 12:49, Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi Edward.

That would give results between -pi and pi.

Is w_1 always applied in x-phase ?
Is there anyway to imagine negative values for the field strength?

Best
Troels

2014-03-17 12:11 GMT+01:00 Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt;:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">For a much better solution to this problem, see
<a  rel="nofollow" href="http://thread.gmane.org/gmane.science.nmr.relax.devel/5119/focus=5214">http://thread.gmane.org/gmane.science.nmr.relax.devel/5119/focus=5214</a>.

Regards,

Edward



On 14 March 2014 23:21,  &lt;tlinnet@xxxxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Author: tlinnet
Date: Fri Mar 14 23:21:22 2014
New Revision: 22480

URL: <a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax?rev=22480&amp;view=rev">http://svn.gna.org/viewcvs/relax?rev=22480&amp;view=rev</a>
Log:
Fix for calculating the theta angle describing the tilted rotating frame 
relative to the laboratory, when omega1 / Delta_omega is negative.

Regarding sr #3124, (<a  rel="nofollow" href="https://gna.org/support/index.php?3124">https://gna.org/support/index.php?3124</a>) - Grace 
graphs production for R1rho analysis with R2_eff as function of Omega_eff.

This follows discussion in: 
<a  rel="nofollow" href="http://thread.gmane.org/gmane.science.nmr.relax.devel/5205">http://thread.gmane.org/gmane.science.nmr.relax.devel/5205</a>.

Modified:
    trunk/specific_analyses/relax_disp/disp_data.py

Modified: trunk/specific_analyses/relax_disp/disp_data.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/trunk/specific_analyses/relax_disp/disp_data.py?rev=22480&amp;r1=22479&amp;r2=22480&amp;view=diff">http://svn.gna.org/viewcvs/relax/trunk/specific_analyses/relax_disp/disp_data.py?rev=22480&amp;r1=22479&amp;r2=22480&amp;view=diff</a>
==============================================================================
--- trunk/specific_analyses/relax_disp/disp_data.py     (original)
+++ trunk/specific_analyses/relax_disp/disp_data.py     Fri Mar 14 
23:21:22 2014
@@ -2890,8 +2890,13 @@
                 Domega[ei][si][mi][oi].append(Delta_omega)
                 if Delta_omega == 0.0:
                     theta[ei][si][mi][oi].append(pi / 2.0)
+                # Calculate the theta angle describing the tilted 
rotating frame relative to the laboratory.
+                # If Delta_omega is negative, there follow the symmetry 
of atan, that atan(-x) = - atan(x).
+                # Then it should be: theta = pi + atan(-x) = pi - 
atan(x) = pi - abs(atan( +/- x))
+                elif omega1 / Delta_omega &gt; 0 :
+                    theta[ei][si][mi][oi].append(atan(omega1 / 
Delta_omega))
                 else:
-                    theta[ei][si][mi][oi].append(atan(omega1 / 
Delta_omega))
+                    theta[ei][si][mi][oi].append(pi + atan(omega1 / 
Delta_omega))

                 # Calculate effective field in rotating frame
                 w_eff = sqrt( Delta_omega*Delta_omega + omega1*omega1 )


_______________________________________________
relax (<a  rel="nofollow" href="/">http://www.nmr-relax.com</a>)

This is the relax-commits mailing list
relax-commits@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="/mail.gna.org/listinfo/relax-commits">https://mail.gna.org/listinfo/relax-commits</a>
</pre></blockquote><pre style="margin: 0em;">

_______________________________________________
relax (<a  rel="nofollow" href="/">http://www.nmr-relax.com</a>)

This is the relax-devel mailing list
relax-devel@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="/mail.gna.org/listinfo/relax-devel">https://mail.gna.org/listinfo/relax-devel</a>
</pre></blockquote></blockquote><pre style="margin: 0em;">


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00082" href="msg00082.html">Re: r22480 - /trunk/specific_analyses/relax_disp/disp_data.py</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00083" href="msg00083.html">Re: r22480 - /trunk/specific_analyses/relax_disp/disp_data.py</a></strong>
<ul><li><em>From:</em> Troels Emtekær Linnet</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Mon Mar 17 14:20:31 2014</div>  
</body>
</html>
