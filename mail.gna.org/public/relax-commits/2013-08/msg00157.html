<!-- MHonArc v2.6.16 -->
<!--X-Subject: r20640 &#45; in /branches/relax_disp: ./ docs/latex/ sample_scripts/ -->
<!--X-From-R13: rqjneqNaze&#45;erynk.pbz -->
<!--X-Date: Tue, 20 Aug 2013 17:14:28 +0200 -->
<!--X-Message-Id: E1VBndc&#45;0007ja&#45;CE@subversion.gna.org -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>r20640 - in /branches/relax_disp: ./ docs/latex/ sample_scripts/ -- August 20, 2013 - 17:14</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />r20640 - in /branches/relax_disp: ./ docs/latex/ sample_scripts/</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00157" class="tabs">Index by Date</a> | <a href="threads.html#00157" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00156.html">Date Prev</a>] [<a href="msg00158.html">Date Next</a>] [<a href="msg00156.html">Thread Prev</a>] [<a href="msg00158.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: relax-commits@xxxxxxx</li>
<li class="menuitem">
<em>Date</em>: Tue, 20 Aug 2013 15:14:28 -0000</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00157.html">E1VBndc-0007ja-CE@subversion.gna.org</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>edward</strong> on August 20, 2013 - 17:14:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Author: bugman
Date: Tue Aug 20 17:14:28 2013
New Revision: 20640

URL: <a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax?rev=20640&amp;view=rev">http://svn.gna.org/viewcvs/relax?rev=20640&amp;view=rev</a>
Log:
Merged revisions 20638-20639 via svnmerge from 
svn+ssh://bugman@xxxxxxxxxxx/svn/relax/trunk

........
  r20638 | bugman | 2013-08-20 17:10:55 +0200 (Tue, 20 Aug 2013) | 3 lines
  
  Updates to the sample scripts for the spectrum.read_intensities user 
function argument changes.
........
  r20639 | bugman | 2013-08-20 17:11:04 +0200 (Tue, 20 Aug 2013) | 3 lines
  
  Updates to the user manual for the spectrum.read_intensities user function 
argument changes.
........

Modified:
    branches/relax_disp/   (props changed)
    branches/relax_disp/docs/latex/curvefit.tex
    branches/relax_disp/docs/latex/noe.tex
    branches/relax_disp/sample_scripts/noe.py
    branches/relax_disp/sample_scripts/relax_fit.py

Propchange: branches/relax_disp/
------------------------------------------------------------------------------
--- svnmerge-integrated (original)
+++ svnmerge-integrated Tue Aug 20 17:14:28 2013
@@ -1,1 +1,1 @@
-/trunk:1-20635
+/trunk:1-20639

Modified: branches/relax_disp/docs/latex/curvefit.tex
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/relax_disp/docs/latex/curvefit.tex?rev=20640&amp;r1=20639&amp;r2=20640&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/relax_disp/docs/latex/curvefit.tex?rev=20640&amp;r1=20639&amp;r2=20640&amp;view=diff</a>
==============================================================================
--- branches/relax_disp/docs/latex/curvefit.tex (original)
+++ branches/relax_disp/docs/latex/curvefit.tex Tue Aug 20 17:14:28 2013
@@ -596,23 +596,17 @@
 \centerline{\includegraphics[width=0.8\textwidth, bb=14 14 1415 
1019]{graphics/screenshots/r1_analysis/peak_intensity_bb_peaks}}
 \end{minipage}
 
-In this example, a Sparky peak list containing the peak heights determined 
from the averaged chemical shift positions for all spectra will be loaded.  
Set the spectrum ID string to a unique value.  Change the heteronucleus and 
proton names to those of the $^{15}$N backbone assignments in the peak lists, 
in this case \gui{N} and \gui{NH}.
-
-To load the tryptophan indole $^{15}$N spins as well, first click on 
\guibutton{Apply} rather than \guibutton{Next}.  This will most likely cause 
a \prompt{RelaxWarning} message to appear for all peak list elements which do 
not match the atom names given:
+In this example, a Sparky peak list containing the peak heights determined 
from the averaged chemical shift positions for all spectra will be loaded.  
Set the spectrum ID string to a unique value.
+Click on \guibutton{Next}.
+This will most likely cause a \prompt{RelaxWarning} message to appear for 
all peak list elements which do not correspond to any spins loaded into the 
relax data store:
 
 \begin{minipage}[h]{\linewidth}
 \centerline{\includegraphics[width=0.8\textwidth, bb=14 14 1415 
1019]{graphics/screenshots/r1_analysis/peak_intensity_warnings}}
 \end{minipage}
 
-These messages must be carefully checked to be sure that the correct data 
has been loaded.  A \prompt{RelaxError} might be thrown if the peak list is 
corrupted or if the atom names have been incorrectly given.  In this case, 
check the message, fix the problem, and click on \guibutton{Apply} again.
-
-For the the tryptophan indole $^{15}$N spins, change the heteronucleus and 
proton names to \gui{NE1} and \gui{HE1} respectively (or to whatever you have 
named these in your assignments).  Then click on \guibutton{Next}:
-
-\begin{minipage}[h]{\linewidth}
-\centerline{\includegraphics[width=0.8\textwidth, bb=14 14 1415 
1019]{graphics/screenshots/r1_analysis/peak_intensity_trp_peaks}}
-\end{minipage}
-
-Again check the messages in the relax controller window which will appear.  
You should now see the error type page:
+These messages must be carefully checked to be sure that the correct data 
has been loaded.  A \prompt{RelaxError} might be thrown if the peak list is 
corrupted or if the dimension has been incorrectly given.  In this case check 
the message, go \guibutton{Back}, fix the problem, and click on 
\guibutton{Next} again.
+Then click on \guibutton{Next}.
+You should now see the error type page:
 
 \begin{minipage}[h]{\linewidth}
 \centerline{\includegraphics[width=0.8\textwidth, bb=14 14 1415 
1019]{graphics/screenshots/r1_analysis/peak_intensity_err_type}}

Modified: branches/relax_disp/docs/latex/noe.tex
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/relax_disp/docs/latex/noe.tex?rev=20640&amp;r1=20639&amp;r2=20640&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/relax_disp/docs/latex/noe.tex?rev=20640&amp;r1=20639&amp;r2=20640&amp;view=diff</a>
==============================================================================
--- branches/relax_disp/docs/latex/noe.tex (original)
+++ branches/relax_disp/docs/latex/noe.tex Tue Aug 20 17:14:28 2013
@@ -53,10 +53,8 @@
 structure.load_spins(spin_id='@NE1')
 
 # Load the reference spectrum and saturated spectrum peak intensities.
-spectrum.read_intensities(file='ref.list', spectrum_id='ref_ave', 
heteronuc='N', proton='HN')
-spectrum.read_intensities(file='ref.list', spectrum_id='ref_ave', 
heteronuc='NE1', proton='HE1')
-spectrum.read_intensities(file='sat.list', spectrum_id='sat_ave', 
heteronuc='N', proton='HN')
-spectrum.read_intensities(file='sat.list', spectrum_id='sat_ave', 
heteronuc='NE1', proton='HE1')
+spectrum.read_intensities(file='ref.list', spectrum_id='ref_ave')
+spectrum.read_intensities(file='sat.list', spectrum_id='sat_ave')
 
 # Set the spectrum types.
 noe.spectrum_type('ref', 'ref_ave')
@@ -146,10 +144,8 @@
 
 \begin{lstlisting}[firstnumber=11]
 # Load the reference spectrum and saturated spectrum peak intensities.
-spectrum.read_intensities(file='ref.list', spectrum_id='ref_ave', 
heteronuc='N', proton='HN')
-spectrum.read_intensities(file='ref.list', spectrum_id='ref_ave', 
heteronuc='NE1', proton='HE1')
-spectrum.read_intensities(file='sat.list', spectrum_id='sat_ave', 
heteronuc='N', proton='HN')
-spectrum.read_intensities(file='sat.list', spectrum_id='sat_ave', 
heteronuc='NE1', proton='HE1')
+spectrum.read_intensities(file='ref.list', spectrum_id='ref_ave')
+spectrum.read_intensities(file='sat.list', spectrum_id='sat_ave')
 \end{lstlisting}
 
 will load the peak heights\index{peak!height} of the reference and saturated 
NOE experiments (although the volume\index{peak!volume} could be used 
instead).  relax will automatically determine the format of the peak list.  
Currently only Sparky\index{software!Sparky}, XEasy\index{software!XEasy}, 
NMRView\index{software!NMRView} and a generic columnar formatted text file 
are supported.
@@ -383,21 +379,16 @@
 \centerline{\includegraphics[width=0.8\textwidth, bb=14 14 1415 
1019]{graphics/screenshots/noe_analysis/peak_intensity1}}
 \end{minipage}
 
-Then set the obligatory spectrum ID string to a unique value (in this case 
\guistring{ref}).  The heteronucleus and proton names must be changed to 
match the convention used in the peak list.  In case you have forgotten the 
spin names, next to the file name selection button is a preview button which 
can be used to open the peak list in the default text editor.  Set the other 
fields as needed.
-
-To load the NH data, rather than clicking on \guibutton{Next}, click on 
\guibutton{Apply}.  This will allow the tryptophan indole data to be loaded 
in the next step.  Note that a \prompt{RelaxWarning} will be thrown for all 
peak list entries which do not match the heteronucleus and proton names.  
This will cause the relax controller window to appear:
+Then set the obligatory spectrum ID string to a unique value (in this case 
\guistring{ref}).  The spectral dimension may need to be changed so that the 
peak intensities are associated with the correct atom of the pair.  In case 
you have forgotten the spin names or the format of the peak list next to the 
file name selection button is a preview button which can be used to open the 
peak list in the default text editor.  Set the other fields as needed.
+Click on \guibutton{Next}
+Note that a \prompt{RelaxWarning} will be thrown for all peak list entries 
which do not match a spin system within the relax data store.  This will 
cause the relax controller window to appear:
 
 \begin{minipage}[h]{\linewidth}
 \centerline{\includegraphics[width=0.8\textwidth, bb=14 14 1415 
1019]{graphics/screenshots/noe_analysis/peak_intensity2}}
 \end{minipage}
 
-Carefully check these warnings to be sure that the data is correctly loaded, 
and if everything is fine, the relax controller window can be closed.  If the 
atom names have been wrongly specified or some other setting is incorrect, a 
\prompt{RelaxError} might appear saying that no data was loaded -- you will 
then need to fix the settings and click on \guibutton{Apply} again.  Now 
change the heteronucleus and protons names to \guistring{NE1} and 
\guistring{HE1} respectively (or to what ever they have been named in the 
peak list).  Click on \guibutton{Next}:
-
-\begin{minipage}[h]{\linewidth}
-\centerline{\includegraphics[width=0.8\textwidth, bb=14 14 1415 
1019]{graphics/screenshots/noe_analysis/peak_intensity3}}
-\end{minipage}
-
-The relax controller will appear again -- check the \prompt{RelaxWarnings} 
to be sure that the data has loaded correctly then close the controller 
again.  The error type page should now appear.
+Carefully check these warnings to be sure that the data is correctly loaded 
and, if everything is fine, the relax controller window can be closed.  If 
the dimension has been wrongly specified or some other setting is incorrect a 
\prompt{RelaxError} might appear saying that no data was loaded -- you will 
then need to fix the settings and click on \guibutton{Apply} again.
+The error type page should now appear.
 
 \begin{minipage}[h]{\linewidth}
 \centerline{\includegraphics[width=0.8\textwidth, bb=14 14 1415 
1019]{graphics/screenshots/noe_analysis/peak_intensity4}}

Modified: branches/relax_disp/sample_scripts/noe.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/relax_disp/sample_scripts/noe.py?rev=20640&amp;r1=20639&amp;r2=20640&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/relax_disp/sample_scripts/noe.py?rev=20640&amp;r1=20639&amp;r2=20640&amp;view=diff</a>
==============================================================================
--- branches/relax_disp/sample_scripts/noe.py (original)
+++ branches/relax_disp/sample_scripts/noe.py Tue Aug 20 17:14:28 2013
@@ -1,6 +1,6 @@
 
###############################################################################
 #                                                                            
 #
-# Copyright (C) 2004-2012 Edward d'Auvergne                                  
 #
+# Copyright (C) 2004-2013 Edward d'Auvergne                                  
 #
 #                                                                            
 #
 # This file is part of the program relax (<a  rel="nofollow" href="http://www.nmr-relax.com">http://www.nmr-relax.com</a>).         
 #
 #                                                                            
 #
@@ -31,10 +31,8 @@
 structure.load_spins(spin_id='@NE1')
 
 # Load the reference spectrum and saturated spectrum peak intensities.
-spectrum.read_intensities(file='ref.list', spectrum_id='ref_ave', 
heteronuc='N', proton='HN')
-spectrum.read_intensities(file='ref.list', spectrum_id='ref_ave', 
heteronuc='NE1', proton='HE1')
-spectrum.read_intensities(file='sat.list', spectrum_id='sat_ave', 
heteronuc='N', proton='HN')
-spectrum.read_intensities(file='sat.list', spectrum_id='sat_ave', 
heteronuc='NE1', proton='HE1')
+spectrum.read_intensities(file='ref.list', spectrum_id='ref_ave')
+spectrum.read_intensities(file='sat.list', spectrum_id='sat_ave')
 
 # Set the spectrum types.
 noe.spectrum_type('ref', 'ref_ave')

Modified: branches/relax_disp/sample_scripts/relax_fit.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/relax_disp/sample_scripts/relax_fit.py?rev=20640&amp;r1=20639&amp;r2=20640&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/relax_disp/sample_scripts/relax_fit.py?rev=20640&amp;r1=20639&amp;r2=20640&amp;view=diff</a>
==============================================================================
--- branches/relax_disp/sample_scripts/relax_fit.py (original)
+++ branches/relax_disp/sample_scripts/relax_fit.py Tue Aug 20 17:14:28 2013
@@ -1,6 +1,6 @@
 
###############################################################################
 #                                                                            
 #
-# Copyright (C) 2004-2012 Edward d'Auvergne                                  
 #
+# Copyright (C) 2004-2013 Edward d'Auvergne                                  
 #
 #                                                                            
 #
 # This file is part of the program relax (<a  rel="nofollow" href="http://www.nmr-relax.com">http://www.nmr-relax.com</a>).         
 #
 #                                                                            
 #
@@ -60,8 +60,7 @@
 # Loop over the spectra.
 for i in range(len(names)):
     # Load the peak intensities (first the backbone NH, then the tryptophan 
indole NH).
-    spectrum.read_intensities(file=names[i]+'.list', dir=data_path, 
spectrum_id=names[i], int_method='height', heteronuc='N', proton='HN')
-    spectrum.read_intensities(file=names[i]+'.list', dir=data_path, 
spectrum_id=names[i], int_method='height', heteronuc='NE1', proton='HE1')
+    spectrum.read_intensities(file=names[i]+'.list', dir=data_path, 
spectrum_id=names[i], int_method='height')
 
     # Set the relaxation times.
     relax_fit.relax_time(time=times[i], spectrum_id=names[i])



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Tue Aug 20 18:00:02 2013</div>  
</body>
</html>
