<!-- MHonArc v2.6.19+ -->
<!--X-Subject: Re: model free analysis: spin deselection problem -->
<!--X-From-R13: Oynva Aertvbav &#60;Oynva.AertvbavNpevpx.np.hx> -->
<!--X-Date: Thu, 19 Nov 2015 14:55:43 +0100 -->
<!--X-Message-Id: 564DD4BA.1030509@crick.ac.uk -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 5644D3C7.6070603@crick.ac.uk -->
<!--X-Reference: CAED9pY_4Y1YiaSY=ie+WTWnJooy0Sw0FsO9cjJ1x4YT1o=7mcg@mail.gmail.com -->
<!--X-Reference: 564DBA81.2060405@crick.ac.uk -->
<!--X-Reference: CAED9pY_rLwxZWbjcGtt1f&#45;pwTw&#45;G005J1Us31irLDX7wjw&#45;gvQ@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: model free analysis: spin deselection problem -- November 19, 2015 - 14:55</title>
<link rel="stylesheet" type="text/css" href="/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="https://gna.org/images/gna.theme/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: model free analysis: spin deselection problem</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00011" class="tabs">Index by Date</a> | <a href="threads.html#00011" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00010.html">Date Prev</a>] [<a href="msg00012.html">Date Next</a>] [<a href="msg00010.html">Thread Prev</a>] [<a href="msg00012.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Thu, 19 Nov 2015 13:55:06 +0000</li>
<li class="menuitem">
<em>Authentication-results</em>: spf=none (sender IP is ) smtp.mailfrom=Alain.Oregioni@xxxxxxxxxxx; </li>
<li class="menuitem">
<em>Cc</em>: &quot;relax-users@xxxxxxx&quot; &lt;relax-users@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00011.html">564DD4BA.1030509@crick.ac.uk</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;<a href="msg00003.html">5644D3C7.6070603@crick.ac.uk</a>&gt; &lt;CAED9pY_4Y1YiaSY=ie+WTWnJooy0Sw0FsO9cjJ1x4YT1o=7mcg@mail.gmail.com&gt; &lt;<a href="msg00009.html">564DBA81.2060405@crick.ac.uk</a>&gt; &lt;<a href="msg00010.html">CAED9pY_rLwxZWbjcGtt1f-pwTw-G005J1Us31irLDX7wjw-gvQ@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>Spamdiagnosticmetadata</em>: NSPM</li>
<li class="menuitem">
<em>Spamdiagnosticoutput</em>: 1:23</li>
<li class="menuitem">
<em>User-agent</em>: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:38.0) Gecko/20100101 Thunderbird/38.3.0</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Alain Oregioni</strong> on November 19, 2015 - 14:55:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">
Hi Edward,

Thank you very much for your reply; I'm glad it's a simple error.  I'll add 
protons to the PDB.

If I may say, it would be nice to have a simple way of doing it in the script, even 
roughly for a start: if it &quot;works&quot; with a sequence, it wouldn't be worse to 
do it with a PDB without H (add any warning necessary in the description).

Hopefully, things will go smoothly for me from now on...

This mailing list is very useful. keep it alive!

Best wishes,
Alain.



On 19/11/2015 12:47, Edward d'Auvergne wrote:

On 19 November 2015 at 13:03, Alain Oregioni 
&lt;Alain.Oregioni@xxxxxxxxxxx&gt;&lt;<a  rel="nofollow" href="mailto:Alain.Oregioni@xxxxxxxxxxx">mailto:Alain.Oregioni@xxxxxxxxxxx</a>&gt; wrote:


Hi Edward,

Thanks for your reply. I was out of the office till now, so I've not had
time to debug more till now.

I had a look at the log and I didn't see any warning earlier than the ones
I mentioned, so I'm again stuck. I will check for name mismatch though, as
this has happened before.

Sorry about the attachments, I'm afraid I didn't read the communication
protocols...Here's the beginning of the script:

#################################################################################

# The diffusion model.
DIFF_MODEL = 'prolate'

# The model-free models.  Do not change these unless absolutely necessary,
the protocol is likely to fail if these are changed.
MF_MODELS = ['m0', 'm1', 'm2', 'm3', 'm4', 'm5', 'm6', 'm7', 'm8', 'm9']
LOCAL_TM_MODELS = ['tm0', 'tm1', 'tm2', 'tm3', 'tm4', 'tm5', 'tm6', 'tm7',
'tm8', 'tm9']

# The grid search size (the number of increments per dimension).
GRID_INC = 13

# The optimisation technique.
MIN_ALGOR = 'newton'

# The number of Monte Carlo simulations to be used for error analysis at the
end of the analysis.
MC_NUM = 500

# Automatic looping over all rounds until convergence (must be a boolean
value of True or False).
CONV_LOOP = True

# The local paths.
SEQ_PATH =
'C:\\Users\\aoregio\\Desk\\Crick\\Projects\\Woolfson_coiledCoil\\RC'


# Set up the data pipe.
#######################

# The following sequence of user function calls can be changed as needed.

# Create the data pipe.
pipe_bundle = &quot;mf (%s)&quot; % asctime(localtime())
name = &quot;origin - &quot; + pipe_bundle
pipe.create(name, 'mf', bundle=pipe_bundle)

# Load the PDB file.
structure.read_pdb('4DZM-CC-pIL-I17N-dimer-AsnA.pdb', dir='.',
set_mol_name=['CCDi_mol1','CCDi_mol2'], alt_loc='A')

# Set up the 15N and 1H spins (both backbone and Trp indole sidechains).
#structure.load_spins(spin_id='@N', ave_pos=False)
structure.load_spins(spin_id=':6@N', ave_pos=False)
structure.load_spins(spin_id=':13@N', ave_pos=False)
structure.load_spins(spin_id=':17@N', ave_pos=False)
structure.load_spins(spin_id=':20@N', ave_pos=False)
structure.load_spins(spin_id=':27@N', ave_pos=False)

spin.isotope('15N', spin_id='@N*')
spin.isotope('1H', spin_id='@H*')

# Generate the 1H spins for the magnetic dipole-dipole relaxation
interaction.
sequence.attach_protons()



Hi Alain,

The problem is right here!  The sequence.attach_protons user function
is only for use when you don't have a 3D structure
(<a  rel="nofollow" href="http://www.nmr-relax.com/manual/sequence_attach_protons.html">http://www.nmr-relax.com/manual/sequence_attach_protons.html</a>).  I
should probably document that better!  Ok, done:

   <a  rel="nofollow" href="http://article.gmane.org/gmane.science.nmr.relax.scm/25823">http://article.gmane.org/gmane.science.nmr.relax.scm/25823</a>

You should load your protons from the 3D structure with
structure.load_spins user function calls
(<a  rel="nofollow" href="http://www.nmr-relax.com/manual/structure_load_spins.html">http://www.nmr-relax.com/manual/structure_load_spins.html</a>).  That way
the proton spin containers will have atomic coordinates, and the NH
bond vectors can then be calculated (which you'll need to add to your
script, see <a  rel="nofollow" href="http://www.nmr-relax.com/manual/interatom_unit_vectors.html">http://www.nmr-relax.com/manual/interatom_unit_vectors.html</a>).
For more details, see:

   
<a  rel="nofollow" href="http://www.nmr-relax.com/manual/d_Auvergne_protocol_script_mode_setting_up_the_spin_systems.html">http://www.nmr-relax.com/manual/d_Auvergne_protocol_script_mode_setting_up_the_spin_systems.html</a>

and the following pages.  If you do not have protons in your PDB file,
you'll need to generate them with external software (Molmol, Pymol,
etc.).  Unfortunately I haven't implemented a structure.attach_protons
user function yet, as I never found the citation for an algorithm to
correctly place protons in an X-ray structure.  And I know that the
calculated positions are not always the same for different software
programs, so it would be good to implement a number of the algorithms
so that there is a choice.

Regards,

Edward



The Francis Crick Institute Limited is a registered charity in England and 
Wales no. 1140062 and a company registered in England and Wales no. 06885462, 
with its registered office at 215 Euston Road, London NW1 2BE.

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00012" href="msg00012.html">Re: model free analysis: spin deselection problem</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00003" href="msg00003.html">model free analysis: spin deselection problem</a></strong>
<ul><li><em>From:</em> Alain Oregioni</li></ul></li>
<li><strong><a name="00008" href="msg00008.html">Re: model free analysis: spin deselection problem</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00009" href="msg00009.html">Re: model free analysis: spin deselection problem</a></strong>
<ul><li><em>From:</em> Alain Oregioni</li></ul></li>
<li><strong><a name="00010" href="msg00010.html">Re: model free analysis: spin deselection problem</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer">You are on the <a href="http://gna.org">Gna!</a> mail server.</div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Thu Nov 19 15:20:06 2015</div>  
</body>
</html>
