<!-- MHonArc v2.6.19+ -->
<!--X-Subject: Re: How many rounds are acceptable? -->
<!--X-From-R13: Xbunaarf Rvrgfpuervg &#60;qvrgfpuervgNtznvy.pbz> -->
<!--X-Date: Mon, 08 Aug 2016 13:26:20 +0200 -->
<!--X-Message-Id: CAMT2NTtgo24yfyjnmczeuD7QYO73GF0VwoDVWYCWKiKJ148VpQ@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: A38C8B1D&#45;09CB&#45;41F7&#45;A4A4&#45;E3178BD28159@gmail.com -->
<!--X-Reference: CA+CBx2P_QsZrzz+E6YCm=aCmqGVSYBpZH2KK=7A8HgMigaz58Q@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: How many rounds are acceptable? -- August 08, 2016 - 13:26</title>
<link rel="stylesheet" type="text/css" href="/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="https://gna.org/images/gna.theme/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: How many rounds are acceptable?</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00002" class="tabs">Index by Date</a> | <a href="threads.html#00002" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00001.html">Date Prev</a>] [<a href="msg00003.html">Date Next</a>] [<a href="msg00001.html">Thread Prev</a>] [<a href="msg00003.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Mon, 8 Aug 2016 13:25:50 +0200</li>
<li class="menuitem">
<em>Cc</em>: &quot;relax-users@xxxxxxx&quot; &lt;relax-users@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113; h=mime-version:in-reply-to:references:from:date:message-id:subject:to :cc; bh=Ifn7+rH+Aedidzg/GWS9pYD4OfvsaRAbdSqv44RP+AY=; b=mv/OxPGnV7nJwXeWvP3T9eFdV1m+qBt1HN88sRonRQ2PNOXWFNGEDRXNcE1HQEQytt QDUrwYpPchdlBhy0FBWTUtHloRwUm3cSzMIHfr6E0UlrpVPTwwQiEJsOgl375OzLiSAQ Am4E/+4hSqild25p+xA8v0E0WstotNvy5NuFtCSmzc6rvO25Ytw2EUmt8uWK3ihhneYj +Llrqsooxz9PTyAZhF9FxVJPQkoKxq8y6mNJIq/JL+hRMfOd/hwPEbui0F/B79nqueRa l/P2Q56OI0TqYrI81NxSxbZFR5t+1ukf5r2OiUbZRqOFXVwHxx3bQciMByjm2LgpxN8K jwsw==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00002.html">CAMT2NTtgo24yfyjnmczeuD7QYO73GF0VwoDVWYCWKiKJ148VpQ@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;<a href="msg00000.html">A38C8B1D-09CB-41F7-A4A4-E3178BD28159@gmail.com</a>&gt; &lt;CA+CBx2P_QsZrzz+E6YCm=aCmqGVSYBpZH2KK=7A8HgMigaz58Q@mail.gmail.com&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Johannes Dietschreit</strong> on August 08, 2016 - 13:26:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Hi,

thank you so much for your quick and long response. I did not change the
hard coded value, I decided to leave that one alone, but I followed the
example of the test_suite and set the convergence criterion to 1e-7. This
seems still strict, but now the calculation converges and final results are
written.

My question now regards the results in the folder &quot;final&quot;. My analysis was
performed regarding the classical model free ansatz but I allowed for all
possible diffusion models. The protein I am dealing with is rather stiff,
it contains a beta barrel and some flexible loops. However, all residues
have a S^2 value of about 0.03. I expected the residues in the barrel to
have much larger values.

Also the t_e values are somewhat spurious. Most of them are unphisically
small (~e-24 seconds), I had expected values in the range of ten to hundred
pico seconds. And there are a few t_e values with a negative sign. How is
that possible?

Is this a common error? Have I just made a mistake regarding the input? I
attached my dauvergne_protocol.py file and some input data.

Thanks for all the help!

Johannes Dietschreit

Masters Student, Keller Group, Free university Berlin



2016-08-04 17:44 GMT+02:00 Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxxxxxx&gt;:

</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi Johannes.

I will try to help you out, until Edward returns.

As a disclaimer, I can say that I never performed model-free analysis, and
Edward is the expert.
So, if he says something different, he is right. ;)

I have been performing a long range of dispersion analysis, so I know some
of the underlying parts of relax.

You have 2 options.

Either you could try to establish yourself with using multiple cores for
calculation.
I remember Edward told me, that model-free analysis calculations can run
for 2-3 weeks.
So if you could get access to a computer with 8, 20 or more cores, then
your computation time will drop.
It will probably take you 2-3 days, depending on your computer skills, to
get the mpirun setup up and running.
Or look here: <a  rel="nofollow" href="http://wiki.nmr-relax.com/Run_relax_at_Google_Cloud_">http://wiki.nmr-relax.com/Run_relax_at_Google_Cloud_</a>
Computing
<a  rel="nofollow" href="http://wiki.nmr-relax.com/OpenMPI">http://wiki.nmr-relax.com/OpenMPI</a>

Another option is to allow for a more &quot;sloppy&quot; result.

Change number of Monte-Carlo simulations from 500 to 10.
You will still get the &quot;minimum&quot; right, but your error estimation of your
result will be &quot;sloppy&quot;.
For publication, normally 500 to 2000 MC is fine.
But for &quot;searching&quot;, just use 10.

Another possibility, you can actually track down why relax take so long
time.

Have a look in:
/relax_dir/auto_analyses/dauvergne_protocol.py

This is the line:
------
    # Some class variables.
    opt_func_tol = 1e-25
    opt_max_iterations = int(1e7)
------

relax will keep searching for a minimum for either maximum 10 million
iterations, or if the difference of chi2 between an two iterations is lower
than 1e-25.

This is quite a strict rule. Really strict.

It is &quot;hard-coded&quot; in the file, and it is normally not meant to be changed.
But you could try setting: opt_func_tol = 1e-7
And then work &quot;upwards&quot;, until you finish in &quot;some reasonable time&quot;.

As a reference:
<a  rel="nofollow" href="http://docs.scipy.org/doc/scipy/reference/optimize">http://docs.scipy.org/doc/scipy/reference/optimize</a>.
linprog-simplex.html#optimize-linprog-simplex
..../python2.7/site-packages/scipy/optimize/optimize.py
Here &quot;ftol&quot; is standard: 1e-4

So, relax is extremely strict. (Maybe too strict).

How can you modify this?
Either you could change the hardcoded value.

Or you could use scripts to setup the calculations.

Inspiration for this would be:
/relax_dir/test_suite/system_tests/scripts/model_free/
dauvergne_protocol.py

And even more can be found here:
/relax_dir/test_suite/system_tests/model_free.py

(Note, that stuff like &quot;self.interpreter.&quot; and so on should be deleted,
and such&quot;.)
(This is the full execution of all kinds of systemtests, which make sure
that we know model-free is performing as it should)

Please respond by using, &quot;reply all&quot;, so other users can find this
information on the mailing list.

I will be happy to try answering any other questions.

Best
Troels Schwarz-Linnet
PhD student, SBiNLab, Copenhagen University


2016-08-03 18:17 GMT+02:00 Johannes Dietschreit &lt;dietschreit@xxxxxxxxx&gt;:

</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hello,

I am trying to analyze the NMR relaxation data of a protein with respect
to the model-free analysis. I have two sets of R1, R2 and NOE data measured
at different field strengths. I set up the analysis with the
dauvergne_protocol.py I chose all models in the spirit of the fully
automated analysis. The first few diffusion models were computed relatively
fast but the program has been on the ellipsoid model for days.
The local_tm was run first, followed by sphere(1 round) , prolate(1024
rounds), oblate (906 rounds). However, the ellipsoid model is at round
22342. Can I check somehow whether the program is converging every so
slowly or whether I should abort the calculation?

Thanks you for the help!

Sincerely,

Johannes Dietschreit


_______________________
Johannes C. B. Dietschreit
BSc Science
_______________________________________________
relax (<a  rel="nofollow" href="http://www.nmr-relax.com">http://www.nmr-relax.com</a>)

This is the relax-users mailing list
relax-users@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="https://mail.gna.org/listinfo/relax-users">https://mail.gna.org/listinfo/relax-users</a>

</pre></blockquote><pre style="margin: 0em;">


</pre></blockquote><pre style="margin: 0em;">

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00003" href="msg00003.html">Re: How many rounds are acceptable?</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00000" href="msg00000.html">How many rounds are acceptable?</a></strong>
<ul><li><em>From:</em> Johannes Dietschreit</li></ul></li>
<li><strong><a name="00001" href="msg00001.html">Re: How many rounds are acceptable?</a></strong>
<ul><li><em>From:</em> Troels Emtekær Linnet</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer">You are on the <a href="http://gna.org">Gna!</a> mail server.</div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Mon Aug 08 17:00:08 2016</div>  
</body>
</html>
