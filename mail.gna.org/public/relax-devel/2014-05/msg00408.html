<!-- MHonArc v2.6.18 -->
<!--X-Subject: [bug #22065] Systemtest Relax_disp.test_hansen_cpmg_data_missing_auto_analysis has tcp array with multiple nan -->
<!--X-From-R13: "Febryf S. Zvaarg" &#60;@A&#45;DSBZK.W@HOZWR&#45;ORRDSEENtan.bet> -->
<!--X-Date: Wed, 21 May 2014 12:40:13 +0200 -->
<!--X-Message-Id: 20140521&#45;104012.sv20529.25181@gna.org -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>[bug #22065] Systemtest Relax_disp.test_hansen_cpmg_data_missing_auto_analysis has tcp array with multiple nan -- May 21, 2014 - 12:40</title>
<link rel="stylesheet" type="text/css" href="/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="https://gna.org/images/gna.theme/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />[bug #22065] Systemtest Relax_disp.test_hansen_cpmg_data_missing_auto_analysis has tcp array with multiple nan</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00408" class="tabs">Index by Date</a> | <a href="threads.html#00408" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00407.html">Date Prev</a>] [<a href="msg00409.html">Date Next</a>] [<a href="msg00405.html">Thread Prev</a>] [<a href="msg00409.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: &quot;Troels E. Linnet&quot; &lt;tlinnet@xxxxxxxxxxxxx&gt;, relax-devel@xxxxxxx</li>
<li class="menuitem">
<em>Date</em>: Wed, 21 May 2014 12:40:13 +0200</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00408.html">20140521-104012.sv20529.25181@gna.org</a>&gt;</li>
<li class="menuitem">
<em>References</em>: </li>
<li class="menuitem">
<em>User-agent</em>: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_9_2) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/34.0.1847.137 Safari/537.36</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Troels E. Linnet</strong> on May 21, 2014 - 12:40:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">URL:
  &lt;<a  rel="nofollow" href="http://gna.org/bugs/?22065">http://gna.org/bugs/?22065</a>&gt;

                 Summary: Systemtest
Relax_disp.test_hansen_cpmg_data_missing_auto_analysis has tcp array with
multiple nan
                 Project: relax
            Submitted by: tlinnet
            Submitted on: Wed 21 May 2014 10:40:12 AM UTC
                Category: relax's source code
Specific analysis category: Relaxation dispersion
                Priority: 5 - Normal
                Severity: 3 - Normal
                  Status: None
             Assigned to: None
         Originator Name: 
        Originator Email: 
             Open/Closed: Open
                 Release: Branches
         Discussion Lock: Any
        Operating System: All systems

    _______________________________________________________

Details:

Printing out in lib/dispersion/ns_cpmg_2site_expanded.py of 
    print max_t115, tcp

shows

30 [ 0.00375            0.001875           0.00125            0.0009375
  0.00075            0.000625           0.000535714285714  0.00046875
  0.000416666666667  0.000375           0.000340909090909  0.0003125
  0.000288461538462  0.000267857142857  0.00025          ]
0 [ nan  nan  nan  nan  nan  nan  nan  nan  nan  nan  nan  nan  nan  nan 
nan]

This is un-expected.

Traceback (most recent call last):
  File
&quot;/Users/tlinnet/software/disp_speed/test_suite/system_tests/relax_disp.py&quot;,
line 1983, in test_hansen_cpmg_data_missing_auto_analysis
    self.interpreter.run(script_file=status.install_path +
sep+'test_suite'+sep+'system_tests'+sep+'scripts'+sep+'relax_disp'+sep+'hansen_data_missing.py')
  File &quot;/Users/tlinnet/software/disp_speed/prompt/interpreter.py&quot;, line 275,
in run
    return run_script(intro=self.__intro_string, local=locals(),
script_file=script_file, show_script=self.__show_script,
raise_relax_error=self.__raise_relax_error)
  File &quot;/Users/tlinnet/software/disp_speed/prompt/interpreter.py&quot;, line 569,
in run_script
    return console.interact(intro, local, script_file,
show_script=show_script, raise_relax_error=raise_relax_error)
  File &quot;/Users/tlinnet/software/disp_speed/prompt/interpreter.py&quot;, line 468,
in interact_script
    exec_script(script_file, local)
  File &quot;/Users/tlinnet/software/disp_speed/prompt/interpreter.py&quot;, line 347,
in exec_script
    runpy.run_module(module, globals)
  File
&quot;/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/runpy.py&quot;,
line 180, in run_module
    fname, loader, pkg_name)
  File
&quot;/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/runpy.py&quot;,
line 72, in _run_code
    exec code in run_globals
  File
&quot;/Users/tlinnet/software/disp_speed/test_suite/system_tests/scripts/relax_disp/hansen_data_missing.py&quot;,
line 58, in &lt;module&gt;
    Relax_disp(pipe_name=pipe_name, pipe_bundle=pipe_bundle,
results_dir=ds.tmpdir, models=MODELS, grid_inc=GRID_INC, mc_sim_num=MC_NUM,
numeric_only=ds.numeric_only)
  File &quot;/Users/tlinnet/software/disp_speed/auto_analyses/relax_disp.py&quot;, line
124, in __init__
    self.run()
  File &quot;/Users/tlinnet/software/disp_speed/auto_analyses/relax_disp.py&quot;, line
491, in run
    self.optimise(model=model)
  File &quot;/Users/tlinnet/software/disp_speed/auto_analyses/relax_disp.py&quot;, line
387, in optimise
    self.interpreter.minimise('simplex', func_tol=self.opt_func_tol,
max_iter=self.opt_max_iterations, constraints=True)
  File &quot;/Users/tlinnet/software/disp_speed/prompt/uf_objects.py&quot;, line 223, in
__call__
    self._backend(*new_args, **uf_kargs)
  File &quot;/Users/tlinnet/software/disp_speed/pipe_control/minimise.py&quot;, line
238, in minimise
    processor.run_queue()
  File &quot;/Users/tlinnet/software/disp_speed/multi/uni_processor.py&quot;, line 186,
in run_queue
    command.run(self, completed)
  File
&quot;/Users/tlinnet/software/disp_speed/specific_analyses/relax_disp/optimisation.py&quot;,
line 755, in run
    results = generic_minimise(func=model.func, args=(), x0=self.param_vector,
min_algor=self.min_algor, min_options=self.min_options,
func_tol=self.func_tol, grad_tol=self.grad_tol, maxiter=self.max_iterations,
A=self.A, b=self.b, full_output=True, print_flag=self.verbosity)
  File
&quot;/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/site-packages/minfx/generic.py&quot;,
line 399, in generic_minimise
    results = log_barrier_function(func=func, dfunc=dfunc, d2func=d2func,
args=args, x0=x0, min_options=min_options, A=A, b=b, func_tol=func_tol,
grad_tol=grad_tol, maxiter=maxiter, full_output=full_output,
print_flag=print_flag)
  File
&quot;/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/site-packages/minfx/log_barrier_function.py&quot;,
line 93, in log_barrier_function
    min = Log_barrier_function(func, dfunc, d2func, args, x0, min_options, A,
b, epsilon0, scale_epsilon, func_tol, grad_tol, maxiter, inner_maxiter,
full_output, print_flag)
  File
&quot;/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/site-packages/minfx/log_barrier_function.py&quot;,
line 173, in __init__
    self.f_log = self.func_log(*(self.xk,)+self.args)
  File
&quot;/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/site-packages/minfx/log_barrier_function.py&quot;,
line 190, in func_log
    self.fk = f_log = self.func(*(args[0],)+args[1:])
  File &quot;/Users/tlinnet/software/disp_speed/target_functions/relax_disp.py&quot;,
line 1483, in func_ns_cpmg_2site_expanded
    self.back_calc[0][si][mi][0] =
r2eff_ns_cpmg_2site_expanded(r20=R20[r20_index], pA=pA, dw=dw_frq, k_AB=k_AB,
k_BA=k_BA, relax_time=self.relax_times[0][mi],
inv_relax_time=self.inv_relax_times[0][mi], tcp=self.tau_cpmg[0][mi],
num_points=self.num_disp_points[0][si][mi][0], num_cpmg=self.power[0][mi])
  File
&quot;/Users/tlinnet/software/disp_speed/lib/dispersion/ns_cpmg_2site_expanded.py&quot;,
line 358, in r2eff_ns_cpmg_2site_expanded
    low_pos_rep = power(1.e-300, 1./max_t115)
FloatingPointError: divide by zero encountered in divide




    _______________________________________________________

Reply to this item at:

  &lt;<a  rel="nofollow" href="http://gna.org/bugs/?22065">http://gna.org/bugs/?22065</a>&gt;

_______________________________________________
  Message sent via/by Gna!
  <a  rel="nofollow" href="http://gna.org/">http://gna.org/</a>



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00409" href="msg00409.html">[bug #22065] Systemtest Relax_disp.test_hansen_cpmg_data_missing_auto_analysis has tcp array with multiple nan</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer">You are on the <a href="http://gna.org">Gna!</a> mail server.</div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Thu May 22 17:20:15 2014</div>  
</body>
</html>
