<!-- MHonArc v2.6.16 -->
<!--X-Subject: r21049 &#45; in /trunk/test_suite:	shared_data/structures/bug_21187_molecule.pdb	system_tests/structure.py -->
<!--X-From-R13: rqjneqNaze&#45;erynk.pbz -->
<!--X-Date: Thu, 10 Oct 2013 13:58:51 +0200 -->
<!--X-Message-Id: E1VUEtH&#45;0000fA&#45;1v@subversion.gna.org -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>r21049 - in /trunk/test_suite:	shared_data/structures/bug_21187_molecule.pdb	system_tests/structure.py -- October 10, 2013 - 13:58</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />r21049 - in /trunk/test_suite:	shared_data/structures/bug_21187_molecule.pdb	system_tests/structure.py</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00043" class="tabs">Index by Date</a> | <a href="threads.html#00043" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00042.html">Date Prev</a>] [<a href="msg00044.html">Date Next</a>] [<a href="msg00042.html">Thread Prev</a>] [<a href="msg00044.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: relax-commits@xxxxxxx</li>
<li class="menuitem">
<em>Date</em>: Thu, 10 Oct 2013 11:58:51 -0000</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00043.html">E1VUEtH-0000fA-1v@subversion.gna.org</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>edward</strong> on October 10, 2013 - 13:58:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Author: bugman
Date: Thu Oct 10 13:58:50 2013
New Revision: 21049

URL: <a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax?rev=21049&amp;view=rev">http://svn.gna.org/viewcvs/relax?rev=21049&amp;view=rev</a>
Log:
Created the Structure.test_bug_21187_corrupted_pdb system test to catch bug 
#21187.

The bug at <a  rel="nofollow" href="https://web.archive.org/web/https://gna.org/bugs/?21187">https://gna.org/bugs/?21187</a> was reported by Martin Ballaschk 
(<a  rel="nofollow" href="https://gna.org/users/mab">https://gna.org/users/mab</a>).


Added:
    trunk/test_suite/shared_data/structures/bug_21187_molecule.pdb
Modified:
    trunk/test_suite/system_tests/structure.py

Added: trunk/test_suite/shared_data/structures/bug_21187_molecule.pdb
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/trunk/test_suite/shared_data/structures/bug_21187_molecule.pdb?rev=21049&amp;view=auto">http://svn.gna.org/viewcvs/relax/trunk/test_suite/shared_data/structures/bug_21187_molecule.pdb?rev=21049&amp;view=auto</a>
==============================================================================
--- trunk/test_suite/shared_data/structures/bug_21187_molecule.pdb (added)
+++ trunk/test_suite/shared_data/structures/bug_21187_molecule.pdb Thu Oct 10 
13:58:50 2013
@@ -1,0 +1,69 @@
+ATOM   2775  N   ASP B  59      20.590  15.179  38.962  1.00 26.64           
N
+ATOM   2776  CA  ASP B  59      21.867  14.942  39.643  1.00 25.88           
C
+ATOM   2777  C   ASP B  59      22.583  13.669  39.172  1.00 24.80           
C
+ATOM   2778  O   ASP B  59      23.565  13.235  39.784  1.00 25.02           
O
+ATOM   2779  CB  ASP B  59      21.687  14.934  41.166  1.00 25.70           
C
+ATOM   2780  CG  ASP B  59      20.852  13.764  41.670  1.00 26.73           
C
+ATOM   2781  OD1 ASP B  59      20.375  12.916  40.871  1.00 26.48           
O
+ATOM   2782  OD2 ASP B  59      20.616  13.635  42.887  1.00 26.65           
O
+ATOM      0  H   ASP B  59      19.793  14.814  39.443  1.00 26.64           
H   new
+ATOM      0  HA  ASP B  59      22.519  15.783  39.366  1.00 25.88           
H   new
+ATOM      0  HB2 ASP B  59      22.677  14.901  41.645  1.00 25.70           
H   new
+ATOM      0  HB3 ASP B  59      21.210  15.876  41.476  1.00 25.70           
H   new
+ATOM   2783  N   TRP B  60      22.070  13.080  38.099  1.00 23.50           
N
+ATOM   2784  CA  TRP B  60      22.670  11.937  37.398  1.00 22.62           
C
+ATOM   2785  C   TRP B  60      22.385  10.571  38.023  1.00 22.58           
C
+ATOM   2786  O   TRP B  60      22.705   9.551  37.420  1.00 22.20           
O
+ATOM   2787  CB  TRP B  60      24.182  12.088  37.221  1.00 22.53           
C
+ATOM   2788  CG  TRP B  60      24.639  13.359  36.542  1.00 21.54           
C
+ATOM   2789  CD1 TRP B  60      25.229  14.419  37.133  1.00 20.30           
C
+ATOM   2790  CD2 TRP B  60      24.551  13.675  35.143  1.00 19.70           
C
+ATOM   2791  NE1 TRP B  60      25.529  15.376  36.191  1.00 21.03           
N
+ATOM   2792  CE2 TRP B  60      25.118  14.946  34.963  1.00 20.00           
C
+ATOM   2793  CE3 TRP B  60      24.060  12.999  34.021  1.00 21.09           
C
+ATOM   2794  CZ2 TRP B  60      25.212  15.563  33.711  1.00 19.58           
C
+ATOM   2795  CZ3 TRP B  60      24.145  13.608  32.776  1.00 21.12           
C
+ATOM   2796  CH2 TRP B  60      24.715  14.880  32.633  1.00 20.93           
C
+ATOM      0  H   TRP B  60      21.213  13.384  37.682  1.00 23.50           
H   new
+ATOM      0  HA  TRP B  60      22.170  11.958  36.419  1.00 22.62           
H   new
+ATOM      0  HB2 TRP B  60      24.656  12.033  38.212  1.00 22.53           
H   new
+ATOM      0  HB3 TRP B  60      24.552  11.230  36.640  1.00 22.53           
H   new
+ATOM      0  HD1 TRP B  60      25.439  14.505  38.209  1.00 20.30           
H   new
+ATOM      0  HE1 TRP B  60      25.978  16.250  36.377  1.00 21.03           
H   new
+ATOM      0  HE3 TRP B  60      23.613  11.999  34.124  1.00 21.09           
H   new
+ATOM      0  HZ2 TRP B  60      25.667  16.558  33.597  1.00 19.58           
H   new
+ATOM      0  HZ3 TRP B  60      23.759  13.084  31.889  1.00 21.12           
H   new
+ATOM      0  HH2 TRP B  60      24.764  15.339  31.635  1.00 20.93           
H   new
+ATOM   2797  N   SER B  61      21.783  10.536  39.209  1.00 22.42           
N
+ATOM   2798  CA  SER B  61      21.456   9.273  39.849  1.00 22.36           
C
+ATOM   2799  C   SER B  61      20.303   8.581  39.104  1.00 22.17           
C
+ATOM   2800  O   SER B  61      19.410   9.245  38.578  1.00 22.01           
O
+ATOM   2801  CB  SER B  61      21.097   9.482  41.319  1.00 22.72           
C
+ATOM   2802  OG  SER B  61      19.846  10.114  41.467  1.00 21.64           
O
+ATOM      0  H   SER B  61      21.520  11.348  39.730  1.00 22.42           
H   new
+ATOM      0  HA  SER B  61      22.343   8.624  39.805  1.00 22.36           
H   new
+ATOM      0  HB2 SER B  61      21.080   8.510  41.834  1.00 22.72           
H   new
+ATOM      0  HB3 SER B  61      21.875  10.090  41.804  1.00 22.72           
H   new
+ATOM      0  HG  SER B  61      19.942  11.092  41.279  1.00 21.64           
H   new
+ATOM   3209  N   LEU C   9      34.356  13.147  22.748  1.00 26.70           
N
+ATOM   3210  CA  LEU C   9      35.075  13.681  23.899  1.00 26.05           
C
+ATOM   3211  C   LEU C   9      36.574  13.738  23.604  1.00 25.71           
C
+ATOM   3212  O   LEU C   9      37.076  13.030  22.725  1.00 24.25           
O
+ATOM   3213  CB  LEU C   9      34.818  12.851  25.159  1.00 26.19           
C
+ATOM   3214  CG  LEU C   9      33.375  12.758  25.689  1.00 26.33           
C
+ATOM   3215  CD1 LEU C   9      33.317  11.975  26.987  1.00 25.47           
C
+ATOM   3216  CD2 LEU C   9      32.744  14.126  25.889  1.00 26.24           
C
+ATOM   3217  OXT LEU C   9      37.313  14.501  24.240  1.00 25.40           
O
+ATOM      0  H   LEU C   9      33.807  12.334  22.942  1.00 26.70           
H   new
+ATOM      0  HA  LEU C   9      34.702  14.699  24.085  1.00 26.05           
H   new
+ATOM      0  HB2 LEU C   9      35.171  11.827  24.965  1.00 26.19           
H   new
+ATOM      0  HB3 LEU C   9      35.446  13.260  25.964  1.00 26.19           
H   new
+ATOM      0  HG  LEU C   9      32.796  12.226  24.919  1.00 26.33           
H   new
+ATOM      0 HD11 LEU C   9      32.276  11.926  27.340  1.00 25.47           
H   new
+ATOM      0 HD12 LEU C   9      33.695  10.956  26.818  1.00 25.47           
H   new
+ATOM      0 HD13 LEU C   9      33.938  12.475  27.745  1.00 25.47           
H   new
+ATOM      0 HD21 LEU C   9      31.718  14.005  26.267  1.00 26.24           
H   new
+ATOM      0 HD22 LEU C   9      33.337  14.701  26.616  1.00 26.24           
H   new
+ATOM      0 HD23 LEU C   9      32.720  14.663  24.929  1.00 26.24           
H   new
+TER    3218      LEU C   9
+END

Modified: trunk/test_suite/system_tests/structure.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/trunk/test_suite/system_tests/structure.py?rev=21049&amp;r1=21048&amp;r2=21049&amp;view=diff">http://svn.gna.org/viewcvs/relax/trunk/test_suite/system_tests/structure.py?rev=21049&amp;r1=21048&amp;r2=21049&amp;view=diff</a>
==============================================================================
--- trunk/test_suite/system_tests/structure.py (original)
+++ trunk/test_suite/system_tests/structure.py Thu Oct 10 13:58:50 2013
@@ -75,6 +75,24 @@
         self.interpreter.structure.read_pdb('1OGT_trunc.pdb', dir=path, 
alt_loc='A')
         self.interpreter.structure.load_spins(spin_id='@N', ave_pos=True)
         self.interpreter.sequence.attach_protons()
+
+
+    def test_bug_21187_corrupted_pdb(self):
+        &quot;&quot;&quot;Catch U{bug #21187&lt;<a  rel="nofollow" href="https://web.archive.org/web/https://gna.org/bugs/?21187">https://gna.org/bugs/?21187</a>&gt;}, the corrupted 
PDB with all proton atoms numbers set to zero.&quot;&quot;&quot;
+
+        # Path of the structure file.
+        path = status.install_path + 
sep+'test_suite'+sep+'shared_data'+sep+'structures'
+
+        # Load the file.
+        self.interpreter.structure.read_pdb('bug_21187_molecule.pdb', 
dir=path)
+
+        # Load the @N, @H, and @NE1 spins (needed to create the :60@0 spin 
to trigger the bug later).
+        self.interpreter.structure.load_spins(spin_id='@N', ave_pos=True)
+        self.interpreter.structure.load_spins(spin_id='@NE1', ave_pos=True)
+        self.interpreter.structure.load_spins(spin_id='@H', ave_pos=True)
+
+        # Load the :60@HE1 spin - this clashes with the :60@H spin as both 
have the spin ID of ':60@0'.
+        self.interpreter.structure.load_spins(spin_id='@HE1', ave_pos=True)
 
 
     def test_delete_empty(self):



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Thu Oct 10 14:00:02 2013</div>  
</body>
</html>
