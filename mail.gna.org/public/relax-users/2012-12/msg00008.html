<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: How many rounds does it take? -->
<!--X-From-R13: "Sqjneq q'Ohiretar" <rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Fri, 14 Dec 2012 09:50:12 +0100 -->
<!--X-Message-Id: CAED9pY878+OnU2S1tYtiZNgAee=Tui=2Yk_9WVVPFBsfO6wWag@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 2438CCD9&#45;6027&#45;4C73&#45;BCEC&#45;12283FC1E9C5@fmp&#45;berlin.de -->
<!--X-Reference: CAED9pY9k7RnDwRqssnAj77mes3=1Scz&#45;zNXZ0Ak_J7PetWGSHg@mail.gmail.com -->
<!--X-Reference: F2181F37&#45;15F5&#45;4D58&#45;A333&#45;CACD8BDF5046@fmp&#45;berlin.de -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: How many rounds does it take? -- December 14, 2012 - 09:50</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: How many rounds does it take?</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00008" class="tabs">Index by Date</a> | <a href="threads.html#00008" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00007.html">Date Prev</a>] [<a href="msg00009.html">Date Next</a>] [<a href="msg00006.html">Thread Prev</a>] [<a href="msg00002.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Martin Ballaschk &lt;ballaschk@xxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Fri, 14 Dec 2012 09:49:37 +0100</li>
<li class="menuitem">
<em>Cc</em>: &quot;relax-users@xxxxxxx&quot; &lt;relax-users@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;	h=mime-version:sender:in-reply-to:references:date	:x-google-sender-auth:message-id:subject:from:to:cc:content-type	:content-transfer-encoding;	bh=jJlcTZvHK1T/OKDO7Vs7QUjF+3TLoeHVq3ZjklvKqsw=;	b=0Lmj0K4S+IFARxmnKYc8Oc+bbOcU2+rvpxU2gWQGuO8qJJEt0EAnn3giJ+rGUAwDU5	iDkIzmuxwNz11ohpElPcQLcbB21HlYClo05YJhJSJK7AWteYK9sRF7Slfr2kCc5oSxE1	1tWNdarLpRmL4Y9lLluyxKLFs8spd9t3nsVtr5Z7cuA8gxp7AWiF39acAOg1G3oslHrO	/FjGv4qqcTEjhzmT/3SiQrF+h2kqCelOX7t+KWUBjV+tJmMCyn6hakVYdP3AWlB6THf8	bfMLQYI3n7dqTYZRTiQqcih+yOsB7dxxYwfNa/Nvk3B0uyZyqkDdH7VQ+Nsy6Md3bFph	DxvQ==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00008.html">CAED9pY878+OnU2S1tYtiZNgAee=Tui=2Yk_9WVVPFBsfO6wWag@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;2438CCD9-6027-4C73-BCEC-12283FC1E9C5@xxxxxxxxxxxxx&gt;	&lt;CAED9pY9k7RnDwRqssnAj77mes3=1Scz-zNXZ0Ak_J7PetWGSHg@xxxxxxxxxxxxxx&gt;	&lt;F2181F37-15F5-4D58-A333-CACD8BDF5046@xxxxxxxxxxxxx&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on December 14, 2012 - 09:50:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<blockquote class="blockquote"><blockquote class="blockquote"><pre style="margin: 0em;">Did you run relax with Gary Thompson's multi-processor
framework to take advantage of all your CPU cores?
</pre></blockquote><pre style="margin: 0em;">

Yes, I used mpi4py. And in fact it's a hexacore Intel Core i7, not an 
octocore. I'm not sure if I should run mpi4py with the six physical number 
of cores or with the double of that numbers (12 hyperthreaded cores).
</pre></blockquote><pre style="margin: 0em;">

You would have to research that one for yourself.  You could also test
with 6 and 12 slaves and see what happens.


</pre><blockquote class="blockquote"><blockquote class="blockquote"><blockquote class="blockquote"><pre style="margin: 0em;">Now I tried a big proteinâ€“one with &gt;240 assigned residues. It took 2 days 
and 23 rounds to find a optimized spherical diffusion model, and since 
yesterday it churned out 35 prolate diffusion models!
</pre></blockquote><pre style="margin: 0em;">

This is quite possible.  I would highly recommend you create plots of
the progression of optimisation such as in: [d'A&amp;G:2008b]

You can obtain the data for the plots by manually opening the results
files in the 'opt' directories and then manually creating the graphs.
</pre></blockquote><pre style="margin: 0em;">

I stopped the process after relax made &gt;100 prolate models and tried to 
extract the mentioned parameters (tm, total number of parameters k, global 
AIC, chi2) from the results files in round_x/opt/ to see where it is 
heading.
</pre></blockquote><pre style="margin: 0em;">

That is far too many, so something is wrong.


</pre><blockquote class="blockquote"><pre style="margin: 0em;">Turns out this appears to be more difficult than expected. I can see the 
chi2 values and all the model-free parameters like S^2 and R_ex, but how 
can I get the AIC or the total number of parameters from?

Is there a relax function which lists all the parameters of the current 
data pipe?
</pre></blockquote><pre style="margin: 0em;">

This is true, the information is not stored in the relax data pipes as
it can be quite dynamic and reconstructed from all of the other data.
You could do this programatically.  But you would need to dive into
the relax API (<a  rel="nofollow" href="/api/">http://www.nmr-relax.com/api/</a>).  You could loop over
all the spins using the spin_loop() function (see the API
documentation) and calculate the number of parameters for each and add
that to the number of diffusion parameters.  Or you could, for
example, in the relax prompt or script modes first import the function
for accessing the analysis specific API:

from specific_fns.setup import get_specific_fn

To understand what is happening, please refer to the API documentation
(<a  rel="nofollow" href="/api/">http://www.nmr-relax.com/api/</a>).  You could then fetch the method for
obtaining model statistics with:

model_stats = get_specific_fn('model_stats', cdp.pipe_type)

Then to obtain the statistics required to calculate the AIC value,
just call that method with:

k, n, chi2 = model_stats(0, global_stats=True)

If you look at the API documentation, you will see that this specific
call is only valid for the global model of the combined diffusion
tensor and model-free models of all spins, i.e. the results in the
'opt' directories.  It will not work for the other results files.
Then you just need the AIC equation:

AIC = chi2 + 2k.

Regards,

Edward


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00000" href="msg00000.html">How many rounds does it take?</a></strong>
<ul><li><em>From:</em> Martin Ballaschk</li></ul></li>
<li><strong><a name="00001" href="msg00001.html">Re: How many rounds does it take?</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00006" href="msg00006.html">Re: How many rounds does it take?</a></strong>
<ul><li><em>From:</em> Martin Ballaschk</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Fri Dec 14 12:20:07 2012</div>  
</body>
</html>
