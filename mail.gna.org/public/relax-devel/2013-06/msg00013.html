<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: [bug #20873] Custom Peak intensity reading cannot read a list of	spectrum_id -->
<!--X-From-R13: "Sqjneq q'Ohiretar" <rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Thu, 06 Jun 2013 17:18:39 +0200 -->
<!--X-Message-Id: CAED9pY&#45;XsrVszf+x+Aym7mPUGsKN0S1FEh&#45;UcL9Pg=7UKU+o6Q@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 20130606&#45;145858.sv20529.52401@gna.org -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [bug #20873] Custom Peak intensity reading cannot read a list of	spectrum_id -- June 06, 2013 - 17:18</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: [bug #20873] Custom Peak intensity reading cannot read a list of	spectrum_id</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00013" class="tabs">Index by Date</a> | <a href="threads.html#00013" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00012.html">Date Prev</a>] [<a href="msg00014.html">Date Next</a>] [<a href="msg00012.html">Thread Prev</a>] [<a href="msg00014.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>Date</em>: Thu, 6 Jun 2013 17:18:08 +0200</li>
<li class="menuitem">
<em>Cc</em>: &quot;relax-devel@xxxxxxx&quot; &lt;relax-devel@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;	h=mime-version:sender:in-reply-to:references:date	:x-google-sender-auth:message-id:subject:from:cc:content-type;	bh=pZA3lLm8ekMT0vjV8KfXhg82P0HJCxx0s1NB7QYUQHM=;	b=hkfj51fu7fXJBA0aRa+9sa7Z6gd3ORJl2edDESPpTxUPRd8W85aJ2pk4xK+TU69IAr	5p3R0EdKdxO0qP1RlzHH9KnBHR8MuTSW2DGrBSl6zhjEo/bHKQnTk/8SNQ31ki8i+TyT	0jggFfHHHhT2gmFedU5s01ldVdJMvP10J05xg5ohZdxMbmVCVEoOtklHDKRBoLkVDmTX	K8CNAWfDlGtXYmaHS8/su2IWV9NdoBmTZZ+DbOTbi7fzsePw8hYsk93Gq0qPLbilvgO3	w6tSrLgGKGyFmMyGKAS3UnDGkgRho34vTNA9PsV7sKzg9YnVGZhROXgRtiL6jX1QoUg/	uskA==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00013.html">CAED9pY-XsrVszf+x+Aym7mPUGsKN0S1FEh-UcL9Pg=7UKU+o6Q@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;20130606-145858.sv20529.52401@xxxxxxx&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on June 06, 2013 - 17:18:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">I've now added the test.seq file to the relax test suite data store
(see <a  rel="nofollow" href="http://article.gmane.org/gmane.science.nmr.relax.scm/17651">http://article.gmane.org/gmane.science.nmr.relax.scm/17651</a>).
This is within the relax trunk in the directory
test_suite/shared_data/peak_lists, as that seems the most appropriate.
 Again take note of how the commit message is constructed so that you
can replicate it once you have commit access to the relax repository.
If you like, you could try creating a new test in the file
test_suite/system_tests/peak_lists.py on your system, using the
commands you have given in the bug report
(<a  rel="nofollow" href="http://gna.org/bugs/?20873">http://gna.org/bugs/?20873</a>), and see if you can trigger the failure.
It is probably not complicated enough to require an external script,
so you could do it all within one test method.  This could then be
converted to a patch and attached to the bug report.  After that, the
debugging can begin.

Cheers,

Edward



On 6 June 2013 16:58, Troels E. Linnet &lt;NO-REPLY.INVALID-ADDRESS@xxxxxxx&gt; 
wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">URL:
  &lt;<a  rel="nofollow" href="http://gna.org/bugs/?20873">http://gna.org/bugs/?20873</a>&gt;

                 Summary: Custom Peak intensity reading cannot read a list 
of
spectrum_id
                 Project: relax
            Submitted by: tlinnet
            Submitted on: Thu 06 Jun 2013 02:58:58 PM GMT
                Category: relax's source code
                Severity: 3 - Normal
                Priority: 5 - Normal
                  Status: None
                 Privacy: Public
             Assigned to: None
         Originator Name:
        Originator Email:
             Open/Closed: Open
         Discussion Lock: Any
                 Release: Repository: trunk
        Operating System: GNU/Linux

    _______________________________________________________

Details:

See: <a  rel="nofollow" href="http://article.gmane.org/gmane.science.nmr.relax.user/1452">http://article.gmane.org/gmane.science.nmr.relax.user/1452</a>
----------
Using a Generic intensity file.
The input of the spectrum id is converted to a string, and not a list or
tuble.

spectrum_id='(2,6)'

is translated to a string.
This should be corrected, to do similar as the intensity columns:
int_col=(6, 7)


----------------------------------
To reproduce error
----------------------------------
Start new analysis
Relaxation dispersion analysis
Relaxation dispersion experiment type selection
CPMG, fixed time
Data pipe set up
The starting data pipe for the analysis = origin - relax_disp
The data pipe bundle = relax_disp

Spin editor
Click: Spin editor
Click: Load spins

Click: From a file containing sequence data
The file name = test.seq
The spin ID string = Leave empty
Free format
Molecule name column (mol_name_col) = 1
Residue number column (res_num_col) = 2
Residue name column (res_name_col) = 3
Spin number column (spin_num_col) = 4
Spin name column (spin_name_col) = 5

Add spectra
Click &quot;Add&quot;

The file name = test.seq
The Spectrum ID string: 2,0
The Intensity column: 6,7
rest is default

Error:
No corresponding data could be found within the file.

ERROR:
relax&gt; spectrum.read_intensities(file='/sbinlab2/tlinnet/Desktop/test.seq',
dir=None, spectrum_id='2,0', heteronuc='N', proton='HN', 
int_method='height',
int_col=(6, 7), spin_id_col=None, mol_name_col=1, res_num_col=2,
res_name_col=3, spin_num_col=4, spin_name_col=5, sep=None, spin_id=None,
ncproc=None)
Opening the file '/sbinlab2/tlinnet/Desktop/test.seq' for reading.
Generic formatted data file.
.....
RelaxWarning: The sequence data in the line ['protein', '75', 'L', '75', 
'N',
'3.578841e+06', '6.352595e+06'] is invalid, the data is missing.
RelaxError: No corresponding data could be found within the file.


In prompt:
pipe.create(pipe_name='origin rx', pipe_type='relax_disp', bundle='rx')
relax_disp.exp_type(exp_type='cpmg fixed')

sequence.read(file='/sbinlab2/tlinnet/Desktop/test.seq',
dir=None, spin_id_col=None, mol_name_col=1, res_num_col=2,
res_name_col=3, spin_num_col=4, spin_name_col=5, sep=None,
spin_id=None)

spectrum.read_intensities(file='/sbinlab2/tlinnet/Desktop/test.seq',
dir=None, spectrum_id=(2,0), heteronuc='N', proton='HN',
int_method='height', int_col=(6, 7), spin_id_col=None, mol_name_col=1,
res_num_col=2, res_name_col=3, spin_num_col=4, spin_name_col=5,
sep=None, spin_id=None, ncproc=None)

  File &quot;&lt;input&gt;&quot;, line 3, in &lt;module&gt;
  File &quot;/sbinlab2/software/NMR-relax/relax_disp/prompt/uf_objects.py&quot;,
line 200, in __call__
    lib.arg_check.is_str(value, desc_short, can_be_none=can_be_none)
  File &quot;/sbinlab2/software/NMR-relax/relax_disp/lib/arg_check.py&quot;,
line 862, in is_str
    raise RelaxStrError(name, arg)
RelaxStrError:  [31mRelaxError: The spectrum ID string argument '(2,0)' must
be a string. [0m





    _______________________________________________________

File Attachments:


-------------------------------------------------------
Date: Thu 06 Jun 2013 02:58:58 PM GMT  Name: test.seq  Size: 432B   By:
tlinnet

&lt;<a  rel="nofollow" href="http://gna.org/bugs/download.php?file_id=18054">http://gna.org/bugs/download.php?file_id=18054</a>&gt;

    _______________________________________________________

Reply to this item at:

  &lt;<a  rel="nofollow" href="http://gna.org/bugs/?20873">http://gna.org/bugs/?20873</a>&gt;

_______________________________________________
  Message sent via/by Gna!
  <a  rel="nofollow" href="http://gna.org/">http://gna.org/</a>


_______________________________________________
relax (<a  rel="nofollow" href="/">http://www.nmr-relax.com</a>)

This is the relax-devel mailing list
relax-devel@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="/mail.gna.org/listinfo/relax-devel">https://mail.gna.org/listinfo/relax-devel</a>
</pre></blockquote><pre style="margin: 0em;">


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00012" href="msg00012.html">[bug #20873] Custom Peak intensity reading cannot read a list of	spectrum_id</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Thu Jun 06 18:00:16 2013</div>  
</body>
</html>
