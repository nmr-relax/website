<!-- MHonArc v2.6.19+ -->
<!--X-Subject: r28065 &#45; in /trunk/test_suite: shared_data/model_free/bug_23933_relax_data_read_ids/ system_tests/ -->
<!--X-From-R13: rqjneqNaze&#45;erynk.pbz -->
<!--X-Date: Tue, 20 Oct 2015 09:07:40 +0200 -->
<!--X-Message-Id: E1ZoR1I&#45;0002B6&#45;Bk@subversion.gna.org -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>r28065 - in /trunk/test_suite: shared_data/model_free/bug_23933_relax_data_read_ids/ system_tests/ -- October 20, 2015 - 09:07</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />r28065 - in /trunk/test_suite: shared_data/model_free/bug_23933_relax_data_read_ids/ system_tests/</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00155" class="tabs">Index by Date</a> | <a href="threads.html#00155" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00154.html">Date Prev</a>] [<a href="msg00156.html">Date Next</a>] [<a href="msg00154.html">Thread Prev</a>] [<a href="msg00156.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: relax-commits@xxxxxxx</li>
<li class="menuitem">
<em>Date</em>: Tue, 20 Oct 2015 07:07:40 -0000</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00155.html">E1ZoR1I-0002B6-Bk@subversion.gna.org</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>edward</strong> on October 20, 2015 - 09:07:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Author: bugman
Date: Tue Oct 20 09:07:39 2015
New Revision: 28065

URL: <a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax?rev=28065&amp;view=rev">http://svn.gna.org/viewcvs/relax?rev=28065&amp;view=rev</a>
Log:
Created the Mf.test_bug_23933_relax_data_read_ids system test.

This is designed to catch bug #23933 (<a  rel="nofollow" href="https://gna.org/bugs/?23933">https://gna.org/bugs/?23933</a>), the 
&quot;NameError: global name
'ids' is not defined&quot; problem when loading relaxation data.

A truncated version of the PDB file and relaxation data, the full versions of 
which are attached to
the bug report, consisting solely of residues 329, 330, and 331 have been 
added to the test suite
shared data directories, and the system test written to catch the NameError.


Added:
    trunk/test_suite/shared_data/model_free/bug_23933_relax_data_read_ids/
    
trunk/test_suite/shared_data/model_free/bug_23933_relax_data_read_ids/LARA_N_term_no_helixFH_reg.pdb
    
trunk/test_suite/shared_data/model_free/bug_23933_relax_data_read_ids/r1_600.txt
   (with props)
Modified:
    trunk/test_suite/system_tests/model_free.py

Added: 
trunk/test_suite/shared_data/model_free/bug_23933_relax_data_read_ids/LARA_N_term_no_helixFH_reg.pdb
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/trunk/test_suite/shared_data/model_free/bug_23933_relax_data_read_ids/LARA_N_term_no_helixFH_reg.pdb?rev=28065&amp;view=auto">http://svn.gna.org/viewcvs/relax/trunk/test_suite/shared_data/model_free/bug_23933_relax_data_read_ids/LARA_N_term_no_helixFH_reg.pdb?rev=28065&amp;view=auto</a>
==============================================================================
--- 
trunk/test_suite/shared_data/model_free/bug_23933_relax_data_read_ids/LARA_N_term_no_helixFH_reg.pdb
        (added)
+++ 
trunk/test_suite/shared_data/model_free/bug_23933_relax_data_read_ids/LARA_N_term_no_helixFH_reg.pdb
        Tue Oct 20 09:07:39 2015
@@ -0,0 +1,46 @@
+ATOM      1  N   GLN X 329      19.164  76.707   7.444  1.00 93.32           
N
+ATOM      2  CA  GLN X 329      18.396  77.948   7.313  1.00 94.77           
C
+ATOM      3  C   GLN X 329      19.316  79.169   7.331  1.00 95.15           
C
+ATOM      4  O   GLN X 329      18.945  80.243   6.859  1.00 98.80           
O
+ATOM      5  CB  GLN X 329      17.356  78.060   8.427  1.00 95.61           
C
+ATOM      6  CG  GLN X 329      16.064  77.308   8.156  1.00 93.83           
C
+ATOM      7  CD  GLN X 329      15.121  77.294   9.350  1.00 97.67           
C
+ATOM      8  OE1 GLN X 329      14.384  76.328   9.556  1.00 96.17           
O
+ATOM      9  NE2 GLN X 329      15.141  78.362  10.145  1.00 90.91           
N
+ATOM      0  HA  GLN X 329      17.938  77.922   6.459  1.00 94.77           
H   new
+ATOM      0  HB2 GLN X 329      17.744  77.728   9.252  1.00 95.61           
H   new
+ATOM      0  HB3 GLN X 329      17.149  78.997   8.568  1.00 95.61           
H   new
+ATOM      0  HG2 GLN X 329      15.613  77.713   7.399  1.00 93.83           
H   new
+ATOM      0  HG3 GLN X 329      16.274  76.395   7.906  1.00 93.83           
H   new
+ATOM      0 HE21 GLN X 329      15.669  79.018   9.970  1.00 90.91           
H   new
+ATOM      0 HE22 GLN X 329      14.626  78.396  10.833  1.00 90.91           
H   new
+ATOM     10  N   GLN X 330      20.511  78.989   7.887  1.00 97.21           
N
+ATOM     11  CA  GLN X 330      21.528  80.033   7.940  1.00101.62           
C
+ATOM     12  C   GLN X 330      22.688  79.690   6.998  1.00103.96           
C
+ATOM     13  O   GLN X 330      23.834  80.084   7.233  1.00 99.45           
O
+ATOM     14  CB  GLN X 330      22.030  80.222   9.371  1.00106.05           
C
+ATOM     15  CG  GLN X 330      22.769  81.532   9.620  1.00111.68           
C
+ATOM     16  CD  GLN X 330      21.844  82.736   9.642  1.00110.66           
C
+ATOM     17  OE1 GLN X 330      21.103  82.985   8.691  1.00114.33           
O   flip
+ATOM     18  NE2 GLN X 330      21.885  83.492  10.734  1.00106.35           
N   flip
+ATOM      0  H   GLN X 330      20.756  78.248   8.248  1.00 97.21           
H   new
+ATOM      0  HA  GLN X 330      21.137  80.872   7.650  1.00101.62           
H   new
+ATOM      0  HB2 GLN X 330      21.268  80.195   9.972  1.00106.05           
H   new
+ATOM      0  HB3 GLN X 330      22.638  79.497   9.584  1.00106.05           
H   new
+ATOM      0  HG2 GLN X 330      23.214  81.483  10.480  1.00111.68           
H   new
+ATOM      0  HG3 GLN X 330      23.421  81.672   8.918  1.00111.68           
H   new
+ATOM      0 HE21 GLN X 330      22.416  83.287  11.379  1.00106.35           
H   new
+ATOM      0 HE22 GLN X 330      21.380  84.185  10.796  1.00106.35           
H   new
+ATOM     19  N   SER X 331      22.379  78.956   5.930  1.00106.47           
N
+ATOM     20  CA  SER X 331      23.396  78.493   4.982  1.00102.41           
C
+ATOM     21  C   SER X 331      23.614  79.457   3.809  1.00104.95           
C
+ATOM     22  O   SER X 331      24.323  79.129   2.857  1.00 99.41           
O
+ATOM     23  CB  SER X 331      23.067  77.085   4.472  1.00 93.37           
C
+ATOM     24  OG  SER X 331      21.928  77.092   3.631  1.00 99.94           
O
+ATOM      0  H   SER X 331      21.578  78.713   5.734  1.00106.47           
H   new
+ATOM      0  HA  SER X 331      24.232  78.465   5.473  1.00102.41           
H   new
+ATOM      0  HB2 SER X 331      23.828  76.729   3.986  1.00 93.37           
H   new
+ATOM      0  HB3 SER X 331      22.911  76.495   5.226  1.00 93.37           
H   new
+ATOM      0  HG  SER X 331      21.771  76.311   3.365  1.00 99.94           
H   new
+TER     845      SER X 437
+END

Added: 
trunk/test_suite/shared_data/model_free/bug_23933_relax_data_read_ids/r1_600.txt
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/trunk/test_suite/shared_data/model_free/bug_23933_relax_data_read_ids/r1_600.txt?rev=28065&amp;view=auto">http://svn.gna.org/viewcvs/relax/trunk/test_suite/shared_data/model_free/bug_23933_relax_data_read_ids/r1_600.txt?rev=28065&amp;view=auto</a>
==============================================================================
--- 
trunk/test_suite/shared_data/model_free/bug_23933_relax_data_read_ids/r1_600.txt
    (added)
+++ 
trunk/test_suite/shared_data/model_free/bug_23933_relax_data_read_ids/r1_600.txt
    Tue Oct 20 09:07:39 2015
@@ -0,0 +1,2 @@
+329    0.71267 0.00665
+331    0.68828 0.01202

Propchange: 
trunk/test_suite/shared_data/model_free/bug_23933_relax_data_read_ids/r1_600.txt
------------------------------------------------------------------------------
    svn:eol-style = native

Modified: trunk/test_suite/system_tests/model_free.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/trunk/test_suite/system_tests/model_free.py?rev=28065&amp;r1=28064&amp;r2=28065&amp;view=diff">http://svn.gna.org/viewcvs/relax/trunk/test_suite/system_tests/model_free.py?rev=28065&amp;r1=28064&amp;r2=28065&amp;view=diff</a>
==============================================================================
--- trunk/test_suite/system_tests/model_free.py (original)
+++ trunk/test_suite/system_tests/model_free.py Tue Oct 20 09:07:39 2015
@@ -1,6 +1,6 @@
 
###############################################################################
 #                                                                            
 #
-# Copyright (C) 2006-2014 Edward d'Auvergne                                  
 #
+# Copyright (C) 2006-2015 Edward d'Auvergne                                  
 #
 #                                                                            
 #
 # This file is part of the program relax (<a  rel="nofollow" href="http://www.nmr-relax.com">http://www.nmr-relax.com</a>).         
 #
 #                                                                            
 #
@@ -478,6 +478,26 @@
 
         # Execute the script.
         self.script_exec(status.install_path + 
sep+'test_suite'+sep+'system_tests'+sep+'scripts'+sep+'model_free'+sep+'bug_21079_local_tm_global_selection.py')
+
+
+    def test_bug_23933_relax_data_read_ids(self):
+        &quot;&quot;&quot;U{Bug #23933&lt;<a  rel="nofollow" href="https://gna.org/bugs/?23933">https://gna.org/bugs/?23933</a>&gt;} catch, the global name 
'ids' is not defined error when loading relaxation data.&quot;&quot;&quot;
+
+        # Path of the files.
+        path = status.install_path + 
sep+'test_suite'+sep+'shared_data'+sep+'model_free'+sep+'bug_23933_relax_data_read_ids'
+
+        # Load the truncated PDB file.
+        
self.interpreter.structure.read_pdb(file='LARA_N_term_no_helixFH_reg.pdb', 
dir=path)
+
+        # Load the spin systems.
+        self.interpreter.structure.load_spins(spin_id='@N')
+        self.interpreter.structure.load_spins(spin_id='@H')
+        self.interpreter.structure.load_spins(spin_id='@NE1')
+        self.interpreter.structure.load_spins(spin_id='@HE1')
+
+        # Load the relaxation data.
+        self.interpreter.relax_data.read(ri_id='R1_600', ri_type='R1', 
frq=600402816.0, file='r1_600.txt', dir=path, res_num_col=1, data_col=2, 
error_col=3)
+
 
 
     def test_create_m4(self):



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Tue Oct 20 09:40:14 2015</div>  
</body>
</html>
