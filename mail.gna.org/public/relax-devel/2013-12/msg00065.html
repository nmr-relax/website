<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: r21825 &#45; /trunk/lib/spectrum/nmrpipe.py -->
<!--X-From-R13: "Sqjneq q'Ohiretar" <rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Fri, 06 Dec 2013 12:17:56 +0100 -->
<!--X-Message-Id: CAED9pY8oH3zwB2jXMr6fZd&#45;zjnm1p0UoHvPLYK9PaQwajs=tWg@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: E1VotIC&#45;0000md&#45;Eo@subversion.gna.org -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: r21825 - /trunk/lib/spectrum/nmrpipe.py -- December 06, 2013 - 12:17</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: r21825 - /trunk/lib/spectrum/nmrpipe.py</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00065" class="tabs">Index by Date</a> | <a href="threads.html#00065" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00064.html">Date Prev</a>] [<a href="msg00066.html">Date Next</a>] [<a href="msg00064.html">Thread Prev</a>] [<a href="msg00067.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: &quot;relax-devel@xxxxxxx&quot; &lt;relax-devel@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Fri, 6 Dec 2013 12:17:25 +0100</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;	h=mime-version:sender:in-reply-to:references:date:message-id:subject	:from:to:content-type;	bh=YUk4uS1PaGLVPS+gijwL4TocpsWsbVHGyukS63VL2EU=;	b=mn8SznfT0X+SfjXAuYrqFkQruEaqWZhaQdzhUIIVaipcHAlgrhzJtSYisOk9TMS4p9	abhPSrQZGn8GWmwp20kEp2+VSLoLbH2u0cFWv++Xww4LRpBzi+WDtHDqfSoPM2I8k2jt	LZpGpJp8XQS2zBLCX0c+LVh1xWHr/T57+BZ9m54h7jGqciDvJ8v10oNF7AG0hDTvQTcm	Cz2ETCkEyXolXJ4+GLZZPR9d9DnCmbCH4aSSY6jjE/mVQhIwdpwoXc4nSvOYQqEswHxi	vd/ablh3FIAvE7dHeRP1nDiMqlUkccxO41rferf2aeLEc1yeHdBLrAt+a7dJk1zDEco/	tKUg==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00065.html">CAED9pY8oH3zwB2jXMr6fZd-zjnm1p0UoHvPLYK9PaQwajs=tWg@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;E1VotIC-0000md-Eo@xxxxxxxxxxxxxxxxxx&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on December 06, 2013 - 12:17:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Hi,

Here we should assume that if the second part of the assignment
contains no residue information, then it should take that information
from the first part.  This is how an assignment such as 'L61N-HN'
should be read.  So instead of a warning for the second dimension, the
values from the first dimension should be silently copied to the
second.  This would be a much nicer behaviour.

Regards,

Edward



On 6 December 2013 12:09,  &lt;tlinnet@xxxxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Author: tlinnet
Date: Fri Dec  6 12:09:56 2013
New Revision: 21825

URL: <a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax?rev=21825&amp;view=rev">http://svn.gna.org/viewcvs/relax?rev=21825&amp;view=rev</a>
Log:
Fixed for reading spins from a NMRPipe SeriesTab formatted file, where 
dimension 2 misses residue number and residue name.

Work in progress for Support Request #3044, 
(<a  rel="nofollow" href="https://gna.org/support/index.php?3044">https://gna.org/support/index.php?3044</a>) - Load spins from SPARKY list.

Modified:
    trunk/lib/spectrum/nmrpipe.py

Modified: trunk/lib/spectrum/nmrpipe.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/trunk/lib/spectrum/nmrpipe.py?rev=21825&amp;r1=21824&amp;r2=21825&amp;view=diff">http://svn.gna.org/viewcvs/relax/trunk/lib/spectrum/nmrpipe.py?rev=21825&amp;r1=21824&amp;r2=21825&amp;view=diff</a>
==============================================================================
--- trunk/lib/spectrum/nmrpipe.py (original)
+++ trunk/lib/spectrum/nmrpipe.py Fri Dec  6 12:09:56 2013
@@ -109,25 +109,32 @@
         row2 = re.split('([a-zA-Z]+)', assign2)
         name2 = row2[-2] + row2[-1]

-        # Get the residue number.
+        # Get the residue number for dimension 1.
         try:
             res_num1 = int(row1[-3])
+        except:
+            raise RelaxError(&quot;Improperly formatted NMRPipe SeriesTab file, 
cannot process the residue number for dimension 1 in assignment: %s.&quot; % 
line[0])
+
+        # Get the residue number for dimension 2.
+        try:
             res_num2 = int(row2[-3])
         except:
-            raise RelaxError(&quot;Improperly formatted NMRPipe SeriesTab file, 
cannot process the assignment '%s'.&quot; % line[0])
+            # We cannot always expect dimension 2 to have residue number.
+            warn(RelaxWarning(&quot;Improperly formatted NMRPipe SeriesTab 
file, cannot process the residue number for dimension 2 in assignment: %s. 
Setting residue number to None.&quot; % line[0]))
+            res_num2 = None

         # The residue name for dimension 1.
         try:
             res_name1 = row1[-4]
         except:
-            warn(RelaxWarning(&quot;Improperly formatted NMRPipe SeriesTab 
file, cannot process the assignment '%s' for residue name dimension 1. 
Setting residue name to None.&quot; % line[0]))
+            warn(RelaxWarning(&quot;Improperly formatted NMRPipe SeriesTab 
file, cannot process the residue name for dimension 1 in assignment: %s.&quot; % 
line[0]))
             res_name1 = None

         # The residue name for dimension 2.
         try:
             res_name2 = row2[-4]
         except:
-            raise warn(RelaxWarning(&quot;Improperly formatted NMRPipe 
SeriesTab file, cannot process the assignment '%s' for residue name 
dimension 2.\nSetting residue name to None.&quot; % line[0]))
+            warn(RelaxWarning(&quot;Improperly formatted NMRPipe SeriesTab 
file, cannot process the residue name for dimension 2 in assignment: %s. 
Setting residue name to None.&quot; % line[0]))
             res_name2 = None

         # Get the intensities.


_______________________________________________
relax (<a  rel="nofollow" href="http://www.nmr-relax.com">http://www.nmr-relax.com</a>)

This is the relax-commits mailing list
relax-commits@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="https://mail.gna.org/listinfo/relax-commits">https://mail.gna.org/listinfo/relax-commits</a>
</pre></blockquote><pre style="margin: 0em;">


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Sat Dec 07 12:40:11 2013</div>  
</body>
</html>
