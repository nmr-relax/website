<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [sr #3124] Grace graphs production for R1rho analysis with R2_eff as function of Omega_eff -->
<!--X-From-R13: "Sqjneq q'Ohiretar" &#60;rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Mon, 17 Mar 2014 12:09:14 +0100 -->
<!--X-Message-Id: CAED9pY9Sqbq5fptmu&#45;W2WxYZqZvfQS5Rbzr_AWRMymbvutqO2g@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 20140228&#45;083958.sv20529.47075@gna.org -->
<!--X-Reference: 20140305&#45;131603.sv20529.87229@gna.org -->
<!--X-Reference: 20140306&#45;105005.sv20529.93967@gna.org -->
<!--X-Reference: 20140313&#45;155634.sv20529.92169@gna.org -->
<!--X-Reference: 20140313&#45;180514.sv20529.37243@gna.org -->
<!--X-Reference: 20140313&#45;184242.sv20529.11318@gna.org -->
<!--X-Reference: 20140313&#45;184446.sv20529.20451@gna.org -->
<!--X-Reference: CAED9pY9zr5viRxGqEbpmfjXsf_4W16XgWTSQ=s+VBv76aTnxPQ@mail.gmail.com -->
<!--X-Reference: CA+CBx2Osr7nnzWgzqfhLXHtJ2zsuv3f&#45;qBxRjAfng+1AAeM8qw@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [sr #3124] Grace graphs production for R1rho analysis with R2_eff as function of Omega_eff -- March 17, 2014 - 12:09</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: [sr #3124] Grace graphs production for R1rho analysis with R2_eff as function of Omega_eff</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00081" class="tabs">Index by Date</a> | <a href="threads.html#00081" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00080.html">Date Prev</a>] [<a href="msg00082.html">Date Next</a>] [<a href="msg00077.html">Thread Prev</a>] [<a href="msg00084.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Mon, 17 Mar 2014 12:08:43 +0100</li>
<li class="menuitem">
<em>Cc</em>: &quot;Troels E. Linnet&quot; &lt;NO-REPLY.INVALID-ADDRESS@xxxxxxx&gt;, &quot;relax-devel@xxxxxxx&quot; &lt;relax-devel@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113; h=mime-version:sender:in-reply-to:references:date:message-id:subject :from:to:cc:content-type:content-transfer-encoding; bh=H2iPUUVkbQFiIj5eKPi9tSCSb8HJ0uODhhWln17Q9Co=; b=XZzkXvYkP6lS+4dU/J/ZN97diWuu+Kjot/Zjza9nihXI4JvmCq73aP90xum1kITsz1 2X3MmVu0quB++s0QVPiCtxfofPPK52+96Xetw/+dbABTHNwE0B0SwBm/+Nv8hgwe4qd7 f/FuQdOpOT0KENcdyUNEN25LqdCKlcEBUrDIz5MUEOaOSgcKJXH40cfAtuDY7DPQqR4l hP6C0Lum05bP7UdTp3ZcnY39q93XgjyGif34xf/ZcZF5rs8r2w9V/ecFKUb6k0p45E+A k+n31npMHvtH2g88Tim5fiRSk1IPmU4JJ+koXXqzyc/w7sAdr8hz3YDuG5DDLV0P1fVF Cxaw==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00081.html">CAED9pY9Sqbq5fptmu-W2WxYZqZvfQS5Rbzr_AWRMymbvutqO2g@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;20140228-083958.sv20529.47075@gna.org&gt; &lt;<a href="msg00013.html">20140305-131603.sv20529.87229@gna.org</a>&gt; &lt;<a href="msg00026.html">20140306-105005.sv20529.93967@gna.org</a>&gt; &lt;<a href="msg00070.html">20140313-155634.sv20529.92169@gna.org</a>&gt; &lt;<a href="msg00071.html">20140313-180514.sv20529.37243@gna.org</a>&gt; &lt;<a href="msg00072.html">20140313-184242.sv20529.11318@gna.org</a>&gt; &lt;<a href="msg00073.html">20140313-184446.sv20529.20451@gna.org</a>&gt; &lt;CAED9pY9zr5viRxGqEbpmfjXsf_4W16XgWTSQ=s+VBv76aTnxPQ@mail.gmail.com&gt; &lt;<a href="msg00077.html">CA+CBx2Osr7nnzWgzqfhLXHtJ2zsuv3f-qBxRjAfng+1AAeM8qw@mail.gmail.com</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on March 17, 2014 - 12:09:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Ah, for this problem, have a look at the math.atan2() function ;)  I
have tried to avoid math.atan() as much as possible within relax, well
where sign is important:

$ grep -r atan . --exclude-dir=.svn

Hmmm, I can see that it is used in a few of the lib.dispersion
modules!  I might have to fix this for relax 3.1.8 (if you haven't
seen the latest commit messages, relax 3.1.7 is in the process of
being released).

Cheers,

Edward


On 14 March 2014 15:58, Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Dear Edward.

I have wondered about the outcome of the theta values.

In the systemtest:
Relax_disp.test_value_write_calc_rotating_frame_params_auto_analysis

I have hardcoded the values of an output of theta values.
But many of them are negative.

If we take the article of:
3.    Palmer, A.G. &amp; Massi, F. (2006). Characterization of the
dynamics of biomacromolecules using rotating-frame spin relaxation NMR
spectroscopy. Chem. Rev. 106, 1700-1719 <a  rel="nofollow" href="http://dx.doi.org/10.1021/cr04042875">http://dx.doi.org/10.1021/cr04042875</a>

And look at Figure 1.
We see that
tan(theta) = w_1 / Omega
If w_1 (Spin-lock offset) is always positive, but Omega can be
negative, then negative values
are to be expected for w_1 / Omega.

For the symmetry of atan, theta_calc = atan(-x) = - atan(x), the theta
angle describing the tilted rotating frame relative to the laboratory
frame should then be
theta = pi + atan(-x) = pi - atan(x) = pi - abs(atan(x))

Best
Troels

2014-03-13 19:51 GMT+01:00 Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt;:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi,

This is the standard way of calculating theta.  Note that some of the
dispersion models in lib.dispersion do not use this code and actually
calculate a different theta value using the population averaged
spin-lock offset.

Regards,

Edward



On 13 March 2014 19:44, Troels E. Linnet
&lt;NO-REPLY.INVALID-ADDRESS@xxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Follow-up Comment #34, sr #3124 (project relax):

The theta calculation in relax is:

# Calculate the tilt angle.
omega1 = point * 2.0 * pi
Delta_omega = shifts[ei][si][mi] - offsets[ei][si][mi][oi]
Domega[ei][si][mi][oi].append(Delta_omega)
if Delta_omega == 0.0:
    theta[ei][si][mi][oi].append(pi / 2.0)
else:
    theta[ei][si][mi][oi].append(atan(omega1 / Delta_omega))

    _______________________________________________________

Reply to this item at:

  &lt;<a  rel="nofollow" href="http://gna.org/support/?3124">http://gna.org/support/?3124</a>&gt;

_______________________________________________
  Message sent via/by Gna!
  <a  rel="nofollow" href="http://gna.org/">http://gna.org/</a>


_______________________________________________
relax (<a  rel="nofollow" href="http://www.nmr-relax.com">http://www.nmr-relax.com</a>)

This is the relax-devel mailing list
relax-devel@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="http://www.nmr-relax.com/mail.gna.org/listinfo/relax-devel">https://mail.gna.org/listinfo/relax-devel</a>
</pre></blockquote></blockquote></blockquote><pre style="margin: 0em;">


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00013" href="msg00013.html">[sr #3124] Grace graphs production for R1rho analysis with R2_eff as	function of Omega_eff</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
<li><strong><a name="00026" href="msg00026.html">[sr #3124] Grace graphs production for R1rho analysis with R2_eff as	function of Omega_eff</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
<li><strong><a name="00070" href="msg00070.html">[sr #3124] Grace graphs production for R1rho analysis with R2_eff as function of Omega_eff</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
<li><strong><a name="00071" href="msg00071.html">[sr #3124] Grace graphs production for R1rho analysis with R2_eff as function of Omega_eff</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
<li><strong><a name="00072" href="msg00072.html">[sr #3124] Grace graphs production for R1rho analysis with R2_eff as function of Omega_eff</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
<li><strong><a name="00073" href="msg00073.html">[sr #3124] Grace graphs production for R1rho analysis with R2_eff as function of Omega_eff</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
<li><strong><a name="00075" href="msg00075.html">Re: [sr #3124] Grace graphs production for R1rho analysis with R2_eff as function of Omega_eff</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00077" href="msg00077.html">Re: [sr #3124] Grace graphs production for R1rho analysis with R2_eff as function of Omega_eff</a></strong>
<ul><li><em>From:</em> Troels Emtekær Linnet</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Mon Mar 17 14:20:31 2014</div>  
</body>
</html>
