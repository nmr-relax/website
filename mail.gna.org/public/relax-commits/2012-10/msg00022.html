<!-- MHonArc v2.6.16 -->
<!--X-Subject: r17643 &#45; in /trunk: arg_check.py check_types.py relax_io.py -->
<!--X-From-R13: rqjneqNaze&#45;erynk.pbz -->
<!--X-Date: Tue, 02 Oct 2012 00:37:09 +0200 -->
<!--X-Message-Id: E1TIobt&#45;0001nF&#45;09@subversion.gna.org -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>r17643 - in /trunk: arg_check.py check_types.py relax_io.py -- October 02, 2012 - 00:37</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />r17643 - in /trunk: arg_check.py check_types.py relax_io.py</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00022" class="tabs">Index by Date</a> | <a href="threads.html#00022" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00021.html">Date Prev</a>] [<a href="msg00023.html">Date Next</a>] [<a href="msg00021.html">Thread Prev</a>] [<a href="msg00023.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: relax-commits@xxxxxxx</li>
<li class="menuitem">
<em>Date</em>: Mon, 01 Oct 2012 22:37:08 -0000</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00022.html">E1TIobt-0001nF-09@subversion.gna.org</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>edward</strong> on October 02, 2012 - 00:37:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Author: bugman
Date: Tue Oct  2 00:37:08 2012
New Revision: 17643

URL: <a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax?rev=17643&amp;view=rev">http://svn.gna.org/viewcvs/relax?rev=17643&amp;view=rev</a>
Log:
Created the special check_types.is_filetype() function for checking for files 
in all Python versions.


Added:
    trunk/check_types.py
Modified:
    trunk/arg_check.py
    trunk/relax_io.py

Modified: trunk/arg_check.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/trunk/arg_check.py?rev=17643&amp;r1=17642&amp;r2=17643&amp;view=diff">http://svn.gna.org/viewcvs/relax/trunk/arg_check.py?rev=17643&amp;r1=17642&amp;r2=17643&amp;view=diff</a>
==============================================================================
--- trunk/arg_check.py (original)
+++ trunk/arg_check.py Tue Oct  2 00:37:08 2012
@@ -34,6 +34,7 @@
     float128 = float64    # Support for 32-bit numpy versions.
 
 # relax module imports.
+from check_types import is_filetype
 from relax_errors import RelaxBoolError, RelaxFloatError, 
RelaxFunctionError, RelaxIntError, RelaxIntListIntError, RelaxListFloatError, 
RelaxListIntError, RelaxMatrixFloatError, RelaxNoneFloatError, 
RelaxNoneFunctionError, RelaxListNumError, RelaxListStrError, RelaxNoneError, 
RelaxNoneIntError, RelaxNoneIntListIntError, RelaxNoneListFloatError, 
RelaxNoneListIntError, RelaxNoneMatrixFloatError, RelaxNoneListNumError, 
RelaxNoneListStrError, RelaxNoneNumError, RelaxNoneNumStrListNumStrError, 
RelaxNoneNumTupleNumError, RelaxNoneStrError, RelaxNoneStrFileError, 
RelaxNoneStrListNumError, RelaxNoneStrListStrError, RelaxNoneTupleError, 
RelaxNumError, RelaxNumStrListNumStrError, RelaxNumTupleNumError, 
RelaxStrError, RelaxStrFileError, RelaxStrListNumError, RelaxStrListStrError, 
RelaxTupleError, RelaxTupleNumError, RelaxNoneValListValError, 
RelaxValListValError
 from relax_io import DummyFileObject
 from types import FunctionType, MethodType
@@ -916,7 +917,7 @@
         return True
 
     # Check for a string.
-    if isinstance(arg, str) or isinstance(arg, file) or isinstance(arg, 
DummyFileObject):
+    if isinstance(arg, str) or is_filetype(arg) or isinstance(arg, 
DummyFileObject):
         return True
 
     # Fail.

Added: trunk/check_types.py
URL: <a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/trunk/check_types.py?rev=17643&amp;view=auto">http://svn.gna.org/viewcvs/relax/trunk/check_types.py?rev=17643&amp;view=auto</a>
==============================================================================
--- trunk/check_types.py (added)
+++ trunk/check_types.py Tue Oct  2 00:37:08 2012
@@ -1,0 +1,49 @@
+###############################################################################
+#                                                                            
 #
+# Copyright (C) 2012 Edward d'Auvergne                                       
 #
+#                                                                            
 #
+# This file is part of the program relax (<a  rel="nofollow" href="/">http://www.nmr-relax.com</a>).         
 #
+#                                                                            
 #
+# This program is free software: you can redistribute it and/or modify       
 #
+# it under the terms of the GNU General Public License as published by       
 #
+# the Free Software Foundation, either version 3 of the License, or          
 #
+# (at your option) any later version.                                        
 #
+#                                                                            
 #
+# This program is distributed in the hope that it will be useful,            
 #
+# but WITHOUT ANY WARRANTY; without even the implied warranty of             
 #
+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the              
 #
+# GNU General Public License for more details.                               
 #
+#                                                                            
 #
+# You should have received a copy of the GNU General Public License          
 #
+# along with this program.  If not, see &lt;<a  rel="nofollow" href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a>&gt;.      
 #
+#                                                                            
 #
+###############################################################################
+
+# Module docstring.
+&quot;&quot;&quot;Special module for checking types.&quot;&quot;&quot;
+
+# Python module imports.
+io_module = True
+try:
+    from io import IOBase    # Python 2.5+ import.
+    file = None
+except ImportError:
+    io_module = False
+
+
+def is_filetype(obj):
+    &quot;&quot;&quot;Check if the given Python object is a file.
+
+    @param obj:     The Python object.
+    @type obj:      anything
+    @return:        True if the object is a file, False otherwise.
+    @rtype:         bool
+    &quot;&quot;&quot;
+
+    # New style check.
+    if io_module:
+        return isinstance(obj, IOBase)
+
+    # Old style check.
+    else:
+        return isinstance(obj, file)

Modified: trunk/relax_io.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/trunk/relax_io.py?rev=17643&amp;r1=17642&amp;r2=17643&amp;view=diff">http://svn.gna.org/viewcvs/relax/trunk/relax_io.py?rev=17643&amp;r1=17642&amp;r2=17643&amp;view=diff</a>
==============================================================================
--- trunk/relax_io.py (original)
+++ trunk/relax_io.py Tue Oct  2 00:37:08 2012
@@ -44,6 +44,7 @@
 from warnings import warn
 
 # relax module imports.
+from check_types import is_filetype
 import generic_fns
 from relax_errors import RelaxError, RelaxFileError, 
RelaxFileOverwriteError, RelaxInvalidSeqError, RelaxMissingBinaryError, 
RelaxNoInPathError, RelaxNonExecError
 from relax_warnings import RelaxWarning, RelaxFileEmptyWarning
@@ -331,7 +332,7 @@
     &quot;&quot;&quot;
 
     # A file descriptor object.
-    if isinstance(file_name, file):
+    if is_filetype(file_name):
         # Nothing to do here!
         return file_name
 
@@ -392,7 +393,7 @@
     &quot;&quot;&quot;
 
     # A file descriptor object.
-    if isinstance(file_name, file):
+    if is_filetype(file_name):
         # Nothing to do here!
         return file_name
 



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Tue Oct 02 01:20:02 2012</div>  
</body>
</html>
