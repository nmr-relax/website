<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [bug #22001] The execution of script changes current working directory -->
<!--X-From-R13: "Sqjneq q'Ohiretar" &#60;rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Fri, 02 May 2014 09:56:33 +0200 -->
<!--X-Message-Id: CAED9pY9EddVGPJeMVNZaA2rkL0B1pnwa+q4qXEU3CMXNn70JEw@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 20140501&#45;094651.sv20529.24996@gna.org -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [bug #22001] The execution of script changes current working directory -- May 02, 2014 - 09:56</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: [bug #22001] The execution of script changes current working directory</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00021" class="tabs">Index by Date</a> | <a href="threads.html#00021" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00020.html">Date Prev</a>] [<a href="msg00048.html">Date Next</a>] [<a href="msg00003.html">Thread Prev</a>] [<a href="msg00022.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: &quot;Troels E. Linnet&quot; &lt;NO-REPLY.INVALID-ADDRESS@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Fri, 2 May 2014 09:55:41 +0200</li>
<li class="menuitem">
<em>Cc</em>: &quot;relax-devel@xxxxxxx&quot; &lt;relax-devel@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113; h=mime-version:sender:in-reply-to:references:date:message-id:subject :from:to:cc:content-type; bh=jMLmACEqtflydh9vOVK3u/8XgZww+937tPKm5Kkm79A=; b=HA+u8lWinlEmdqo0Nx8x0zylt/up6knLd0D9tTKIPNfufl0u1d9mRX9M1pCVjdnvjx R8qBzUwNbRjPUGLU9cOR8GHMIdJy4O+I4X0UKyd27+/5UsZ3ldrMxUCAu+jcxcPPctPs 27K2NshNIpd1eYTHa6Uahkc5FLMANB1u9pn54hTF4qg8WW4N5fuOJ+VR9qLCkdKg2Rkm wA82l04S7OOYL/TkGLTBAyfJX3UIvdqyiog+rNxNFskLUTXGT3M4RYDTZnwjRbEHRGDa 9KNx76+0jpMBdOaOL2pAhlRVBbayNemDdqRF4AQlx9XwqcDQOMCUUduxDInd5bATV205 tKGA==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00021.html">CAED9pY9EddVGPJeMVNZaA2rkL0B1pnwa+q4qXEU3CMXNn70JEw@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;<a href="msg00003.html">20140501-094651.sv20529.24996@gna.org</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on May 02, 2014 - 09:56:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Hi Troels,

This behaviour was introduced to allow for nested scripting.  Maybe it
is not needed.  You can see it in the file prompt/interpreter.py
within the exec_script() function.  Feel free to play around with it,
but be prepared for some rather large test suite breakages.  A fix
will probably not be trivial.

Regards,

Edward



On 1 May 2014 11:46, Troels E. Linnet &lt;NO-REPLY.INVALID-ADDRESS@xxxxxxx&gt; 
wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">URL:
  &lt;<a  rel="nofollow" href="http://gna.org/bugs/?22001">http://gna.org/bugs/?22001</a>&gt;

                 Summary: The execution of script changes current working
directory
                 Project: relax
            Submitted by: tlinnet
            Submitted on: Thu 01 May 2014 09:46:51 AM UTC
                Category: None
Specific analysis category: None
                Priority: 7 - High
                Severity: 4 - Important
                  Status: None
             Assigned to: None
         Originator Name:
        Originator Email:
             Open/Closed: Open
                 Release: Repository: trunk
         Discussion Lock: Any
        Operating System: None

    _______________________________________________________

Details:

This illustrates the problem

tlinnet@linmac:~$ mkdir test ; cd test
tlinnet@linmac:test$ mkdir script
tlinnet@linmac:test$ echo &quot;import os&quot; &gt;&gt; script/test.py
tlinnet@linmac:test$ echo &quot;print(os.getcwd())&quot; &gt;&gt; script/test.py
tlinnet@linmac:test$ relax script/test.py



                                  relax repository checkout rNone
                                                None

                              Molecular dynamics by NMR data analysis

                             Copyright (C) 2001-2006 Edward d'Auvergne
                         Copyright (C) 2006-2014 the relax development team

This is free software which you are welcome to modify and redistribute under
the conditions of the
GNU General Public License (GPL).  This program, including all modules, is
licensed under the GPL
and comes with absolutely no warranty.  For details type 'GPL' within the
relax prompt.

Assistance in using the relax prompt and scripting interface can be accessed
by typing 'help' within
the prompt.

Processor fabric:  Uni-processor.

script = 'script/test.py'
----------------------------------------------------------------------------------------------------
import os
print(os.getcwd())
----------------------------------------------------------------------------------------------------
/Users/tlinnet/test/script



----------

This means that running:

relax $HOME/software/relax_trunk/sample_scripts/relax_disp/cpmg_analysis.py

puts the output data inside &quot;sample_scripts&quot; instead of the current working
folder.

This behaviour is not expected.




    _______________________________________________________

Reply to this item at:

  &lt;<a  rel="nofollow" href="http://gna.org/bugs/?22001">http://gna.org/bugs/?22001</a>&gt;

_______________________________________________
  Message sent via/by Gna!
  <a  rel="nofollow" href="http://gna.org/">http://gna.org/</a>


_______________________________________________
relax (<a  rel="nofollow" href="http://www.nmr-relax.com">http://www.nmr-relax.com</a>)

This is the relax-devel mailing list
relax-devel@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="https://mail.gna.org/listinfo/relax-devel">https://mail.gna.org/listinfo/relax-devel</a>
</pre></blockquote><pre style="margin: 0em;">


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00022" href="msg00022.html">Re: [bug #22001] The execution of script changes current working directory</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00003" href="msg00003.html">[bug #22001] The execution of script changes current working directory</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Fri May 02 14:40:08 2014</div>  
</body>
</html>
