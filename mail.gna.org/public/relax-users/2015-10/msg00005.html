<!-- MHonArc v2.6.19+ -->
<!--X-Subject: Re: RelaxWarning: comparison to `None` will result in an elementwise object comparison in the future -->
<!--X-From-R13: "Sqjneq q'Ohiretar" &#60;rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Fri, 16 Oct 2015 14:36:56 +0200 -->
<!--X-Message-Id: CAED9pY9Vx1tRRKRLQsWEP834sV05vbqRBcLwZQ8+o0yze9rAnA@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: CY1PR0301MB12092E63CBEF7E79A3298FB7DA320@CY1PR0301MB1209.namprd03.prod.outlook.com -->
<!--X-Reference: CAED9pY9jXsGwaqooGEGAoYA8Sja7pq=GqVAkc3KV89s99DwfLg@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: RelaxWarning: comparison to `None` will result in an elementwise object comparison in the future -- October 16, 2015 - 14:36</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: RelaxWarning: comparison to `None` will result in an elementwise object comparison in the future</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00005" class="tabs">Index by Date</a> | <a href="threads.html#00005" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00004.html">Date Prev</a>] [<a href="msg00006.html">Date Next</a>] [<a href="msg00004.html">Thread Prev</a>] [<a href="msg00006.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Sze Chan &lt;samuelsw.chan@xxxxxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Fri, 16 Oct 2015 14:36:26 +0200</li>
<li class="menuitem">
<em>Cc</em>: &quot;relax-users@xxxxxxx&quot; &lt;relax-users@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113; h=mime-version:sender:in-reply-to:references:date:message-id:subject :from:to:cc:content-type:content-transfer-encoding; bh=cAdhprEzoLOcVrmAXXtHAQXni09MJjFqbYQEIBrIg58=; b=b6/qNuKHO3qCEeEw0Qwi05QGfVxxpkb1vOPKyJzPr36ypWVdRUGYRSEjiem3cLCO0X /FVSIxWAENd/7+WYcwAozSXsLjSoI2v78wKhTzdWjqtAK4dKCIvbZkNvdE05kI9R+lNf YvuyI1hkDl/NQGMnRIPl7VkR/BMnA0Ltf+rdPFdTnrBUvAOKKQrtjrRGLNumXSUQzUua p9T8p5cmBZNjWXgXAk6VAbHY6Sf2Co0uXGS+LrdZpFWbtzF+26KEW/08HOUiEAeQJhiz LUGOqmH40Uufv/iNe1/JcaHFqCK75GPdJIyzrr5pa7jc6Q+o3PqzQSUq+bD9K/ZkjdtO DcsA==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00005.html">CAED9pY9Vx1tRRKRLQsWEP834sV05vbqRBcLwZQ8+o0yze9rAnA@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;<a href="msg00003.html">CY1PR0301MB12092E63CBEF7E79A3298FB7DA320@CY1PR0301MB1209.namprd03.prod.outlook.com</a>&gt; &lt;CAED9pY9jXsGwaqooGEGAoYA8Sja7pq=GqVAkc3KV89s99DwfLg@mail.gmail.com&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on October 16, 2015 - 14:36:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">On 12 October 2015 at 09:04, Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">On 11 October 2015 at 19:32, Sze Chan &lt;samuelsw.chan@xxxxxxxxxxxxxxxx&gt; 
wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hello,


While I was setting up my modelfree analysis in the GUI automated protocol 
, I received the error in the controller:


RelaxWarning: comparison to `None` will result in an elementwise object 
comparison in the future.


After loading my data, setting dipolar interactions, setting CSA 
relaxations and setting the isotopes but before execution of the analysis.


I'm not sure what happened to cause the warning, but when the modelfree 
analysis is running, each successive round of optimization in each model 
does not compare to the previous round, instead it would always compare 
each optimized chi-square value to 'none' such as in round 21 of the 
oblate model:


Storing the optimisation results for the spin 
'#LARA_N_term_no_helixFH_reg_mol24:358@N', the optimised chi-squared value 
is lower than the current value (283.50425283 &lt; None).


Even though I'm guessing it should refer to a previously optimised value?


During the analysis it would go through the default 30 rounds of 
optimisation for each global model but not reach convergence.


I was wondering how I can remedy this or at least create a log file so I 
can make my problem more clear.
</pre></blockquote><pre style="margin: 0em;">

Hi Sam,

I would suggest running relax with these options:

$ relax --gui --log relax_warning.log --traceback

This will start the GUI, send all output into a 'relax_warning.log'
file, and produce highly detailed RelaxError and RelaxWarning messages
pointing to the exact place in the code where the problem occurred.
Then exit relax once this warning first occurs (using kill if
necessary).

Which version of relax are you using by the way?  And which numpy
version?  The RelaxWarning message you see is either due to Python or
numpy (specifically using newer versions).  I have seen it many times
before, and I try to avoid it in the code where possible.  Strangely I
have never seen this one before.  The relax test suite tests the full
automated dauvergne_protocol analysis, including multiple rounds of
optimisation and convergence tests.  And for each relax release I run
the full test suite on Python version 2.5, 2.6, 2.7, 3.0, 3.1, 3.2,
3.3, and 3.4 (and now 3.5).  Because the test suite has not replicated
the problem you see, maybe it has something to do with numpy.  Anyway,
I look forward to seeing the traceback on that RelaxWarning, and maybe
the output of 'relax -i'.  If you'd like to attach files, then please
create a bug report and attach the file to the report (
<a  rel="nofollow" href="https://gna.org/bugs/?func=additem&amp;group=relax">https://gna.org/bugs/?func=additem&amp;group=relax</a> ).
</pre></blockquote><pre style="margin: 0em;">

Hi Sam,

Thanks for creating the bug report ( <a  rel="nofollow" href="https://gna.org/bugs/?23933">https://gna.org/bugs/?23933</a> ).
</pre><blockquote class="blockquote"><pre style="margin: 0em;">From this I can see that the RelaxWarning is not the problem, but
</pre></blockquote><pre style="margin: 0em;">rather this:

&quot;&quot;&quot;
relax&gt; relax_data.read(ri_id='R1_600_2', ri_type='R1',
frq=600402816.0, file='C:\\Users\\Sam Chan\\Desktop\\r1_600.txt',
dir=None, spin_id_col=None, mol_name_col=None, res_num_col=1,
res_name_col=None, spin_num_col=None, spin_name_col=None, data_col=2,
error_col=3, sep=None, spin_id='@N*')
Opening the file 'C:\\Users\\Sam Chan\\Desktop\\r1_600.txt' for reading.
Traceback (most recent call last):
  File &quot;C:\relax\gui\wizards\wiz_objects.py&quot;, line 166, in _apply
    self.exec_status = self.on_execute()
  File &quot;C:\relax\gui\uf_objects.py&quot;, line 917, in on_execute
    return_status = self.execute(self.name, **kargs)
  File &quot;C:\relax\gui\uf_objects.py&quot;, line 839, in execute
    return_status = interpreter.apply(uf, *args, **kwds)
  File &quot;C:\relax\gui\interpreter.py&quot;, line 109, in apply
    fn(*args, **kwds)
  File &quot;C:\relax\pipe_control\relax_data.py&quot;, line 920, in read
    pack_data(ri_id, ri_type, frq, values, errors,
mol_names=mol_names, res_nums=res_nums, res_names=res_names,
spin_nums=spin_nums, spin_names=spin_names, spin_id=spin_id)
  File &quot;C:\relax\pipe_control\relax_data.py&quot;, line 767, in pack_data
    if ids:
NameError: global name 'ids' is not defined
&quot;&quot;&quot;

Did you see this error in the GUI?  To help debug this, I was
wondering if you could attach a shortened version of the r1_600.txt
file (truncated to 1 or 2 residues, but still enough to trigger the
error).  I could then use this to create a new system or GUI test to
catch the problem.  That will allow me to come up with a fix in
normally a few minutes.  Oh, you may have seen that I just released
relax 4.0.0, the first of the 4 series (
<a  rel="nofollow" href="http://wiki.nmr-relax.com/Relax_4.0.0">http://wiki.nmr-relax.com/Relax_4.0.0</a> ).  However this problem you see
will still be present.

Cheers,

Edward


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00003" href="msg00003.html">RelaxWarning: comparison to `None` will result in an elementwise object comparison in the future</a></strong>
<ul><li><em>From:</em> Sze Chan</li></ul></li>
<li><strong><a name="00004" href="msg00004.html">Re: RelaxWarning: comparison to `None` will result in an elementwise object comparison in the future</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Fri Oct 16 15:00:10 2015</div>  
</body>
</html>
