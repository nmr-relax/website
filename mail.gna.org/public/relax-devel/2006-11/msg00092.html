<!-- MHonArc v2.6.10 -->
<!--X-Subject: Re: [bug #7670] scons compile issue -->
<!--X-From-R13: Rbhtynf Ybwrgva <qbhtynf.xbwrgvaNtznvy.pbz> -->
<!--X-Date: Wed, 08 Nov 2006 16:57:32 +0100 -->
<!--X-Message-Id: D3013D2F&#45;373E&#45;4BC8&#45;B5F9&#45;02D87B274F6A@gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 20061108&#45;135202.sv0.47378@gna.org -->
<!--X-Reference: 7f080ed10611080630l17317622mc9c0e13c514fc256@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [bug #7670] scons compile issue -- November 08, 2006 - 16:57</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: [bug #7670] scons compile issue</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00092" class="tabs">Index by Date</a> | <a href="threads.html#00092" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00091.html">Date Prev</a>] [<a href="msg00093.html">Date Next</a>] [<a href="msg00087.html">Thread Prev</a>] [<a href="msg00094.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Edward d'Auvergne &lt;edward.dauvergne@xxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Wed, 8 Nov 2006 10:56:38 -0500</li>
<li class="menuitem">
<em>Cc</em>: relax-devel@xxxxxxx</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00092.html">D3013D2F-373E-4BC8-B5F9-02D87B274F6A@gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;<a href="msg00085.html">20061108-135202.sv0.47378@gna.org</a>&gt;	&lt;<a href="msg00087.html">7f080ed10611080630l17317622mc9c0e13c514fc256@mail.gmail.com</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Douglas Kojetin</strong> on November 08, 2006 - 16:57:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Hi Edward-</pre><br>
<pre style="margin: 0em;">The following worked without error:</pre><br>
<pre style="margin: 0em;">gcc -bundle -bundle_loader /sw/bin/python -dynamic -o
maths_fns/relax_fit.dylib maths_fns/c_chi2.os maths_fns/exponential.os
maths_fns/relax_fit.os</pre><br>
<tt>but invoking relax afterwards suggests the relaxation curve fitting  
is still not available:</tt><br>
<br>
<pre style="margin: 0em;">% ./relax --test</pre><br>
<tt>ImportError: relaxation curve fitting is unavailible, try compiling  
the C modules.</tt><br>
<br>
<pre style="margin: 0em;">Is there anything else I need to do or should try?</pre><br>
<pre style="margin: 0em;">Thanks,
Doug</pre><br>
<tt><br>On Nov 8, 2006, at 9:30 AM, Edward d'Auvergne wrote:
</tt><blockquote class="blockquote"><pre style="margin: 0em;">Hi,</pre><br>
<pre style="margin: 0em;">I have to warn you first that the 'tensor_pdb' branch is very unstable
code at the moment and I'm constantly breaking things as the code
shapes up.  There may be times when it won't even run.  These aren't
related to this bug though.</pre><br>
<pre style="margin: 0em;">I've had a look at the 'sconstruct' script in the base relax directory
and one thing which is apparent is the '-dynamiclib' flag being passed
into 'gcc'.  The script has been specifically modified for OS X to
compile the shared objects to be loaded by python, hence the
'-bundle', etc. flags.  However '-dynamiclib' is not one of the
options in the script so it must be SCons adding that.  If you type
the following gcc line at the prompt, do get the same
'powerpc-apple-darwin8-gcc-4.0.1' error message or does the code
compile?</pre><br>
<pre style="margin: 0em;">gcc -bundle -bundle_loader /sw/bin/python -dynamic -o
maths_fns/relax_fit.dylib maths_fns/c_chi2.os maths_fns/exponential.os
maths_fns/relax_fit.os</pre><br>
<pre style="margin: 0em;">If we can work out how to compile the C modules on the command line,
then the SCons script can be subsequently updated to pass the correct
options to gcc.</pre><br>
<pre style="margin: 0em;">Cheers,</pre><br>
<pre style="margin: 0em;">Edward</pre><br>
<tt><br>On 11/8/06, anonymous &lt;NO-REPLY.INVALID-ADDRESS@xxxxxxx&gt; wrote:
</tt><blockquote class="blockquote"><pre style="margin: 0em;"><br>URL:
  &lt;<a  href="http://gna.org/bugs/?7670">http://gna.org/bugs/?7670</a>&gt;</pre><br>
<pre style="margin: 0em;">                 Summary: scons compile issue
                 Project: relax
            Submitted by: None
            Submitted on: Wednesday 11/08/2006 at 13:52 CET
                Category: Scons build system
                Priority: 5 - Normal
                Severity: 4 - Important
                  Status: None
                 Privacy: Public
             Assigned to: None
         Originator Name: doug
        Originator Email:
             Open/Closed: Open
                 Release: 1.2.7
        Operating System: Mac OS X</pre><br>
<pre style="margin: 0em;">    _______________________________________________________</pre><br>
<pre style="margin: 0em;">Details:</pre><br>
<tt>I'm using the tensor_pdb version (svn co<br>
svn://svn.gna.org/svn/relax/branches/tensor_pdb) and running Mac  
OS X 10.4.8<br>
w/ gcc version 4.0.1 (PowerPC version).</tt><br>
<br>
<tt>I tried to install relax using the directions in the relax.pdf  
section 1.2.1<br>
using the 'scons' program under OS X.  I am seeing the following  
error (even<br>
after trying to execute 'scons' a few times, which is shown below):</tt><br>
<br>
<pre style="margin: 0em;">% scons clean
scons: Reading SConscript files ...
scons: done reading SConscript files.
scons: Building targets ...
clean_temp_files([&quot;clean_temp&quot;], [])</pre><br>
<pre style="margin: 0em;">###############################
# Cleaning up temporary files #
###############################</pre><br>
<pre style="margin: 0em;"><br></pre><br>
<tt>Removing the files ending in ['pyc', 'bak', 'o', 'os', 'obj',  
'exp', 'lib'].</tt><br>
<br>
<pre style="margin: 0em;"><br></pre><br>
<pre style="margin: 0em;"><br></pre><br>
<pre style="margin: 0em;">clean_manual_files([&quot;manual_clean&quot;], [])</pre><br>
<pre style="margin: 0em;">##########################################
# Cleaning up the temporary manual files #
##########################################</pre><br>
<pre style="margin: 0em;"><br></pre><br>
<pre style="margin: 0em;"><br></pre><br>
<pre style="margin: 0em;"><br>clean_files([&quot;clean&quot;], [])</pre><br>
<pre style="margin: 0em;">###############
# Cleaning up #
###############</pre><br>
<pre style="margin: 0em;"><br></pre><br>
<pre style="margin: 0em;">Removing the files ending in ['so', 'sconsign', 'dll'].</pre><br>
<pre style="margin: 0em;"><br></pre><br>
<pre style="margin: 0em;"><br></pre><br>
<pre style="margin: 0em;">scons: done building targets.</pre><br>
<pre style="margin: 0em;"><br></pre><br>
<pre style="margin: 0em;">% scons
scons: Reading SConscript files ...
scons: done reading SConscript files.
scons: Building targets ...</pre><br>
<pre style="margin: 0em;"><br></pre><br>
<pre style="margin: 0em;"><br>###########################
# Compiling the C modules #
###########################</pre><br>
<tt><br>Building the relaxation curve fitting module 'maths_fns/ 
relax_fit.dylib'</tt><br>
<br>
<tt>gcc -I/sw/include/python2.4 -fPIC -c -o maths_fns/c_chi2.os<br>
maths_fns/c_chi2.c<br>
gcc -I/sw/include/python2.4 -fPIC -c -o maths_fns/exponential.os<br>
maths_fns/exponential.c<br>
gcc -I/sw/include/python2.4 -fPIC -c -o maths_fns/relax_fit.os<br>
maths_fns/relax_fit.c<br>
gcc -bundle -bundle_loader /sw/bin/python -dynamic -dynamiclib -o<br>
maths_fns/relax_fit.dylib maths_fns/c_chi2.os maths_fns/ 
exponential.os<br>
maths_fns/relax_fit.os<br>
powerpc-apple-darwin8-gcc-4.0.1: -bundle not allowed with -dynamiclib<br>
scons: *** [maths_fns/relax_fit.dylib] Error 1<br>
scons: building terminated because of errors.</tt><br>
<br>
<pre style="margin: 0em;"><br></pre><br>
<tt><br>I blindly tried removing the -bundle and -bundle_loader flags, but  
that did<br>
not help.</tt><br>
<br>
<pre style="margin: 0em;"><br></pre><br>
<pre style="margin: 0em;">    _______________________________________________________</pre><br>
<pre style="margin: 0em;">Follow-up Comments:</pre><br>
<tt><br>-------------------------------------------------------<br>
Date: Wednesday 11/08/2006 at 13:52 CETBy: Anonymous<br>
I'm using the tensor_pdb version (svn co<br>
svn://svn.gna.org/svn/relax/branches/tensor_pdb) and running Mac  
OS X 10.4.8<br>
w/ gcc version 4.0.1 (PowerPC version).</tt><br>
<br>
<tt>I tried to install relax using the directions in the relax.pdf  
section 1.2.1<br>
using the 'scons' program under OS X.  I am seeing the following  
error (even<br>
after trying to execute 'scons' a few times, which is shown below):</tt><br>
<br>
<pre style="margin: 0em;">% scons clean
scons: Reading SConscript files ...
scons: done reading SConscript files.
scons: Building targets ...
clean_temp_files([&quot;clean_temp&quot;], [])</pre><br>
<pre style="margin: 0em;">###############################
# Cleaning up temporary files #
###############################</pre><br>
<pre style="margin: 0em;"><br></pre><br>
<tt>Removing the files ending in ['pyc', 'bak', 'o', 'os', 'obj',  
'exp', 'lib'].</tt><br>
<br>
<pre style="margin: 0em;"><br></pre><br>
<pre style="margin: 0em;"><br></pre><br>
<pre style="margin: 0em;">clean_manual_files([&quot;manual_clean&quot;], [])</pre><br>
<pre style="margin: 0em;">##########################################
# Cleaning up the temporary manual files #
##########################################</pre><br>
<pre style="margin: 0em;"><br></pre><br>
<pre style="margin: 0em;"><br></pre><br>
<pre style="margin: 0em;"><br>clean_files([&quot;clean&quot;], [])</pre><br>
<pre style="margin: 0em;">###############
# Cleaning up #
###############</pre><br>
<pre style="margin: 0em;"><br></pre><br>
<pre style="margin: 0em;">Removing the files ending in ['so', 'sconsign', 'dll'].</pre><br>
<pre style="margin: 0em;"><br></pre><br>
<pre style="margin: 0em;"><br></pre><br>
<pre style="margin: 0em;">scons: done building targets.</pre><br>
<pre style="margin: 0em;"><br></pre><br>
<pre style="margin: 0em;">% scons
scons: Reading SConscript files ...
scons: done reading SConscript files.
scons: Building targets ...</pre><br>
<pre style="margin: 0em;"><br></pre><br>
<pre style="margin: 0em;"><br>###########################
# Compiling the C modules #
###########################</pre><br>
<tt><br>Building the relaxation curve fitting module 'maths_fns/ 
relax_fit.dylib'</tt><br>
<br>
<tt>gcc -I/sw/include/python2.4 -fPIC -c -o maths_fns/c_chi2.os<br>
maths_fns/c_chi2.c<br>
gcc -I/sw/include/python2.4 -fPIC -c -o maths_fns/exponential.os<br>
maths_fns/exponential.c<br>
gcc -I/sw/include/python2.4 -fPIC -c -o maths_fns/relax_fit.os<br>
maths_fns/relax_fit.c<br>
gcc -bundle -bundle_loader /sw/bin/python -dynamic -dynamiclib -o<br>
maths_fns/relax_fit.dylib maths_fns/c_chi2.os maths_fns/ 
exponential.os<br>
maths_fns/relax_fit.os<br>
powerpc-apple-darwin8-gcc-4.0.1: -bundle not allowed with -dynamiclib<br>
scons: *** [maths_fns/relax_fit.dylib] Error 1<br>
scons: building terminated because of errors.</tt><br>
<br>
<pre style="margin: 0em;"><br></pre><br>
<tt><br>I blindly tried removing the -bundle and -bundle_loader flags, but  
that did<br>
not help.</tt><br>
<br>
<pre style="margin: 0em;"><br></pre><br>
<pre style="margin: 0em;"><br></pre><br>
<pre style="margin: 0em;"><br></pre><br>
<pre style="margin: 0em;"><br></pre><br>
<pre style="margin: 0em;"><br>    _______________________________________________________</pre><br>
<pre style="margin: 0em;">Reply to this item at:</pre><br>
<pre style="margin: 0em;">  &lt;<a  href="http://gna.org/bugs/?7670">http://gna.org/bugs/?7670</a>&gt;</pre><br>
<pre style="margin: 0em;">_______________________________________________
  Message sent via/by Gna!
  <a  href="http://gna.org/">http://gna.org/</a></pre><br>
<pre style="margin: 0em;"><br>_______________________________________________
relax (<a  href="http://nmr-relax.com">http://nmr-relax.com</a>)</pre><br>
<pre style="margin: 0em;">This is the relax-devel mailing list
relax-devel@xxxxxxx</pre><br>
<pre style="margin: 0em;">To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  href="https://mail.gna.org/listinfo/relax-devel">https://mail.gna.org/listinfo/relax-devel</a></pre><br>
</blockquote></blockquote><pre style="margin: 0em;"><br></pre><br>
<pre style="margin: 0em;"><br></pre><br>
<br>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00094" href="msg00094.html">Re: [bug #7670] scons compile issue</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00085" href="msg00085.html">[bug #7670] scons compile issue</a></strong>
<ul><li><em>From:</em> anonymous</li></ul></li>
<li><strong><a name="00087" href="msg00087.html">Re: [bug #7670] scons compile issue</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Wed Nov 08 17:20:26 2006</div>  
</body>
</html>
