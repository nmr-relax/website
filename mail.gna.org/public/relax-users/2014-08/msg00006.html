<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: Relax &#45; model free without a structure/PDB? -->
<!--X-From-R13: Febryf Szgrxæe Zvaarg &#60;gyvaargNaze&#45;erynk.pbz> -->
<!--X-Date: Fri, 01 Aug 2014 13:29:55 +0200 -->
<!--X-Message-Id: CA+CBx2P+G=q5q81pVPHKGVxW4j+6gXUss5OtqC3xur3DsbzJ4A@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: CAEK1Krz9NpDth6pq3ix7i+MQbSV8Z&#45;tn35&#45;jSzSioGQ+jdF57w@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: Relax - model free without a structure/PDB? -- August 01, 2014 - 13:29</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: Relax - model free without a structure/PDB?</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00006" class="tabs">Index by Date</a> | <a href="threads.html#00006" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00005.html">Date Prev</a>] [<a href="msg00007.html">Date Next</a>] [<a href="msg00005.html">Thread Prev</a>] [<a href="msg00014.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Ryan Lo &lt;rhl4vf@xxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Fri, 1 Aug 2014 13:29:00 +0200</li>
<li class="menuitem">
<em>Cc</em>: &quot;relax-users@xxxxxxx&quot; &lt;relax-users@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113; h=mime-version:sender:in-reply-to:references:from:date:message-id :subject:to:cc:content-type:content-transfer-encoding; bh=0KQuiEDdSFT+fB5xVOjoTLeKXl8lIEtIskchh3t2ASo=; b=Ft41xOZnGPaGcyKeYwYYY4P9mjztzlFlWlLz9H9Ea13NIHiL7gzTf0nlGWZPB63zrB Ca0M4mQp0xieevLZnP87z2qrcB9CsiEev49vH5DXz4dXLsDSotGhDY7deYRTCKD9bQnC 92wCkvsln9ovyHIIexFTusDTgxWcr+wyME6W/a1MZcbDwbKGRDHPptAr326W/T49FqbW aqM618MVfK7RpmaqoaCcIl7Vrb+85T6I9FZ2+R3se1FA46qjvIUTr650VMo9+lidwUSy 2NbnV/CYOzc7DIbtQO2jhMKKBfHXNKFFO0Ahm0g2ZvQlVzMaaqJmUAMTt6/qC6aD7Rbs rqhA==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;CA+CBx2P+G=q5q81pVPHKGVxW4j+6gXUss5OtqC3xur3DsbzJ4A@mail.gmail.com&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;<a href="msg00005.html">CAEK1Krz9NpDth6pq3ix7i+MQbSV8Z-tn35-jSzSioGQ+jdF57w@mail.gmail.com</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Troels Emtekær Linnet</strong> on August 01, 2014 - 13:29:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Dear Ryan.

Welcome to the mailing list!

No question is to silly, and by asking here on the public mailing
list, your question will potentially help any other users who would
have the same question.
For example this mailing list can be viewed here:

<a  rel="nofollow" href="http://thread.gmane.org/gmane.science.nmr.relax.user">http://thread.gmane.org/gmane.science.nmr.relax.user</a>

And searches in same mail directory can be done here:
<a  rel="nofollow" href="http://dir.gmane.org/gmane.science.nmr.relax.user">http://dir.gmane.org/gmane.science.nmr.relax.user</a>

Your specific question is now listed here:
<a  rel="nofollow" href="http://thread.gmane.org/gmane.science.nmr.relax.user/1716">http://thread.gmane.org/gmane.science.nmr.relax.user/1716</a>

Questions regarding model free analysis, is best answered by Edward.
I know, that he is on holiday for the next two weeks, so I can try to
answer your question.

I am a PhD student at the structural biology in Copenhagen, and have
been working on the dispersion branch (CPMG and R1rho), so my
experience with model free analysis is limited. I will however do my
best to try to help you in the meantime.

How to find help:
The manual
<a  rel="nofollow" href="http://wiki.nmr-relax.com/Manual">http://wiki.nmr-relax.com/Manual</a>

Related to: Interatomic data (for the dipole-dipole interaction).

The GUI setup:
<a  rel="nofollow" href="http://www.nmr-relax.com/manual/new_protocol_in_GUI.html">http://www.nmr-relax.com/manual/new_protocol_in_GUI.html</a>

Did you complete:
<a  rel="nofollow" href="http://www.nmr-relax.com/manual/d_Auvergne_protocol_GUI_mode_relaxation_interactions.html">http://www.nmr-relax.com/manual/d_Auvergne_protocol_GUI_mode_relaxation_interactions.html</a>

For example, if I do in terminal:
-----------
</pre><blockquote class="blockquote"><pre style="margin: 0em;">cd /Users/tlinnet/software/relax_trunk
tlinnet@linmac:relax_trunk$ grep -r -C 3 &quot;Interatomic data (for the 
dipole-dipole interaction)&quot; . | grep -v &quot;./docs&quot;
</pre></blockquote><pre style="margin: 0em;">--
--
./gui/analyses/auto_model_free.py-
./gui/analyses/auto_model_free.py-        # Interatomic data containers.
./gui/analyses/auto_model_free.py-        if not hasattr(cdp,
'interatomic') or len(cdp.interatomic) == 0:
./gui/analyses/auto_model_free.py:
missing.append(&quot;Interatomic data (for the dipole-dipole interaction)&quot;)
./gui/analyses/auto_model_free.py-
./gui/analyses/auto_model_free.py-        # Get the mode.
./gui/analyses/auto_model_free.py-        mode =
gui_to_str(self.mode.GetValue())
-----------

So that seems to be related to the cdp (current data pipe) missing
information for interatomic.

How to perform in GUI, without PDB.

Click:
- New analysis
- Model-free
- OK for pipe
- Create spin structure with either:
-- user functions (n-z) -&gt; sequence -&gt; read
  # Create the spins from a 5 column formatted file:
  # As I recall, the output from a R1/R2 relaxation data contains
files in this format. Just re-use the file, as the use is only related
to create
  # the spin container data structure in relax, where all
spin-specific information is then stored.
  sequence.read(file='noe.500.out', dir=None, mol_name_col=1,
res_num_col=2, res_name_col=3, spin_num_col=4, spin_name_col=5)
-- user functions (n-z) -&gt; spectrum -&gt; read_spins
   # Or create the spins from a spectrum formatted :
   # If you use format of, Sparky, XEasy, NMRView, NMRPipe seriesTab,
just provide the filename, and everything is sorted out by the
function.
   spectrum.read_spins(file=&quot;peaks_list_max_standard.ser&quot;, dir=None)

Then click: ( See
<a  rel="nofollow" href="http://www.nmr-relax.com/manual/d_Auvergne_protocol_GUI_mode_relaxation_interactions.html">http://www.nmr-relax.com/manual/d_Auvergne_protocol_GUI_mode_relaxation_interactions.html</a>
)

- Dipolar relaxation button
-- PDB reading - Click SKIP
-- Atomic position extraction - Click SKIP
interatom.define(spin_id1='@N', spin_id2='@H', direct_bond=True)
interatom.define(spin_id1='@NE1', spin_id2='@HE1', direct_bond=True)
interatom.set_dist(spin_id1='@N*', spin_id2='@H*', ave_dist=1.02 * 1e-10)
interatom.unit_vectors()


You can start relax, and see the help information this way:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">relax
help(interatom.define)
help(interatom.set_dist)
help(interatom.unit_vectors)
help(value.set)
</pre></blockquote><pre style="margin: 0em;">

Or go to the GUI, and in the top select:
user functions (a-m) -&gt; interatom -&gt; define


What you are looking for is this:
help(interatom.set_dist)

&quot;&quot;&quot;
Description

For many NMR interactions, the distance between the spin of interest
and another spin or atom must
be defined.  This information can be extracted from a 3D structure
but, in many cases, these
distances are not of interest.  For example the empirical or fixed
distance calculation of proton
positions in X-ray crystallographic structures will often not
correspond to the real interatomic
distances.

Another example is the magnetic dipole-dipole interaction which is
averaged over the interatomic
distance to the inverse third power.  In this case, the interatomic
distances from any 3D structural
file can be of no use for defining the interaction.  The average
distances must be explicitly
supplied.  This user function allows these distances to be set up.
The default measurement unit is
meter but this can be changed to Angstrom.  Alternatively the
distances can be read from a file
using other user functions in this class.
&quot;&quot;&quot;

I don't know if you are using the GUI, or a script file.
If you need inspiration to a script file, take a look here:

<a  rel="nofollow" href="http://www.nmr-relax.com/manual/d_Auvergne_protocol_script_mode_sample_script.html">http://www.nmr-relax.com/manual/d_Auvergne_protocol_script_mode_sample_script.html</a>

This is the section:
------
# Load the PDB file.
structure.read_pdb('1f3y.pdb', set_mol_name='Ap4Aase', read_model=3)

# Set up the 15N and 1H spins (both backbone and Trp indole sidechains).
structure.load_spins('@N', ave_pos=True)
structure.load_spins('@NE1', ave_pos=True)
structure.load_spins('@H', ave_pos=True)
structure.load_spins('@HE1', ave_pos=True)
spin.isotope('15N', spin_id='@N*')
spin.isotope('1H', spin_id='@H*')

# Set up the 15N spins (alternative to the structure-based approach).
#sequence.read(file='noe.500.out', dir=None, mol_name_col=1,
res_num_col=2, res_name_col=3, spin_num_col=4, spin_name_col=5)
#spin.element(element='N', spin_id='@N*')
#spin.isotope('15N', spin_id='@N*')

# Generate the 1H spins for the magnetic dipole-dipole relaxation
interaction (alternative to the structure-based approach).
sequence.attach_protons()
----

As you have no PDB file, you can re-use earlier output from relax or a
peak list instead.
Skip the, structure.read_pdb and structure.load_spins.

----
# Create the spins from a 5 column formatted file: First see help to
use in relax : help(sequence.read)
# As I recall, the output from a R1/R2 relaxation data contains files
in this format. Just re-use the file, as the use is only related to
create
# the spin container data structure in relax, where all spin-specific
information is then stored.
sequence.read(file='noe.500.out', dir=None, mol_name_col=1,
res_num_col=2, res_name_col=3, spin_num_col=4, spin_name_col=5)

# Or create the spins from a spectrum formatted : First see help to
use in relax : help(spectrum.read_spins)
# If you use format of, Sparky, XEasy, NMRView, NMRPipe seriesTab,
just provide the filename, and everything is sorted out by the
function.
spectrum.read_spins(file=&quot;peaks_list_max_standard.ser&quot;, dir=None)

# Set the isotope to N15 (instead of N14. :-) )
spin.isotope('15N', spin_id='@N*')

# Attach protons. help(sequence.attach_protons). I &quot;think&quot; this again
just creates the data structures. :-)
sequence.attach_protons()
---


###################


If you have any questions, please don't hesitate to write again.

If you need more help, consider writing a support request on the
homepage tracker.
- <a  rel="nofollow" href="https://gna.org/support/?group=relax">https://gna.org/support/?group=relax</a>

Add following information:
# Please attach a system info file
</pre><blockquote class="blockquote"><pre style="margin: 0em;">relax -i -t relax_i.txt
</pre></blockquote><pre style="margin: 0em;">

# Please write up, which buttons you pushed, or attach your script.
# Consider adding your data in &quot;sample&quot; format. Meaning that you
delete all confidential information from the files, and only have 1-2
residues left for testing.
# Sending all your data to me, which I will handle confidential. I
will then strip the files, and add them as &quot;sample&quot; format to the
tracker.

If you write such a support request, I will return with a script that
setup the analysis.

The benefits from such a support request is:
  - The information is available to all users, which can benefit
others in same situation.
  - The information can be tracked back.
  - The relax manual can be expanded, to help future users in same situation.


Good luck!

Best
Troels Emtekær Linnet
PhD student
Copenhagen University
SBiNLab, 3-0-41
Ole Maaloes Vej 5
2200 Copenhagen N
Tlf: +45 353-22083
Lync Tlf: +45 353-30195

2014-07-31 21:47 GMT+02:00 Ryan Lo &lt;rhl4vf@xxxxxxxxxxxx&gt;:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hello,

 I'm also a new user of Relax.  I have a perhaps silly question.

 I'm studying a protein without a structure, and have processed my R1 R2
relaxation data at 600 and 800 MHz using Relax. When I move to the
Model-free analysis portion, I've followed the manual, and have tried
changing the Protocol mode, as suggested:
 &quot;However if you are studying a system without a 3D structure,you can
execute each individual component of the analysis byclicking on the
“Change” button.&quot;

However, Relax throws an error, saying

Missing data.
The set up is incomplete.
Please check for the following missing information:
Interatomic data (for the dipole-dipole interaction)

Considering I don't have a PDB to read for the dipolar relaxation input, is
there a way I can continue? Thank you all very much for your time. I look
forward to hearing your response.

From,
Ryan
_______________________________________________
relax (<a  rel="nofollow" href="http://www.nmr-relax.com">http://www.nmr-relax.com</a>)

This is the relax-users mailing list
relax-users@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="https://mail.gna.org/listinfo/relax-users">https://mail.gna.org/listinfo/relax-users</a>
</pre></blockquote><pre style="margin: 0em;">


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00005" href="msg00005.html">Relax - model free without a structure/PDB?</a></strong>
<ul><li><em>From:</em> Ryan Lo</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Mon Aug 18 09:00:10 2014</div>  
</body>
</html>
