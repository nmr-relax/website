<?xml version="1.0" encoding="ascii"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>prompt.monte_carlo.Monte_carlo</title>
  <link rel="stylesheet" href="epydoc.css" type="text/css" />
  <script type="text/javascript" src="epydoc.js"></script>
  <!--Google analytics JS-->
  <script type="text/javascript">

    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-30096326-1']);
    _gaq.push(['_setDomainName', 'nmr-relax.com']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();

  </script>
</head>

<body bgcolor="white" text="black" link="blue" vlink="#204080"
      alink="#204080">
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            ><a class="navbar" target="_top" href="http://www.nmr-relax.com">relax</a></th>
          </tr></table></th>
  </tr>
</table>
<table width="100%" cellpadding="0" cellspacing="0">
  <tr valign="top">
    <td width="100%">
      <span class="breadcrumbs">
        <a href="prompt-module.html">Package&nbsp;prompt</a> ::
        <a href="prompt.monte_carlo-module.html">Module&nbsp;monte_carlo</a> ::
        Class&nbsp;Monte_carlo
      </span>
    </td>
    <td>
      <table cellpadding="0" cellspacing="0">
        <!-- hide/show private -->
        <tr><td align="right"><span class="options">[<a href="javascript:void(0);" class="privatelink"
    onclick="toggle_private();">hide&nbsp;private</a>]</span></td></tr>
        <tr><td align="right"><span class="options"
            >[<a href="frames.html" target="_top">frames</a
            >]&nbsp;|&nbsp;<a href="prompt.monte_carlo.Monte_carlo-class.html"
            target="_top">no&nbsp;frames</a>]</span></td></tr>
      </table>
    </td>
  </tr>
</table>
<!-- ==================== CLASS DESCRIPTION ==================== -->
<h1 class="epydoc">Class Monte_carlo</h1><p class="nomargin-top"><span class="codelink"><a href="prompt.monte_carlo-pysrc.html#Monte_carlo">source&nbsp;code</a></span></p>
<!-- ==================== INSTANCE METHODS ==================== -->
<a name="section-InstanceMethods"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Instance Methods</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-InstanceMethods"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="__init__"></a><span class="summary-sig-name">__init__</span>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">relax</span>)</span></td>
          <td align="right" valign="top">
            <span class="codelink"><a href="prompt.monte_carlo-pysrc.html#Monte_carlo.__init__">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="prompt.monte_carlo.Monte_carlo-class.html#create_data" class="summary-sig-name">create_data</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">run</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">method</span>=<span class="summary-sig-default"><code class="variable-quote">'</code><code class="variable-string">back_calc</code><code class="variable-quote">'</code></span>)</span><br />
      Function for creating simulation data.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="prompt.monte_carlo-pysrc.html#Monte_carlo.create_data">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="prompt.monte_carlo.Monte_carlo-class.html#error_analysis" class="summary-sig-name">error_analysis</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">run</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">prune</span>=<span class="summary-sig-default">0.0</span>)</span><br />
      Function for calculating parameter errors from the Monte Carlo simulations.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="prompt.monte_carlo-pysrc.html#Monte_carlo.error_analysis">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="prompt.monte_carlo.Monte_carlo-class.html#initial_values" class="summary-sig-name">initial_values</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">run</span>=<span class="summary-sig-default">None</span>)</span><br />
      Function for setting the initial simulation parameter values.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="prompt.monte_carlo-pysrc.html#Monte_carlo.initial_values">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="prompt.monte_carlo.Monte_carlo-class.html#off" class="summary-sig-name">off</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">run</span>=<span class="summary-sig-default">None</span>)</span><br />
      Function for turning simulations off.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="prompt.monte_carlo-pysrc.html#Monte_carlo.off">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="prompt.monte_carlo.Monte_carlo-class.html#on" class="summary-sig-name">on</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">run</span>=<span class="summary-sig-default">None</span>)</span><br />
      Function for turning simulations on.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="prompt.monte_carlo-pysrc.html#Monte_carlo.on">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="prompt.monte_carlo.Monte_carlo-class.html#setup" class="summary-sig-name">setup</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">run</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">number</span>=<span class="summary-sig-default">500</span>)</span><br />
      Function for setting up Monte Carlo simulations.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="prompt.monte_carlo-pysrc.html#Monte_carlo.setup">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
</table>
<!-- ==================== CLASS VARIABLES ==================== -->
<a name="section-ClassVariables"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Class Variables</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-ClassVariables"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a href="prompt.monte_carlo.Monte_carlo-class.html#__description__" class="summary-name">__description__</a> = <code title="'''
        Monte Carlo Simulation Overview
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

        For proper error analysis using Monte Carlo simulations, a seq\
uence of function calls is
        required for running the various simulation components.  The s\
teps necessary for
..."><code class="variable-quote">'</code><code class="variable-string">\n        Monte Carlo Simulation Overview\n</code><code class="variable-ellipsis">...</code></code>
    </td>
  </tr>
</table>
<!-- ==================== METHOD DETAILS ==================== -->
<a name="section-MethodDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Method Details</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-MethodDetails"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
</table>
<a name="create_data"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">create_data</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">run</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">method</span>=<span class="sig-default"><code class="variable-quote">'</code><code class="variable-string">back_calc</code><code class="variable-quote">'</code></span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="prompt.monte_carlo-pysrc.html#Monte_carlo.create_data">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">
Function for creating simulation data.

Keyword Arguments
~~~~~~~~~~~~~~~~~

run:  The name of the run.

method:  The simulation method.


Description
~~~~~~~~~~~

The method argument can either be set to 'back_calc' or 'direct', the choice of which
determines the simulation type.  If the values or parameters of a run are calculated rather
than minimised, this option will have no effect, hence, 'back_calc' and 'direct' are
identical.

For error analysis, the method argument should be set to 'back_calc' which will result in
proper Monte Carlo simulations.  The data used for each simulation is back calculated from
the minimised model parameters and is randomised using Gaussian noise where the standard
deviation is from the original error set.  When the method is set to 'back_calc', this
function should only be called after the model or run is fully minimised.

The simulation type can be changed by setting the method argument to 'direct'.  This will
result in simulations which cannot be used in error analysis and which are no longer Monte
Carlo simulations.  However, these simulations are required for certain model selection
techniques (see the documentation for the model selection function for details), and can be
used for other purposes.  Rather than the data being back calculated from the fitted model
parameters, the data is generated by taking the original data and randomising using Gaussian
noise with the standard deviations set to the original error set.



Monte Carlo Simulation Overview
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

For proper error analysis using Monte Carlo simulations, a sequence of function calls is
required for running the various simulation components.  The steps necessary for
implementing Monte Carlo simulations are:

1.  The measured data set together with the corresponding error set should be loaded into
relax.

2.  Either minimisation is used to optimise the parameters of the chosen model, or a
calculation is run.

3.  To initialise and turn on Monte Carlo simulations, the number of simulations, n, needs
to be set.

4.  The simulation data needs to be created either by back calculation from the fully
minimised model parameters from step 2 or by direct calculation when values are calculated
rather than minimised.  The error set is used to randomise each simulation data set by
assuming Gaussian errors.  This creates a synthetic data set for each Monte Carlo
simulation.

5.  Prior to minimisation of the parameters of each simulation, initial parameter estimates
are required.  These are taken as the optimised model parameters.  An alternative is to use
a grid search for each simulation to generate initial estimates, however this is extremely
computationally expensive.  For the case where values are calculated rather than minimised,
this step should be skipped (although the results will be unaffected if this is accidentally
run).

6.  Each simulation requires minimisation or calculation.  The same techniques as used in
step 2, excluding the grid search when minimising, should be used for the simulations.

7.  Failed simulations are removed using the techniques of model elimination.

8.  The model parameter errors are calculated from the distribution of simulation
parameters.


Monte Carlo simulations can be turned on or off using functions within this class.  Once the
function for setting up simulations has been called, simulations will be turned on.  The
effect of having simulations turned on is that the functions used for minimisation (grid
search, minimise, etc) or calculation will only affect the simulation parameters and not the
model parameters.  By subsequently turning simulations off using the appropriate function,
the functions used in minimisation will affect the model parameters and not the simulation
parameters.


An example, for model-free analysis, which includes only the functions required for
implementing the above steps is:

relax&gt; grid_search('m1', inc=11)                                 # Step 2.
relax&gt; minimise('newton', run='m1')                              # Step 2.
relax&gt; monte_carlo.setup('m1', number=500)                       # Step 3.
relax&gt; monte_carlo.create_data('m1', method='back_calc')         # Step 4.
relax&gt; monte_carlo.initial_values('m1')                          # Step 5.
relax&gt; minimise('newton', run='m1')                              # Step 6.
relax&gt; eliminate('m1')                                           # Step 7.
relax&gt; monte_carlo.error_analysis('m1')                          # Step 8.

An example for reduced spectral density mapping is:

relax&gt; calc('600MHz')                                            # Step 2.
relax&gt; monte_carlo.setup('600MHz', number=500)                   # Step 3.
relax&gt; monte_carlo.create_data('600MHz', method='back_calc')     # Step 4.
relax&gt; calc('600MHz')                                            # Step 6.
relax&gt; monte_carlo.error_analysis('600MHz')                      # Step 8.

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="error_analysis"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">error_analysis</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">run</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">prune</span>=<span class="sig-default">0.0</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="prompt.monte_carlo-pysrc.html#Monte_carlo.error_analysis">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">
Function for calculating parameter errors from the Monte Carlo simulations.

Keyword Arguments
~~~~~~~~~~~~~~~~~

run:  The name of the run.

prune:  Legacy argument corresponding to 'trim' in Art Palmer's Modelfree program.


Description
~~~~~~~~~~~

Parameter errors are calculated as the standard deviation of the distribution of parameter
values.  This function should never be used if parameter values are obtained by minimisation
and the simulation data are generated using the method 'direct'.  The reason is because only
true Monte Carlo simulations can give the true parameter errors.

The prune argument is legacy code which corresponds to the 'trim' option in Art Palmer's
Modelfree program.  To remove failed simulations, the eliminate function should be used
prior to this function.  Eliminating the simulations specifically identifies and removes the
failed simulations whereas the prune argument will only, in a few cases, positively identify
failed simulations but only if severe parameter limits have been imposed.  Most failed
models will pass through the pruning process and hence cause a catastrophic increase in the
parameter errors.  If the argument must be used, the following must be taken into account.
If the values or parameters of a run are calculated rather than minimised, the prune
argument must be set to zero.  The value of this argument is proportional to the number of
simulations removed prior to error calculation.  If prune is set to 0.0, all simulations are
used for calculating errors, whereas a value of 1.0 excludes all data.  In almost all cases
prune must be set to zero, any value greater than zero will result in an underestimation of
the error values.  If a value is supplied, the lower and upper tails of the distribution of
chi-squared values will be excluded from the error calculation.



Monte Carlo Simulation Overview
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

For proper error analysis using Monte Carlo simulations, a sequence of function calls is
required for running the various simulation components.  The steps necessary for
implementing Monte Carlo simulations are:

1.  The measured data set together with the corresponding error set should be loaded into
relax.

2.  Either minimisation is used to optimise the parameters of the chosen model, or a
calculation is run.

3.  To initialise and turn on Monte Carlo simulations, the number of simulations, n, needs
to be set.

4.  The simulation data needs to be created either by back calculation from the fully
minimised model parameters from step 2 or by direct calculation when values are calculated
rather than minimised.  The error set is used to randomise each simulation data set by
assuming Gaussian errors.  This creates a synthetic data set for each Monte Carlo
simulation.

5.  Prior to minimisation of the parameters of each simulation, initial parameter estimates
are required.  These are taken as the optimised model parameters.  An alternative is to use
a grid search for each simulation to generate initial estimates, however this is extremely
computationally expensive.  For the case where values are calculated rather than minimised,
this step should be skipped (although the results will be unaffected if this is accidentally
run).

6.  Each simulation requires minimisation or calculation.  The same techniques as used in
step 2, excluding the grid search when minimising, should be used for the simulations.

7.  Failed simulations are removed using the techniques of model elimination.

8.  The model parameter errors are calculated from the distribution of simulation
parameters.


Monte Carlo simulations can be turned on or off using functions within this class.  Once the
function for setting up simulations has been called, simulations will be turned on.  The
effect of having simulations turned on is that the functions used for minimisation (grid
search, minimise, etc) or calculation will only affect the simulation parameters and not the
model parameters.  By subsequently turning simulations off using the appropriate function,
the functions used in minimisation will affect the model parameters and not the simulation
parameters.


An example, for model-free analysis, which includes only the functions required for
implementing the above steps is:

relax&gt; grid_search('m1', inc=11)                                 # Step 2.
relax&gt; minimise('newton', run='m1')                              # Step 2.
relax&gt; monte_carlo.setup('m1', number=500)                       # Step 3.
relax&gt; monte_carlo.create_data('m1', method='back_calc')         # Step 4.
relax&gt; monte_carlo.initial_values('m1')                          # Step 5.
relax&gt; minimise('newton', run='m1')                              # Step 6.
relax&gt; eliminate('m1')                                           # Step 7.
relax&gt; monte_carlo.error_analysis('m1')                          # Step 8.

An example for reduced spectral density mapping is:

relax&gt; calc('600MHz')                                            # Step 2.
relax&gt; monte_carlo.setup('600MHz', number=500)                   # Step 3.
relax&gt; monte_carlo.create_data('600MHz', method='back_calc')     # Step 4.
relax&gt; calc('600MHz')                                            # Step 6.
relax&gt; monte_carlo.error_analysis('600MHz')                      # Step 8.

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="initial_values"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">initial_values</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">run</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="prompt.monte_carlo-pysrc.html#Monte_carlo.initial_values">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">
Function for setting the initial simulation parameter values.

Keyword Arguments
~~~~~~~~~~~~~~~~~

run:  The name of the run.


Description
~~~~~~~~~~~

This function only effects runs where minimisation occurs and can therefore be skipped if
the values or parameters of a run are calculated rather than minimised.  However, if
accidentally run in this case, the results will be unaffected.  It should only be called
after the model or run is fully minimised.  Once called, the functions 'grid_search' and
'minimise' will only effect the simulations and not the model parameters.

The initial values of the parameters for each simulation is set to the minimised parameters
of the model.  A grid search can be undertaken for each simulation instead, although this
is computationally expensive and unnecessary.  The minimisation function should be executed
for a second time after running this function.



Monte Carlo Simulation Overview
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

For proper error analysis using Monte Carlo simulations, a sequence of function calls is
required for running the various simulation components.  The steps necessary for
implementing Monte Carlo simulations are:

1.  The measured data set together with the corresponding error set should be loaded into
relax.

2.  Either minimisation is used to optimise the parameters of the chosen model, or a
calculation is run.

3.  To initialise and turn on Monte Carlo simulations, the number of simulations, n, needs
to be set.

4.  The simulation data needs to be created either by back calculation from the fully
minimised model parameters from step 2 or by direct calculation when values are calculated
rather than minimised.  The error set is used to randomise each simulation data set by
assuming Gaussian errors.  This creates a synthetic data set for each Monte Carlo
simulation.

5.  Prior to minimisation of the parameters of each simulation, initial parameter estimates
are required.  These are taken as the optimised model parameters.  An alternative is to use
a grid search for each simulation to generate initial estimates, however this is extremely
computationally expensive.  For the case where values are calculated rather than minimised,
this step should be skipped (although the results will be unaffected if this is accidentally
run).

6.  Each simulation requires minimisation or calculation.  The same techniques as used in
step 2, excluding the grid search when minimising, should be used for the simulations.

7.  Failed simulations are removed using the techniques of model elimination.

8.  The model parameter errors are calculated from the distribution of simulation
parameters.


Monte Carlo simulations can be turned on or off using functions within this class.  Once the
function for setting up simulations has been called, simulations will be turned on.  The
effect of having simulations turned on is that the functions used for minimisation (grid
search, minimise, etc) or calculation will only affect the simulation parameters and not the
model parameters.  By subsequently turning simulations off using the appropriate function,
the functions used in minimisation will affect the model parameters and not the simulation
parameters.


An example, for model-free analysis, which includes only the functions required for
implementing the above steps is:

relax&gt; grid_search('m1', inc=11)                                 # Step 2.
relax&gt; minimise('newton', run='m1')                              # Step 2.
relax&gt; monte_carlo.setup('m1', number=500)                       # Step 3.
relax&gt; monte_carlo.create_data('m1', method='back_calc')         # Step 4.
relax&gt; monte_carlo.initial_values('m1')                          # Step 5.
relax&gt; minimise('newton', run='m1')                              # Step 6.
relax&gt; eliminate('m1')                                           # Step 7.
relax&gt; monte_carlo.error_analysis('m1')                          # Step 8.

An example for reduced spectral density mapping is:

relax&gt; calc('600MHz')                                            # Step 2.
relax&gt; monte_carlo.setup('600MHz', number=500)                   # Step 3.
relax&gt; monte_carlo.create_data('600MHz', method='back_calc')     # Step 4.
relax&gt; calc('600MHz')                                            # Step 6.
relax&gt; monte_carlo.error_analysis('600MHz')                      # Step 8.

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="off"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">off</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">run</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="prompt.monte_carlo-pysrc.html#Monte_carlo.off">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">
Function for turning simulations off.

Keyword Arguments
~~~~~~~~~~~~~~~~~

run:  The name of the run.



Monte Carlo Simulation Overview
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

For proper error analysis using Monte Carlo simulations, a sequence of function calls is
required for running the various simulation components.  The steps necessary for
implementing Monte Carlo simulations are:

1.  The measured data set together with the corresponding error set should be loaded into
relax.

2.  Either minimisation is used to optimise the parameters of the chosen model, or a
calculation is run.

3.  To initialise and turn on Monte Carlo simulations, the number of simulations, n, needs
to be set.

4.  The simulation data needs to be created either by back calculation from the fully
minimised model parameters from step 2 or by direct calculation when values are calculated
rather than minimised.  The error set is used to randomise each simulation data set by
assuming Gaussian errors.  This creates a synthetic data set for each Monte Carlo
simulation.

5.  Prior to minimisation of the parameters of each simulation, initial parameter estimates
are required.  These are taken as the optimised model parameters.  An alternative is to use
a grid search for each simulation to generate initial estimates, however this is extremely
computationally expensive.  For the case where values are calculated rather than minimised,
this step should be skipped (although the results will be unaffected if this is accidentally
run).

6.  Each simulation requires minimisation or calculation.  The same techniques as used in
step 2, excluding the grid search when minimising, should be used for the simulations.

7.  Failed simulations are removed using the techniques of model elimination.

8.  The model parameter errors are calculated from the distribution of simulation
parameters.


Monte Carlo simulations can be turned on or off using functions within this class.  Once the
function for setting up simulations has been called, simulations will be turned on.  The
effect of having simulations turned on is that the functions used for minimisation (grid
search, minimise, etc) or calculation will only affect the simulation parameters and not the
model parameters.  By subsequently turning simulations off using the appropriate function,
the functions used in minimisation will affect the model parameters and not the simulation
parameters.


An example, for model-free analysis, which includes only the functions required for
implementing the above steps is:

relax&gt; grid_search('m1', inc=11)                                 # Step 2.
relax&gt; minimise('newton', run='m1')                              # Step 2.
relax&gt; monte_carlo.setup('m1', number=500)                       # Step 3.
relax&gt; monte_carlo.create_data('m1', method='back_calc')         # Step 4.
relax&gt; monte_carlo.initial_values('m1')                          # Step 5.
relax&gt; minimise('newton', run='m1')                              # Step 6.
relax&gt; eliminate('m1')                                           # Step 7.
relax&gt; monte_carlo.error_analysis('m1')                          # Step 8.

An example for reduced spectral density mapping is:

relax&gt; calc('600MHz')                                            # Step 2.
relax&gt; monte_carlo.setup('600MHz', number=500)                   # Step 3.
relax&gt; monte_carlo.create_data('600MHz', method='back_calc')     # Step 4.
relax&gt; calc('600MHz')                                            # Step 6.
relax&gt; monte_carlo.error_analysis('600MHz')                      # Step 8.

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="on"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">on</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">run</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="prompt.monte_carlo-pysrc.html#Monte_carlo.on">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">
Function for turning simulations on.

Keyword Arguments
~~~~~~~~~~~~~~~~~

run:  The name of the run.



Monte Carlo Simulation Overview
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

For proper error analysis using Monte Carlo simulations, a sequence of function calls is
required for running the various simulation components.  The steps necessary for
implementing Monte Carlo simulations are:

1.  The measured data set together with the corresponding error set should be loaded into
relax.

2.  Either minimisation is used to optimise the parameters of the chosen model, or a
calculation is run.

3.  To initialise and turn on Monte Carlo simulations, the number of simulations, n, needs
to be set.

4.  The simulation data needs to be created either by back calculation from the fully
minimised model parameters from step 2 or by direct calculation when values are calculated
rather than minimised.  The error set is used to randomise each simulation data set by
assuming Gaussian errors.  This creates a synthetic data set for each Monte Carlo
simulation.

5.  Prior to minimisation of the parameters of each simulation, initial parameter estimates
are required.  These are taken as the optimised model parameters.  An alternative is to use
a grid search for each simulation to generate initial estimates, however this is extremely
computationally expensive.  For the case where values are calculated rather than minimised,
this step should be skipped (although the results will be unaffected if this is accidentally
run).

6.  Each simulation requires minimisation or calculation.  The same techniques as used in
step 2, excluding the grid search when minimising, should be used for the simulations.

7.  Failed simulations are removed using the techniques of model elimination.

8.  The model parameter errors are calculated from the distribution of simulation
parameters.


Monte Carlo simulations can be turned on or off using functions within this class.  Once the
function for setting up simulations has been called, simulations will be turned on.  The
effect of having simulations turned on is that the functions used for minimisation (grid
search, minimise, etc) or calculation will only affect the simulation parameters and not the
model parameters.  By subsequently turning simulations off using the appropriate function,
the functions used in minimisation will affect the model parameters and not the simulation
parameters.


An example, for model-free analysis, which includes only the functions required for
implementing the above steps is:

relax&gt; grid_search('m1', inc=11)                                 # Step 2.
relax&gt; minimise('newton', run='m1')                              # Step 2.
relax&gt; monte_carlo.setup('m1', number=500)                       # Step 3.
relax&gt; monte_carlo.create_data('m1', method='back_calc')         # Step 4.
relax&gt; monte_carlo.initial_values('m1')                          # Step 5.
relax&gt; minimise('newton', run='m1')                              # Step 6.
relax&gt; eliminate('m1')                                           # Step 7.
relax&gt; monte_carlo.error_analysis('m1')                          # Step 8.

An example for reduced spectral density mapping is:

relax&gt; calc('600MHz')                                            # Step 2.
relax&gt; monte_carlo.setup('600MHz', number=500)                   # Step 3.
relax&gt; monte_carlo.create_data('600MHz', method='back_calc')     # Step 4.
relax&gt; calc('600MHz')                                            # Step 6.
relax&gt; monte_carlo.error_analysis('600MHz')                      # Step 8.

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="setup"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">setup</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">run</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">number</span>=<span class="sig-default">500</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="prompt.monte_carlo-pysrc.html#Monte_carlo.setup">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">
Function for setting up Monte Carlo simulations.

Keyword Arguments
~~~~~~~~~~~~~~~~~

run:  The name of the run.

number:  The number of Monte Carlo simulations.


Description
~~~~~~~~~~~

This function must be called prior to any of the other Monte Carlo functions.  The effect is
that the number of simulations for the given run will be set and that simulations will be
turned on.



Monte Carlo Simulation Overview
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

For proper error analysis using Monte Carlo simulations, a sequence of function calls is
required for running the various simulation components.  The steps necessary for
implementing Monte Carlo simulations are:

1.  The measured data set together with the corresponding error set should be loaded into
relax.

2.  Either minimisation is used to optimise the parameters of the chosen model, or a
calculation is run.

3.  To initialise and turn on Monte Carlo simulations, the number of simulations, n, needs
to be set.

4.  The simulation data needs to be created either by back calculation from the fully
minimised model parameters from step 2 or by direct calculation when values are calculated
rather than minimised.  The error set is used to randomise each simulation data set by
assuming Gaussian errors.  This creates a synthetic data set for each Monte Carlo
simulation.

5.  Prior to minimisation of the parameters of each simulation, initial parameter estimates
are required.  These are taken as the optimised model parameters.  An alternative is to use
a grid search for each simulation to generate initial estimates, however this is extremely
computationally expensive.  For the case where values are calculated rather than minimised,
this step should be skipped (although the results will be unaffected if this is accidentally
run).

6.  Each simulation requires minimisation or calculation.  The same techniques as used in
step 2, excluding the grid search when minimising, should be used for the simulations.

7.  Failed simulations are removed using the techniques of model elimination.

8.  The model parameter errors are calculated from the distribution of simulation
parameters.


Monte Carlo simulations can be turned on or off using functions within this class.  Once the
function for setting up simulations has been called, simulations will be turned on.  The
effect of having simulations turned on is that the functions used for minimisation (grid
search, minimise, etc) or calculation will only affect the simulation parameters and not the
model parameters.  By subsequently turning simulations off using the appropriate function,
the functions used in minimisation will affect the model parameters and not the simulation
parameters.


An example, for model-free analysis, which includes only the functions required for
implementing the above steps is:

relax&gt; grid_search('m1', inc=11)                                 # Step 2.
relax&gt; minimise('newton', run='m1')                              # Step 2.
relax&gt; monte_carlo.setup('m1', number=500)                       # Step 3.
relax&gt; monte_carlo.create_data('m1', method='back_calc')         # Step 4.
relax&gt; monte_carlo.initial_values('m1')                          # Step 5.
relax&gt; minimise('newton', run='m1')                              # Step 6.
relax&gt; eliminate('m1')                                           # Step 7.
relax&gt; monte_carlo.error_analysis('m1')                          # Step 8.

An example for reduced spectral density mapping is:

relax&gt; calc('600MHz')                                            # Step 2.
relax&gt; monte_carlo.setup('600MHz', number=500)                   # Step 3.
relax&gt; monte_carlo.create_data('600MHz', method='back_calc')     # Step 4.
relax&gt; calc('600MHz')                                            # Step 6.
relax&gt; monte_carlo.error_analysis('600MHz')                      # Step 8.

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<br />
<!-- ==================== CLASS VARIABLE DETAILS ==================== -->
<a name="section-ClassVariableDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Class Variable Details</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-ClassVariableDetails"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
</table>
<a name="__description__"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <h3 class="epydoc">__description__</h3>
  
  <dl class="fields">
  </dl>
  <dl class="fields">
    <dt>Value:</dt>
      <dd><table><tr><td><pre class="variable">
<code class="variable-quote">'''</code><code class="variable-string"></code>
<code class="variable-string">        Monte Carlo Simulation Overview</code>
<code class="variable-string">        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</code>
<code class="variable-string"></code>
<code class="variable-string">        For proper error analysis using Monte Carlo simulations, a seq</code><span class="variable-linewrap"><img src="crarr.png" alt="\" /></span>
<code class="variable-string">uence of function calls is</code>
<code class="variable-string">        required for running the various simulation components.  The s</code><span class="variable-linewrap"><img src="crarr.png" alt="\" /></span>
<code class="variable-string">teps necessary for</code>
<code class="variable-ellipsis">...</code>
</pre></td></tr></table>
</dd>
  </dl>
</td></tr></table>
</div>
<br />
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            ><a class="navbar" target="_top" href="http://www.nmr-relax.com">relax</a></th>
          </tr></table></th>
  </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%%">
  <tr>
    <td align="left" class="footer">
    Generated by Epydoc 3.0.1 on Wed Apr 10 13:58:29 2013
    </td>
    <td align="right" class="footer">
      <a target="mainFrame" href="http://epydoc.sourceforge.net"
        >http://epydoc.sourceforge.net</a>
    </td>
  </tr>
</table>

<script type="text/javascript">
  <!--
  // Private objects are initially displayed (because if
  // javascript is turned off then we want them to be
  // visible); but by default, we want to hide them.  So hide
  // them unless we have a cookie that says to show them.
  checkCookie();
  // -->
</script>
</body>
</html>
