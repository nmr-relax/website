<!-- MHonArc v2.6.18 -->
<!--X-Subject: r27804 &#45; /trunk/pipe_control/pcs.py -->
<!--X-From-R13: rqjneqNaze&#45;erynk.pbz -->
<!--X-Date: Tue, 10 Mar 2015 18:36:55 +0100 -->
<!--X-Message-Id: E1YVO5P&#45;00061I&#45;QD@subversion.gna.org -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>r27804 - /trunk/pipe_control/pcs.py -- March 10, 2015 - 18:36</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />r27804 - /trunk/pipe_control/pcs.py</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00082" class="tabs">Index by Date</a> | <a href="threads.html#00082" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00081.html">Date Prev</a>] [<a href="msg00083.html">Date Next</a>] [<a href="msg00081.html">Thread Prev</a>] [<a href="msg00083.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: relax-commits@xxxxxxx</li>
<li class="menuitem">
<em>Date</em>: Tue, 10 Mar 2015 17:36:55 -0000</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00082.html">E1YVO5P-00061I-QD@subversion.gna.org</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>edward</strong> on March 10, 2015 - 18:36:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Author: bugman
Date: Tue Mar 10 18:36:55 2015
New Revision: 27804

URL: <a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax?rev=27804&amp;view=rev">http://svn.gna.org/viewcvs/relax?rev=27804&amp;view=rev</a>
Log:
Improvements for the pcs.structural_noise user function.

The check for the presence of PCS data for points to skip now includes 
checking for PCS values of
None.  And the output Grace file now also includes the spin ID string as a 
string or comment value
which can be displayed in the plot when desired.


Modified:
    trunk/pipe_control/pcs.py

Modified: trunk/pipe_control/pcs.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/trunk/pipe_control/pcs.py?rev=27804&amp;r1=27803&amp;r2=27804&amp;view=diff">http://svn.gna.org/viewcvs/relax/trunk/pipe_control/pcs.py?rev=27804&amp;r1=27803&amp;r2=27804&amp;view=diff</a>
==============================================================================
--- trunk/pipe_control/pcs.py   (original)
+++ trunk/pipe_control/pcs.py   Tue Mar 10 18:36:55 2015
@@ -1147,7 +1147,7 @@
         align_index = 0
         for id in align_ids:
             # No PCS value, so skip.
-            if id not in spin.pcs:
+            if id not in spin.pcs or spin.pcs[id] == None:
                 align_index += 1
                 continue
 
@@ -1166,7 +1166,7 @@
             spin.pcs_err[id] = sqrt(spin.pcs_err[id]**2 + sd**2)
 
             # Store the data for the Grace plot.
-            grace_data[align_index].append([orig_r, sd])
+            grace_data[align_index].append([orig_r, sd, spin_id])
 
             # Increment the alignment index.
             align_index += 1



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Tue Mar 10 19:00:02 2015</div>  
</body>
</html>
