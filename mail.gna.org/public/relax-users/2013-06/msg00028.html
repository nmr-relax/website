<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: Time of running, Model selection and global/cluster analysis for	relaxation dispersion analysis -->
<!--X-From-R13: "Sqjneq q'Ohiretar" <rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Thu, 13 Jun 2013 18:16:42 +0200 -->
<!--X-Message-Id: CAED9pY&#45;wXQ4VkmGb8nE0xFGnUEmk2FQrpv1aGz_Ld633Jx1M8Q@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: CA+CBx2Oxj4Jv5gYiG0H1kWcnNhSaTxa1UHXOSDyUb0ccFK2eqg@mail.gmail.com -->
<!--X-Reference: CAED9pY9pNMwovqvZV7eMAmbZ1H56nfdteoYvxBPL8ji_HmXUeA@mail.gmail.com -->
<!--X-Reference: CA+CBx2NSfGR_k9a2DLsQASZ3CoU&#45;rPasVKRX7jd=40BGJtnp6Q@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: Time of running, Model selection and global/cluster analysis for	relaxation dispersion analysis -- June 13, 2013 - 18:16</title>
<link rel="stylesheet" type="text/css" href="/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="https://gna.org/images/gna.theme/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: Time of running, Model selection and global/cluster analysis for	relaxation dispersion analysis</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00028" class="tabs">Index by Date</a> | <a href="threads.html#00028" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00027.html">Date Prev</a>] [<a href="msg00029.html">Date Next</a>] [<a href="msg00026.html">Thread Prev</a>] [<a href="msg00021.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Thu, 13 Jun 2013 18:16:07 +0200</li>
<li class="menuitem">
<em>Cc</em>: &quot;relax-users@xxxxxxx&quot; &lt;relax-users@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;	h=mime-version:sender:in-reply-to:references:date	:x-google-sender-auth:message-id:subject:from:to:cc:content-type	:content-transfer-encoding;	bh=pP5noGcS6lW2bQEArhbEW2V6WYI6jmwLqbt+DOxM8CA=;	b=B+J2HpKEnhqlXCf5tH9dKGL1oza/lS2PRG2W80SH0DivV2ZT4PBdU5x6+oku7jrTPy	DOafMjwr9jWUlX5e/lpJc1r5Meom0aSDotf49twyo+SqV9jE+nOqXFyMWPp1cC/K6If/	v8YjcOFpAza5sDoZ/v9yqjdUYXVTO0XsbvFsc9hu6FDNEUfHlhOuLiLGR1nQIKqQlSl5	pjek43Da7YJXqWIwtPikAPMjy1quJG/xeagN+QGYVHHT+DFub52GpJ43I7U8uZ4rMoBf	gXNpP4FDLs+9F9EPxG0rz/v7adpjeXocvF7u2qet2GokiOkFtoxmL3pTNn3Mn3YNVA1L	fkFw==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00028.html">CAED9pY-wXQ4VkmGb8nE0xFGnUEmk2FQrpv1aGz_Ld633Jx1M8Q@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;CA+CBx2Oxj4Jv5gYiG0H1kWcnNhSaTxa1UHXOSDyUb0ccFK2eqg@xxxxxxxxxxxxxx&gt;	&lt;CAED9pY9pNMwovqvZV7eMAmbZ1H56nfdteoYvxBPL8ji_HmXUeA@xxxxxxxxxxxxxx&gt;	&lt;CA+CBx2NSfGR_k9a2DLsQASZ3CoU-rPasVKRX7jd=40BGJtnp6Q@xxxxxxxxxxxxxx&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on June 13, 2013 - 18:16:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Hi,

You can find this information using the GUI, programmatically or by
reading the XML results file.  The relax data store contains a special
hierarchical data structure for holding information about your spin
systems.  This is the molecule, residue, and spin data structure which
you will see when:

- Looking at the contents of the spin viewer window in the GUI,
- Opening a relax results or state XML file in a text editor,
- Looking at the cdp.mol[i].res[j].spin[k] data structure.

In each of these cases, look for the 'model' variable and its value
will be the selected model.  Programmatically you would use, for
example, the following relax code:

from pipe_control.mol_res_spin import spin_loop

state.load('my_state.bz2')
for spin, spin_id in spin_loop(return_id=True, skip_desel=True):
    print(&quot;Spin '%s', model '%s'&quot; % (spin_id, spin.model))

You will then have a printed out list of all models per spin (though
without clustering information).  I hope this helps.

Regards,

Edward



On 13 June 2013 17:59, Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi Edward.

It certainly helped setting Monte Carlo simulations to 3, for the
auto-analysis.
Now I am down to half/full hour for all methods. :-)
Great!

But could you help me pin pointing how to find which model is selected?
I can't find any button in the GUI. Is it there?

I can do it by grep in the logfile:
grep -B 6 &quot;The model from the data&quot; LOGFILE.txt | head -n 20

The spin cluster ['#protein:3@N'].
# Data pipe    Num_params_(k)    Num_data_sets_(n)    Chi2         Criterion
No Rex         1                 14                   105.22792    107.22792
LM63           3                 14                   6.86584      12.86584
CR72           4                 14                   6.63718      14.63718
IT99           4                 14                   6.62371      14.62371
The model from the data pipe 'LM63' has been selected.
--
The spin cluster ['#protein:5@N'].
# Data pipe    Num_params_(k)    Num_data_sets_(n)    Chi2         Criterion
No Rex         1                 14                   102.30715    104.30715
LM63           3                 14                   2.28925      8.28925
CR72           4                 14                   2.28845      10.28845
IT99           4                 14                   2.41391      10.41391
...


But what if you run relax without the flag: -l LOGFILE.txt

???

Does the cdp class contain the information?

Best
Troels



Best
Troels


Troels Emtekær Linnet


2013/6/11 Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt;
</pre><blockquote class="blockquote"><pre style="margin: 0em;">

Hi,

I'll answer below:


</pre><blockquote class="blockquote"><pre style="margin: 0em;">I performed 'cpmg fixed' a  relaxation dispersion analysis, for dataset
with
68 residues.
Having 22 intensity files, with 4 triple replications.

I took from 17 pm to 13 pm following day, app 20 hours.
The analysed models were: R2eff', 'No Rex','LM63','CR72'

Is 20 hours for an analysis expected?
, or should I look for some errors somewhere?
</pre></blockquote><pre style="margin: 0em;">

This depends.  By default relax uses much higher precision
optimisation than most other softwares.  This is based on the
philosophy that more accurate results are worth the wait, especially
considering that this time is relatively small in comparison to the
measurement and processing time (and adding the inevitable
re-measurements).  In addition, lots of Monte Carlo simulations are
used for really accurately determining your parameter errors.  For
comparison, note that a full a Lipari and Szabo model-free analysis
can take between 1 day and 2 weeks to complete.

For initial analyses where errors are not so important, the number of
simulations can be dropped massively to speed things up.  This can
also be done for students.  The result is that the error estimates of
the parameters are horrible but, in some cases, excluding publication,
that is not such a problem.  This will not affect model selection
either.  Therefore if errors are not important for specific cases,
then set the number of MC sims to 3.  Then watch how much quicker
things run.

Oh, if this is for students using the GUI, you could hack a special
version of relax to have the auto-analysis perform much lower
precision optimisation.  It should be possible to make things run very
quick for them.  If they are using scripting, but still the relaxation
dispersion auto-analysis, then no hacking is necessary.  The function
tolerance and maximum number of iterations can be set using special
tricks ;)


</pre><blockquote class="blockquote"><pre style="margin: 0em;">Relax made a model selection.
model_selection(method='AIC', modsel_pipe='final', bundle=None,
pipes=['No
Rex', 'LM63', 'CR72'])

How can I inspect which model is then chosen?
</pre></blockquote><pre style="margin: 0em;">

Well, the hard way would be to open the relax saved state in the
'final' directory.  Or to look at the logs.  That information is
unfortunately not presented in a text file.  How would you suggest
that such information is presented?


</pre><blockquote class="blockquote"><pre style="margin: 0em;">Then I would like to make a global fit / cluster analysis.
Is this implemented yet?
</pre></blockquote><pre style="margin: 0em;">

Yes.  You need to use the relax_disp.cluster user function.


</pre><blockquote class="blockquote"><pre style="margin: 0em;">And should I use the:
User functions (n-z) -&gt; relax_disp -&gt; cluster ?
</pre></blockquote><pre style="margin: 0em;">

I am still thinking about how to bring this into the relaxation
dispersion auto-analysis GUI element without requiring me to write a
lot of code!


</pre><blockquote class="blockquote"><pre style="margin: 0em;">By the way.
The sherekhan input function is super great!
</pre></blockquote><pre style="margin: 0em;">

:)

The CPMGFit and NESSY input user functions will hopefully also be of
use to some people.  However if you start adding some new models to
relax, then relax will soon have all of the capabilities that these
these programs possess.  And if Paul Schanda's numerical integration
Python code is merged into relax, then relax will soon surpass all of
these softwares.


</pre><blockquote class="blockquote"><pre style="margin: 0em;">Thanks a lot :-)
This is super great
</pre></blockquote><pre style="margin: 0em;">

You're welcome.  I'm hoping that you can help to make this even greater ;)

Regards,

Edward
</pre></blockquote><pre style="margin: 0em;">


</pre></blockquote><pre style="margin: 0em;">


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00017" href="msg00017.html">Time of running, Model selection and global/cluster analysis for	relaxation dispersion analysis</a></strong>
<ul><li><em>From:</em> Troels Emtekær Linnet</li></ul></li>
<li><strong><a name="00019" href="msg00019.html">Re: Time of running, Model selection and global/cluster analysis for	relaxation dispersion analysis</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00026" href="msg00026.html">Re: Time of running, Model selection and global/cluster analysis for	relaxation dispersion analysis</a></strong>
<ul><li><em>From:</em> Troels Emtekær Linnet</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer">You are on the <a href="http://gna.org">Gna!</a> mail server.</div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Fri Jun 14 08:40:06 2013</div>  
</body>
</html>
