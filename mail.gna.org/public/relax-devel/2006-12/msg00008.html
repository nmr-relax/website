<!-- MHonArc v2.6.10 -->
<!--X-Subject:  -->
<!--X-From-R13: "tnel gubzcfba" <tnelgNozo.yrrqf.np.hx> -->
<!--X-Date: Sat, 02 Dec 2006 22:40:13 +0100 -->
<!--X-Message-Id: f001463a0612021339w1019e72fp40974aab9794889b@mail.gmail.com -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>[no subject] -- December 02, 2006 - 22:40</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />[no subject]</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00008" class="tabs">Index by Date</a> | <a href="threads.html#00008" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00007.html">Date Prev</a>] [<a href="msg00010.html">Date Next</a>] [<a href="msg00009.html">Thread Prev</a>] [<a href="msg00011.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: relax-devel@xxxxxxx, edward.dauvergne@xxxxxxxxx</li>
<li class="menuitem">
<em>Date</em>: Sat, 2 Dec 2006 21:39:23 +0000</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00008.html">f001463a0612021339w1019e72fp40974aab9794889b@mail.gmail.com</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>gary thompson</strong> on December 02, 2006 - 22:40:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<blockquote style="border-left: 1px solid rgb(204, 204, 204); margin: 0pt 0pt 0pt 0.8ex; padding-left: 1ex;" class="gmail_quote"><div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on December 02, 2006 - 15:38:
</div><div class="msgdata">


<blockquote class="blockquote"><pre style="margin: 0em;">&gt;&gt; &gt; I'll look into this once I<br>&gt;&gt; &gt; attempt to migrate the system/function tests to use parts or all of<br>&gt;&gt; &gt; the unittest framework.  At the moment though, we could simply have
<br>&gt;&gt; &gt; relax run the unit tests followed by the system/function tests (or the<br>&gt;&gt; &gt; other way around).<br>&gt;&gt;<br>&gt;&gt;<br>&gt;&gt; The intention was to have a functional test that ran the unit_tester ;-)
<br>&gt;<br>&gt;<br>&gt; It could be implemented that way.  It may be better to keep a<br>&gt; separation between the different types of test though, especially<br>&gt; considering how big the unit tests may become.  Then relax can present
<br>&gt; a report of each category, and only pass if all categories pass.  It<br>&gt; will allow more categories of tests to be added separately - for<br>&gt; example installation tests, compilation tests, etc.<br>&gt;<br>
&gt;<br>My thoughts are that unit tests should be a category in the test suite.<br>Certainly running relax with a command line flag such as -test or<br>-test_suite should run all the tests available as a default (because<br>
this is what the user generally wants). If we need the ability to test<br>sub sets of tests then we  need some extra options (philosophically we<br>should be aiming for users testers and in fact everyone to run all the<br>
tests by default, we catch more bugs that way...)<br></pre></blockquote><pre style="margin: 0em;"><br>As in my previous post, I would say that both the unit tests and the<br>system/functional tests would be classified as two categories of tests
<br>at the highest level.  For the running of different categories of<br>tests separately, which would be useful for when you are coding, what<br>would be the best way to do this?  What type of granularity should<br>this be implemented to?  For example, could the unit tests be run by
<br>themselves using say the --unit-test flag?  Or should the running of<br>individual categories of tests be lower level (maybe even individual<br>tests)?</pre></div></blockquote><div><br>most probaly you would want a system_test and unit_test flag if the unit tests get too cumbersome;-) running at lower levels for the unit tests is something that can be done from the command line with the present setup ;-) 
<br></div><br><blockquote style="border-left: 1px solid rgb(204, 204, 204); margin: 0pt 0pt 0pt 0.8ex; padding-left: 1ex;" class="gmail_quote"><div class="msgdata"><blockquote class="blockquote"><pre style="margin: 0em;">
&gt;&gt; Two other questions<br>&gt;&gt;<br>&gt;&gt; 1. do you use the '_'function_name convention for private functions<br>&gt;<br>&gt;<br>&gt; Currently relax doesn't have private functions - I don't see a need<br>&gt; for this,
</pre><br>
<pre style="margin: 0em;">Actually I see quite a strong impetus for private methods/classes in<br>code that is used/developed by more than one person.  In general a class<br>should define a public interface (bits shat shouldn't go away) and
<br>private methods (implimentation details)...<br></pre></blockquote><pre style="margin: 0em;"><br>Although I don't have a problem with having private names in relax, I<br>don't believe that these are very important within the Python
<br>language.  This can be seen by grepping the Python source code.  For<br>example if I go into my Python installation directory<br>(/usr/lib/python2.4), I get the following method/function counts:</pre><br>
<pre style="margin: 0em;">[edward@p2800 python2.4]$ grep -rIP &quot;def __[a-z]*__\(&quot; * | wc -l<br>4495<br>[edward@p2800 python2.4]$ grep -rIP &quot;def __[a-z]*\(&quot; * | wc -l<br>80<br>[edward@p2800 python2.4]$ grep -rIP &quot;def [a-z]*\(&quot; * | wc -l
<br>7674</pre><br>
<pre style="margin: 0em;">If just the site-packages are grepped:</pre><br>
<pre style="margin: 0em;">[edward@p2800 site-packages]$ grep -rIP &quot;def __[a-z]*__\(&quot; * | wc -l<br>2244<br>[edward@p2800 site-packages]$ grep -rIP &quot;def __[a-z]*\(&quot; * | wc -l<br>45<br>[edward@p2800 site-packages]$ grep -rIP &quot;def [a-z]*\(&quot; * | wc -l
<br>3119</pre><br>
<pre style="margin: 0em;">These numbers are very telling.  Also, I don't think we need to<br>enforce the fact that certain methods of the public interface<br>shouldn't be overwritten.  If a user does this, then that is their
<br>problem.  For example after importing the 'math' module, I can without<br>problem do the following:</pre><br>
<blockquote class="blockquote"><blockquote class="blockquote"><blockquote class="blockquote"><tt>math.sin = 1
</tt></blockquote></blockquote></blockquote></div></blockquote><div><br>Its not so much a matter of enforecement as letting some one know that a method is implementation and not something they should depend on existing forever 
<br></div><br><blockquote style="border-left: 1px solid rgb(204, 204, 204); margin: 0pt 0pt 0pt 0.8ex; padding-left: 1ex;" class="gmail_quote"><div class="msgdata"><blockquote class="blockquote"><pre style="margin: 0em;">
&gt; except of course for the eventual conversion of 'float.py'<br>&gt; into a separate Python module.  I have used the 'self._xxxx()' style<br>&gt; only in the automatic diffusion tensor object creation code and this<br>
&gt; only hides these functions by a search statement within the<br>&gt; 'self.__repr__()' methods of the relax data structure<br>&gt; 'self.relax.data'.  I know Python fudges private functions using the<br>&gt; 'self.__xxxx()' notation, but I have a feeling site-packages do this
<br>&gt; differently, not through private objects but by other methods.  I<br>&gt; could be wrong though.<br>&gt;<br>Actually I am pretty sure you are right. Though if you ask guido he<br>would tell you that the __ thing isn't a fudge it is just a marker
<br>(almost all public/private systems can be compromised by a determined<br>programmer so why bother with anything other than information?)</pre><br>
<pre style="margin: 0em;">Further points. My intention wa to rename all the system tests so they<br>were of the form test_&lt;function&gt;.py so that we can use the unit test<br>automatic discovery and then rewrite main.py
 to use a TestRunner and<br>TestCase setup (headings etc would then come from instance variables) I<br>can try and create something that does what is already in parallel using<br>the new infrastructure (maybe we should leave the test suite branch up
<br>for the moment?)<br></pre></blockquote><pre style="margin: 0em;"><br>The first thing that needs to be done is making 'relax --test-suite'<br>work.  I would then suggest the following structure of the system<br>tests.  In 'test_suite/system_tests' create the directories
<br>'model_free', etc.  Then 'model_free.py' could be split (by svn cp)<br>into multiple 'test_&lt;category&gt;.py' files.  For example<br>'test_suite/system_tests/model_free/test_optimisation.py'.  This could<br>be done for all the system tests.
</pre></div></blockquote><div><br>that sounds fine <br></div><br><blockquote style="border-left: 1px solid rgb(204, 204, 204); margin: 0pt 0pt 0pt 0.8ex; padding-left: 1ex;" class="gmail_quote"><div class="msgdata"><pre style="margin: 0em;">
As for headings, these could be incorporated into one large printout<br>when a failure occurs. </pre></div></blockquote><div><br><br>yep, that there in the unit test framework already. The first line of the python doc is taken as what we would here call the label by the pyunit&nbsp; framework
<br></div><br><blockquote style="border-left: 1px solid rgb(204, 204, 204); margin: 0pt 0pt 0pt 0.8ex; padding-left: 1ex;" class="gmail_quote"><div class="msgdata"><pre style="margin: 0em;"> I.e. for debugging merge the heading, the
<br>relax print outs, and the traceback messages into a single string<br>which is written to stderr.  If you would like to do the work on the<br>unit tests and the system/functional tests, this can occur directly in<br>the 
1.3 line.  As long a relax runs, it shouldn't matter what state<br>the test suite is in in the unstable 1.3 line.</pre><br>
<pre style="margin: 0em;">Edward</pre></div></blockquote>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Thu Dec 21 10:40:36 2006</div>  
</body>
</html>
