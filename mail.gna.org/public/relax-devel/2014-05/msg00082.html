<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [bug #22008] Interpolation with relax.plot_disp_curves, creates un&#45;even number of CPMG blocks. -->
<!--X-From-R13: "Sqjneq q'Ohiretar" &#60;rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Sun, 04 May 2014 15:22:06 +0200 -->
<!--X-Message-Id: CAED9pY&#45;As0ej_=FzfHHuTfxb951fTH&#45;p_Q6&#45;&#45;wOgd53qu1ehPA@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 20140503&#45;175750.sv20529.34733@gna.org -->
<!--X-Reference: 20140503&#45;203227.sv20529.1421@gna.org -->
<!--X-Reference: 20140504&#45;090602.sv2782.44784@gna.org -->
<!--X-Reference: CA+CBx2OpCLsBWq&#45;PF=DNLYZ0XxcrnX87_5jVWQa3PJ010RCwsg@mail.gmail.com -->
<!--X-Reference: CAED9pY8=bntsV1ZiG51OW=unZLdmwKdeeuoG&#45;jQzfJrKwxGcaQ@mail.gmail.com -->
<!--X-Reference: CAED9pY9qWwAKpquJCemP6itfVePfY32icgbqH4TQG6ySca2Eyg@mail.gmail.com -->
<!--X-Reference: CAED9pY8Jcqj7aBpjDVUCj0ZnfrXM8er5XMDaOn_0qbrrhKmh&#45;A@mail.gmail.com -->
<!--X-Reference: CAED9pY8O_+KSQrJgWeKeodzc6iK9hcpyPwzyJ6rPWooO&#45;QerFQ@mail.gmail.com -->
<!--X-Reference: CA+CBx2NpvNvj6uM&#45;eby=xAxsq6x_k7cKjdhBTR7rNXi&#45;iuwYZA@mail.gmail.com -->
<!--X-Reference: CA+CBx2NSkvk9=R1VoQQHo1C9zy23&#45;YzhhPmrrUfb2Qj5xMw22Q@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [bug #22008] Interpolation with relax.plot_disp_curves, creates un-even number of CPMG blocks. -- May 04, 2014 - 15:22</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: [bug #22008] Interpolation with relax.plot_disp_curves, creates un-even number of CPMG blocks.</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00082" class="tabs">Index by Date</a> | <a href="threads.html#00082" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00081.html">Date Prev</a>] [<a href="msg00083.html">Date Next</a>] [<a href="msg00078.html">Thread Prev</a>] [<a href="msg00083.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Sun, 4 May 2014 15:21:14 +0200</li>
<li class="menuitem">
<em>Cc</em>: Edward d Auvergne &lt;NO-REPLY.INVALID-ADDRESS@xxxxxxx&gt;, &quot;relax-devel@xxxxxxx&quot; &lt;relax-devel@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113; h=mime-version:sender:in-reply-to:references:date:message-id:subject :from:to:cc:content-type:content-transfer-encoding; bh=Ewid3SFIbnWJMFo78N9AQQO1Dszr6HD9uT+GJTXEOEg=; b=woA/y9SflomOYp11k+jxI04KSymDqD0E1TfGYSWH2UB/ljNsAVaV/9bhU0xc+flqTU 1gTGegWUWirpFoIyo8Il1Usn97nlG0i4P/brtpLdV+qowExbW2fM/cmi9ANTcgpjaj9z Fngfq0L8yQAg1C6pzVDAYNef3BdIpLwYtAFRncy180xnhfG58YfWWbJ3UkC49Tfpchyz ApBaWGUXvnrmchFb4/PrAUj0oZwHPt6ejwwST8FZCrE7K6p3rKNf+1lJGo9W2zi2ZBH4 BcI64QbNF3wpqK3I8nm4Ki0UBpG8oxECR/VkWkioxweRP8LBfulkgylQwIsiNy3QKZre ISOA==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;CAED9pY-As0ej_=FzfHHuTfxb951fTH-p_Q6--wOgd53qu1ehPA@mail.gmail.com&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;<a href="msg00064.html">20140503-175750.sv20529.34733@gna.org</a>&gt; &lt;<a href="msg00067.html">20140503-203227.sv20529.1421@gna.org</a>&gt; &lt;<a href="msg00071.html">20140504-090602.sv2782.44784@gna.org</a>&gt; &lt;CA+CBx2OpCLsBWq-PF=DNLYZ0XxcrnX87_5jVWQa3PJ010RCwsg@mail.gmail.com&gt; &lt;CAED9pY8=bntsV1ZiG51OW=unZLdmwKdeeuoG-jQzfJrKwxGcaQ@mail.gmail.com&gt; &lt;<a href="msg00074.html">CAED9pY9qWwAKpquJCemP6itfVePfY32icgbqH4TQG6ySca2Eyg@mail.gmail.com</a>&gt; &lt;<a href="msg00075.html">CAED9pY8Jcqj7aBpjDVUCj0ZnfrXM8er5XMDaOn_0qbrrhKmh-A@mail.gmail.com</a>&gt; &lt;<a href="msg00076.html">CAED9pY8O_+KSQrJgWeKeodzc6iK9hcpyPwzyJ6rPWooO-QerFQ@mail.gmail.com</a>&gt; &lt;CA+CBx2NpvNvj6uM-eby=xAxsq6x_k7cKjdhBTR7rNXi-iuwYZA@mail.gmail.com&gt; &lt;CA+CBx2NSkvk9=R1VoQQHo1C9zy23-YzhhPmrrUfb2Qj5xMw22Q@mail.gmail.com&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on May 04, 2014 - 15:22:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Hmmm.  I wonder what happened there.  I've now renamed the user
function (<a  rel="nofollow" href="http://article.gmane.org/gmane.science.nmr.relax.scm/20684">http://article.gmane.org/gmane.science.nmr.relax.scm/20684</a>).
 This will nevertheless be useful if we wish to advance the numerical
models in relax.  Do you think you should revert r22937 then?

<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/trunk/specific_analyses/relax_disp/data.py?r1=22937&amp;r2=22936&amp;pathrev=22937">http://svn.gna.org/viewcvs/relax/trunk/specific_analyses/relax_disp/data.py?r1=22937&amp;r2=22936&amp;pathrev=22937</a>

Regards,

Edward


On 4 May 2014 12:48, Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hm.

Now I cant reproduce the bug?

An odd number of NCYC, gives fine interpolated graphs.

Hm...

2014-05-04 12:24 GMT+02:00 Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxxxxxx&gt;:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Sound good with a flag, default to True.

That means less code interruption. :-)


Best
Troels

2014-05-04 12:12 GMT+02:00 Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt;:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">I might try implementing this user function change, and store the
cdp.ncyc_even flag.  Then you could use it for the interpolation.

Regards,

Edward


On 4 May 2014 11:59, Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">The defaults for a relax_disp.cpmg_setup could be:

relax_disp.cpmg_setup(spectrum_id=None, cpmg_frq=None, ncyc_even=True)

This can then be expanded in the future for special CPMG dispersion
experiment types (CW decoupling vs. pi pulses, etc.) where the numeric
model would require changes.

Regards,

Edward



On 4 May 2014 11:53, Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Sorry, that was a bad typo, it should be Flemming Hansen's dispersion
pulse sequence!

On 4 May 2014 11:52, Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi,

It depends on the pulse sequence.  Here is one I found written by
Flemming Hanser where you can use odd numbers:

<a  rel="nofollow" href="http://nmrwiki.org/psdb/kaylab/vnmrsys/psglib/CaHD_cpmg_GLY_dfh_600_v1.c">http://nmrwiki.org/psdb/kaylab/vnmrsys/psglib/CaHD_cpmg_GLY_dfh_600_v1.c</a>

Look for the comment:

&quot;ncyc can be either even or odd :)&quot;

Such sequences are probably in the minority though.  Anyway, maybe we
need a new user function.  It would be good to have a series of user
functions for specifying the experimental information.  We already
have that with:

spectrometer.frequency
relax_disp.exp_type
relax_disp.relax_time
relax_disp.cpmg_frq

So keeping along these lines, maybe we need to have a
relax_disp.cpmg_even_ncyc user function?  Or we rename
relax_disp.cpmg_frq to relax_disp.cpmg_setup and have that user
function reserved for all CPMG pulse sequence info?  What do you
think?  Renaming user functions does require a relax minor version
number change though, so introducing it before relax 3.2.0 is a good
idea.

Regards,

Edward






On 4 May 2014 11:24, Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxxxxxx&gt; 
wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi Edward.

The number of CPMG blocks has to be an even number.

I remember this clearly, since I once did an CPMG experiment, with
some ncycs equal 4, 10, 15, 20, 25, ...

And the intensities for all eksperiments with odd NCYC number was 
horrible.

Kaare told me, that ncycs always has to be even.
That was something that Mikael Akke also have insisted on.

But that day, I could not easily find it in the literature, so I left
it and accepted just another fact of NMR.

And when I did the interpolated graphs with an odd-number of NCYC,
that looked weirdo.
Sig-saw all over the place.

I actually think it could be a input check in relax, warning the user
if the number of CPMG blocks are not equal?

And, I would be very happy to find it in the literature. :-)
Have you ever come around this?

Best
Troels









2014-05-04 11:06 GMT+02:00 Edward d  Auvergne
&lt;NO-REPLY.INVALID-ADDRESS@xxxxxxx&gt;:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Follow-up Comment #2, bug #22008 (project relax):

If this is a restriction of only the B14 analytic CPMG model
(<a  rel="nofollow" href="http://wiki.nmr-relax.com/B14">http://wiki.nmr-relax.com/B14</a>), it would be best if only the B14 is 
affected.
 There is no need to restrict the numeric models based on the 
artificial
limitation of an unrelated model.  Maybe the best solution would be 
to check
if the model is B14, and if so skip odd interpolation points?

    _______________________________________________________

Reply to this item at:

  &lt;<a  rel="nofollow" href="http://gna.org/bugs/?22008">http://gna.org/bugs/?22008</a>&gt;

_______________________________________________
  Message sent via/by Gna!
  <a  rel="nofollow" href="http://gna.org/">http://gna.org/</a>

</pre></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote><pre style="margin: 0em;">


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00083" href="msg00083.html">Re: [bug #22008] Interpolation with relax.plot_disp_curves, creates un-even number of CPMG blocks.</a></strong>
<ul><li><em>From:</em> Troels Emtekær Linnet</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00064" href="msg00064.html">[bug #22008] Interpolation with relax.plot_disp_curves, creates un-even number of CPMG blocks.</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
<li><strong><a name="00067" href="msg00067.html">[bug #22008] Interpolation with relax.plot_disp_curves, creates un-even number of CPMG blocks.</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
<li><strong><a name="00071" href="msg00071.html">[bug #22008] Interpolation with relax.plot_disp_curves, creates un-even number of CPMG blocks.</a></strong>
<ul><li><em>From:</em> Edward d Auvergne</li></ul></li>
<li><strong><a name="00072" href="msg00072.html">Re: [bug #22008] Interpolation with relax.plot_disp_curves, creates un-even number of CPMG blocks.</a></strong>
<ul><li><em>From:</em> Troels Emtekær Linnet</li></ul></li>
<li><strong><a name="00073" href="msg00073.html">Re: [bug #22008] Interpolation with relax.plot_disp_curves, creates un-even number of CPMG blocks.</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00074" href="msg00074.html">Re: [bug #22008] Interpolation with relax.plot_disp_curves, creates un-even number of CPMG blocks.</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00075" href="msg00075.html">Re: [bug #22008] Interpolation with relax.plot_disp_curves, creates un-even number of CPMG blocks.</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00076" href="msg00076.html">Re: [bug #22008] Interpolation with relax.plot_disp_curves, creates un-even number of CPMG blocks.</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00077" href="msg00077.html">Re: [bug #22008] Interpolation with relax.plot_disp_curves, creates un-even number of CPMG blocks.</a></strong>
<ul><li><em>From:</em> Troels Emtekær Linnet</li></ul></li>
<li><strong><a name="00078" href="msg00078.html">Re: [bug #22008] Interpolation with relax.plot_disp_curves, creates un-even number of CPMG blocks.</a></strong>
<ul><li><em>From:</em> Troels Emtekær Linnet</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Sun May 04 16:40:09 2014</div>  
</body>
</html>
