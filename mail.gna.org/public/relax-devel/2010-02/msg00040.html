<!-- MHonArc v2.6.16 -->
<!--X-Subject: [task #6847] The Bieri graphical user interface. -->
<!--X-From-R13: [vpunry Pvrev <@A&#45;DSBZK.W@HOZWR&#45;ORRDSEENtan.bet> -->
<!--X-Date: Tue, 16 Feb 2010 03:49:36 +0100 -->
<!--X-Message-Id: 20100216&#45;024934.sv15425.2345@gna.org -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 20091111&#45;140551.sv2782.60504@gna.org -->
<!--X-Reference: 20091116&#45;161939.sv2782.66546@gna.org -->
<!--X-Reference: 20091118&#45;003733.sv15425.24881@gna.org -->
<!--X-Reference: 20091118&#45;094915.sv2782.71534@gna.org -->
<!--X-Reference: 20091119&#45;015952.sv15425.99204@gna.org -->
<!--X-Reference: 20091202&#45;225247.sv15425.40109@gna.org -->
<!--X-Reference: 20091209&#45;054818.sv15425.84625@gna.org -->
<!--X-Reference: 20091217&#45;222446.sv15425.3094@gna.org -->
<!--X-Reference: 20100104&#45;213033.sv15425.4116@gna.org -->
<!--X-Reference: 20100107&#45;052526.sv15425.81387@gna.org -->
<!--X-Reference: 20100107&#45;053700.sv15425.81161@gna.org -->
<!--X-Reference: 20100114&#45;133229.sv2782.21585@gna.org -->
<!--X-Reference: 20100114&#45;145452.sv2782.7954@gna.org -->
<!--X-Reference: 20100114&#45;145643.sv2782.26751@gna.org -->
<!--X-Reference: 20100114&#45;180821.sv2782.82400@gna.org -->
<!--X-Reference: 20100118&#45;005351.sv15425.23928@gna.org -->
<!--X-Reference: 20100118&#45;022302.sv15425.53634@gna.org -->
<!--X-Reference: 20100118&#45;223608.sv15425.4213@gna.org -->
<!--X-Reference: 20100118&#45;224648.sv15425.82086@gna.org -->
<!--X-Reference: 20100119&#45;221743.sv15425.12802@gna.org -->
<!--X-Reference: 20100119&#45;222217.sv15425.38426@gna.org -->
<!--X-Reference: 20100121&#45;004448.sv15425.11055@gna.org -->
<!--X-Reference: 20100121&#45;010143.sv15425.41025@gna.org -->
<!--X-Reference: 20100121&#45;214937.sv15425.97734@gna.org -->
<!--X-Reference: 20100121&#45;222925.sv15425.48821@gna.org -->
<!--X-Reference: 20100121&#45;223056.sv2782.48604@gna.org -->
<!--X-Reference: 20100121&#45;224626.sv15425.15671@gna.org -->
<!--X-Reference: 20100121&#45;232750.sv15425.39945@gna.org -->
<!--X-Reference: 20100122&#45;022821.sv15425.97244@gna.org -->
<!--X-Reference: 20100126&#45;230300.sv15425.77831@gna.org -->
<!--X-Reference: 20100127&#45;003523.sv15425.25103@gna.org -->
<!--X-Reference: 20100205&#45;010032.sv15425.30320@gna.org -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>[task #6847] The Bieri graphical user interface. -- February 16, 2010 - 03:49</title>
<link rel="stylesheet" type="text/css" href="/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="https://gna.org/images/gna.theme/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />[task #6847] The Bieri graphical user interface.</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00040" class="tabs">Index by Date</a> | <a href="threads.html#00040" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00039.html">Date Prev</a>] [<a href="msg00041.html">Date Next</a>] [<a href="msg00029.html">Thread Prev</a>] [<a href="msg00041.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Edward d  Auvergne &lt;edward@xxxxxxxxxxxxx&gt;,	Michael Bieri &lt;michael.bieri@xxxxxx&gt;, relax-devel@xxxxxxx</li>
<li class="menuitem">
<em>Date</em>: Tue, 16 Feb 2010 03:49:35 +0100</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00040.html">20100216-024934.sv15425.2345@gna.org</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;20091111-140551.sv2782.60504@xxxxxxx&gt;	&lt;20091116-161939.sv2782.66546@xxxxxxx&gt;	&lt;20091118-003733.sv15425.24881@xxxxxxx&gt;	&lt;20091118-094915.sv2782.71534@xxxxxxx&gt;	&lt;20091119-015952.sv15425.99204@xxxxxxx&gt;	&lt;20091202-225247.sv15425.40109@xxxxxxx&gt;	&lt;20091209-054818.sv15425.84625@xxxxxxx&gt;	&lt;20091217-222446.sv15425.3094@xxxxxxx&gt;	&lt;20100104-213033.sv15425.4116@xxxxxxx&gt;	&lt;20100107-052526.sv15425.81387@xxxxxxx&gt;	&lt;20100107-053700.sv15425.81161@xxxxxxx&gt;	&lt;20100114-133229.sv2782.21585@xxxxxxx&gt;	&lt;20100114-145452.sv2782.7954@xxxxxxx&gt;	&lt;20100114-145643.sv2782.26751@xxxxxxx&gt;	&lt;20100114-180821.sv2782.82400@xxxxxxx&gt;	&lt;20100118-005351.sv15425.23928@xxxxxxx&gt;	&lt;20100118-022302.sv15425.53634@xxxxxxx&gt;	&lt;20100118-223608.sv15425.4213@xxxxxxx&gt;	&lt;20100118-224648.sv15425.82086@xxxxxxx&gt;	&lt;20100119-221743.sv15425.12802@xxxxxxx&gt;	&lt;20100119-222217.sv15425.38426@xxxxxxx&gt;	&lt;20100121-004448.sv15425.11055@xxxxxxx&gt;	&lt;20100121-010143.sv15425.41025@xxxxxxx&gt;	&lt;20100121-214937.sv15425.97734@xxxxxxx&gt;	&lt;20100121-222925.sv15425.48821@xxxxxxx&gt;	&lt;20100121-223056.sv2782.48604@xxxxxxx&gt;	&lt;20100121-224626.sv15425.15671@xxxxxxx&gt;	&lt;20100121-232750.sv15425.39945@xxxxxxx&gt;	&lt;20100122-022821.sv15425.97244@xxxxxxx&gt;	&lt;20100126-230300.sv15425.77831@xxxxxxx&gt;	&lt;20100127-003523.sv15425.25103@xxxxxxx&gt;	&lt;20100205-010032.sv15425.30320@xxxxxxx&gt;</li>
<li class="menuitem">
<em>User-agent</em>: Mozilla/5.0 (X11; U; Linux i686; de;	rv:1.9.1.7) Gecko/20100106 Ubuntu/9.10 (karmic) Firefox/3.5.7</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Michael Bieri</strong> on February 16, 2010 - 03:49:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">

Follow-up Comment #35, task #6847 (project relax):

Hi Edward

A couple of new patches:

relax_times:

Relaxation times are correctly read from data storage. 

-        data.relax_times = self.data.file_list[:i]
+        data.relax_times = self.data.relax_times[:i]

---------------------------------

execute_rx:

Unresolved Residues and PDB file will be read of data storage and transfered
to relax_fit.py.

@@ -264,6 +264,12 @@
         # The number of Monte Carlo simulations to be used for error
analysis at the end of the analysis.
         data.mc_num = 500
 
+        # Unresolved resiudes
+        data.unresolved = self.data.unresolved
+
+        # Structure File
+        data.structure_file = self.data.structure_file
+
         # Return the container.
         return data
 
@@ -376,7 +383,7 @@
         data = self.assemble_data()
 
         # Execute.
-        Relax_fit(seq_args=data.seq_args, file_names=data.file_names,
relax_times=data.relax_times, int_method=data.int_method,
mc_num=data.mc_num)
+        Relax_fit(seq_args=data.seq_args, file_names=data.file_names,
relax_times=data.relax_times, int_method=data.int_method, mc_num=data.mc_num,
pdb_file = data.structure_file, unresolved = data.unresolved)
 
 
     def link_data(self, data):


------------------------------------------------------------

settings_patch:

Option to load a sequence file was added bakc to the settings.

@@ -27,6 +27,7 @@
 import wx
 
 # relax GUI module imports.
+from filedialog import openfile
 from paths import IMAGE_PATH
 
 
@@ -51,7 +52,7 @@
 
 
 def load_sequence(self):
-    seqfile = openfile('Choose Sequence File', sys.path[-1],
'save.relaxGUI', 'relaxGUI files (*.relaxGUI)|*.relaxGUI|all files
(*.*)|*.*')
+    seqfile = openfile('Choose Sequence File', sys.path[-1], '', 'all files
(*.*)|*.*')
     return seqfile


------------------------------------------------------------

settings_read:

Stored settings are now synchronized with settings dialog for relax settings
and peak file settings.

@@ -1008,11 +1009,10 @@
 
 
     def param_file_setting(self, event): # set up parameter files
-        global file_setting # import global variable
-        tmp_setting = import_file_settings(file_setting)
+        tmp_setting = import_file_settings(ds.relax_gui.file_setting)
         if not tmp_setting == None:
             if question('Do you realy want to change import file
settings?'):
-                file_setting = tmp_setting
+                ds.relax_gui.file_setting = tmp_setting
         event.Skip()
 
 
@@ -1140,10 +1140,9 @@
 
     def reset_setting(self, event): #reset all settings
         global global_setting #import global variable
-        global file_setting # import global variable
         if question('Do you realy want to change relax settings?'):
-            global_setting = ['1.02 * 1e-10', '-172 * 1e-6', 'N', 'H', '11',
'newton', '500']
-            file_setting = ['0', '1', '2', '3', '4', '5', '6']
+            ds.relax_gui.global_setting = ['1.02 * 1e-10', '-172 * 1e-6',
'N', 'H', '11', 'newton', '500']
+            ds.relax_gui.file_setting = ['0', '1', '2', '3', '4', '5', '6']
 
 
     def sat_noe1(self, event):

@@ -1228,11 +1227,10 @@
 
 
     def settings(self, event): # set up for relax variables
-        global global_setting #import global variable
-        tmp_global = relax_global_settings(global_setting)
+        tmp_global = relax_global_settings(ds.relax_gui.global_setting)
         if not tmp_global == None:
             if question('Do you realy want to change relax settings?'):
-                global_setting = tmp_global
+                ds.relax_gui.global_setting = tmp_global
         event.Skip()
 
 
----------------------------------------------------------

relax_fit:

Several minor fixes for the relax_fit.py script allow running the analysis up
to minimisation.

Included:
Import of PDB file and unresolved residues

Pipe name was supplemented with date and time, so users can start multiple
calculations in the same session (avoiding 'pipe already exists') 

Added proton and hetero nucleus information to spectrum.read_intensities()

Replicated spectra are set correctly.

Only deselect spins if specified (needs more fixes!)

_______________________________________________________


I hope you like the commenting. I summarized the relax_fit patch, as there
are a lot of problems....
Let me know how to improve!

Cheers
Michael

(file #8122)
    _______________________________________________________

Additional Item Attachment:

File name: patches.zip                    Size:3 KB


    _______________________________________________________

Reply to this item at:

  &lt;<a  rel="nofollow" href="http://gna.org/task/?6847">http://gna.org/task/?6847</a>&gt;

_______________________________________________
  Nachricht geschickt von/durch Gna!
  <a  rel="nofollow" href="http://gna.org/">http://gna.org/</a>



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00046" href="msg00046.html">[task #6847] The Bieri graphical user interface.</a></strong>
<ul><li><em>From:</em> Michael Bieri</li></ul></li>
<li><strong><a name="00041" href="msg00041.html">Re: [task #6847] The Bieri graphical user interface.</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00029" href="msg00029.html">[task #6847] The Bieri graphical user interface.</a></strong>
<ul><li><em>From:</em> Michael Bieri</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer">You are on the <a href="http://gna.org">Gna!</a> mail server.</div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Wed Feb 17 05:20:50 2010</div>  
</body>
</html>
