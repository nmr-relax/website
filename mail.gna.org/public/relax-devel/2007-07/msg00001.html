<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: Consistency tests -->
<!--X-From-R13: "Sqjneq q'Ohiretar" <rqjneq.qnhiretarNtznvy.pbz> -->
<!--X-Date: Mon, 09 Jul 2007 11:51:47 +0200 -->
<!--X-Message-Id: 7f080ed10707090251ve1c4a8fl7f8618843e5c9459@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 4672D803.4060009@ulaval.ca -->
<!--X-Reference: 7f080ed10706240949n1b42f06egd424e932d46db48f@mail.gmail.com -->
<!--X-Reference: 46814D2C.1020606@ulaval.ca -->
<!--X-Reference: 7f080ed10706270902r347f7753pb45e3e415a5d066e@mail.gmail.com -->
<!--X-Reference: 4682B844.50503@ulaval.ca -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: Consistency tests -- July 09, 2007 - 11:51</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: Consistency tests</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00001" class="tabs">Index by Date</a> | <a href="threads.html#00001" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00000.html">Date Prev</a>] [<a href="msg00002.html">Date Next</a>] [<a href="msg00000.html">Thread Prev</a>] [<a href="msg00002.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: &quot;Sebastien Morin&quot; &lt;sebastien.morin.1@xxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Mon, 9 Jul 2007 11:51:08 +0200</li>
<li class="menuitem">
<em>Cc</em>: relax-devel@xxxxxxx</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00001.html">7f080ed10707090251ve1c4a8fl7f8618843e5c9459@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;4672D803.4060009@xxxxxxxxx&gt;	&lt;7f080ed10706240949n1b42f06egd424e932d46db48f@xxxxxxxxxxxxxx&gt;	&lt;46814D2C.1020606@xxxxxxxxx&gt;	&lt;7f080ed10706270902r347f7753pb45e3e415a5d066e@xxxxxxxxxxxxxx&gt;	&lt;4682B844.50503@xxxxxxxxx&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on July 09, 2007 - 11:51:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">
Hi,

Your efforts are appreciated.  This code, once incorporated, would be
useful to many NMR spectroscopists using relax.  For them to know
about it though, it would be useful to add a short description of this
to the relax manual (as a new chapter with figures created using
relax, like at 
<a  rel="nofollow" href="http://maple.rsvs.ulaval.ca/mediawiki/index.php/Relax_development">http://maple.rsvs.ulaval.ca/mediawiki/index.php/Relax_development</a>).
I'll create a branch from the 1.2 line for adding your code to.  I'll
also create a branch from the 1.3 line because porting this code will
not be trivial.  The porting shouldn't be too hard though, but unit
tests will be needed (these should catch the small, rare bugs).

As for the code headers, if the code is derived from other code then
the original copyright legally needs to be preserved.  Your copyright
can be added below that.  What I would like to do though is to use the
'svn cp' command to copy these files within the repository.  That way
we will be able to follow the history of these files within the
repository.  Are the following histories correct:

maths_fns/jw_mapping.py -&gt; maths_fns/consistency_tests.py
prompt/jw_mapping.py -&gt; prompt/consistency_tests.py
sample_scripts/jw_mapping.py -&gt; sample_scripts/consistency_tests.py
specific_fns/jw_mapping.py -&gt; specific_fns/consistency_tests.py
test_suite/jw_mapping.py -&gt; test_suite/consistency_tests.py

Cheers,

Edward


On 6/27/07, Sebastien Morin &lt;sebastien.morin.1@xxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">
Hi,

Thanks !
It's fun to know that my efforts are appreciated..!

Let me know if something was wrong...

Maybe my name on the code headers should be modified to add the names of
the people who originally wrote the files in Jw mapping code (since I
mostly started by copying the code and modifying it).

Cheers


Séb



Edward d'Auvergne wrote:
&gt; Hi,
&gt;
&gt; This is an awesome effort!  The best part is that this code doesn't
&gt; break any other parts of relax!  The code looks like it meets all of
&gt; relax's conventions perfectly (although there was maybe one or two
&gt; functions without docstrings).  There is also a few bugs that I have
&gt; noticed that will need to be sorted out (indecies of 1 in three spots
&gt; where they should be different, I can't remember the file off the top
&gt; of my head).
&gt;
&gt; Because of the size of this patch, please allow me time to sort
&gt; through it all.  The norm is that large patches, such as this one, are
&gt; very difficult to have incorporated into an open source projects.  It
&gt; helps for code acceptance to discuss and develop the code in the
&gt; public eye.  However in this case, the code implements a new analysis
&gt; type and sits nicely alongside the rest of relax without modifying the
&gt; current code base too much (actually in this case barely at all).  The
&gt; code will need work prior to acceptance (like the sample script
&gt; including functions to create the output graphs) but it could be that
&gt; the code is so well-behaved that it could make it into the 1.2 line.
&gt; Nevertheless it will need to be added to the 1.3 line for it to exist
&gt; within future relax versions.  Thank you for this great effort.
&gt;
&gt; Cheers,
&gt;
&gt; Edward
&gt;
&gt;
&gt;
&gt; On 6/26/07, Sebastien Morin &lt;sebastien.morin.1@xxxxxxxxx&gt; wrote:
&gt;&gt; Hi,
&gt;&gt;
&gt;&gt; I started working on implementing the consistency tests last week before
&gt;&gt; the last post was made and, hence, I worked on repository line 1.2
&gt;&gt; (revision 3303).
&gt;&gt;
&gt;&gt; I implemented the consistency tests as a new type of run ('ct') similar
&gt;&gt; to the one for Jw mapping.
&gt;&gt;
&gt;&gt; The calculations are made for J(0), F_eta and F_R2 separately for each
&gt;&gt; magnetic field (one at a time). The output results file is similar to
&gt;&gt; the one for Jw mapping. The user then needs to plot them and look for
&gt;&gt; consistency with its own criteria (calculation correlation
&gt;&gt; coefficients,  mean ratios and standard deviations, etc).
&gt;&gt;
&gt;&gt; Please look at the followinr URL for a listing of the modifications to
&gt;&gt; old files and also necessary new files.
&gt;&gt;
&gt;&gt; <a  rel="nofollow" href="http://maple.rsvs.ulaval.ca/mediawiki/index.php/Relax_development">http://maple.rsvs.ulaval.ca/mediawiki/index.php/Relax_development</a>
&gt;&gt;
&gt;&gt; The file 'sample_scripts/consistency_tests.py' should be useful to
&gt;&gt; understand how the new procedure works.
&gt;&gt;
&gt;&gt; Even if this was done on repository line 1.2, I think it is quite fine
&gt;&gt; since nothing was deleted but only things added (maybe too much, as I
&gt;&gt; reproduced the Jw mapping approach, maybe too much as I added lines in
&gt;&gt; the codes for grace, molmol, etc, maybe too much also since some code is
&gt;&gt; duplicated from the Jw mapping code). The test-suite still works
&gt;&gt; perfectly and, so, I think it could be fine to add the tests to the 1.2
&gt;&gt; line as well... However, if necessary, I could implement the consistency
&gt;&gt; testing procedure on line 1.3, following your comments as I am quite new
&gt;&gt; to Python and maybe made things somehow not perfectly...
&gt;&gt;
&gt;&gt; Please tell me what you think about this.
&gt;&gt;
&gt;&gt; Cheers,
&gt;&gt;
&gt;&gt;
&gt;&gt; Sébastien  :)
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; Edward d'Auvergne wrote:
&gt;&gt; &gt; Hi,
&gt;&gt; &gt;
&gt;&gt; &gt; I have previously talked about data set consistency.  For example see
&gt;&gt; &gt; the post at
&gt;&gt; <a  rel="nofollow" href="http://www.nmr-relax.com/mail.gna.org/public/relax-users/2007-06/msg00001.html">https://mail.gna.org/public/relax-users/2007-06/msg00001.html</a>
&gt;&gt; &gt; in which a few reasons for inconsistencies have been explained.  I
&gt;&gt; &gt; have, from experience, noticed that small changes in protein
&gt;&gt; &gt; concentration can change the collected relaxation rates significantly
&gt;&gt; &gt; - most likely because of packing interactions.  All samples should
&gt;&gt; &gt; essentially be identical in all respects for the relaxation rates to
&gt;&gt; &gt; be compared.  And the temperate should always be fine tuned between
&gt;&gt; &gt; experiments and spectrometers using methanol (and always checked later
&gt;&gt; &gt; on if there is a large time between collecting the same experiment).
&gt;&gt; &gt;
&gt;&gt; &gt; Therefore these tests would be quite useful.  Data consistency is
&gt;&gt; &gt; essential for the model-free results to be correct (as well as reduced
&gt;&gt; &gt; spectral density mapping, SRLS, etc.) as this affects both the
&gt;&gt; &gt; optimisation and model selection and can result in artificial motions
&gt;&gt; &gt; appearing.  However I don't know how these test would currently fit
&gt;&gt; &gt; within relax.  Maybe a new type of analysis should be created for this
&gt;&gt; &gt; (see the pipe.create() user function in the 1.3 line or the
&gt;&gt; &gt; run.create() user function in the 1.2 line).  These ideas should all
&gt;&gt; &gt; go into the 1.3 line (via a branch) as the 1.2 line is stable and no
&gt;&gt; &gt; new major features will be added to this code.  What are the ideas you
&gt;&gt; &gt; have been playing with?
&gt;&gt; &gt;
&gt;&gt; &gt; Cheers,
&gt;&gt; &gt;
&gt;&gt; &gt; Edward
&gt;&gt; &gt;
&gt;&gt; &gt;
&gt;&gt; &gt; On 6/15/07, Sebastien Morin &lt;sebastien.morin.1@xxxxxxxxx&gt; wrote:
&gt;&gt; &gt;&gt; Hi everyone
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; During the last months, I was astonished to realize that some spin
&gt;&gt; &gt;&gt; relaxation data I had acquired at different fields were not
&gt;&gt; consistent
&gt;&gt; &gt;&gt; between each other. The way I realized that was by seeing discrepancy
&gt;&gt; &gt;&gt; between J(0) values calculated with those different datasets.
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; I looked a little bit in the litterature and found some interesting
&gt;&gt; &gt;&gt; consistency tests in a paper by Fushman (Fushman et al., JACS, 1998,
&gt;&gt; &gt;&gt; 120:10947-10952).
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; This paper present 2 consistency tests to compare datasets from
&gt;&gt; &gt;&gt; different magnetic fields / samples / time / etc.
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; I think it would be interesting to implement those simple tests in
&gt;&gt; relax
&gt;&gt; &gt;&gt; so the user can, before trying to fit their data, know the quality of
&gt;&gt; &gt;&gt; those... Regrettably, very few people look at the consistency of
&gt;&gt; their
&gt;&gt; &gt;&gt; datasets before analysis...
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; The underlying principle is the same as when looking at
&gt;&gt; consistency for
&gt;&gt; &gt;&gt; J(0). Thus, I think that those two tests and a J(0) test should be
&gt;&gt; &gt;&gt; implemented altogether...
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; I'll try to work a bit on this. Mimicking the code for spectral
&gt;&gt; density
&gt;&gt; &gt;&gt; should be a good starting point.
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; Am I right ?
&gt;&gt; &gt;&gt; Do you see any value in those tests ?
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; Cheers
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; Sébastien  :)
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; _______________________________________________
&gt;&gt; &gt;&gt; relax (<a  rel="nofollow" href="http://nmr-relax.com">http://nmr-relax.com</a>)
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; This is the relax-devel mailing list
&gt;&gt; &gt;&gt; relax-devel@xxxxxxx
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; To unsubscribe from this list, get a password
&gt;&gt; &gt;&gt; reminder, or change your subscription options,
&gt;&gt; &gt;&gt; visit the list information page at
&gt;&gt; &gt;&gt; <a  rel="nofollow" href="http://www.nmr-relax.com/mail.gna.org/listinfo/relax-devel">https://mail.gna.org/listinfo/relax-devel</a>
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;
&gt;&gt;
&gt;&gt; --
&gt;&gt;          ______________________________________
&gt;&gt;      _______________________________________________
&gt;&gt;     |                                               |
&gt;&gt;    || Sebastien Morin                               ||
&gt;&gt;   ||| Etudiant au PhD en biochimie                  |||
&gt;&gt;  |||| Laboratoire de resonance magnetique nucleaire ||||
&gt;&gt; ||||| Dr Stephane Gagne                             |||||
&gt;&gt;  |||| CREFSIP (Universite Laval, Quebec, CANADA)    ||||
&gt;&gt;   ||| 1-418-656-2131 #4530                          |||
&gt;&gt;    ||                                               ||
&gt;&gt;     |_______________________________________________|
&gt;&gt;          ______________________________________
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;

--
         ______________________________________
     _______________________________________________
    |                                               |
   || Sebastien Morin                               ||
  ||| Etudiant au PhD en biochimie                  |||
 |||| Laboratoire de resonance magnetique nucleaire ||||
||||| Dr Stephane Gagne                             |||||
 |||| CREFSIP (Universite Laval, Quebec, CANADA)    ||||
  ||| 1-418-656-2131 #4530                          |||
   ||                                               ||
    |_______________________________________________|
         ______________________________________



</pre></blockquote><pre style="margin: 0em;">


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Tue Jul 17 19:20:36 2007</div>  
</body>
</html>
