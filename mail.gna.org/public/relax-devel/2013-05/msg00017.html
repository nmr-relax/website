<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: Development of the relax&#45;disp branch. -->
<!--X-From-R13: "Sqjneq q'Ohiretar" <rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Sat, 11 May 2013 16:41:37 +0200 -->
<!--X-Message-Id: CAED9pY9zyHATZoAsht5CJQei9zENRuSfom0tec3wvGs0QEFo0Q@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: CAED9pY9kV+O_p19tRmhh3ESWWpc9k6VrtkCeKFY9&#45;ijbQrJ70Q@mail.gmail.com -->
<!--X-Reference: CAED9pY&#45;MnbcyDHZ0T6mLCbGaU9LpFArvA9d_1pGf6kA6Bcsh3A@mail.gmail.com -->
<!--X-Reference: CA+CBx2PdT6ZfOrVsGqLJgiwmH0xxu8rh9ef41TPeSW76&#45;RtuBg@mail.gmail.com -->
<!--X-Reference: CAED9pY&#45;iYo2NWDSBsw77mMENeBt0tiKKyjLOLbdbb9+bucy3oA@mail.gmail.com -->
<!--X-Reference: CA+CBx2OjKjGaUx9XsDyEL+&#45;mQ9B==6rj+U3O6swjR7jnwg=b6g@mail.gmail.com -->
<!--X-Reference: CAED9pY8Kyiv4d05pD4x6_C=H_mnW2FLHY0futeHEGHEex4tnSQ@mail.gmail.com -->
<!--X-Reference: CA+CBx2O8FG56SAbxgpZ6o0qU+OZNpDoS3rLkh4pJ0ydaOi4swQ@mail.gmail.com -->
<!--X-Reference: CAED9pY_o6WQbPzTEi90sb5HJNb2sTALpcPKBWdOWDS9BTc_TUw@mail.gmail.com -->
<!--X-Reference: CAED9pY8y47rKH_ykmjrUdDXPWj=VOj3SAOO7PUd04QszBS3xFA@mail.gmail.com -->
<!--X-Reference: CA+CBx2O+3v3WpPs0YAth7U2ipqA1mZfDKPAchCVN2DMojW2hTQ@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: Development of the relax-disp branch. -- May 11, 2013 - 16:41</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: Development of the relax-disp branch.</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00017" class="tabs">Index by Date</a> | <a href="threads.html#00017" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00016.html">Date Prev</a>] [<a href="msg00018.html">Date Next</a>] [<a href="msg00016.html">Thread Prev</a>] [<a href="msg00018.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Sat, 11 May 2013 16:41:02 +0200</li>
<li class="menuitem">
<em>Cc</em>: &quot;relax-devel@xxxxxxx&quot; &lt;relax-devel@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;	h=mime-version:x-received:sender:in-reply-to:references:date	:x-google-sender-auth:message-id:subject:from:to:cc:content-type	:content-transfer-encoding;	bh=gseAOAW7SmmnSWKowNeI4FPpomm3BDvtk+abmJNjzgA=;	b=ii+2/dy9qMz8LGiNU82fAaCldef8DRJ7fOorH+rNnf02/3AvrhPyVUcFeiUuVTORWh	+gJxqCVUpvooyKfHq1K84So2UvNrO2FNp5nICnQq/bNSh4uOwvStdVj+3Sb5NruVa9/6	VZNftVpzJizQj0jSQzWsa20GtuMCb7qfoVA43w9YW2NYVRYnVVjozenaYlakQbeRvIMJ	+wBrBf/B/X5YvjIgm2/ChZ1inLdBqla593/5hvewuDM5VBGkg5N+IADtY2Zto40pgP0t	VrHHUEuCXKg24fZ1Op/J2TLUgDYR0UvVIKNb4ViD1rmtQuslQB394iEOunMjA+FbWnsf	LUvg==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00017.html">CAED9pY9zyHATZoAsht5CJQei9zENRuSfom0tec3wvGs0QEFo0Q@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;CAED9pY9kV+O_p19tRmhh3ESWWpc9k6VrtkCeKFY9-ijbQrJ70Q@xxxxxxxxxxxxxx&gt;	&lt;CAED9pY-MnbcyDHZ0T6mLCbGaU9LpFArvA9d_1pGf6kA6Bcsh3A@xxxxxxxxxxxxxx&gt;	&lt;CA+CBx2PdT6ZfOrVsGqLJgiwmH0xxu8rh9ef41TPeSW76-RtuBg@xxxxxxxxxxxxxx&gt;	&lt;CAED9pY-iYo2NWDSBsw77mMENeBt0tiKKyjLOLbdbb9+bucy3oA@xxxxxxxxxxxxxx&gt;	&lt;CA+CBx2OjKjGaUx9XsDyEL+-mQ9B==6rj+U3O6swjR7jnwg=b6g@xxxxxxxxxxxxxx&gt;	&lt;CAED9pY8Kyiv4d05pD4x6_C=H_mnW2FLHY0futeHEGHEex4tnSQ@xxxxxxxxxxxxxx&gt;	&lt;CA+CBx2O8FG56SAbxgpZ6o0qU+OZNpDoS3rLkh4pJ0ydaOi4swQ@xxxxxxxxxxxxxx&gt;	&lt;CAED9pY_o6WQbPzTEi90sb5HJNb2sTALpcPKBWdOWDS9BTc_TUw@xxxxxxxxxxxxxx&gt;	&lt;CAED9pY8y47rKH_ykmjrUdDXPWj=VOj3SAOO7PUd04QszBS3xFA@xxxxxxxxxxxxxx&gt;	&lt;CA+CBx2O+3v3WpPs0YAth7U2ipqA1mZfDKPAchCVN2DMojW2hTQ@xxxxxxxxxxxxxx&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on May 11, 2013 - 16:41:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Hi,

We should be able to get to the bottom of the problem and make this
run.  But setting up the development platform on MS Windows of the
MSVS compiler and Python is always painful.  Because of this I set up
a virtual machine image of Windows 2000 with MSVS 2005 many years ago
and have been using this to build the Windows pre-compiled relax
distributions (<a  rel="nofollow" href="/download.html#MS_Windows">http://www.nmr-relax.com/download.html#MS_Windows</a>) ever
since.  I have updated Python to version 2.7 on this vm, but the
compiler setup works and I don't want to have to set up another
environment.

</pre><blockquote class="blockquote"><pre style="margin: 0em;">From the error messages, it is clear that this 2012 version of the
</pre></blockquote><pre style="margin: 0em;">Microsoft compiler catches more problems in the code.  The warning:

c:\python27\github\relax_disp\target_functions\relax_fit.c(137) :
warning C4700: uninitialized local variable 'params' used

may be an issue.  I think this is harmless, but you could try to
comment out line 137 of that file (the call to the exponential()
function) and see if that makes a difference.  This is inside the
dfunc() function which is both non-functional and not used.  This is
supposed to return the gradient of the exponential curve but is not
implemented yet as simplex optimisation, which does not require the
gradient or Hessian, was sufficient for finding the solution for this
2 parameter problem.

</pre><blockquote class="blockquote"><pre style="margin: 0em;">From these new messages, it is clear that the Python.h file is being
</pre></blockquote><pre style="margin: 0em;">found.  The include /I&quot;C:\Python27\Scripts\..\include&quot; is interesting
as this implies that sys.prefix as seen by scons is set to
&quot;C:\Python27\Scripts\..&quot;.  Although strange, this may not be an issue.
 But when you run Python, you see sys.prefix as &quot;C:\Python27&quot;.
Hmmmm.....

Maybe the problem is not that Python.h cannot be found, but that the
python32.lib file cannot be found.  Can you see this file in your
C:\Python27\libs\ directory?  You can see that this is used in the
linking command:

link /nologo /dll /out:target_functions\relax_fit.pyd
/implib:target_functions\relax_fit.lib /LIBPATH:C:\Python27\libs
target_functions\c_chi2.obj target_functions\exponential.obj
target_functions\relax_fit.obj

On Windows, there should be a python32.lib file in the LIBPATH.

Regards,

Edward






On 11 May 2013 12:41, Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi Edward.

Sigh.

I have looked around for
&quot;error LNK2019: unresolved external symbol&quot;
and it seems that many experience the problem.

But there don't seem to be an universal explanation/bug fix.
And if I find a thing I would like to try, I really don't know where to
start. ? :-)

- &quot;In Visual-Studio most linkage problems are related to forget adding .cpp
files.&quot;
- Url 2,  Url3, Url4, Url5, Url6

In the last Url, there is this solution:
---
in the Project properties, set the Platform Toolset to VS2008 (v90) and the
correct directories depending on your installation (ie : include =&gt;
C:\Program Files (x86)\Windows Kits\8.0\Include\shared;C:\Program Files
(x86)\Windows Kits\8.0\Include\um;$(IncludePath) and Libraries =&gt; C:\Program
Files (x86)\Windows Kits\8.0\Lib\win8\um\x64;$(LibraryPath)). Don't forget
to set the .lib in Link entries.
---

After installation of Visual Studio 2012, I do have the folder:
C:\Program Files (x86)\Windows Kits\8.0

I have  attached a text file, how I have installed until now.

I hope we can break this &quot;annoying behaviour?&quot;
Where should I look, if .ccp files is added ??

Best
Troels
------------------------

C:\Python27\github\relax_disp&gt;scons clean_all
scons: Reading SConscript files ...
scons: done reading SConscript files.
scons: Building targets ...
clean_manual_files([&quot;manual_clean&quot;], [])

##########################################
# Cleaning up the temporary manual files #
##########################################






clean_files([&quot;clean&quot;], [])

###############################
# Cleaning up temporary files #
###############################



Removing the files ending in ['pyc', 'pyo', 'bak', 'o', 'os', 'obj', 'exp',
'lib
'].

Removing temporary relax save state files (of the form
relax_state_xxxxxxxx_xxxx
xx.bz2).

Removing the Python 3 __pycache__ directories.





clean_all_files([&quot;clean_all&quot;], [])

#########################
# Cleaning up all files #
#########################



Removing the files ending in ['so', 'sconsign', 'dll', 'pyd'].





scons: done building targets.

C:\Python27\github\relax_disp&gt;scons
scons: Reading SConscript files ...
scons: done reading SConscript files.
scons: Building targets ...




###########################
# Compiling the C modules #
###########################


Building the relaxation curve fitting module
'target_functions\\relax_fit.pyd'

cl /Fotarget_functions\c_chi2.obj /c target_functions\c_chi2.c /nologo
/I&quot;C:\Pyt
hon27\Scripts\..\include&quot;
c_chi2.c
cl /Fotarget_functions\exponential.obj /c target_functions\exponential.c
/nologo
 /I&quot;C:\Python27\Scripts\..\include&quot;
exponential.c
cl /Fotarget_functions\relax_fit.obj /c target_functions\relax_fit.c /nologo
/I&quot;
C:\Python27\Scripts\..\include&quot;
relax_fit.c
c:\python27\github\relax_disp\target_functions\relax_fit.c(137) : warning
C4700:
 uninitialized local variable 'params' used
link /nologo /dll /out:target_functions\relax_fit.pyd
/implib:target_functions\r
elax_fit.lib /LIBPATH:C:\Python27\libs target_functions\c_chi2.obj
target_functi
ons\exponential.obj target_functions\relax_fit.obj
   Creating library target_functions\relax_fit.lib and object
target_functions\r
elax_fit.exp
relax_fit.obj : error LNK2019: unresolved external symbol
__imp__PyFloat_FromDou
ble referenced in function _func
relax_fit.obj : error LNK2019: unresolved external symbol
__imp__PyFloat_AsDoubl
e referenced in function _setup
relax_fit.obj : error LNK2019: unresolved external symbol __imp__PyList_New
refe
renced in function _back_calc_I
relax_fit.obj : error LNK2019: unresolved external symbol
__imp__PyList_SetItem
referenced in function _back_calc_I
relax_fit.obj : error LNK2019: unresolved external symbol
__imp__PyArg_ParseTupl
e referenced in function _func
relax_fit.obj : error LNK2019: unresolved external symbol
__imp__PyArg_ParseTupl
eAndKeywords referenced in function _setup
relax_fit.obj : error LNK2019: unresolved external symbol
__imp__Py_InitModule4
referenced in function _initrelax_fit
relax_fit.obj : error LNK2019: unresolved external symbol
__imp__PySequence_GetI
tem referenced in function _setup
relax_fit.obj : error LNK2019: unresolved external symbol
__imp___Py_NoneStruct
referenced in function _setup
target_functions\relax_fit.pyd : fatal error LNK1120: 9 unresolved externals
scons: *** [target_functions\relax_fit.pyd] Error 1120
scons: building terminated because of errors.

C:\Python27\github\relax_disp&gt;python
Enthought Python Distribution -- www.enthought.com
Version: 7.3-2 (64-bit)

Python 2.7.3 |EPD 7.3-2 (64-bit)| (default, Apr 12 2012, 15:20:16) [MSC
v.1500 6
4 bit (AMD64)] on win32
Type &quot;credits&quot;, &quot;demo&quot; or &quot;enthought&quot; for more information.
</pre><blockquote class="blockquote"><blockquote class="blockquote"><blockquote class="blockquote"><pre style="margin: 0em;">import sys
from os import path
print sys.prefix + path.sep + 'include'
</pre></blockquote></blockquote></blockquote><pre style="margin: 0em;">C:\Python27\include
</pre><blockquote class="blockquote"><blockquote class="blockquote"><blockquote class="blockquote"><pre style="margin: 0em;">

</pre></blockquote></blockquote></blockquote><pre style="margin: 0em;">C:\Python27\github\relax_disp&gt;dir C:\Python27\include\Python*
 Directory of C:\Python27\include

15-04-2013  00:37            21.113 Python-ast.h
15-04-2013  00:37             4.329 Python.h
15-04-2013  00:37             7.339 pythonrun.h
               3 File(s)         32.781 bytes
               0 Dir(s)  60.963.274.752 bytes free

C:\Python27\github\relax_disp&gt;
</pre></blockquote><pre style="margin: 0em;">


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00018" href="msg00018.html">Re: Development of the relax-disp branch.</a></strong>
<ul><li><em>From:</em> Troels Emtekær Linnet</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00002" href="msg00002.html">Development of the relax-disp branch.</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00003" href="msg00003.html">Re: Development of the relax-disp branch.</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00005" href="msg00005.html">Re: Development of the relax-disp branch.</a></strong>
<ul><li><em>From:</em> Troels Emtekær Linnet</li></ul></li>
<li><strong><a name="00007" href="msg00007.html">Re: Development of the relax-disp branch.</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00008" href="msg00008.html">Re: Development of the relax-disp branch.</a></strong>
<ul><li><em>From:</em> Troels Emtekær Linnet</li></ul></li>
<li><strong><a name="00009" href="msg00009.html">Re: Development of the relax-disp branch.</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00012" href="msg00012.html">Re: Development of the relax-disp branch.</a></strong>
<ul><li><em>From:</em> Troels Emtekær Linnet</li></ul></li>
<li><strong><a name="00013" href="msg00013.html">Re: Development of the relax-disp branch.</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00015" href="msg00015.html">Re: Development of the relax-disp branch.</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00016" href="msg00016.html">Re: Development of the relax-disp branch.</a></strong>
<ul><li><em>From:</em> Troels Emtekær Linnet</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Sun May 12 21:00:07 2013</div>  
</body>
</html>
