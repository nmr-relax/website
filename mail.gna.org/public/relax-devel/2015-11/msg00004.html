<!-- MHonArc v2.6.19+ -->
<!--X-Subject: Re: [sr #3303] Automatic back&#45;calculation of spin relaxation data -->
<!--X-From-R13: "Sqjneq q'Ohiretar" &#60;rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Mon, 23 Nov 2015 10:28:05 +0100 -->
<!--X-Message-Id: CAED9pY_aW71juA946Bqj3p830XOw6=xKE+sujsxLc8pfgo9Q+Q@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 20151120&#45;103606.sv22182.29372@gna.org -->
<!--X-Reference: CA+CBx2MoPrkE6qJqPgJN76vGCxJYWbPbUMHYfxwxmf+Z+zkSjg@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [sr #3303] Automatic back-calculation of spin relaxation data -- November 23, 2015 - 10:28</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: [sr #3303] Automatic back-calculation of spin relaxation data</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00004" class="tabs">Index by Date</a> | <a href="threads.html#00004" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00003.html">Date Prev</a>] [<a href="msg00005.html">Date Next</a>] [<a href="msg00002.html">Thread Prev</a>] [<a href="msg00003.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Mon, 23 Nov 2015 10:27:34 +0100</li>
<li class="menuitem">
<em>Cc</em>: Christina Möller &lt;c.moeller@xxxxxxxxxxxxx&gt;, Christina Möller &lt;NO-REPLY.INVALID-ADDRESS@xxxxxxx&gt;, &quot;relax-devel@xxxxxxx&quot; &lt;relax-devel@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113; h=mime-version:sender:in-reply-to:references:date:message-id:subject :from:to:cc:content-type:content-transfer-encoding; bh=/2stjlbWr1WWKfHsYtSsVC+cBtj8lhdhbYTxZfKgA0g=; b=VmwDa7BB7B5QBhX5QZqtFg+ckcfqOrKxHE1xx0W7Xi+CFo0ixicveaRGrJ8yoFrS+q 4ZbXm2gb80zNOhaZMAAQG8VM2Nw5bIgUbdqu5/yA6Az6nTaw2g7fWsO7PMcVqRw+o5N2 tWemrvNthuMtfrsrZwdTE4JiL+ddk+jGffYjK2A2DnOP75qY+UtyWc5ZZ44WQR+MZvNf 6HZxWlTrIqBHUwwTUyOUzFpAblaeRD8pvVkyGKHe/+a8XFf0WIM8I7iFW0WN/brYhgM4 88W7TJdPXjGJ8tP2DwhZa3C6FAb+ACBW/QDwvrupU36iejSiMtVY+E5eLn3GtKOkMO6L bbdw==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;CAED9pY_aW71juA946Bqj3p830XOw6=xKE+sujsxLc8pfgo9Q+Q@mail.gmail.com&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;<a href="msg00000.html">20151120-103606.sv22182.29372@gna.org</a>&gt; &lt;<a href="msg00002.html">CA+CBx2MoPrkE6qJqPgJN76vGCxJYWbPbUMHYfxwxmf+Z+zkSjg@mail.gmail.com</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on November 23, 2015 - 10:28:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Hi Christina,

I've had a look at your support request
(<a  rel="nofollow" href="https://gna.org/support/?3303">https://gna.org/support/?3303</a>) and have tried to come up with a
solution:

    <a  rel="nofollow" href="http://article.gmane.org/gmane.science.nmr.relax.scm/25842">http://article.gmane.org/gmane.science.nmr.relax.scm/25842</a>

For this, I had to reintroduce the &quot;&lt;mol name=&quot;GAB&quot;&gt;&quot; and &quot;&lt;/mol&gt;&quot;
tags in the XML results file, otherwise relax cannot read the file
correctly.  The newly introduced sample script is quite simple:

    
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/trunk/sample_scripts/model_free/back_calculate.py?view=markup&amp;pathrev=28091">http://svn.gna.org/viewcvs/relax/trunk/sample_scripts/model_free/back_calculate.py?view=markup&amp;pathrev=28091</a>

It is simply:

&quot;&quot;&quot;
# Load the results as a state file.
state.load('results')

# Loop over each relaxation data set.
for ri_id in cdp.ri_ids:
    # Back calculate the relaxation data.
    relax_data.back_calc(ri_id=ri_id, ri_type=cdp.ri_type[ri_id],
frq=cdp.spectrometer_frq[ri_id])

    # Write the data.
    relax_data.write(ri_id=ri_id, file='%s.out' % ri_id.lower(),
bc=True, force=True)
&quot;&quot;&quot;

This loads the results file and then uses the information in the
current data pipe to loop over and back-calculate each relaxation data
point.  Note the important bc=True flag used in the relax_data.write
user function (<a  rel="nofollow" href="/manual/relax_data_write.html">http://www.nmr-relax.com/manual/relax_data_write.html</a>).
Is this script sufficient?

Regards,

Edward



On 20 November 2015 at 14:26, Troels Emtekær Linnet
&lt;tlinnet@xxxxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Dear Christina.

Thank you for your contribution.

I am sure this will be of benefits to other users, and a good reference for
automatic back-calculation of spin relaxation data.

Time is always precious and so the development of this can take some time.

But it is essential that the support request is described and including a
potential fix.

This will make the solution easier.

Thank you again. :)

May the &quot;good results&quot; be with you and happy &quot;relaxing&quot;.

Best
Troels


2015-11-20 11:36 GMT+01:00 Christina Möller &lt;
NO-REPLY.INVALID-ADDRESS@xxxxxxx&gt;:

</pre><blockquote class="blockquote"><pre style="margin: 0em;">URL:
  &lt;<a  rel="nofollow" href="http://gna.org/support/?3303">http://gna.org/support/?3303</a>&gt;

                 Summary: Automatic back-calculation of spin relaxation
data
                 Project: relax
            Submitted by: cmoeller
            Submitted on: Fri 20 Nov 2015 10:36:06 AM UTC
                Category: Feature request
                Priority: 5 - Normal
                Severity: 1 - Wish
                  Status: None
             Assigned to: None
        Originator Email:
             Open/Closed: Open
         Discussion Lock: Any
        Operating System: GNU/Linux

    _______________________________________________________

Details:

After the full model-free analysis of relaxation data using the
dauvergne_protocol.py script it would be interesting to compare the
back-calculated values to the original experimental values.

The generate_ri.py script back-calculates the relaxation data from given
residue-specific s2, s2f, s2s, te, tf, ts values that are obtained from the
model-free analysis. The generate_ri.py script that can be found in the
sample
scripts/model-free folder generates back-calculated data for just one
residue-specific set of parameters. To obtain the back-calculated data for
i.e. 80 residues the script has to be used 80 times. It would be more
efficient if the script is started only once and the residue-specific
parameters are loaded automatically for each residue in order to generate
the
back-calculated values for all residues.
Attached you can find some example data.

A colleague who is more familiar with python than me tried to find a
solution
and edited the generate_ri.py script. Attached you can find the modified
script named generate_ri_mod.py. To run this script the results.py script
is
needed because it extracts the data from the results.bz2 file. This
modified
script back-calculates the values automatically and generates an output
file
named relaxation_data.dat containing back-calculated values for all
residues.
You will probably have a solution which is more consistent with your
programming of relax.




    _______________________________________________________

File Attachments:


-------------------------------------------------------
Date: Fri 20 Nov 2015 10:36:06 AM UTC  Name: results.bz2  Size: 344kB   By:
cmoeller
Example data and used relax script
&lt;<a  rel="nofollow" href="http://gna.org/support/download.php?file_id=25821">http://gna.org/support/download.php?file_id=25821</a>&gt;
-------------------------------------------------------
Date: Fri 20 Nov 2015 10:36:06 AM UTC  Name: generate_ri.py  Size: 5kB
 By:
cmoeller
Example data and used relax script
&lt;<a  rel="nofollow" href="http://gna.org/support/download.php?file_id=25822">http://gna.org/support/download.php?file_id=25822</a>&gt;
-------------------------------------------------------
Date: Fri 20 Nov 2015 10:36:06 AM UTC  Name: generate_ri_mod.py  Size: 7kB
By: cmoeller
Example data and used relax script
&lt;<a  rel="nofollow" href="http://gna.org/support/download.php?file_id=25823">http://gna.org/support/download.php?file_id=25823</a>&gt;
-------------------------------------------------------
Date: Fri 20 Nov 2015 10:36:06 AM UTC  Name: results.py  Size: 4kB   By:
cmoeller
Example data and used relax script
&lt;<a  rel="nofollow" href="http://gna.org/support/download.php?file_id=25824">http://gna.org/support/download.php?file_id=25824</a>&gt;

    _______________________________________________________

Reply to this item at:

  &lt;<a  rel="nofollow" href="http://gna.org/support/?3303">http://gna.org/support/?3303</a>&gt;

_______________________________________________
  Message sent via/by Gna!
  <a  rel="nofollow" href="http://gna.org/">http://gna.org/</a>


_______________________________________________
relax (<a  rel="nofollow" href="/">http://www.nmr-relax.com</a>)

This is the relax-devel mailing list
relax-devel@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="/mail.gna.org/listinfo/relax-devel">https://mail.gna.org/listinfo/relax-devel</a>

</pre></blockquote><pre style="margin: 0em;">_______________________________________________
relax (<a  rel="nofollow" href="/">http://www.nmr-relax.com</a>)

This is the relax-devel mailing list
relax-devel@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="/mail.gna.org/listinfo/relax-devel">https://mail.gna.org/listinfo/relax-devel</a>
</pre></blockquote><pre style="margin: 0em;">


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00000" href="msg00000.html">[sr #3303] Automatic back-calculation of spin relaxation data</a></strong>
<ul><li><em>From:</em> Christina Möller</li></ul></li>
<li><strong><a name="00002" href="msg00002.html">Re: [sr #3303] Automatic back-calculation of spin relaxation data</a></strong>
<ul><li><em>From:</em> Troels Emtekær Linnet</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Mon Nov 23 10:40:09 2015</div>  
</body>
</html>
