<!-- MHonArc v2.6.19+ -->
<!--X-Subject: Re: r27834 &#45; /trunk/auto_analyses/relax_disp_repeat_cpmg.py -->
<!--X-From-R13: "Sqjneq q'Ohiretar" &#60;rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Mon, 08 Jun 2015 16:09:00 +0200 -->
<!--X-Message-Id: CAED9pY8zae7PF3dXgitmgT7AmKmnKoVD+ix4GTmyEnvNvTDi&#45;A@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: E1YxPqi&#45;0002mR&#45;AX@subversion.gna.org -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: r27834 - /trunk/auto_analyses/relax_disp_repeat_cpmg.py -- June 08, 2015 - 16:09</title>
<link rel="stylesheet" type="text/css" href="/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="https://gna.org/images/gna.theme/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: r27834 - /trunk/auto_analyses/relax_disp_repeat_cpmg.py</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00000" class="tabs">Index by Date</a> | <a href="threads.html#00000" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[Date Prev] [<a href="msg00001.html">Date Next</a>] [Thread Prev] [<a href="msg00001.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: &quot;relax-devel@xxxxxxx&quot; &lt;relax-devel@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Mon, 8 Jun 2015 16:08:30 +0200</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113; h=mime-version:sender:in-reply-to:references:date:message-id:subject :from:to:content-type; bh=kkJk1GmNJYJbKXlxMckmW+8R/DcOVlYnqe4vaBPX1y4=; b=t00WUramAfwnuKQD8iVdrjZhKL2OwDo/0Ya63l49vmB/kN/zl+zNTkmsTjjbys7H5l WaDFIzoSkokU5juJSnst8rvKilPPw5TbB6+rvGhEWDpjaUxSmEeLDZq/ZL0pwWFCKBLp C2sUndRWdojfhRcgwzrqI2pA3rOe1ArxaOhFjbpDXHkulBxKJ6xzGAgd8KYFw4HGbyQS yszKzzteu526f6FfchXklY51gDI3NJ0kZFVE11v1mvqAa9H7n6QZL/yxQ6fwBvjteUSQ gCLxvrONgRkbUvWP16M97O4VeK3hnKKNlehr8Mp2ry3e4NuhXoX41Bp/tlugaIJOMD2V fhIw==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00000.html">CAED9pY8zae7PF3dXgitmgT7AmKmnKoVD+ix4GTmyEnvNvTDi-A@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;E1YxPqi-0002mR-AX@subversion.gna.org&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on June 08, 2015 - 16:09:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">On 27 May 2015 at 03:09,  &lt;tlinnet@xxxxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Author: tlinnet
Date: Wed May 27 03:09:35 2015
New Revision: 27834

URL: <a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax?rev=27834&amp;view=rev">http://svn.gna.org/viewcvs/relax?rev=27834&amp;view=rev</a>
Log:
Wrote a method to store parameter data and dispersion curves, for the 
protocol of repeated analysis.

This is to prepare for analysis in other programs.
The method loops throug the data pipes, and write the data out.

It then write a bash script, that will concatenate the data in an matrix 
array style, for reading and processing in other programs.

Task #7826 (<a  rel="nofollow" href="https://gna.org/task/?7826">https://gna.org/task/?7826</a>): Write an python class for the 
repeated analysis of dispersion data.

Modified:
    trunk/auto_analyses/relax_disp_repeat_cpmg.py

Modified: trunk/auto_analyses/relax_disp_repeat_cpmg.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/trunk/auto_analyses/relax_disp_repeat_cpmg.py?rev=27834&amp;r1=27833&amp;r2=27834&amp;view=diff">http://svn.gna.org/viewcvs/relax/trunk/auto_analyses/relax_disp_repeat_cpmg.py?rev=27834&amp;r1=27833&amp;r2=27834&amp;view=diff</a>
==============================================================================
--- trunk/auto_analyses/relax_disp_repeat_cpmg.py       (original)
+++ trunk/auto_analyses/relax_disp_repeat_cpmg.py       Wed May 27 03:09:35 
2015
@@ -32,10 +32,11 @@
 from copy import deepcopy
 from datetime import datetime
 from glob import glob
-from os import F_OK, access, getcwd, sep
+from os import F_OK, access, chmod, getcwd, sep
 from numpy import any, asarray, arange, concatenate, max, mean, min, sqrt, 
std, sum
 if dep_check.scipy_module:
     from scipy.stats import pearsonr
+from stat import S_IRWXU, S_IRGRP, S_IROTH
 import sys
 from warnings import warn

@@ -48,7 +49,7 @@
 from pipe_control.mol_res_spin import display_spin, generate_spin_string, 
return_spin, spin_loop
 from pipe_control import pipes
 from prompt.interpreter import Interpreter
-from specific_analyses.relax_disp.data import generate_r20_key, 
has_exponential_exp_type, is_r1_optimised, loop_exp_frq_offset, 
loop_exp_frq_offset_point, return_param_key_from_data
+from specific_analyses.relax_disp.data import generate_r20_key, 
has_exponential_exp_type, has_cpmg_exp_type, is_r1_optimised, 
loop_exp_frq_offset, loop_exp_frq_offset_point, return_param_key_from_data
 from status import Status; status = Status()

 if dep_check.matplotlib_module:
@@ -2665,6 +2666,149 @@
             plt.show()


+    def write_results(self, method=None, model=None, analysis=None, 
list_glob_ini=None, selection=None):
+
+        for glob_ini in list_glob_ini:
</pre></blockquote><pre style="margin: 0em;">

Hi Troels,

I'm now back from holidays and have time to look at your changes and
proposals.  For future maintenance, I would highly recommend adding a
short docstring describing the intent of each of these methods.  That
will allow others to check that any new additions by future authors
actually fit into your method, or if they belong elsewhere.  It will
allow the code to be kept clean and well organised.  The text from the
commit message would be good for this.  The write_convert_file()
method as well would benefit with the text &quot;Write a bash script, that
will concatenate the data in an matrix array style, for reading and
processing in other programs.&quot;.

Cheers,

Edward


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer">You are on the <a href="http://gna.org">Gna!</a> mail server.</div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Mon Jun 08 18:40:06 2015</div>  
</body>
</html>
