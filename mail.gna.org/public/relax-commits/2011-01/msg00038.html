<!-- MHonArc v2.6.16 -->
<!--X-Subject: r12098 &#45; /1.3/test_suite/unit_tests/unit_test_runner.py -->
<!--X-From-R13: rqjneqNaze&#45;erynk.pbz -->
<!--X-Date: Mon, 03 Jan 2011 20:32:13 +0100 -->
<!--X-Message-Id: E1PZq8b&#45;0007D0&#45;SL@subversion.gna.org -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>r12098 - /1.3/test_suite/unit_tests/unit_test_runner.py -- January 03, 2011 - 20:32</title>
<link rel="stylesheet" type="text/css" href="/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="https://gna.org/images/gna.theme/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />r12098 - /1.3/test_suite/unit_tests/unit_test_runner.py</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00038" class="tabs">Index by Date</a> | <a href="threads.html#00038" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00037.html">Date Prev</a>] [<a href="msg00039.html">Date Next</a>] [<a href="msg00037.html">Thread Prev</a>] [<a href="msg00039.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: relax-commits@xxxxxxx</li>
<li class="menuitem">
<em>Date</em>: Mon, 03 Jan 2011 19:32:13 -0000</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00038.html">E1PZq8b-0007D0-SL@subversion.gna.org</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>edward</strong> on January 03, 2011 - 20:32:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Author: bugman
Date: Mon Jan  3 20:32:13 2011
New Revision: 12098

URL: <a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax?rev=12098&amp;view=rev">http://svn.gna.org/viewcvs/relax?rev=12098&amp;view=rev</a>
Log:
Clean up of the unit test runner code for command line usage.


Modified:
    1.3/test_suite/unit_tests/unit_test_runner.py

Modified: 1.3/test_suite/unit_tests/unit_test_runner.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/1.3/test_suite/unit_tests/unit_test_runner.py?rev=12098&amp;r1=12097&amp;r2=12098&amp;view=diff">http://svn.gna.org/viewcvs/relax/1.3/test_suite/unit_tests/unit_test_runner.py?rev=12098&amp;r1=12097&amp;r2=12098&amp;view=diff</a>
==============================================================================
--- 1.3/test_suite/unit_tests/unit_test_runner.py (original)
+++ 1.3/test_suite/unit_tests/unit_test_runner.py Mon Jan  3 20:32:13 2011
@@ -752,32 +752,18 @@
         #Return the result of all the tests.
         return result_string
 
+
+
+# Command line usage.
 if __name__ == '__main__':
-
-# should be unit tests ;-)
-#    print '1',get_module_relative_path('/A/B/C', ('/A/B',))
-#    print '2',get_module_relative_path('/A/B/C', ('/A/B/C',))
-#    print '3',get_module_relative_path('/A/B/C', ('/A/B/D/W',))
-#    print get_common_prefix(('A','B','C'), ('A','B','C'))
-#    print get_common_prefix(('A','B','C'), ('A','B','C','D'))
-#    print get_common_prefix(('D','E'), ('A','B','C','D'))
-#    print get_common_prefix(('A','B','C','F'), ('A','B','C','D'))
-#    print get_common_prefix((),('A','B','C','D'))
-#    print ('A','B','C') == ('A','B','C')
+    # Set up the parser options.
     parser = OptionParser()
-
-    parser.add_option(&quot;-v&quot;, &quot;--verbose&quot;, dest=&quot;verbose&quot;,
-                      help=&quot;verbose test ouput&quot;, default=False, 
action='store_true')
-
-    parser.add_option(&quot;-u&quot;, &quot;--system&quot;, dest=&quot;system_directory&quot;,
-                      help=&quot;path to relax top directory which contains 
test_suite&quot;, default=None)
-
-    parser.add_option(&quot;-s&quot;, &quot;--utest&quot;, dest=&quot;unit_test_directory&quot;, 
help=&quot;default unit test directory&quot;,
-                      default=None)
-
-#    parser.add_option(&quot;-g&quot;, &quot;--gui&quot;, dest=&quot;gui&quot;,help=&quot;run with a 
gui&quot;,default=False, action='store_true')
-
-    usage=&quot;&quot;&quot;
+    parser.add_option(&quot;-v&quot;, &quot;--verbose&quot;, dest=&quot;verbose&quot;, help=&quot;verbose test 
ouput&quot;, default=False, action='store_true')
+    parser.add_option(&quot;-u&quot;, &quot;--system&quot;, dest=&quot;system_directory&quot;, help=&quot;path 
to relax top directory which contains test_suite&quot;, default=None)
+    parser.add_option(&quot;-s&quot;, &quot;--utest&quot;, dest=&quot;unit_test_directory&quot;, 
help=&quot;default unit test directory&quot;, default=None)
+
+    # Set the help string.
+    usage = &quot;&quot;&quot;
     %%prog [options] [&lt;file-or-dir&gt;...]
 
       a program to find and run subsets of the relax unit test suite using 
pyunit.
@@ -796,52 +782,51 @@
                       a test case class called Test_chi2
 
       &lt;dir-path&gt;   =  a path which will be recursivley searched for 
&lt;file-path&gt;s
-                      which end in %s
-      &quot;&quot;&quot; % PY_FILE_EXTENSION
-
+                      which end in &quot;*.py&quot;.
+      &quot;&quot;&quot;
     parser.set_usage(dedent(usage))
 
+    # Parse the args.
     (options, args) = parser.parse_args()
 
-    search_system=True
-    search_unit=True
-
+    # Initalise some flags.
+    search_system = True
+    search_unit = True
+
+    # The system directory.
     if options.system_directory != None:
         if not os.path.exists(options.system_directory):
             print(&quot;The path to the system directory doeesn't exist&quot;)
             print((&quot;provided path: %s&quot; % options.system_directory))
             print(&quot;exiting...&quot;)
             sys.exit(0)
-        search_system=False
-
+        search_system = False
+
+    # A unit test directory.
     if options.unit_test_directory != None:
         if not os.path.exists(options.unit_test_directory):
             print(&quot;The path to the system directory doeesn't exist&quot;)
             print((&quot;provided path: %s&quot; % options.unit_test_directory))
             print(&quot;exiting...&quot;)
             sys.exit(0)
-        search_unit=False
-
+        search_unit = False
+
+    # No arguments.
     if len(args) &lt; 1:
         args = [None]
 
+    # Loop over the arguments.
     for arg in args:
-        runner = Unit_test_runner(test_module=arg, verbose=options.verbose,
-                                  search_for_unit_test_path = search_unit,
-                                  search_for_root_path=search_system)
-
+        # Initialise the unit test runner.
+        runner = Unit_test_runner(test_module=arg, verbose=options.verbose, 
search_for_unit_test_path=search_unit, search_for_root_path=search_system)
+
+        # Add the system directory to the runner.
         if not search_system:
             runner.system_directory = options.system_directory
 
+        # Add the unit test directory to the runner.
         if not search_unit:
             runner.unit_test_directory = options.unit_test_directory
 
+        # Execute the tests.
         runner.run()
-
-#    root = tk.Tk()
-#    root.title(&quot;relax unit tests&quot;)
-#    gui = unitgui.TkTestRunner(root)
-#    runner.run()
-
-
-



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer">You are on the <a href="http://gna.org">Gna!</a> mail server.</div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Mon Jan 03 20:40:01 2011</div>  
</body>
</html>
