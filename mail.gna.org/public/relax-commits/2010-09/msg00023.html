<!-- MHonArc v2.6.16 -->
<!--X-Subject: r11557 &#45; /branches/bieri_gui/gui_bieri/controller.py -->
<!--X-From-R13: rqjneqNaze&#45;erynk.pbz -->
<!--X-Date: Wed, 15 Sep 2010 17:34:58 +0200 -->
<!--X-Message-Id: E1Ovu0g&#45;000825&#45;HB@subversion.gna.org -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>r11557 - /branches/bieri_gui/gui_bieri/controller.py -- September 15, 2010 - 17:34</title>
<link rel="stylesheet" type="text/css" href="/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="https://gna.org/images/gna.theme/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />r11557 - /branches/bieri_gui/gui_bieri/controller.py</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00023" class="tabs">Index by Date</a> | <a href="threads.html#00023" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00022.html">Date Prev</a>] [<a href="msg00024.html">Date Next</a>] [<a href="msg00022.html">Thread Prev</a>] [<a href="msg00024.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: relax-commits@xxxxxxx</li>
<li class="menuitem">
<em>Date</em>: Wed, 15 Sep 2010 15:34:58 -0000</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00023.html">E1Ovu0g-000825-HB@subversion.gna.org</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>edward</strong> on September 15, 2010 - 17:34:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Author: bugman
Date: Wed Sep 15 17:34:58 2010
New Revision: 11557

URL: <a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax?rev=11557&amp;view=rev">http://svn.gna.org/viewcvs/relax?rev=11557&amp;view=rev</a>
Log:
Modularised the relax controller frame.

This will give more flexibility in modifying this GUI element, including the 
ability to resize the
window.


Modified:
    branches/bieri_gui/gui_bieri/controller.py

Modified: branches/bieri_gui/gui_bieri/controller.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/bieri_gui/gui_bieri/controller.py?rev=11557&amp;r1=11556&amp;r2=11557&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/bieri_gui/gui_bieri/controller.py?rev=11557&amp;r1=11556&amp;r2=11557&amp;view=diff</a>
==============================================================================
--- branches/bieri_gui/gui_bieri/controller.py (original)
+++ branches/bieri_gui/gui_bieri/controller.py Wed Sep 15 17:34:58 2010
@@ -46,72 +46,121 @@
     &quot;&quot;&quot;The relax controller window.&quot;&quot;&quot;
 
     def __init__(self, *args, **kwds):
+        &quot;&quot;&quot;Set up the relax controller frame.&quot;&quot;&quot;
 
         # Create GUI elements
         kwds[&quot;style&quot;] = wx.MINIMIZE_BOX | wx.SYSTEM_MENU | wx.CAPTION | 
wx.CLOSE_BOX
         wx.Frame.__init__(self, *args, **kwds)
 
-        # header
-        self.relax_logo = wx.StaticBitmap(self, -1, 
wx.Bitmap(IMAGE_PATH+'relax.gif', wx.BITMAP_TYPE_ANY))
-        self.header_log = wx.StaticText(self, -1, &quot;&quot;, style=wx.ALIGN_CENTRE)
+        # Set up the frame.
+        sizer = self.setup_frame()
+
+        # Add the relax logo.
+        self.add_relax_logo(sizer)
+
+        # Add the header for the log.
+        self.add_log_header(sizer)
+
+        # Add the log panel.
+        self.add_log(sizer)
+
+        # Add the progress bar.
+        self.add_progress(sizer)
+
+        # Add the buttons.
+        self.add_buttons(sizer)
+
+
+    def add_buttons(self, sizer):
+        &quot;&quot;&quot;Add the buttons to the sizer.
+
+        @param sizer:   The sizer element to pack the buttons into.
+        @type sizer:    wx.Sizer instance
+        &quot;&quot;&quot;
+
+        # Create a horizontal layout for the buttons.
+        button_sizer = wx.BoxSizer(wx.HORIZONTAL)
+        sizer.Add(button_sizer, 5, wx.ALIGN_CENTER_HORIZONTAL, 0)
+
+        # The cancel button.
+        cancel_button = wx.Button(self, -1, &quot;Kill and Exit&quot;)
+        cancel_button.SetToolTipString(&quot;Abort relax calculation&quot;)
+        button_sizer.Add(cancel_button, 0, wx.ADJUST_MINSIZE, 0)
+        self.Bind(wx.EVT_BUTTON, self.cancel_calculation, cancel_button)
+
+        # The close button.
+        close_button = wx.Button(self, -1, &quot;Close&quot;)
+        close_button.SetToolTipString(&quot;Close log window&quot;)
+        button_sizer.Add(close_button, 0, wx.ADJUST_MINSIZE, 0)
+        self.Bind(wx.EVT_BUTTON, self.handler_close, close_button)
+
+
+    def add_log(self, sizer):
+        &quot;&quot;&quot;Add the log panel to the sizer.
+
+        @param sizer:   The sizer element to pack the log panel into.
+        @type sizer:    wx.Sizer instance
+        &quot;&quot;&quot;
 
         # Log panel
-        self.log_panel = wx.TextCtrl(self, -1, &quot;&quot;, 
style=wx.TE_MULTILINE|wx.TE_READONLY)
-
-        # progress bar
-        self.progress_bar = wx.Gauge(self, -1, 100)
-
-        # buttons
-        self.cancel_button = wx.Button(self, -1, &quot;Kill and Exit&quot;)
-        self.close_button = wx.Button(self, -1, &quot;Close&quot;)
-
-        # Create Objects (see below)
-        self.__set_properties()
-        self.__do_layout()
-
-        # Button actions
-        self.Bind(wx.EVT_BUTTON, self.cancel_calculation, self.cancel_button)
-        self.Bind(wx.EVT_BUTTON, self.handler_close, self.close_button)
-
-        # Close the window cleanly (hide so it can be reopened).
-        self.Bind(wx.EVT_CLOSE, self.handler_close)
-
-        # Integrate Singleton object.
-        status = Status()
-
-
-    def __do_layout(self):
-
-        # create the lay out
-        main_sizer = wx.FlexGridSizer(5, 1, 0, 0)
-        button_sizer = wx.BoxSizer(wx.HORIZONTAL)
-        main_sizer.Add(self.relax_logo, 0, 
wx.TOP|wx.ALIGN_CENTER_HORIZONTAL|wx.ADJUST_MINSIZE, 5)
-        main_sizer.Add(self.header_log, 0, 
wx.ALIGN_CENTER_HORIZONTAL|wx.ADJUST_MINSIZE, 0)
-        main_sizer.Add(self.log_panel, 0, wx.ALL|wx.ADJUST_MINSIZE, 5)
-        main_sizer.Add(self.progress_bar, 0, wx.ALL|wx.ADJUST_MINSIZE, 5)
-        button_sizer.Add(self.cancel_button, 0, wx.ADJUST_MINSIZE, 0)
-        button_sizer.Add(self.close_button, 0, wx.ADJUST_MINSIZE, 0)
-        main_sizer.Add(button_sizer, 5, wx.ALIGN_CENTER_HORIZONTAL, 0)
-        self.SetSizer(main_sizer)
-        self.Layout()
-        self.SetSize((600, 600))
-        self.Centre()
-
-
-    def __set_properties(self):
-
-        # properties of GUI elements (used at start up)
-        self.SetTitle(&quot;relaxGUI - Log Window&quot;)
-        _icon = wx.EmptyIcon()
-        _icon.CopyFromBitmap(wx.Bitmap(IMAGE_PATH+'relax.gif', 
wx.BITMAP_TYPE_ANY))
-        self.SetIcon(_icon)
-        self.SetSize((600, 600))
-        self.header_log.SetMinSize((600, 18))
-        self.header_log.SetFont(wx.Font(11, wx.DEFAULT, wx.NORMAL, wx.BOLD, 
0, &quot;&quot;))
-        self.log_panel.SetMinSize((590, 410))
-        self.progress_bar.SetMinSize((590, 20))
-        self.cancel_button.SetToolTipString(&quot;Abort relax calculation&quot;)
-        self.close_button.SetToolTipString(&quot;Close log window&quot;)
+        log_panel = wx.TextCtrl(self, -1, &quot;&quot;, 
style=wx.TE_MULTILINE|wx.TE_READONLY)
+
+        # Set a size to the log panel.
+        log_panel.SetMinSize((590, 410))
+
+        # Add to the sizer.
+        sizer.Add(log_panel, 0, wx.ALL|wx.ADJUST_MINSIZE, 5)
+
+
+    def add_log_header(self, sizer):
+        &quot;&quot;&quot;Add the log header to the sizer.
+
+        @param sizer:   The sizer element to pack the log header into.
+        @type sizer:    wx.Sizer instance
+        &quot;&quot;&quot;
+
+        # The log header text.
+        header_log = wx.StaticText(self, -1, &quot;&quot;, style=wx.ALIGN_CENTRE)
+
+        # Set the minimum size.
+        header_log.SetMinSize((600, 18))
+
+        # Set the font info.
+        header_log.SetFont(wx.Font(11, wx.DEFAULT, wx.NORMAL, wx.BOLD, 0, 
&quot;&quot;))
+
+        # Add to the sizer.
+        sizer.Add(header_log, 0, 
wx.ALIGN_CENTER_HORIZONTAL|wx.ADJUST_MINSIZE, 0)
+
+
+    def add_progress(self, sizer):
+        &quot;&quot;&quot;Add the progress bar to the sizer.
+
+        @param sizer:   The sizer element to pack the progress bar into.
+        @type sizer:    wx.Sizer instance
+        &quot;&quot;&quot;
+
+        # The progress bar.
+        progress_bar = wx.Gauge(self, -1, 100)
+
+        # Set the size of the progress bar.
+        progress_bar.SetMinSize((590, 20))
+
+        # Add the progress bar.
+        sizer.Add(progress_bar, 0, wx.ALL|wx.ADJUST_MINSIZE, 5)
+
+
+    def add_relax_logo(self, sizer):
+        &quot;&quot;&quot;Add the relax logo to the sizer.
+
+        @param sizer:   The sizer element to pack the relax logo into.
+        @type sizer:    wx.Sizer instance
+        &quot;&quot;&quot;
+
+        # The logo.
+        logo = wx.StaticBitmap(self, -1, wx.Bitmap(IMAGE_PATH+'relax.gif', 
wx.BITMAP_TYPE_ANY))
+
+        # Add the relax logo.
+        sizer.Add(logo, 0, 
wx.TOP|wx.ALIGN_CENTER_HORIZONTAL|wx.ADJUST_MINSIZE, 5)
 
 
     def cancel_calculation(self, event):
@@ -142,13 +191,47 @@
         self.Hide()
 
 
+    def setup_frame(self):
+        &quot;&quot;&quot;Set up the relax controller frame.
+        @return:    The sizer object.
+        @rtype:     wx.Sizer instance
+        &quot;&quot;&quot;
+
+        # Set the frame title.
+        self.SetTitle(&quot;The relax controller&quot;)
+
+        # Use a grid sizer for packing the elements.
+        main_sizer = wx.FlexGridSizer(5, 1, 0, 0)
+
+        # Pack the sizer into the frame.
+        self.SetSizer(main_sizer)
+
+        # Close the window cleanly (hide so it can be reopened).
+        self.Bind(wx.EVT_CLOSE, self.handler_close)
+
+        # Set the default size of the controller.
+        self.SetSize((600, 600))
+
+        # Handle window resizing.
+        self.Layout()
+
+        # Centre the frame.
+        self.Centre()
+
+        # Return the sizer.
+        return main_sizer
+
+
 
 class Redirect_text(object):
     &quot;&quot;&quot;Class to redirect relax output to relaxGUI - log panel and progress 
bar.&quot;&quot;&quot;
 
     def __init__(self,aWxTextCtrl):
         self.out=aWxTextCtrl
+
+        # Integrate the status singleton object.
         self.status = Status()
+
 
     def limit_entries(self):
         &quot;&quot;&quot; Function to overcome feedback problem of wx.CallAfter() 
command&quot;&quot;&quot;



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer">You are on the <a href="http://gna.org">Gna!</a> mail server.</div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Wed Sep 15 19:00:02 2010</div>  
</body>
</html>
