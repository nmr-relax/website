<!-- MHonArc v2.6.10 -->
<!--X-Subject: r2697 &#45; in /branches/tensor_pdb: generic_fns/molmol.py	prompt/molmol.py -->
<!--X-From-R13: rqjneq.qnhiretarNtznvy.pbz -->
<!--X-Date: Sun, 29 Oct 2006 07:14:38 +0100 -->
<!--X-Message-Id: E1Ge3vs&#45;0002e3&#45;C1@subversion.gna.org -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>r2697 - in /branches/tensor_pdb: generic_fns/molmol.py	prompt/molmol.py -- October 29, 2006 - 07:14</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />r2697 - in /branches/tensor_pdb: generic_fns/molmol.py	prompt/molmol.py</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00132" class="tabs">Index by Date</a> | <a href="threads.html#00132" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00131.html">Date Prev</a>] [<a href="msg00133.html">Date Next</a>] [<a href="msg00131.html">Thread Prev</a>] [<a href="msg00133.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: relax-commits@xxxxxxx</li>
<li class="menuitem">
<em>Date</em>: Sun, 29 Oct 2006 06:14:08 -0000</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00132.html">E1Ge3vs-0002e3-C1@subversion.gna.org</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>edward . dauvergne</strong> on October 29, 2006 - 07:14:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Author: bugman
Date: Sun Oct 29 07:14:07 2006
New Revision: 2697

URL: <a  href="http://svn.gna.org/viewcvs/relax?rev=2697&amp;view=rev">http://svn.gna.org/viewcvs/relax?rev=2697&amp;view=rev</a>
Log:
Implemented the 'molmol.command()' user function.

The user function did previously exist, but it hadn't been implemented in the 
generic code.  The
user function was calling the wrong function 'self.write' in 
'generic_fns/molmol.py'.


Modified:
    branches/tensor_pdb/generic_fns/molmol.py
    branches/tensor_pdb/prompt/molmol.py

Modified: branches/tensor_pdb/generic_fns/molmol.py
URL: 
<a  href="http://svn.gna.org/viewcvs/relax/branches/tensor_pdb/generic_fns/molmol.py?rev=2697&amp;r1=2696&amp;r2=2697&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/tensor_pdb/generic_fns/molmol.py?rev=2697&amp;r1=2696&amp;r2=2697&amp;view=diff</a>
==============================================================================
--- branches/tensor_pdb/generic_fns/molmol.py (original)
+++ branches/tensor_pdb/generic_fns/molmol.py Sun Oct 29 07:14:07 2006
@@ -37,6 +37,20 @@
         &quot;&quot;&quot;Function for clearing the Molmol command history.&quot;&quot;&quot;
 
         self.command_history = &quot;&quot;
+
+
+    def command(self, run, command):
+        &quot;&quot;&quot;Function for sending Molmol commands to the program pipe.&quot;&quot;&quot;
+
+        # Arguments.
+        self.run = run
+
+        # Test if the run exists.
+        if not self.run in self.relax.data.run_names:
+            raise RelaxNoRunError, self.run
+
+        # Pass the command to Molmol.
+        self.pipe_write(command)
 
 
     def create_macro(self):

Modified: branches/tensor_pdb/prompt/molmol.py
URL: 
<a  href="http://svn.gna.org/viewcvs/relax/branches/tensor_pdb/prompt/molmol.py?rev=2697&amp;r1=2696&amp;r2=2697&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/tensor_pdb/prompt/molmol.py?rev=2697&amp;r1=2696&amp;r2=2697&amp;view=diff</a>
==============================================================================
--- branches/tensor_pdb/prompt/molmol.py (original)
+++ branches/tensor_pdb/prompt/molmol.py Sun Oct 29 07:14:07 2006
@@ -56,8 +56,23 @@
         self.__relax__.generic.molmol.clear_history()
 
 
-    def command(self, command):
+    def command(self, run=None, command=None):
         &quot;&quot;&quot;Function for executing a user supplied Molmol command.
+
+        Keyword Arguments
+        ~~~~~~~~~~~~~~~~~
+
+        run:  The name of the run.
+
+        command:  The Molmol command to execute.
+
+
+        Description
+        ~~~~~~~~~~~
+
+        This user function allows you to pass Molmol commands to the 
program.  This can be useful
+        for automation or scripting.
+
 
         Example
         ~~~~~~~
@@ -68,15 +83,20 @@
         # Function intro text.
         if self.__relax__.interpreter.intro:
             text = sys.ps3 + &quot;molmol.command(&quot;
-            text = text + &quot;command=&quot; + `command` + &quot;)&quot;
-            print text
+            text = text + &quot;run=&quot; + `run`
+            text = text + &quot;, command=&quot; + `command` + &quot;)&quot;
+            print text
+
+        # The run name.
+        if type(run) != str:
+            raise RelaxStrError, ('run', run)
 
         # The command argument.
         if type(command) != str:
             raise RelaxStrError, ('command', command)
 
         # Execute the functional code.
-        self.__relax__.generic.molmol.write(command=command)
+        self.__relax__.generic.molmol.command(run=run, command=command)
 
 
     def macro_exec(self, run=None, data_type=None, style=&quot;classic&quot;, 
colour_start=None, colour_end=None, colour_list=None):



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Sun Oct 29 07:40:05 2006</div>  
</body>
</html>
