<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: r26977 &#45; /trunk/test_suite/system_tests/spectrum.py -->
<!--X-From-R13: "Sqjneq q'Ohiretar" &#60;rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Sat, 06 Dec 2014 17:15:46 +0100 -->
<!--X-Message-Id: CAED9pY9aE&#45;TGeF9Vavt=jckX8M3+FzzNB4Sn=2C27B9=4o&#45;&#45;zg@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: E1XxGD4&#45;0006Ut&#45;U4@subversion.gna.org -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: r26977 - /trunk/test_suite/system_tests/spectrum.py -- December 06, 2014 - 17:15</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: r26977 - /trunk/test_suite/system_tests/spectrum.py</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00028" class="tabs">Index by Date</a> | <a href="threads.html#00028" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00027.html">Date Prev</a>] [<a href="msg00029.html">Date Next</a>] [<a href="msg00027.html">Thread Prev</a>] [<a href="msg00030.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: &quot;relax-devel@xxxxxxx&quot; &lt;relax-devel@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Sat, 6 Dec 2014 17:15:15 +0100</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113; h=mime-version:sender:in-reply-to:references:date:message-id:subject :from:to:content-type:content-transfer-encoding; bh=88U1zdl7/wgH2cBkwrLSBbQhKWl6WjkP9vuG3WGgdp8=; b=ZzHPin0Aoe9O7Ksni4B8qrblW1hfeZoNqK4r3swlO96+wlh4ZwqBXHusLHNIlKeMO3 +s29zJ1iNQae+Bx5GxXDP2XV+hPztCSnJ2diVVzvTGTHi98qt1D3za+V2vNF1OBeXCv1 YRwI0oUVVZ0k+ipZ4Qvw1M0/uqa/1jmk/t1DgiFjaUVNYnvCRatLiRNEYBkRg9WCshco ywl6VTVx/+o89oQJ4Ul47pnyjUO6sLmqQddCkDSIZfZo4XG0v0+5ODS7IwfFJHlXD7ER gi/rJBwu3b/f5L4gULoQjoL2GrL/niGea/CJGDfk6e8X2zB7Xv2cFA/WqsLY3VKimqlo mzAA==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;CAED9pY9aE-TGeF9Vavt=jckX8M3+FzzNB4Sn=2C27B9=4o--zg@mail.gmail.com&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;E1XxGD4-0006Ut-U4@subversion.gna.org&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on December 06, 2014 - 17:15:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Hi Troels,

You should here store the outfile as self.tmpfile or ds.tmpfile so
that the base class TearDown method removes the file at the end.  You
also will have to remove the delete argument:

[edward@localhost ~]$ python2.5
Python 2.5.6 (r256, Dec  4 2014, 15:01:21)
[GCC 4.8.2] on linux3
Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.
</pre><blockquote class="blockquote"><blockquote class="blockquote"><blockquote class="blockquote"><pre style="margin: 0em;">from tempfile import mkdtemp, NamedTemporaryFile
outfile= NamedTemporaryFile(delete=False).name
</pre></blockquote></blockquote></blockquote><pre style="margin: 0em;">Traceback (most recent call last):
  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
TypeError: NamedTemporaryFile() got an unexpected keyword argument 'delete'
</pre><blockquote class="blockquote"><blockquote class="blockquote"><blockquote class="blockquote"><pre style="margin: 0em;">

</pre></blockquote></blockquote></blockquote><pre style="margin: 0em;">

Cheers,

Edward


On 6 December 2014 at 15:19,  &lt;tlinnet@xxxxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Author: tlinnet
Date: Sat Dec  6 15:19:46 2014
New Revision: 26977

URL: <a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax?rev=26977&amp;view=rev">http://svn.gna.org/viewcvs/relax?rev=26977&amp;view=rev</a>
Log:
Added systemtest Spectrum.test_grace_sn_ratio to help implement plotting 
the signaÃl to noise ratio per residue.

Modified:
    trunk/test_suite/system_tests/spectrum.py

Modified: trunk/test_suite/system_tests/spectrum.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/trunk/test_suite/system_tests/spectrum.py?rev=26977&amp;r1=26976&amp;r2=26977&amp;view=diff">http://svn.gna.org/viewcvs/relax/trunk/test_suite/system_tests/spectrum.py?rev=26977&amp;r1=26976&amp;r2=26977&amp;view=diff</a>
==============================================================================
--- trunk/test_suite/system_tests/spectrum.py   (original)
+++ trunk/test_suite/system_tests/spectrum.py   Sat Dec  6 15:19:46 2014
@@ -194,3 +194,32 @@
         # View the plotting.
         if show_grace:
             self.interpreter.grace.view(file=outfile, dir=filedir, 
grace_exe='xmgrace')
+
+
+    def test_grace_sn_ratio(self):
+        &quot;&quot;&quot;Test grace plotting function for plotting the signal to noise 
ratio per residue.
+        &quot;&quot;&quot;
+
+        # Setup data.
+        self.setup_signal_noise_ratio()
+
+        # Calculate the signal to noise ratio calculation.
+        self.interpreter.spectrum.sn_ratio()
+
+        # Deselect spin with negative intensity.
+        self.interpreter.deselect.spin(spin_id=':4@N', boolean='AND', 
change_all=False)
+
+        # Test show grace. If showing, the temporary directory created, 
should not be deleted.
+        show_grace = False
+        if show_grace:
+            outfile= NamedTemporaryFile(delete=False).name
+            filedir = dirname(outfile)
+        else:
+            filedir = self.tmpdir
+        outfile = 'int_sn.agr'
+
+        self.interpreter.grace.write(x_data_type='res_num', 
y_data_type='sn_ratio', file=outfile, dir=filedir, force=True)
+
+        # View the plotting.
+        if show_grace:
+            self.interpreter.grace.view(file=outfile, dir=filedir, 
grace_exe='xmgrace')


_______________________________________________
relax (<a  rel="nofollow" href="http://www.nmr-relax.com">http://www.nmr-relax.com</a>)

This is the relax-commits mailing list
relax-commits@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="http://www.nmr-relax.com/mail.gna.org/listinfo/relax-commits">https://mail.gna.org/listinfo/relax-commits</a>
</pre></blockquote><pre style="margin: 0em;">


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00030" href="msg00030.html">Re: r26977 - /trunk/test_suite/system_tests/spectrum.py</a></strong>
<ul><li><em>From:</em> Troels Emtekær Linnet</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Sat Dec 06 19:00:10 2014</div>  
</body>
</html>
