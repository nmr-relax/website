<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: NOE analysis issue -->
<!--X-From-R13: "Sqjneq q'Ohiretar" <rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Mon, 03 Feb 2014 10:19:13 +0100 -->
<!--X-Message-Id: CAED9pY&#45;g54Cq4z&#45;r_KTqsW4rYSTjEP9evgYF+01DXvZUCnC9ng@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 2201F318&#45;1928&#45;4531&#45;814E&#45;33633B4F861E@email.arizona.edu -->
<!--X-Reference: CAED9pY9SS5d3MC43HFyAfsRr0e52y9Ek0rvZ3C0fKtdcJCELjQ@mail.gmail.com -->
<!--X-Reference: 680C719B&#45;9E3E&#45;4EE8&#45;86A2&#45;51711016AF40@email.arizona.edu -->
<!--X-Reference: CAED9pY&#45;bcjkCkubiRdLs6Gpz&#45;P7XydO9Y3H0dej2Zz4+gYum8w@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: NOE analysis issue -- February 03, 2014 - 10:19</title>
<link rel="stylesheet" type="text/css" href="/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="https://gna.org/images/gna.theme/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: NOE analysis issue</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00002" class="tabs">Index by Date</a> | <a href="threads.html#00002" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00001.html">Date Prev</a>] [<a href="msg00003.html">Date Next</a>] [<a href="msg00000.html">Thread Prev</a>] [<a href="msg00004.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Dhanasekaran Muthu &lt;dhanas@xxxxxxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Mon, 3 Feb 2014 10:18:43 +0100</li>
<li class="menuitem">
<em>Cc</em>: &quot;relax-users@xxxxxxx&quot; &lt;relax-users@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;	h=mime-version:sender:in-reply-to:references:date:message-id:subject	:from:to:cc:content-type:content-transfer-encoding;	bh=Ir1LRrR/hicb8UEbO+/fZW/nNdro+ZI+AOkPetUr0jI=;	b=wdctbgh2+uFKvcRPvqrB86xplRWYe+7qOFv905wbjD0bclU464LTdUvD/pvu/nPeuU	3IqlvVt15j78DF3/CTzUh2gUy7+N1M6dDBufr46W7ailoJg2YhBVCINJSE8sEHjMObLt	/beEgWOd7Ld/76z10IbGJzuA1GDZljdONWgqYzn6cgRMFqI3RRpQKIS8yM5nXJjc1Su3	BRQIcDpGPYMxbBskIteXWvGmJrppEu6oBIeZZkJj6hNM7Jtj47hWr5OiQZJczM7p6yOk	j58jcyZLkepl6/DhdNK7gK7dhvzK7J3ifNviqBIgMV9t43tekTFh0uBKGdaPaxw3zdAK	a/RQ==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00002.html">CAED9pY-g54Cq4z-r_KTqsW4rYSTjEP9evgYF+01DXvZUCnC9ng@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;2201F318-1928-4531-814E-33633B4F861E@xxxxxxxxxxxxxxxxx&gt;	&lt;CAED9pY9SS5d3MC43HFyAfsRr0e52y9Ek0rvZ3C0fKtdcJCELjQ@xxxxxxxxxxxxxx&gt;	&lt;680C719B-9E3E-4EE8-86A2-51711016AF40@xxxxxxxxxxxxxxxxx&gt;	&lt;CAED9pY-bcjkCkubiRdLs6Gpz-P7XydO9Y3H0dej2Zz4+gYum8w@xxxxxxxxxxxxxx&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on February 03, 2014 - 10:19:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Hi Dhanas,

If you have not already seen, I have released relax 3.1.4 which
contains the fix for the bug you found
(<a  rel="nofollow" href="https://gna.org/forum/forum.php?forum_id=2433">https://gna.org/forum/forum.php?forum_id=2433</a>).  If you upgrade to
this version, you will be able to complete the NOE analysis using your
duplicated spectra.  If you notice any other strange behaviour with
relax, please feel free to report this as a bug.  The philosophy of
relax is that anything which is non-intuitive is a bug.

Cheers,

Edward



On 31 January 2014 09:45, Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi Dhanas,

For reference in the mailing list archives
(<a  rel="nofollow" href="http://thread.gmane.org/gmane.science.nmr.relax.user/1543">http://thread.gmane.org/gmane.science.nmr.relax.user/1543</a>), the bug
report is located at <a  rel="nofollow" href="https://gna.org/bugs/?21562">https://gna.org/bugs/?21562</a>.  To catch this bug,
I will create a relax system test.  This will consist of:

- A truncated data set.  I think I'll take your data for residues :12,
:13, and :14, and delete all other data from the peak lists and PDB
files.

- A simple relax script to perform the analysis.  I will just copy the
user functions from the relax log messages you posted at
<a  rel="nofollow" href="http://thread.gmane.org/gmane.science.nmr.relax.user/1543">http://thread.gmane.org/gmane.science.nmr.relax.user/1543</a> (now in the
text file <a  rel="nofollow" href="https://gna.org/bugs/download.php?file_id=19920">https://gna.org/bugs/download.php?file_id=19920</a> attached to
bug #21562).  That is everything starting with &quot;relax&gt;&quot;, i.e.:

pipe.create('NOE fail', 'noe')
structure.read_pdb(file='2AT7_fmf.pdb')
structure.load_spins(spin_id='@N', mol_name_target=None, ave_pos=True)
spectrum.read_intensities(file='n_np4_hs_ph65_02mm_noe1.list',
dir=None, spectrum_id='no1', dim=1, int_method='height', int_col=None,
spin_id_col=None, mol_name_col=1, res_num_col=2, res_name_col=3,
spin_num_col=4, spin_name_col=5, sep=None, spin_id=None, ncproc=None)
noe.spectrum_type(spectrum_type='ref', spectrum_id='no1')
spectrum.read_intensities(file='n_np4_hs_ph65_02mm_noe2.list',
dir=None, spectrum_id='no2', dim=1, int_method='height', int_col=None,
spin_id_col=None, mol_name_col=1, res_num_col=2, res_name_col=3,
spin_num_col=4, spin_name_col=5, sep=None, spin_id=None, ncproc=None)
spectrum.replicated(spectrum_ids=['no2', 'no1'])
noe.spectrum_type(spectrum_type='ref', spectrum_id='no2')
spectrum.read_intensities(file='y_np4_hs_ph65_02mm_noe1.list',
dir=None, spectrum_id='yes1', dim=1, int_method='height',
int_col=None, spin_id_col=None, mol_name_col=1, res_num_col=2,
res_name_col=3, spin_num_col=4, spin_name_col=5, sep=None,
spin_id=None, ncproc=None)
noe.spectrum_type(spectrum_type='sat', spectrum_id='yes1')
spectrum.read_intensities(file='y_np4_hs_ph65_02mm_noe2.list',
dir=None, spectrum_id='yes2', dim=1, int_method='height',
int_col=None, spin_id_col=None, mol_name_col=1, res_num_col=2,
res_name_col=3, spin_num_col=4, spin_name_col=5, sep=None,
spin_id=None, ncproc=None)
spectrum.replicated(spectrum_ids=['yes2', 'yes1'])
noe.spectrum_type(spectrum_type='sat', spectrum_id='yes2')
spectrum.error_analysis(subset=None)
calc(verbosity=1)
value.write(param='noe', file='noe.600.out', dir='.', scaling=1.0,
comment=None, bc=False, force=True)
results.write(file='results', dir='.', compress_type=1, force=True)
grace.write(x_data_type='res_num', y_data_type='ref', spin_id=None,
plot_data='value', file='ref.agr', dir='.', force=True, norm=False)
grace.write(x_data_type='res_num', y_data_type='sat', spin_id=None,
plot_data='value', file='sat.agr', dir='.', force=True, norm=False)
grace.write(x_data_type='res_num', y_data_type='noe', spin_id=None,
plot_data='value', file='noe.agr', dir='.', force=True, norm=False)

I added two user functions at the start as the log was not all there.
The directories have all been changed as well.  This script triggers
the error, and it can be seen that it is independent of the GUI and
operating system.  Using the Mac OS X dmg distribution running scripts
from the terminal is not possible, but you can use the 'script' user
function from the user function menus to run it.  Once the test is
functional, it should be easy to find the problem and fix it.

Cheers,

Edward



On 30 January 2014 17:53, Dhanasekaran Muthu &lt;dhanas@xxxxxxxxxxxxxxxxx&gt; 
wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi Edward,

Thanks for your prompt response.I will submit a bug report as you have 
described. This is the problem on Linux version also. The noe.out produces 
null values.

Dhanas


DhanasOn Jan 30, 2014, at 9:02 AM, Edward d'Auvergne 
&lt;edward@xxxxxxxxxxxxx&gt; wrote:

</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi Dhanas,

The problem you are seeing is actually because of the relax warnings
starting at:

RelaxWarning: The spin '#2AT7_fmf_mol1:3@N' has been deselected
because of insufficient data.

From looking at the other messages, I am unsure as to why this is not
working.  To help solve this problem would you be able to submit a bug
report (<a  rel="nofollow" href="https://gna.org/bugs/?func=additem&amp;group=relax">https://gna.org/bugs/?func=additem&amp;group=relax</a>)?  Cheers!  If
you could attach to that bug report all of the input files as well as
a description of all steps you took to produce the error, that would
be appreciated (you can truncate the files and maybe randomise the
heights if you would like keep the data private for now).  It would
also be good if you could attach a file with the entire contents of
the relax controller window.  If I am able to use your data and
reproduce the bug, then I should be able to fix this problem within a
few minutes.

Cheers,

Edward


P. S.  Note that for a public mailing list, it is best not to attach
any files.  The relax bug, task, and support request trackers are
where files should be uploaded.




On 29 January 2014 21:55, Dhanasekaran Muthu &lt;dhanas@xxxxxxxxxxxxxxxxx&gt; 
wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi,

I am using Relax Ver 3.1.3 on Mac OS. It worked beautifully to calculate 
the R1 and R2 values using replicated spectra to get the error. But it 
fails to calculate NOE if I use replicated spectra for error. It 
produces empty NOE.out file.  However it works fine if I just use only 
one set of data(saturated and reference) and baseplane RMSD for error 
calculation.

Please let me know if any of you faced this problem and how you solved 
this issue.

Thanks,

Dhanas


Here is the log copied from the controller: (the detailed one is 
attached in this E-mail)

relax&gt; value.write(param='noe', file='noe.600.out', 
dir='/Users/Dhanas/Desktop/relax.app/Contents/Resources', scaling=1.0, 
comment=None, bc=False, force=True)
Opening the file 
'/Users/Dhanas/Desktop/relax.app/Contents/Resources/noe.600.out' for 
writing.

relax&gt; results.write(file='results', 
dir='/Users/Dhanas/Desktop/relax.app/Contents/Resources', 
compress_type=1, force=True)
Opening the file 
'/Users/Dhanas/Desktop/relax.app/Contents/Resources/results.bz2' for 
writing.

relax&gt; grace.write(x_data_type='res_num', y_data_type='ref', 
spin_id=None, plot_data='value', file='ref.agr', 
dir='/Users/Dhanas/Desktop/relax.app/Contents/Resources/grace', 
force=True, norm=False)
Opening the file 
'/Users/Dhanas/Desktop/relax.app/Contents/Resources/grace/ref.agr' for 
writing.
RelaxWarning: No data could be found, creating an empty file.

relax&gt; grace.write(x_data_type='res_num', y_data_type='sat', 
spin_id=None, plot_data='value', file='sat.agr', 
dir='/Users/Dhanas/Desktop/relax.app/Contents/Resources/grace', 
force=True, norm=False)
Opening the file 
'/Users/Dhanas/Desktop/relax.app/Contents/Resources/grace/sat.agr' for 
writing.
RelaxWarning: No data could be found, creating an empty file.

relax&gt; grace.write(x_data_type='res_num', y_data_type='noe', 
spin_id=None, plot_data='value', file='noe.agr', 
dir='/Users/Dhanas/Desktop/relax.app/Contents/Resources/grace', 
force=True, norm=False)
Opening the file 
'/Users/Dhanas/Desktop/relax.app/Contents/Resources/grace/noe.agr' for 
writing.
RelaxWarning: No data could be found, creating an empty file.

_______________________________________________
relax (<a  rel="nofollow" href="http://www.nmr-relax.com">http://www.nmr-relax.com</a>)

This is the relax-users mailing list
relax-users@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="https://mail.gna.org/listinfo/relax-users">https://mail.gna.org/listinfo/relax-users</a>

</pre></blockquote></blockquote><pre style="margin: 0em;">

</pre></blockquote></blockquote><pre style="margin: 0em;">


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00004" href="msg00004.html">Re: NOE analysis issue</a></strong>
<ul><li><em>From:</em> Muthu, Dhanasekaran - (dhanas)</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer">You are on the <a href="http://gna.org">Gna!</a> mail server.</div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Mon Feb 10 17:20:05 2014</div>  
</body>
</html>
