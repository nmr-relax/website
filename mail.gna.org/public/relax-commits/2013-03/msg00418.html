<!-- MHonArc v2.6.16 -->
<!--X-Subject: r19000 &#45; in /trunk: auto_analyses/ maths_fns/frame_order/	sample_scripts/frame_order/ specific_fns/ test_suite/shared_data/f... -->
<!--X-From-R13: rqjneqNaze&#45;erynk.pbz -->
<!--X-Date: Fri, 22 Mar 2013 17:27:58 +0100 -->
<!--X-Message-Id: E1UJ4ow&#45;0001Lp&#45;7N@subversion.gna.org -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>r19000 - in /trunk: auto_analyses/ maths_fns/frame_order/	sample_scripts/frame_order/ specific_fns/ test_suite/shared_data/f... -- March 22, 2013 - 17:27</title>
<link rel="stylesheet" type="text/css" href="/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="https://gna.org/images/gna.theme/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />r19000 - in /trunk: auto_analyses/ maths_fns/frame_order/	sample_scripts/frame_order/ specific_fns/ test_suite/shared_data/f...</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00418" class="tabs">Index by Date</a> | <a href="threads.html#00418" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00417.html">Date Prev</a>] [<a href="msg00419.html">Date Next</a>] [<a href="msg00417.html">Thread Prev</a>] [<a href="msg00419.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: relax-commits@xxxxxxx</li>
<li class="menuitem">
<em>Date</em>: Fri, 22 Mar 2013 16:27:58 -0000</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00418.html">E1UJ4ow-0001Lp-7N@subversion.gna.org</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>edward</strong> on March 22, 2013 - 17:27:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Author: bugman
Date: Fri Mar 22 17:27:57 2013
New Revision: 19000

URL: <a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax?rev=19000&amp;view=rev">http://svn.gna.org/viewcvs/relax?rev=19000&amp;view=rev</a>
Log:
Next block of the manual merger of the frame_order_testing branch.

The commands used were:
svn merge -r18650:18651 
svn+ssh://bugman@xxxxxxxxxxx/svn/relax/branches/frame_order_testing .
svn merge -r18651:18652 
svn+ssh://bugman@xxxxxxxxxxx/svn/relax/branches/frame_order_testing .
svn merge -r18652:18653 
svn+ssh://bugman@xxxxxxxxxxx/svn/relax/branches/frame_order_testing .
svn merge -r18653:18654 
svn+ssh://bugman@xxxxxxxxxxx/svn/relax/branches/frame_order_testing .
svn merge -r18654:18655 
svn+ssh://bugman@xxxxxxxxxxx/svn/relax/branches/frame_order_testing .
svn merge -r18655:18656 
svn+ssh://bugman@xxxxxxxxxxx/svn/relax/branches/frame_order_testing .
svn merge -r18657:18658 
svn+ssh://bugman@xxxxxxxxxxx/svn/relax/branches/frame_order_testing .
svn merge -r18719:18720 
svn+ssh://bugman@xxxxxxxxxxx/svn/relax/branches/frame_order_testing .
svn merge -r18729:18730 
svn+ssh://bugman@xxxxxxxxxxx/svn/relax/branches/frame_order_testing .

The console messages were:
[edau@localhost relax-trunk]$ svn merge -r18650:18651 
svn+ssh://bugman@xxxxxxxxxxx/svn/relax/branches/frame_order_testing .
[edau@localhost relax-trunk]$ svn merge -r18651:18652 
svn+ssh://bugman@xxxxxxxxxxx/svn/relax/branches/frame_order_testing .
--- Merging r18652 into '.':
U    auto_analyses/frame_order.py
[edau@localhost relax-trunk]$ svn merge -r18652:18653 
svn+ssh://bugman@xxxxxxxxxxx/svn/relax/branches/frame_order_testing .
--- Merging r18653 into '.':
G    auto_analyses/frame_order.py
[edau@localhost relax-trunk]$ svn merge -r18653:18654 
svn+ssh://bugman@xxxxxxxxxxx/svn/relax/branches/frame_order_testing .
--- Merging r18654 into '.':
G    auto_analyses/frame_order.py
[edau@localhost relax-trunk]$ svn merge -r18654:18655 
svn+ssh://bugman@xxxxxxxxxxx/svn/relax/branches/frame_order_testing .
--- Merging r18655 into '.':
U    maths_fns/frame_order/__init__.py
[edau@localhost relax-trunk]$ svn merge -r18655:18656 
svn+ssh://bugman@xxxxxxxxxxx/svn/relax/branches/frame_order_testing .
--- Merging r18656 into '.':
U    test_suite/system_tests/frame_order.py
[edau@localhost relax-trunk]$ svn merge -r18657:18658 
svn+ssh://bugman@xxxxxxxxxxx/svn/relax/branches/frame_order_testing .
--- Merging r18658 into '.':
A    test_suite/shared_data/frame_order/displacements/optimisation.log.bz2
[edau@localhost relax-trunk]$ svn merge -r18719:18720 
svn+ssh://bugman@xxxxxxxxxxx/svn/relax/branches/frame_order_testing .
--- Merging r18720 into '.':
A    sample_scripts/frame_order
[edau@localhost relax-trunk]$ svn merge -r18729:18730 
svn+ssh://bugman@xxxxxxxxxxx/svn/relax/branches/frame_order_testing .
--- Merging r18730 into '.':
U    specific_fns/frame_order.py
[edau@localhost relax-trunk]$


Added:
    trunk/sample_scripts/frame_order/
      - copied from r18720, 
branches/frame_order_testing/sample_scripts/frame_order/
    
trunk/test_suite/shared_data/frame_order/displacements/optimisation.log.bz2
      - copied unchanged from r18658, 
branches/frame_order_testing/test_suite/shared_data/frame_order/displacements/optimisation.log.bz2
Modified:
    trunk/auto_analyses/frame_order.py
    trunk/maths_fns/frame_order/__init__.py
    trunk/specific_fns/frame_order.py
    trunk/test_suite/system_tests/frame_order.py

Modified: trunk/auto_analyses/frame_order.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/trunk/auto_analyses/frame_order.py?rev=19000&amp;r1=18999&amp;r2=19000&amp;view=diff">http://svn.gna.org/viewcvs/relax/trunk/auto_analyses/frame_order.py?rev=19000&amp;r1=18999&amp;r2=19000&amp;view=diff</a>
==============================================================================
--- trunk/auto_analyses/frame_order.py (original)
+++ trunk/auto_analyses/frame_order.py Fri Mar 22 17:27:57 2013
@@ -226,7 +226,7 @@
 
         # The free rotor model.
         if model == 'free rotor':
-            incs += [None, None, self.grid_inc, self.grid_inc]
+            incs += [self.grid_inc, self.grid_inc, self.grid_inc, 
self.grid_inc]
 
         # The torsionless isotropic cone model.
         if model == 'iso cone, torsionless':
@@ -269,6 +269,12 @@
             rigid_pipe = get_pipe(self.pipe_name_dict['rigid'])
 
             # Copy the average position parameters from the rigid model.
+            if hasattr(rigid_pipe, 'ave_pos_x'):
+                cdp.ave_pos_x = rigid_pipe.ave_pos_x
+            if hasattr(rigid_pipe, 'ave_pos_y'):
+                cdp.ave_pos_y = rigid_pipe.ave_pos_y
+            if hasattr(rigid_pipe, 'ave_pos_z'):
+                cdp.ave_pos_z = rigid_pipe.ave_pos_z
             if model not in ['free rotor', 'iso cone, free rotor']:
                 cdp.ave_pos_alpha = rigid_pipe.ave_pos_alpha
             cdp.ave_pos_beta = rigid_pipe.ave_pos_beta
@@ -447,8 +453,14 @@
         format_vect = &quot;    %-20s %20s\n&quot;
 
         # Average position.
-        if hasattr(cdp, 'ave_pos_alpha') or hasattr(cdp, 'ave_pos_beta') or 
hasattr(cdp, 'ave_pos_gamma'):
-            sys.stdout.write(&quot;\nAverage moving domain position Euler 
angles:\n&quot;)
+        if hasattr(cdp, 'ave_pos_x') or hasattr(cdp, 'ave_pos_alpha') or 
hasattr(cdp, 'ave_pos_beta') or hasattr(cdp, 'ave_pos_gamma'):
+            sys.stdout.write(&quot;\nAverage moving domain position:\n&quot;)
+        if hasattr(cdp, 'ave_pos_x'):
+            sys.stdout.write(format_float % ('x:', cdp.ave_pos_x))
+        if hasattr(cdp, 'ave_pos_y'):
+            sys.stdout.write(format_float % ('y:', cdp.ave_pos_y))
+        if hasattr(cdp, 'ave_pos_z'):
+            sys.stdout.write(format_float % ('z:', cdp.ave_pos_z))
         if hasattr(cdp, 'ave_pos_alpha'):
             sys.stdout.write(format_float % ('alpha:', cdp.ave_pos_alpha))
         if hasattr(cdp, 'ave_pos_beta'):

Modified: trunk/maths_fns/frame_order/__init__.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/trunk/maths_fns/frame_order/__init__.py?rev=19000&amp;r1=18999&amp;r2=19000&amp;view=diff">http://svn.gna.org/viewcvs/relax/trunk/maths_fns/frame_order/__init__.py?rev=19000&amp;r1=18999&amp;r2=19000&amp;view=diff</a>
==============================================================================
--- trunk/maths_fns/frame_order/__init__.py (original)
+++ trunk/maths_fns/frame_order/__init__.py Fri Mar 22 17:27:57 2013
@@ -26,10 +26,6 @@
 from copy import deepcopy
 from math import acos, ceil, pi, sqrt
 from numpy import array, dot, float32, float64, ones, transpose, uint8, zeros
-try:
-    from numpy import float16
-except ImportError:
-    float16 = float32
 from numpy.linalg import norm
 
 # relax module imports.
@@ -1892,7 +1888,7 @@
         m = len(dims)
 
         # Initialise.
-        self.sobol_angles = zeros((n, m), float16)
+        self.sobol_angles = zeros((n, m), float32)
 
         # Loop over the points.
         for i in range(n):

Modified: trunk/specific_fns/frame_order.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/trunk/specific_fns/frame_order.py?rev=19000&amp;r1=18999&amp;r2=19000&amp;view=diff">http://svn.gna.org/viewcvs/relax/trunk/specific_fns/frame_order.py?rev=19000&amp;r1=18999&amp;r2=19000&amp;view=diff</a>
==============================================================================
--- trunk/specific_fns/frame_order.py (original)
+++ trunk/specific_fns/frame_order.py Fri Mar 22 17:27:57 2013
@@ -2371,8 +2371,13 @@
             if not hasattr(interatom, 'rdc_err'):
                 raise RelaxError(&quot;The RDC errors are missing for interatomic 
data container between spins '%s' and '%s'.&quot; % (spin_id1, spin_id2))
 
+            # Handle missing data.
+            if align_id not in interatom.rdc_err:
+                mc_errors.append(None)
+
             # Append the data.
-            mc_errors.append(interatom.rdc_err[align_id])
+            else:
+                mc_errors.append(interatom.rdc_err[align_id])
 
         # The PCS data.
         elif data_id[0] == 'pcs':
@@ -2386,8 +2391,13 @@
             if not hasattr(spin, 'pcs_err'):
                 raise RelaxError(&quot;The PCS errors are missing for spin '%s'.&quot; 
% spin_id)
 
+            # Handle missing data.
+            if align_id not in spin.pcs_err:
+                mc_errors.append(None)
+
             # Append the data.
-            mc_errors.append(spin.pcs_err[align_id])
+            else:
+                mc_errors.append(spin.pcs_err[align_id])
 
         # Return the errors.
         return mc_errors

Modified: trunk/test_suite/system_tests/frame_order.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/trunk/test_suite/system_tests/frame_order.py?rev=19000&amp;r1=18999&amp;r2=19000&amp;view=diff">http://svn.gna.org/viewcvs/relax/trunk/test_suite/system_tests/frame_order.py?rev=19000&amp;r1=18999&amp;r2=19000&amp;view=diff</a>
==============================================================================
--- trunk/test_suite/system_tests/frame_order.py (original)
+++ trunk/test_suite/system_tests/frame_order.py Fri Mar 22 17:27:57 2013
@@ -315,7 +315,7 @@
         # The flags, execute the script, and then check the chi2 value.
         self.flags()
         
self.interpreter.run(script_file=self.cam_path+'iso_cone_free_rotor.py')
-        self.check_chi2(48.623418841452626)
+        self.check_chi2(31.400316262936347)
 
 
     def test_cam_iso_cone_free_rotor_pcs(self):
@@ -333,7 +333,7 @@
         # The flags, execute the script, and then check the chi2 value.
         self.flags(pcs=False)
         
self.interpreter.run(script_file=self.cam_path+'iso_cone_free_rotor.py')
-        self.check_chi2(17.282846954724896)
+        self.check_chi2(0.058871004304276831)
 
 
     def test_cam_iso_cone_free_rotor2(self):
@@ -1138,7 +1138,7 @@
         self.script_exec(status.install_path + 
sep+'test_suite'+sep+'system_tests'+sep+'scripts'+sep+'frame_order'+sep+'rigid_test.py')
 
         # Check the chi2 value.
-        self.assertAlmostEqual(cdp.chi2, 94337.6680299)
+        self.assertAlmostEqual(cdp.chi2, 94337.620142880114)
 
 
     def test_rigid_data_to_iso_cone_model(self):
@@ -1151,7 +1151,7 @@
         self.script_exec(status.install_path + 
sep+'test_suite'+sep+'system_tests'+sep+'scripts'+sep+'frame_order'+sep+'rigid_test.py')
 
         # Check the chi2 value.
-        self.assertAlmostEqual(cdp.chi2, 175.440396354)
+        self.assertAlmostEqual(cdp.chi2, 177.13243371265614)
 
 
     def test_rigid_data_to_iso_cone_free_rotor_model(self):
@@ -1164,7 +1164,7 @@
         self.script_exec(status.install_path + 
sep+'test_suite'+sep+'system_tests'+sep+'scripts'+sep+'frame_order'+sep+'rigid_test.py')
 
         # Check the chi2 value.
-        self.assertAlmostEqual(cdp.chi2, 101224.40326971974)
+        self.assertAlmostEqual(cdp.chi2, 101218.55718817962)
 
 
     def test_rigid_data_to_iso_cone_torsionless_model(self):
@@ -1177,7 +1177,7 @@
         self.script_exec(status.install_path + 
sep+'test_suite'+sep+'system_tests'+sep+'scripts'+sep+'frame_order'+sep+'rigid_test.py')
 
         # Check the chi2 value.
-        self.assertAlmostEqual(cdp.chi2, 2.80180329697)
+        self.assertAlmostEqual(cdp.chi2, 2.7993179077540402)
 
 
     def test_rigid_data_to_rigid_model(self):
@@ -1203,7 +1203,7 @@
         self.script_exec(status.install_path + 
sep+'test_suite'+sep+'system_tests'+sep+'scripts'+sep+'frame_order'+sep+'rigid_test.py')
 
         # Check the chi2 value.
-        self.assertAlmostEqual(cdp.chi2, 0.968768022709)
+        self.assertAlmostEqual(cdp.chi2, 0.96883720077954039)
 
 
     def test_rigid_data_to_pseudo_ellipse_model(self):
@@ -1216,7 +1216,7 @@
         self.script_exec(status.install_path + 
sep+'test_suite'+sep+'system_tests'+sep+'scripts'+sep+'frame_order'+sep+'rigid_test.py')
 
         # Check the chi2 value.
-        self.assertAlmostEqual(cdp.chi2, 175.440396354)
+        self.assertAlmostEqual(cdp.chi2, 177.13243371265639)
 
 
     def test_rigid_data_to_pseudo_ellipse_torsionless_model(self):
@@ -1229,4 +1229,4 @@
         self.script_exec(status.install_path + 
sep+'test_suite'+sep+'system_tests'+sep+'scripts'+sep+'frame_order'+sep+'rigid_test.py')
 
         # Check the chi2 value.
-        self.assertAlmostEqual(cdp.chi2, 2.80180329697)
+        self.assertAlmostEqual(cdp.chi2, 2.7993179077540522)



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer">You are on the <a href="http://gna.org">Gna!</a> mail server.</div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Fri Mar 22 17:40:02 2013</div>  
</body>
</html>
