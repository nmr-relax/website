<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: [sr #3078] Parse spin.model names to the value.write user	function. -->
<!--X-From-R13: "Sqjneq q'Ohiretar" <rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Tue, 10 Sep 2013 18:26:51 +0200 -->
<!--X-Message-Id: CAED9pY_eCURyNnuzrV7sDby37QijyTYWG&#45;9csPrZ3kkOd=CweA@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 20130910&#45;135824.sv20529.32975@gna.org -->
<!--X-Reference: 20130910&#45;142256.sv20529.84341@gna.org -->
<!--X-Reference: CAED9pY&#45;HCH&#45;1kVZzJ2R8gTEp=AwN568HcaOeYThdmjLwidc1tA@mail.gmail.com -->
<!--X-Reference: CA+CBx2PNMC_ZdCeX_+pcFOb0_1nGsoCz1QGuByqr+zsFqi+OFQ@mail.gmail.com -->
<!--X-Reference: CA+CBx2NXR=6wHnKerBknKt=2gDWaUAJZBoRQ7mVbof0Fjs9Tvg@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [sr #3078] Parse spin.model names to the value.write user	function. -- September 10, 2013 - 18:26</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: [sr #3078] Parse spin.model names to the value.write user	function.</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00137" class="tabs">Index by Date</a> | <a href="threads.html#00137" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00136.html">Date Prev</a>] [<a href="msg00138.html">Date Next</a>] [<a href="msg00135.html">Thread Prev</a>] [<a href="msg00136.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Tue, 10 Sep 2013 18:26:20 +0200</li>
<li class="menuitem">
<em>Cc</em>: &quot;Troels E. Linnet&quot; &lt;NO-REPLY.INVALID-ADDRESS@xxxxxxx&gt;,	&quot;relax-devel@xxxxxxx&quot; &lt;relax-devel@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;	h=mime-version:sender:in-reply-to:references:date:message-id:subject	:from:to:cc:content-type:content-transfer-encoding;	bh=76I7qshdh+6nC9YM1aIzpa3WSRdLAk/iRclu/B/tbTY=;	b=M4Z0/8xM+9CiozFyBxL5pI1O5QyfUJNAm/yZ8gGt3C3N058RxIVLRLcU7qIdl51b79	373uji1YhbZ+dkMWIeeahICdunHDIosV/CXAL/nAY++jDG/GW0eSyi/cj9Z7g87oCMP2	o7YGC/wtzWHaFQvaVa1qSJBuge97RDZiu6aCOw9WxKpisdi+1/IyRfl9hGmG3UNxsFvE	+55VFmBP/vGQGlZOZ3RMi65jzfGoRqf1+hob/OKZj4E/iOPeiysYxutTXBomYdwdom/B	96X1qq7tmNHR52Ho0ph10bet+xyH3KIhQ7K6Li2ojqKvuvbNW/D2ysRWb1e10m3QX48v	d/8g==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00137.html">CAED9pY_eCURyNnuzrV7sDby37QijyTYWG-9csPrZ3kkOd=CweA@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;20130910-135824.sv20529.32975@xxxxxxx&gt;	&lt;20130910-142256.sv20529.84341@xxxxxxx&gt;	&lt;CAED9pY-HCH-1kVZzJ2R8gTEp=AwN568HcaOeYThdmjLwidc1tA@xxxxxxxxxxxxxx&gt;	&lt;CA+CBx2PNMC_ZdCeX_+pcFOb0_1nGsoCz1QGuByqr+zsFqi+OFQ@xxxxxxxxxxxxxx&gt;	&lt;CA+CBx2NXR=6wHnKerBknKt=2gDWaUAJZBoRQ7mVbof0Fjs9Tvg@xxxxxxxxxxxxxx&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on September 10, 2013 - 18:26:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Hi,

I've had a look into this and it looks like a case of bit rot.  The
value.write user function originally supported this, but this was
before the test suite existed.  Therefore the feature was never tested
and with time it has disappeared.  All parts of the code (both the
user function frontend and backend) have been completely rewritten a
number of times, and now there are no traces of it left.  There are
now unfortunately a number of such 'missing' features.  It should not
be too hard to fix though.  The harder part will be to allow the user
function to output the model information.

Regards,

Edward




On 10 September 2013 17:06, Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">It seems value.write does not accept list of model parameters.

self.interpreter.value.write(param=['model','kex'], file=self.tmpfile,
dir=None, force=True)

It expects a string as input. :-)

-----------
relax&gt; value.write(param=['model', 'kex'], file='/tmp/tmpdeGHiI',
dir=None, scaling=1.0, comment=None, bc=False, force=True)
Traceback (most recent call last):
  File 
&quot;/sbinlab2/tlinnet/software/NMR-relax/relax_disp/test_suite/system_tests/relax_disp.py&quot;,
line 1433, in test_value_write_disp_model
    self.interpreter.value.write(param=['model','kex'],
file=self.tmpfile, dir=None, force=True)
  File 
&quot;/sbinlab2/tlinnet/software/NMR-relax/relax_disp/prompt/uf_objects.py&quot;,
line 200, in __call__
    lib.arg_check.is_str(value, desc_short, can_be_none=can_be_none)
  File &quot;/sbinlab2/tlinnet/software/NMR-relax/relax_disp/lib/arg_check.py&quot;,
line 862, in is_str
    raise RelaxStrError(name, arg)
RelaxStrError: RelaxError: The parameter argument '['model', 'kex']'
must be a string.

Troels Emtekær Linnet


2013/9/10 Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxx&gt;:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Well well well.

That's very smart with the list of things which should be written out.

So, I think it now boils down to a level of convenience.

----------
* Problem

When I look in the &quot;final&quot; run directory, I do not readily have access
to a file (or a plot ref:
<a  rel="nofollow" href="http://article.gmane.org/gmane.science.nmr.relax.devel/4425">http://article.gmane.org/gmane.science.nmr.relax.devel/4425</a>)
which tells me which model has been used per spin.

I see this information as vital, and I believe it should be presented
as easy as possible.

I can create such a list in relax, but is is not &quot;easily reached&quot;.

I do not understand why there is a desire not to include a column with
the spin.model information.
There is probably a deeper lying reason for this.

But where should I tackle this problem?
1) The spin.model is included as column in the value.write parameter file.
- Cons: This information is superfluous for the writing of each of the 
models.
- Cons: Change of file formats can give un-expected problems for users.

2) The spin.model is included as column in the value.write parameter
file for the &quot;final&quot; round.
- Pro: This gives the overview I am looking for.
- Cons: Change of file formats can give problems.

3) A &quot;model&quot; file is written out for the &quot;final&quot; round.
- Cons: It is annoying to compare between two files.

4) Duplicates of all parameter files, where the copy include the
spin.model as a column.
Well, dublicate of files is not &quot;nice&quot;.

------------

Given that linux have the ability to merge text files:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">paste kex.out dw.out
</pre></blockquote><pre style="margin: 0em;">

I can &quot;survive&quot; with option 3, and I think this is what you are hinting 
for.

Best
Troels


Troels Emtekær Linnet


2013/9/10 Edward d'Auvergne &lt;edward.dauvergne@xxxxxxxxx&gt;:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi,

In that case you can use the power of the value.write user function:

value.write(param=['model', 'kex'], file=...

But this should be in a new file.  The standard kex.out file which
contains the kex value from all models is the desired outcome.  It
should not matter what model the kex value comes from, as long as that
model can be considered reasonable for the system.  If you would like
the kex.out file per model, that already exists.  It will be output
for each model in the directory for that model.

Regards,

Edward




On 10 September 2013 16:22, Troels E. Linnet
&lt;NO-REPLY.INVALID-ADDRESS@xxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Follow-up Comment #1, sr #3078 (project relax):

Hi Edward.

You suggested:
value.write(param='model', file=...

but that would create a new file for writing out the models ?

I would like to have the model information included when you write out a
parameter like 'kex'.

In the same way that you have for example for kex:
mol_name res_num res_name spin_num spin_name value error

I would like to also include spin_model

The reason for this, is that in the &quot;final&quot; run, you would have one 
kex.out
file, with a mixup of the different models.

    _______________________________________________________

Reply to this item at:

  &lt;<a  rel="nofollow" href="http://gna.org/support/?3078">http://gna.org/support/?3078</a>&gt;

_______________________________________________
  Message sent via/by Gna!
  <a  rel="nofollow" href="http://gna.org/">http://gna.org/</a>


_______________________________________________
relax (<a  rel="nofollow" href="http://www.nmr-relax.com">http://www.nmr-relax.com</a>)

This is the relax-devel mailing list
relax-devel@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="http://www.nmr-relax.com/mail.gna.org/listinfo/relax-devel">https://mail.gna.org/listinfo/relax-devel</a>
</pre></blockquote></blockquote></blockquote></blockquote><pre style="margin: 0em;">


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00126" href="msg00126.html">[sr #3078] Parse spin.model names to the value.write user function.</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
<li><strong><a name="00131" href="msg00131.html">[sr #3078] Parse spin.model names to the value.write user function.</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
<li><strong><a name="00133" href="msg00133.html">Re: [sr #3078] Parse spin.model names to the value.write user	function.</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00134" href="msg00134.html">Re: [sr #3078] Parse spin.model names to the value.write user	function.</a></strong>
<ul><li><em>From:</em> Troels Emtekær Linnet</li></ul></li>
<li><strong><a name="00135" href="msg00135.html">Re: [sr #3078] Parse spin.model names to the value.write user	function.</a></strong>
<ul><li><em>From:</em> Troels Emtekær Linnet</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Wed Sep 11 08:00:08 2013</div>  
</body>
</html>
