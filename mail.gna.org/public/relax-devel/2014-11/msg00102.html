<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: r26804 &#45; /branches/nmrglue/test_suite/system_tests/nmrglue.py -->
<!--X-From-R13: Febryf Szgrxæe Zvaarg &#60;gyvaargNaze&#45;erynk.pbz> -->
<!--X-Date: Sun, 30 Nov 2014 21:04:09 +0100 -->
<!--X-Message-Id: CA+CBx2PwDKUv819=qckLObGdXTwzpDm49RkNyGmQOCKXsVT2hA@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: E1XuL41&#45;0003am&#45;2s@subversion.gna.org -->
<!--X-Reference: CAED9pY8&#45;FsGht+kX120oB1sz6aj0Ohe&#45;sWo1UdiW1mQV_eGwcw@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: r26804 - /branches/nmrglue/test_suite/system_tests/nmrglue.py -- November 30, 2014 - 21:04</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: r26804 - /branches/nmrglue/test_suite/system_tests/nmrglue.py</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00102" class="tabs">Index by Date</a> | <a href="threads.html#00102" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00101.html">Date Prev</a>] [Date Next] [<a href="msg00077.html">Thread Prev</a>] [<a href="msg00092.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: &quot;Edward d'Auvergne&quot; &lt;edward@xxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Sun, 30 Nov 2014 21:03:20 +0100</li>
<li class="menuitem">
<em>Cc</em>: &quot;relax-devel@xxxxxxx&quot; &lt;relax-devel@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113; h=mime-version:sender:in-reply-to:references:from:date:message-id :subject:to:cc:content-type; bh=6awAijjsHFnHD6X4W/9oGnSxBdoTPVMf+Jt3uR2yrmo=; b=w/tYpN36sRXDQ5cc1HT2SB5/UjwLUpZwdFFk+VMs3Pt9Unhsx1DF6fG3zu8k6N8KEZ kQcktFh/8co8UMEsrnma+u7h7v3fxCuTzb1cTrcHplMLNk9ui3mn6Temui0itzvSp2qW CKmu76H6NWyszmq3SOQmmYUuJW39YPlGf2QM9aqcpr/PBuflfvJKsTTbIXqvVEkt0wVQ +sY8PsATlLoTAbqyuBnB5rfgqWFX+f62HqBtUakZpFow6pf5eV+MdrWAhhHtf44Er5Sw ZcFnqCWFG7ShnGSDZAtbG4rDESmzRMURVM6gIZniQ9lJk6je6cv9d1t6ZIZDMgpf4uxZ +CvA==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;CA+CBx2PwDKUv819=qckLObGdXTwzpDm49RkNyGmQOCKXsVT2hA@mail.gmail.com&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;E1XuL41-0003am-2s@subversion.gna.org&gt; &lt;<a href="msg00077.html">CAED9pY8-FsGht+kX120oB1sz6aj0Ohe-sWo1UdiW1mQV_eGwcw@mail.gmail.com</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Troels Emtekær Linnet</strong> on November 30, 2014 - 21:04:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Hi Edward.

No, I am not aware how to do this.

Best
Troels

2014-11-28 14:08 GMT+01:00 Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt;:

</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hmmm, I wonder if there is a way of querying the matplotlib plot for
the axis labels, rather than calling plt.show().  That would allow
this system test to be activated and converted into a usable and
useful test!  Or to obtain some text representation of the plot which
can then be checked.  Do you know of any ways to do this?

Cheers,

Edward



On 28 November 2014 at 13:54,  &lt;tlinnet@xxxxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Author: tlinnet
Date: Fri Nov 28 13:54:20 2014
New Revision: 26804

URL: <a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax?rev=26804&amp;view=rev">http://svn.gna.org/viewcvs/relax?rev=26804&amp;view=rev</a>
Log:
Added additonal systemtest for plotting data.
</pre></blockquote><pre style="margin: 0em;">Nmrglue.xtest_plot_contour_cpmg.
</pre><blockquote class="blockquote"><pre style="margin: 0em;">

This shoves, that the automatic ppm scale finding is working.

Task #7873 (<a  rel="nofollow" href="https://gna.org/task/index.php?7873">https://gna.org/task/index.php?7873</a>): Write wrapper
</pre></blockquote><pre style="margin: 0em;">function to nmrglue, to read .ft2 files and process them.
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Homepage: <a  rel="nofollow" href="http://www.nmrglue.com/">http://www.nmrglue.com/</a>
Link to nmrglue discussion:
</pre></blockquote><pre style="margin: 0em;"><a  rel="nofollow" href="https://groups.google.com/forum/#!forum/nmrglue-discuss">https://groups.google.com/forum/#!forum/nmrglue-discuss</a>
</pre><blockquote class="blockquote"><pre style="margin: 0em;">The code is develop at Github: <a  rel="nofollow" href="https://github.com/jjhelmus/nmrglue/">https://github.com/jjhelmus/nmrglue/</a>
Google code: <a  rel="nofollow" href="https://code.google.com/p/nmrglue/">https://code.google.com/p/nmrglue/</a>
Documentation: <a  rel="nofollow" href="http://nmrglue.readthedocs.org/en/latest/index.html">http://nmrglue.readthedocs.org/en/latest/index.html</a>

Modified:
    branches/nmrglue/test_suite/system_tests/nmrglue.py

Modified: branches/nmrglue/test_suite/system_tests/nmrglue.py
URL:
</pre></blockquote><pre style="margin: 0em;"><a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/nmrglue/test_suite/system_tests/nmrglue.py?rev=26804&amp;r1=26803&amp;r2=26804&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/nmrglue/test_suite/system_tests/nmrglue.py?rev=26804&amp;r1=26803&amp;r2=26804&amp;view=diff</a>
</pre><blockquote class="blockquote"><pre style="margin: 0em;">

</pre></blockquote><pre style="margin: 0em;">==============================================================================
</pre><blockquote class="blockquote"><pre style="margin: 0em;">--- branches/nmrglue/test_suite/system_tests/nmrglue.py (original)
+++ branches/nmrglue/test_suite/system_tests/nmrglue.py Fri Nov 28
</pre></blockquote><pre style="margin: 0em;">13:54:20 2014
</pre><blockquote class="blockquote"><pre style="margin: 0em;">@@ -26,6 +26,7 @@

 # relax module imports.
 from data_store import Relax_data_store; ds = Relax_data_store()
+from lib.io import file_root
 from pipe_control.nmrglue import plot_contour
 from status import Status; status = Status()
 from test_suite.system_tests.base_classes import SystemTestCase
@@ -107,3 +108,34 @@
         # Now show
         import matplotlib.pyplot as plt
         plt.show()
+
+
+    def xtest_plot_contour_cpmg(self):
+        &quot;&quot;&quot;Test the plot_contour function in pipe_control.
+        This is from the U{tutorial&lt;
</pre></blockquote><pre style="margin: 0em;"><a  rel="nofollow" href="http://jjhelmus.github.io/nmrglue/current/examples/plot_2d_spectrum.html">http://jjhelmus.github.io/nmrglue/current/examples/plot_2d_spectrum.html</a>
</pre><blockquote class="blockquote"><pre style="margin: 0em;">}.
+
+        The data is from systemtest -s Relax_disp.test_repeat_cpmg
+        U{task #7826&lt;<a  rel="nofollow" href="https://gna.org/task/index.php?7826">https://gna.org/task/index.php?7826</a>&gt;}. Write an
</pre></blockquote><pre style="margin: 0em;">python class for the repeated analysis of dispersion data.
</pre><blockquote class="blockquote"><pre style="margin: 0em;">+        &quot;&quot;&quot;
+
+        # Define base path to files.
+        base_path = status.install_path +
</pre></blockquote><pre style="margin: 0em;">sep+'test_suite'+sep+'shared_data'+sep+'dispersion'+sep+'repeated_analysis'+sep+'SOD1'
</pre><blockquote class="blockquote"><pre style="margin: 0em;">+
+        # Define folder to all ft files.
+        ft2_folder_1 = base_path +sep+ 'cpmg_disp_sod1d90a_060518'
</pre></blockquote><pre style="margin: 0em;">+sep+ 'cpmg_disp_sod1d90a_060518_normal.fid' +sep+ 'ft2_data'
</pre><blockquote class="blockquote"><pre style="margin: 0em;">+        ft2_folder_2 = base_path +sep+ 'cpmg_disp_sod1d90a_060521'
</pre></blockquote><pre style="margin: 0em;">+sep+ 'cpmg_disp_sod1d90a_060521_normal.fid' +sep+ 'ft2_data'
</pre><blockquote class="blockquote"><pre style="margin: 0em;">+
+        # Read the spectrum.
+        fname = '128_0_FT.ft2'
+        sp_id = file_root(fname)
+        self.interpreter.spectrum.nmrglue_read(file=fname,
</pre></blockquote><pre style="margin: 0em;">dir=ft2_folder_1, spectrum_id=sp_id)
</pre><blockquote class="blockquote"><pre style="margin: 0em;">+
+        # Call the pipe_control function and get the return axis.
+        ax = plot_contour(spectrum_id=sp_id, contour_start=200000.,
</pre></blockquote><pre style="margin: 0em;">contour_num=20, contour_factor=1.20, ppm=True, show=False)
</pre><blockquote class="blockquote"><pre style="margin: 0em;">+
+        # Set a new title.
+        ax.set_title(&quot;CPMG Spectrum&quot;)
+
+        # Now show
+        import matplotlib.pyplot as plt
+        plt.show()


_______________________________________________
relax (<a  rel="nofollow" href="http://www.nmr-relax.com">http://www.nmr-relax.com</a>)

This is the relax-commits mailing list
relax-commits@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="https://mail.gna.org/listinfo/relax-commits">https://mail.gna.org/listinfo/relax-commits</a>
</pre></blockquote><pre style="margin: 0em;">

_______________________________________________
relax (<a  rel="nofollow" href="http://www.nmr-relax.com">http://www.nmr-relax.com</a>)

This is the relax-devel mailing list
relax-devel@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="https://mail.gna.org/listinfo/relax-devel">https://mail.gna.org/listinfo/relax-devel</a>

</pre></blockquote><pre style="margin: 0em;">

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00077" href="msg00077.html">Re: r26804 - /branches/nmrglue/test_suite/system_tests/nmrglue.py</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Sun Nov 30 21:20:18 2014</div>  
</body>
</html>
