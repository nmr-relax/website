<?xml version="1.0" encoding="ascii"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>prompt.relax_fit.Relax_fit</title>

  <!--Epydoc setup-->
  <link rel="stylesheet" href="epydoc.css" type="text/css" />
  <script type="text/javascript" src="epydoc.js"></script>

  <!--Mobile device support-->
  <meta name=viewport content="width=device-width, initial-scale=1">

  <!--Google analytics JS-->
  <script type="text/javascript">

    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-30096326-1']);
    _gaq.push(['_setDomainName', 'nmr-relax.com']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();

  </script>
</head>

<body bgcolor="white" text="black" link="blue" vlink="#204080"
      alink="#204080">
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            ><a class="navbar" target="_top" href="/">relax</a></th>
          </tr></table></th>
  </tr>
</table>
<table width="100%" cellpadding="0" cellspacing="0">
  <tr valign="top">
    <td width="100%">
      <span class="breadcrumbs">
        <a href="prompt-module.html">Package&nbsp;prompt</a> ::
        <a href="prompt.relax_fit-module.html">Module&nbsp;relax_fit</a> ::
        Class&nbsp;Relax_fit
      </span>
    </td>
    <td>
      <table cellpadding="0" cellspacing="0">
        <!-- hide/show private -->
        <tr><td align="right"><span class="options">[<a href="javascript:void(0);" class="privatelink"
    onclick="toggle_private();">hide&nbsp;private</a>]</span></td></tr>
        <tr><td align="right"><span class="options"
            >[<a href="frames.html" target="_top">frames</a
            >]&nbsp;|&nbsp;<a href="prompt.relax_fit.Relax_fit-class.html"
            target="_top">no&nbsp;frames</a>]</span></td></tr>
      </table>
    </td>
  </tr>
</table>
<!-- ==================== CLASS DESCRIPTION ==================== -->
<h1 class="epydoc">Class Relax_fit</h1><p class="nomargin-top"><span class="codelink"><a href="prompt.relax_fit-pysrc.html#Relax_fit">source&nbsp;code</a></span></p>
<!-- ==================== INSTANCE METHODS ==================== -->
<a name="section-InstanceMethods"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Instance Methods</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-InstanceMethods"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="__init__"></a><span class="summary-sig-name">__init__</span>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">relax</span>)</span></td>
          <td align="right" valign="top">
            <span class="codelink"><a href="prompt.relax_fit-pysrc.html#Relax_fit.__init__">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="prompt.relax_fit.Relax_fit-class.html#mean_and_error" class="summary-sig-name">mean_and_error</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">run</span>=<span class="summary-sig-default">None</span>)</span><br />
      Function for calculating the average intensity and standard deviation of all spectra.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="prompt.relax_fit-pysrc.html#Relax_fit.mean_and_error">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="prompt.relax_fit.Relax_fit-class.html#read" class="summary-sig-name">read</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">run</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">file</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">dir</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">relax_time</span>=<span class="summary-sig-default">0.0</span>,
        <span class="summary-sig-arg">format</span>=<span class="summary-sig-default"><code class="variable-quote">'</code><code class="variable-string">sparky</code><code class="variable-quote">'</code></span>,
        <span class="summary-sig-arg">heteronuc</span>=<span class="summary-sig-default"><code class="variable-quote">'</code><code class="variable-string">N</code><code class="variable-quote">'</code></span>,
        <span class="summary-sig-arg">proton</span>=<span class="summary-sig-default"><code class="variable-quote">'</code><code class="variable-string">HN</code><code class="variable-quote">'</code></span>,
        <span class="summary-sig-arg">int_col</span>=<span class="summary-sig-default">None</span>)</span><br />
      Function for reading peak intensities from a file.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="prompt.relax_fit-pysrc.html#Relax_fit.read">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="prompt.relax_fit.Relax_fit-class.html#select_model" class="summary-sig-name">select_model</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">run</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">model</span>=<span class="summary-sig-default"><code class="variable-quote">'</code><code class="variable-string">exp</code><code class="variable-quote">'</code></span>)</span><br />
      Function for the selection of the relaxation curve type.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="prompt.relax_fit-pysrc.html#Relax_fit.select_model">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
</table>
<!-- ==================== METHOD DETAILS ==================== -->
<a name="section-MethodDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Method Details</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-MethodDetails"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
</table>
<a name="mean_and_error"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">mean_and_error</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">run</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="prompt.relax_fit-pysrc.html#Relax_fit.mean_and_error">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">
Function for calculating the average intensity and standard deviation of all spectra.

Keyword Arguments
~~~~~~~~~~~~~~~~~

run:  The name of the run.


Errors of individual residues at a single time point
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The standard deviation for a single residue at a single time point is calculated by the
formula

-----

    sigma =  sum({Ii - Iav}^2) / (n - 1) ,

-----

where sigma is the variance or square of the standard deviation, n is the total number of
collected spectra for the time point and i is the corresponding index, Ii is the peak
intensity for spectrum i, Iav is the mean over all spectra, ie the sum of all peak
intensities divided by n.


Averaging of the errors
~~~~~~~~~~~~~~~~~~~~~~~

As the value of n in the above equation is always very low, normally only a couple of
spectra are collected per time point, the variance of all spins is averaged for a single
time point.  Although this results in all spins having the same error, the accuracy of the
error estimate is significantly improved.


Errors across multiple time points
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

If all spectra are collected in duplicate (triplicate or higher number of spectra are
supported), the each time point will have its own error estimate.  However, if there are
time points in the series which only consist of a single spectrum, then the variances of
replicated time points will be averaged.  Hence, for the entire experiment there will be a
single error value for all spins and for all time points.

A better approach rather than averaging across all time points would be to use a form of
interpolation as the errors across time points generally decreases for longer time periods.
This is currently not implemented.

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="read"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">read</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">run</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">file</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">dir</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">relax_time</span>=<span class="sig-default">0.0</span>,
        <span class="sig-arg">format</span>=<span class="sig-default"><code class="variable-quote">'</code><code class="variable-string">sparky</code><code class="variable-quote">'</code></span>,
        <span class="sig-arg">heteronuc</span>=<span class="sig-default"><code class="variable-quote">'</code><code class="variable-string">N</code><code class="variable-quote">'</code></span>,
        <span class="sig-arg">proton</span>=<span class="sig-default"><code class="variable-quote">'</code><code class="variable-string">HN</code><code class="variable-quote">'</code></span>,
        <span class="sig-arg">int_col</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="prompt.relax_fit-pysrc.html#Relax_fit.read">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">
Function for reading peak intensities from a file.

Keyword Arguments
~~~~~~~~~~~~~~~~~

run:  The name of the run.

file:  The name of the file containing the sequence data.

dir:  The directory where the file is located.

relax_time:  The time, in seconds, of the relaxation period.

format:  The type of file containing peak intensities.

heteronuc:  The name of the heteronucleus as specified in the peak intensity file.

proton:  The name of the proton as specified in the peak intensity file.

int_col:  The column containing the peak intensity data (for a non-standard formatted file).


Description
~~~~~~~~~~~

The peak intensity can either be from peak heights or peak volumes.


The format argument can currently be set to:
    'sparky'
    'xeasy'

If the format argument is set to 'sparky', the file should be a Sparky peak list saved after
typing the command 'lt'.  The default is to assume that columns 0, 1, 2, and 3 (1st, 2nd,
3rd, and 4th) contain the Sparky assignment, w1, w2, and peak intensity data respectively.
The frequency data w1 and w2 are ignored while the peak intensity data can either be the
peak height or volume displayed by changing the window options.  If the peak intensity data
is not within column 3, set the argument int_col to the appropriate value (column numbering
starts from 0 rather than 1).

If the format argument is set to 'xeasy', the file should be the saved XEasy text window
output of the list peak entries command, 'tw' followed by 'le'.  As the columns are fixed,
the peak intensity column is hardwired to number 10 (the 11th column) which contains either
the peak height or peak volume data.  Because the columns are fixed, the int_col argument
will be ignored.


The heteronuc and proton arguments should be set respectively to the name of the
heteronucleus and proton in the file.  Only those lines which match these labels will be
used.

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="select_model"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">select_model</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">run</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">model</span>=<span class="sig-default"><code class="variable-quote">'</code><code class="variable-string">exp</code><code class="variable-quote">'</code></span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="prompt.relax_fit-pysrc.html#Relax_fit.select_model">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">
Function for the selection of the relaxation curve type.

Keyword Arguments
~~~~~~~~~~~~~~~~~

run:  The name of the run.

model:  The type of relaxation curve to fit.


The preset models
~~~~~~~~~~~~~~~~~

The supported relaxation experiments include the default two parameter exponential fit,
selected by setting the 'fit_type' argument to 'exp', and the three parameter inversion
recovery experiment in which the peak intensity limit is a non-zero value, selected by
setting the argument to 'inv'.

The parameters of these two models are
    'exp': [Rx, I0],
    'inv': [Rx, I0, Iinf].

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<br />
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            ><a class="navbar" target="_top" href="/">relax</a></th>
          </tr></table></th>
  </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%%">
  <tr>
    <td align="left" class="footer">
    Generated by Epydoc 3.0.1 on Wed Apr 10 14:04:17 2013
    </td>
    <td align="right" class="footer">
      <a target="mainFrame" href="http://epydoc.sourceforge.net"
        >http://epydoc.sourceforge.net</a>
    </td>
  </tr>
</table>

<script type="text/javascript">
  <!--
  // Private objects are initially displayed (because if
  // javascript is turned off then we want them to be
  // visible); but by default, we want to hide them.  So hide
  // them unless we have a cookie that says to show them.
  checkCookie();
  // -->
</script>
</body>
</html>
