<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: R1rho RD analysis -->
<!--X-From-R13: czn &#60;Brvkvnat.[nNvof.se> -->
<!--X-Date: Thu, 22 May 2014 16:35:13 +0200 -->
<!--X-Message-Id: 537E0B05.3060000@ibs.fr -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: mailman.0.1400242739.20441.relax&#45;users@gna.org -->
<!--X-Reference: 537A143C.3020901@ibs.fr -->
<!--X-Reference: CAED9pY8GmeRj=HfGGb9x0Gk00bn1vBQYfYsUFDTzRmgyY7B_VA@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: R1rho RD analysis -- May 22, 2014 - 16:35</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: R1rho RD analysis</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00013" class="tabs">Index by Date</a> | <a href="threads.html#00013" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00012.html">Date Prev</a>] [<a href="msg00014.html">Date Next</a>] [<a href="msg00012.html">Thread Prev</a>] [<a href="msg00014.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: &quot;relax-users@xxxxxxx&quot; &lt;relax-users@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Thu, 22 May 2014 16:34:45 +0200</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00013.html">537E0B05.3060000@ibs.fr</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;mailman.0.1400242739.20441.relax-users@gna.org&gt;	&lt;<a href="msg00011.html">537A143C.3020901@ibs.fr</a>&gt; &lt;CAED9pY8GmeRj=HfGGb9x0Gk00bn1vBQYfYsUFDTzRmgyY7B_VA@mail.gmail.com&gt;</li>
<li class="menuitem">
<em>User-agent</em>: Mozilla/5.0 (X11; Linux i686; rv:24.0) Gecko/20100101 Thunderbird/24.2.0</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>pma</strong> on May 22, 2014 - 16:35:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">
Hi, Edward,

Thanks for you reply. I used the script mode in linux.

</pre><tt>I tried with 'r1rho_on_res_m61.py', but I think in the script it has a 
</tt><tt>mistake.
</tt><tt>in line27 ds.fixed = True, I think it should be False, because this 
</tt><tt>experiment has different time period, they do not need the ref. I 
</tt><tt>changed to False, the M61 model still give right result.
</tt><pre style="margin: 0em;">

But I still have some other questions.

</pre><tt>1. How did you declare replicates in such Variable relaxation period 
</tt><tt>experiments? I saw in the example r1rho_on_res_m61.py, you read all the 
</tt><tt>data into a big Matrix data and did not declare the replicate. But for 
</tt><tt>the fixed time period you declare by the spectrum ID. Did you have a 
</tt><tt>solution for this?
</tt><pre style="margin: 0em;">

</pre><tt>2.  I want to test NS R1rho 2-site, so I simply add it into the MODELS 
</tt><tt>in 'r1rho_on_res_m61.py'. It seems does not work.
</tt><tt>first, they give the warning when it comes to NS R1rho 2-site, (grid_inc 
</tt><tt>=8 )
</tt><pre style="margin: 0em;">
------------------------------------------------------------------------------------------------------------------------------
Searching through 32768 grid nodes.
</pre><tt>lib/dispersion/ns_r1rho_2site.py:118: RuntimeWarning: divide by zero 
</tt><tt>encountered in double_scalars
</tt><pre style="margin: 0em;">
  theta = atan(spin_lock_fields[i]/dA)
</pre><tt>lib/dispersion/ns_r1rho_2site.py:132: RuntimeWarning: invalid value 
</tt><tt>encountered in double_scalars
</tt><pre style="margin: 0em;">
  back_calc[i]= -inv_relax_time * log(MA)
-----------------------------------------------------------------------------------------------------------------------------
</pre><tt>I think the grid search is too heavy for the NS model, do you have a 
</tt><tt>solution to constrain it?
</tt><pre style="margin: 0em;">

</pre><tt>Or for example, if I want to limit grid search only for kex and pA, but 
</tt><tt>not for others, how can I declare that?
</tt><pre style="margin: 0em;">

</pre><tt>For RuntimeWarning: divide by zero encountered in double_scalars, do you 
</tt><tt>have suggestions for this?
</tt><pre style="margin: 0em;">

</pre><tt>The final results for 'NS R1rho 2-site' did not fit at all, so the data 
</tt><tt>for M61 can only be fit with M61 model but not other models?
</tt><pre style="margin: 0em;">

Thanks a lot!

Peixiang

On 05/19/2014 05:49 PM, Edward d'Auvergne wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">
Hi Peixiang,

Welcome to the relax mailing lists!  The relaxation dispersion
analysis implemented in relax is quite flexible, and the data you have
is supported.  This is well documented in the relax manual which you
should have with your copy of relax (the docs/relax.pdf file).  Have a
look at section 'The R2eff model' in the dispersion chapter of the
manual (<a  rel="nofollow" href="http://www.nmr-relax.com/manual/R2eff_model.html">http://www.nmr-relax.com/manual/R2eff_model.html</a>),
specifically the 'Variable relaxation period experiments' subsection.

Unfortunately the sample scripts are all for the fixed time dispersion
experiments.  However you could have a look at one of the scripts used
for the test suite in relax:

test_suite/system_tests/scripts/relax_disp/exp_fit.py

This script is run in the test suite to ensue that the data you have
will always be supported.  There are many more scripts in that
directory which you might find interesting.  The 'r1rho_on_res_m61.py'
script also involve an exponential fit with many different relaxation
time periods.

You could also try using the relax graphical user interface (GUI) by running:

$ relax -g

Here you simply load the peak list data via the 'Add' button in the
'Spectra list' GUI element and, when you reach the relaxation time
wizard page, simply specify different times for the different spectra
- relax will handle the rest.  Have a look at
<a  rel="nofollow" href="http://www.nmr-relax.com/manual/Dispersion_GUI_mode_loading_data.html">http://www.nmr-relax.com/manual/Dispersion_GUI_mode_loading_data.html</a>
(the GUI section of the dispersion chapter).  The GUI should be much
easier to use than the script UI, though a lot less flexible if you
wish to perform custom, non-standard analyses.

Regards,

Edward



On 19 May 2014 16:25, pma &lt;Peixiang.Ma@xxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">
Hi, all,

Did anybody manage to fit the R1rho relaxation dispersion from some
calculated R2 data (e.g. I fitted the different relax_delay time to extract
R1rho, then calculate R2 = R1rho/sin^2 - R1/tan^2 )

I found a tutorial on wiki, but it stopped after processing the spectra,
actually I finished this part already. Besides,in the manual for R1rho calc
(page 173 in the manual) in the R2eff model, it defined
R1rho(w1)=-1/T*ln(I1(w1)/I0), e.g. it assume the mono-dispersion between
time 0 and a fix time point. We did a bit different, we recorded a series of
time points and got the R1rho for each w1.

Now I have all the R2s, I want to use the implemented R1rho models to fit my
data.

I think relax should be possible to do the fitting with custom calculated
R2, what kind of format should I use? Can anyone show an example of import
file and the processing scripts? Then I could reformat my data to the
template format.

Now my data looks like the following: for each RF_frq the R2 has such format

res_num    w1(Hz)    value    error
            1    1200 30.7734534261 2.68087025208
            1    2000 23.0503960923 1.53567705225
             ...................


Thanks a lot!

Peixiang

On 05/16/2014 02:18 PM, relax-users-request@xxxxxxx wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">
Welcome to the relax-users@xxxxxxx mailing list!

To post to this list, send your message to:

    relax-users@xxxxxxx

</pre></blockquote><pre style="margin: 0em;">
_______________________________________________
relax (<a  rel="nofollow" href="http://www.nmr-relax.com">http://www.nmr-relax.com</a>)

This is the relax-users mailing list
relax-users@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="https://mail.gna.org/listinfo/relax-users">https://mail.gna.org/listinfo/relax-users</a>
</pre></blockquote></blockquote><pre style="margin: 0em;">



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00015" href="msg00015.html">Re: R1rho RD analysis</a></strong>
<ul><li><em>From:</em> Troels Emtek√¶r Linnet</li></ul></li>
<li><strong><a name="00014" href="msg00014.html">Re: R1rho RD analysis</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00011" href="msg00011.html">R1rho RD analysis</a></strong>
<ul><li><em>From:</em> pma</li></ul></li>
<li><strong><a name="00012" href="msg00012.html">Re: R1rho RD analysis</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Thu May 22 17:20:13 2014</div>  
</body>
</html>
