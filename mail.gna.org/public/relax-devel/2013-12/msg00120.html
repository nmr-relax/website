<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: Looping over incomplete data&#45;set -->
<!--X-From-R13: "Sqjneq q'Ohiretar" <rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Tue, 10 Dec 2013 21:34:01 +0100 -->
<!--X-Message-Id: CAED9pY_bN4&#45;V0M=dWcwb1ywyaNhRCK7f4fxq9hSLGvO+=A+u4g@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: CA+CBx2OzasbKcOVP1pC28227VzvwGxLr&#45;C6optLCDFo_hEuVNQ@mail.gmail.com -->
<!--X-Reference: CAED9pY9XYnLf43G=v4p9a3xMkBOP6wqFweCEy2e=o5KhxBpY7g@mail.gmail.com -->
<!--X-Reference: CA+CBx2PxQstpEeYaefoVUAjGn13vK9M&#45;w0Wo&#45;r=pbUH5EAqxig@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: Looping over incomplete data-set -- December 10, 2013 - 21:34</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: Looping over incomplete data-set</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00120" class="tabs">Index by Date</a> | <a href="threads.html#00120" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00119.html">Date Prev</a>] [<a href="msg00121.html">Date Next</a>] [<a href="msg00119.html">Thread Prev</a>] [<a href="msg00121.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Tue, 10 Dec 2013 21:33:26 +0100</li>
<li class="menuitem">
<em>Cc</em>: &quot;relax-devel@xxxxxxx&quot; &lt;relax-devel@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;	h=mime-version:sender:in-reply-to:references:date:message-id:subject	:from:to:cc:content-type:content-transfer-encoding;	bh=XvJaKzbHDj2rsVFJiqWCUJcx5auu/+h9S5/2MdMM7QI=;	b=ZL3o+Wkv8yZApHc2YBRijgej1gikn7eke3MjjDsWs/6GaR5K2Kjb2j0pPxjO0jBVie	Zr4xRuwj3hkLjijIWEUSz+pVupv7WNT+mDGxkrj24oER9DlCW3SZiV5UcdhAdWlRUCbl	VIxu2PI6u4R+kNN82qC76wAoi8bUmFbNNmU7zhTArm19m8IP22cIxNCyYmg8jxJvQVzv	0Dku1gDFfkxJS+9ycWbSndCAJ4o1EtvuCz+1LO/jRewJKtypgb2g8mqLqAO0iDvNZlmE	ghTkS5KwP+WXbY0R+aDnOHuvFoYSd5/bcghQ3d50FnD8p5NhieeoEwRQy84DOo8dmQcj	694A==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00120.html">CAED9pY_bN4-V0M=dWcwb1ywyaNhRCK7f4fxq9hSLGvO+=A+u4g@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;CA+CBx2OzasbKcOVP1pC28227VzvwGxLr-C6optLCDFo_hEuVNQ@xxxxxxxxxxxxxx&gt;	&lt;CAED9pY9XYnLf43G=v4p9a3xMkBOP6wqFweCEy2e=o5KhxBpY7g@xxxxxxxxxxxxxx&gt;	&lt;CA+CBx2PxQstpEeYaefoVUAjGn13vK9M-w0Wo-r=pbUH5EAqxig@xxxxxxxxxxxxxx&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on December 10, 2013 - 21:34:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Hi,

How is your investigation of this problem going?  I've had a look and
have a few pointers for you.  See the
specific_analyses.relax_disp.disp_data module docstring to understand
this:

- Each exponential curve is specific to Ei (the experiment type, which
in this case is just R1rho), Mi (the magnetic field strength), Oi (the
spin-lock offset), and Di (the dispersion point, in this case the
spin-lock field strength).

- The current assumption in relax is that Ti (the time points of the
exponential curves) are the same for all Ei, Mi, Oi, and Di.

- For your R1rho data this is not the case!  It is probably a fair
assumption that this assumption will not hold in many cases.

- The &quot;for time in cdp.relax_time_list&quot; code just before the error
occurs is the problem.

- Instead, the loop_time() function should be used.

- However this function makes the above Ti assumption.

- So the solution would be to make the loop_time() function Ei, Mi,
Oi, and Di specific.  See the loop_offset() function for inspiration.
It should be very similar but loop over all Ti instead of all Oi, and
there should be 2 new checks for the dispersion point and time values
added there.  To check the dispersion points, you will need to fetch
that data in a similar way as is done in loop_point() (see the lines
under the comment &quot;# Assemble the dispersion data&quot;).  The key to this,
as well as all handling of dispersion data in the relax data store, is
that you loop over all spectrum or experiment IDs, matching to Ei, Mi,
Oi, Di, and Ti as needed to find if data exists for that combination.

I will be travelling tomorrow so may not be able to answer your
questions for a while.  I'll let you try to fix this one with the
above hints.

Regards,

Edward



On 10 December 2013 19:05, Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi Edward.

The official repository passes all test at my place.

For the above mentioned case, I un-commented the line again
at my computer, to try to track down where I should make a plan for
future modifications.

Best
Troels


</pre></blockquote><pre style="margin: 0em;">


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00121" href="msg00121.html">Re: Looping over incomplete data-set</a></strong>
<ul><li><em>From:</em> Troels Emtekær Linnet</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00117" href="msg00117.html">Looping over incomplete data-set</a></strong>
<ul><li><em>From:</em> Troels Emtekær Linnet</li></ul></li>
<li><strong><a name="00118" href="msg00118.html">Re: Looping over incomplete data-set</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00119" href="msg00119.html">Re: Looping over incomplete data-set</a></strong>
<ul><li><em>From:</em> Troels Emtekær Linnet</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Tue Dec 10 22:00:09 2013</div>  
</body>
</html>
