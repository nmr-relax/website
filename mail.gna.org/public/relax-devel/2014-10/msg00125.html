<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [bug #22730] Model&#45;free auto&#45;analysis &#45; relax stops and quits at the polate step. -->
<!--X-From-R13: "Sqjneq q'Ohiretar" &#60;rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Tue, 21 Oct 2014 10:36:29 +0200 -->
<!--X-Message-Id: CAED9pY9HfUAeAW_s_c7Zgw1p0_To429LE6N7Jz2Zvm0Qrc+_Ow@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 20140930&#45;090024.sv0.42872@gna.org -->
<!--X-Reference: 20140930&#45;092405.sv2782.38989@gna.org -->
<!--X-Reference: 20140930&#45;092456.sv2782.41222@gna.org -->
<!--X-Reference: 20140930&#45;092605.sv2782.78107@gna.org -->
<!--X-Reference: 20140930&#45;110247.sv0.5357@gna.org -->
<!--X-Reference: 20140930&#45;111238.sv2782.39807@gna.org -->
<!--X-Reference: 20140930&#45;111257.sv2782.2028@gna.org -->
<!--X-Reference: 20140930&#45;114129.sv2782.11288@gna.org -->
<!--X-Reference: 20140930&#45;125928.sv0.11462@gna.org -->
<!--X-Reference: 20140930&#45;133944.sv0.52735@gna.org -->
<!--X-Reference: 20141013&#45;092722.sv0.94338@gna.org -->
<!--X-Reference: 20141013&#45;095756.sv2782.28337@gna.org -->
<!--X-Reference: 20141013&#45;104420.sv0.32428@gna.org -->
<!--X-Reference: 20141013&#45;114528.sv2782.43452@gna.org -->
<!--X-Reference: 20141013&#45;123020.sv0.52209@gna.org -->
<!--X-Reference: 20141013&#45;123427.sv2782.50826@gna.org -->
<!--X-Reference: 20141015&#45;083446.sv0.93434@gna.org -->
<!--X-Reference: CAED9pY8nsmWJd=eNDqSQfpqcceRqwKSuPKmBpjVMNP5Qk7rgkg@mail.gmail.com -->
<!--X-Reference: CAED9pY8Wh198dcAKuiLQ=xHwVfqdfkK+AT7Xg=E72HQANw2=HA@mail.gmail.com -->
<!--X-Reference: 8D2116FA9ED44F4592084C018222B23C73E37F92@E10&#45;MBX4&#45;DR.personale.dir.unibo.it -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [bug #22730] Model-free auto-analysis - relax stops and quits at the polate step. -- October 21, 2014 - 10:36</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: [bug #22730] Model-free auto-analysis - relax stops and quits at the polate step.</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00125" class="tabs">Index by Date</a> | <a href="threads.html#00125" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00124.html">Date Prev</a>] [<a href="msg00126.html">Date Next</a>] [<a href="msg00124.html">Thread Prev</a>] [<a href="msg00065.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Olena Dobrovolska &lt;olena.dobrovolska@xxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Tue, 21 Oct 2014 10:35:38 +0200</li>
<li class="menuitem">
<em>Cc</em>: Francesco Musiani &lt;francesco.musiani@xxxxxxxx&gt;, &quot;relax-devel@xxxxxxx&quot; &lt;relax-devel@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113; h=mime-version:sender:in-reply-to:references:date:message-id:subject :from:to:cc:content-type:content-transfer-encoding; bh=nojlJNpLcNQ+gT2We2eGmMqJr/y/Vx+MdXE/drhNb80=; b=W2ZBywvuxB3/TquLmRnNlWFNgPSfPXMenbge3lgeGl/fK/lSXe0vvEKGIPqnY4HFMk 3whPdsu0y16Abk1au3FN7uZUI5VzFCbhci0JWYudz8xhJKWt+BgGaOTp8N1tVLBjikZj 9hAmyXQoYyI59o0zCa1/T46nkmUoXqfcKgQjLaMpsWDPyHIXK9GUgYwG4Eo0oaKl/Ilx qaK6Ck4sAnHjqVMLWjb+Ju5fo1xQnS7wBMpFUwfKa4a2+sp5nwTEx1jSBIKqIaRDxHnd /9tZ0Ees++Oq9t6hJ6fjxFsh2bFHFoJLgMkgS1mYmr14oWMsQwo3LPEaECKIA79bUu2r LB3g==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00125.html">CAED9pY9HfUAeAW_s_c7Zgw1p0_To429LE6N7Jz2Zvm0Qrc+_Ow@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;20140930-090024.sv0.42872@gna.org&gt; &lt;20140930-092405.sv2782.38989@gna.org&gt; &lt;20140930-092456.sv2782.41222@gna.org&gt; &lt;20140930-092605.sv2782.78107@gna.org&gt; &lt;20140930-110247.sv0.5357@gna.org&gt; &lt;20140930-111238.sv2782.39807@gna.org&gt; &lt;20140930-111257.sv2782.2028@gna.org&gt; &lt;20140930-114129.sv2782.11288@gna.org&gt; &lt;20140930-125928.sv0.11462@gna.org&gt; &lt;20140930-133944.sv0.52735@gna.org&gt; &lt;<a href="msg00062.html">20141013-092722.sv0.94338@gna.org</a>&gt; &lt;<a href="msg00063.html">20141013-095756.sv2782.28337@gna.org</a>&gt; &lt;<a href="msg00070.html">20141013-104420.sv0.32428@gna.org</a>&gt; &lt;<a href="msg00071.html">20141013-114528.sv2782.43452@gna.org</a>&gt; &lt;<a href="msg00075.html">20141013-123020.sv0.52209@gna.org</a>&gt; &lt;<a href="msg00076.html">20141013-123427.sv2782.50826@gna.org</a>&gt; &lt;<a href="msg00097.html">20141015-083446.sv0.93434@gna.org</a>&gt; &lt;CAED9pY8nsmWJd=eNDqSQfpqcceRqwKSuPKmBpjVMNP5Qk7rgkg@mail.gmail.com&gt; &lt;CAED9pY8Wh198dcAKuiLQ=xHwVfqdfkK+AT7Xg=E72HQANw2=HA@mail.gmail.com&gt; &lt;<a href="msg00124.html">8D2116FA9ED44F4592084C018222B23C73E37F92@E10-MBX4-DR.personale.dir.unibo.it</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on October 21, 2014 - 10:36:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Hi Olena,

Please see below:

</pre><blockquote class="blockquote"><pre style="margin: 0em;">The problem with the repeating spherical diffusion tensor initialisation 
has disappeared right from the moment I updated the relax version. Also, 
the problem of stopping of the calculation has not been happening anymore.
</pre></blockquote><pre style="margin: 0em;">

This problem can only be caused by the operating system, as there are
two sequential actions in the protocol here.  Save the results file,
then check that it exists.  This is specifically to allow for
continuing calculations that were prematurely interrupted.  The
problem you saw was that the check for the file was infinitely
failing, meaning that the results file was probably not saved.  This
can happen if there is not enough room left on the disk, or if
something strange happened with the file system preventing relax from
seeing and reading the file.  I have modified the relax source code
(in the relax trunk,
<a  rel="nofollow" href="http://www.nmr-relax.com/download.html#Source_code_repository">http://www.nmr-relax.com/download.html#Source_code_repository</a>) to now
better handle file system strangeness.  If this problem returns,
please create a new bug report for this so we can isolate the problem
and fix it (<a  rel="nofollow" href="https://gna.org/bugs/?func=additem&amp;group=relax">https://gna.org/bugs/?func=additem&amp;group=relax</a>).


</pre><blockquote class="blockquote"><pre style="margin: 0em;">Last calculation reached the point of prolate up to 28 round, which seemed 
to me strange and I stopped it.
</pre></blockquote><pre style="margin: 0em;">

If you had the limit of 30, then it would have finished soon anyway
and have moved onto the next model.  You can decrease this limit if
you wish.


</pre><blockquote class="blockquote"><pre style="margin: 0em;">At the moment I do not know where could be a problem. We performed 
temperature calibration prior each epxeriment, as you suggest. Also we used 
signle scan interleaving approach. Therefore, unless it is possible to see 
from the acquired data, I do not think this is the reason, because, as I 
explained, this point has been considered.
</pre></blockquote><pre style="margin: 0em;">

If this is the case, then it should not be the quality of the data!


</pre><blockquote class="blockquote"><pre style="margin: 0em;">The protein I am studying is a homodimer, composed of the two head-to-head 
dimerised C-terminal domains to which the N-terminal domains are attached 
via flexible linkers.
</pre></blockquote><pre style="margin: 0em;">

This could be the problem.  The A-BB-A domain system will not tumble
as a simple sphere, spheroid, or ellipsoid.  In this case, the
standard diffusion tensors are just an approximation to a much more
complicated Brownian tumbling.


</pre><blockquote class="blockquote"><pre style="margin: 0em;">As this is a homodimer, I see the number of 15N-1H HSQC peaks corresponding 
for only a monomer.
</pre></blockquote><pre style="margin: 0em;">

That is to be expected.


</pre><blockquote class="blockquote"><pre style="margin: 0em;">To study this protein as a dimer (as it is) I duplicated the data in the 
final DC files, in accordance with the pdb file of the dimer.
</pre></blockquote><pre style="margin: 0em;">

Due to symmetry, this should hopefully give identical results compared
to analysing a single domain.  The key is if the domain symmetry lines
up with the Brownian diffusion tensor and its symmetry.  I guess that
is the aim.


</pre><blockquote class="blockquote"><pre style="margin: 0em;">My purpose is to run model-free analysis for the entire protein. But also I 
am interested to analyse the domains separately, so I began with 
calculations for the N-terminal part of it, cutting away the rest of the 
data. Exactly this part I have sent you. Do you think that could cause the 
problem? Then I should just run Model-free analysis for the entire protein, 
and see if it will stay within 2 to 15 rounds.
</pre></blockquote><pre style="margin: 0em;">

If there are domain motions between the two domains in one unit then,
as I mentioned above, the simple Brownian diffusion tensors are only a
rough approximation.  You will be able to fit the data, but it can be
problematic.  The residual components of the complex diffusion not
modelled by the simple single tensor will appear as either artificial
Rex or nanosecond motions (see my Mol. Biosyst. review at
<a  rel="nofollow" href="http://dx.doi.org/10.1039/b702202f">http://dx.doi.org/10.1039/b702202f</a>).  These artificial motions could
cause the global optimisation algorithm to take a huge number of
rounds to converge.  In any case, you should compare to the global
'local tm' model to try to judge if the internal motions are real or
not.  With such complexity in the system, you must understand the
consequences and side effects to be able to strongly interpret the
final results.  And you should not worry if optimisation takes a huge
amount of time, as the current level of model-free theory is not
advanced enough for such internal domain motions.


</pre><blockquote class="blockquote"><pre style="margin: 0em;">As for the structure quality. What kind of parameters should be considered 
in this case? Do you see the problems from the input data I have sent you?
</pre></blockquote><pre style="margin: 0em;">

If some bond vectors are shifted from the solution average
orientation, then for these you will see artificial Rex or nanosecond
motions.  Which of these effects is determined by the bias of the
vector orientation with respect to the diffusion tensor, and if an
under or over estimation of tm occurs.  See the review for a detailed
explanation.

Regards,

Edward


</pre><blockquote class="blockquote"><pre style="margin: 0em;">Thanks for your effort.

Regards,
Olena
________________________________________
From: edward.dauvergne@xxxxxxxxx [edward.dauvergne@xxxxxxxxx] on behalf of 
Edward d'Auvergne [edward@xxxxxxxxxxxxx]
Sent: 20 October 2014 17:02
To: Edward d'Auvergne
Cc: Olena Dobrovolska; relax-devel@xxxxxxx; Francesco Musiani
Subject: Re: [bug #22730] Model-free auto-analysis - relax stops and quits 
at the polate step.

Hi Olena,

I was wondering if you had seen the repeating spherical diffusion
tensor initialisation problem again, or if this problem has
disappeared?  The bug report (<a  rel="nofollow" href="https://gna.org/bugs/?22730">https://gna.org/bugs/?22730</a>) is that the
analysis just stopped.  Have you seen this stopping again in your
current calculations?  You should note that in the GUI, there is a
default maximum of 30 rounds of optimisation.  If you have stopped at
this limit, then that is ok.  It could mean one of a few things:

- There is a problem with the data.  This sometimes happens when not
using the best per-experiment temperature calibration and
per-experiment temperature control methods
(<a  rel="nofollow" href="http://www.nmr-relax.com/manual/Temperature_control_calibration.html">http://www.nmr-relax.com/manual/Temperature_control_calibration.html</a>).
You should carefully note the points in that link.  Often the single
90 pulse MeOH calibration used to determine the difference between the
VT unit and the spectrometer is not good enough for relaxation data.

- The affected diffusion tensor is not a good description of your
system.  This happens when the molecule is not tumbling as a single
rigid body.  I.e. there are freely moving domains.  In this case, the
single diffusion tensor is a poor estimate of the real global motion
of the system.  In such cases you should be very careful about
artificial Rex or nanosecond motions (see my 2007 Mol. Biosyst. paper
at <a  rel="nofollow" href="http://dx.doi.org/10.1039/b702202f">http://dx.doi.org/10.1039/b702202f</a> for a review about this
problem).  If you don't see the motion in the noisy local tm global
model, then it is likely to not be real.

- The input structure is of low quality.

Normally you should be finished between 2 to 15 rounds of
optimisation, and anything more is an indication that something is not
quite right.  I look forward to hearing what the current status of
this problem is.

Cheers,

Edward


P. S.  Note that this is on the public and permanently archived
relax-devel mailing list and not the bug report.  Your response will
be accepted by the mailing list moderator after a certain while.



On 15 October 2014 17:31, Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi Olena,

I will reply on the relax-devel mailing list, as it is a bit
ridiculous to have a long conversation on the bug tracker.  I have
received your private messages with the Input_state.bz2,
analysis.log.bz2, and analysis.log.7z files.  These are not attached,
so they will remain private.  Please reply to this message rather than
continuing the conversation in the bug tracker.

I have now run the analysis up to round_2 of the spherical diffusion
tensor.  I stopped here, as that is where the bug reports do not
match.  The problem I saw previously in your log file 'analysis_first
part.txt' (at <a  rel="nofollow" href="https://gna.org/support/download.php?file_id=22627">https://gna.org/support/download.php?file_id=22627</a>) is
that the spherical diffusion tensor initial optimisation had been
executed 42085 times (<a  rel="nofollow" href="https://gna.org/bugs/index.php?22730#comment9">https://gna.org/bugs/index.php?22730#comment9</a>).
But in your new analysis.log file, this is not the case.  It is only
executed once:

[edward@localhost bug_22730]$ grep -c &quot;^Function value:   200507.263&quot;
*.txt *.log
analysis_first part.txt:42085
analysis_last10000lines.log:70
analysis.log:1

So here we now have two completely unrelated problems!  The first
problem reported (<a  rel="nofollow" href="https://gna.org/support/download.php?file_id=22627">https://gna.org/support/download.php?file_id=22627</a>)
is not replicated in your current log file or in my analysis attempt.
Do you know why?  This massive repetition looks like what happens when
the 'mpirun' command line program is incorrectly used or incorrectly
set up.  Could that be the cause?  Can you replicate this
super-massive repetition problem?  Or could it be that your 7z
compression software somehow corrupted the log file?  Could this be a
simple mistake?  This is where I am quite confused, as it should be
impossible with relax's source code for this infinite repetition to
occur.  The only case is if there are strange things happening with
your file system so that relax cannot detect the file.  That is why I
asked you if your home directory was NFS, SMB, or some other network
drive.

There is one other case I can think of here, and that is if your file
system no longer had any room.  Then relax will not be able to save
the results file, hence it will not be able to detect it and then it
will repeat the last optimisation round forever.  Did you have such a
problem?  I have not written the dauvergne_protocol auto-analysis to
handle this situation, as I assumed that a Python Error would stop the
analysis.  That may not be the case when running with OpenMPI.

I would like to solve this infinite repetition first, as that has
taken up a lot of my time already.  This is an impasse which prevents
the rest of the analysis from ever occurring.  I.e. you cannot get to
the prolate model.  Then I'll look and see if there is another issue
affecting your data.

Cheers,

Edward


On 15 October 2014 10:34, anonymous &lt;NO-REPLY.INVALID-ADDRESS@xxxxxxx&gt; 
wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Follow-up Comment #12, bug #22730 (project relax):

Hi,

I have no idea why the information containing the data and its 
specification
is missing. I follow the protocol loading the DC files (after I load the 
H and
N spins from the pdb file), specifying all the parameters (temperature 
control
etc.). Then prior the execution, I save the input as input_state.bz2 as
recommended. Perhaps, last time I opened the input_state.bz2 file, which
perhaps did not load the data? But then why did it work?

Anyway, this time, I upgraded Relax version to 3.3.1 and load the files 
once
again from the scratch. I would appreciate if you have a look at the log 
file
which, being compressed to 1.8 Mb, I uploaded here
<a  rel="nofollow" href="https://mega.co.nz/#fm/HI4ShI7T">https://mega.co.nz/#fm/HI4ShI7T</a>

The Relax calculations are currently at the 'prolate' stage. But the last 
file
was generated at 4 pm yesterday.
Should it be like that? If you think there could be a problem with the 
input
data, I can send it to you as well via private email.

Would appreciate if you help me to find and solve the problem.

Regards,
Olena

    _______________________________________________________

Reply to this item at:

  &lt;<a  rel="nofollow" href="http://gna.org/bugs/?22730">http://gna.org/bugs/?22730</a>&gt;

_______________________________________________
  Message sent via/by Gna!
  <a  rel="nofollow" href="http://gna.org/">http://gna.org/</a>

</pre></blockquote></blockquote></blockquote><pre style="margin: 0em;">


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00062" href="msg00062.html">[bug #22730] Model-free auto-analysis - relax stops and quits at the polate step.</a></strong>
<ul><li><em>From:</em> anonymous</li></ul></li>
<li><strong><a name="00063" href="msg00063.html">[bug #22730] Model-free auto-analysis - relax stops and quits at the polate step.</a></strong>
<ul><li><em>From:</em> Edward d Auvergne</li></ul></li>
<li><strong><a name="00070" href="msg00070.html">[bug #22730] Model-free auto-analysis - relax stops and quits at the polate step.</a></strong>
<ul><li><em>From:</em> anonymous</li></ul></li>
<li><strong><a name="00071" href="msg00071.html">[bug #22730] Model-free auto-analysis - relax stops and quits at the polate step.</a></strong>
<ul><li><em>From:</em> Edward d Auvergne</li></ul></li>
<li><strong><a name="00075" href="msg00075.html">[bug #22730] Model-free auto-analysis - relax stops and quits at the polate step.</a></strong>
<ul><li><em>From:</em> anonymous</li></ul></li>
<li><strong><a name="00076" href="msg00076.html">[bug #22730] Model-free auto-analysis - relax stops and quits at the polate step.</a></strong>
<ul><li><em>From:</em> Edward d Auvergne</li></ul></li>
<li><strong><a name="00097" href="msg00097.html">[bug #22730] Model-free auto-analysis - relax stops and quits at the polate step.</a></strong>
<ul><li><em>From:</em> anonymous</li></ul></li>
<li><strong><a name="00102" href="msg00102.html">Re: [bug #22730] Model-free auto-analysis - relax stops and quits at the polate step.</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00123" href="msg00123.html">Re: [bug #22730] Model-free auto-analysis - relax stops and quits at the polate step.</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00124" href="msg00124.html">RE: [bug #22730] Model-free auto-analysis - relax stops and quits at the polate step.</a></strong>
<ul><li><em>From:</em> Olena Dobrovolska</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Wed Oct 22 08:40:15 2014</div>  
</body>
</html>
