<!-- MHonArc v2.6.16 -->
<!--X-Subject: r12556 &#45; in /1.3/test_suite/shared_data/pdc_files: r1_pdc_err	relax_fit_pdc_err.py -->
<!--X-From-R13: rqjneqNaze&#45;erynk.pbz -->
<!--X-Date: Fri, 18 Feb 2011 14:20:07 +0100 -->
<!--X-Message-Id: E1PqQFj&#45;00058X&#45;5F@subversion.gna.org -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>r12556 - in /1.3/test_suite/shared_data/pdc_files: r1_pdc_err	relax_fit_pdc_err.py -- February 18, 2011 - 14:20</title>
<link rel="stylesheet" type="text/css" href="/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="https://gna.org/images/gna.theme/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />r12556 - in /1.3/test_suite/shared_data/pdc_files: r1_pdc_err	relax_fit_pdc_err.py</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00077" class="tabs">Index by Date</a> | <a href="threads.html#00077" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00076.html">Date Prev</a>] [<a href="msg00078.html">Date Next</a>] [<a href="msg00076.html">Thread Prev</a>] [<a href="msg00078.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: relax-commits@xxxxxxx</li>
<li class="menuitem">
<em>Date</em>: Fri, 18 Feb 2011 13:20:07 -0000</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00077.html">E1PqQFj-00058X-5F@subversion.gna.org</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>edward</strong> on February 18, 2011 - 14:20:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Author: bugman
Date: Fri Feb 18 14:20:06 2011
New Revision: 12556

URL: <a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax?rev=12556&amp;view=rev">http://svn.gna.org/viewcvs/relax?rev=12556&amp;view=rev</a>
Log:
Added a relax script and R1 data file for relax's optimisation and MC sims 
using the PDC file errors.


Added:
    1.3/test_suite/shared_data/pdc_files/r1_pdc_err
    1.3/test_suite/shared_data/pdc_files/relax_fit_pdc_err.py
      - copied, changed from r12554, 
1.3/test_suite/shared_data/pdc_files/relax_fit.py

Added: 1.3/test_suite/shared_data/pdc_files/r1_pdc_err
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/1.3/test_suite/shared_data/pdc_files/r1_pdc_err?rev=12556&amp;view=auto">http://svn.gna.org/viewcvs/relax/1.3/test_suite/shared_data/pdc_files/r1_pdc_err?rev=12556&amp;view=auto</a>
==============================================================================
--- 1.3/test_suite/shared_data/pdc_files/r1_pdc_err (added)
+++ 1.3/test_suite/shared_data/pdc_files/r1_pdc_err Fri Feb 18 14:20:06 2011
@@ -1,0 +1,72 @@
+
+# mol_name res_num    res_name   spin_num   spin_name  value                
error               
+None       2          Gln        None       N                 2.19316068443  
    0.0264822775112
+None       3          Ile        None       N                 2.33150942395  
    0.0218282475286
+None       4          Phe        None       N                 2.34809773828  
    0.0393993956573
+None       5          Val        None       N                 2.24905317514  
    0.0190416227806
+None       6          Lys        None       N                 2.27991249993  
    0.0073387122964
+None       7          Thr        None       N                 2.21988325334  
    0.0289980021014
+None       8          Leu        None       N                 2.23992585719  
    0.0394637142884
+None       9          Thr        None       N                 1.96827404586  
    0.0285585555608
+None       10         Gly        None       N                 2.08825352037  
   0.00856203608884
+None       11         Lys        None       N                 1.99766965295  
    0.0154821098023
+None       12         Thr        None       N                 2.16418266589  
    0.0589894950385
+None       13         Ile        None       N                 2.27249997894  
    0.0323797055027
+None       14         Thr        None       N                 2.19913359459  
    0.0261282530191
+None       15         Leu        None       N                 2.27947735732  
    0.0804008170395
+None       16         Glu        None       N                 2.08663871613  
    0.0742976416989
+None       17         Val        None       N                 2.28454679926  
    0.0319478148557
+None       18         Glu        None       N                 2.10794161516  
    0.0491390514111
+None       20         Ser        None       N                  2.2432376545  
    0.0174075720472
+None       21         Asp        None       N                 2.34905882789  
   0.00896916086091
+None       22         Thr        None       N                 2.27492782819  
    0.0283784241729
+None       23         Ile        None       N                 2.46692508258  
    0.0512139594604
+None       25         Asn        None       N                 2.39550908267  
     0.028141856637
+None       26         Val        None       N                 2.13297271051  
    0.0738836932379
+None       27         Lys        None       N                 2.36245343286  
     0.034473000886
+None       28         Ala        None       N                 2.38481618154  
    0.0369276054641
+None       29         Lys        None       N                 2.32688199592  
    0.0267154381038
+None       30         Thr        None       N                 2.42020223098  
    0.0641345037416
+None       31         Gln        None       N                 2.37198006924  
    0.0607157552927
+None       32         Asp        None       N                   2.343030317  
    0.0287089229986
+None       33         Lys        None       N                 2.19288519999  
    0.0322404521468
+None       34         Glu        None       N                 2.23809730593  
     0.016155226898
+None       35         Gly        None       N                 2.24610605696  
    0.0166231784999
+None       36         Ile        None       N                 1.99097003714  
     0.018556395961
+None       39         Asp        None       N                 2.29368308937  
    0.0107946336402
+None       40         Gln        None       N                 2.25465715695  
    0.0219579437623
+None       41         Gln        None       N                 2.22439489827  
    0.0246838738103
+None       42         Arg        None       N                 2.27979894813  
      0.14609662846
+None       43         Leu        None       N                 2.17239195077  
    0.0562093749792
+None       44         Ile        None       N                 2.27944810393  
    0.0274015962376
+None       45         Phe        None       N                 2.26621382042  
    0.0325598012054
+None       46         Ala        None       N                 2.17327103743  
    0.0366263114163
+None       47         Gly        None       N                 2.19159971705  
    0.0200974396044
+None       48         Lys        None       N                 2.20125816954  
    0.0769594227925
+None       49         Gln        None       N                 2.11409184343  
    0.0211565921351
+None       50         Leu        None       N                 2.24441747047  
    0.0466054926297
+None       51         Glu        None       N                 2.13351495913  
    0.0369010861993
+None       52         Asp        None       N                 2.04583349976  
    0.0309251585403
+None       54         Arg        None       N                 2.19228267695  
    0.0125176652031
+None       55         Thr        None       N                 2.27502074947  
    0.0319568936121
+None       56         Leu        None       N                 2.36913113746  
    0.0158844775147
+None       57         Ser        None       N                 2.29814478201  
    0.0142640516301
+None       58         Asp        None       N                 2.37720483191  
    0.0272911357828
+None       59         Tyr        None       N                 2.22553611629  
    0.0125933167265
+None       60         Asn        None       N                 2.28459962433  
     0.013370924242
+None       61         Ile        None       N                 2.34213728573  
    0.0264153868176
+None       62         Gln        None       N                 1.97367886288  
    0.0217945020797
+None       63         Lys        None       N                 2.16500024708  
    0.0195312534223
+None       64         Glu        None       N                 2.31913930394  
    0.0223294049604
+None       65         Ser        None       N                 2.18918681844  
   0.00908363177241
+None       66         Thr        None       N                 2.18167008464  
    0.0112902195625
+None       67         Leu        None       N                 2.26772345178  
    0.0444564014823
+None       68         His        None       N                 2.24680733455  
   0.00926065649886
+None       69         Leu        None       N                 2.24851949133  
    0.0379125750722
+None       70         Val        None       N                 2.31543911345  
    0.0279226422469
+None       71         Leu        None       N                  2.1756894166  
   0.00987045835498
+None       72         Arg        None       N                 2.16361975928  
    0.0253849160526
+None       73         Leu        None       N                 1.85657597782  
    0.0255460422485
+None       74         Arg        None       N                  1.6122677679  
    0.0231001217925
+None       75         Gly        None       N                 1.16243924266  
     0.023448186193
+None       76         Gly        None       N                0.763064480891  
    0.0030557315479

Copied: 1.3/test_suite/shared_data/pdc_files/relax_fit_pdc_err.py (from 
r12554, 1.3/test_suite/shared_data/pdc_files/relax_fit.py)
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/1.3/test_suite/shared_data/pdc_files/relax_fit_pdc_err.py?p2=1.3/test_suite/shared_data/pdc_files/relax_fit_pdc_err.py&amp;p1=1.3/test_suite/shared_data/pdc_files/relax_fit.py&amp;r1=12554&amp;r2=12556&amp;rev=12556&amp;view=diff">http://svn.gna.org/viewcvs/relax/1.3/test_suite/shared_data/pdc_files/relax_fit_pdc_err.py?p2=1.3/test_suite/shared_data/pdc_files/relax_fit_pdc_err.py&amp;p1=1.3/test_suite/shared_data/pdc_files/relax_fit.py&amp;r1=12554&amp;r2=12556&amp;rev=12556&amp;view=diff</a>
==============================================================================
--- 1.3/test_suite/shared_data/pdc_files/relax_fit.py (original)
+++ 1.3/test_suite/shared_data/pdc_files/relax_fit_pdc_err.py Fri Feb 18 
14:20:06 2011
@@ -1,4 +1,9 @@
 # Script for relaxation curve fitting.
+
+# relax module imports.
+from generic_fns.mol_res_spin import return_spin
+from relax_io import extract_data
+
 
 # Create the data pipe.
 pipe.create('rx', 'relax_fit')
@@ -41,6 +46,9 @@
     1.50000000
 ]
 
+# The error file.
+err_lines = extract_data('errors_R1.txt')
+
 # Loop over the spectra.
 for i in xrange(len(times)):
     # Load the peak intensities.
@@ -49,12 +57,20 @@
     # Set the relaxation times.
     relax_fit.relax_time(time=times[i], spectrum_id=names[i])
 
-# Specify the duplicated spectra.
-spectrum.replicated(spectrum_ids=['0.10', '0.10b'])
-spectrum.replicated(spectrum_ids=['0.50', '0.50b'])
+    # The errors.
+    for j in range(len(err_lines)):
+        # Skip comments.
+        if err_lines[j][0][0] == '#':
+            continue
 
-# Peak intensity error analysis.
-spectrum.error_analysis()
+        # The spin ID.
+        spin_id = ':%s' % err_lines[j][1]
+        spin = return_spin(spin_id)
+
+        # Set the error.
+        if not hasattr(spin, 'intensity_err'):
+            spin.intensity_err = {}
+        spin.intensity_err[names[i]] = float(err_lines[j][i+2])
 
 # Set the relaxation curve type.
 relax_fit.select_model('exp')
@@ -73,4 +89,7 @@
 monte_carlo.error_analysis()
 
 # Save the relaxation rates.
-value.write(param='rx', file='r1', force=True)
+value.write(param='rx', file='r1_pdc_err', force=True)
+
+# Save the program state.
+state.save('state', force=True)



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer">You are on the <a href="http://gna.org">Gna!</a> mail server.</div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Fri Feb 18 14:40:01 2011</div>  
</body>
</html>
