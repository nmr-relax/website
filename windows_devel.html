<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<!--
    Copyright (c) 2006-2012 Edward d'Auvergne.

    Permission is granted to copy, distribute and/or modify this document
    under the terms of the GNU Free Documentation License, Version 1.3
    or any later version published by the Free Software Foundation;
    with no Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.
    A copy of the license is included in the section titled "GNU
    Free Documentation License" (fdl.html).
-->

<head>
  <title>MS Windows development platform for relax</title>

  <!-- Common HTML head include -->
  <!--#include virtual="head.html" -->

</head>

<body>

<!-- Common relax webpage header and side menu includes -->
<!--#include virtual="header.html" -->
<!--#include virtual="menu.html" -->

<div class="main">
 <div class="main_box">
  <h1>MS Windows development platform</h1>

   <p>By installing the following software, you will be able to compile relax's C modules, compile the LaTeX manual, generate relax distribution packages, check out source code from the relax repository, cleanly edit relax's source code, and GPG sign files for security.</p>

<!-- Menu -->
   <ul>
    <li><a href="#scons">1. SCons</a>
    <ul>
     <li><a href="#scons_why">1.1 Why install?</a></li>
     <li><a href="#scons_download">1.2 Download</a></li>
     <li><a href="#scons_install">1.3 Installation</a></li>
    </ul></li>

    <li><a href="#MSVS">2. MS Visual Studio (MSVS) Express</a>
    <ul>
     <li><a href="#MSVS_why">2.1 Why install?</a></li>
     <li><a href="#MSVS_download">2.2 Download</a></li>
     <li><a href="#MSVS_install">2.3 Installation</a></li>
     <li><a href="#MSVS_probs">2.4 relax module compilation problems</a>
     <ul>
      <li><a href="#MSVS_python_issues">2.4.1 Python issues</a></li>
      <li><a href="#MSVS_scons_issues">2.4.2 SCons issues (cannot find the MSVS compiler)</a></li>
      <li><a href="#MSVS_scons_issues_32bit">2.4.3 SCons issues (32-bit MSVS compiler on 64-bit MS Windows)</a></li>
     </ul></li>
    </ul></li>

    <li><a href="#git">3. Git</a>
    <ul>
     <li><a href="#git_why">3.1 Why install?</a></li>
     <li><a href="#git_download">3.2 Download</a></li>
    </ul></li>

    <li><a href="#editor">4. Code editors</a>
    <ul>
     <li><a href="#vim">4.1 Vim</a>
      <ul>
       <li><a href="#vim_why">4.1.1 Why install?</a></li>
       <li><a href="#vim_download">4.1.2 Download</a></li>
       <li><a href="#vim_install">4.1.3 Installation</a></li>
       <li><a href="#vim_post_install">4.1.4 Post-install</a></li>
      </ul></li>
    </ul></li>

    <li><a href="#LaTeX">5. LaTeX</a>
    <ul>
     <li><a href="#LaTeX_why">5.1 Why install?</a></li>
     <li><a href="#LaTeX_download">5.2 Download</a></li>
     <li><a href="#LaTeX_install">5.3 Installation</a>
     <ul>
      <li><a href="#LaTeX_extract">5.3.1 File extraction and the PDF file</a></li>
      <li><a href="#LaTeX_miktex">5.3.2 LaTeX installation</a></li>
      <li><a href="#LaTeX_gs">5.3.3 Ghostscript installation</a></li>
      <li><a href="#LaTeX_gsview">5.3.4 GSView installation</a></li>
     </ul></li>
    </ul></li>

    <li><a href="#gpg">6. GnuPG</a>
    <ul>
     <li><a href="#gpg_why">6.1 Why install?</a></li>
     <li><a href="#gpg_download">6.2 Download</a></li>
     <li><a href="#gpg_install">6.3 Installation</a></li>
     <li><a href="#gpg_post_install">6.4 Post-install</a></li>
    </ul></li>

    <li><a href="#path">7. Modifying the system path</a>
    <ul>
     <li><a href="#path_xp">7.1 The MS Windows XP system path</a></li>
    </ul></li>

   </ul>
 </div>
<!-- Menu fin -->


<!-- SCons -->
 <div id="scons" class="main_box">
   <h1>1. SCons</h1>

   <div id="scons_why" class="main_h2">
    <h2>1.1 Why install?</h2>
     <p>The <a href="http://www.scons.org/">SCons</a> build system was chosen over other build systems including '<em>make</em>' as it is a cross-platform build system which can be used in Unix, GNU/Linux, Mac OS X, and MS Windows.  Various components of the program relax can be created using the SCons utility.  This includes C module compilation, creation of the relax LaTeX manual, creation of the distribution packages, and cleaning up and removing certain files.  The file '<em>sconstruct</em>' in the base relax directory, which consists of Python code, directs the operation of SCons for the various functions.  For example to compile the C modules, in the relax base directory type:</p>

     <p><em>> scons</em></p>

     <p>To compile the relax LaTeX manual as a PDF file, type:</p>

     <p><em>> scons user_manual_pdf</em></p>

     <p>This requires the <a href="#LaTeX">installation of LaTeX</a>.  To create the pre-compiled distribution packages for your platform (for MS Windows this requires the installation of <a href="#MSVS">MS Visual Studio</a>, <a href="#LaTeX">LaTeX</a>, and <a href="#gpg">GnuPG</a>), type:</p>

     <p><em>> scons binary_dist</em></p>

     <p>For additional uses of the SCons system, see the section of the relax manual titled <a href="manual/The_SCons_build_system.html">'The SCons build system'</a> (<a href="https://sourceforge.net/projects/nmr-relax/files/manual/relax.pdf/download">PDF</a> version).</p>

   </div>

   <div id="scons_download" class="main_h2">
    <h2>1.2 Download</h2>
     <p>The current version of <a href="http://www.scons.org/">SCons</a> can be downloaded from <a href="http://www.scons.org/download.php">here</a>.</p>

   </div>

   <div id="scons_install" class="main_h2">
    <h2>1.3 Installation</h2>
     <p>After double clicking on the installation EXE file, follow the instructions in the installation wizard.  The installation should automatically find the Python installation directory and install SCons there.</p>

   </div>

 </div>
<!-- SCons fin -->


<!-- MSVS -->
 <div id="MSVS" class="main_box">
   <h1>2. MS Visual Studio (MSVS) Express</h1>

   <div id="MSVS_why" class="main_h2">
    <h2>2.1 Why install?</h2>
     <p>Setting up this software will enable compilation of the relax C modules.  The compilation using the <a href='http://www.scons.org/'>SCons</a> cross platform compilation tool is described both <a href="#scons">above</a> and on the <a href="download.html#compilation">download page</a>.</p>
   </div>

   <div id="MSVS_download" class="main_h2">
    <h2>2.2 Download</h2>
     <p>The <a href="http://www.visualstudio.com/en-us">Express edition of MS Visual Studio</a> is a cost-free download from the Microsoft website.  You will need to choose the version suitable for your operating system.  The download size for MS Visual Studio Express is anywhere between 500 Mb to 2 Gb, depending on the options selected, and can be installed by two methods.  The first is to download and run the installation executable file and then install the Microsoft Platform SDK.  The second method is to download and burn a CD or ISO image containing all the software.  No additional software is required if installing from the CD image.  The following is a list of links for downloading the different files for various MSVS versions, in English, directly from the Microsoft website:</p>
   </div>

<table cellspacing="10">
  <tbody>
    <tr>
      <td><strong>Express edition</strong></td>
      <td><strong>Installation executable</strong></td>
      <td><strong>ISO image</strong></td>
    </tr>
    <tr>
      <td>MS Visual Studio 2005 Express</td>
      <td><a href="http://go.microsoft.com/fwlink/?LinkId=51410&amp;clcid=0x409">http://go.microsoft.com/fwlink/?linkid=51410&amp;clcid=0x409</a></td>
      <td><a href="http://go.microsoft.com/fwlink/?linkid=57034">http://go.microsoft.com/fwlink/?linkid=57034</a></td>
    </tr>
    <tr>
      <td>MS Visual Studio 2008 Express (SP1)</td>
      <td><a href="http://go.microsoft.com/?linkid=7729279">http://go.microsoft.com/?linkid=7729279</a></td>
      <td><a href="http://www.microsoft.com/en-us/download/details.aspx?id=13276">http://www.microsoft.com/en-us/download/details.aspx?id=13276</a></td>
    </tr>
    <tr>
      <td>MS Visual Studio 2010 Express</td>
      <td><a href="http://go.microsoft.com/?linkid=9709949">http://go.microsoft.com/?linkid=9709949</a></td>
      <td><a href="http://go.microsoft.com/?linkid=9709969">http://go.microsoft.com/?linkid=9709969</a></td>
    </tr>
    <tr>
      <td>MS Visual Studio 2012 Express for Windows Desktop</td>
      <td><a href="http://go.microsoft.com/?linkid=9816758">http://go.microsoft.com/?linkid=9816758</a></td>
      <td><a href="http://go.microsoft.com/?linkid=9816768">http://go.microsoft.com/?linkid=9816768</a></td>
    </tr>
  </tbody>
</table>

   <div id="MSVS_install" class="main_h2">
    <h2>2.3 Installation</h2>
     <p>If the ISO image has been downloaded and burnt onto CD, inserting the CD will commence the installation process.  The installation wizard is relatively straight forward and the software can be installed anywhere.  You can also use the ISO image directly without burning it to disk, if you know how.</p>
   </div>

   <div id="MSVS_probs" class="main_h2">
    <h2>2.4 relax module compilation problems</h2>
     <h3 id="MSVS_python_issues">2.4.1 Python issues</h3>
      <p>After typing <em>scons</em> from the relax base directory to compile the C modules, the following error may occur:</p>

      <em>c:\python24\include\pyconfig.h(130) : fatal error C1083: cannot open include file: 'basetsd.h': No such file or directory</em>

      <p>If you encounter this problem, the solution is straightforward.  Simply change line 130 of the file '<em>include\pyconfig.h</em>' (the line number might be different for newer Python versions), located in the base Python installation directory, from</p>

      <em>#include &#060;basetsdh&#062;</em>

      <p>to</p>

      <em>/* #include &#60;basetsdh&#62; */</em>

     <h3 id="MSVS_scons_issues">2.4.2 SCons issues (cannot find the MSVS compiler)</h3>
      <p>For very old SCons versions (&#060; 0.96.92) the following error may occur:</p>

      <em>'cl' is not recognized as an internal or external command, operable program or batch file.</em>

      <p>To fix the problem edit the file '<em>scons-version\SCons\Tool\msvs.py</em>' in the Python installation directory, where <em>version</em> is the installed SCons version.  Within the function '<em>get_msvs_install_dirs()</em>' (at line 1319), change the lines:</p>

      <ul class="code_ul">
       <li>K &#061; 'Software\\Microsoft\\VisualStudio\\' &#043; str(version_num)</li>
       <li>if (version_num &#062;&#061; 8.0):
       <ul class="code_ul">
        <li>try:
        <ul class="code_ul">
         <li>SCons.Util.RegOpenKeyEx(SCons.Util.HKEY_LOCAL_MACHINE, K )</li>
        </ul></li>
       </ul></li>
       <li><ul class="code_ul">
        <li>except SCons.Util.RegError:
        <ul class="code_ul">
         <li>K &#061; 'Software\\Microsoft\\VCExpress\\' &#043; str(version_num)</li>
        </ul></li>
       </ul></li>
      </ul>

      <p>to</p>

      <ul class="code_ul">
       <li>K &#061; 'Software\\Microsoft\\VisualStudio\\' &#043; str(version_num)</li>
       <li>if (version_num &#062;&#061; 8.0):
        <ul class="code_ul">
         <li>K &#061; 'Software\\Microsoft\\VCExpress\\' &#043; str(version_num)</li>
        </ul></li>
      </ul>

     <h3 id="MSVS_scons_issues_32bit">2.4.3 SCons issues (32-bit MSVS compiler on 64-bit MS Windows)</h3>

      <p>A similar error message is seen if you use the 32-bit MSVS compiler on 64-bit MS Windows.  This is for all SCons versions &#060;= 2.3.0.  After typing 'scons', you will see the error:</p>

      <em>'cl' is not recognized as an internal or external command, operable program or batch file.</em>

      <p>This is caused by a <a href="http://scons.tigris.org/issues/show_bug.cgi?id=2849">bug in the SCons program</a>.  The fix is quite simple, just find the '<em>Tools\MSCommon\vc.py</em>' or '<em>Tool\MSCommon\vc.py</em>' file in your installed SCons version.  Find the '<em>msvc_find_valid_batch_script()</em>' function in that file.  Then change the line:</p>
      <ul class="code_ul">
       <li>if not req_target_platform and target_platform in ('amd64','x86_64'):</li>
      </ul>

      <p>To:</p>

      <ul class="code_ul">
       <li>if target_platform in ('amd64','x86_64'):</li>
      </ul>

      <p>However the best option is to upgrade to SCons version 2.3.1 or higher.</p>

   </div>
  </div>
<!-- MSVS fin -->


<!-- Git -->
 <div id="git" class="main_box">
   <h1>3. Git</h1>

   <div id="git_why" class="main_h2">
    <h2>3.1 Why install?</h2>
     <p>The relax source code is kept within the <a href="https://sourceforge.net/p/nmr-relax/code/ci/master/tree/">relax git repository</a>.  After installing <a href="https://git-scm.com/">git</a>, you are then able to obtain the code directly from the repository by typing:</p>

     <p><em>> git clone git://git.code.sf.net/p/nmr-relax/code relax</em></p>

   </div>

   <div id="git_download" class="main_h2">
    <h2>3.2 Download and installation</h2>
      <p>The MS Windows installation files can be downloaded from <a href="https://git-scm.com/download/win">https://git-scm.com/download/win</a>.</p>

   </div>

 </div>
<!-- Git fin -->

<!-- Editor -->
 <div id="editor" class="main_box">
   <h1>4. Code editors</h1>
     <div id="vim" class="main_h2">

     <h2>4.1 Vim</h2>

      <h3 id="vim_why">4.1.1 Why install?</h3>
       <p><a href="http://www.vim.org/">Vim</a> is a powerful text editor which can be used to edit the relax source code.  The programs Notepad or Wordpad should not be used to edit the relax source code as tabs are not translated into 4 spaces.  Blocks of Python code should be indented using four spaces (the Python convention).  The combination of tabs and spaces will cause relax to fail.</p>

       <p>Vim's graphical interface is accessible through the <em>gvim</em> program (this is installed with the rest of Vim).  If you have never used <a href="http://www.vim.org/">Vim</a> or the <em>vi</em> programs before, understanding how the program works can take a while.  A tutorial is installed together with the program and is available through the program <em>vimtutor</em>.</p>

      <h3 id="vim_download">4.1.2 Download</h3>
       <p>The current version of <a href="http://www.vim.org/">Vim</a>, as of October 2006, is 7.0.  The MS Windows installation file is <a href="ftp://ftp.vim.org/pub/vim/pc/gvim70.exe">gvim70.exe</a>.  Please visit the Vim <a href="http://www.vim.org/download.php">download site</a> for newer versions.</p>

      <h3 id="vim_install">4.1.3 Installation</h3>
       <p>After double clicking on the installation EXE file, follow the instructions in the installation wizard.</p>

      <h3 id="vim_post_install">4.1.4 Post-install</h3>
       <p>The Vim configuration file should be modified prior to editing relax's source code.  The configuration file for MS Windows is called '<em>_vimrc</em>' and is located in the Vim installation directory (which in the default setup is '<em>C:\Program Files\Vim\_vimrc</em>').  To the end of this file, add the following lines:</p>

       <ul class='code_ul'>
        <li>set nobackup</li>
        <li>set tabstop=4</li>
        <li>set shiftwidth=4</li>
        <li>set expandtab</li>
        <li>set lbr</li>
       </ul>

       <p>The <em>nobackup</em> command stops gvim from creating backup files (files ending in ~).  The <em>tabstop</em>, <em>shiftwidth</em>, and <em>expandtab</em> commands are for setting up the correct indentation for the relax source code.  The command <em>lbr</em> enables word wrap in the program.</p>
     </div>

 </div>
<!-- Editor fin -->


<!-- LaTeX -->
 <div id="LaTeX" class="main_box">
   <h1>5. LaTeX</h1>

   <div id="LaTeX_why" class="main_h2">
    <h2>5.1 Why install?</h2>
     <p>Installing <a href="http://www.latex-project.org/">LaTeX</a> will enable the relax manual to be compiled.  As the distribution packages all contain the relax PDF manual, this ability is only required if you are a relax developer.</p>
   </div>

   <div id="LaTeX_download" class="main_h2">
    <h2>5.2 Download</h2>
     <p>The <a href="http://www.latex-project.org/">LaTeX</a> distribution for MS Windows is called <a href="http://www.tug.org/protext/">ProTeXt</a>.  This free software can be downloaded from one of the <a href="http://www.ctan.org/mirrors/">CTAN mirrors</a> from the directory '<em>CTAN:systems/windows/protext</em>'.</p>

     <p>For version 1.3 (<em>protext-1.3.exe</em>), the size of the ProTeXt download is 407 Mb.  This file is a WinRAR self-extracting archive.  After installation following the instructions below, the total size of the files on disk is ~880 Mb.</p>
   </div>

   <div id="LaTeX_install" class="main_h2">
    <h2>5.3 Installation</h2>
     <h3 id="LaTeX_extract">5.3.1 File extraction and the PDF file</h3>
      <p>Double click on the file '<em>protext-1.3.exe</em>' to extract the files to disk.  As the instructions below are for a minimal installation, these files should be installed in a directory such as '<em>C:\ProTeXt</em>' and left on the system.  To commence the installation, double click on the file '<em>Setup.exe</em>' which is located in this directory.  This will open a PDF file from which the software can be installed.</p>

     <h3 id="LaTeX_miktex">5.3.2 LaTeX installation</h3>
      <p>To launch the LaTeX installation wizard, click on the link called '<a>Click here to install MiKTeX</a>' located within the PDF file (which is opened after executing the '<em>Setup.exe</em>' file).  Then follow these step:</p>

      <ul>
       <li>Select '<em>Install MiKTeX on my hard-disk</em>'.</li>
       <li>Select the '<em>Small</em>' package set.  If the full package set is installed, then the original files extracted from the WinRAR archive can be deleted.  Otherwise when asked to select the the '<em>local repository</em>' when running LaTeX, point the program to the MiKTeX directory which was extracted from the archive (for example '<em>C:\ProTeXt\MiKTeX\</em>' if the files were extracted to '<em>C:\ProTeXt\</em>').</li>
       <li>Select '<em>Install MiKTeX for everyone</em>' if you are the computer administrator.</li>
       <li>To avoid problems in running LaTeX, leave the installation directories at the default locations (see the PDF file for details).</li>
       <li>Select '<em>Don't integrate existing TEXMF trees</em>'.</li>
       <li>Check the installation options.</li>
       <li>Select '<em>Finish</em>' to complete the installation.</li>
      </ul>

     <h3 id="LaTeX_gs">5.3.3 Ghostscript installation</h3>
      <p>Ghostscript is required to convert LaTeX compiled device independent file (.dvi) into the final PDF file through the commands <em>dvips</em> and <em>ps2pdf</em>.  To launch the Ghostscript installation wizard, click on the link called '<a>Click here to install Ghostscript</a>' from within the PDF file.  Installation is relatively straight forward.</p>

     <h3 id="LaTeX_gsview">5.3.4 GSView installation</h3>
      <p>The intermediate postscript file (and PDF file if Adobe Acrobat Reader is not installed) can be viewed using the GSView program.  This program is not essential though.  To launch the GSView installation wizard, click on the link called '<a>Click here to install GSView</a>' from the PDF file.  Installation is again relatively straight forward, just click on '<em>Next</em>' a number of times followed by '<em>Finish</em>'.</p>

   </div>
 </div>
<!-- LaTeX fin -->


<!-- GPG -->
 <div id="gpg" class="main_box">
   <h1>6. GnuPG</h1>

   <div id="gpg_why" class="main_h2">
    <h2>6.1 Why install?</h2>
     <p>The <a href="http://www.gnupg.org/">GnuPG</a> program or GPG allows you to sign files for security.  This is currently only used by the Project Administrator for signing the distribution packages.  GPG signing may be used more widely in the future, especially for securely transferring files.</p>
   </div>

   <div id="gpg_download" class="main_h2">
    <h2>6.2 Download</h2>
     <p>The GnuPG web page is located <a href="http://www.gnupg.org/">here</a>.  For Microsoft Windows the <a href="http://www.gpg4win.org/">gpg4win</a> distribution should be used.  The installation file, as of October 2006, is <a href="http://ftp.gpg4win.org/gpg4win-1.0.6.exe">gpg4win-1.0.6.exe</a>.</p>

   </div>

   <div id="gpg_install" class="main_h2">
    <h2>6.3 Installation</h2>
     <p>The installation of <a href="http://www.gpg4win.org/">gpg4win</a> is straight forward.  Just follow the instructions given by the installation wizard after double clicking on the installation EXE file.</p>
   </div>

   <div id="gpg_post_install" class="main_h2">
    <h2>6.4 Post-install</h2>
     <p>Once the installation is complete, the GnuPG installation directory will need to be <a href="#path">added to the system path</a>.</p>
   </div>
 </div>
<!-- GPG fin -->


<!-- System path -->
 <div id="path" class="main_box">
   <h1>7. Modifying the system path</h1>
    <p>The system path is a list of directories which is searched through by Windows for executable files.  By adding the directory in which an executable file is located to the system path, that program can then be executed from any directory within the command prompt or dos box without typing it's full path (<em>C:\Program Files\...</em>).  The list of directories are kept in the system variable called <em>PATH</em>.</p>

   <div id="path_xp" class="main_h2">
    <h2>7.1 The MS Windows XP system path</h2>
     <p>The directories in the Windows XP system path are separated by the character '<em>;</em>'.  To modify the system path in Microsoft Windows XP, use the following steps:</p>

     <ul>
      <li>Right click on '<em>My Computer</em>'.</li>
      <li>Go to '<em>Properties</em>'.</li>
      <li>Select the '<em>Advanced</em>' tab.</li>
      <li>Click on the '<em>Environmental Variables</em>' button.</li>
      <li>Find the '<em>Path</em>' in the System Variables.</li>
      <li>Click on '<em>Edit</em>'.</li>
      <li>To the end of the variable value add the directory containing the executable file (commencing with a semi colon).  For example add the text '<em>;C:\Program Files\Python24</em>'.</li>
     </ul>
   </div>

 </div>
<!-- System path fin -->


</div>

<!-- Common relax webpage footer include -->
<!--#include virtual="footer.html" -->

</body>
</html>
