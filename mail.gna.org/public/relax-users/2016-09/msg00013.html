<!-- MHonArc v2.6.19+ -->
<!--X-Subject: Re: How many rounds are acceptable? -->
<!--X-From-R13: Febryf Szgrxæe Zvaarg &#60;gyvaargNaze&#45;erynk.pbz> -->
<!--X-Date: Tue, 13 Sep 2016 22:11:48 +0200 -->
<!--X-Message-Id: CA+CBx2N=NZTX&#45;q1Ot0fxk6A=6MU8vp5fkK3Sax=ws4OgFje2nA@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: A38C8B1D&#45;09CB&#45;41F7&#45;A4A4&#45;E3178BD28159@gmail.com -->
<!--X-Reference: CA+CBx2P_QsZrzz+E6YCm=aCmqGVSYBpZH2KK=7A8HgMigaz58Q@mail.gmail.com -->
<!--X-Reference: CAMT2NTtgo24yfyjnmczeuD7QYO73GF0VwoDVWYCWKiKJ148VpQ@mail.gmail.com -->
<!--X-Reference: CAED9pY&#45;pnbZ8G6ksJgR4dHRFwvmCKX84Hvb5nLx+UxFk1bXBcQ@mail.gmail.com -->
<!--X-Reference: CAMT2NTtBQgyotQ4YJ3aLVm+dyR4v9ByfWRt7T5L=+BZZHLRMMw@mail.gmail.com -->
<!--X-Reference: CAMT2NTtGHQXmQ+OZcnnaT3vqnwF98+A8f5tirYkkVBXTwZF5zA@mail.gmail.com -->
<!--X-Reference: FB35523D&#45;6AA6&#45;42A0&#45;A62D&#45;FCEC9E1ED136@gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: How many rounds are acceptable? -- September 13, 2016 - 22:11</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: How many rounds are acceptable?</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00013" class="tabs">Index by Date</a> | <a href="threads.html#00013" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00012.html">Date Prev</a>] [<a href="msg00014.html">Date Next</a>] [<a href="msg00001.html">Thread Prev</a>] [<a href="msg00016.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Johannes Dietschreit &lt;dietschreit@xxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Tue, 13 Sep 2016 22:10:58 +0200</li>
<li class="menuitem">
<em>Cc</em>: &quot;relax-users@xxxxxxx&quot; &lt;relax-users@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113; h=mime-version:sender:in-reply-to:references:from:date:message-id :subject:to:cc; bh=YmPjq4HotHy7+msNaTWS33OQTR1mGhsD/TtX2Jv7W1k=; b=z3jMYzt5eWunw9Il/D4sWtt7MQfbs2tgpE4iTizfRZYGQzZ0+D8qDxbUsC2EA4I2+0 hSw+dWMJZOnTx8T36W1I43XVFKGLWKs6J5qBsLL70y55fnz0F/qB7ThdMBpEoaRB187T vfbNnLF82EkEPOzqYPTI1h7fJukhtYsQy2XcRWMmxHx1tz9oZsv75VWilZvrwqBl7Zys bgU79Oq1qIhZGauM4yWYRJ6q4gkgNlXQ8V7C1P0ouZLrEaacOlaLiW5TJT6RS6gKc+8J n16gD9OlMw1PQuBcb8eeZT7pJ8BwyVXtqJc5f3l9MjXLgfDrCqZgWz4C5Q4iLIA1FvWc +kEg==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;CA+CBx2N=NZTX-q1Ot0fxk6A=6MU8vp5fkK3Sax=ws4OgFje2nA@mail.gmail.com&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;A38C8B1D-09CB-41F7-A4A4-E3178BD28159@gmail.com&gt; &lt;CA+CBx2P_QsZrzz+E6YCm=aCmqGVSYBpZH2KK=7A8HgMigaz58Q@mail.gmail.com&gt; &lt;CAMT2NTtgo24yfyjnmczeuD7QYO73GF0VwoDVWYCWKiKJ148VpQ@mail.gmail.com&gt; &lt;CAED9pY-pnbZ8G6ksJgR4dHRFwvmCKX84Hvb5nLx+UxFk1bXBcQ@mail.gmail.com&gt; &lt;CAMT2NTtBQgyotQ4YJ3aLVm+dyR4v9ByfWRt7T5L=+BZZHLRMMw@mail.gmail.com&gt; &lt;CAMT2NTtGHQXmQ+OZcnnaT3vqnwF98+A8f5tirYkkVBXTwZF5zA@mail.gmail.com&gt; &lt;FB35523D-6AA6-42A0-A62D-FCEC9E1ED136@gmail.com&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Troels Emtekær Linnet</strong> on September 13, 2016 - 22:11:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Dear Johannes.

As far as I know, Edward is currently on maternity leave.

To solve this problem, it would be easier to have access to some of your
data.
Can you upload to: <a  rel="nofollow" href="https://web.archive.org/web/https://gna.org/bugs/?group=relax">https://gna.org/bugs/?group=relax</a>

Take each of your data files, and delete all data, except 2 spins.
Also provide your script file, or a description of which button you press
in the GUI.

Please also provide information about your system with:
relax -i

Then I will make a tutorial for you. To be added here:
<a  rel="nofollow" href="http://wiki.nmr-relax.com/Category:Tutorials">http://wiki.nmr-relax.com/Category:Tutorials</a>

I have just made a similar tutorial here:
<a  rel="nofollow" href="http://wiki.nmr-relax.com/Tutorial_for_model-free_analysis_sam_mahdi">http://wiki.nmr-relax.com/Tutorial_for_model-free_analysis_sam_mahdi</a>

If there is a problem in relax, I will write a systemtest which will solve
the problem.
And the problem will never return.

If this a user error, the tutorial should help to prevent this, and would
be the first step before
adding/modifying the manual.

Note:
I can only help with setting up the loading of the data.
The interpretation of the results is not my strong side.

Best
Troels


2016-08-24 17:27 GMT+02:00 Johannes Dietschreit &lt;dietschreit@xxxxxxxxx&gt;:

</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hey guys,

I just wondered whether you could help me finding the problem in my usage
of relax or whether there is a problem with the data. Do you have any
suggestions to the questions I have asked in the previous mails?

Thank you in advance.

Johannes


Am 10.08.2016 um 16:37 schrieb Johannes Dietschreit &lt;dietschreit@xxxxxxxxx
</pre><blockquote class="blockquote"><pre style="margin: 0em;">:
</pre></blockquote><pre style="margin: 0em;">

Hi,

I wanted to ask whether there is an example data set of relaxation data,
PDB and results that I could use to see whether I get the same results and
thus am using the software correctly in order to find out whether it's the
handling of the programm or the supplied data that causes trouble.

Thanks for all your help!

Johannes



2016-08-09 11:15 GMT+02:00 Johannes Dietschreit &lt;dietschreit@xxxxxxxxx&gt;:

</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hello Edward,

I understand that the strict convergence criteria are neccessary. When I
set the max_iter parameter to just 30, I get very similar results as to
when I reduce the opt_tol. I guess the model is just not converged.

You were quite right, the negative te values are very close to zero,
their error is many orders of magnitude larger than their own value. The
avergae hetNOE values is around 0.7. The measurements were taken at 600 and
700 MHz. I haven't taken them myself, my work concerns the theoretical side
of things. The protein is not a membrane protein, it is in solution and the
exact molecule given in the crystal structure I used as input for relax was
measured (no tag or similar). The local spectrometer does unfortunately not
allow for fancy temperature control methods.

I feel relatively certain that the set up was in general correct. I tried
both your python script and the GUI. The results I reported were taken from
the txt-files in the final folder. As for the results of the previous runs.
I am not sure how to access them or to read them. They are all zipped xml
files where I cannot find a clear results section. Is there a certain
program/command I should use?

I wanted to use your visualization script xh_vector_dist.py, but I am not
sure whoch file should be the  input for
'select.read(file=pardir+sep+'rates.txt', change_all=True,
res_num_col=2)'
I visualized the tensor.pdb which is printed in the final directory. It
is huge compared to the protein. It has the shape of a eight of a spheroid.

Maybe just a simple question regarding the input. The R1 and R2 input
files contained values in Hz (not radian). Is that correct?


Regards,

Johannes




2016-08-08 16:49 GMT+02:00 Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt;:

</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi Johannes,

Sorry for the late response.  I've been quite busy in the last two
months.  Please see below:


On 8 August 2016 at 13:25, Johannes Dietschreit &lt;dietschreit@xxxxxxxxx&gt;
wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi,

thank you so much for your quick and long response. I did not change
</pre></blockquote><pre style="margin: 0em;">the
</pre><blockquote class="blockquote"><pre style="margin: 0em;">hard coded value, I decided to leave that one alone, but I followed the
example of the test_suite and set the convergence criterion to 1e-7.
</pre></blockquote><pre style="margin: 0em;">This
</pre><blockquote class="blockquote"><pre style="margin: 0em;">seems still strict, but now the calculation converges and final
</pre></blockquote><pre style="margin: 0em;">results are
</pre><blockquote class="blockquote"><pre style="margin: 0em;">written.
</pre></blockquote><pre style="margin: 0em;">

The &quot;strict&quot; values are quite important for making sure there are no
strange results.  You'll see that in:

    d'Auvergne, E. J. and Gooley, P. R. (2008). Optimisation of NMR
dynamic models I. Minimisation algorithms and their performance within
the model-free and Brownian rotational diffusion spaces. J. Biomol.
NMR, 40(2), 107-119. (<a  rel="nofollow" href="http://dx.doi.org/10.1007/s10858-007-9214-2">http://dx.doi.org/10.1007/s10858-007-9214-2</a>)

Reading this paper is essential for understanding these cut-off
values, and why these high precision values are important.  However if
there is a problem with the input data, then you will see problems.
In your example, I am not sure why this is not stopping after 30
iterations.  If you have a look at the automated protocol:

    <a  rel="nofollow" href="http://www.nmr-relax.com/api/4.0/auto_analyses.dauvergne_pro">http://www.nmr-relax.com/api/4.0/auto_analyses.dauvergne_pro</a>
tocol-module.html
    <a  rel="nofollow" href="http://www.nmr-relax.com/api/4.0/auto_analyses.dauvergne_pro">http://www.nmr-relax.com/api/4.0/auto_analyses.dauvergne_pro</a>
tocol.dAuvergne_protocol-class.html

you will see the max_iter parameter.  Ok, I see that this is set to 30
in the GUI, but it is not set in the sample script.  If you require
more than 30 iterations of the global protocol (
<a  rel="nofollow" href="http://www.nmr-relax.com/manual/Model_free_analysis_in_reverse.html">http://www.nmr-relax.com/manual/Model_free_analysis_in_reverse.html</a> ),
then this is an indication that the input data is problematic.


</pre><blockquote class="blockquote"><pre style="margin: 0em;">My question now regards the results in the folder &quot;final&quot;. My analysis
</pre></blockquote><pre style="margin: 0em;">was
</pre><blockquote class="blockquote"><pre style="margin: 0em;">performed regarding the classical model free ansatz but I allowed for
</pre></blockquote><pre style="margin: 0em;">all
</pre><blockquote class="blockquote"><pre style="margin: 0em;">possible diffusion models. The protein I am dealing with is rather
</pre></blockquote><pre style="margin: 0em;">stiff,
</pre><blockquote class="blockquote"><pre style="margin: 0em;">it contains a beta barrel and some flexible loops. However, all
</pre></blockquote><pre style="margin: 0em;">residues
</pre><blockquote class="blockquote"><pre style="margin: 0em;">have a S^2 value of about 0.03. I expected the residues in the barrel
</pre></blockquote><pre style="margin: 0em;">to
</pre><blockquote class="blockquote"><pre style="margin: 0em;">have much larger values.
</pre></blockquote><pre style="margin: 0em;">

These values indicate a severe problem with the input data.  What is
your average HetNOE value?  At which field strengths did you measure?


</pre><blockquote class="blockquote"><pre style="margin: 0em;">Also the t_e values are somewhat spurious. Most of them are
</pre></blockquote><pre style="margin: 0em;">unphisically
</pre><blockquote class="blockquote"><pre style="margin: 0em;">small (~e-24 seconds), I had expected values in the range of ten to
</pre></blockquote><pre style="margin: 0em;">hundred
</pre><blockquote class="blockquote"><pre style="margin: 0em;">pico seconds. And there are a few t_e values with a negative sign. How
</pre></blockquote><pre style="margin: 0em;">is
</pre><blockquote class="blockquote"><pre style="margin: 0em;">that possible?
</pre></blockquote><pre style="margin: 0em;">

These should disappear through model selection.  If te ~ 0, then the
simpler model without te will be selected, as these models should have
converged to the same result.  Unless of course there is a major
failure of the whole analysis.  For the te values with negative
values, what are there values?  The lower quality cut-off values will
allow for very small minus te values.


</pre><blockquote class="blockquote"><pre style="margin: 0em;">Is this a common error? Have I just made a mistake regarding the
</pre></blockquote><pre style="margin: 0em;">input? I
</pre><blockquote class="blockquote"><pre style="margin: 0em;">attached my dauvergne_protocol.py file and some input data.
</pre></blockquote><pre style="margin: 0em;">

Note that you cannot attach files when posting to a public mailing
list.  This is to avoid major strain on the infrastructure.  For
sharing files, please create a support request and attach the files
there ( <a  rel="nofollow" href="http://gna.org/support/?func=additem&amp;group=relax">http://gna.org/support/?func=additem&amp;group=relax</a> ).  Be
careful though, as this is public and anyone will be able to access
your data.  From the ridiculously large number of iterations of the
global algorithm and the non-physical S2 and te values, I can only
guess that there is a major problem with the input data.  This could
either be due to how the analysis was set up, or how the data was
measured.  Looking at
<a  rel="nofollow" href="http://www.nmr-relax.com/manual/Temperature_control_and_calibration.html">http://www.nmr-relax.com/manual/Temperature_control_and_calibration.html</a>
, how did you perform temperature calibration and temperature control?
 Do you see any warnings at the start of your log files?  When running
relax, it is extremely important to check every warning at the start
to make sure that the results are reasonable.

Also, if you look at the local tm model results, are the S2 and te
values similar to the final results?  Or similar to the spherical
diffusion model?

Also note that for a rigid beta barrel with flexible loops that the
backbone NH bond vector distribution will not be isotropic.  I suggest
running the sample_scripts/xh_vector_dist.py script and visualising
the results.  This is the script I created for Figure 4 in:

    d'Auvergne, E. J. and Gooley, P. R. (2008). Optimisation of NMR
dynamic models II. A new methodology for the dual optimisation of the
model-free parameters and the Brownian rotational diffusion tensor. J.
Biomol. NMR, 40(2), 121-133.
(<a  rel="nofollow" href="http://dx.doi.org/10.1007/s10858-007-9213-3">http://dx.doi.org/10.1007/s10858-007-9213-3</a>)

Also, are you in a membrane system?  If so, then you actually have two
diffusion tensors.  The protein will spin inside the micelle/bicelle,
and then the whole system will have an independent global ellipsoidal
or spheroidal diffusion.  I am unaware of anyone to date who has
derived the equations for such a system.  Nevertheless, the strange
results you see are unlikely to be due to this modelling deficiency.

Regards,

Edward

</pre></blockquote><pre style="margin: 0em;">


</pre></blockquote><pre style="margin: 0em;">

_______________________
Johannes C. B. Dietschreit
Leydenallee 83
12167 Berlin
mobile: +49 171 53 54 78 1
mail: dietschreit@xxxxxxxxx


</pre></blockquote><pre style="margin: 0em;">

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00016" href="msg00016.html">Re: How many rounds are acceptable?</a></strong>
<ul><li><em>From:</em> Johannes Dietschreit</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Sat Oct 01 00:00:09 2016</div>  
</body>
</html>
