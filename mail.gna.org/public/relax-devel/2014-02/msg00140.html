<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: r22269 &#45;	/trunk/test_suite/unit_tests/_specific_analyses/_relax_disp/test_disp_data.py -->
<!--X-From-R13: "Sqjneq q'Ohiretar" <rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Mon, 24 Feb 2014 11:16:40 +0100 -->
<!--X-Message-Id: CAED9pY&#45;QnB20OLoSP0T03BdzCed8F=eN3_zs&#45;QWgeHLcK43GAQ@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: E1WHsJh&#45;0005d6&#45;6l@subversion.gna.org -->
<!--X-Reference: CA+CBx2PA+TDr2e=EN6RVF2V=GdE&#45;bX_RefdX=mAG2D9Vobxj2w@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: r22269 -	/trunk/test_suite/unit_tests/_specific_analyses/_relax_disp/test_disp_data.py -- February 24, 2014 - 11:16</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: r22269 -	/trunk/test_suite/unit_tests/_specific_analyses/_relax_disp/test_disp_data.py</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00140" class="tabs">Index by Date</a> | <a href="threads.html#00140" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00139.html">Date Prev</a>] [<a href="msg00141.html">Date Next</a>] [<a href="msg00139.html">Thread Prev</a>] [<a href="msg00141.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Mon, 24 Feb 2014 11:16:08 +0100</li>
<li class="menuitem">
<em>Cc</em>: &quot;relax-devel@xxxxxxx&quot; &lt;relax-devel@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;	h=mime-version:sender:in-reply-to:references:date:message-id:subject	:from:to:cc:content-type:content-transfer-encoding;	bh=eYXZR7ngvjeEE6fNxEGRIL0sM87Kkgpnwm1PRKYafw0=;	b=zd1qR0lYUwaGojVvBZOIy1uRaO0NiYdakV9KhVijBYJwPwDF17mBOk/vc4TgAwyv0/	PHDRsPA43py70eCJ65aXe0lXFsWlCl2DGplHxCGPOdSWM9uL3R+H8c4EZ85EoiXAIu7Q	ymtl/HvzhkhO8rfsiUCDcxWNJ0nHO6C5HRmADL3OfTdnBrXzXqoks0LeoxsOrTbDSnjy	6nkP9cMALyhA+LOGIpky9tgRajKG1kMyMhMmkCwgVoOcD572guZQkgrI6Ct4mjolZemL	I4CdnWR/Bl2VjJZDBqXGHuJrABsmCrHDa1btxOwTLcjd02NWOyBhKjeRcDd47cm1sOnB	kd0w==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00140.html">CAED9pY-QnB20OLoSP0T03BdzCed8F=eN3_zs-QWgeHLcK43GAQ@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;E1WHsJh-0005d6-6l@xxxxxxxxxxxxxxxxxx&gt;	&lt;CA+CBx2PA+TDr2e=EN6RVF2V=GdE-bX_RefdX=mAG2D9Vobxj2w@xxxxxxxxxxxxxx&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on February 24, 2014 - 11:16:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Hi,

I was wondering what had happened.  For branching, it is normally best
to create a branch in the centralised svn repository so that the
commit messages are stored there.  That way I use 'svn log &gt; log' in
the branch to obtain all the messages, and then convert these for the
release messages.  For git-svn, the normal git branching should not be
used as it is not compatible with svn branching.  From
<a  rel="nofollow" href="http://git-scm.com/book/en/Git-and-Other-Systems-Git-and-Subversion:">http://git-scm.com/book/en/Git-and-Other-Systems-Git-and-Subversion:</a>

&quot;It's important to note that when you're using git svn, you're
interacting with Subversion, which is a system that is far less
sophisticated than Git. Although you can easily do local branching and
merging, it's generally best to keep your history as linear as
possible by rebasing your work and avoiding doing things like
simultaneously interacting with a Git remote repository.&quot;

The linear history should make sure that commit messages are all
pushed to the central svn repository.  By creating a svn branch, this
can be checked out and treated like a separate repository with git-svn
and worked on in a linear fashion.  Anyway, this change is so small
though that isn't not an issue.  For reverting, don't worry about it
this time.  I will see &quot; Merge branch 'bug'&quot; in the release messages
and then know to come to this mail to obtain the correct messages.

Cheers,

Edward

On 24 February 2014 11:03, Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxxxxxx&gt; 
wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi Edward.

Sorry, I am not careful enough when committing to the SVN repository.

The last commit should have had these two commit messages:
--------
Author: Troels E. Linnet &lt;tlinnet@xxxxxxxxxxxxx&gt;
Date:   Mon Feb 24 10:57:57 2014 +0100

    Added unit test for looping over: exp frq offset point.

    Regarding bug #21665, (<a  rel="nofollow" href="https://gna.org/bugs/?21665">https://gna.org/bugs/?21665</a>) - Running a
CPMG analysis with two fields at two delay times.

    This follows recommendation in thread:
<a  rel="nofollow" href="http://thread.gmane.org/gmane.science.nmr.relax.devel/5070">http://thread.gmane.org/gmane.science.nmr.relax.devel/5070</a>.
-------------
Author: Troels E. Linnet &lt;tlinnet@xxxxxxxxxxxxx&gt;
Date:   Mon Feb 24 10:57:57 2014 +0100

    Added unit test for looping over: exp frq offset point.

    Regarding bug #21665, (<a  rel="nofollow" href="https://gna.org/bugs/?21665">https://gna.org/bugs/?21665</a>) - Running a
CPMG analysis with two fields at two delay times.

    This follows recommendation in thread:
<a  rel="nofollow" href="http://thread.gmane.org/gmane.science.nmr.relax.devel/5070">http://thread.gmane.org/gmane.science.nmr.relax.devel/5070</a>.
--------------------

Should I revert the commit and add these commit messages?

Sorry again.

Best
Troels

---------- Forwarded message ----------
From:  &lt;tlinnet@xxxxxxxxxxxxx&gt;
Date: 2014-02-24 10:59 GMT+01:00
Subject: r22269 -
/trunk/test_suite/unit_tests/_specific_analyses/_relax_disp/test_disp_data.py
To: relax-commits@xxxxxxx


Author: tlinnet
Date: Mon Feb 24 10:59:16 2014
New Revision: 22269

URL: <a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax?rev=22269&amp;view=rev">http://svn.gna.org/viewcvs/relax?rev=22269&amp;view=rev</a>
Log:
Merge branch 'bug'

Modified:
    
trunk/test_suite/unit_tests/_specific_analyses/_relax_disp/test_disp_data.py

Modified: 
trunk/test_suite/unit_tests/_specific_analyses/_relax_disp/test_disp_data.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/trunk/test_suite/unit_tests/_specific_analyses/_relax_disp/test_disp_data.py?rev=22269&amp;r1=22268&amp;r2=22269&amp;view=diff">http://svn.gna.org/viewcvs/relax/trunk/test_suite/unit_tests/_specific_analyses/_relax_disp/test_disp_data.py?rev=22269&amp;r1=22268&amp;r2=22269&amp;view=diff</a>
==============================================================================
--- 
trunk/test_suite/unit_tests/_specific_analyses/_relax_disp/test_disp_data.py
(original)
+++ 
trunk/test_suite/unit_tests/_specific_analyses/_relax_disp/test_disp_data.py
Mon Feb 24 10:59:16 2014
@@ -25,7 +25,7 @@
 # relax module imports.
 from data_store import Relax_data_store; ds = Relax_data_store()
 from pipe_control import state
-from specific_analyses.relax_disp.disp_data import loop_exp_frq,
loop_exp_frq_offset_point_time
+from specific_analyses.relax_disp.disp_data import loop_exp_frq,
loop_exp_frq_offset, loop_exp_frq_offset_point,
loop_exp_frq_offset_point_time
 from status import Status; status = Status()
 from test_suite.unit_tests.base_classes import UnitTestCase

@@ -84,6 +84,115 @@

             # Increment the data index.
             index += 1
+
+
+    def test_loop_exp_frq_offset(self):
+        &quot;&quot;&quot;Unit test of the loop_exp_frq_offset() function.
+
+        This uses the data of the saved state attached to U{bug
#21665&lt;<a  rel="nofollow" href="https://gna.org/bugs/?21665">https://gna.org/bugs/?21665</a>&gt;}.
+        &quot;&quot;&quot;
+
+        # Load the state.
+        statefile = status.install_path +
sep+'test_suite'+sep+'shared_data'+sep+'dispersion'+sep+'bug_21665.bz2'
+        state.load_state(statefile, force=True)
+
+        # Original data (exp_type, frq, offset).
+        data = [
+            ['SQ CPMG', 499862140.0, 0],
+            ['SQ CPMG', 599890858.69999993, 0]
+        ]
+
+        # Original indices (ei, mi, oi).
+        indices = [
+            [0, 0, 0],
+            [0, 1, 0]
+        ]
+
+        # Check the number of iterations.
+        print(&quot;Checking the number of iterations of the loop.&quot;)
+        count = 0
+        for exp_type, frq, offset, ei, mi, oi in
loop_exp_frq_offset(return_indices=True):
+            print exp_type, frq, offset, ei, mi, oi
+            count += 1
+        self.assertEqual(count, 2)
+
+        # Check the values.
+        print(&quot;Checking the values returned by the loop.&quot;)
+        index = 0
+        for exp_type, frq, offset, ei, mi, oi in
loop_exp_frq_offset(return_indices=True):
+            # Check the experiment info.
+            self.assertEqual(exp_type, data[index][0])
+            self.assertEqual(ei, indices[index][0])
+
+            # Check the frequency info.
+            self.assertEqual(frq, data[index][1])
+            self.assertEqual(mi, indices[index][1])
+
+            # Check the offset info.
+            self.assertEqual(offset, data[index][2])
+            self.assertEqual(oi, indices[index][2])
+
+            # Increment the data index.
+            index += 1
+
+
+    def test_loop_exp_frq_offset_point(self):
+        &quot;&quot;&quot;Unit test of the loop_exp_frq_offset_point() function.
+
+        This uses the data of the saved state attached to U{bug
#21665&lt;<a  rel="nofollow" href="https://gna.org/bugs/?21665">https://gna.org/bugs/?21665</a>&gt;}.
+        &quot;&quot;&quot;
+
+        # Load the state.
+        statefile = status.install_path +
sep+'test_suite'+sep+'shared_data'+sep+'dispersion'+sep+'bug_21665.bz2'
+        state.load_state(statefile, force=True)
+
+        # Original data (exp_type, frq, offset, point).
+        data = [
+            ['SQ CPMG', 499862140.0, 0, [50.0, 100.0, 150.0, 200.0,
250.0, 300.0, 350.0, 400.0, 450.0, 500.0, 550.0, 600.0, 650.0, 700.0,
800.0, 900.0, 1000.0]],
+            ['SQ CPMG', 599890858.69999993, 0, [33.3333, 66.666,
100.0, 133.333, 166.666, 200.0, 233.333, 266.666, 300.0, 333.333,
366.666, 400.0, 466.666, 533.333, 666.666, 866.666, 1000.0]]
+        ]
+
+        # Original indices (ei, mi, oi).
+        indices = [
+            [0, 0, 0, [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13,
14, 15, 16]],
+            [0, 1, 0, [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13,
14, 15, 16]]
+        ]
+
+        # Check the number of iterations.
+        print(&quot;Checking the number of iterations of the loop.&quot;)
+        count = 0
+        for exp_type, frq, offset, point, ei, mi, oi, di in
loop_exp_frq_offset_point(return_indices=True):
+            print exp_type, frq, offset, point, ei, mi, oi, di
+            count += 1
+        self.assertEqual(count, 34)
+
+        # Check the values.
+        print(&quot;Checking the values returned by the loop.&quot;)
+        frq_index = 0
+        disp_index = 0
+        for exp_type, frq, offset, point, ei, mi, oi, di in
loop_exp_frq_offset_point(return_indices=True):
+            # Check the experiment info.
+            self.assertEqual(exp_type, data[frq_index][0])
+            self.assertEqual(ei, indices[frq_index][0])
+
+            # Check the frequency info.
+            self.assertEqual(frq, data[frq_index][1])
+            self.assertEqual(mi, indices[frq_index][1])
+
+            # Check the offset info.
+            self.assertEqual(offset, data[frq_index][2])
+            self.assertEqual(oi, indices[frq_index][2])
+
+            # Check the dispersion point info.
+            self.assertAlmostEqual(point, data[frq_index][3][disp_index],2)
+            self.assertEqual(di, indices[frq_index][3][disp_index])
+
+            # Increment the data index.
+            if disp_index == 16:
+                frq_index += 1
+                disp_index = 0
+            else:
+                disp_index += 1


     def test_loop_exp_frq_offset_point_time(self):


_______________________________________________
relax (<a  rel="nofollow" href="http://www.nmr-relax.com">http://www.nmr-relax.com</a>)

This is the relax-commits mailing list
relax-commits@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="https://mail.gna.org/listinfo/relax-commits">https://mail.gna.org/listinfo/relax-commits</a>

_______________________________________________
relax (<a  rel="nofollow" href="http://www.nmr-relax.com">http://www.nmr-relax.com</a>)

This is the relax-devel mailing list
relax-devel@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="https://mail.gna.org/listinfo/relax-devel">https://mail.gna.org/listinfo/relax-devel</a>
</pre></blockquote><pre style="margin: 0em;">


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00139" href="msg00139.html">Fwd: r22269 -	/trunk/test_suite/unit_tests/_specific_analyses/_relax_disp/test_disp_data.py</a></strong>
<ul><li><em>From:</em> Troels Emtekær Linnet</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Mon Feb 24 14:40:10 2014</div>  
</body>
</html>
