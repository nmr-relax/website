<?xml version="1.0" encoding="ascii"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>prompt.grace.Grace</title>
  <link rel="stylesheet" href="epydoc.css" type="text/css" />
  <script type="text/javascript" src="epydoc.js"></script>
</head>

<body bgcolor="white" text="black" link="blue" vlink="#204080"
      alink="#204080">
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            ><a class="navbar" target="_top" href="http://nmr-relax.com">relax</a></th>
          </tr></table></th>
  </tr>
</table>
<table width="100%" cellpadding="0" cellspacing="0">
  <tr valign="top">
    <td width="100%">
      <span class="breadcrumbs">
        <a href="prompt-module.html">Package&nbsp;prompt</a> ::
        <a href="prompt.grace-module.html">Module&nbsp;grace</a> ::
        Class&nbsp;Grace
      </span>
    </td>
    <td>
      <table cellpadding="0" cellspacing="0">
        <!-- hide/show private -->
        <tr><td align="right"><span class="options">[<a href="javascript:void(0);" class="privatelink"
    onclick="toggle_private();">hide&nbsp;private</a>]</span></td></tr>
        <tr><td align="right"><span class="options"
            >[<a href="frames.html" target="_top">frames</a
            >]&nbsp;|&nbsp;<a href="prompt.grace.Grace-class.html"
            target="_top">no&nbsp;frames</a>]</span></td></tr>
      </table>
    </td>
  </tr>
</table>
<!-- ==================== CLASS DESCRIPTION ==================== -->
<h1 class="epydoc">Class Grace</h1><p class="nomargin-top"><span class="codelink"><a href="prompt.grace-pysrc.html#Grace">source&nbsp;code</a></span></p>
<!-- ==================== INSTANCE METHODS ==================== -->
<a name="section-InstanceMethods"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Instance Methods</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-InstanceMethods"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="__init__"></a><span class="summary-sig-name">__init__</span>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">relax</span>)</span></td>
          <td align="right" valign="top">
            <span class="codelink"><a href="prompt.grace-pysrc.html#Grace.__init__">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="prompt.grace.Grace-class.html#view" class="summary-sig-name">view</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">file</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">dir</span>=<span class="summary-sig-default"><code class="variable-quote">'</code><code class="variable-string">grace</code><code class="variable-quote">'</code></span>,
        <span class="summary-sig-arg">grace_exe</span>=<span class="summary-sig-default"><code class="variable-quote">'</code><code class="variable-string">xmgrace</code><code class="variable-quote">'</code></span>)</span><br />
      Function for running Grace.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="prompt.grace-pysrc.html#Grace.view">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="prompt.grace.Grace-class.html#write" class="summary-sig-name">write</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">x_data_type</span>=<span class="summary-sig-default"><code class="variable-quote">'</code><code class="variable-string">spin</code><code class="variable-quote">'</code></span>,
        <span class="summary-sig-arg">y_data_type</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">spin_id</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">plot_data</span>=<span class="summary-sig-default"><code class="variable-quote">'</code><code class="variable-string">value</code><code class="variable-quote">'</code></span>,
        <span class="summary-sig-arg">file</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">dir</span>=<span class="summary-sig-default"><code class="variable-quote">'</code><code class="variable-string">grace</code><code class="variable-quote">'</code></span>,
        <span class="summary-sig-arg">force</span>=<span class="summary-sig-default">False</span>,
        <span class="summary-sig-arg">norm</span>=<span class="summary-sig-default">False</span>)</span><br />
      Function for creating a grace '.agr' file.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="prompt.grace-pysrc.html#Grace.write">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
</table>
<!-- ==================== METHOD DETAILS ==================== -->
<a name="section-MethodDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Method Details</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-MethodDetails"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
</table>
<a name="view"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">view</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">file</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">dir</span>=<span class="sig-default"><code class="variable-quote">'</code><code class="variable-string">grace</code><code class="variable-quote">'</code></span>,
        <span class="sig-arg">grace_exe</span>=<span class="sig-default"><code class="variable-quote">'</code><code class="variable-string">xmgrace</code><code class="variable-quote">'</code></span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="prompt.grace-pysrc.html#Grace.view">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">
Function for running Grace.

Keyword Arguments
~~~~~~~~~~~~~~~~~

file:  The name of the file.

dir:  The directory name.

grace_exe:  The Grace executable file.


Description
~~~~~~~~~~~

This function can be used to execute Grace to view the specified file the Grace '.agr' file
and the execute Grace. If the directory name is set to None, the file will be assumed to be
in the current working directory.


Examples
~~~~~~~~

To view the file 's2.agr' in the directory 'grace', type:

relax&gt; grace.view(file='s2.agr')
relax&gt; grace.view(file='s2.agr', dir='grace')

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="write"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">write</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">x_data_type</span>=<span class="sig-default"><code class="variable-quote">'</code><code class="variable-string">spin</code><code class="variable-quote">'</code></span>,
        <span class="sig-arg">y_data_type</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">spin_id</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">plot_data</span>=<span class="sig-default"><code class="variable-quote">'</code><code class="variable-string">value</code><code class="variable-quote">'</code></span>,
        <span class="sig-arg">file</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">dir</span>=<span class="sig-default"><code class="variable-quote">'</code><code class="variable-string">grace</code><code class="variable-quote">'</code></span>,
        <span class="sig-arg">force</span>=<span class="sig-default">False</span>,
        <span class="sig-arg">norm</span>=<span class="sig-default">False</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="prompt.grace-pysrc.html#Grace.write">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">
Function for creating a grace '.agr' file.

Keyword Arguments
~~~~~~~~~~~~~~~~~

x_data_type:  The data type for the X-axis (no regular expression is allowed).

y_data_type:  The data type for the Y-axis (no regular expression is allowed).

spin_id:  The spin identification string.

plot_data:  The data to use for the plot.

norm:  Flag for the normalisation of series type data.

file:  The name of the file.

dir:  The directory name.

force:  A flag which, if set to True, will cause the file to be overwritten.


Description
~~~~~~~~~~~

This function is designed to be as flexible as possible so that any combination of data can
be plotted.  The output is in the format of a Grace plot (also known as ACE/gr, Xmgr, and
xmgrace) which only supports two dimensional plots.  Three types of keyword arguments can
be used to create various types of plot.  These include the X-axis and Y-axis data types,
the spin identification string, and an argument for selecting what to actually plot.

The X-axis and Y-axis data type arguments should be plain strings, regular expression is not
allowed.  If the X-axis data type argument is not given, the plot will default to having the
spin sequence along the x-axis.  The two axes of the Grace plot can be absolutely any of
the data types listed in the tables below.  The only limitation, currently anyway, is that
the data must belong to the same data pipe.

The spin identification string can be used to limit which spins are used in the plot.  The
default is that all spins will be used, however, these arguments can be used to select a
subset of all spins, or a single spin for plots of Monte Carlo simulations, etc.

The property which is actually plotted can be controlled by the 'plot_data' argument.  It
can be one of the following:
    'value':  Plot values (with errors if they exist).
    'error':  Plot errors.
    'sims':   Plot the simulation values.

Normalisation is only allowed for series type data, for example the R2 exponential curves,
and will be ignored for all other data types.  If the norm flag is set to True then the
y-value of the first point of the series will be set to 1.  This normalisation is useful for
highlighting errors in the data sets.


Examples
~~~~~~~~

To write the NOE values for all spins to the Grace file 'noe.agr', type one of:

relax&gt; grace.write('spin', 'noe', file='noe.agr')
relax&gt; grace.write(y_data_type='noe', file='noe.agr')
relax&gt; grace.write(x_data_type='spin', y_data_type='noe', file='noe.agr')
relax&gt; grace.write(y_data_type='noe', file='noe.agr', force=True)


To create a Grace file of 'S2' vs. 'te' for all spins, type one of:

relax&gt; grace.write('S2', 'te', file='s2_te.agr')
relax&gt; grace.write(x_data_type='S2', y_data_type='te', file='s2_te.agr')
relax&gt; grace.write(x_data_type='S2', y_data_type='te', file='s2_te.agr', force=True)


To create a Grace file of the Monte Carlo simulation values of 'Rex' vs. 'te' for residue
123, type one of:

relax&gt; grace.write('Rex', 'te', spin_id=':123', plot_data='sims', file='s2_te.agr')
relax&gt; grace.write(x_data_type='Rex', y_data_type='te', spin_id=':123',
                   plot_data='sims', file='s2_te.agr')


By plotting the peak intensities, the integrity of exponential relaxation curves can be
checked and anomalies searched for prior to model-free analysis or reduced spectral density
mapping.  For example the normalised average peak intensities can be plotted verses the
relaxation time periods for the relaxation curves of all residues of a protein.  The
normalisation, whereby the initial peak intensity of each residue I(0) is set to 1,
emphasises any problems.  To produce this Grace file, type:

relax&gt; grace.write(x_data_type='relax_times', y_data_type='ave_int',
                   file='intensities_norm.agr', force=True, norm=True)




Regular expression
~~~~~~~~~~~~~~~~~~

The python function 'match', which uses regular expression, is used to determine which data
type to set values to, therefore various data_type strings can be used to select the same
data type.  Patterns used for matching for specific data types are listed below.

This is a short description of python regular expression, for more information see the
regular expression syntax section of the Python Library Reference.  Some of the regular
expression syntax used in this function is:

    '[]':  A sequence or set of characters to match to a single character.  For example,
    '[Ss]2' will match both 'S2' and 's2'.

    '^':  Match the start of the string.

    '$':  Match the end of the string.  For example, '^[Ss]2$' will match 's2' but not 'S2f'
    or 's2s'.

    '.':  Match any character.

    'x*':  Match the character 'x' any number of times, for example 'x' will match, as will
    'xxxxx'

    '.*':  Match any sequence of characters of any length.

Importantly, do not supply a string for the data type containing regular expression.  The
regular expression is implemented so that various strings can be supplied which all match
the same data type.


Minimisation statistic data type string matching patterns
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

____________________________________________________________________________________________
|                        |              |                                                  |
| Data type              | Object name  | Patterns                                         |
|________________________|______________|__________________________________________________|
|                        |              |                                                  |
| Chi-squared statistic  | 'chi2'       | '^[Cc]hi2$' or '^[Cc]hi[-_ ][Ss]quare'           |
|                        |              |                                                  |
| Iteration count        | 'iter'       | '^[Ii]ter'                                       |
|                        |              |                                                  |
| Function call count    | 'f_count'    | '^[Ff].*[ -_][Cc]ount'                           |
|                        |              |                                                  |
| Gradient call count    | 'g_count'    | '^[Gg].*[ -_][Cc]ount'                           |
|                        |              |                                                  |
| Hessian call count     | 'h_count'    | '^[Hh].*[ -_][Cc]ount'                           |
|________________________|______________|__________________________________________________|




NOE calculation data type string matching patterns
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

____________________________________________________________________________________________
|                        |              |                                                  |
| Data type              | Object name  | Patterns                                         |
|________________________|______________|__________________________________________________|
|                        |              |                                                  |
| Reference intensity    | 'ref'        | '^[Rr]ef$' or '[Rr]ef[ -_][Ii]nt'                |
|                        |              |                                                  |
| Saturated intensity    | 'sat'        | '^[Ss]at$' or '[Ss]at[ -_][Ii]nt'                |
|                        |              |                                                  |
| NOE                    | 'noe'        | '^[Nn][Oo][Ee]$'                                 |
|________________________|______________|__________________________________________________|



Relaxation curve fitting data type string matching patterns
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

__________________________________________________________________________________________
|                                   |                      |                             |
| Data type                         | Object name          | Patterns                    |
|___________________________________|______________________|_____________________________|
|                                   |                      |                             |
| Relaxation rate                   | 'rx'                 | '^[Rr]x$'                   |
|                                   |                      |                             |
| Average peak intensities (series) | 'ave_intensities'    | '^[Aa]ve[ -_][Ii]nt$'       |
|                                   |                      |                             |
| Initial intensity                 | 'i0'                 | '^[Ii]0$'                   |
|                                   |                      |                             |
| Intensity at infinity             | 'iinf'               | '^[Ii]inf$'                 |
|                                   |                      |                             |
| Relaxation period times (series)  | 'relax_times'        | '^[Rr]elax[ -_][Tt]imes$'   |
|___________________________________|______________________|_____________________________|



Reduced spectral density mapping data type string matching patterns
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

____________________________________________________________________________________________
|                        |                  |                                              |
| Data type              | Object name      | Patterns                                     |
|________________________|__________________|______________________________________________|
|                        |                  |                                              |
| J(0)                   | 'j0'             | '^[Jj]0$' or '[Jj]\(0\)'                     |
|                        |                  |                                              |
| J(wX)                  | 'jwx'            | '^[Jj]w[Xx]$' or '[Jj]\(w[Xx]\)'             |
|                        |                  |                                              |
| J(wH)                  | 'jwh'            | '^[Jj]w[Hh]$' or '[Jj]\(w[Hh]\)'             |
|                        |                  |                                              |
| Bond length            | 'r'              | '^r$' or '[Bb]ond[ -_][Ll]ength'             |
|                        |                  |                                              |
| CSA                    | 'csa'            | '^[Cc][Ss][Aa]$'                             |
|                        |                  |                                              |
| Heteronucleus type     | 'heteronuc_type' | '^[Hh]eteronucleus$'                         |
|                        |                  |                                              |
| Proton type            | 'proton_type'    | '^[Pp]roton$'                                |
|________________________|__________________|______________________________________________|




Model-free data type string matching patterns
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

____________________________________________________________________________________________
|                        |                  |                                              |
| Data type              | Object name      | Patterns                                     |
|________________________|__________________|______________________________________________|
|                        |                  |                                              |
| Local tm               | 'local_tm'       | '[Ll]ocal[ -_]tm'                            |
|                        |                  |                                              |
| Order parameter S2     | 's2'             | '^[Ss]2$'                                    |
|                        |                  |                                              |
| Order parameter S2f    | 's2f'            | '^[Ss]2f$'                                   |
|                        |                  |                                              |
| Order parameter S2s    | 's2s'            | '^[Ss]2s$'                                   |
|                        |                  |                                              |
| Correlation time te    | 'te'             | '^te$'                                       |
|                        |                  |                                              |
| Correlation time tf    | 'tf'             | '^tf$'                                       |
|                        |                  |                                              |
| Correlation time ts    | 'ts'             | '^ts$'                                       |
|                        |                  |                                              |
| Chemical exchange      | 'rex'            | '^[Rr]ex$' or '[Cc]emical[ -_][Ee]xchange'   |
|                        |                  |                                              |
| Bond length            | 'r'              | '^r$' or '[Bb]ond[ -_][Ll]ength'             |
|                        |                  |                                              |
| CSA                    | 'csa'            | '^[Cc][Ss][Aa]$'                             |
|                        |                  |                                              |
| Heteronucleus type     | 'heteronuc_type' | '^[Hh]eteronucleus$'                         |
|                        |                  |                                              |
| Proton type            | 'proton_type'    | '^[Pp]roton$'                                |
|________________________|__________________|______________________________________________|

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<br />
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            ><a class="navbar" target="_top" href="http://nmr-relax.com">relax</a></th>
          </tr></table></th>
  </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%%">
  <tr>
    <td align="left" class="footer">
    Generated by Epydoc 3.0.1 on Mon Sep 29 14:11:11 2008
    </td>
    <td align="right" class="footer">
      <a target="mainFrame" href="http://epydoc.sourceforge.net"
        >http://epydoc.sourceforge.net</a>
    </td>
  </tr>
</table>

<script type="text/javascript">
  <!--
  // Private objects are initially displayed (because if
  // javascript is turned off then we want them to be
  // visible); but by default, we want to hide them.  So hide
  // them unless we have a cookie that says to show them.
  checkCookie();
  // -->
</script>
</body>
</html>
