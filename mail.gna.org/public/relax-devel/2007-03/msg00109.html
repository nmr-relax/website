<!-- MHonArc v2.6.10 -->
<!--X-Subject: Re: r3237 &#45; in /branches/multi_processor: multi/mpi4py_processor.py	relax -->
<!--X-From-R13: "Unel E. Fubzcfba" <tnelgNozo.yrrqf.np.hx> -->
<!--X-Date: Tue, 20 Mar 2007 15:23:14 +0100 -->
<!--X-Message-Id: 45FFEE25.9000607@bmb.leeds.ac.uk -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: E1HTJY1&#45;0005VF&#45;O1@subversion.gna.org -->
<!--X-Reference: 45FEAC46.8020307@bmb.leeds.ac.uk -->
<!--X-Reference: 7f080ed10703190923s4b09fab1vd958ed6001031b9c@mail.gmail.com -->
<!--X-Reference: 45FF1AF7.2000606@bmb.leeds.ac.uk -->
<!--X-Reference: 7f080ed10703200322ua51bfcexc4e26556a623a0d0@mail.gmail.com -->
<!--X-Reference: 45FFC5DC.8000208@bmb.leeds.ac.uk -->
<!--X-Reference: 7f080ed10703200534s6d34dc6t66d54b604519db38@mail.gmail.com -->
<!--X-Reference: 45FFDF91.8070704@bmb.leeds.ac.uk -->
<!--X-Reference: 7f080ed10703200656r9214f7ey213d390959e95828@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: r3237 - in /branches/multi_processor: multi/mpi4py_processor.py	relax -- March 20, 2007 - 15:23</title>
<link rel="stylesheet" type="text/css" href="/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="https://gna.org/images/gna.theme/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: r3237 - in /branches/multi_processor: multi/mpi4py_processor.py	relax</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00109" class="tabs">Index by Date</a> | <a href="threads.html#00109" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00108.html">Date Prev</a>] [<a href="msg00110.html">Date Next</a>] [<a href="msg00105.html">Thread Prev</a>] [<a href="msg00089.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Tue, 20 Mar 2007 14:22:29 +0000</li>
<li class="menuitem">
<em>Cc</em>: relax-devel@xxxxxxx</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00109.html">45FFEE25.9000607@bmb.leeds.ac.uk</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;E1HTJY1-0005VF-O1@subversion.gna.org&gt;	&lt;<a href="msg00088.html">45FEAC46.8020307@bmb.leeds.ac.uk</a>&gt;	&lt;<a href="msg00091.html">7f080ed10703190923s4b09fab1vd958ed6001031b9c@mail.gmail.com</a>&gt;	&lt;<a href="msg00094.html">45FF1AF7.2000606@bmb.leeds.ac.uk</a>&gt;	&lt;<a href="msg00099.html">7f080ed10703200322ua51bfcexc4e26556a623a0d0@mail.gmail.com</a>&gt;	&lt;<a href="msg00100.html">45FFC5DC.8000208@bmb.leeds.ac.uk</a>&gt;	&lt;<a href="msg00102.html">7f080ed10703200534s6d34dc6t66d54b604519db38@mail.gmail.com</a>&gt;	&lt;<a href="msg00104.html">45FFDF91.8070704@bmb.leeds.ac.uk</a>&gt;	&lt;<a href="msg00105.html">7f080ed10703200656r9214f7ey213d390959e95828@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>User-agent</em>: Mozilla Thunderbird 1.0 (X11/20041206)</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Gary S. Thompson</strong> on March 20, 2007 - 15:23:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Edward d'Auvergne wrote:</pre><br>
<blockquote class="blockquote"><pre style="margin: 0em;">On 3/21/07, Gary S. Thompson &lt;garyt@xxxxxxxxxxxxxxx&gt; wrote:</pre><br>
<blockquote class="blockquote"><pre style="margin: 0em;">Edward d'Auvergne wrote:</pre><br>
<tt>&gt;&gt; &gt;&gt; &gt;&gt; do i modify interpreter.run to take a quit varaiable set to<br>
&gt;&gt; False  so<br>
&gt;&gt; &gt;&gt; &gt;&gt; that run_script can be<br>
&gt;&gt; &gt;&gt; &gt;&gt; run with quit = false?<br>
&gt;&gt; &gt;&gt; &gt;<br>
&gt;&gt; &gt;&gt; &gt;<br>
&gt;&gt; &gt;&gt; &gt; Avoid the interpreter and wait at the optimisation steps - 
the only<br>
&gt;&gt; &gt;&gt; &gt; serious number crunching code in relax.<br>
&gt;&gt; &gt;&gt;<br>
&gt;&gt; &gt;&gt;<br>
&gt;&gt; &gt;&gt; I agree!  interpeters are not required on the slave just the relax<br>
&gt;&gt; data<br>
&gt;&gt; &gt;&gt; structures in a clean and useable state<br>
&gt;&gt; &gt;<br>
&gt;&gt; &gt;<br>
&gt;&gt; &gt; If you're working at the level of the model-free 'minimise()'<br>
&gt;&gt; &gt; function, don't bother with the relax data structures!  See my<br>
&gt;&gt; &gt; previous post mentioned above.<br>
&gt;&gt;<br>
&gt;&gt; I follow now, my only worry is that the processing will be fairly 
fine<br>
&gt;&gt; grained so causing a greater ratio of network traffic to processing<br>
&gt;<br>
&gt;<br>
&gt; The level of the minimise() method is coarser than splitting up a grid<br>
&gt; search.  That is because the main loop of the method executes the grid<br>
&gt; search for each optimisation instance.</tt><br>
<br>
<tt><br>does this limit the number of processors I can use?
</tt></blockquote><pre style="margin: 0em;"><br></pre><br>
<pre style="margin: 0em;">Yes.  If you are studying n spin systems (or residues in a typical
protein analysis) you will be limited to n processors.</pre><br>
</blockquote><tt><br>that fine if i am splitting by residues or chunks of residues that is 
what I am aiming for</tt><br>
<br>
<blockquote class="blockquote"><br>
<blockquote class="blockquote"><pre style="margin: 0em;"> also i am not
following what you mean by each optimization instance is this a model
type if so that is too (!) course grained...
</pre></blockquote><pre style="margin: 0em;"><br></pre><br>
<pre style="margin: 0em;">There are 4 different classes of model-free model supported by relax.
These are found by the 'determine_param_set_type()' method and are
handled differently by the 'minimise()' method and the 'maths_fns.mf'
module.  The four types are:</pre><br>
<tt>   'mf' - one model-free model.<br>
   'local_tm' - one model-free model together with the local tm 
parameter.<br>
   'diff' - solely the diffusion tensor (the model-free model<br>
parameters are held constant).<br>
   'all' - all model-free models of all spin systems together with<br>
the Brownian rotational diffusion parameters.</tt><br>
<br>
<pre style="margin: 0em;">The minimise() method loops over the minimisation instances which for
the four models total n, n, 1, and 1 instances respectively.
</pre></blockquote><pre style="margin: 0em;"><br>ah I understand now (well possibly;-))</pre><br>
<blockquote class="blockquote"><br>
<blockquote class="blockquote"><pre style="margin: 0em;">The original aim for the
optimisation during minimisation was to split up residue ranges as this
gives coarse grains but a reasonable number of them.... (e.g. if you
have a 120 aa protein you have upto 120 grains available (though by that
stage your communication overhead may get too much)
</pre></blockquote><pre style="margin: 0em;"><br></pre><br>
<pre style="margin: 0em;">I'll assume that 'split up residue ranges' means for n residues there
are n optimisations.
</pre></blockquote><pre style="margin: 0em;"><br>indeed</pre><br>
<blockquote class="blockquote"><tt>  This is constrained by the model.  For a grid<br>
search with 10 to 20 increments per dimension across the space of the<br>
most complex model-free model, this could be a few minutes per<br>
residue.  
</tt></blockquote><tt><br>as long as we split by residue this will be good enough I think in 
almost all instances</tt><br>
<br>
<blockquote class="blockquote"><pre style="margin: 0em;">For the minimisation the timing could be similar.  I don't
think there will be much communication overhead in this situation.  If
this is found to be too coarse, then the grid search could be
parallelised.  The minimisation of one optimisation instance can never
be parallelised though (unless you get into the minimisation code and
implement a parallelised optimisation algorithm (I wouldn't do that
though))!</pre><br>
</blockquote><pre style="margin: 0em;">not my first choice ;-)</pre><br>
<blockquote class="blockquote"><br>
<blockquote class="blockquote"><pre style="margin: 0em;">so actually I was
looking at the relax_fit specific function....
</pre></blockquote><pre style="margin: 0em;"><br></pre><br>
</blockquote><pre style="margin: 0em;">don't know how relax_fit got in their I meant relax specific....</pre><br>
<blockquote class="blockquote"><pre style="margin: 0em;">'relax_fit'?  Do you mean the fitting of the exponential curves to
determine the R1 and R2 relaxation rates?</pre><br>
<br>
<blockquote class="blockquote"><pre style="margin: 0em;"> plus passing parameters
to restrict the residue range or using the select function pluse some
saving and restoring of state in the master.
</pre></blockquote><pre style="margin: 0em;"><br></pre><br>
<pre style="margin: 0em;">It could be me not fully understanding MPI but isn't it the master
which collects the results and then places these into the relax data
storage object?
</pre></blockquote><pre style="margin: 0em;"><br>yes</pre><br>
<blockquote class="blockquote"><pre style="margin: 0em;">  Or do the slaves have access to the program namespace
and hence have access to the relax data storage object singleton and
can do it themselves?  Why does the program state need saving?</pre><br>
<br>
</blockquote><pre style="margin: 0em;">this was if we needed to copy the relax state between processors....</pre><br>
<blockquote class="blockquote"><blockquote class="blockquote"><pre style="margin: 0em;">If i have this upside down
and back to front i apolergise I am still learning ;-)
</pre></blockquote><pre style="margin: 0em;"><br></pre><br>
<pre style="margin: 0em;">So am I, mainly though your relax subversion commit messages!  My
knowledge of MPI is definitely lacking.
</pre></blockquote><pre style="margin: 0em;"><br></pre><br>
<blockquote class="blockquote"><pre style="margin: 0em;"><br>Bye,</pre><br>
<pre style="margin: 0em;">Edward</pre><br>
<pre style="margin: 0em;">.</pre><br>
</blockquote><pre style="margin: 0em;"><br></pre><br>
<pre style="margin: 0em;">--
-------------------------------------------------------------------
Dr Gary Thompson
Astbury Centre for Structural Molecular Biology,
University of Leeds, Astbury Building,
Leeds, LS2 9JT, West-Yorkshire, UK             Tel. +44-113-3433024
email: garyt@xxxxxxxxxxxxxxx                   Fax  +44-113-2331407
-------------------------------------------------------------------</pre><br>
<pre style="margin: 0em;"><br></pre><br>
<br>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00088" href="msg00088.html">Re: r3237 - in /branches/multi_processor: multi/mpi4py_processor.py	relax</a></strong>
<ul><li><em>From:</em> Gary S. Thompson</li></ul></li>
<li><strong><a name="00091" href="msg00091.html">Re: r3237 - in /branches/multi_processor: multi/mpi4py_processor.py	relax</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00094" href="msg00094.html">Re: r3237 - in /branches/multi_processor: multi/mpi4py_processor.py	relax</a></strong>
<ul><li><em>From:</em> Gary S. Thompson</li></ul></li>
<li><strong><a name="00099" href="msg00099.html">Re: r3237 - in /branches/multi_processor: multi/mpi4py_processor.py	relax</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00100" href="msg00100.html">Re: r3237 - in /branches/multi_processor: multi/mpi4py_processor.py	relax</a></strong>
<ul><li><em>From:</em> Gary S. Thompson</li></ul></li>
<li><strong><a name="00102" href="msg00102.html">Re: r3237 - in /branches/multi_processor: multi/mpi4py_processor.py	relax</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00104" href="msg00104.html">Re: r3237 - in /branches/multi_processor: multi/mpi4py_processor.py	relax</a></strong>
<ul><li><em>From:</em> Gary S. Thompson</li></ul></li>
<li><strong><a name="00105" href="msg00105.html">Re: r3237 - in /branches/multi_processor: multi/mpi4py_processor.py	relax</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer">You are on the <a href="http://gna.org">Gna!</a> mail server.</div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Tue Mar 20 15:40:35 2007</div>  
</body>
</html>
