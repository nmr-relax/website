<!-- MHonArc v2.6.10 -->
<!--X-Subject: Multiple test cases and the splitting up of large modules. -->
<!--X-From-R13: Sqjneq q'Ohiretar <rqjneq.qnhiretarNtznvy.pbz> -->
<!--X-Date: Wed, 07 Mar 2007 07:24:50 +0100 -->
<!--X-Message-Id: 1173248473.29411.21.camel@pc172&#45;31&#45;2&#45;63.biochem.unimelb.edu.au -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: E1HO9rU&#45;0004g2&#45;14@subversion.gna.org -->
<!--X-Reference: 45EBEA6A.7030809@bmb.leeds.ac.uk -->
<!--X-Reference: 7f080ed10703052357i7fc20379n835048c0cc3c84c1@mail.gmail.com -->
<!--X-Reference: 45ED2A08.6090207@bmb.leeds.ac.uk -->
<!--X-Reference: 1173174583.8066.223.camel@mrspell -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Multiple test cases and the splitting up of large modules. -- March 07, 2007 - 07:24</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Multiple test cases and the splitting up of large modules.</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00010" class="tabs">Index by Date</a> | <a href="threads.html#00010" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00009.html">Date Prev</a>] [<a href="msg00011.html">Date Next</a>] [<a href="msg00009.html">Thread Prev</a>] [<a href="msg00018.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Chris MacRaild &lt;c.a.macraild@xxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Wed, 07 Mar 2007 17:21:12 +1100</li>
<li class="menuitem">
<em>Cc</em>: relax-devel@xxxxxxx</li>
<li class="menuitem">
<em>Dkim-signature</em>: a=rsa-sha1; c=relaxed/relaxed; d=gmail.com; s=beta;	h=domainkey-signature:received:received:subject:from:to:cc:in-reply-to:references:content-type:date:message-id:mime-version:x-mailer:content-transfer-encoding;	b=Cy9Z2y3HnM3K9E2jK/pFsEh4TwCvSqfySdDzi6TKEC7l3k+2qHYcACOtVLRwUuQV5mYjBhT5URmUB+GVcXudsz2Obzd1lYKLCj2Pfg5wrC6xGVw0FdZG3qsCbGudF6Hlu9/1D1AzmeUycd3aT3v+wPNmWl3IZKHrMmbLmK1QTSI=</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00010.html">1173248473.29411.21.camel@pc172-31-2-63.biochem.unimelb.edu.au</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;E1HO9rU-0004g2-14@subversion.gna.org&gt;	&lt;<a href="msg00004.html">45EBEA6A.7030809@bmb.leeds.ac.uk</a>&gt;	&lt;<a href="msg00005.html">7f080ed10703052357i7fc20379n835048c0cc3c84c1@mail.gmail.com</a>&gt;	&lt;<a href="msg00008.html">45ED2A08.6090207@bmb.leeds.ac.uk</a>&gt; &lt;<a href="msg00009.html">1173174583.8066.223.camel@mrspell</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on March 07, 2007 - 07:24:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">On Tue, 2007-03-06 at 09:49 +0000, Chris MacRaild wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">On Tue, 2007-03-06 at 08:44 퍍㐙ꫲ S. Thompson wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Edward d'Auvergne wrote:

</pre></blockquote><pre style="margin: 0em;">snip
</pre><blockquote class="blockquote"><pre style="margin: 0em;">

</pre><blockquote class="blockquote"><pre style="margin: 0em;">Also do you think that we should have a single unit test
file per relax module?  I can see value in not enforcing this rule.
For example the 'specific_fns.model_free' module contains a very large
number of class methods.  This could be better served by a directory
such as 'test_suite/unit_tests/specific_fns/model_free/' and allowing
that directory to have a separate unit test model per class methods
(each containing numerous tests of that one method).  As each relax
function or method will require numerous tests for proper functioning,
proper throwing of RelaxErrors, etc, the unit test modules could
become quite large and unwieldy, especially if the self.setUp and
self.tearDown() methods need to be different for different
functions/methods.

</pre></blockquote><pre style="margin: 0em;">It would be ideal to have one file per because then we can check for 
basic coverage and overlooked unit tests. However there is nothing to 
stop you adding imports to auxiliary classes to carry out the individual 
tests....

</pre></blockquote><pre style="margin: 0em;">

Although I take the point about multiple tests, setUps and tearDowns per
method, I'd generally suggest that if the unit test file is getting too
unwieldy, the related module probably is too. So perhaps we should
enforce this rule, and split modules when neccessary, not split unit
test files. (still more work, still more breakages, but that might be
the cost of a manageable code base)
</pre></blockquote><pre style="margin: 0em;">


We could have multiple test case classes derived from TestCase within
the single module file (corresponding to the single relax source
file).  That way we can, if needed, have one class per function. I
think this is really important as the data structures, etc that need to
be created for that one function will be different to what is needed
for another function (if common self.setUp() and self.tearDown()
methods are needed for different functions, we can simply use
inheritance or the same class).  For example the setUp() for the
'calc_jw()' function of the module 'maths_fns.jw_mf.py' may need to be
different to that of the subsequent function 'calc_S2_jw()' (then again
maybe not).  In fact each of the 128 functions in that single module
may need different setUp() and tearDown() methods (that code was an
absolute nightmare to debug back in 2003, but this setup is very
important for numerical efficiency).  A better example might be the
'self.execute()' and 'self.create()' methods of the module
'generic_fns.dasha' which execute Dasha and create Dasha input files
respectively.  The tearDown() method for the input file creation tests
will require the deletion of the temporary input files whereas
tearDown() for Dasha execution will be different.

As for splitting up large modules such as the 66 method, 5701 line
'specific_fns/model_free.py' file, I've been playing around with a few
ideas.  I have committed to the 1.3 repository line a change which does
not affect program operation in any way but lays down a foundation for
the breaking up of the model_free.py file
(<a  href="http://www.nmr-relax.com/mail.gna.org/public/relax-commits/2007-03/msg00029.html">https://mail.gna.org/public/relax-commits/2007-03/msg00029.html</a>). This
change introduces the directory 'specific_fns/model_free/' while still
retaining the module namespace of 'specific_fns.model_free' by using
import statements in the directory's '__init__.py' file.  I've borrowed
this concept from the Python site-packages, especially the Numeric and
scipy modules.  This foundation can be used to split up the old module
into more manageable, multiple smaller modules, hence simplifying
this code and the future unit test code.  The idea should be perfectly
compatible with the possible future conversion of the class methods
into module functions, if this is desired.


Cheers,

Edward



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00018" href="msg00018.html">Re: Multiple test cases and the splitting up of large modules.</a></strong>
<ul><li><em>From:</em> Gary S. Thompson</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00004" href="msg00004.html">Re: r3080 - /1.3/test_suite/unit_tests/unit_test_runner.py</a></strong>
<ul><li><em>From:</em> Gary S. Thompson</li></ul></li>
<li><strong><a name="00005" href="msg00005.html">Re: r3080 - /1.3/test_suite/unit_tests/unit_test_runner.py</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00008" href="msg00008.html">Re: r3080 - /1.3/test_suite/unit_tests/unit_test_runner.py</a></strong>
<ul><li><em>From:</em> Gary S. Thompson</li></ul></li>
<li><strong><a name="00009" href="msg00009.html">Re: r3080 - /1.3/test_suite/unit_tests/unit_test_runner.py</a></strong>
<ul><li><em>From:</em> Chris MacRaild</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Thu Mar 08 09:40:24 2007</div>  
</body>
</html>
