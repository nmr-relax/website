<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [bug #22055] The processor.run_queue() does not clean up in uni_processor? -->
<!--X-From-R13: "Sqjneq q'Ohiretar" &#60;rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Tue, 20 May 2014 15:44:06 +0200 -->
<!--X-Message-Id: CAED9pY9Wfa4bTRVE2rNs_3WsCL7STFEyQs_yFPW85YEnUSXfXw@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 20140520&#45;000356.sv20529.92877@gna.org -->
<!--X-Reference: 20140520&#45;000436.sv20529.46737@gna.org -->
<!--X-Reference: CAED9pY9dgTO=XEMitiXkucSttRHH4dwnV6KEwqz4jTxHRarvcQ@mail.gmail.com -->
<!--X-Reference: CA+CBx2Pt5q2E0tnvhxq2ocY2NqYmiB1jqqb61M5cBZXeywtYPg@mail.gmail.com -->
<!--X-Reference: CAED9pY&#45;Wo4sSemWQG2AA5eEr&#45;h01oJz7UcsvKE86P35K107MoQ@mail.gmail.com -->
<!--X-Reference: CA+CBx2MMboJqj56A8hohcCX1XtTjAVHNAP50O73QxAv8b9c9sA@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [bug #22055] The processor.run_queue() does not clean up in uni_processor? -- May 20, 2014 - 15:44</title>
<link rel="stylesheet" type="text/css" href="/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="https://gna.org/images/gna.theme/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: [bug #22055] The processor.run_queue() does not clean up in uni_processor?</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00392" class="tabs">Index by Date</a> | <a href="threads.html#00392" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00391.html">Date Prev</a>] [<a href="msg00393.html">Date Next</a>] [<a href="msg00391.html">Thread Prev</a>] [<a href="msg00393.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Troels Emtek√¶r Linnet &lt;tlinnet@xxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Tue, 20 May 2014 15:43:13 +0200</li>
<li class="menuitem">
<em>Cc</em>: &quot;Troels E. Linnet&quot; &lt;NO-REPLY.INVALID-ADDRESS@xxxxxxx&gt;, &quot;relax-devel@xxxxxxx&quot; &lt;relax-devel@xxxxxxx&gt;, Gary Thompson &lt;garyt@xxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113; h=mime-version:sender:in-reply-to:references:date:message-id:subject :from:to:cc:content-type; bh=szPnWfrQsJbUl6EzJdcP72nWG0mxfB3UzXhXX/0Dy8I=; b=k4/dV2UknN1MKdr/XE4GV9Lmj91nUX2lBuq6H62a3uEUu5/09oE3ALPYUVC0anh1Zz uNBa2tGa/Vn4tiRWNbLp2d7jqbPWZfITX8NIPPmt4kq6np7HKNgUBsHn2QLs6/m9TrZF 7ix+C8CwfoZe/cPin/N8zB+1NHoE/rGXWpJ+mH9KdsVggcmr9NfeKKRATQpgTXlacZZA W9bx/Bau1NhPklmwVfIiiBXvrDIIjH1cKzvMCw04dPgWwHC1gPMkQU3Qn3WoGCmbSLcN AB4WtNH93VGPsoRSeC0SgSXtoW8vprQs/Ahsf8+XAtee6gkFF91a1glhwM0Njj6QDklM 9jNA==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00392.html">CAED9pY9Wfa4bTRVE2rNs_3WsCL7STFEyQs_yFPW85YEnUSXfXw@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;<a href="msg00377.html">20140520-000356.sv20529.92877@gna.org</a>&gt; &lt;<a href="msg00378.html">20140520-000436.sv20529.46737@gna.org</a>&gt; &lt;CAED9pY9dgTO=XEMitiXkucSttRHH4dwnV6KEwqz4jTxHRarvcQ@mail.gmail.com&gt; &lt;<a href="msg00386.html">CA+CBx2Pt5q2E0tnvhxq2ocY2NqYmiB1jqqb61M5cBZXeywtYPg@mail.gmail.com</a>&gt; &lt;<a href="msg00390.html">CAED9pY-Wo4sSemWQG2AA5eEr-h01oJz7UcsvKE86P35K107MoQ@mail.gmail.com</a>&gt; &lt;<a href="msg00391.html">CA+CBx2MMboJqj56A8hohcCX1XtTjAVHNAP50O73QxAv8b9c9sA@mail.gmail.com</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on May 20, 2014 - 15:44:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Hi Troels,


</pre><blockquote class="blockquote"><pre style="margin: 0em;">Thanks for fixing the bug!
</pre></blockquote><pre style="margin: 0em;">

No problems.


</pre><blockquote class="blockquote"><pre style="margin: 0em;">But I think the worst most pity thing, is that I have waster 1/4-1/2
year of my PhD to fix this bug:

bug #22032: Minimisation explodes when using Grid_INC=None
<a  rel="nofollow" href="https://gna.org/bugs/index.php?22032">https://gna.org/bugs/index.php?22032</a>
</pre></blockquote><pre style="margin: 0em;">

I'm still trying to work out what this bug is about.  But if you start
optimising with the dw = 0.0, this is not a bug!  You just cannot ever
start optimising from there.  Not many optimisation algorithms can
survive that and find the real solution (global optimisation
algorithms such as simulated annealing and genetic algorithms
excluded).  If you simplify the CR72 equations with dw = 0.0, you will
see that pA, pB, and kex fall out of the equation and you actually end
up with R2eff = R20.  This is expected as when the chemical shift
difference is zero, there is no chemical exchange.  Therefore when dw
= 0.0, then the pA and kex parameters are undefined.   Undefined
parameters kill many optimisation algorithms - this is why you'll see
order parameters of 1 often in a model-free analysis (prior to people
using relax), as in this case the tau_e correlation time parameter is
undefined.

This bug is however only 9 days old.  Do you mean one of the other bugs?


</pre><blockquote class="blockquote"><pre style="margin: 0em;">My last three weeks analysis have shown that the error catching at
boundary values had a huge impact on the minimisation search. It
simply went to scrap.
</pre></blockquote><pre style="margin: 0em;">

Before or after?  Do you have an example that can be converted into a
system test?


</pre><blockquote class="blockquote"><pre style="margin: 0em;">This was also the case when running grid search. Touching the math
domain errors, caught simplex to stop.
<a  rel="nofollow" href="https://gna.org/bugs/download.php?file_id=20704">https://gna.org/bugs/download.php?file_id=20704</a>
<a  rel="nofollow" href="https://gna.org/bugs/download.php?file_id=20698">https://gna.org/bugs/download.php?file_id=20698</a>
</pre></blockquote><pre style="margin: 0em;">

These files are not attached to bug #22032
(<a  rel="nofollow" href="https://gna.org/bugs/index.php?22032">https://gna.org/bugs/index.php?22032</a>).  This is rather bug #22024
(<a  rel="nofollow" href="https://gna.org/bugs/?22024">https://gna.org/bugs/?22024</a>).  However, it is clear from those
chi-squared surfaces that there is nothing to optimise to.  There is
no clear minimum within the space.  We should discuss things under
each separate bug report.

As I mentioned before, this one is not really a bug.  This is simply
what happens when you have very accurate optimisation combined with a
poorly conditioned problem - i.e. the parameter values are close to
insignificance.  This is an edge case, and no one in the field will
care for such a case as its statistical significance is orders of
magnitude less than zero ;)  I wouldn't bother wasting time on that
one, as the only real tool you can use from the field of mathematical
optimisation is a re-parametrisation of the problem.  I used this in
the model-free analysis to go from the {S2f, S2s, ts} parameters to
{S2, S2s, ts} for the 2 time scale models.  This had a huge effect on
optimisation and such problems.  But in the relaxation dispersion
analysis, it will be rather difficult to come up with a new parameter
set.  And rather pointless just to solve such a difficult edge case.


</pre><blockquote class="blockquote"><pre style="margin: 0em;">I have tried so hard to understand why the behaviour of relax is
different from other programs.
</pre></blockquote><pre style="margin: 0em;">

Do you have data showing that other software with the same input data
gives different results?  From all my testing, I don't see this:

<a  rel="nofollow" href="http://svn.gna.org/viewcvs/*checkout*/relax/trunk/test_suite/shared_data/dispersion/software_comparison?revision=HEAD">http://svn.gna.org/viewcvs/*checkout*/relax/trunk/test_suite/shared_data/dispersion/software_comparison?revision=HEAD</a>

Well, apart from the expected differences due to bugs, strange
assumptions of certain old software, and the differences Andy
mentioned (this never reached the mailing list as he had an
attachment!).


</pre><blockquote class="blockquote"><pre style="margin: 0em;">I have tested, and inspected code, and tried other programs. relax was
just stubborn.
</pre></blockquote><pre style="margin: 0em;">

Could you present such comparisons on the mailing list?  Which
software found the solution that relax could not?  And how was relax
set up?


</pre><blockquote class="blockquote"><pre style="margin: 0em;">Realising this issue has been a relieve!

I am happy that the processor.run_queue() bug only is related to the 
test-suite.
It hopefully did not affect production???
</pre></blockquote><pre style="margin: 0em;">

It is only visible in the test suite, and only if certain tests fail.
It is only annoying for relax developers.


</pre><blockquote class="blockquote"><pre style="margin: 0em;">I can have night-mares about these bugs, as that can mean that
scientists are wasting their time.
Including mine.
</pre></blockquote><pre style="margin: 0em;">

This bug is not an issue for relax users.  They cannot be affected by
it.  Other bugs can however, and that is why relax has a test suite.
It is also the reason for the existence of relax - because I found
insanely fatal bugs in other NMR dynamics software that had been used
for 20 years!

Anyway, to save your time with the dispersion work, you should follow
a few simple rules.  If the dispersion curve is insignificant, i.e.
the difference of the maximum and minimum R2eff value is less than a
certain value, say 0.5 rad.s^-1, then don't bother with it!  Most of
the dispersion bug reports where you report optimisation problems fall
into this category.  I strongly doubt that any other dispersion
software will handle these cases - they will give different results
but also not find the real solution (this is likely to be the source
of differences you see to published results).  And never start
optimisation for positions where other parameters are undefined - i.e.
dw = 0.0.  That covers the other half of the bug reports.  You are
otherwise battling nearly impossible battles.

Regards,

Edward


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00393" href="msg00393.html">Re: [bug #22055] The processor.run_queue() does not clean up in uni_processor?</a></strong>
<ul><li><em>From:</em> Troels Emtek√¶r Linnet</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00377" href="msg00377.html">[bug #22055] The processor.run_queue() does not clean up in uni_processor?</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
<li><strong><a name="00378" href="msg00378.html">[bug #22055] The processor.run_queue() does not clean up in uni_processor?</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
<li><strong><a name="00379" href="msg00379.html">Re: [bug #22055] The processor.run_queue() does not clean up in uni_processor?</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00386" href="msg00386.html">Re: [bug #22055] The processor.run_queue() does not clean up in uni_processor?</a></strong>
<ul><li><em>From:</em> Troels Emtek√¶r Linnet</li></ul></li>
<li><strong><a name="00390" href="msg00390.html">Re: [bug #22055] The processor.run_queue() does not clean up in uni_processor?</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00391" href="msg00391.html">Re: [bug #22055] The processor.run_queue() does not clean up in uni_processor?</a></strong>
<ul><li><em>From:</em> Troels Emtek√¶r Linnet</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer">You are on the <a href="http://gna.org">Gna!</a> mail server.</div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Tue May 20 17:00:19 2014</div>  
</body>
</html>
