<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: r8396 &#45; /branches/relax_disp/specific_fns/relax_disp.py -->
<!--X-From-R13: Eéonfgvra [beva <fronfgvra.zbeva.1Nhyniny.pn> -->
<!--X-Date: Sun, 11 Jan 2009 22:15:37 +0100 -->
<!--X-Message-Id: 496A6174.4090001@ulaval.ca -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: E1LM6wT&#45;000244&#45;D8@subversion.gna.org -->
<!--X-Reference: 7f080ed10901111240o15a93096w59b397684b010634@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: r8396 - /branches/relax_disp/specific_fns/relax_disp.py -- January 11, 2009 - 22:15</title>
<link rel="stylesheet" type="text/css" href="/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="https://gna.org/images/gna.theme/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: r8396 - /branches/relax_disp/specific_fns/relax_disp.py</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00060" class="tabs">Index by Date</a> | <a href="threads.html#00060" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00059.html">Date Prev</a>] [<a href="msg00061.html">Date Next</a>] [<a href="msg00059.html">Thread Prev</a>] [<a href="msg00061.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Sun, 11 Jan 2009 16:15:32 -0500</li>
<li class="menuitem">
<em>Cc</em>: relax-devel@xxxxxxx</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00060.html">496A6174.4090001@ulaval.ca</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;E1LM6wT-000244-D8@xxxxxxxxxxxxxxxxxx&gt;	&lt;7f080ed10901111240o15a93096w59b397684b010634@xxxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>User-agent</em>: Thunderbird 2.0.0.19 (X11/20081231)</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Sébastien Morin</strong> on January 11, 2009 - 22:15:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Hi Ed,

I was pretty sure this was already fine before the commit, but the error
message below (from the system-test for the slow-exchange regime, the
same being tru for the test for the fast-exchange regime) made me feel
it might need to be changed...

=================================
relax&gt; grid_search(lower=None, upper=None, inc=11, constraints=True,
verbosity=1)
Traceback (most recent call last):
  File
&quot;/home/semor/pse-4/collaborations/relax/relax-1.3--relax_disp/test_suite/system_tests/relax_disp.py&quot;,
line 75, in test_curve_fitting_cpmg_slow
    self.relax.interpreter.run(script_file=sys.path[-1] +
'/test_suite/system_tests/scripts/relax_disp_cpmg_slow.py')
  File
&quot;/home/semor/pse-4/collaborations/relax/relax-1.3--relax_disp/prompt/interpreter.py&quot;,
line 276, in run
    return run_script(intro=self.__intro_string, local=self.local,
script_file=script_file, quit=self.__quit_flag,
show_script=self.__show_script, raise_relax_error=self.__raise_relax_error)
  File
&quot;/home/semor/pse-4/collaborations/relax/relax-1.3--relax_disp/prompt/interpreter.py&quot;,
line 537, in run_script
    return console.interact(intro, local, script_file, quit,
show_script=show_script, raise_relax_error=raise_relax_error)
  File
&quot;/home/semor/pse-4/collaborations/relax/relax-1.3--relax_disp/prompt/interpreter.py&quot;,
line 433, in interact_script
    execfile(script_file, local)
  File
&quot;/home/semor/pse-4/collaborations/relax/relax-1.3--relax_disp/test_suite/system_tests/scripts/relax_disp_cpmg_slow.py&quot;,
line 96, in &lt;module&gt;
    grid_search(inc=11)
  File
&quot;/home/semor/pse-4/collaborations/relax/relax-1.3--relax_disp/prompt/minimisation.py&quot;,
line 156, in grid_search
    minimise.grid_search(lower=lower, upper=upper, inc=inc,
constraints=constraints, verbosity=verbosity)
  File
&quot;/home/semor/pse-4/collaborations/relax/relax-1.3--relax_disp/generic_fns/minimise.py&quot;,
line 185, in grid_search
    grid_search(lower=lower, upper=upper, inc=inc,
constraints=constraints, verbosity=verbosity)
  File
&quot;/home/semor/pse-4/collaborations/relax/relax-1.3--relax_disp/specific_fns/relax_disp.py&quot;,
line 578, in grid_search
    self.minimise(min_algor='grid', lower=lower, upper=upper, inc=inc,
constraints=constraints, verbosity=verbosity, sim_index=sim_index)
  File
&quot;/home/semor/pse-4/collaborations/relax/relax-1.3--relax_disp/specific_fns/relax_disp.py&quot;,
line 817, in minimise
    param_vector = self.assemble_param_vector(spin=spin)
  File
&quot;/home/semor/pse-4/collaborations/relax/relax-1.3--relax_disp/specific_fns/relax_disp.py&quot;,
line 95, in assemble_param_vector
    elif spin.r2a == None:
AttributeError: 'SpinContainer' object has no attribute 'r2a'
=================================

What do you think ? Does this error arise because of an error in case
somewhere else in the code ?

Regards,


Séb  :)




Edward d'Auvergne wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi,

It looks like there might still be a few capitalisation issues.
Please see below.


On Sun, Jan 11, 2009 at 9:29 PM,  &lt;sebastien.morin.1@xxxxxxxxx&gt; wrote:
  
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Author: semor
Date: Sun Jan 11 21:29:53 2009
New Revision: 8396

URL: <a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax?rev=8396&amp;view=rev">http://svn.gna.org/viewcvs/relax?rev=8396&amp;view=rev</a>
Log:
Changed the object names so they are lower case as they should be, based 
on the rest of the code.

Made the equivalent change in the function assemble_param_vector() to 
allow the system-test to go
further..

This was spotted by Ed in a post at:
<a  rel="nofollow" href="https://mail.gna.org/public/relax-devel/2009-01/msg00058.html">https://mail.gna.org/public/relax-devel/2009-01/msg00058.html</a>
(Message-id: &lt;7f080ed10901111041n65ecd976ie058ed0500d47746@xxxxxxxxxxxxxx&gt;)


Modified:
   branches/relax_disp/specific_fns/relax_disp.py

Modified: branches/relax_disp/specific_fns/relax_disp.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/relax_disp/specific_fns/relax_disp.py?rev=8396&amp;r1=8395&amp;r2=8396&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/relax_disp/specific_fns/relax_disp.py?rev=8396&amp;r1=8395&amp;r2=8396&amp;view=diff</a>
==============================================================================
--- branches/relax_disp/specific_fns/relax_disp.py (original)
+++ branches/relax_disp/specific_fns/relax_disp.py Sun Jan 11 21:29:53 2009
@@ -62,7 +62,7 @@
        # Loop over the model parameters.
        for i in xrange(len(spin.params)):
            # Transversal relaxation rate.
-            if spin.params[i] == 'R2':
+            if spin.params[i] == 'r2':
    
</pre></blockquote><pre style="margin: 0em;">

Here this is the parameter string, which is what the user sees.  In
this situation, it should be in natural case, eg 'R2'.  This is the
same with everything in spin.params.


  
</pre><blockquote class="blockquote"><pre style="margin: 0em;">                if sim_index != None:
                    param_vector.append(spin.r2_sim[sim_index])
                elif spin.r2 == None:
@@ -71,7 +71,7 @@
                    param_vector.append(spin.r2)

            # Chemical exchange contribution to 'R2'.
-            elif spin.params[i] == 'Rex':
+            elif spin.params[i] == 'rex':
                if sim_index != None:
                    param_vector.append(spin.rex_sim[sim_index])
                elif spin.rex == None:
@@ -89,7 +89,7 @@
                    param_vector.append(spin.kex)

            # Transversal relaxation rate for state A.
-            if spin.params[i] == 'R2A':
+            if spin.params[i] == 'r2a':
                if sim_index != None:
                    param_vector.append(spin.r2a_sim[sim_index])
                elif spin.r2a == None:
@@ -98,7 +98,7 @@
                    param_vector.append(spin.r2a)

            # Exchange rate from state A to state B.
-            if spin.params[i] == 'kA':
+            if spin.params[i] == 'ka':
                if sim_index != None:
                    param_vector.append(spin.ka_sim[sim_index])
                elif spin.ka == None:
@@ -1032,15 +1032,15 @@
        | Data type                                         | Object name  
  | Patterns                 |
        
|___________________________________________________|________________|__________________________|
        |                                                   |              
  |                          |
-        | Transversal relaxation rate                       | 'R2'        
   | '^[Rr]2$'                |
+        | Transversal relaxation rate                       | 'r2'        
   | '^[Rr]2$'                |
    
</pre></blockquote><pre style="margin: 0em;">

Here this is the object name, not the parameter name.  So it should be
'r2', which is now correct.

Regards,

Edward

_______________________________________________
relax (<a  rel="nofollow" href="http://nmr-relax.com">http://nmr-relax.com</a>)

This is the relax-devel mailing list
relax-devel@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="https://mail.gna.org/listinfo/relax-devel">https://mail.gna.org/listinfo/relax-devel</a>

  
</pre></blockquote><pre style="margin: 0em;">




</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00061" href="msg00061.html">Re: r8396 - /branches/relax_disp/specific_fns/relax_disp.py</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00059" href="msg00059.html">Re: r8396 - /branches/relax_disp/specific_fns/relax_disp.py</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer">You are on the <a href="http://gna.org">Gna!</a> mail server.</div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Sun Jan 11 22:40:44 2009</div>  
</body>
</html>
