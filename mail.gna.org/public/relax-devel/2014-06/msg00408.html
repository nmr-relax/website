<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: r24199 &#45; /branches/disp_spin_speed/lib/dispersion/ns_mmq_2site.py -->
<!--X-From-R13: "Sqjneq q'Ohiretar" &#60;rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Mon, 23 Jun 2014 11:51:11 +0200 -->
<!--X-Message-Id: CAED9pY_H7gBM+y+23q_sDTJFF36TQAUaYr0ma7vYvVbt6fg7Tg@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: E1WxvcD&#45;00055g&#45;RU@subversion.gna.org -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: r24199 - /branches/disp_spin_speed/lib/dispersion/ns_mmq_2site.py -- June 23, 2014 - 11:51</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: r24199 - /branches/disp_spin_speed/lib/dispersion/ns_mmq_2site.py</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00408" class="tabs">Index by Date</a> | <a href="threads.html#00408" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00407.html">Date Prev</a>] [<a href="msg00409.html">Date Next</a>] [<a href="msg00405.html">Thread Prev</a>] [<a href="msg00409.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: &quot;relax-devel@xxxxxxx&quot; &lt;relax-devel@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Mon, 23 Jun 2014 11:50:40 +0200</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113; h=mime-version:sender:in-reply-to:references:date:message-id:subject :from:to:content-type; bh=Uu/0Q2BcGFQD6hSoX4rpr9Ca4BKZGqj+6y5mziRMiFc=; b=CYl+EgHw4jSkMAi/o4gBviDrbrffpLp3bESUvuFtdkYnzQM+LHEeLSP6/9EOP7GDGf 0R0agzlNVtzTG2O/ygKh8/4Hb1zJh56Ie7q1/ISsgv7p5aaDx4B7KQnH1JeTwEa5cNCP 5R/drmceaLsaV1zG/qoBeqT36TcbHMEkXh7G3S835fEAlPEZm+8sI9JYKIELYQ3g3WDy 6Dke0tVQ3d6Jjv3oVXL6rbEvPDVjUGoiBOYFfCA5EXnLi9wlLtaViTdI62Uy104MiTci YhpvcdEdysuN1EiMWSWo+5clIM0+gYkWmyLfS06egCefLy0l+oNYyuQk/a4FrCQxYxwg qRlA==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00408.html">CAED9pY_H7gBM+y+23q_sDTJFF36TQAUaYr0ma7vYvVbt6fg7Tg@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;E1WxvcD-00055g-RU@subversion.gna.org&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on June 23, 2014 - 11:51:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Hi Troels,

Please try to keep code changes separate.  You have two changes in
this commit.  One is documented by the commit message, but the other
change is hidden and only visible when looking at the lines changed.
That is a bit too messy.

Cheers,

Edward



On 20 June 2014 12:00,  &lt;tlinnet@xxxxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Author: tlinnet
Date: Fri Jun 20 12:00:12 2014
New Revision: 24199

URL: <a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax?rev=24199&amp;view=rev">http://svn.gna.org/viewcvs/relax?rev=24199&amp;view=rev</a>
Log:
Forces complex64 in ns_mmq_2site_sq_dq_zq instead complex128.

This fixes systemtests:
- test_korzhnev_2005_15n_zq_data
- test_korzhnev_2005_1h_sq_data

Task #7807 (<a  rel="nofollow" href="https://web.archive.org/web/https://gna.org/task/index.php?7807">https://gna.org/task/index.php?7807</a>): Speed-up of dispersion 
models for Clustered analysis.

Modified:
    branches/disp_spin_speed/lib/dispersion/ns_mmq_2site.py

Modified: branches/disp_spin_speed/lib/dispersion/ns_mmq_2site.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/disp_spin_speed/lib/dispersion/ns_mmq_2site.py?rev=24199&amp;r1=24198&amp;r2=24199&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/disp_spin_speed/lib/dispersion/ns_mmq_2site.py?rev=24199&amp;r1=24198&amp;r2=24199&amp;view=diff</a>
==============================================================================
--- branches/disp_spin_speed/lib/dispersion/ns_mmq_2site.py     (original)
+++ branches/disp_spin_speed/lib/dispersion/ns_mmq_2site.py     Fri Jun 20 
12:00:12 2014
@@ -386,8 +386,8 @@
     NS, NM, NO = num_points.shape

     # Populate the m1 and m2 matrices (only once per function call for 
speed).
-    m1_mat = populate_matrix_rankN(R20A=R20A, R20B=R20B, dw=dw, k_AB=k_AB, 
k_BA=k_BA, tcp=tcp)
-    m2_mat = populate_matrix_rankN(R20A=R20A, R20B=R20B, dw=-dw, 
k_AB=k_AB, k_BA=k_BA, tcp=tcp)
+    m1_mat = populate_matrix_rankN(R20A=R20A, R20B=R20B, dw=dw, k_AB=k_AB, 
k_BA=k_BA, tcp=tcp).astype(complex64)
+    m2_mat = populate_matrix_rankN(R20A=R20A, R20B=R20B, dw=-dw, 
k_AB=k_AB, k_BA=k_BA, tcp=tcp).astype(complex64)

     # The A+/- matrices.
     A_pos_mat = matrix_exponential_rankN(m1_mat).astype(complex64)
@@ -408,11 +408,6 @@
                     A_pos_i = A_pos_mat[si, mi, oi, i]
                     A_neg_i = A_neg_mat[si, mi, oi, i]

-                    #m1_mat_i = m1_mat[si, mi, oi, i]
-                    #m2_mat_i = m2_mat[si, mi, oi, i]
-                    #A_pos_i = matrix_exponential(m1_mat_i)
-                    #A_neg_i = matrix_exponential(m2_mat_i)
-
                     # The evolution for one n.
                     evol_block = dot(A_pos_i, dot(A_neg_i, dot(A_neg_i, 
A_pos_i)))



_______________________________________________
relax (<a  rel="nofollow" href="http://www.nmr-relax.com">http://www.nmr-relax.com</a>)

This is the relax-commits mailing list
relax-commits@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="http://www.nmr-relax.com/mail.gna.org/listinfo/relax-commits">https://mail.gna.org/listinfo/relax-commits</a>
</pre></blockquote><pre style="margin: 0em;">


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Mon Jun 23 12:00:18 2014</div>  
</body>
</html>
