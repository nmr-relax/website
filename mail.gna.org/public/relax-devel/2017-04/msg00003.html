<!-- MHonArc v2.6.19+ -->
<!--X-Subject: Re: Feature request: Model&#45;free fitting with eta_xy data -->
<!--X-From-R13: "Sqjneq q'Ohiretar" &#60;rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Fri, 28 Apr 2017 10:25:01 +0200 -->
<!--X-Message-Id: CAED9pY&#45;n1nzrA4wB_ZmmZZUWPep_FRYwFYPNBqV7rQLmOMoqKg@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 6C92E543&#45;9D47&#45;4F78&#45;8511&#45;8B89FEC0E1C6@bpc.lu.se -->
<!--X-Reference: CA+CBx2M4UsZ6_=WpLHicfFH+28LRmEbCtdi=WqvspdAWQ779kg@mail.gmail.com -->
<!--X-Reference: EEAA5164&#45;AF98&#45;4268&#45;AF85&#45;3D4463FD68E4@bpc.lu.se -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: Feature request: Model-free fitting with eta_xy data -- April 28, 2017 - 10:25</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: Feature request: Model-free fitting with eta_xy data</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00003" class="tabs">Index by Date</a> | <a href="threads.html#00003" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00002.html">Date Prev</a>] [Date Next] [<a href="msg00002.html">Thread Prev</a>] [Thread Next]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Sven Wernersson &lt;sven.wernersson@xxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Fri, 28 Apr 2017 10:24:29 +0200</li>
<li class="menuitem">
<em>Cc</em>: &quot;relax-devel@xxxxxxx&quot; &lt;relax-devel@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025; h=mime-version:sender:in-reply-to:references:from:date:message-id :subject:to:cc:content-transfer-encoding; bh=FFlIgTlQEViaYH0oEIKaPBdiLmLQLNTC9YE4Y/say6Y=; b=vKPyxO/7JS+wqR+NDL3PlmH5JxvIbnRb2jou2yvBviCNSnRqgTHL/9lja5KZbvy6GN QTY5jA6JRNqRZ2ar+ULRBU/C+FYKwYBEa5ULArodDG4jygGn1c7B8hvSuLPrPrRxs6nt PhD3q89rXNng3/LD2W5ux2pozL1hs7cMsTGLr7MUyEvGDUtUeBLs6rQsDgRlZ4XJonIA 4kjjKCQapQIxX/KPC6PcAxcVB4Vwu7m+gdJZ3MUOxQl0PM7nR5d0qiKBg2gwJQN4dm5s k8BbeJ7EtdTMvenoz/7TCH+XRLg63kqMKFZjxWDOayHPK9blkvxwbsjsmWB4hMjbEgeK 88aQ==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00003.html">CAED9pY-n1nzrA4wB_ZmmZZUWPep_FRYwFYPNBqV7rQLmOMoqKg@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;<a href="msg00000.html">6C92E543-9D47-4F78-8511-8B89FEC0E1C6@bpc.lu.se</a>&gt; &lt;CA+CBx2M4UsZ6_=WpLHicfFH+28LRmEbCtdi=WqvspdAWQ779kg@mail.gmail.com&gt; &lt;<a href="msg00002.html">EEAA5164-AF98-4268-AF85-3D4463FD68E4@bpc.lu.se</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on April 28, 2017 - 10:25:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Hi Sven,

Sorry for not getting back to you earlier, I have been extremely busy
lately.  Please see below:


On 25 April 2017 at 14:52, Sven Wernersson &lt;sven.wernersson@xxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi again,

It seems that the tutorial you linked only applies for supporting data from 
new experiments to dispersion analysis and not for model-free analysis? Is 
adding experiments for model-free analysis done in a similar fashion?
</pre></blockquote><pre style="margin: 0em;">

For the model-free analysis, adding new models is more complicated.
The reason for this is because the code is highly optimised to avoid
repetitive calculations, and it is not as modular as the relaxation
dispersion code.  Another reason is because I started this code back
in 2001, back when I was first learning how to code in Python, so it's
design was not as advanced as the relaxation dispersion side of relax.
Also, you will be using the same models as already implemented, but
the input data will be different.


</pre><blockquote class="blockquote"><pre style="margin: 0em;">As for your listed requirements, I have experimental data and I can rather 
easily generate synthetic data. The  eta_xy equation is number (2) in:

Longitudinal and Transverse 1H−15N Dipolar/15N Chemical Shift Anisotropy 
Relaxation Interference:  Unambiguous Determination of Rotational Diffusion 
Tensors and Chemical Exchange Effects in Biological Macromolecules
Christopher D. Kroenke,†, J. Patrick Loria,†, Larry K. Lee,†, Mark 
Rance,*,‡ and, and Arthur G. Palmer, III*,†
Journal of the American Chemical Society 1998 120 (31), 7905-7915
DOI: 10.1021/ja980832l
</pre></blockquote><pre style="margin: 0em;">

If you would like to develop new code here, which shouldn't be
difficult if you can handle complex Matlab code, I would suggest we
create a new development branch in the repository.  You should learn
how to develop for relax by reading the &quot;relax development&quot; chapter of
the manual:

    <a  rel="nofollow" href="/manual/relax_development.html">http://www.nmr-relax.com/manual/relax_development.html</a>

This explains the procedure for becoming a relax developer.  We could
then grant you commit access on the condition of only modifying your
development branch.  That way you can experiment in this sandbox as
you wish, and it can be abandoned and a new branch created if you
don't like your initial tests.

The very first step in implementing a new model/analysis in relax is
to create a system/functional test.  From the information you provide,
it looks like you could create two or more tests.  One would be
synthetic data where you know the model-free parameters and you hand
calculate the relaxation data (to 64-bit machine precision).  The
second would be taking some of the Kroenke et al. published data where
you know the relaxation data and model-free result.  With the
synthetic data, you could create a number of tests later on to cover
corner cases and hard to optimise cases.  Once you have the relaxation
data, you create a relax script to analyse this data.  This is then
placed into a test which runs the script and then checks the optimised
model-free parameter values.  See the code in test_suite/system_tests/
for plenty of such examples.  Obviously these tests will fail at the
start, but once the Python code for the eta_xy data is in place and
correct, the tests will pass.

After the tests have been added, then I can help point you in the
right direction with the model-free target function code.  There was
one abortive effort to handle anisotropic chemical shift tensors and
multiple dipolar relaxation data, which as later merged for archival
purposes into the CST branch of relax (see
<a  rel="nofollow" href="https://marc.info/?t=135070783800002&amp;r=2&amp;w=2">https://marc.info/?t=135070783800002&amp;r=2&amp;w=2</a>).  This was by Pavel
Kaderavek and Petr Novak back in 2008:

    <a  rel="nofollow" href="/mail.gna.org/public/relax-devel/2008-12/msg00046.html">https://mail.gna.org/public/relax-devel/2008-12/msg00046.html</a>

This might be worth having a look at as some of the concepts might be
similar.  The 'cst_1.2.10' branch might be the most informative, as
the 'cst' branch was a failed attempt to keep this code up to date
with the relax trunk.  Note though that the code developed there was
not ideal as the model-free code was simply replicated 6 times for the
different data types.  Instead I would like to help you so that the
input data structure for the model-free functions are modified, and
the model-free functional code is reused for all data types.  For
eta_xy data, do we need the full chemical shift tensor as an input?

Regards,

Edward


P. S. As for implementing the eta_xy data, have you thought of eta_z
data as well?  If you implement eta_xy support, adding eta_z support
in addition should be relatively easy.


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00000" href="msg00000.html">Feature request:  Model-free fitting with eta_xy data</a></strong>
<ul><li><em>From:</em> Sven Wernersson</li></ul></li>
<li><strong><a name="00001" href="msg00001.html">Re: Feature request: Model-free fitting with eta_xy data</a></strong>
<ul><li><em>From:</em> Troels Emtekær Linnet</li></ul></li>
<li><strong><a name="00002" href="msg00002.html">Re: Feature request: Model-free fitting with eta_xy data</a></strong>
<ul><li><em>From:</em> Sven Wernersson</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Fri Apr 28 10:40:07 2017</div>  
</body>
</html>
