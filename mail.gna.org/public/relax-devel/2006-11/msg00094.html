<!-- MHonArc v2.6.10 -->
<!--X-Subject: Re: [bug #7670] scons compile issue -->
<!--X-From-R13: "Sqjneq q'Ohiretar" <rqjneq.qnhiretarNtznvy.pbz> -->
<!--X-Date: Wed, 08 Nov 2006 17:07:52 +0100 -->
<!--X-Message-Id: 7f080ed10611080807h508223a9i27bf82e947dc828a@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 20061108&#45;135202.sv0.47378@gna.org -->
<!--X-Reference: 7f080ed10611080630l17317622mc9c0e13c514fc256@mail.gmail.com -->
<!--X-Reference: D3013D2F&#45;373E&#45;4BC8&#45;B5F9&#45;02D87B274F6A@gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [bug #7670] scons compile issue -- November 08, 2006 - 17:07</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: [bug #7670] scons compile issue</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00094" class="tabs">Index by Date</a> | <a href="threads.html#00094" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00093.html">Date Prev</a>] [<a href="msg00095.html">Date Next</a>] [<a href="msg00092.html">Thread Prev</a>] [<a href="msg00095.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: &quot;Douglas Kojetin&quot; &lt;douglas.kojetin@xxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Thu, 9 Nov 2006 03:07:03 +1100</li>
<li class="menuitem">
<em>Cc</em>: relax-devel@xxxxxxx</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00094.html">7f080ed10611080807h508223a9i27bf82e947dc828a@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;<a href="msg00085.html">20061108-135202.sv0.47378@gna.org</a>&gt;	&lt;<a href="msg00087.html">7f080ed10611080630l17317622mc9c0e13c514fc256@mail.gmail.com</a>&gt;	&lt;<a href="msg00092.html">D3013D2F-373E-4BC8-B5F9-02D87B274F6A@gmail.com</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on November 08, 2006 - 17:07:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">I wonder if it is the file 'maths_fns/relax_fit.dylib' which should
have a different extension?  As relax hides the importing error
messages and prints 'ImportError: relaxation curve fitting is
unavailable, try compiling the C modules.' instead, you can get the
true error message by typing the following at the relax prompt:</pre><br>
<pre style="margin: 0em;">from maths_fns.relax_fit import setup, func, dfunc, d2func, back_calc_I</pre><br>
<pre style="margin: 0em;">Does typing this give any useful messages?</pre><br>
<pre style="margin: 0em;">Edward</pre><br>
<tt><br>On 11/9/06, Douglas Kojetin &lt;douglas.kojetin@xxxxxxxxx&gt; wrote:
</tt><blockquote class="blockquote"><pre style="margin: 0em;">Hi Edward-</pre><br>
<pre style="margin: 0em;">The following worked without error:</pre><br>
<pre style="margin: 0em;">gcc -bundle -bundle_loader /sw/bin/python -dynamic -o
maths_fns/relax_fit.dylib maths_fns/c_chi2.os maths_fns/exponential.os
maths_fns/relax_fit.os</pre><br>
<pre style="margin: 0em;">but invoking relax afterwards suggests the relaxation curve fitting
is still not available:</pre><br>
<pre style="margin: 0em;">% ./relax --test</pre><br>
<pre style="margin: 0em;">ImportError: relaxation curve fitting is unavailible, try compiling
the C modules.</pre><br>
<pre style="margin: 0em;">Is there anything else I need to do or should try?</pre><br>
<pre style="margin: 0em;">Thanks,
Doug</pre><br>
<pre style="margin: 0em;"><br>On Nov 8, 2006, at 9:30 AM, Edward d'Auvergne wrote:
&gt; Hi,
&gt;
&gt; I have to warn you first that the 'tensor_pdb' branch is very unstable
&gt; code at the moment and I'm constantly breaking things as the code
&gt; shapes up.  There may be times when it won't even run.  These aren't
&gt; related to this bug though.
&gt;
&gt; I've had a look at the 'sconstruct' script in the base relax directory
&gt; and one thing which is apparent is the '-dynamiclib' flag being passed
&gt; into 'gcc'.  The script has been specifically modified for OS X to
&gt; compile the shared objects to be loaded by python, hence the
&gt; '-bundle', etc. flags.  However '-dynamiclib' is not one of the
&gt; options in the script so it must be SCons adding that.  If you type
&gt; the following gcc line at the prompt, do get the same
&gt; 'powerpc-apple-darwin8-gcc-4.0.1' error message or does the code
&gt; compile?
&gt;
&gt; gcc -bundle -bundle_loader /sw/bin/python -dynamic -o
&gt; maths_fns/relax_fit.dylib maths_fns/c_chi2.os maths_fns/exponential.os
&gt; maths_fns/relax_fit.os
&gt;
&gt; If we can work out how to compile the C modules on the command line,
&gt; then the SCons script can be subsequently updated to pass the correct
&gt; options to gcc.
&gt;
&gt; Cheers,
&gt;
&gt; Edward
&gt;
&gt;
&gt; On 11/8/06, anonymous &lt;NO-REPLY.INVALID-ADDRESS@xxxxxxx&gt; wrote:
&gt;&gt;
&gt;&gt; URL:
&gt;&gt;   &lt;<a  href="http://gna.org/bugs/?7670">http://gna.org/bugs/?7670</a>&gt;
&gt;&gt;
&gt;&gt;                  Summary: scons compile issue
&gt;&gt;                  Project: relax
&gt;&gt;             Submitted by: None
&gt;&gt;             Submitted on: Wednesday 11/08/2006 at 13:52 CET
&gt;&gt;                 Category: Scons build system
&gt;&gt;                 Priority: 5 - Normal
&gt;&gt;                 Severity: 4 - Important
&gt;&gt;                   Status: None
&gt;&gt;                  Privacy: Public
&gt;&gt;              Assigned to: None
&gt;&gt;          Originator Name: doug
&gt;&gt;         Originator Email:
&gt;&gt;              Open/Closed: Open
&gt;&gt;                  Release: 1.2.7
&gt;&gt;         Operating System: Mac OS X
&gt;&gt;
&gt;&gt;     _______________________________________________________
&gt;&gt;
&gt;&gt; Details:
&gt;&gt;
&gt;&gt; I'm using the tensor_pdb version (svn co
&gt;&gt; svn://svn.gna.org/svn/relax/branches/tensor_pdb) and running Mac
&gt;&gt; OS X 10.4.8
&gt;&gt; w/ gcc version 4.0.1 (PowerPC version).
&gt;&gt;
&gt;&gt; I tried to install relax using the directions in the relax.pdf
&gt;&gt; section 1.2.1
&gt;&gt; using the 'scons' program under OS X.  I am seeing the following
&gt;&gt; error (even
&gt;&gt; after trying to execute 'scons' a few times, which is shown below):
&gt;&gt;
&gt;&gt; % scons clean
&gt;&gt; scons: Reading SConscript files ...
&gt;&gt; scons: done reading SConscript files.
&gt;&gt; scons: Building targets ...
&gt;&gt; clean_temp_files([&quot;clean_temp&quot;], [])
&gt;&gt;
&gt;&gt; ###############################
&gt;&gt; # Cleaning up temporary files #
&gt;&gt; ###############################
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; Removing the files ending in ['pyc', 'bak', 'o', 'os', 'obj',
&gt;&gt; 'exp', 'lib'].
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; clean_manual_files([&quot;manual_clean&quot;], [])
&gt;&gt;
&gt;&gt; ##########################################
&gt;&gt; # Cleaning up the temporary manual files #
&gt;&gt; ##########################################
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; clean_files([&quot;clean&quot;], [])
&gt;&gt;
&gt;&gt; ###############
&gt;&gt; # Cleaning up #
&gt;&gt; ###############
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; Removing the files ending in ['so', 'sconsign', 'dll'].
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; scons: done building targets.
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; % scons
&gt;&gt; scons: Reading SConscript files ...
&gt;&gt; scons: done reading SConscript files.
&gt;&gt; scons: Building targets ...
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; ###########################
&gt;&gt; # Compiling the C modules #
&gt;&gt; ###########################
&gt;&gt;
&gt;&gt;
&gt;&gt; Building the relaxation curve fitting module 'maths_fns/
&gt;&gt; relax_fit.dylib'
&gt;&gt;
&gt;&gt; gcc -I/sw/include/python2.4 -fPIC -c -o maths_fns/c_chi2.os
&gt;&gt; maths_fns/c_chi2.c
&gt;&gt; gcc -I/sw/include/python2.4 -fPIC -c -o maths_fns/exponential.os
&gt;&gt; maths_fns/exponential.c
&gt;&gt; gcc -I/sw/include/python2.4 -fPIC -c -o maths_fns/relax_fit.os
&gt;&gt; maths_fns/relax_fit.c
&gt;&gt; gcc -bundle -bundle_loader /sw/bin/python -dynamic -dynamiclib -o
&gt;&gt; maths_fns/relax_fit.dylib maths_fns/c_chi2.os maths_fns/
&gt;&gt; exponential.os
&gt;&gt; maths_fns/relax_fit.os
&gt;&gt; powerpc-apple-darwin8-gcc-4.0.1: -bundle not allowed with -dynamiclib
&gt;&gt; scons: *** [maths_fns/relax_fit.dylib] Error 1
&gt;&gt; scons: building terminated because of errors.
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; I blindly tried removing the -bundle and -bundle_loader flags, but
&gt;&gt; that did
&gt;&gt; not help.
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;     _______________________________________________________
&gt;&gt;
&gt;&gt; Follow-up Comments:
&gt;&gt;
&gt;&gt;
&gt;&gt; -------------------------------------------------------
&gt;&gt; Date: Wednesday 11/08/2006 at 13:52 CETBy: Anonymous
&gt;&gt; I'm using the tensor_pdb version (svn co
&gt;&gt; svn://svn.gna.org/svn/relax/branches/tensor_pdb) and running Mac
&gt;&gt; OS X 10.4.8
&gt;&gt; w/ gcc version 4.0.1 (PowerPC version).
&gt;&gt;
&gt;&gt; I tried to install relax using the directions in the relax.pdf
&gt;&gt; section 1.2.1
&gt;&gt; using the 'scons' program under OS X.  I am seeing the following
&gt;&gt; error (even
&gt;&gt; after trying to execute 'scons' a few times, which is shown below):
&gt;&gt;
&gt;&gt; % scons clean
&gt;&gt; scons: Reading SConscript files ...
&gt;&gt; scons: done reading SConscript files.
&gt;&gt; scons: Building targets ...
&gt;&gt; clean_temp_files([&quot;clean_temp&quot;], [])
&gt;&gt;
&gt;&gt; ###############################
&gt;&gt; # Cleaning up temporary files #
&gt;&gt; ###############################
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; Removing the files ending in ['pyc', 'bak', 'o', 'os', 'obj',
&gt;&gt; 'exp', 'lib'].
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; clean_manual_files([&quot;manual_clean&quot;], [])
&gt;&gt;
&gt;&gt; ##########################################
&gt;&gt; # Cleaning up the temporary manual files #
&gt;&gt; ##########################################
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; clean_files([&quot;clean&quot;], [])
&gt;&gt;
&gt;&gt; ###############
&gt;&gt; # Cleaning up #
&gt;&gt; ###############
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; Removing the files ending in ['so', 'sconsign', 'dll'].
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; scons: done building targets.
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; % scons
&gt;&gt; scons: Reading SConscript files ...
&gt;&gt; scons: done reading SConscript files.
&gt;&gt; scons: Building targets ...
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; ###########################
&gt;&gt; # Compiling the C modules #
&gt;&gt; ###########################
&gt;&gt;
&gt;&gt;
&gt;&gt; Building the relaxation curve fitting module 'maths_fns/
&gt;&gt; relax_fit.dylib'
&gt;&gt;
&gt;&gt; gcc -I/sw/include/python2.4 -fPIC -c -o maths_fns/c_chi2.os
&gt;&gt; maths_fns/c_chi2.c
&gt;&gt; gcc -I/sw/include/python2.4 -fPIC -c -o maths_fns/exponential.os
&gt;&gt; maths_fns/exponential.c
&gt;&gt; gcc -I/sw/include/python2.4 -fPIC -c -o maths_fns/relax_fit.os
&gt;&gt; maths_fns/relax_fit.c
&gt;&gt; gcc -bundle -bundle_loader /sw/bin/python -dynamic -dynamiclib -o
&gt;&gt; maths_fns/relax_fit.dylib maths_fns/c_chi2.os maths_fns/
&gt;&gt; exponential.os
&gt;&gt; maths_fns/relax_fit.os
&gt;&gt; powerpc-apple-darwin8-gcc-4.0.1: -bundle not allowed with -dynamiclib
&gt;&gt; scons: *** [maths_fns/relax_fit.dylib] Error 1
&gt;&gt; scons: building terminated because of errors.
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; I blindly tried removing the -bundle and -bundle_loader flags, but
&gt;&gt; that did
&gt;&gt; not help.
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;     _______________________________________________________
&gt;&gt;
&gt;&gt; Reply to this item at:
&gt;&gt;
&gt;&gt;   &lt;<a  href="http://gna.org/bugs/?7670">http://gna.org/bugs/?7670</a>&gt;
&gt;&gt;
&gt;&gt; _______________________________________________
&gt;&gt;   Message sent via/by Gna!
&gt;&gt;   <a  href="http://gna.org/">http://gna.org/</a>
&gt;&gt;
&gt;&gt;
&gt;&gt; _______________________________________________
&gt;&gt; relax (<a  href="http://nmr-relax.com">http://nmr-relax.com</a>)
&gt;&gt;
&gt;&gt; This is the relax-devel mailing list
&gt;&gt; relax-devel@xxxxxxx
&gt;&gt;
&gt;&gt; To unsubscribe from this list, get a password
&gt;&gt; reminder, or change your subscription options,
&gt;&gt; visit the list information page at
&gt;&gt; <a  href="/mail.gna.org/listinfo/relax-devel">https://mail.gna.org/listinfo/relax-devel</a>
&gt;&gt;</pre><br>
<pre style="margin: 0em;"><br></pre><br>
<br>
</blockquote><pre style="margin: 0em;"><br></pre><br>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00098" href="msg00098.html">Re: [bug #7670] scons compile issue</a></strong>
<ul><li><em>From:</em> Douglas Kojetin</li></ul></li>
<li><strong><a name="00095" href="msg00095.html">Re: [bug #7670] scons compile issue</a></strong>
<ul><li><em>From:</em> Douglas Kojetin</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00085" href="msg00085.html">[bug #7670] scons compile issue</a></strong>
<ul><li><em>From:</em> anonymous</li></ul></li>
<li><strong><a name="00087" href="msg00087.html">Re: [bug #7670] scons compile issue</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00092" href="msg00092.html">Re: [bug #7670] scons compile issue</a></strong>
<ul><li><em>From:</em> Douglas Kojetin</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Wed Nov 08 17:40:16 2006</div>  
</body>
</html>
