<!-- MHonArc v2.6.16 -->
<!--X-Subject: r19173 &#45; in /branches/relax_disp/user_functions: __init__.py	relax_disp.py -->
<!--X-From-R13: rqjneqNaze&#45;erynk.pbz -->
<!--X-Date: Wed, 27 Mar 2013 12:54:22 +0100 -->
<!--X-Message-Id: E1UKovu&#45;0002SM&#45;Bv@subversion.gna.org -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>r19173 - in /branches/relax_disp/user_functions: __init__.py	relax_disp.py -- March 27, 2013 - 12:54</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />r19173 - in /branches/relax_disp/user_functions: __init__.py	relax_disp.py</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00591" class="tabs">Index by Date</a> | <a href="threads.html#00591" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00590.html">Date Prev</a>] [<a href="msg00592.html">Date Next</a>] [<a href="msg00590.html">Thread Prev</a>] [<a href="msg00592.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: relax-commits@xxxxxxx</li>
<li class="menuitem">
<em>Date</em>: Wed, 27 Mar 2013 11:54:22 -0000</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00591.html">E1UKovu-0002SM-Bv@subversion.gna.org</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>edward</strong> on March 27, 2013 - 12:54:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Author: bugman
Date: Wed Mar 27 12:54:22 2013
New Revision: 19173

URL: <a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax?rev=19173&amp;view=rev">http://svn.gna.org/viewcvs/relax?rev=19173&amp;view=rev</a>
Log:
Manually created the relax_disp user functions.

This is equivalent to Seb's commit at r8322 for the prompt.relax_disp module. 
 The equivalent
changes to the user_functions.relax_disp were hand edited.

.....
  r8322 | semor | 2009-01-07 21:53:01 +0100 (Wed, 07 Jan 2009) | 10 lines
  Changed paths:
     M /branches/relax_disp/prompt/relax_disp.py
  
  Added functions to select the experiment type and mathematical model used.
  
  These functions allow the user to select the experiment type (cpmg or 
r1rho) as well as the
  mathematical model to fit the data (fast or slow).
  
  These changes follow a discussion on relaxation dispersion, and mainly the 
post at:
  <a  rel="nofollow" href="http://www.nmr-relax.com/mail.gna.org/public/relax-devel/2009-01/msg00020.html">https://mail.gna.org/public/relax-devel/2009-01/msg00020.html</a>
  (Message-id: &lt;7f080ed10901070529s397f7f23p914c820ced4d07f@xxxxxxxxxxxxxx&gt;)
.....


Modified:
    branches/relax_disp/user_functions/__init__.py
    branches/relax_disp/user_functions/relax_disp.py

Modified: branches/relax_disp/user_functions/__init__.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/relax_disp/user_functions/__init__.py?rev=19173&amp;r1=19172&amp;r2=19173&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/relax_disp/user_functions/__init__.py?rev=19173&amp;r1=19172&amp;r2=19173&amp;view=diff</a>
==============================================================================
--- branches/relax_disp/user_functions/__init__.py (original)
+++ branches/relax_disp/user_functions/__init__.py Wed Mar 27 12:54:22 2013
@@ -66,6 +66,7 @@
     'pymol_control',
     'rdc',
     'relax_data',
+    'relax_disp',
     'relax_fit',
     'residue',
     'reset',
@@ -117,6 +118,7 @@
 import user_functions.pymol_control
 import user_functions.rdc
 import user_functions.relax_data
+import user_functions.relax_disp
 import user_functions.relax_fit
 import user_functions.residue
 import user_functions.reset

Modified: branches/relax_disp/user_functions/relax_disp.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/relax_disp/user_functions/relax_disp.py?rev=19173&amp;r1=19172&amp;r2=19173&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/relax_disp/user_functions/relax_disp.py?rev=19173&amp;r1=19172&amp;r2=19173&amp;view=diff</a>
==============================================================================
--- branches/relax_disp/user_functions/relax_disp.py (original)
+++ branches/relax_disp/user_functions/relax_disp.py Wed Mar 27 12:54:22 2013
@@ -1,6 +1,7 @@
 
###############################################################################
 #                                                                            
 #
 # Copyright (C) 2004-2013 Edward d'Auvergne                                  
 #
+# Copyright (C) 2009 Sebastien Morin                                         
 #
 #                                                                            
 #
 # This file is part of the program relax (<a  rel="nofollow" href="http://www.nmr-relax.com">http://www.nmr-relax.com</a>).         
 #
 #                                                                            
 #
@@ -20,81 +21,81 @@
 
###############################################################################
 
 # Module docstring.
-&quot;&quot;&quot;The relax_fit user function definitions.&quot;&quot;&quot;
+&quot;&quot;&quot;The relax_disp user function definitions.&quot;&quot;&quot;
 
 # relax module imports.
 from pipe_control import spectrum
 from graphics import WIZARD_IMAGE_PATH
-from specific_analyses.setup import relax_fit_obj
+from specific_analyses.setup import relax_disp_obj
 from user_functions.data import Uf_info; uf_info = Uf_info()
 from user_functions.objects import Desc_container
 
 
 # The user function class.
-uf_class = uf_info.add_class('relax_fit')
+uf_class = uf_info.add_class('relax_disp')
 uf_class.title = &quot;Class for relaxation curve fitting.&quot;
-uf_class.menu_text = &quot;&amp;relax_fit&quot;
-uf_class.gui_icon = &quot;relax.relax_fit&quot;
+uf_class.menu_text = &quot;&amp;relax_disp&quot;
+uf_class.gui_icon = &quot;relax.relax_disp&quot;
 
 
-# The relax_fit.relax_time user function.
-uf = uf_info.add_uf('relax_fit.relax_time')
-uf.title = &quot;Set the relaxation delay time associated with each spectrum.&quot;
-uf.title_short = &quot;Relaxation delay time setting.&quot;
+# The relax_disp.exp_type user function.
+uf = uf_info.add_uf('relax_disp.exp_type')
+uf.title = &quot;Select the type of relaxation dispersion experiments to analyse.&quot;
+uf.title_short = &quot;Relaxation dispersion type selection.&quot;
 uf.add_keyarg(
-    name = &quot;time&quot;,
-    default = 0.0,
-    py_type = &quot;num&quot;,
-    desc_short = &quot;relaxation time&quot;,
-    desc = &quot;The time, in seconds, of the relaxation period.&quot;
-)
-uf.add_keyarg(
-    name = &quot;spectrum_id&quot;,
+    name = &quot;exp&quot;,
+    default = &quot;cpmg&quot;,
     py_type = &quot;str&quot;,
-    desc_short = &quot;spectrum identification string&quot;,
-    desc = &quot;The spectrum identification string.&quot;,
-    wiz_element_type = 'combo',
-    wiz_combo_iter = spectrum.get_ids,
-    wiz_read_only = True
+    desc_short = &quot;experiment type&quot;,
+    desc = &quot;The type of relaxation dispersion experiment performed.&quot;
 )
 # Description.
 uf.desc.append(Desc_container())
-uf.desc[-1].add_paragraph(&quot;Peak intensities should be loaded before calling 
this user function via the spectrum.read_intensities user function.  The 
intensity values will then be associated with a spectrum identifier.  To 
associate each spectrum identifier with a time point in the relaxation curve 
prior to optimisation, this user function should be called.&quot;)
-uf.backend = relax_fit_obj._relax_time
-uf.menu_text = &quot;&amp;relax_time&quot;
-uf.gui_icon = &quot;oxygen.actions.chronometer&quot;
-uf.wizard_size = (700, 500)
+uf.desc[-1].add_paragraph(&quot;The supported experiments will include CPMG 
('cpmg') and R1rho ('r1rho').&quot;)
+# Prompt examples.
+uf.desc.append(Desc_container(&quot;Prompt examples&quot;))
+uf.desc[-1].add_paragraph(&quot;To pick the experiment type 'cpmg' for all 
selected spins, type one of:&quot;)
+uf.desc[-1].add_prompt(&quot;relax&gt; relax_disp.exp_type('cpmg')&quot;)
+uf.desc[-1].add_prompt(&quot;relax&gt; relax_disp.exp_type(exp='cpmg')&quot;)
+uf.backend = relax_disp_obj._exp_type
+uf.menu_text = &quot;&amp;exp_type&quot;
+uf.wizard_size = (800, 500)
 
 
-# The relax_fit.select_model user function.
-uf = uf_info.add_uf('relax_fit.select_model')
-uf.title = &quot;Select the relaxation curve type.&quot;
-uf.title_short = &quot;Relaxation curve type selection.&quot;
+# The relax_disp.select_model user function.
+uf = uf_info.add_uf('relax_disp.select_model')
+uf.title = &quot;Select the relaxation dispersion curve type.&quot;
+uf.title_short = &quot;Relaxation dispersion curve type selection.&quot;
 uf.display = True
 uf.add_keyarg(
     name = &quot;model&quot;,
-    default = &quot;exp&quot;,
+    default = &quot;fast&quot;,
     py_type = &quot;str&quot;,
     desc_short = &quot;model&quot;,
-    desc = &quot;The type of relaxation curve to fit.&quot;,
+    desc = &quot;The type of relaxation dispersion curve to fit (relating to the 
NMR time scale).&quot;,
     wiz_element_type = &quot;combo&quot;,
     wiz_combo_choices = [
-        &quot;exp: [Rx, I0]&quot;,
-        &quot;inv: [Rx, I0, Iinf]&quot;
+        &quot;fast: [R2, Rex, kex]&quot;,
+        &quot;slow: [R2A, kA, dw]&quot;
     ],
     wiz_combo_data = [
-        &quot;exp&quot;,
-        &quot;inv&quot;
+        &quot;fast&quot;,
+        &quot;slow&quot;
     ],
     wiz_read_only = True
 )
 # Description.
 uf.desc.append(Desc_container())
-uf.desc[-1].add_paragraph(&quot;The supported relaxation experiments include the 
default two parameter exponential fit, selected by setting the model type to 
'exp', and the three parameter inversion recovery experiment in which the 
peak intensity limit is a non-zero value, selected by setting the model to 
'inv'.&quot;)
+uf.desc[-1].add_paragraph(&quot;The supported equations will include the default 
fast-exchange limit as well as the slow-exchange limit.&quot;)
 uf.desc[-1].add_paragraph(&quot;The parameters of these two models are&quot;)
-uf.desc[-1].add_item_list_element(&quot;'exp'&quot;, &quot;[Rx, I0],&quot;)
-uf.desc[-1].add_item_list_element(&quot;'inv'&quot;, &quot;[Rx, I0, Iinf].&quot;)
-uf.backend = relax_fit_obj._select_model
+uf.desc[-1].add_item_list_element(&quot;'fast'&quot;, &quot;[R2, Rex, kex],&quot;)
+uf.desc[-1].add_item_list_element(&quot;'slow'&quot;, &quot;[R2A, kA, dw].&quot;)
+# Prompt examples.
+uf.desc.append(Desc_container(&quot;Prompt examples&quot;))
+uf.desc[-1].add_paragraph(&quot;To pick the model 'fast' for all selected spins, 
type one of:&quot;)
+uf.desc[-1].add_prompt(&quot;relax&gt; relax_disp.select_model('fast')&quot;)
+uf.desc[-1].add_prompt(&quot;relax&gt; relax_disp.select_model(model='fast')&quot;)
+uf.backend = relax_disp_obj._select_model
 uf.menu_text = &quot;&amp;select_model&quot;
 uf.gui_icon = &quot;oxygen.actions.list-add&quot;
 uf.wizard_height_desc = 300



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Wed Mar 27 13:00:03 2013</div>  
</body>
</html>
