<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: [model&#45;free] handling of missing data -->
<!--X-From-R13: "Sqjneq q'Ohiretar" <rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Thu, 04 Oct 2012 13:40:59 +0200 -->
<!--X-Message-Id: CAED9pY_Aj9LytCXaXKc30BO0+n=TfucuxOs0T9rTrO72X0je7Q@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: CFAB8152&#45;33CE&#45;4EF9&#45;A5B6&#45;97A68EDF7FF1@fmp&#45;berlin.de -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [model-free] handling of missing data -- October 04, 2012 - 13:40</title>
<link rel="stylesheet" type="text/css" href="/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="https://gna.org/images/gna.theme/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: [model-free] handling of missing data</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00001" class="tabs">Index by Date</a> | <a href="threads.html#00001" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00000.html">Date Prev</a>] [<a href="msg00002.html">Date Next</a>] [<a href="msg00000.html">Thread Prev</a>] [<a href="msg00002.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Martin Ballaschk &lt;ballaschk@xxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Thu, 4 Oct 2012 13:40:28 +0200</li>
<li class="menuitem">
<em>Cc</em>: &quot;relax-users@xxxxxxx&quot; &lt;relax-users@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;	h=mime-version:sender:in-reply-to:references:date	:x-google-sender-auth:message-id:subject:from:to:cc:content-type;	bh=48Z8hg8edhpiaTmLU9TM2UlevGElBmwBzKQiWxDTg0w=;	b=QYzdBJTIhM9Lherl8qV7D3xIWudt/7dnz1//539O2vFMFwbPiTQTr+jxSsWptT0k0L	JMpu4bLSGG4d9SPAEAn5sC9O+z/usaxjF79CC7TZBl3kqPY/U+9J71L7pGr2zJjUFUzg	TsGt8V6kr63IU9liT4xvxXbE33X8fj/Wlc0lDHjZWX45nJgaVX9Gy5RFDKGk8sjw+PD5	XP8ozS2S54gkL7zjzBkEBToTbVyT4DlD8kdGnnSbb2X95brziuDz6BDd8Dn4L3Uo9G5t	JLxfvKKupBLAfSwsSns4dWxOyU5dSzJKMAsyw9uE9nPMAtkJU58EzIaa4k9r9QSTR4Dv	H6kA==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00001.html">CAED9pY_Aj9LytCXaXKc30BO0+n=TfucuxOs0T9rTrO72X0je7Q@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;CFAB8152-33CE-4EF9-A5B6-97A68EDF7FF1@xxxxxxxxxxxxx&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on October 04, 2012 - 13:40:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Hi Martin,

I'll answer below:


</pre><blockquote class="blockquote"><pre style="margin: 0em;">what is the best way of handling relaxation data that have no corresponding 
residues in the crystal structure?
</pre></blockquote><pre style="margin: 0em;">

You answered that yourself with the 3 points below :)


</pre><blockquote class="blockquote"><pre style="margin: 0em;">My first step is to read the pdb and load the spins (e.g. resdidues 7 to 
61):

</pre><blockquote class="blockquote"><pre style="margin: 0em;">structure.read_pdb(file='./mypdb.pdb', dir=None, read_mol=None, 
set_mol_name=None, read_model=None, set_model_num=None, parser='internal')
structure.load_spins(spin_id='@N*', ave_pos=True)
structure.load_spins(spin_id='@H*', ave_pos=True)
</pre></blockquote><pre style="margin: 0em;">

If I try to load my relaxation data sets (ranging from residue 6 to 62), 
relax complains that there is no spin set up for residue 6 (and 62):

</pre><blockquote class="blockquote"><pre style="margin: 0em;">relax_data.read(ri_id='R1_600', ri_type='R1', frq=600179910.0, 
file='./600/rx_t1.out', res_num_col=2, res_name_col=3, spin_num_col=4, 
spin_name_col=5, data_col=6, error_col=7)
Opening the file './600/rx_t1.out' for reading.
RelaxError: The spin ':6@N' does not exist.
</pre></blockquote></blockquote><pre style="margin: 0em;">

This is a problem!


</pre><blockquote class="blockquote"><pre style="margin: 0em;">I can imagine the following workarounds:

a) delete spin relaxation data for res. 6 and 62 from all data files,
</pre></blockquote><pre style="margin: 0em;">

You can do this, but this is an ugly solution which can cause problems
in the future.  I would never recommend to ever do this, relax should
be able to handle this data (otherwise I would classify this as a
bug).


</pre><blockquote class="blockquote"><pre style="margin: 0em;">b) create residues 6 and 62 by hand (residue.create, spin.create) and 
deselect them, or
</pre></blockquote><pre style="margin: 0em;">

I would suggest this method, but without deselecting them.  They will
be automatically deselected during the optimisation for the diffusion
models requiring bond vector orientations, but will be active for the
local tm models and spherical diffusion.  You could in the end use the
results from the local tm model for just these spins, combining this
with the solution from whichever model-free protocol you use.


</pre><blockquote class="blockquote"><pre style="margin: 0em;">c) read a sequence file containing all missing N spins, and &quot;None&quot; spins 
for all the spins I want to load from the pdb file.
</pre></blockquote><pre style="margin: 0em;">

If b) is too much work, then a sequence file containing just the spins
missing from the PDB could be used.  I would assume that relax would
complain if you try to read the spin data twice.


</pre><blockquote class="blockquote"><pre style="margin: 0em;">So far I have been successful with a) but I don't like fiddling with my 
input files too much, as it quickly becomes a mess of different versions 
etc.
</pre></blockquote><pre style="margin: 0em;">

This option is not the best way.


</pre><blockquote class="blockquote"><pre style="margin: 0em;">Option b) gave me weird errors after t_m fitting (&quot;deepcopy(spin2) 
IndexError: list assignment index out of range&quot;) I guess are related to the 
additional spins.
</pre></blockquote><pre style="margin: 0em;">

This is quite strange.  Your bug report (<a  rel="nofollow" href="https://gna.org/bugs/?20213">https://gna.org/bugs/?20213</a>)
is the correct way to handle this.  I'll respond to that next.


</pre><blockquote class="blockquote"><pre style="margin: 0em;">I tried using c) but I ran into problems with the spin setup: Obviously 
relax set up spins of type &quot;0&quot; and wants me to set up the isotope type of 
it.
</pre></blockquote><pre style="margin: 0em;">

For option c), you will have to specify the isotope, but you'll to do
this for the data from a PDB file as well.  You would also need to
specify the element:

spin.element(element='N', spin_id='@N*')

Though you might need this for PDB files as well because often the PDB
element column is missing.


</pre><blockquote class="blockquote"><pre style="margin: 0em;">So, what kind of approach do you have?
</pre></blockquote><pre style="margin: 0em;">

Both b) and c) should be fine.  If they don't work, then that is
likely to be due to a bug.  Unless there is a RelaxError complaining
about missing data, in which case you might need the spin.isotope
and/or spin.element user functions.

Regards,

Edward


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00000" href="msg00000.html">[model-free] handling of missing data</a></strong>
<ul><li><em>From:</em> Martin Ballaschk</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer">You are on the <a href="http://gna.org">Gna!</a> mail server.</div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Thu Oct 04 15:40:05 2012</div>  
</body>
</html>
