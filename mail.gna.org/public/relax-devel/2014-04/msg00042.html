<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [bug #21959] cpmg_analysis -->
<!--X-From-R13: "Sqjneq q'Ohiretar" &#60;rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Wed, 23 Apr 2014 13:29:00 +0200 -->
<!--X-Message-Id: CAED9pY86kNSW_yr5uH_0bJ9YRXAbW+2uEzrPEra&#45;8sdHfPwUoA@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 20140423&#45;094315.sv0.89349@gna.org -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [bug #21959] cpmg_analysis -- April 23, 2014 - 13:29</title>
<link rel="stylesheet" type="text/css" href="/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="https://gna.org/images/gna.theme/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: [bug #21959] cpmg_analysis</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00042" class="tabs">Index by Date</a> | <a href="threads.html#00042" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00041.html">Date Prev</a>] [<a href="msg00043.html">Date Next</a>] [<a href="msg00037.html">Thread Prev</a>] [<a href="msg00048.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: anonymous &lt;NO-REPLY.INVALID-ADDRESS@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Wed, 23 Apr 2014 13:28:09 +0200</li>
<li class="menuitem">
<em>Cc</em>: &quot;mengjun.xue@xxxxxxxxxxxxxxxxxxxx&quot; &lt;mengjun.xue@xxxxxxxxxxxxxxxxxxxx&gt;, &quot;relax-devel@xxxxxxx&quot; &lt;relax-devel@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113; h=mime-version:sender:in-reply-to:references:date:message-id:subject :from:to:cc:content-type; bh=bQJiAzPIz0qyWjzvFNYKxqTeRmPoQg4GIWi+kkrus/I=; b=c1lLC8F+tJFk2oUW9SlZYPQzXOna+qcQEEM0C0nDgWjyVt/xskh6VQcGXSblA/uDoD jKo0oa43boE1kAPsv3EkZKMa8kTqQVTskhm7NgHA8nh1uhPwnOjlCROcY4uNj4GFgF0C 6B8FcnqPzs7LxPvDiBqjJoEE87MIIbZiDZKYNNhR9kDB7md418Xl5x8b5XCRegNq4nR2 NS5zU54N/ONOhK+R04eUu/wH8LHVP2eMuZCnKm1t8gRtMH4NXwn/pIPHQHa1yO1ykW68 eer4jREY2m7YDObR9q6VPOXgGkzNBJ8fk57HaGJisNCgxxcOrwORLWBL4wB9o9P56+1m SkoA==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00042.html">CAED9pY86kNSW_yr5uH_0bJ9YRXAbW+2uEzrPEra-8sdHfPwUoA@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;<a href="msg00037.html">20140423-094315.sv0.89349@gna.org</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on April 23, 2014 - 13:29:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Hi Mengjun,

This is a simple case of handling file system paths and directories
correctly and understanding what the current directory is.  When you
run a relax script, the current working directory (CWD) will be set to
the directory that contains the script.  As you copied the script into
the base relax directory, the base directory will be the CWD.

If you have a look at the DATA_PATH variable, that is what is called a
relative path.  There is no root directory at the start ('C:\' in
Windows, &quot;/&quot; in Linux and Macs) so it is not an absolute path.  A
relative path will then be relative to the CWD.  That means that
DATA_PATH is added to CWD.  So if CWD is &quot;C:\Program files\relax&quot; and
DATA_PATH is &quot;..\..\test_suite\shared_data\dispersion\Hansen&quot;, then
the absolute path used to find the file will be &quot;C:\Program
files\relax\..\..\test_suite\shared_data\dispersion\Hansen&quot;.

Now, the '..' directory has a special meaning - it is the parent
directory.  This is the same on Windows, Linux and Mac.  It is present
in the absolute path twice.  So the absolute path says to first walk
into the &quot;Program files&quot; directory (&quot;C:\Program files&quot;), then into the
&quot;relax&quot; directory (&quot;C:\Program files\relax&quot;), then back up into the
parent directory (which is &quot;C:\Program files&quot;), and once more back up
into the parent directory.  So you will now be at &quot;C:\&quot;.  Therefore
the absolute path collapses to
&quot;C:\test_suite\shared_data\dispersion\Hansen&quot;, which is a directory
that most like does not exist on your system.

So to get the script to run, you need to take all of this into account
and change DATA_PATH to be relative to the directory the script is in,
or change DATA_PATH to be the absolute path.  I hope this explains the
issue.

Regards,

Edward




On 23 April 2014 11:43, anonymous &lt;NO-REPLY.INVALID-ADDRESS@xxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">URL:
  &lt;<a  rel="nofollow" href="http://gna.org/bugs/?21959">http://gna.org/bugs/?21959</a>&gt;

                 Summary: cpmg_analysis
                 Project: relax
            Submitted by: None
            Submitted on: Wed 23 Apr 2014 09:43:15 AM UTC
                Category: relax sample scripts
Specific analysis category: None
                Priority: 5 - Normal
                Severity: 3 - Normal
                  Status: None
             Assigned to: None
         Originator Name:
        Originator Email: mengjun.xue@xxxxxxxxxxxxxxxxxxxx
             Open/Closed: Open
                 Release: 3.1.7
         Discussion Lock: Any
        Operating System: 32-bit MS Windows

    _______________________________________________________

Details:

Dear Edward and Troels,

Thank you so much for your response. I have tried the script again as you
suggested, but it does not work on my computer, I have attached the log 
file.

log_cpmg_analysis_04222014: I set the DATA_PATH =
'..\..\test_suite\shared_data\dispersion\Hansen' in cpmg_analysis.py,  I 
copy
the cpmg_analysis.py to the base relax directory, and then run the
cpmg_analysis.py under cmd,C:\program files\relax-3.1.7\relax
cpmg_analysis.py

log_cpmg_analysis_04232014a: I set the DATA_PATH =
'..\\..\\test_suite\\shared_data\\dispersion\\Hansen' in cpmg_analysis.py,  
I
copy the cpmg_analysis.py to the base relax directory, and then run the
cpmg_analysis.py under cmd, C:\program files\relax-3.1.7\relax
cpmg_analysis.py

log_cpmg_analysis_04232014b: I set the DATA_PATH =
'..\..\test_suite\shared_data\dispersion\Hansen' in cpmg_analysis.py, and 
run
the cpmg_analysis.py under cmd, C:\program files\relax-3.1.7\relax
sample_scripts\relax_disp\cpmg_analysis.py

Thank you.

Best regards,

Mengjun


Hi,

There's no need to separate them now.  I've fixed both in relax.  For
the error you see now, if I run:

$ ./relax sample_scripts/relax_disp/cpmg_analysis.py

from the base relax directory, then it will find the data in the test
suite directories and perform the test analysis.  Also in the Windows
PowerShell:
.\relax sample_scripts\relax_disp\cpmg_analysis.py
Both work for me.  But Troels' response
(<a  rel="nofollow" href="http://thread.gmane.org/gmane.science.nmr.relax.devel/5296/focus=5326">http://thread.gmane.org/gmane.science.nmr.relax.devel/5296/focus=5326</a>)
is exactly correct.  The '\t' is the Python tab character, so the
missing '\' will really cause problems.  Python gets around such
problems by using the os.sep and os.pardir variables, as I have used
in the updated scripts
(<a  rel="nofollow" href="http://svn.gna.org/viewcvs/*checkout*/relax/trunk/sample_scripts/relax_disp/cpmg_analysis.py?content-type=text%2Fplain">http://svn.gna.org/viewcvs/*checkout*/relax/trunk/sample_scripts/relax_disp/cpmg_analysis.py?content-type=text%2Fplain</a>).

Regards,

Edward


Hi Mengjun.

There is missing a \
.\\..\test_suite

should be
.\\..\\test_suite

2014-04-23 10:23 GMT+02:00 &lt;mengjun.xue@xxxxxxxxxxxxxxxxxxxx&gt;:
Hi Edward,

Thank you very much for your suggestions. Should I separate the the 
questions
about test suite and cmpg_analysis.py and resubmit them ? For the
cpmy_analysis.py, I have change it to
'..\..\test_suite\shared_data\dispersion\Hansen' as your suggestion, and try
to run the script again, but there are following relaxerror,

relax&gt; spectrum.read_intensities(file='500_MHz\\reference.in_sparky',
dir='..\\..\test_suite\\shared_data\\dispersion\\Hansen',
spectrum_id='500_reference.in', dim=1, int_method='height', int_col=None,
spin_id_col=None, mol_name_col=None, res_num_col=None, res_name_col=None,
spin_num_col=None, spin_name_col=None, sep=None, spin_id=None, ncproc=None)
RelaxError: The sequence data does not exist.

Thank you.

Best regards,

Mengjun




    _______________________________________________________

File Attachments:


-------------------------------------------------------
Date: Wed 23 Apr 2014 09:43:15 AM UTC  Name: log_cpmg_analyis_04232014  
Size:
11kB   By: None

&lt;<a  rel="nofollow" href="http://gna.org/bugs/download.php?file_id=20565">http://gna.org/bugs/download.php?file_id=20565</a>&gt;
-------------------------------------------------------
Date: Wed 23 Apr 2014 09:43:15 AM UTC  Name: log_cpmg_analysis_04232014a
Size: 11kB   By: None

&lt;<a  rel="nofollow" href="http://gna.org/bugs/download.php?file_id=20566">http://gna.org/bugs/download.php?file_id=20566</a>&gt;
-------------------------------------------------------
Date: Wed 23 Apr 2014 09:43:15 AM UTC  Name: log_cpmg_analysis_04232014b
Size: 11kB   By: None

&lt;<a  rel="nofollow" href="http://gna.org/bugs/download.php?file_id=20567">http://gna.org/bugs/download.php?file_id=20567</a>&gt;

    _______________________________________________________

Reply to this item at:

  &lt;<a  rel="nofollow" href="http://gna.org/bugs/?21959">http://gna.org/bugs/?21959</a>&gt;

_______________________________________________
  Message sent via/by Gna!
  <a  rel="nofollow" href="http://gna.org/">http://gna.org/</a>


_______________________________________________
relax (<a  rel="nofollow" href="http://www.nmr-relax.com">http://www.nmr-relax.com</a>)

This is the relax-devel mailing list
relax-devel@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="https://mail.gna.org/listinfo/relax-devel">https://mail.gna.org/listinfo/relax-devel</a>
</pre></blockquote><pre style="margin: 0em;">


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00048" href="msg00048.html">Re: [bug #21959] cpmg_analysis</a></strong>
<ul><li><em>From:</em> mengjun . xue</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00037" href="msg00037.html">[bug #21959] cpmg_analysis</a></strong>
<ul><li><em>From:</em> anonymous</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer">You are on the <a href="http://gna.org">Gna!</a> mail server.</div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Wed Apr 23 15:00:14 2014</div>  
</body>
</html>
