<!-- MHonArc v2.6.18 -->
<!--X-Subject: r22545 &#45; in /branches/double_rotor: ./ docs/latex/ sample_scripts/ test_suite/system_tests/ test_suite/system_tests/scripts/... -->
<!--X-From-R13: rqjneqNaze&#45;erynk.pbz -->
<!--X-Date: Wed, 26 Mar 2014 18:39:06 +0100 -->
<!--X-Message-Id: E1WSrn8&#45;0008PG&#45;GH@subversion.gna.org -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>r22545 - in /branches/double_rotor: ./ docs/latex/ sample_scripts/ test_suite/system_tests/ test_suite/system_tests/scripts/... -- March 26, 2014 - 18:39</title>
<link rel="stylesheet" type="text/css" href="/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="https://gna.org/images/gna.theme/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />r22545 - in /branches/double_rotor: ./ docs/latex/ sample_scripts/ test_suite/system_tests/ test_suite/system_tests/scripts/...</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00155" class="tabs">Index by Date</a> | <a href="threads.html#00155" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00154.html">Date Prev</a>] [<a href="msg00156.html">Date Next</a>] [<a href="msg00154.html">Thread Prev</a>] [<a href="msg00156.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: relax-commits@xxxxxxx</li>
<li class="menuitem">
<em>Date</em>: Wed, 26 Mar 2014 17:39:06 -0000</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00155.html">E1WSrn8-0008PG-GH@subversion.gna.org</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>edward</strong> on March 26, 2014 - 18:39:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Author: bugman
Date: Wed Mar 26 18:39:06 2014
New Revision: 22545

URL: <a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax?rev=22545&amp;view=rev">http://svn.gna.org/viewcvs/relax?rev=22545&amp;view=rev</a>
Log:
Merged revisions 22543-22544 via svnmerge from 
svn+ssh://bugman@xxxxxxxxxxx/svn/relax/trunk

........
  r22543 | bugman | 2014-03-26 18:32:15 +0100 (Wed, 26 Mar 2014) | 10 lines
  
  Changed the Noe.test_noe_analysis system test to handle the peak 
intensities correctly.
  
  This relates to bug #21863 (<a  rel="nofollow" href="https://gna.org/bugs/?21863">https://gna.org/bugs/?21863</a>), , the grace.write 
user function not being
  able to write ref/sat plots as described in sample script noe.py.
  
  Instead of trying to produce the 'ref.agr' and 'sat.agr' files for the 
non-existent 'ref' and 'sat'
  parameters, instead the 'intensities.agr' file is being produced for the 
peak intensity parameter.
  The reference and saturated intensities will appear as two graph sets 
within that plot.
........
  r22544 | bugman | 2014-03-26 18:38:41 +0100 (Wed, 26 Mar 2014) | 11 lines
  
  Changed the Noe analysis sample script to properly handle the peak 
intensity Grace plots.
  
  This relates to bug #21863 (<a  rel="nofollow" href="https://gna.org/bugs/?21863">https://gna.org/bugs/?21863</a>), the grace.write 
user function not being
  able to write ref/sat plots as described in sample script noe.py.
  
  Instead of trying to produce the 'ref.agr' and 'sat.agr' files for the 
non-existent 'ref' and 'sat'
  parameters, instead the 'intensities.agr' file is being produced for the 
peak intensity parameter.
  The reference and saturated intensities will appear as two graph sets 
within that plot.  These
  changes match those of the test suite.
........

Modified:
    branches/double_rotor/   (props changed)
    branches/double_rotor/docs/latex/noe.tex
    branches/double_rotor/sample_scripts/noe.py
    branches/double_rotor/test_suite/system_tests/noe.py
    branches/double_rotor/test_suite/system_tests/scripts/noe/noe.py

Propchange: branches/double_rotor/
------------------------------------------------------------------------------
--- svnmerge-integrated (original)
+++ svnmerge-integrated Wed Mar 26 18:39:06 2014
@@ -1 +1 @@
-/trunk:1-22541
+/trunk:1-22544

Modified: branches/double_rotor/docs/latex/noe.tex
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/double_rotor/docs/latex/noe.tex?rev=22545&amp;r1=22544&amp;r2=22545&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/double_rotor/docs/latex/noe.tex?rev=22545&amp;r1=22544&amp;r2=22545&amp;view=diff</a>
==============================================================================
--- branches/double_rotor/docs/latex/noe.tex    (original)
+++ branches/double_rotor/docs/latex/noe.tex    Wed Mar 26 18:39:06 2014
@@ -84,13 +84,11 @@
 value.write(param='noe', file='noe.out', force=True)
 
 # Create Grace files.
-grace.write(y_data_type='ref', file='ref.agr', force=True)
-grace.write(y_data_type='sat', file='sat.agr', force=True)
+grace.write(y_data_type='intensities', file='intensities.agr', force=True)
 grace.write(y_data_type='noe', file='noe.agr', force=True)
 
 # View the Grace files.
-grace.view(file='ref.agr')
-grace.view(file='sat.agr')
+grace.view(file='intensities.agr')
 grace.view(file='noe.agr')
 
 # Write the results.
@@ -317,32 +315,23 @@
 Any two dimensional data set can be plotted in relax in conjunction with the 
program 
\href{<a  rel="nofollow" href="http://plasma-gate.weizmann.ac.il/Grace/}{Grace}\index{software!Grace">http://plasma-gate.weizmann.ac.il/Grace/}{Grace}\index{software!Grace</a>|textbf}.
 The program is also known as Xmgrace and was previously known as ACE/gr or 
Xmgr.
 The highly flexible relax user function \uf{grace\ufsep{}write} is capable 
of producing 2D plots of any x-y data sets.
-The three commands
+The two commands
 
 \begin{lstlisting}[firstnumber=41]
 # Create Grace files.
-grace.write(y_data_type='ref', file='ref.agr', force=True)
-grace.write(y_data_type='sat', file='sat.agr', force=True)
+grace.write(y_data_type='intensities', file='intensities.agr', force=True)
 grace.write(y_data_type='noe', file='noe.agr', force=True)
 \end{lstlisting}
 
-will create three separate plots of the peak intensity of the reference and 
saturated spectra as well as the NOE.
+will create one plot of the peak intensity of the reference and saturated 
spectra as different graph sets in the same plot as well as one plot for the 
NOE and its error.
 The x-axis in all three defaults to the residue number.
-As the x and y-axes can be any parameter the command
-
-\begin{lstlisting}[numbers=none]
-grace.write(x_data_type='ref', y_data_type='sat', file='ref_vs_sat.agr', 
force=True)
-\end{lstlisting}
-
-would create a plot of the reference verses the saturated intensity with one 
point per residue.
-Returning to the sample script three Grace data files are created 
\file{ref.agr}, \file{sat.agr}, and \file{noe.agr} and placed in the default 
directory \directory{.\ossep{}grace}.
+Returning to the sample script three Grace data files are created 
\file{intensities.agr} and \file{noe.agr} and placed in the default directory 
\directory{.\ossep{}grace}.
 These can be visualised by opening the file within Grace.
 However relax will do that for you with the commands
 
-\begin{lstlisting}[firstnumber=46]
+\begin{lstlisting}[firstnumber=45]
 # View the Grace files.
-grace.view(file='ref.agr')
-grace.view(file='sat.agr')
+grace.view(file='intensities.agr')
 grace.view(file='noe.agr')
 \end{lstlisting}
 

Modified: branches/double_rotor/sample_scripts/noe.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/double_rotor/sample_scripts/noe.py?rev=22545&amp;r1=22544&amp;r2=22545&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/double_rotor/sample_scripts/noe.py?rev=22545&amp;r1=22544&amp;r2=22545&amp;view=diff</a>
==============================================================================
--- branches/double_rotor/sample_scripts/noe.py (original)
+++ branches/double_rotor/sample_scripts/noe.py Wed Mar 26 18:39:06 2014
@@ -1,6 +1,6 @@
 
###############################################################################
 #                                                                            
 #
-# Copyright (C) 2004-2013 Edward d'Auvergne                                  
 #
+# Copyright (C) 2004-2014 Edward d'Auvergne                                  
 #
 #                                                                            
 #
 # This file is part of the program relax (<a  rel="nofollow" href="http://www.nmr-relax.com">http://www.nmr-relax.com</a>).         
 #
 #                                                                            
 #
@@ -59,13 +59,11 @@
 value.write(param='noe', file='noe.out', force=True)
 
 # Create grace files.
-grace.write(y_data_type='ref', file='ref.agr', force=True)
-grace.write(y_data_type='sat', file='sat.agr', force=True)
+grace.write(y_data_type='intensities', file='intensities.agr', force=True)
 grace.write(y_data_type='noe', file='noe.agr', force=True)
 
 # View the grace files.
-grace.view(file='ref.agr')
-grace.view(file='sat.agr')
+grace.view(file='intensities.agr')
 grace.view(file='noe.agr')
 
 # Write the results.

Modified: branches/double_rotor/test_suite/system_tests/noe.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/double_rotor/test_suite/system_tests/noe.py?rev=22545&amp;r1=22544&amp;r2=22545&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/double_rotor/test_suite/system_tests/noe.py?rev=22545&amp;r1=22544&amp;r2=22545&amp;view=diff</a>
==============================================================================
--- branches/double_rotor/test_suite/system_tests/noe.py        (original)
+++ branches/double_rotor/test_suite/system_tests/noe.py        Wed Mar 26 
18:39:06 2014
@@ -171,7 +171,64 @@
             i += 1
 
         # The real Grace file data.
-        data = [[], [], [
+        data = [[
+            '@version 50121\n',
+            '@page size 842, 595\n',
+            '@with g0\n',
+            '@    view 0.15, 0.15, 1.28, 0.85\n',
+            '@    xaxis  label &quot;Residue number&quot;\n',
+            '@    xaxis  label char size 1.00\n',
+            '@    xaxis  tick major size 0.50\n',
+            '@    xaxis  tick major linewidth 0.5\n',
+            '@    xaxis  tick minor linewidth 0.5\n',
+            '@    xaxis  tick minor size 0.25\n',
+            '@    xaxis  ticklabel char size 0.70\n',
+            '@    yaxis  label &quot;Peak intensity&quot;\n',
+            '@    yaxis  label char size 1.00\n',
+            '@    yaxis  tick major size 0.50\n',
+            '@    yaxis  tick major linewidth 0.5\n',
+            '@    yaxis  tick minor linewidth 0.5\n',
+            '@    yaxis  tick minor size 0.25\n',
+            '@    yaxis  ticklabel char size 0.70\n',
+            '@    legend off\n',
+            '@    legend box fill pattern 1\n',
+            '@    legend char size 1.0\n',
+            '@    frame linewidth 0.5\n',
+            '@    s0 symbol 1\n',
+            '@    s0 symbol size 0.45\n',
+            '@    s0 symbol linewidth 0.5\n',
+            '@    s0 errorbar size 0.5\n',
+            '@    s0 errorbar linewidth 0.5\n',
+            '@    s0 errorbar riser linewidth 0.5\n',
+            '@    s0 legend &quot;ref_ave&quot;\n',
+            '@    s1 symbol 2\n',
+            '@    s1 symbol size 0.45\n',
+            '@    s1 symbol linewidth 0.5\n',
+            '@    s1 errorbar size 0.5\n',
+            '@    s1 errorbar linewidth 0.5\n',
+            '@    s1 errorbar riser linewidth 0.5\n',
+            '@    s1 legend &quot;sat_ave&quot;\n',
+            '@target G0.S0\n',
+            '@type xy\n',
+            '4                              148614.000000000000000        
\n',
+            '5                              166842.000000000000000        
\n',
+            '6                              128690.000000000000000        
\n',
+            '40                             99566.000000000000000         
\n',
+            '40                             270047.000000000000000        
\n',
+            '55                             130959.000000000000000        
\n',
+            '&amp;\n',
+            '@target G0.S1\n',
+            '@type xy\n',
+            '4                              5050.000000000000000          
\n',
+            '5                              51643.000000000000000         
\n',
+            '6                              53663.000000000000000         
\n',
+            '40                             -65111.000000000000000        
\n',
+            '40                             -181131.000000000000000       
\n',
+            '55                             -105322.000000000000000       
\n',
+            '&amp;\n',
+            '@with g0\n',
+            '@autoscale\n'
+        ], [
             '@version 50121\n',
             '@page size 842, 595\n',
             '@with g0\n',
@@ -225,7 +282,7 @@
         ]]
 
         # Check the Grace files.
-        ids = ['ref', 'sat', 'noe']
+        ids = ['intensities', 'noe']
         for i in range(len(ids)):
             # The file name.
             file_name = &quot;%s.agr&quot; % ids[i]

Modified: branches/double_rotor/test_suite/system_tests/scripts/noe/noe.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/double_rotor/test_suite/system_tests/scripts/noe/noe.py?rev=22545&amp;r1=22544&amp;r2=22545&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/double_rotor/test_suite/system_tests/scripts/noe/noe.py?rev=22545&amp;r1=22544&amp;r2=22545&amp;view=diff</a>
==============================================================================
--- branches/double_rotor/test_suite/system_tests/scripts/noe/noe.py    
(original)
+++ branches/double_rotor/test_suite/system_tests/scripts/noe/noe.py    Wed 
Mar 26 18:39:06 2014
@@ -47,8 +47,7 @@
 value.write(param='noe', file='devnull', force=True)
 
 # Create grace files.
-grace.write(y_data_type='ref', file='ref.agr', dir=ds.tmpdir, force=True)
-grace.write(y_data_type='sat', file='sat.agr', dir=ds.tmpdir, force=True)
+grace.write(y_data_type='intensities', file='intensities.agr', 
dir=ds.tmpdir, force=True)
 grace.write(y_data_type='noe', file='noe.agr', dir=ds.tmpdir, force=True)
 
 # Write the results.



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer">You are on the <a href="http://gna.org">Gna!</a> mail server.</div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Wed Mar 26 19:00:03 2014</div>  
</body>
</html>
