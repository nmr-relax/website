<!-- MHonArc v2.6.18 -->
<!--X-Subject: RE: [sr #3195] Fitting of saturation recovery experiment -->
<!--X-From-R13: "Pbrfmbrezralv, Oaqenf" &#60;Oaqenf_PbrfmbrezralvNuzf.uneineq.rqh> -->
<!--X-Date: Fri, 28 Nov 2014 15:51:20 +0100 -->
<!--X-Message-Id: 7C03ECAFB770DE43A2478DF9AF4819DFF69FE3096F@ITCCRMAIL02.MED.HARVARD.EDU -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 20141126&#45;155950.sv21648.57143@gna.org -->
<!--X-Reference: CAED9pY8hu1d93x2M_rVy_cCAB6ktW_OJDrEJ8Ecy4+U8t0ZHWA@mail.gmail.com -->
<!--X-Reference: 7C03ECAFB770DE43A2478DF9AF4819DFF69FE3096A@ITCCRMAIL02.MED.HARVARD.EDU -->
<!--X-Reference: CAED9pY_F0ByOgbRKQ9U0kYvXZyVgCXaupm=+7_qgMjh=N+oPYQ@mail.gmail.com -->
<!--X-Reference: 7C03ECAFB770DE43A2478DF9AF4819DFF69FE3096B@ITCCRMAIL02.MED.HARVARD.EDU -->
<!--X-Reference: CAED9pY95USXsU7P42EhwNvRBnJFsREnHYFqc_iRgZJwhQBEP9A@mail.gmail.com -->
<!--X-Reference: 7C03ECAFB770DE43A2478DF9AF4819DFF69FE3096C@ITCCRMAIL02.MED.HARVARD.EDU -->
<!--X-Reference: CAED9pY_BbAnZqUCFXvpmVj5otuVf8darpY&#45;qtd8ciXZqAh_WMQ@mail.gmail.com -->
<!--X-Reference: CAED9pY_apGp+hNDuXrKMxpEN3qPCF6DgGD++cbP6RhNQkhdqqg@mail.gmail.com -->
<!--X-Reference: 7C03ECAFB770DE43A2478DF9AF4819DFF69FE3096D@ITCCRMAIL02.MED.HARVARD.EDU -->
<!--X-Reference: CAED9pY&#45;g2q1NthDBu=SMGGqnua7tU&#45;E3L6X2H2FUSf=&#45;FWsASg@mail.gmail.com -->
<!--X-Reference: 7C03ECAFB770DE43A2478DF9AF4819DFF69FE3096E@ITCCRMAIL02.MED.HARVARD.EDU -->
<!--X-Reference: CAED9pY_s8=P=5vci99V3Na9&#45;Uk0AAMbZ7GxGfvxv1NuVZ302tg@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>RE: [sr #3195] Fitting of saturation recovery experiment -- November 28, 2014 - 15:51</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />RE: [sr #3195] Fitting of saturation recovery experiment</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00083" class="tabs">Index by Date</a> | <a href="threads.html#00083" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00082.html">Date Prev</a>] [<a href="msg00084.html">Date Next</a>] [<a href="msg00082.html">Thread Prev</a>] [<a href="msg00084.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Fri, 28 Nov 2014 09:47:20 -0500</li>
<li class="menuitem">
<em>Accept-language</em>: en-US</li>
<li class="menuitem">
<em>Acceptlanguage</em>: en-US</li>
<li class="menuitem">
<em>Cc</em>: Sébastien M &lt;sebastien@xxxxxxxxxxxxx&gt;, &quot;relax-devel@xxxxxxx&quot; &lt;relax-devel@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00083.html">7C03ECAFB770DE43A2478DF9AF4819DFF69FE3096F@ITCCRMAIL02.MED.HARVARD.EDU</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;<a href="msg00030.html">20141126-155950.sv21648.57143@gna.org</a>&gt; &lt;<a href="msg00039.html">CAED9pY8hu1d93x2M_rVy_cCAB6ktW_OJDrEJ8Ecy4+U8t0ZHWA@mail.gmail.com</a>&gt; &lt;<a href="msg00041.html">7C03ECAFB770DE43A2478DF9AF4819DFF69FE3096A@ITCCRMAIL02.MED.HARVARD.EDU</a>&gt; &lt;CAED9pY_F0ByOgbRKQ9U0kYvXZyVgCXaupm=+7_qgMjh=N+oPYQ@mail.gmail.com&gt; &lt;<a href="msg00062.html">7C03ECAFB770DE43A2478DF9AF4819DFF69FE3096B@ITCCRMAIL02.MED.HARVARD.EDU</a>&gt; &lt;<a href="msg00063.html">CAED9pY95USXsU7P42EhwNvRBnJFsREnHYFqc_iRgZJwhQBEP9A@mail.gmail.com</a>&gt; &lt;<a href="msg00069.html">7C03ECAFB770DE43A2478DF9AF4819DFF69FE3096C@ITCCRMAIL02.MED.HARVARD.EDU</a>&gt; &lt;<a href="msg00071.html">CAED9pY_BbAnZqUCFXvpmVj5otuVf8darpY-qtd8ciXZqAh_WMQ@mail.gmail.com</a>&gt; &lt;<a href="msg00072.html">CAED9pY_apGp+hNDuXrKMxpEN3qPCF6DgGD++cbP6RhNQkhdqqg@mail.gmail.com</a>&gt; &lt;<a href="msg00079.html">7C03ECAFB770DE43A2478DF9AF4819DFF69FE3096D@ITCCRMAIL02.MED.HARVARD.EDU</a>&gt; &lt;CAED9pY-g2q1NthDBu=SMGGqnua7tU-E3L6X2H2FUSf=-FWsASg@mail.gmail.com&gt; &lt;<a href="msg00081.html">7C03ECAFB770DE43A2478DF9AF4819DFF69FE3096E@ITCCRMAIL02.MED.HARVARD.EDU</a>&gt;, &lt;CAED9pY_s8=P=5vci99V3Na9-Uk0AAMbZ7GxGfvxv1NuVZ302tg@mail.gmail.com&gt;</li>
<li class="menuitem">
<em>Thread-index</em>: AdALGdFgu/WsBBsnSfWCpc0/X3+WIgAAGT+W</li>
<li class="menuitem">
<em>Thread-topic</em>: [sr #3195] Fitting of saturation recovery experiment</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Boeszoermenyi, Andras</strong> on November 28, 2014 - 15:51:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Well I installed the relax-trunk version, but I am not sure if that is what I 
am running.

When I type relax -i

I get this header:

relax 3.1.7

                              Molecular dynamics by NMR data analysis

                             Copyright (C) 2001-2006 Edward d'Auvergne
                         Copyright (C) 2006-2014 the relax development team

This is free software which you are welcome to modify and redistribute under 
the conditions of the
GNU General Public License (GPL).  This program, including all modules, is 
licensed under the GPL
and comes with absolutely no warranty.  For details type 'GPL' within the 
relax prompt.

Assistance in using the relax prompt and scripting interface can be accessed 
by typing 'help' within
the prompt.

Processor fabric:  Uni-processor.

Best,
Andras

________________________________________
From: edward.dauvergne@xxxxxxxxx [edward.dauvergne@xxxxxxxxx] On Behalf Of 
Edward d'Auvergne [edward@xxxxxxxxxxxxx]
Sent: Friday, November 28, 2014 9:44 AM
To: Boeszoermenyi, Andras
Cc: relax-devel@xxxxxxx; Sébastien M
Subject: Re: [sr #3195] Fitting of saturation recovery experiment

Hi,

What do you see when you run:

$ relax -i

Are you using the latest relax trunk version?  Or the 3.3.3 version?
I only see this on versions 3.2.3 or earlier, in relax 3.3.0 and later
this works.

Regards,

Edward



On 28 November 2014 at 15:40, Boeszoermenyi, Andras
&lt;Andras_Boeszoermenyi@xxxxxxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">That's exactly what I see.

But you seem to be getting that error too, or am I mixing something up now?

Best,
Andras
________________________________________
From: edward.dauvergne@xxxxxxxxx [edward.dauvergne@xxxxxxxxx] On Behalf Of 
Edward d'Auvergne [edward@xxxxxxxxxxxxx]
Sent: Friday, November 28, 2014 9:34 AM
To: Boeszoermenyi, Andras
Cc: relax-devel@xxxxxxx; Sébastien M
Subject: Re: [sr #3195] Fitting of saturation recovery experiment

Hi Andras,

That message is what happens when you execute the minimise.grid_search
user function on an old relax version.  Could you check if you are
running the latest:

$ relax -i

This is what I see with the last 3.1 relax release:

&quot;&quot;&quot;
                                            relax 3.1.7

                              Molecular dynamics by NMR data analysis

                             Copyright (C) 2001-2006 Edward d'Auvergne
                         Copyright (C) 2006-2014 the relax development team

This is free software which you are welcome to modify and redistribute
under the conditions of the
GNU General Public License (GPL).  This program, including all
modules, is licensed under the GPL
and comes with absolutely no warranty.  For details type 'GPL' within
the relax prompt.

Assistance in using the relax prompt and scripting interface can be
accessed by typing 'help' within
the prompt.

Processor fabric:  Uni-processor.

relax&gt; minimise.grid_search()
Traceback (most recent call last):
  File &quot;&lt;console&gt;&quot;, line 1, in &lt;module&gt;
AttributeError: 'Uf_object' object has no attribute 'grid_search'
&quot;&quot;&quot;

Regards,

Edward




On 28 November 2014 at 15:18, Boeszoermenyi, Andras
&lt;Andras_Boeszoermenyi@xxxxxxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi Edward,

I upgraded everything to newest.

I tried to updated the script too, but when I run it I get this error 
message:

File &quot;/sw/lib/relax-py27/multi/processor.py&quot;, line 494, in run
    self.callback.init_master(self)
  File &quot;/sw/lib/relax-py27/multi/__init__.py&quot;, line 318, in 
default_init_master
    self.master.run()
  File &quot;/sw/lib/relax-py27/relax.py&quot;, line 194, in run
    self.interpreter.run(self.script_file)
  File &quot;/sw/lib/relax-py27/prompt/interpreter.py&quot;, line 275, in run
    return run_script(intro=self.__intro_string, local=locals(), 
script_file=script_file, show_script=self.__show_script, 
raise_relax_error=self.__raise_relax_error)
  File &quot;/sw/lib/relax-py27/prompt/interpreter.py&quot;, line 578, in run_script
    return console.interact(intro, local, script_file, 
show_script=show_script, raise_relax_error=raise_relax_error)
  File &quot;/sw/lib/relax-py27/prompt/interpreter.py&quot;, line 477, in 
interact_script
    exec_script(script_file, local)
  File &quot;/sw/lib/relax-py27/prompt/interpreter.py&quot;, line 352, in exec_script
    runpy.run_module(module, globals)
  File &quot;/sw/lib/python2.7/runpy.py&quot;, line 180, in run_module
    fname, loader, pkg_name)
  File &quot;/sw/lib/python2.7/runpy.py&quot;, line 72, in _run_code
    exec code in run_globals
  File 
&quot;/Users/andrasboeszoermenyi/relax-trunk/test_suite/shared_data/curve_fitting/saturation_recovery/relax_sym.py&quot;,
 line 106, in &lt;module&gt;
    minimise.grid_search(inc=11)
AttributeError: 'Uf_object' object has no attribute 'grid_search'

Not sure if that could be related to my recent upgrade to Yosemite, but I 
think it shouldn't.

I uploaded the project as:

file #22996:  saturation_recovery.tar.gz

Best,
Andras

________________________________________
From: edward.dauvergne@xxxxxxxxx [edward.dauvergne@xxxxxxxxx] On Behalf Of 
Edward d'Auvergne [edward@xxxxxxxxxxxxx]
Sent: Thursday, November 27, 2014 1:16 PM
To: Boeszoermenyi, Andras
Cc: relax-devel@xxxxxxx; Sébastien M
Subject: Re: [sr #3195] Fitting of saturation recovery experiment

Hi Andras,

I have now included your files in relax
(<a  rel="nofollow" href="http://article.gmane.org/gmane.science.nmr.relax.scm/24542">http://article.gmane.org/gmane.science.nmr.relax.scm/24542</a>).  If you
have the trunk source code copy of relax and type:

$ svn up

You will see the files appear in the
test_suite/shared_data/curve_fitting/saturation_recovery directory.
If you could update your script for the latest relax version, I could
add it to the test_suite/system_tests/scripts/ directory.  This would
then be very simple to set up as a system test by duplicating and
modifying this test:

<a  rel="nofollow" href="http://www.nmr-relax.com/api/3.3/test_suite.system_tests.relax_fit-pysrc.html#Relax_fit.test_zooming_grid_search">http://www.nmr-relax.com/api/3.3/test_suite.system_tests.relax_fit-pysrc.html#Relax_fit.test_zooming_grid_search</a>

Cheers,

Edward


On 27 November 2014 at 19:06, Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt; 
wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi Andras,


</pre><blockquote class="blockquote"><pre style="margin: 0em;">ok I uploaded a tar file with synthetic peaks for one spin system:

file #22989
</pre></blockquote><pre style="margin: 0em;">

Cheers!  The permanent link to the file is
<a  rel="nofollow" href="http://gna.org/task/download.php?file_id=22989">http://gna.org/task/download.php?file_id=22989</a>, and this is attached
to the task #7415 (<a  rel="nofollow" href="http://gna.org/task/?7415">http://gna.org/task/?7415</a>).


</pre><blockquote class="blockquote"><pre style="margin: 0em;">The saturation recovery formula is:

 I0*(1 - exp(−R1*t))

The parameters I used were

I0 = 1000000000000000.00

and

R1 = 0.5
</pre></blockquote><pre style="margin: 0em;">

I'm wondering if this equation is correct.  Should this not be:

I(t) = I_inf*(1 - exp(−R1*t))

Is the magnitisation not returning to the steady-state of I_inf?  I
guess that in this experiment I0 == I_inf.


</pre><blockquote class="blockquote"><pre style="margin: 0em;">Obviously, the same numbers also work for the inversion recovery 
experiment:

I(t) = I∞ − I0*exp(−R1*t)

with I∞ set to 1000000000000000.00 as well. Not sure how much that helps 
though.
</pre></blockquote><pre style="margin: 0em;">

If I0 is set to something less than I_inf, this would give different
I(t) values.  Such a data set could be used to implement the inversion
recovery experiment.


</pre><blockquote class="blockquote"><pre style="margin: 0em;">If &quot;inv&quot; is not implemented, then that would explain the weird results :)
</pre></blockquote><pre style="margin: 0em;">

More of a warning is probably required.  Or a synthetic data set,
relax script, and system test created, and then this equation finally
implemented.


</pre><blockquote class="blockquote"><pre style="margin: 0em;">Unfortunately, I have no primary reference for the saturation recovery 
experiment either.
</pre></blockquote><pre style="margin: 0em;">

It's a pity.  The ancient primary references for all these basic and
old experiment types would be great for adding to the relax manual and
user function documentation.  I can see that lots of people discuss
this older method, but I also don't see any references.

I was wondering if you were able to update to the latest version of
relax (3.3.3 at <a  rel="nofollow" href="http://www.nmr-relax.com/download.html#Mac_OS_X">http://www.nmr-relax.com/download.html#Mac_OS_X</a>), or
even better to use the relax trunk source code
(<a  rel="nofollow" href="http://thread.gmane.org/gmane.science.nmr.relax.devel/3693/focus=7348">http://thread.gmane.org/gmane.science.nmr.relax.devel/3693/focus=7348</a>).
Could you try to update the scripts to run with these versions?  The
newest relax versions will tell you how the user functions have been
renamed.

Cheers,

Edward</pre></blockquote></blockquote></blockquote>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00084" href="msg00084.html">Re: [sr #3195] Fitting of saturation recovery experiment</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00030" href="msg00030.html">[sr #3195] Fitting of saturation recovery experiment</a></strong>
<ul><li><em>From:</em> Andras Boeszoermenyi</li></ul></li>
<li><strong><a name="00039" href="msg00039.html">Re: [sr #3195] Fitting of saturation recovery experiment</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00041" href="msg00041.html">RE: [sr #3195] Fitting of saturation recovery experiment</a></strong>
<ul><li><em>From:</em> Boeszoermenyi, Andras</li></ul></li>
<li><strong><a name="00042" href="msg00042.html">Re: [sr #3195] Fitting of saturation recovery experiment</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00062" href="msg00062.html">RE: [sr #3195] Fitting of saturation recovery experiment</a></strong>
<ul><li><em>From:</em> Boeszoermenyi, Andras</li></ul></li>
<li><strong><a name="00063" href="msg00063.html">Re: [sr #3195] Fitting of saturation recovery experiment</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00069" href="msg00069.html">RE: [sr #3195] Fitting of saturation recovery experiment</a></strong>
<ul><li><em>From:</em> Boeszoermenyi, Andras</li></ul></li>
<li><strong><a name="00071" href="msg00071.html">Re: [sr #3195] Fitting of saturation recovery experiment</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00072" href="msg00072.html">Re: [sr #3195] Fitting of saturation recovery experiment</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00079" href="msg00079.html">RE: [sr #3195] Fitting of saturation recovery experiment</a></strong>
<ul><li><em>From:</em> Boeszoermenyi, Andras</li></ul></li>
<li><strong><a name="00080" href="msg00080.html">Re: [sr #3195] Fitting of saturation recovery experiment</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00081" href="msg00081.html">RE: [sr #3195] Fitting of saturation recovery experiment</a></strong>
<ul><li><em>From:</em> Boeszoermenyi, Andras</li></ul></li>
<li><strong><a name="00082" href="msg00082.html">Re: [sr #3195] Fitting of saturation recovery experiment</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Fri Nov 28 16:00:14 2014</div>  
</body>
</html>
