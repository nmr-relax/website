<!-- MHonArc v2.6.16 -->
<!--X-Subject: r5249 &#45; in /branches/consistency_tests_1.3: ./ generic_fns/	specific_fns/ test_suite/unit_tests/ -->
<!--X-From-R13: fronfgvra.zbeva.1Nhyniny.pn -->
<!--X-Date: Thu, 03 Apr 2008 04:18:47 +0200 -->
<!--X-Message-Id: E1JhF2M&#45;0005Pv&#45;Va@subversion.gna.org -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>r5249 - in /branches/consistency_tests_1.3: ./ generic_fns/	specific_fns/ test_suite/unit_tests/ -- April 03, 2008 - 04:18</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />r5249 - in /branches/consistency_tests_1.3: ./ generic_fns/	specific_fns/ test_suite/unit_tests/</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00007" class="tabs">Index by Date</a> | <a href="threads.html#00007" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00006.html">Date Prev</a>] [<a href="msg00008.html">Date Next</a>] [<a href="msg00006.html">Thread Prev</a>] [<a href="msg00008.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: relax-commits@xxxxxxx</li>
<li class="menuitem">
<em>Date</em>: Thu, 03 Apr 2008 02:18:46 -0000</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00007.html">E1JhF2M-0005Pv-Va@subversion.gna.org</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>sebastien . morin . 1</strong> on April 03, 2008 - 04:18:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Author: semor
Date: Thu Apr  3 04:18:35 2008
New Revision: 5249

URL: <a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax?rev=5249&amp;view=rev">http://svn.gna.org/viewcvs/relax?rev=5249&amp;view=rev</a>
Log:
Merged revisions 5236,5238,5240,5247 via svnmerge from 
svn+ssh://semor@xxxxxxxxxxx/svn/relax/1.3

........
  r5236 | bugman | 2008-03-27 06:32:40 -0400 (Thu, 27 Mar 2008) | 9 lines
  
  Fix for bug #11378 (<a  rel="nofollow" href="https://web.archive.org/web/https://gna.org/bugs/?11378">https://gna.org/bugs/?11378</a>).
  
  This bug was reported by Ryan Hoffman (<a  rel="nofollow" href="https://gna.org/users/rydog">https://gna.org/users/rydog</a>).
  
  The fix for the 1.3 line is very different to that for the 1.2 line.  These 
functions have changed
  significantly, and the pdb() user function doesn't exist any more!  The 
concept is similar though.
  The xh_vect variable is now set to None rather than being non-existant, and 
the spin is deselected.
........
  r5238 | bugman | 2008-03-28 04:44:20 -0400 (Fri, 28 Mar 2008) | 5 lines
  
  Partially reverted r5236, the 'xh_vect' structure does not exist rather 
than being set to None.
  
  See the post by Seb at 
<a  rel="nofollow" href="/mail.gna.org/public/relax-devel/2008-03/msg00008.html">https://mail.gna.org/public/relax-devel/2008-03/msg00008.html</a>.
........
  r5240 | bugman | 2008-03-28 05:06:06 -0400 (Fri, 28 Mar 2008) | 7 lines
  
  Fix for bug #11383 (<a  rel="nofollow" href="https://web.archive.org/web/https://gna.org/bugs/?11383">https://gna.org/bugs/?11383</a>).
  
  This was reported by Ryan Hoffman (<a  rel="nofollow" href="https://gna.org/users/rydog">https://gna.org/users/rydog</a>).
  
  The relax_data.display() user function is now functional again.
........
  r5247 | semor | 2008-04-02 21:59:22 -0400 (Wed, 02 Apr 2008) | 3 lines
  
  Changes to the jw_mapping and model-free codes to reflect the model-free 
changes of r5220...
........

Modified:
    branches/consistency_tests_1.3/   (props changed)
    branches/consistency_tests_1.3/generic_fns/structure.py
    branches/consistency_tests_1.3/generic_fns/value.py
    branches/consistency_tests_1.3/specific_fns/relax_data.py
    branches/consistency_tests_1.3/test_suite/unit_tests/value_testing_base.py

Propchange: branches/consistency_tests_1.3/
------------------------------------------------------------------------------
--- svnmerge-integrated (original)
+++ svnmerge-integrated Thu Apr  3 04:18:35 2008
@@ -1,1 +1,1 @@
-/1.3:1-3320,3333-4175,4223,4241-4335,4338-4433,4440-4461,4473,4476-4493,4523-4551,4567-4577,4579,4585-4586,4618-4623,4659,4662-4693,4698-4759,4778-4792,4796-4839,4841-4850,4854-4888,4898-5047,5056-5115,5117-5233
+/1.3:1-3320,3333-4175,4223,4241-4335,4338-4433,4440-4461,4473,4476-4493,4523-4551,4567-4577,4579,4585-4586,4618-4623,4659,4662-4693,4698-4759,4778-4792,4796-4839,4841-4850,4854-4888,4898-5047,5056-5115,5117-5233,5236-5247

Modified: branches/consistency_tests_1.3/generic_fns/structure.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/consistency_tests_1.3/generic_fns/structure.py?rev=5249&amp;r1=5248&amp;r2=5249&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/consistency_tests_1.3/generic_fns/structure.py?rev=5249&amp;r1=5248&amp;r2=5249&amp;view=diff</a>
==============================================================================
--- branches/consistency_tests_1.3/generic_fns/structure.py (original)
+++ branches/consistency_tests_1.3/generic_fns/structure.py Thu Apr  3 
04:18:35 2008
@@ -1224,9 +1224,11 @@
         # Calculate the vector.
         vector = xh_vector(spin)
 
-        # Set the vector.
+        # Set the vector and deselect the spin if the vector doesn't exist.
         if vector != None:
-            spin.xh_vect = vector
+            spin.xh_vect = vector    
+        else:
+            spin.select = False
 
 
 def uniform_vect_dist_spherical_angles(inc=20):

Modified: branches/consistency_tests_1.3/generic_fns/value.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/consistency_tests_1.3/generic_fns/value.py?rev=5249&amp;r1=5248&amp;r2=5249&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/consistency_tests_1.3/generic_fns/value.py?rev=5249&amp;r1=5248&amp;r2=5249&amp;view=diff</a>
==============================================================================
--- branches/consistency_tests_1.3/generic_fns/value.py (original)
+++ branches/consistency_tests_1.3/generic_fns/value.py Thu Apr  3 04:18:35 
2008
@@ -583,13 +583,13 @@
         file.close()
 
 
-    def write_data(self, file, return_value=None):
+    def write_data(self, run=None, param=None, file=None, return_value=None):
         &quot;&quot;&quot;Function for writing data.&quot;&quot;&quot;
 
         # Get the value and error returning function if required.
         if not return_value:
             # Function type.
-            self.function_type = 
relax_data_store.run_types[relax_data_store.run_names.index(self.run)]
+            self.function_type = 
relax_data_store.run_types[relax_data_store.run_names.index(run)]
 
             # Specific value and error returning function.
             return_value = self.relax.specific_setup.setup('return_value', 
self.function_type)
@@ -598,12 +598,12 @@
         file.write(&quot;%-5s%-6s%-30s%-30s\n&quot; % ('Num', 'Name', 'Value', 
'Error'))
 
         # Loop over the sequence.
-        for i in xrange(len(relax_data_store.res[self.run])):
-            # Remap the data structure 'relax_data_store.res[self.run][i]'.
-            data = relax_data_store.res[self.run][i]
+        for i in xrange(len(relax_data_store.res[run])):
+            # Remap the data structure 'relax_data_store.res[run][i]'.
+            data = relax_data_store.res[run][i]
 
             # Get the value and error.
-            value, error = return_value(self.run, i, self.param)
+            value, error = return_value(run, i, param)
 
             # Write the data.
             file.write(&quot;%-5i%-6s%-30s%-30s\n&quot; % (data.num, data.name, 
`value`, `error`))

Modified: branches/consistency_tests_1.3/specific_fns/relax_data.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/consistency_tests_1.3/specific_fns/relax_data.py?rev=5249&amp;r1=5248&amp;r2=5249&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/consistency_tests_1.3/specific_fns/relax_data.py?rev=5249&amp;r1=5248&amp;r2=5249&amp;view=diff</a>
==============================================================================
--- branches/consistency_tests_1.3/specific_fns/relax_data.py (original)
+++ branches/consistency_tests_1.3/specific_fns/relax_data.py Thu Apr  3 
04:18:35 2008
@@ -477,7 +477,7 @@
             raise RelaxNoRiError, (self.ri_label, self.frq_label)
 
         # Print the data.
-        self.relax.generic.value.write_data(self.run, (self.ri_label, 
self.frq_label), sys.stdout, return_value=self.return_value)
+        self.relax.generic.value.write_data(run=self.run, 
param=(self.ri_label, self.frq_label), file=sys.stdout, 
return_value=self.return_value)
 
 
     def find_index(self, data, ri_label, frq_label):

Modified: 
branches/consistency_tests_1.3/test_suite/unit_tests/value_testing_base.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/consistency_tests_1.3/test_suite/unit_tests/value_testing_base.py?rev=5249&amp;r1=5248&amp;r2=5249&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/consistency_tests_1.3/test_suite/unit_tests/value_testing_base.py?rev=5249&amp;r1=5248&amp;r2=5249&amp;view=diff</a>
==============================================================================
--- 
branches/consistency_tests_1.3/test_suite/unit_tests/value_testing_base.py 
(original)
+++ 
branches/consistency_tests_1.3/test_suite/unit_tests/value_testing_base.py 
Thu Apr  3 04:18:35 2008
@@ -3116,7 +3116,7 @@
         self.assertEqual(cdp.mol[0].res[1].spin[0].csa, -160e-6)
 
 
-    def test_set_jw_all_spins_nucleus(self):
+    def test_set_jw_all_spins_heteronucleus(self):
         &quot;&quot;&quot;Set the RSDM heteronucleus type for all spins.
 
         The functions tested are both generic_fns.value.set() and 
prompt.value.set().
@@ -3272,7 +3272,7 @@
         self.assertAlmostEqual(cdp.mol[0].res[1].spin[0].csa, -172e-6)
 
 
-    def test_set_jw_defaults_nucleus(self):
+    def test_set_jw_defaults_heteronucleus(self):
         &quot;&quot;&quot;Set the RSDM heteronucleus type to the default value.
 
         The functions tested are both generic_fns.value.set() and 
prompt.value.set().
@@ -3408,7 +3408,7 @@
         self.assertEqual(cdp.mol[0].res[1].spin[0].csa, -160e-6)
 
 
-    def test_set_jw_single_spin_nucleus(self):
+    def test_set_jw_single_spin_heteronucleus(self):
         &quot;&quot;&quot;Set the RSDM heteronucleus type for a single spin.
 
         The functions tested are both generic_fns.value.set() and 
prompt.value.set().
@@ -3682,7 +3682,7 @@
         self.assertEqual(cdp.mol[0].res[1].spin[0].csa, -172e-6)
 
 
-    def test_set_mf_all_spins_nucleus(self):
+    def test_set_mf_all_spins_heteronucleus(self):
         &quot;&quot;&quot;Set the model-free heteronucleus type for all spins.
 
         The functions tested are both generic_fns.value.set() and 
prompt.value.set().
@@ -3946,7 +3946,7 @@
         self.assertEqual(cdp.mol[0].res[1].spin[0].csa, -172 * 1e-6)
 
 
-    def test_set_mf_defaults_nucleus(self):
+    def test_set_mf_defaults_heteronucleus(self):
         &quot;&quot;&quot;Set the model-free heteronucleus type to the default value.
 
         The functions tested are both generic_fns.value.set() and 
prompt.value.set().
@@ -4188,7 +4188,7 @@
         self.assertEqual(cdp.mol[0].res[1].spin[0].csa, -172e-6)
 
 
-    def test_set_mf_single_spin_nucleus(self):
+    def test_set_mf_single_spin_heteronucleus(self):
         &quot;&quot;&quot;Set the model-free heteronucleus type for a single spin.
 
         The functions tested are both generic_fns.value.set() and 
prompt.value.set().



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Thu Apr 03 04:40:24 2008</div>  
</body>
</html>
