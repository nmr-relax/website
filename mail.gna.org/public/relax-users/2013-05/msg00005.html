<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: Is it possible to analyse CPMG experiments with relax? -->
<!--X-From-R13: "Sqjneq q'Ohiretar" <rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Thu, 02 May 2013 18:21:33 +0200 -->
<!--X-Message-Id: CAED9pY9P40AVRYqLF53x9A4pZuT3DeJAYNCqVmwGSf6vJnbCtA@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: CA+CBx2OZQqMPa+0+KDKnBPOsVSo405KqnR=1B1_3CspRhOaOSA@mail.gmail.com -->
<!--X-Reference: CAED9pY&#45;YTDqPdDJQAVgr1&#45;oW5Zut5jsxg&#45;ZtNF0DnXJciY&#45;5xA@mail.gmail.com -->
<!--X-Reference: CA+CBx2NoQ3fVD339OYhX4C8NGY8v&#45;cB+O5V0q4GZgwBjcV0e4w@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: Is it possible to analyse CPMG experiments with relax? -- May 02, 2013 - 18:21</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: Is it possible to analyse CPMG experiments with relax?</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00005" class="tabs">Index by Date</a> | <a href="threads.html#00005" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00004.html">Date Prev</a>] [<a href="msg00006.html">Date Next</a>] [<a href="msg00003.html">Thread Prev</a>] [<a href="msg00001.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Thu, 2 May 2013 18:21:00 +0200</li>
<li class="menuitem">
<em>Cc</em>: &quot;relax-users@xxxxxxx&quot; &lt;relax-users@xxxxxxx&gt;,	Sébastien Morin &lt;sebastianomorino@xxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;	h=mime-version:x-received:sender:in-reply-to:references:date	:x-google-sender-auth:message-id:subject:from:to:cc:content-type;	bh=nP8XW12fXQ53RtARvc/3YlYYpj+tKlJDDqOCjrXD8/s=;	b=GmqN1k190ztTcCjAVDYpx5BFjCgB7YRrt8MOoLYjd3xfSCLp9Dz9VPlJTG9wm3VdrF	0Q0tia9coC+IA0rE9dAPZ4iNHUiR4QnvFqR+tSaLzbv4BWuv1iey6PTZnWZ95AWzsDC3	Va5lhmJGsmF9VmY3JUsINtxauSkTHqrYjSkctsd0WBEHWIGFqZxtN4epQ5RY0wdMSees	wkwhQWq6LAi+sXJcRXPsuM2h+YYIifd2JIxnDY94RS1O8YKkS7S3Kyj3rwR89BqRaSe7	+T7su4z8qeIlnCNJrZUbTtjrWQSi9ErYU20miZrRAnumEMPXQ3lRNUo8n1bZH7BEMM8X	zRaA==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00005.html">CAED9pY9P40AVRYqLF53x9A4pZuT3DeJAYNCqVmwGSf6vJnbCtA@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;CA+CBx2OZQqMPa+0+KDKnBPOsVSo405KqnR=1B1_3CspRhOaOSA@xxxxxxxxxxxxxx&gt;	&lt;CAED9pY-YTDqPdDJQAVgr1-oW5Zut5jsxg-ZtNF0DnXJciY-5xA@xxxxxxxxxxxxxx&gt;	&lt;CA+CBx2NoQ3fVD339OYhX4C8NGY8v-cB+O5V0q4GZgwBjcV0e4w@xxxxxxxxxxxxxx&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on May 02, 2013 - 18:21:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Hi,

Its great that you have an interest and know Python - you are in a
perfect position to join as a relax developer!  See below for more
responses:


</pre><blockquote class="blockquote"><pre style="margin: 0em;">Thank you for your generous email, which helped a-lot.
</pre></blockquote><pre style="margin: 0em;">

You're welcome!


</pre><blockquote class="blockquote"><pre style="margin: 0em;">I am happy to see the active development, and I would be more than happy to
join in.
I am &quot;quite&quot; good in python programming, and are confident i revision
programs as svn and git.
And I have courses in scientific computing, so I think i get along quite
good.
</pre></blockquote><pre style="margin: 0em;">

I would recommend you have a read of the relax open source
infrastructure chapter of the relax manual
(<a  rel="nofollow" href="/manual/Open_source_infrastructure.html">http://www.nmr-relax.com/manual/Open_source_infrastructure.html</a>) and,
more importantly, the development chapter of the relax manual
(<a  rel="nofollow" href="/manual/relax_development.html">http://www.nmr-relax.com/manual/relax_development.html</a>).  The PDF
version of the manual is much easier to read
(<a  rel="nofollow" href="http://download.gna.org/relax/manual/relax.pdf">http://download.gna.org/relax/manual/relax.pdf</a>).  These chapters
describe in full detail everything you would ever need as a relax
developer.  Note that relax is a very mature project, so learning how
to code in such an environment to avoid breaking the rest of the
program will give you quite a different skill set.

You might also be interested in learning about the minfx project that
relax uses for optimisation (<a  rel="nofollow" href="https://gna.org/projects/minfx/">https://gna.org/projects/minfx/</a>).  This
originated as a relax package as the scipy optimisers all contained
fatal bugs back in 2003 (I'm not sure they have been fixed as the
original developers were MIA even back then and I think have never
returned).  But it was spun out into its own software distribution.


</pre><blockquote class="blockquote"><pre style="margin: 0em;">My reason for my interest, is that I think I should change my working
habits, to something more effect full.

My work-flow at the moment, is this.

1) CPMG/T1-rho experiment acquisition with NLS, through VnmrJ.
</pre></blockquote><pre style="margin: 0em;">

I have to warn you here that non-linear sampling is notoriously bad
for measuring high precision NMR parameters such as relaxation data.
I would recommend avoiding this technique if you can.  It is great for
low precision data required for assignment, for example, but not so
good for the high precision data measurements.


</pre><blockquote class="blockquote"><pre style="margin: 0em;">2) Data reconstruction in qMDD.
(3) Main peak positioning in CcpNmr  Analysis.)
4) Small peak adjustment, control in SPARKY.
5) Point sum integration in with: seriesTab with: -dx 1 -dy 1
6) Integration analysis in gnuplot/IgorPro,Originlab.
The use of IgorPro,Originlab have been used because of easy use of the
global fitting routine, but pose a problem, since
we only have a very few licenses. And I weigh open-source very high. :-)
</pre></blockquote><pre style="margin: 0em;">

The way I perform this is a bit different in that I use peak heights
directly from Sparky.


</pre><blockquote class="blockquote"><pre style="margin: 0em;">The last weeks, I have fiddling around my workflow to try something like
this:
1) CPMG/T1-rho experiment acquisition with NLS, through VnmrJ.
2) Data reconstruction in qMDD.
(3) Main peak positioning in CcpNmr  Analysis.)
4) Small peak adjustment, control in SPARKY.
5) Point sum integration in nmrglue, and easy visualization of each
integration. Preparation of data for fitting.
6) Global fitting. Either with nessy, relax or with python scipy leastsq.

Here I tried to make a nessy database, but nessy came out very buggy.
And I was about to set out for some python scipy fitting after nmrglue.
</pre></blockquote><pre style="margin: 0em;">

I am currently the maintainer of the NESSY project, but the types of
bugs reported require significant amounts of coding to solve the
problems.  Unfortunately I don't have the time for this - it could be
a few months of work.  As for nmrglue
(<a  rel="nofollow" href="http://code.google.com/p/nmrglue/">http://code.google.com/p/nmrglue/</a>), this appears quite new and this
is the first time I have heard of it.  It looks like an interesting
project.  I wonder if they use 3-point quadratic integration for
determining the maximum peak height?


</pre><blockquote class="blockquote"><pre style="margin: 0em;">But I had a hard time imagining that NMR software were not already developed
for this,
and I was very pleased to see the development of relax, which have not come
to my attention before.
And especially the inclusion of the python interpreter, and possibility to
write scripts, is genius.
Which is similar to the where the power of pymol is shining through.
</pre></blockquote><pre style="margin: 0em;">

Thanks!  I am directing the development of relax to have the maximum
amount of flexibility.  For the basic users who want quick results,
there are the auto-analyses which can be used as blackboxes, giving
the user the best practice analysis.  These are used in the GUI.  For
the medium level users, the user functions (which are special Python
functions which perform a lot of checking of the user input) allow for
advanced scripting.  For the advanced users, the relax API can be used
to build complete new analyses (<a  rel="nofollow" href="/api/">http://www.nmr-relax.com/api/</a>).  I
have been developing relax so that in the future it can be used by NMR
users as a replacement for Matlab/Mathematica for numerical
operations.  The relax library - the 'lib' package - is a large
collection of NMR specific functions.  For example, have a look at the
rotation matrix module 'lib.geometry.rotations'
(<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/trunk/lib/geometry/rotations.py?view=markup">http://svn.gna.org/viewcvs/relax/trunk/lib/geometry/rotations.py?view=markup</a>).
 This can be used to convert between the different Euler angle
notations used in the field (there are 2602 different notations in
total for symmetric tensors).  I hope that through this library, the
power of PyMOL will be far exceeded.  I simply add to this library
whenever I need.  Note that this library is quite new but that the
code comes from all parts of relax and have been written by various
relax developers.

There is also the pipe_control package which manages the relax data
model and can handle many different types of NMR data, physical
parameters, etc.  This package is key for handling the flow of data
through the analyses and is already quite advanced in handling most
things users can throw at relax.  This used to be called the
'generic_fns' package, if you encounter this in the manual.

There has been a large rearrangement of code in relax recently and
this is in preparation for the release of relax 3.0.0.  So don't be
surprised if you cannot find the 'data', 'maths_fns', 'generic_fns',
and 'specific_fns' packages as these are now called 'data_store',
'target_functions', 'pipe_control', and 'specific_analyses'
respectively.  And a lot of code from those packages have been shifted
into the 'lib' package.


</pre><blockquote class="blockquote"><pre style="margin: 0em;">An optimal workflow would be this.
1) CPMG/T1-rho experiment acquisition with NLS, through VnmrJ.
2) Data reconstruction in qMDD.
(3) Main peak positioning in CcpNmr  Analysis.)
4) Small peak adjustment, control in SPARKY.
5) Point sum integration in nmrglue, and easy visualization of each
integration. Preparation of data for fitting.
6) nmrglue script preparation for relax, execution, save of result.
7) Graphical inspection of result through relax.

So, I think I will try out the current state of the relax-disp branch.
Are there any others developing on this branch?
</pre></blockquote><pre style="margin: 0em;">

I am currently the only one developing the branch.  Sebastian Morin is
no longer involved.  Note that the state currently appears quite
primitive as only the exponential curve-fitting currently works, but
that most of the key infrastructure is there.  I will soon, in the
next few days, create the code for the R2eff =
-1.0/time_T2*log(Intensity/averageZero) calculation for my own
purposes and well as the 2-site fast exchange model for R1rho.  These
will result in some large rearrangements and changes to the data
passed into the target function code of the
target_functions.relax_disp module.

I would recommend that for discussing development that we should use
the relax-devel at gna.org mailing list instead of the relax-users
mailing list.

Cheers,

Edward


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00000" href="msg00000.html">Re: Is it possible to analyse CPMG experiments with relax?</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00003" href="msg00003.html">Re: Is it possible to analyse CPMG experiments with relax?</a></strong>
<ul><li><em>From:</em> Troels Emtekær Linnet</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Thu May 02 19:00:05 2013</div>  
</body>
</html>
