<!-- MHonArc v2.6.16 -->
<!--X-Subject: r20510 &#45; /trunk/test_suite/system_tests/peak_lists.py -->
<!--X-From-R13: rqjneqNaze&#45;erynk.pbz -->
<!--X-Date: Fri, 02 Aug 2013 20:56:56 +0200 -->
<!--X-Message-Id: E1V5KX2&#45;0001WK&#45;JV@subversion.gna.org -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>r20510 - /trunk/test_suite/system_tests/peak_lists.py -- August 02, 2013 - 20:56</title>
<link rel="stylesheet" type="text/css" href="/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="https://gna.org/images/gna.theme/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />r20510 - /trunk/test_suite/system_tests/peak_lists.py</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00027" class="tabs">Index by Date</a> | <a href="threads.html#00027" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00026.html">Date Prev</a>] [<a href="msg00028.html">Date Next</a>] [<a href="msg00026.html">Thread Prev</a>] [<a href="msg00028.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: relax-commits@xxxxxxx</li>
<li class="menuitem">
<em>Date</em>: Fri, 02 Aug 2013 18:56:56 -0000</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00027.html">E1V5KX2-0001WK-JV@subversion.gna.org</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>edward</strong> on August 02, 2013 - 20:56:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Author: bugman
Date: Fri Aug  2 20:56:54 2013
New Revision: 20510

URL: <a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax?rev=20510&amp;view=rev">http://svn.gna.org/viewcvs/relax?rev=20510&amp;view=rev</a>
Log:
Added system test for reading of a multi column formatted NMRPipe seriesTab 
file.

Progress sr #3043: (<a  rel="nofollow" href="https://gna.org/support/index.php?3043">https://gna.org/support/index.php?3043</a>) - support for 
NMRPipe seriesTab format *.ser.

Generated the reference data in Excell, for the system test.
The spectrum ID's are auto generated by supplying the keyword 
spectrum_id='auto'.
The first few tests was matched against integers rather than floats. Adding 
'.0' to the end of each number.

Spaces added after the commas in the self.assertAlmostEqual() calls.
The 2to3 conversion program (for Python 2 to Python 3 conversion) highlights 
this issue.

Troels E. Linnet provided this patch. Commit by: tlinset _aaattt_ 
gmail_dot_com

Signed-off-by: Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt;

Modified:
    trunk/test_suite/system_tests/peak_lists.py

Modified: trunk/test_suite/system_tests/peak_lists.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/trunk/test_suite/system_tests/peak_lists.py?rev=20510&amp;r1=20509&amp;r2=20510&amp;view=diff">http://svn.gna.org/viewcvs/relax/trunk/test_suite/system_tests/peak_lists.py?rev=20510&amp;r1=20509&amp;r2=20510&amp;view=diff</a>
==============================================================================
--- trunk/test_suite/system_tests/peak_lists.py (original)
+++ trunk/test_suite/system_tests/peak_lists.py Fri Aug  2 20:56:54 2013
@@ -223,6 +223,77 @@
         self.assertEqual(cdp.mol[0].res[0].spin[0].intensities['test'], 
+1.851056e+06)
         self.assertEqual(cdp.mol[0].res[1].spin[0].intensities['test'], 
+3.224387e+05)
         self.assertEqual(cdp.mol[0].res[2].spin[0].intensities['test'], 
+1.479366e+06)
+
+
+    def test_read_peak_list_NMRPipe_seriesTab_multi(self):
+        &quot;&quot;&quot;Test the reading of an NMRPipe seriesTab peak list.&quot;&quot;&quot;
+
+        # Create the sequence data, and name the spins.
+        self.interpreter.residue.create(res_num = 2)
+        self.interpreter.spin.name(name='N', spin_id=':2')
+        self.interpreter.residue.create(res_num = 3)
+        self.interpreter.spin.name(name='N', spin_id=':3')
+        self.interpreter.residue.create(res_num = 4)
+        self.interpreter.spin.name(name='N', spin_id=':4')
+        self.interpreter.residue.create(res_num = 5)
+        self.interpreter.spin.name(name='N', spin_id=':5')
+        self.interpreter.residue.create(res_num = 6)
+        self.interpreter.spin.name(name='N', spin_id=':6')
+
+        # Read the peak list for heteronuc=N and proton=H.
+        
self.interpreter.spectrum.read_intensities(file=&quot;seriesTab_multi.ser&quot;, 
dir=status.install_path + 
sep+'test_suite'+sep+'shared_data'+sep+'peak_lists', spectrum_id='auto', 
int_method='point sum')
+
+        # Test the data.
+        
self.assertAlmostEqual(cdp.mol[0].res[0].spin[0].intensities['Z_A0'], 
1179448.0)
+        
self.assertAlmostEqual(cdp.mol[0].res[1].spin[0].intensities['Z_A0'], 
4407306.0)
+        
self.assertAlmostEqual(cdp.mol[0].res[2].spin[0].intensities['Z_A0'], 
3480382.0)
+        
self.assertAlmostEqual(cdp.mol[0].res[3].spin[0].intensities['Z_A0'], 
4306408.0)
+        
self.assertAlmostEqual(cdp.mol[0].res[4].spin[0].intensities['Z_A0'], 
3454030.0)
+        
self.assertAlmostEqual(cdp.mol[0].res[0].spin[0].intensities['Z_A1'], 
1411799.256)
+        
self.assertAlmostEqual(cdp.mol[0].res[1].spin[0].intensities['Z_A1'], 
5263645.5558)
+        
self.assertAlmostEqual(cdp.mol[0].res[2].spin[0].intensities['Z_A1'], 
4159404.5282)
+        
self.assertAlmostEqual(cdp.mol[0].res[3].spin[0].intensities['Z_A1'], 
5147018.8416)
+        
self.assertAlmostEqual(cdp.mol[0].res[4].spin[0].intensities['Z_A1'], 
4132401.492)
+        
self.assertAlmostEqual(cdp.mol[0].res[0].spin[0].intensities['Z_A2'], 
1411209.532)
+        
self.assertAlmostEqual(cdp.mol[0].res[1].spin[0].intensities['Z_A2'], 
5262764.0946)
+        
self.assertAlmostEqual(cdp.mol[0].res[2].spin[0].intensities['Z_A2'], 
4159404.5282)
+        
self.assertAlmostEqual(cdp.mol[0].res[3].spin[0].intensities['Z_A2'], 
5147018.8416)
+        
self.assertAlmostEqual(cdp.mol[0].res[4].spin[0].intensities['Z_A2'], 
4133092.298)
+        
self.assertAlmostEqual(cdp.mol[0].res[0].spin[0].intensities['Z_A3'], 
1408496.8016)
+        
self.assertAlmostEqual(cdp.mol[0].res[1].spin[0].intensities['Z_A3'], 
5264527.017)
+        
self.assertAlmostEqual(cdp.mol[0].res[2].spin[0].intensities['Z_A3'], 
4162536.872)
+        
self.assertAlmostEqual(cdp.mol[0].res[3].spin[0].intensities['Z_A3'], 
5146588.2008)
+        
self.assertAlmostEqual(cdp.mol[0].res[4].spin[0].intensities['Z_A3'], 
4134128.507)
+        
self.assertAlmostEqual(cdp.mol[0].res[0].spin[0].intensities['Z_A4'], 
1411327.4768)
+        
self.assertAlmostEqual(cdp.mol[0].res[1].spin[0].intensities['Z_A4'], 
5258797.5192)
+        
self.assertAlmostEqual(cdp.mol[0].res[2].spin[0].intensities['Z_A4'], 
4163232.9484)
+        
self.assertAlmostEqual(cdp.mol[0].res[3].spin[0].intensities['Z_A4'], 
5162952.5512)
+        
self.assertAlmostEqual(cdp.mol[0].res[4].spin[0].intensities['Z_A4'], 
4119966.984)
+        
self.assertAlmostEqual(cdp.mol[0].res[0].spin[0].intensities['Z_A5'], 
1414040.2072)
+        
self.assertAlmostEqual(cdp.mol[0].res[1].spin[0].intensities['Z_A5'], 
5275104.5514)
+        
self.assertAlmostEqual(cdp.mol[0].res[2].spin[0].intensities['Z_A5'], 
4150703.5732)
+        
self.assertAlmostEqual(cdp.mol[0].res[3].spin[0].intensities['Z_A5'], 
5151755.8904)
+        
self.assertAlmostEqual(cdp.mol[0].res[4].spin[0].intensities['Z_A5'], 
4128947.462)
+        
self.assertAlmostEqual(cdp.mol[0].res[0].spin[0].intensities['Z_A6'], 
1406727.6296)
+        
self.assertAlmostEqual(cdp.mol[0].res[1].spin[0].intensities['Z_A6'], 
5265849.2088)
+        
self.assertAlmostEqual(cdp.mol[0].res[2].spin[0].intensities['Z_A6'], 
4158360.4136)
+        
self.assertAlmostEqual(cdp.mol[0].res[3].spin[0].intensities['Z_A6'], 
5149172.0456)
+        
self.assertAlmostEqual(cdp.mol[0].res[4].spin[0].intensities['Z_A6'], 
4130674.477)
+        
self.assertAlmostEqual(cdp.mol[0].res[0].spin[0].intensities['Z_A7'], 
1415691.4344)
+        
self.assertAlmostEqual(cdp.mol[0].res[1].spin[0].intensities['Z_A7'], 
5267171.4006)
+        
self.assertAlmostEqual(cdp.mol[0].res[2].spin[0].intensities['Z_A7'], 
4144438.8856)
+        
self.assertAlmostEqual(cdp.mol[0].res[3].spin[0].intensities['Z_A7'], 
5137114.1032)
+        
self.assertAlmostEqual(cdp.mol[0].res[4].spin[0].intensities['Z_A7'], 
4127911.253)
+        
self.assertAlmostEqual(cdp.mol[0].res[0].spin[0].intensities['Z_A8'], 
1401184.224)
+        
self.assertAlmostEqual(cdp.mol[0].res[1].spin[0].intensities['Z_A8'], 
5264527.017)
+        
self.assertAlmostEqual(cdp.mol[0].res[2].spin[0].intensities['Z_A8'], 
4149659.4586)
+        
self.assertAlmostEqual(cdp.mol[0].res[3].spin[0].intensities['Z_A8'], 
5144004.356)
+        
self.assertAlmostEqual(cdp.mol[0].res[4].spin[0].intensities['Z_A8'], 
4133783.104)
+        
self.assertAlmostEqual(cdp.mol[0].res[0].spin[0].intensities['Z_A9'], 
1415573.4896)
+        
self.assertAlmostEqual(cdp.mol[0].res[1].spin[0].intensities['Z_A9'], 
5261882.6334)
+        
self.assertAlmostEqual(cdp.mol[0].res[2].spin[0].intensities['Z_A9'], 
4138870.2744)
+        
self.assertAlmostEqual(cdp.mol[0].res[3].spin[0].intensities['Z_A9'], 
5123764.2384)
+        
self.assertAlmostEqual(cdp.mol[0].res[4].spin[0].intensities['Z_A9'], 
4128602.059)
 
 
     def test_read_peak_list_sparky(self):



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer">You are on the <a href="http://gna.org">Gna!</a> mail server.</div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Fri Aug 02 21:00:01 2013</div>  
</body>
</html>
