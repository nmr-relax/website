<!-- MHonArc v2.6.10 -->
<!--X-Subject: RelaxWarnings -->
<!--X-From-R13: Quevf [npDnvyq <p.n.znpenvyqNyrrqf.np.hx> -->
<!--X-Date: Wed, 16 Aug 2006 12:05:39 +0200 -->
<!--X-Message-Id: 1155722684.28764.797.camel@fbsdpcu021 -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 7f080ed10608100336r3dc92d80h1ce3251e55b49347@mail.gmail.com -->
<!--X-Reference: 7f080ed10608112301q57c13573r4ad2ac1bf28006c8@mail.gmail.com -->
<!--X-Reference: 1155550997.28764.610.camel@fbsdpcu021 -->
<!--X-Reference: 7f080ed10608140727s4ef65461yd336c032f690fc1d@mail.gmail.com -->
<!--X-Reference: 1155569275.28764.654.camel@fbsdpcu021 -->
<!--X-Reference: 7f080ed10608142258t2e4d4c02hf4859c8f29b400c3@mail.gmail.com -->
<!--X-Reference: 1155637306.28764.740.camel@fbsdpcu021 -->
<!--X-Reference: 7f080ed10608160054ta16d3c7mbfd858f61df9ddce@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>RelaxWarnings -- August 16, 2006 - 12:05</title>
<link rel="stylesheet" type="text/css" href="/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="https://gna.org/images/gna.theme/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />RelaxWarnings</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00071" class="tabs">Index by Date</a> | <a href="threads.html#00071" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00070.html">Date Prev</a>] [<a href="msg00072.html">Date Next</a>] [<a href="msg00070.html">Thread Prev</a>] [<a href="msg00072.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Edward d'Auvergne &lt;edward.dauvergne@xxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Wed, 16 Aug 2006 11:04:44 +0100</li>
<li class="menuitem">
<em>Cc</em>: relax-devel@xxxxxxx</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00071.html">1155722684.28764.797.camel@fbsdpcu021</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;<a href="msg00052.html">7f080ed10608100336r3dc92d80h1ce3251e55b49347@mail.gmail.com</a>&gt;	&lt;<a href="msg00064.html">7f080ed10608112301q57c13573r4ad2ac1bf28006c8@mail.gmail.com</a>&gt;	&lt;<a href="msg00065.html">1155550997.28764.610.camel@fbsdpcu021</a>&gt;	&lt;<a href="msg00066.html">7f080ed10608140727s4ef65461yd336c032f690fc1d@mail.gmail.com</a>&gt;	&lt;<a href="msg00067.html">1155569275.28764.654.camel@fbsdpcu021</a>&gt;	&lt;<a href="msg00068.html">7f080ed10608142258t2e4d4c02hf4859c8f29b400c3@mail.gmail.com</a>&gt;	&lt;<a href="msg00069.html">1155637306.28764.740.camel@fbsdpcu021</a>&gt;	&lt;<a href="msg00070.html">7f080ed10608160054ta16d3c7mbfd858f61df9ddce@mail.gmail.com</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Chris MacRaild</strong> on August 16, 2006 - 12:05:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">[This thread follows on from the 'RelaxWarnings and RelaxErrors' thread]

On Wed, 2006-08-16 at 17:54 +1000, Edward d'Auvergne wrote:

</pre><blockquote class="blockquote"><blockquote class="blockquote"><pre style="margin: 0em;">

Because they do two very different things. Warnings communicate a
potentially dangerous state to the user without affecting program flow.
Exceptions communicate some event (usually unexpected) that needs to be
dealt with by the program. This often requires that program flow be
disrupted in quite specific ways, so that the affected opperation can be
backed up and tried again. Exceptions only become errors that the user
should know anything about if the program has no way of dealing with the
exception. The systems are incomatible because they need to achieve two
very different things. That said I don't much like the Python warnings
system, and I suspect yours will serve relax's purposes much better.
Where I dissagree is with an exception system that tries to work in the
same way.
</pre></blockquote><pre style="margin: 0em;">

I like the argument - warnings can be turned into errors but errors
always remain as errors.  That solves the original question (the
ability to change errors-&gt;warnings and warnings-&gt;errors) posed at the
start of this thread
(<a  href="https://mail.gna.org/public/relax-devel/2006-08/msg00052.html">https://mail.gna.org/public/relax-devel/2006-08/msg00052.html</a>).

When you talk about the warning system I attempted to implement, are
you talking about the system in
svn://svn.gna.org/svn/relax/branches/nan_catch_test or
svn://svn.gna.org/svn/relax/1.2?  In the 'nan_catch_text' branch I've
used the Python warning system which is ugly and bizarre.  In the 1.2
line I've created RelaxWarning classes with __call__() methods which
define the behaviour of the warning (I'm assuming this is the one
you're talking about).  The Python warning system may be the way to go
though as there is a mechanism to scale warnings into errors (although
it may need a lot of fine tuning to fit with the RelaxError system
based on Exception).  I can't see a way of turning the
RelaxWarning.__call__() function into an Exception though.

</pre></blockquote><pre style="margin: 0em;">

Yes, I meant the RelaxWarning system in the current 1.2 line, no the
Python warnings based system in branches/nan_catch_test - sorry for the
ambiguity. Though as I discuss below, I think the Python warnings system
might also make a reasonable alternative.

</pre><blockquote class="blockquote"><pre style="margin: 0em;">

The non-Python warning system would however be difficult to escalate
into an error.  Then again using the Python warning system would also
be complex due to it's non-trivial implementation.
</pre></blockquote><pre style="margin: 0em;">

I think it can be done either way, both have disadvantages. For the
non-Python system, it will require something like:

if pedantic:
    raise RelaxError, msg

in the RelaxWarning.__call__() function. The disadvantage here is that
the error will be raised from the warning, not from the point in the
code where the warning was trigered. Therefore the traceback will not be
as clear as it might be. There is also a risk that the RelaxError might
be accidentally caught elswhere in the code, and misinterpreted. One way
around that would be to use a specific class of Exception for upgraded
warnings (RelaxPedanticError, eg.). Of course this could be subclassed
to give more specific behaviour, and could be caught if UI issues
demanded.

Escalation of Warnings in the Python system should also be quite easy,
by setting appropriate filters at a high level in the code
(prompt/interpreter.py might be the spot, or maybe even the relax main
script?). The code would look something like:

if pedantic:
    warnings.filterwarnings('error', category=RelaxWarning)
else:
    warnings.filterwarnings('always', category=RelaxWarning)

Then all warning classes that are subclasses of RelaxWarning will be
raised as an exception if pedantic, otherwise the warning will be
printed and execution will continue. This approach has none of the
drawbacks of the the custom warning system described above, but does
suffer from the general obscurity of the python warnings system. I
suspect it should be possible to subclass from BaseError as well,
meaning that exceptions raised by escalation of a warning will be easily
treated by the UI specific try statements and will have the same nice
debuging features as we put into the other RelaxErrors.

I guess I'm begining to favour the Python warnings system, because I
think it will lead to clearer results for the user, even though it might
make life a bit more complicated for the developers. This is not a
strong preference, though, so if anyone else feels strongly otherwise,
I'm happy either way.

Chris





</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00072" href="msg00072.html">Re: RelaxWarnings</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00052" href="msg00052.html">RelaxWarnings and RelaxErrors.</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00064" href="msg00064.html">Re: RelaxWarnings and RelaxErrors.</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00065" href="msg00065.html">Re: RelaxWarnings and RelaxErrors.</a></strong>
<ul><li><em>From:</em> Chris MacRaild</li></ul></li>
<li><strong><a name="00066" href="msg00066.html">Re: RelaxWarnings and RelaxErrors.</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00067" href="msg00067.html">Re: RelaxWarnings and RelaxErrors.</a></strong>
<ul><li><em>From:</em> Chris MacRaild</li></ul></li>
<li><strong><a name="00068" href="msg00068.html">Re: RelaxWarnings and RelaxErrors.</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00069" href="msg00069.html">Re: RelaxWarnings and RelaxErrors.</a></strong>
<ul><li><em>From:</em> Chris MacRaild</li></ul></li>
<li><strong><a name="00070" href="msg00070.html">Re: RelaxWarnings and RelaxErrors.</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer">You are on the <a href="http://gna.org">Gna!</a> mail server.</div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Wed Aug 16 18:20:43 2006</div>  
</body>
</html>
