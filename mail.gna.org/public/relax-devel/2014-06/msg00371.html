<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: r24100 &#45; /branches/disp_spin_speed/test_suite/shared_data/dispersion/profiling/profiling_ns_r1rho_2site.py -->
<!--X-From-R13: "Sqjneq q'Ohiretar" &#60;rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Wed, 18 Jun 2014 17:24:49 +0200 -->
<!--X-Message-Id: CAED9pY&#45;3SzN5Fgc1FvoKfKAC9GKfxFZhJpCdYoOAktPcJ7UkxQ@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: E1WxHAQ&#45;0000QZ&#45;Nl@subversion.gna.org -->
<!--X-Reference: CAED9pY_mrMAUTNiCe+kX94qg0uh=dXaxQai2=114j1Nct2_pXQ@mail.gmail.com -->
<!--X-Reference: CA+CBx2Mgo8s_eVBoHG5RYmftc0YKbkOeaB0aE1=09sDuTML9UQ@mail.gmail.com -->
<!--X-Reference: CAED9pY9o=0gvvqmzCK5fO&#45;TZArDaCJVFmW5UO0nUWyxt6v&#45;WjA@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: r24100 - /branches/disp_spin_speed/test_suite/shared_data/dispersion/profiling/profiling_ns_r1rho_2site.py -- June 18, 2014 - 17:24</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: r24100 - /branches/disp_spin_speed/test_suite/shared_data/dispersion/profiling/profiling_ns_r1rho_2site.py</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00371" class="tabs">Index by Date</a> | <a href="threads.html#00371" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00370.html">Date Prev</a>] [<a href="msg00372.html">Date Next</a>] [<a href="msg00370.html">Thread Prev</a>] [<a href="msg00372.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Wed, 18 Jun 2014 17:24:19 +0200</li>
<li class="menuitem">
<em>Cc</em>: &quot;relax-devel@xxxxxxx&quot; &lt;relax-devel@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113; h=mime-version:sender:in-reply-to:references:date:message-id:subject :from:to:cc:content-type:content-transfer-encoding; bh=T88cfszL23bAY37LCBeqbSm3EkB03z7Tb27/RLcAZPU=; b=s723DaB537dIeXcTrFsbf0L2ryWAeQjmDA/lu+9D98CPI/HAarR1NRCBFdnQspg7mJ aIzgbLKJFQtFaFb04JAaAbv9CfYvfgV3Vd6AJ758pe3WLzMpfCpfH9y07TXuKqpEqeCM E9135a8Io6OefBiRrA4dOx4ssMSFC7+R9qQQT61FHmbXAEXzyNxGWwHeeEdA5Ny1Q7an JgrqnX47UPj7qdIIkYraUQCHfv85zqooCUZ5NhShYqhoOxshiDZeN0V6Dkdw5V6dbccH kflcL6R/FN4ybbAe59mkXMtwrJKlDoszutxtPeTZ/LsktYTyIz9hMGr08SrwKc43VUT8 W0Pg==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00371.html">CAED9pY-3SzN5Fgc1FvoKfKAC9GKfxFZhJpCdYoOAktPcJ7UkxQ@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;E1WxHAQ-0000QZ-Nl@subversion.gna.org&gt; &lt;CAED9pY_mrMAUTNiCe+kX94qg0uh=dXaxQai2=114j1Nct2_pXQ@mail.gmail.com&gt; &lt;CA+CBx2Mgo8s_eVBoHG5RYmftc0YKbkOeaB0aE1=09sDuTML9UQ@mail.gmail.com&gt; &lt;CAED9pY9o=0gvvqmzCK5fO-TZArDaCJVFmW5UO0nUWyxt6v-WjA@mail.gmail.com&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on June 18, 2014 - 17:24:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">I'm re-re-re-re-re-re-running the super profiling script now and
everything is now ok.  I'll let it complete and commit the log file in
~30 min.  Then I'm off on holidays and won't be back until Monday.  By
then it looks like there will be timing statistics for all dispersion
models in relax!

Regards,

Edward


On 18 June 2014 17:14, Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Very good question.  It must be a version mix up.  My current
profiling looks like:

Execution iteration 1

$ python profiling_cr72.py
    10000    0.070    0.000    1.750    0.000 
relax_disp.py:938(func_CR72_full)
      100    0.001    0.000    0.111    0.001 
relax_disp.py:938(func_CR72_full)
$ python /data/relax/tags/3.2.2/profiling_cr72.py /data/relax/tags/3.2.2
    10000    0.022    0.000    3.103    0.000 
relax_disp.py:907(func_CR72_full)
      100    0.000    0.000    3.070    0.031 
relax_disp.py:907(func_CR72_full)
$ python profiling_tsmfk01.py
    10000    0.106    0.000    0.732    0.000 
relax_disp.py:1803(func_TSMFK01)
      100    0.003    0.000    0.039    0.000 
relax_disp.py:1803(func_TSMFK01)
$ python /data/relax/tags/3.2.2/profiling_tsmfk01.py /data/relax/tags/3.2.2
    10000    0.270    0.000    1.635    0.000 
relax_disp.py:1892(func_TSMFK01)
      100    0.260    0.003    1.606    0.016 
relax_disp.py:1892(func_TSMFK01)
$ python profiling_b14.py
    10000    0.073    0.000    3.776    0.000 
relax_disp.py:884(func_B14_full)
      100    0.001    0.000    0.500    0.005 
relax_disp.py:884(func_B14_full)
$ python /data/relax/tags/3.2.2/profiling_b14.py /data/relax/tags/3.2.2
    10000    0.023    0.000    5.680    0.001 
relax_disp.py:854(func_B14_full)
      100    0.000    0.000    5.652    0.057 
relax_disp.py:854(func_B14_full)
$ python profiling_ns_cpmg_2site_expanded.py
    10000    0.187    0.000    4.473    0.000
relax_disp.py:1400(func_ns_cpmg_2site_expanded)
      100    0.027    0.000    0.677    0.007
relax_disp.py:1400(func_ns_cpmg_2site_expanded)
$ python /data/relax/tags/3.2.2/profiling_ns_cpmg_2site_expanded.py
/data/relax/tags/3.2.2
    10000    0.429    0.000    7.947    0.001
relax_disp.py:1445(func_ns_cpmg_2site_expanded)
      100    0.419    0.004    8.022    0.080
relax_disp.py:1445(func_ns_cpmg_2site_expanded)
$ python profiling_ns_cpmg_2site_3D.py
     1000    0.009    0.000   12.672    0.013
relax_disp.py:1375(func_ns_cpmg_2site_3D_full)
       10    0.000    0.000   12.703    1.270
relax_disp.py:1375(func_ns_cpmg_2site_3D_full)
$ python /data/relax/tags/3.2.2/profiling_ns_cpmg_2site_3D.py
/data/relax/tags/3.2.2
     1000    0.003    0.000   23.173    0.023
relax_disp.py:1421(func_ns_cpmg_2site_3D_full)
       10    0.000    0.000   23.549    2.355
relax_disp.py:1421(func_ns_cpmg_2site_3D_full)
$ python profiling_dpl94.py
    10000    0.116    0.000    1.076    0.000 relax_disp.py:966(func_DPL94)
      100    0.006    0.000    0.142    0.001 relax_disp.py:966(func_DPL94)
$ python /data/relax/tags/3.2.2/profiling_dpl94.py /data/relax/tags/3.2.2
    10000    1.834    0.000   22.603    0.002 relax_disp.py:934(func_DPL94)
      100    1.901    0.019   22.805    0.228 relax_disp.py:934(func_DPL94)
$ python profiling_ns_r1rho_2site.py
     1000    0.012    0.000    0.109    0.000 relax_disp.py:966(func_DPL94)
       10    0.001    0.000    0.015    0.001 relax_disp.py:966(func_DPL94)
$ python /data/relax/tags/3.2.2/profiling_ns_r1rho_2site.py
/data/relax/tags/3.2.2
     1000    0.178    0.000    2.240    0.002 relax_disp.py:934(func_DPL94)
       10    0.188    0.019    2.268    0.227 relax_disp.py:934(func_DPL94)

Regards,

Edward


On 18 June 2014 17:08, Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">How?

MODEL_NS_R1RHO_2SITE
self.model.func_ns_r1rho_2site(params)

Best
Troels


2014-06-18 17:04 GMT+02:00 Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt;:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">

Hi Troels,

I'm guessing that you already know this, but this is still executing
the DPL94 model rather than NS R1rho 2-site model.

Regards,

Edward



On 18 June 2014 16:48,  &lt;tlinnet@xxxxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Author: tlinnet
Date: Wed Jun 18 16:48:50 2014
New Revision: 24100

URL: <a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax?rev=24100&amp;view=rev">http://svn.gna.org/viewcvs/relax?rev=24100&amp;view=rev</a>
Log:
Added profiling script for NS R1rho 2site.

Task #7807 (<a  rel="nofollow" href="https://web.archive.org/web/https://gna.org/task/index.php?7807">https://gna.org/task/index.php?7807</a>): Speed-up of dispersion
models for Clustered analysis.

Modified:

branches/disp_spin_speed/test_suite/shared_data/dispersion/profiling/profiling_ns_r1rho_2site.py

Modified:
branches/disp_spin_speed/test_suite/shared_data/dispersion/profiling/profiling_ns_r1rho_2site.py
URL:
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/disp_spin_speed/test_suite/shared_data/dispersion/profiling/profiling_ns_r1rho_2site.py?rev=24100&amp;r1=24099&amp;r2=24100&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/disp_spin_speed/test_suite/shared_data/dispersion/profiling/profiling_ns_r1rho_2site.py?rev=24100&amp;r1=24099&amp;r2=24100&amp;view=diff</a>

==============================================================================
---
branches/disp_spin_speed/test_suite/shared_data/dispersion/profiling/profiling_ns_r1rho_2site.py
(original)
+++
branches/disp_spin_speed/test_suite/shared_data/dispersion/profiling/profiling_ns_r1rho_2site.py
Wed Jun 18 16:48:50 2014
@@ -63,7 +63,7 @@
 def main():
     if True:
         # Nr of iterations.
-        nr_iter = 1000
+        nr_iter = 10

         # Print statistics.
         verbose = True
@@ -523,11 +523,11 @@
         &quot;&quot;&quot;

         # Return chi2 value.
-        chi2 = self.model.func_DPL94(params)
+        chi2 = self.model.func_ns_r1rho_2site(params)
         return chi2


-def single(num_spins=1, model=MODEL_DPL94, iter=None):
+def single(num_spins=1, model=MODEL_NS_R1RHO_2SITE, iter=None):
     &quot;&quot;&quot;Calculate for a single spin.

     @keyword num_spins:     Number of spins in the cluster.
@@ -541,7 +541,7 @@
     &quot;&quot;&quot;

     # Instantiate class
-    C1 = Profile(num_spins=num_spins, model=model, r2=5.0, phi_ex=1.0,
kex=5000.0, spins_params=['r2', 'phi_ex', 'kex'])
+    C1 = Profile(num_spins=num_spins, model=model, r2=5.0, dw=1.0,
pA=0.9, kex=5000.0, spins_params=['r2', 'dw', 'pA', 'kex'])

     # Loop 100 times for each spin in the clustered analysis (to make
the timing numbers equivalent).
     for spin_index in xrange(100):
@@ -551,7 +551,7 @@
     print(&quot;chi2 single:&quot;, chi2)


-def cluster(num_spins=100, model=MODEL_DPL94, iter=None):
+def cluster(num_spins=100, model=MODEL_NS_R1RHO_2SITE, iter=None):
     &quot;&quot;&quot;Calculate for a number of clustered spins.

     @keyword num_spins:     Number of spins in the cluster.
@@ -565,7 +565,7 @@
     &quot;&quot;&quot;

     # Instantiate class
-    C1 = Profile(num_spins=num_spins, model=model, r2=5.0, phi_ex=1.0,
kex=5000.0, spins_params=['r2', 'phi_ex', 'kex'])
+    C1 = Profile(num_spins=num_spins, model=model, r2=5.0, dw=1.0,
pA=0.9, kex=5000.0, spins_params=['r2', 'dw', 'pA', 'kex'])

     # Repeat the function call, to simulate minimisation.
     for i in xrange(iter):


_______________________________________________
relax (<a  rel="nofollow" href="http://www.nmr-relax.com">http://www.nmr-relax.com</a>)

This is the relax-commits mailing list
relax-commits@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="https://mail.gna.org/listinfo/relax-commits">https://mail.gna.org/listinfo/relax-commits</a>
</pre></blockquote><pre style="margin: 0em;">

_______________________________________________
relax (<a  rel="nofollow" href="http://www.nmr-relax.com">http://www.nmr-relax.com</a>)

This is the relax-devel mailing list
relax-devel@xxxxxxx


To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="https://mail.gna.org/listinfo/relax-devel">https://mail.gna.org/listinfo/relax-devel</a>
</pre></blockquote><pre style="margin: 0em;">


</pre></blockquote></blockquote><pre style="margin: 0em;">


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00368" href="msg00368.html">Re: r24100 - /branches/disp_spin_speed/test_suite/shared_data/dispersion/profiling/profiling_ns_r1rho_2site.py</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00369" href="msg00369.html">Re: r24100 - /branches/disp_spin_speed/test_suite/shared_data/dispersion/profiling/profiling_ns_r1rho_2site.py</a></strong>
<ul><li><em>From:</em> Troels Emtekær Linnet</li></ul></li>
<li><strong><a name="00370" href="msg00370.html">Re: r24100 - /branches/disp_spin_speed/test_suite/shared_data/dispersion/profiling/profiling_ns_r1rho_2site.py</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Wed Jun 18 17:40:14 2014</div>  
</body>
</html>
