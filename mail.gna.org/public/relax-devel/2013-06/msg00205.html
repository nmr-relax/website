<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: [sr #3043] Support for NMRPipe seriesTab format *.ser -->
<!--X-From-R13: "Sqjneq q'Ohiretar" <rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Fri, 21 Jun 2013 21:24:53 +0200 -->
<!--X-Message-Id: CAED9pY_Mfo+M7w9bWwL0LPx8YyA3i6iHb8ZBu4EbvA6vKNEUGw@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 20130618&#45;111658.sv20529.92371@gna.org -->
<!--X-Reference: 20130621&#45;104836.sv20529.74597@gna.org -->
<!--X-Reference: 20130621&#45;110326.sv20529.53221@gna.org -->
<!--X-Reference: 20130621&#45;125601.sv20529.4232@gna.org -->
<!--X-Reference: 20130621&#45;133538.sv20529.35811@gna.org -->
<!--X-Reference: 20130621&#45;133624.sv20529.28609@gna.org -->
<!--X-Reference: 20130621&#45;134734.sv20529.63622@gna.org -->
<!--X-Reference: 20130621&#45;135732.sv20529.11927@gna.org -->
<!--X-Reference: 20130621&#45;143814.sv20529.47445@gna.org -->
<!--X-Reference: 20130621&#45;144033.sv2782.32592@gna.org -->
<!--X-Reference: 20130621&#45;144059.sv2782.9513@gna.org -->
<!--X-Reference: 20130621&#45;152621.sv20529.10944@gna.org -->
<!--X-Reference: 20130621&#45;152918.sv2782.33904@gna.org -->
<!--X-Reference: 20130621&#45;155028.sv20529.59982@gna.org -->
<!--X-Reference: 20130621&#45;155445.sv20529.38949@gna.org -->
<!--X-Reference: 20130621&#45;160244.sv20529.97199@gna.org -->
<!--X-Reference: 20130621&#45;161055.sv20529.98641@gna.org -->
<!--X-Reference: 20130621&#45;161450.sv20529.54611@gna.org -->
<!--X-Reference: 20130621&#45;173006.sv20529.34821@gna.org -->
<!--X-Reference: 20130621&#45;174335.sv20529.95831@gna.org -->
<!--X-Reference: 20130621&#45;174724.sv20529.63909@gna.org -->
<!--X-Reference: 20130621&#45;175836.sv20529.88391@gna.org -->
<!--X-Reference: 20130621&#45;180416.sv20529.2309@gna.org -->
<!--X-Reference: CAED9pY&#45;8iXH38ksth9nr9Ng6is9uMhvEA98c7&#45;oXZdTHBcPBcw@mail.gmail.com -->
<!--X-Reference: CA+CBx2Nq4EZFoV7&#45;&#45;0ZeTYfEDgLOU8&#45;vOX2fquo6Bpd7Ak61wg@mail.gmail.com -->
<!--X-Reference: CAED9pY9XSgybbrpfNpahgSPq5R6kVdcHNLB7GJbeyi118d7WKw@mail.gmail.com -->
<!--X-Reference: CA+CBx2MeymMyBNbnxubHYroVCO10cx9_Uy2hXXzV7+x9eAUVkQ@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [sr #3043] Support for NMRPipe seriesTab format *.ser -- June 21, 2013 - 21:24</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: [sr #3043] Support for NMRPipe seriesTab format *.ser</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00205" class="tabs">Index by Date</a> | <a href="threads.html#00205" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00204.html">Date Prev</a>] [<a href="msg00206.html">Date Next</a>] [<a href="msg00204.html">Thread Prev</a>] [<a href="msg00206.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Fri, 21 Jun 2013 21:24:22 +0200</li>
<li class="menuitem">
<em>Cc</em>: &quot;relax-devel@xxxxxxx&quot; &lt;relax-devel@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;	h=mime-version:sender:in-reply-to:references:date	:x-google-sender-auth:message-id:subject:from:to:cc:content-type	:content-transfer-encoding;	bh=3B0q2XSrQwkx8DI22Y3SB4ii+OyPjc1phqPK35wom/s=;	b=Ey74PQR7G4Ot/UjdhRJ1KWkGcvcQ5twmD46IthHfmM+FEy/HW1uJf9GCeSnF13cYik	PWzrVzqMW0045TpFReHi5eb4mp9Nc7zRgyijrRo/FGO+aUohxPmksAu8uQFqA4QVqCZp	hD+8MccRS2jb9430j6RKjEWmEBlldI/bPgkeqGrt0HrMRlg4FP9Dd3Zf/SndDlNYWAYD	+Klxch2sIS34gUeApv+Yjgf1safRjfdBV0AjA7Yp3xCvUHw74onv4hb8CBj+fRnGdBnE	ADGYyqtJ7nzCH6FbHAyV52a8eOs0eb+P1DwiNbBMuMhWzA+1WlkbE6wlXZOpw7Qvsmw6	Ns+Q==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00205.html">CAED9pY_Mfo+M7w9bWwL0LPx8YyA3i6iHb8ZBu4EbvA6vKNEUGw@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;20130618-111658.sv20529.92371@xxxxxxx&gt;	&lt;20130621-104836.sv20529.74597@xxxxxxx&gt;	&lt;20130621-110326.sv20529.53221@xxxxxxx&gt;	&lt;20130621-125601.sv20529.4232@xxxxxxx&gt;	&lt;20130621-133538.sv20529.35811@xxxxxxx&gt;	&lt;20130621-133624.sv20529.28609@xxxxxxx&gt;	&lt;20130621-134734.sv20529.63622@xxxxxxx&gt;	&lt;20130621-135732.sv20529.11927@xxxxxxx&gt;	&lt;20130621-143814.sv20529.47445@xxxxxxx&gt;	&lt;20130621-144033.sv2782.32592@xxxxxxx&gt;	&lt;20130621-144059.sv2782.9513@xxxxxxx&gt;	&lt;20130621-152621.sv20529.10944@xxxxxxx&gt;	&lt;20130621-152918.sv2782.33904@xxxxxxx&gt;	&lt;20130621-155028.sv20529.59982@xxxxxxx&gt;	&lt;20130621-155445.sv20529.38949@xxxxxxx&gt;	&lt;20130621-160244.sv20529.97199@xxxxxxx&gt;	&lt;20130621-161055.sv20529.98641@xxxxxxx&gt;	&lt;20130621-161450.sv20529.54611@xxxxxxx&gt;	&lt;20130621-173006.sv20529.34821@xxxxxxx&gt;	&lt;20130621-174335.sv20529.95831@xxxxxxx&gt;	&lt;20130621-174724.sv20529.63909@xxxxxxx&gt;	&lt;20130621-175836.sv20529.88391@xxxxxxx&gt;	&lt;20130621-180416.sv20529.2309@xxxxxxx&gt;	&lt;CAED9pY-8iXH38ksth9nr9Ng6is9uMhvEA98c7-oXZdTHBcPBcw@xxxxxxxxxxxxxx&gt;	&lt;CA+CBx2Nq4EZFoV7--0ZeTYfEDgLOU8-vOX2fquo6Bpd7Ak61wg@xxxxxxxxxxxxxx&gt;	&lt;CAED9pY9XSgybbrpfNpahgSPq5R6kVdcHNLB7GJbeyi118d7WKw@xxxxxxxxxxxxxx&gt;	&lt;CA+CBx2MeymMyBNbnxubHYroVCO10cx9_Uy2hXXzV7+x9eAUVkQ@xxxxxxxxxxxxxx&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on June 21, 2013 - 21:24:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Ok, I now got it!  I know how we can bludgeon the spectrum.read user
function to handle this.  It's a simple trick, and also very simple
for the user.  What we do is let the user set the int_col argument to
the Z_Ax column for the spectrum ID they will use.  Then the backend
takes this column and multiplies it with the fixed column 6 to obtain
the real intensity (if it's not fixed, then we can work it out from
the position of the 'VOL' label in the VARS row).  For this, we just
need to add a paragraph to the user function documentation saying how
NMRPipe seriesTab files are handled.  It would also then be worth
adding this to the relax user manual.  Do you know LaTeX?

As for reading everything in one go, have a look at the bruker.read
user function for inspiration
(<a  rel="nofollow" href="http://www.nmr-relax.com/manual/bruker_read.html">http://www.nmr-relax.com/manual/bruker_read.html</a>).  We could create a
new user function for just this file format, maybe
spectrum.read_seriestab, which would read all of the data en masse.

Regards,

Edward



On 21 June 2013 20:52, Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">If -list list_of_files.txt contains:
../0/test.ft2
../1/test.ft2
../2/test.ft2
../3/test.ft2

Then this comes out.

----------------------
REMARK SeriesTab Input: ../../peaks.dat Output: allexp.ser
REMARK Mode: Summation Dimensions: 2
REMARK Input Region:    X +/- 0 X-ZF: 1
REMARK Analysis Region: X +/- 0
REMARK Input Region:    Y +/- 0 Y-ZF: 1
REMARK Analysis Region: Y +/- 0

VARS   INDEX X_AXIS Y_AXIS X_PPM Y_PPM VOL ASS Z_A0 Z_A1 Z_A2 Z_A3
FORMAT %5d %9.3f %9.3f %8.3f %8.3f %+e %s %7.4f %7.4f %7.4f %7.4f

NULLVALUE -666
NULLSTRING *

    1   254.059   150.545    8.525  116.014 +1.660865e+05 A2N-H  1.0000
1.1887  1.1893  1.1876
    2   236.553    58.937    8.696  125.904 +8.106413e+05 A3N-H  1.0000
1.1940  1.1935  1.1954
    3   193.454    86.021    9.117  122.980 +4.835453e+05 A4N-H  1.0000
1.1958  1.1962  1.1941
    4   161.310   107.270    9.431  120.686 +2.538240e+05 A5N-H  1.0000
1.1919  1.1934  1.1924
    5   165.097    30.288    9.394  128.997 +4.701862e+05 A6N-H  1.0000
1.1965  1.1959  1.1970
    6   184.650    63.133    9.203  125.451 +4.951762e+05 A7N-H  1.0000
1.1937  1.1929  1.1910
    7   229.694    53.861    8.763  126.452 +4.193051e+05 A8N-H  1.0000
1.1936  1.1971  1.1939
    8   277.092    99.897    8.300  121.482 +5.726205e+05 A9N-H  1.0000
1.1961  1.1976  1.1986
    9   243.719   183.928    8.626  112.410 +5.105667e+05 A10N-H  1.0000
1.1966  1.1961  1.1966

You would have to tell that the intensity is Col[6] X Col[line_nr+8]



Troels Emtekær Linnet


2013/6/21 Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt;
</pre><blockquote class="blockquote"><pre style="margin: 0em;">

Hi,

This might be too difficult to incorporate into the current
spectrum.read user function.  I'm not 100% sure what you mean yet
though.  Would you be able to illustrate with examples?  Maybe this
could be considered after the single files can be successfully read.

Regards,

Edward



On 21 June 2013 20:21, Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">SeriesTab can be used for single files, if the keyword

-list list_of_files.txt
only contains one file.

Then the intensity will be read from column 6.
This is FINE for the GUI.

But, if you provide it a list of several files, they will be compared,
to 5
digits.
This is a nice feature, since you now have a matrix possibility.

Say that you have a dispersion experiment and record 20 interleaved
spectra.
Then you change a parameter somewhere, and have 20 new files. And
repeat.
All this can be contained in one big file.

So, you want to create a python file, which go through the list file,
and
takes Col[line_number +7] * Col[5]
And then you have the name for the spectrum from the list file.

Sooooo..... I would need this feature!




Troels Emtekær Linnet


2013/6/21 Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt;
</pre><blockquote class="blockquote"><pre style="margin: 0em;">

Hi,

For this one I would prefer not to apply the patch.  I think there are
already too many keyword arguments for the spectrum.read user function
and the GUI interface for it will be too crowded.  And as I mentioned
at:

<a  rel="nofollow" href="http://thread.gmane.org/gmane.science.nmr.relax.devel/3963/focus=4066">http://thread.gmane.org/gmane.science.nmr.relax.devel/3963/focus=4066</a>

we should be able to determine the scaling column from the *.ser file.
 What do you think?

Regards,

Edward



On 21 June 2013 20:04, Troels E. Linnet
&lt;NO-REPLY.INVALID-ADDRESS@xxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Follow-up Comment #26, sr #3043 (project relax):

Intensity column keyword added for NMRPipe SeriesTab format.

Progress sr #3043: (<a  rel="nofollow" href="https://gna.org/support/index.php?3043">https://gna.org/support/index.php?3043</a>) Support
for
NMRPipe seriesTab format *.ser

Added the keyword &quot;col_mult&quot;:
&quot;&quot;&quot; The column which to multiply the peak intensity data (used by the
SeriesTab intensity file format). &quot;&quot;&quot;
If the file 'allplanes.list' contains several paths to .ft2 files,
the
call
to:
seriesTab -in peaks.dat -out allplanes.ser -list allplanes.list
will give a result file where the the total intensity will be given
by
column:
VOL x Z_A0 etc.

The result file contain the VARS keyword:
INDEX X_AXIS Y_AXIS X_PPM Y_PPM VOL ASS Z_A0 Z_A1 Z_A2 Z_A3
Where Z_A0 Z_A1 Z_A2 Z_A3 matches allplanes.list

An 'allplanes.list' is easily created by:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">ls -v -d -1 /.ft2 &gt; allplanes.list
</pre></blockquote><pre style="margin: 0em;">


(file #18152)
    _______________________________________________________

Additional Item Attachment:

File name: trunk_SeriesTab4_2             Size:1 KB


    _______________________________________________________

Reply to this item at:

  &lt;<a  rel="nofollow" href="http://gna.org/support/?3043">http://gna.org/support/?3043</a>&gt;

_______________________________________________
  Message sent via/by Gna!
  <a  rel="nofollow" href="http://gna.org/">http://gna.org/</a>


_______________________________________________
relax (<a  rel="nofollow" href="http://www.nmr-relax.com">http://www.nmr-relax.com</a>)

This is the relax-devel mailing list
relax-devel@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="https://mail.gna.org/listinfo/relax-devel">https://mail.gna.org/listinfo/relax-devel</a>
</pre></blockquote></blockquote><pre style="margin: 0em;">


</pre></blockquote></blockquote><pre style="margin: 0em;">


</pre></blockquote><pre style="margin: 0em;">


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00206" href="msg00206.html">Re: [sr #3043] Support for NMRPipe seriesTab format *.ser</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00072" href="msg00072.html">[sr #3043] Support for NMRPipe seriesTab format *.ser</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
<li><strong><a name="00156" href="msg00156.html">[sr #3043] Support for NMRPipe seriesTab format *.ser</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
<li><strong><a name="00157" href="msg00157.html">[sr #3043] Support for NMRPipe seriesTab format *.ser</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
<li><strong><a name="00159" href="msg00159.html">[sr #3043] Support for NMRPipe seriesTab format *.ser</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
<li><strong><a name="00160" href="msg00160.html">[sr #3043] Support for NMRPipe seriesTab format *.ser</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
<li><strong><a name="00161" href="msg00161.html">[sr #3043] Support for NMRPipe seriesTab format *.ser</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
<li><strong><a name="00162" href="msg00162.html">[sr #3043] Support for NMRPipe seriesTab format *.ser</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
<li><strong><a name="00163" href="msg00163.html">[sr #3043] Support for NMRPipe seriesTab format *.ser</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
<li><strong><a name="00166" href="msg00166.html">[sr #3043] Support for NMRPipe seriesTab format *.ser</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
<li><strong><a name="00167" href="msg00167.html">[sr #3043] Support for NMRPipe seriesTab format *.ser</a></strong>
<ul><li><em>From:</em> Edward d Auvergne</li></ul></li>
<li><strong><a name="00168" href="msg00168.html">[sr #3043] Support for NMRPipe seriesTab format *.ser</a></strong>
<ul><li><em>From:</em> Edward d Auvergne</li></ul></li>
<li><strong><a name="00178" href="msg00178.html">[sr #3043] Support for NMRPipe seriesTab format *.ser</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
<li><strong><a name="00179" href="msg00179.html">[sr #3043] Support for NMRPipe seriesTab format *.ser</a></strong>
<ul><li><em>From:</em> Edward d Auvergne</li></ul></li>
<li><strong><a name="00182" href="msg00182.html">[sr #3043] Support for NMRPipe seriesTab format *.ser</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
<li><strong><a name="00183" href="msg00183.html">[sr #3043] Support for NMRPipe seriesTab format *.ser</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
<li><strong><a name="00184" href="msg00184.html">[sr #3043] Support for NMRPipe seriesTab format *.ser</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
<li><strong><a name="00185" href="msg00185.html">[sr #3043] Support for NMRPipe seriesTab format *.ser</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
<li><strong><a name="00186" href="msg00186.html">[sr #3043] Support for NMRPipe seriesTab format *.ser</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
<li><strong><a name="00193" href="msg00193.html">[sr #3043] Support for NMRPipe seriesTab format *.ser</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
<li><strong><a name="00195" href="msg00195.html">[sr #3043] Support for NMRPipe seriesTab format *.ser</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
<li><strong><a name="00196" href="msg00196.html">[sr #3043] Support for NMRPipe seriesTab format *.ser</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
<li><strong><a name="00199" href="msg00199.html">[sr #3043] Support for NMRPipe seriesTab format *.ser</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
<li><strong><a name="00200" href="msg00200.html">[sr #3043] Support for NMRPipe seriesTab format *.ser</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
<li><strong><a name="00201" href="msg00201.html">Re: [sr #3043] Support for NMRPipe seriesTab format *.ser</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00202" href="msg00202.html">Re: [sr #3043] Support for NMRPipe seriesTab format *.ser</a></strong>
<ul><li><em>From:</em> Troels Emtekær Linnet</li></ul></li>
<li><strong><a name="00203" href="msg00203.html">Re: [sr #3043] Support for NMRPipe seriesTab format *.ser</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00204" href="msg00204.html">Re: [sr #3043] Support for NMRPipe seriesTab format *.ser</a></strong>
<ul><li><em>From:</em> Troels Emtekær Linnet</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Fri Jun 21 22:20:27 2013</div>  
</body>
</html>
