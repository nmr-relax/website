<!-- MHonArc v2.6.18 -->
<!--X-Subject: r22791 &#45; /trunk/lib/software/grace.py -->
<!--X-From-R13: rqjneqNaze&#45;erynk.pbz -->
<!--X-Date: Wed, 16 Apr 2014 16:04:59 +0200 -->
<!--X-Message-Id: E1WaQSR&#45;0004N4&#45;LY@subversion.gna.org -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>r22791 - /trunk/lib/software/grace.py -- April 16, 2014 - 16:04</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />r22791 - /trunk/lib/software/grace.py</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00180" class="tabs">Index by Date</a> | <a href="threads.html#00180" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00179.html">Date Prev</a>] [<a href="msg00181.html">Date Next</a>] [<a href="msg00179.html">Thread Prev</a>] [<a href="msg00181.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: relax-commits@xxxxxxx</li>
<li class="menuitem">
<em>Date</em>: Wed, 16 Apr 2014 14:04:59 -0000</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00180.html">E1WaQSR-0004N4-LY@subversion.gna.org</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>edward</strong> on April 16, 2014 - 16:04:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Author: bugman
Date: Wed Apr 16 16:04:59 2014
New Revision: 22791

URL: <a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax?rev=22791&amp;view=rev">http://svn.gna.org/viewcvs/relax?rev=22791&amp;view=rev</a>
Log:
Removed the automatic axis labelling in the 
lib.software.grace.write_xy_header() function.

This is the automatic labelling based on the parameter Grace strings and 
units of the specific
analysis type.  This is now preformed by the specific analyses themselves so 
the automatic code is
not needed or used.

This allows the dependence on the pipe_control.pipes module and the specific 
analysis API to be
removed making the relax library now 100% independent from the rest of relax.


Modified:
    trunk/lib/software/grace.py

Modified: trunk/lib/software/grace.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/trunk/lib/software/grace.py?rev=22791&amp;r1=22790&amp;r2=22791&amp;view=diff">http://svn.gna.org/viewcvs/relax/trunk/lib/software/grace.py?rev=22791&amp;r1=22790&amp;r2=22791&amp;view=diff</a>
==============================================================================
--- trunk/lib/software/grace.py (original)
+++ trunk/lib/software/grace.py Wed Apr 16 16:04:59 2014
@@ -26,10 +26,6 @@
 # Python module imports.
 from math import ceil, sqrt
 from re import search
-
-# relax module imports.
-from pipe_control import pipes
-from specific_analyses.api import return_api
 
 # This script is used to batch convert the Grace *.agr files into graphics 
files using the Grace
 # program itself.
@@ -356,15 +352,6 @@
         # Axis specific settings.
         axes = ['x', 'y']
         for i in range(2):
-            # Analysis specific methods for making labels.
-            analysis_spec = False
-            if pipes.cdp_name():
-                # Flag for making labels.
-                analysis_spec = True
-
-                # The specific analysis API object.
-                api = return_api()
-
             # Some axis default values for spin data.
             if data_type[i] == 'spin':
                 # Residue only data.
@@ -383,32 +370,7 @@
                 if seq_type[i] == 'mixed':
                     # X-axis label.
                     if not axis_labels[gi][i]:
-                        axis_labels[gi][i] = &quot;Spin identification string&quot;
-
-            # Some axis default values for other data types.
-            else:
-                # Label.
-                if analysis_spec and (not axis_labels or not 
axis_labels[gi][i]):
-                    # Strip out the '_err' and '_bc' from the data type to 
allow the error and back-calculated structures to be used.
-                    data_type_i = data_type[i]
-                    if search('_err$', data_type_i):
-                        data_type_i = data_type_i[:-4]
-                    elif search('_bc$', data_type_i):
-                        data_type_i = data_type_i[:-3]
-
-                    # Get the units.
-                    units = api.return_units(data_type_i)
-
-                    # Set the label.
-                    axis_labels[gi][i] = api.return_grace_string(data_type_i)
-
-                    # Add units.
-                    if units:
-                        axis_labels[gi][i] = axis_labels[gi][i] + &quot;\\N (&quot; + 
units + &quot;)&quot;
-
-                    # Normalised data.
-                    if norm and norm[gi] and axes[i] == 'y':
-                        axis_labels[gi][i] = axis_labels[gi][i] + &quot; 
\\N\\q(normalised)\\Q&quot;
+                        axis_labels[gi][i] = &quot;Spin ID string&quot;
 
             # Write out the data.
             if axis_labels[gi][i]:



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Wed Apr 16 16:20:02 2014</div>  
</body>
</html>
