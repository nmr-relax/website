<!-- MHonArc v2.6.19+ -->
<!--X-Subject: Re: Using Model&#45;free models -->
<!--X-From-R13: "Sqjneq q'Ohiretar" &#60;rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Fri, 11 Nov 2016 10:21:36 +0100 -->
<!--X-Message-Id: CAED9pY&#45;X=zNb20vMO4f=JOCB37V29QAM9o2Az7judRx=4nG3rA@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: CALgM0gVYEvcSdZMbUnjJQpQgKLcr+bEtq&#45;9wzSGB8ktS2iuLKw@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: Using Model-free models -- November 11, 2016 - 10:21</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: Using Model-free models</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00002" class="tabs">Index by Date</a> | <a href="threads.html#00002" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00001.html">Date Prev</a>] [<a href="msg00003.html">Date Next</a>] [<a href="msg00001.html">Thread Prev</a>] [<a href="msg00006.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: &quot;Mahdi, Sam&quot; &lt;sam.mahdi.846@xxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Fri, 11 Nov 2016 10:21:05 +0100</li>
<li class="menuitem">
<em>Cc</em>: &quot;relax-users@xxxxxxx&quot; &lt;relax-users@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113; h=mime-version:sender:in-reply-to:references:from:date:message-id :subject:to:cc; bh=MhRbB9DBxqGJmstg/4al4MmeuoquWFXPN7brR5yVl1w=; b=Z74hrj8/UIPRSKvyPzMVRbhJn58ETSDpUCXTm6LmvKjVXqIwOlXZ9dLHegFropshOT mNMjVoTykeeVZClqRBVCuyHaFGijRqlz1b9MUYoe2pu408/SEDhzLH9opcol4oAikIGe HFRmTbigEWdfeXXmuEyDZXFS3BgrSaKhYNHqfhZwTdoS6d9hVULact7FhPb0W9FZTrN3 vIPGRAPU4tO3046F4mtPKEd2ETrjps+FONEkVxUvhBFaxL4NCW6UbZUoXSo+/rAT7Fjf pxmiucufAiUA6OpR0MPXD6PekMqg2mWQdb/1IgS2BX6S7k0+odlftSx0lp8AqD29ewMK /jNw==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;CAED9pY-X=zNb20vMO4f=JOCB37V29QAM9o2Az7judRx=4nG3rA@mail.gmail.com&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;<a href="msg00001.html">CALgM0gVYEvcSdZMbUnjJQpQgKLcr+bEtq-9wzSGB8ktS2iuLKw@mail.gmail.com</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on November 11, 2016 - 10:21:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">On 10 November 2016 at 23:50, Mahdi, Sam &lt;sam.mahdi.846@xxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hello everyone,

I've been attempting to run model free models (due to only have data at one
field strength), but I've come across a problem. I have set up both the
model free models script and the model free model selection, both models
run fine, and I do end up receiving data that does make sense and is good;
however, the script doesn't seem to actually select any models. I.e. if I
put in the m0-m9 in the script, it'll select m9 for every single reside and
only give me Rex data and no S^2. If I run m0-m4 same thing, it'll run
every residue at m4, instead of running through all the models and
selecting the data that fits that model. I know it states that the model is
supposed to loop through every model, then you run the model selection to
select what model fits which data set, but I don't know if my script is set
up incorrectly or what. Here is my script for model-free models:
pipes = ['m0','m1','m2','m3','m4']
for name in pipes:
    pipe.create(name,'mf')
sequence.read('ssNOE_RGS4Agnes',res_num_col=1)
spin.name('N')
spin.element(element='N',spin_id='@N')
spin.isotope('15N',spin_id='@N')
structure.read_pdb('cluster1_12.pdb',read_mol=1)
relax_data.read(ri_id='R1_Agnes',ri_type='R1',frq=599.642*1e6,
file='R1_RGS4Agnes',res_num_col=1,spin_name_col=2,data_col=3,error_col=4)
relax_data.read(ri_id='R2_Agnes',ri_type='R2',frq=599.642*1e6,
file='R2_RGS4Agnes',res_num_col=1,spin_name_col=2,data_col=3,error_col=4)
relax_data.read(ri_id='ssNOE_Agnes',ri_type='NOE',frq=599.642*1e6,
file='ssNOE_RGS4Agnes',res_num_col=1,spin_name_col=2,data_col=3,error_col=4)
diffusion_tensor.init(1e-8,fixed=True)
sequence.attach_protons()
interatom.define(spin_id1='@N',spin_id2='@H',direct_bond=True)
interatom.set_dist(spin_id1='@N',spin_id2='@H',ave_dist=1.02*1e-10)
structure.get_pos('@N')
structure.get_pos('@H')
interatom.unit_vectors()
value.set(-172*1e-6,'csa',spin_id='@N')
model_free.select_model(model=name)
minimise.grid_search(inc=11)
minimise.execute('newton')
results.write(file='results',force=True)
state.save('save',force=True)

Again I only have it at m0-m4 because I wanted to obtain the m4 data, but
even if it is to m9, it'll only run the m9 model (i.e. I will only receive
Rex data because that's whats attributed to m9).  Here is my model
selection script:
pipes = ['m0','m1','m2','m3','m4']
for name in pipes:
    print(&quot;\n\n#&quot;+name+&quot;#&quot;)
pipe.create(name,'mf')
results.read(file='results.bz2',dir=name)
eliminate()
model_selection(method='AIC',modsel_pipe='aic')
state.save('save',force=True)
results.write(file='results',force=True)

Again, this is only set up to m4 for the same reasons as before. I don't
know whether or not I have something in my script set up, but my final
results file just shows the model that was selected for every residue, is
the last model I have in my pipes (i.e. if m4 is the last model, it'll run
model 4, if m9 is the last one, it'll run m9). In this sence it appears to
be a single model scenario even though I've set up to be for multiple
models. Thank you again in advance.
</pre></blockquote><pre style="margin: 0em;">

Hi Sam,

This is perfectly normal!  The key is the line:

diffusion_tensor.init(1e-8,fixed=True)

Here you have fixed the diffusion tensor to spherical tumbling of 10
ns.  Note that &gt;80% of the contribution to relaxation is due to the
global tumbling.  So if you get this global tumbling wrong, it has an
absolute crushing effect on the remaining 20% and the fine model-free
parameter values and model selection dependent on that 20%.  So
obtaining a very good estimate for the molecular Brownian diffusion is
essential, otherwise you should expect catastrophic failures in the
fine internal motions (which is what you are seeing).  This is why in
the last 20 years, that no one will take any published results
seriously if you do not have data at two field strengths.  It is also
why I developed that long protocol for obtaining a highly refined
diffusion tensor together with the internal motions.

You may think that you can obtain a diffusion estimate from another
technique (optical rotation data, hydrodynamics bead modelling, MD
simulation, etc.), however these are either not good enough or plain
wrong, specifically because of the packing interactions and
microviscosity in your NMR tube being poorly, or not at all, modelled.
It is imperative that the diffusion tensor is optimised against the
relaxation data.

Regards,

Edward


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00006" href="msg00006.html">Re: Using Model-free models</a></strong>
<ul><li><em>From:</em> Mahdi, Sam</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00001" href="msg00001.html">Using Model-free models</a></strong>
<ul><li><em>From:</em> Mahdi, Sam</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Fri Nov 11 20:00:04 2016</div>  
</body>
</html>
