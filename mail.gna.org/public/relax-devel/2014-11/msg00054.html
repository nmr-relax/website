<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: Implement handles for nmrglue in relax -->
<!--X-From-R13: Febryf Szgrxæe Zvaarg &#60;gyvaargNtznvy.pbz> -->
<!--X-Date: Thu, 27 Nov 2014 13:06:42 +0100 -->
<!--X-Message-Id: CA+CBx2NRO=43a&#45;81_8825D6vqzb1h=GrKe4g5Z6qMXZ6vLoUVQ@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: CA+CBx2N9gB94wrRMMjh8ETw8yZxmtL5c5uhJx58sCdtV_7HYMQ@mail.gmail.com -->
<!--X-Reference: CAED9pY&#45;vUGKBSrvK2WJw2=6kUXC&#45;0OnVeWTp+17TEJSijSgwBg@mail.gmail.com -->
<!--X-Reference: CA+CBx2NOfBd_LRo5yLuygzqJY7YfFTXX_NzhbFd_10QSvqr16A@mail.gmail.com -->
<!--X-Reference: CAED9pY_hXBUo1MzqTq7y9_JW8Zrq_JOW38rpMNAp6LPatRn8cw@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: Implement handles for nmrglue in relax -- November 27, 2014 - 13:06</title>
<link rel="stylesheet" type="text/css" href="/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="https://gna.org/images/gna.theme/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: Implement handles for nmrglue in relax</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00054" class="tabs">Index by Date</a> | <a href="threads.html#00054" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00053.html">Date Prev</a>] [<a href="msg00055.html">Date Next</a>] [<a href="msg00053.html">Thread Prev</a>] [<a href="msg00057.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: &quot;Edward d'Auvergne&quot; &lt;edward@xxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Thu, 27 Nov 2014 13:05:53 +0100</li>
<li class="menuitem">
<em>Cc</em>: jjhelmus@xxxxxxxxx, &quot;relax-devel@xxxxxxx&quot; &lt;relax-devel@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113; h=mime-version:in-reply-to:references:from:date:message-id:subject:to :cc:content-type; bh=yS3L/n8F0xyNo2gmAy7oAieRhD7425cDaAjHE6UIVq8=; b=NU/B3kieOPb43KmyYVi4i5Z22YHeEOVQGpEe6NjBjXZtpi6D7PxOlZY5UgN0h0wSWw XdbZvan2ZhLHNgCc7CmEhmpily/+CSTURVMedn7ahNgHdZ3jJD4CxCsf2CUEeIEGljvs EKvuofmA70o0fi5iiwNxkHyhu57MpvwSk6ilAzYPd8g3ECHx1pO1eY+J/QKEPzvg4/Ue I2s9HEznPtpkvblBiIarngk7pSiuJCplm7plo7rMpGsdNxfmrra8bxX9YatKApy3Brhn QmDlEbaVnBj+t2KJ4jWM4jt2hzc0Dx1Z+4NT7lLzrSEcev0cMWAtX2F99+P8DTbZgvGX ukxg==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;CA+CBx2NRO=43a-81_8825D6vqzb1h=GrKe4g5Z6qMXZ6vLoUVQ@mail.gmail.com&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;<a href="msg00043.html">CA+CBx2N9gB94wrRMMjh8ETw8yZxmtL5c5uhJx58sCdtV_7HYMQ@mail.gmail.com</a>&gt; &lt;CAED9pY-vUGKBSrvK2WJw2=6kUXC-0OnVeWTp+17TEJSijSgwBg@mail.gmail.com&gt; &lt;<a href="msg00052.html">CA+CBx2NOfBd_LRo5yLuygzqJY7YfFTXX_NzhbFd_10QSvqr16A@mail.gmail.com</a>&gt; &lt;<a href="msg00053.html">CAED9pY_hXBUo1MzqTq7y9_JW8Zrq_JOW38rpMNAp6LPatRn8cw@mail.gmail.com</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Troels Emtekær Linnet</strong> on November 27, 2014 - 13:06:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Hi Edward and Jonathan.

Jonathan, I have used your nmrglue module before, and I really think it is
a piece of good work.!
Well done.

It makes it easy to manipulate NMR data in python.

In the test folder of nmrglue (13.9 MB), there are a collection of files,
which can be used for testing.

nmrglue stores the data in numpy array, so I would need to figure that out.

numpy has a save and load function.
<a  rel="nofollow" href="http://docs.scipy.org/doc/numpy/reference/generated/numpy.save.html">http://docs.scipy.org/doc/numpy/reference/generated/numpy.save.html</a>

I will have a look on it.

Best
Troels




Troels Emtekær Linnet

2014-11-27 12:16 GMT+01:00 Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt;:

</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi,

This sounds good.  And rather simple, the backend of the
spectrum.nmrglue_read user function could simply be the single line of
the tutorial
<a  rel="nofollow" href="http://nmrglue.readthedocs.org/en/latest/tutorial.html#reading-nmr-files:">http://nmrglue.readthedocs.org/en/latest/tutorial.html#reading-nmr-files:</a>

</pre><blockquote class="blockquote"><blockquote class="blockquote"><blockquote class="blockquote"><pre style="margin: 0em;">import nmrglue as ng
dic,data = ng.pipe.read(&quot;test.fid&quot;)
</pre></blockquote></blockquote></blockquote><pre style="margin: 0em;">

For the *.ft2 files, how big are they?  I wonder if you can downsample
the original *.fid files so that the *.ft2 files are within 10 to 100
kB (using the nmrPipe extract command, etc.).  Anyway, just add a
system test, and we can then discuss more of the design before
implementing the nmrglue interface.  From your aims, it sounds pretty
straightforward.  If the number of relax spectrum.nmrglue_* user
functions expand significantly to access more of the nmrglue
functionality, maybe we can create a dedicated nmrglue user function
class later on.  Anyway, we just have to make sure that relax
continues to operate smoothly when the scipy/matplotlib/nmrglue
packages are absent.

One problem will be storage of the nmrglue data.  This will probably
not fit into the relax data store, as it absolutely requires to_xml()
and from_xml() methods to allow the data to be saved and read again.
Any ideas?  We could create a special class in lib.spectrum.nmrglue
which uses the singleton design pattern
(<a  rel="nofollow" href="https://en.wikipedia.org/wiki/Singleton_pattern">https://en.wikipedia.org/wiki/Singleton_pattern</a>), as is used
extensively in relax.  Just 'grep -i' for 'singleton'.  The data
storage would then be temporary.  Or, ideally, we could modify the
nmrglue data structures to be convertible to and from XML.  Some ideas
should be discussed with the nmrglue authors though (which is why I
have CCed Jonathan, so he knows we are developing a simple
relax-nmrglue interface).  At the moment, I don't know much about the
nmrglue designs.

For the user functions, do you know if nmrglue has an icon that we can
use for the menus and user function wizard pages in the GUI?

Cheers,

Edward



On 27 November 2014 at 11:54, Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxx&gt;
wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi Edward.

To:

</pre></blockquote><pre style="margin: 0em;">test_suite/shared_data/dispersion/repeated_analysis/SOD1/cpmg_disp_sod1d90a_060521/cpmg_disp_sod1d90a_060521_normal.fid/ft2_data
</pre><blockquote class="blockquote"><pre style="margin: 0em;">

I will add the corresponding .ft2 files. To limit size use, I will add
</pre></blockquote><pre style="margin: 0em;">just
</pre><blockquote class="blockquote"><pre style="margin: 0em;">very few .ft2 files.

I will add wrapper functions which will:
- read a ft2 file
- read a range of ft2 files according to a glob of file names
- plot the spectrum

manipulate the numpy arrray, to certain functions.

Plotting in matplotlib.

Best
Troels




Troels Emtekær Linnet

2014-11-27 11:33 GMT+01:00 Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt;:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">

Hi Troels,

This is no problem.  Just create the branch.  But before adding code,
we should discuss the design.  This has two benefits - it will be much
simpler for you in the long run, and it would avoid any redesigns if
the first attempt doesn't fit into the relax infrastructure well.
Could you describe nmrglue, including links, and what you'd like to do
with it?  Would you like to interact with the program at runtime, or
simply read its output?  Would you like to create input files?

Cheers,

Edward



On 27 November 2014 at 11:01, Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxx&gt;
wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Dear Edward.

I am about to setup a new test branch for using nmrglue.

I would need to compare all intensities in a long range of spectra.

I will setup a new branch by:
<a  rel="nofollow" href="http://wiki.nmr-relax.com/Git_branch_creation">http://wiki.nmr-relax.com/Git_branch_creation</a>

I already have some test code, which is working.

I am a little unsure where this will be going.

But essentially, I would like to write some wrapper functions to
nmrglue,
which can be handsome.

Best
Troels Emtekær Linnet
_______________________________________________
relax (<a  rel="nofollow" href="http://www.nmr-relax.com">http://www.nmr-relax.com</a>)

This is the relax-devel mailing list
relax-devel@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="https://mail.gna.org/listinfo/relax-devel">https://mail.gna.org/listinfo/relax-devel</a>
</pre></blockquote></blockquote><pre style="margin: 0em;">


</pre></blockquote><pre style="margin: 0em;">

</pre></blockquote><pre style="margin: 0em;">

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00057" href="msg00057.html">Re: Implement handles for nmrglue in relax</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00043" href="msg00043.html">Implement handles for nmrglue in relax</a></strong>
<ul><li><em>From:</em> Troels Emtekær Linnet</li></ul></li>
<li><strong><a name="00048" href="msg00048.html">Re: Implement handles for nmrglue in relax</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00052" href="msg00052.html">Re: Implement handles for nmrglue in relax</a></strong>
<ul><li><em>From:</em> Troels Emtekær Linnet</li></ul></li>
<li><strong><a name="00053" href="msg00053.html">Re: Implement handles for nmrglue in relax</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer">You are on the <a href="http://gna.org">Gna!</a> mail server.</div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Thu Nov 27 14:20:19 2014</div>  
</body>
</html>
