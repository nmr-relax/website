<!-- MHonArc v2.6.10 -->
<!--X-Subject: crash on save in 1.3.0 tag -->
<!--X-From-R13: "Unel E. Fubzcfba" <tnelgNozo.yrrqf.np.hx> -->
<!--X-Date: Fri, 30 Mar 2007 12:22:37 +0200 -->
<!--X-Message-Id: 460CE499.9070905@bmb.leeds.ac.uk -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>crash on save in 1.3.0 tag -- March 30, 2007 - 12:22</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />crash on save in 1.3.0 tag</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00176" class="tabs">Index by Date</a> | <a href="threads.html#00176" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00175.html">Date Prev</a>] [<a href="msg00177.html">Date Next</a>] [<a href="msg00174.html">Thread Prev</a>] [Thread Next]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: relax-devel@xxxxxxx</li>
<li class="menuitem">
<em>Date</em>: Fri, 30 Mar 2007 11:21:13 +0100</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00176.html">460CE499.9070905@bmb.leeds.ac.uk</a>&gt;</li>
<li class="menuitem">
<em>User-agent</em>: Mozilla Thunderbird 1.0 (X11/20041206)</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Gary S. Thompson</strong> on March 30, 2007 - 12:22:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">The following script crashes at result.write with</pre><br>
<tt>relax&gt; results.write(run='m1', file='results', dir='m1', force=1, 
format='columnar', compress_type=1)<br>
Opening the file 'm1/results.bz2' for writing.<br>
Traceback (most recent call last):<br>
 File &quot;../relax&quot;, line 591, in ?<br>
   multi_processor.run()<br>
 File 
&quot;/usr/jessy/garyt/projects/relax_branch/branch_multi1/multi/uni_processor.py&quot;, 
line 106, in run<br>
   self.relax_instance.run()<br>
 File &quot;../relax&quot;, line 175, in run<br>
   self.interpreter.run()<br>
 File 
&quot;/usr/jessy/garyt/projects/relax_branch/branch_multi1/prompt/interpreter.py&quot;, 
line 216, in run<br>
   run_script(intro=self.relax.intro_string, local=self.local, 
script_file=self.relax.script_file, quit=1)<br>
 File 
&quot;/usr/jessy/garyt/projects/relax_branch/branch_multi1/prompt/interpreter.py&quot;, 
line 392, in run_script<br>
   console.interact(intro, local, script_file, quit)<br>
 File 
&quot;/usr/jessy/garyt/projects/relax_branch/branch_multi1/prompt/interpreter.py&quot;, 
line 343, in interact_script<br>
   execfile(script_file, local)<br>
 File &quot;test_multimodel_mc.py&quot;, line 75, in ?<br>
   results.write(run=name, file='results', force=1)<br>
 File 
&quot;/usr/jessy/garyt/projects/relax_branch/branch_multi1/prompt/results.py&quot;, 
line 201, in write<br>
   self.__relax__.generic.results.write(run=run, file=file, 
directory=dir, force=force, format=format, compress_type=compress_type)<br>
 File 
&quot;/usr/jessy/garyt/projects/relax_branch/branch_multi1/generic_fns/results.py&quot;, 
line 166, in write<br>
   self.write_function(results_file, run)<br>
 File 
&quot;/usr/jessy/garyt/projects/relax_branch/branch_multi1/specific_fns/model_free.py&quot;, 
line 5177, in write_columnar_results<br>
   for l in xrange(data.num_ri):<br>
AttributeError: Element instance has no attribute 'num_ri'</tt><br>
<br>
<pre style="margin: 0em;"># Script for model-free analysis.</pre><br>
<pre style="margin: 0em;">dataPaths = ['test_data/noe600_hgts.dat',
            'test_data/T1-500_051205_hgts.bs',
            'test_data/T1-600_hgts.bs',
            'test_data/T2-500_061205_hgts.bs',
            'test_data/T2-600_hgts.bs',
            'test_data/noe750.dat',
            'test_data/T1_750_hgts.bs',
            'test_data/T2_750_hgts.bs']</pre><br>
<pre style="margin: 0em;">dataTypes = [('NOE', '600', 599.8e6),
            ('R1', '500', 499.8e6),
            ('R1', '600', 599.8e6),
            ('R2', '500', 499.8e6),
            ('R2', '600', 599.8e6),
            ('NOE', '750', 750.8e6),
            ('R1', '750', 750.8e6),
            ('R2', '750', 750.8e6)]</pre><br>
<pre style="margin: 0em;"># Set the run names (also the names of preset model-free models).
#runs = ['tm1', 'tm2', 'tm3', 'tm4', 'tm5', 'tm6', 'tm7', 'tm8', 'tm9']
runs = ['m1', 'm2', 'm3', 'm4', 'm5', 'm6', 'm7', 'm8', 'm9']</pre><br>
<pre style="margin: 0em;"># Nuclei type
nuclei('N')</pre><br>
<pre style="margin: 0em;"># Loop over the runs.
for name in runs:
   # Create the run.
   run.create(name, 'mf')</pre><br>
<pre style="margin: 0em;">   # Load the sequence.
   #sequence.read(name, 'noe.500.out')</pre><br>
<pre style="margin: 0em;">   # Load a PDB file.
   #pdb(name, 'test_data/test.pdb', proton='HN')
   structure.read_pdb(name, 'test_data/test.pdb')
   structure.vectors(name, proton='HN')</pre><br>
<tt>   # Load the relaxation data.<br>
   for dataSet in xrange(len(dataPaths)):<br>
       relax_data.read(name, dataTypes[dataSet][0], 
dataTypes[dataSet][1], dataTypes[dataSet][2], dataPaths[dataSet])</tt><br>
<br>
<tt>   # Setup other values.<br>
   diffusion_tensor.init(name, 1e-8, fixed=1)<br>
   #diffusion_tensor.init(name, (1e-8, 1.0, 60, 290), param_types=0, 
spheroid_type='oblate', fixed=0)<br>
   value.set(name, 1.02 * 1e-10, 'bond_length')<br>
   value.set(name, -160 * 1e-6, 'csa')<br>
   #value.set(name, 0.970, 's2')<br>
   #value.set(name, 1.0, 's2f')<br>
   #value.set(name, 2048e-12, 'te')<br>
   #value.set(name, 2048e-12, 'tf')<br>
   #value.set(name, 2048e-12, 'ts')<br>
   #value.set(name, 0.149/(2*pi*600e6)**2, 'rex')</tt><br>
<br>
<pre style="margin: 0em;">   # Select the model-free model.
   model_free.select_model(run=name, model=name)
   #fix(name, 'all_res')</pre><br>
<pre style="margin: 0em;">   # Minimise.
   grid_search(name, inc=11)
   minimise('newton', run=name)</pre><br>
<pre style="margin: 0em;">   # Monte Carlo simulations.
   monte_carlo.setup(name, number=100)
   monte_carlo.create_data(name)
   monte_carlo.initial_values(name)
   minimise('newton', run=name)
   eliminate(run=name)
   monte_carlo.error_analysis(name)</pre><br>
<pre style="margin: 0em;"><br>   # Write the results.
   results.write(run=name, file='results', force=1)</pre><br>
<pre style="margin: 0em;"># Save the program state.
state.save('save', force=1)</pre><br>
<pre style="margin: 0em;"><br>regards
gary</pre><br>
<pre style="margin: 0em;">--
-------------------------------------------------------------------
Dr Gary Thompson
Astbury Centre for Structural Molecular Biology,
University of Leeds, Astbury Building,
Leeds, LS2 9JT, West-Yorkshire, UK             Tel. +44-113-3433024
email: garyt@xxxxxxxxxxxxxxx                   Fax  +44-113-2331407
-------------------------------------------------------------------</pre><br>
<pre style="margin: 0em;"><br></pre><br>
<br>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Fri Mar 30 14:01:07 2007</div>  
</body>
</html>
