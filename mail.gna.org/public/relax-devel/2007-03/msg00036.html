<!-- MHonArc v2.6.10 -->
<!--X-Subject: Re: The singleton design pattern for the old 'self.relax.data' data	structure. -->
<!--X-From-R13: Quevf [npDnvyq <p.n.znpenvyqNyrrqf.np.hx> -->
<!--X-Date: Fri, 09 Mar 2007 19:15:50 +0100 -->
<!--X-Message-Id: 1173464089.8066.278.camel@mrspell -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 7f080ed10703070006s309a1e1do38e621f48d8f6d9e@mail.gmail.com -->
<!--X-Reference: 1173263918.8066.238.camel@mrspell -->
<!--X-Reference: 7f080ed10703071903nbadfa52jbf89b8c137e62e09@mail.gmail.com -->
<!--X-Reference: 1173348794.8066.249.camel@mrspell -->
<!--X-Reference: 7f080ed10703082238n1e06a7b8p4c796b8f508c74eb@mail.gmail.com -->
<!--X-Reference: 1173434177.8066.269.camel@mrspell -->
<!--X-Reference: 7f080ed10703090533m739611f1gf029c5d147b3a968@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: The singleton design pattern for the old 'self.relax.data' data	structure. -- March 09, 2007 - 19:15</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: The singleton design pattern for the old 'self.relax.data' data	structure.</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00036" class="tabs">Index by Date</a> | <a href="threads.html#00036" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00035.html">Date Prev</a>] [<a href="msg00037.html">Date Next</a>] [<a href="msg00035.html">Thread Prev</a>] [<a href="msg00037.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Fri, 09 Mar 2007 18:14:49 +0000</li>
<li class="menuitem">
<em>Cc</em>: relax-devel@xxxxxxx</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00036.html">1173464089.8066.278.camel@mrspell</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;<a href="msg00012.html">7f080ed10703070006s309a1e1do38e621f48d8f6d9e@mail.gmail.com</a>&gt;	&lt;<a href="msg00013.html">1173263918.8066.238.camel@mrspell</a>&gt;	&lt;<a href="msg00014.html">7f080ed10703071903nbadfa52jbf89b8c137e62e09@mail.gmail.com</a>&gt;	&lt;<a href="msg00027.html">1173348794.8066.249.camel@mrspell</a>&gt;	&lt;<a href="msg00031.html">7f080ed10703082238n1e06a7b8p4c796b8f508c74eb@mail.gmail.com</a>&gt;	&lt;<a href="msg00034.html">1173434177.8066.269.camel@mrspell</a>&gt;	&lt;<a href="msg00035.html">7f080ed10703090533m739611f1gf029c5d147b3a968@mail.gmail.com</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Chris MacRaild</strong> on March 09, 2007 - 19:15:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">On Sat, 2007-03-10 at 00:33 +1100, Edward d'Auvergne wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">On 3/9/07, Chris MacRaild &lt;c.a.macraild@xxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">On Fri, 2007-03-09 at 17:38 +1100, Edward d'Auvergne wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Looking back at the example you gave:

class Data:
   ...
Data = Data()

in the data module, then everywhere else:

from data import Data as relax_data

This is very similar to Gary's suggestion and is conceptually the same
as the code in the repository.  I just realised that the example is in
fact a singleton design pattern.  The Data class is being overwritten
by the single Data class instance reference.  Then every time Data is
imported, a reference is given by the module rather than the class
which no longer exists in the module namespace.  Although the
implementations are slightly different, Gary's singleton suggestion
(<a  href="https://mail.gna.org/public/relax-devel/2007-03/msg00020.html">https://mail.gna.org/public/relax-devel/2007-03/msg00020.html</a>,
Message-id: &lt;45EFCABC.9040905@xxxxxxxxxxxxxxx&gt;), your suggestion Chris
(<a  href="https://mail.gna.org/public/relax-devel/2007-03/msg00013.html">https://mail.gna.org/public/relax-devel/2007-03/msg00013.html</a>,
Message-id: &lt;<a href="msg00013.html">1173263918.8066.238.camel@mrspell</a>&gt;), and mine
(<a  href="https://mail.gna.org/public/relax-devel/2007-03/msg00012.html">https://mail.gna.org/public/relax-devel/2007-03/msg00012.html</a>,
Message-id: 
&lt;7f080ed10703070006s309a1e1do38e621f48d8f6d9e@xxxxxxxxxxxxxx&gt;)
are formally identical, each returns the reference to the single Data
instance.
</pre></blockquote><pre style="margin: 0em;">

I would argue that they are functionally identical, but formally quite
different. Quite apart from the differences in terms of __init__ that I
mentioned earlier, it is usefull to look at the differences in terms of
what a user will see if they examine a client module. In the current
implimentation, the user will see

relax_data = Data()

and wrongly assume that the client module has created its own instance
of Data, because that is what the code says. As they examine the rest of
the code, they are likely to be at a complete loss as to how that
instance communicates with the rest of the program, because each module
appears to create an independent instance. In my proposal, the user will
see

from data import Data as relax_data

and realise that each client module imports one and the same data object
every time.

It is this clarity of code and simplicty of concept that I am trying to
argue for here, not any functional difference.
</pre></blockquote><pre style="margin: 0em;">

Actually, the 'from data import Data as relax_data' is potentially
more confusing as you wouldn't normally expect a reference to an
instantiated class to be returned when importing (instead of the class
itself).  
</pre></blockquote><pre style="margin: 0em;">

I'm not at all clear why importing an instance would be unexpected.
import simply makes any object of one module available to some other
module, it doesnt care what the object happens to be. That flexibility
is a design feature of the language - why would anyone expect developers
not to make use of it?

</pre><blockquote class="blockquote"><pre style="margin: 0em;">Either it would have to be documented in the relax manual or
the user reads the code.  With the standard class import if someone is
familiar class imports they won't have a problem - otherwise the user
could read the object's docstring.  Anyway, for the user to understand
how to access the relax data storage object they must have either have
read about it in the manual or seen it in a script.  Either way, all
three implementations and their import and subsequent class
instantiation (Edward), instance reference renaming (Chris), or
function calling (Gary) are going to be equally easily learnt (if so
desired by the adventurous power user).  Gary, do you have an opinion
on the subject?

Cheers,

Edward

</pre></blockquote><pre style="margin: 0em;">



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00037" href="msg00037.html">Support for inheritance.</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00012" href="msg00012.html">The singleton design pattern for the old 'self.relax.data' data	structure.</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00013" href="msg00013.html">Re: The singleton design pattern for the old 'self.relax.data' data	structure.</a></strong>
<ul><li><em>From:</em> Chris MacRaild</li></ul></li>
<li><strong><a name="00014" href="msg00014.html">Re: The singleton design pattern for the old 'self.relax.data' data	structure.</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00027" href="msg00027.html">Re: The singleton design pattern for the old 'self.relax.data' data	structure.</a></strong>
<ul><li><em>From:</em> Chris MacRaild</li></ul></li>
<li><strong><a name="00031" href="msg00031.html">Re: The singleton design pattern for the old 'self.relax.data' data	structure.</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00034" href="msg00034.html">Re: The singleton design pattern for the old 'self.relax.data' data	structure.</a></strong>
<ul><li><em>From:</em> Chris MacRaild</li></ul></li>
<li><strong><a name="00035" href="msg00035.html">Re: The singleton design pattern for the old 'self.relax.data' data	structure.</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Sat Mar 10 00:40:15 2007</div>  
</body>
</html>
