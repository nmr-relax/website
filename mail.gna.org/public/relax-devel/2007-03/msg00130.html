<!-- MHonArc v2.6.10 -->
<!--X-Subject: Re: how to parallelise model_free minimise -->
<!--X-From-R13: "Sqjneq q'Ohiretar" <rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Mon, 26 Mar 2007 19:26:45 +0200 -->
<!--X-Message-Id: 7f080ed10703261026l4d783b65o1e34f01315a95024@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 7f080ed10703191030h79036e06w56912aa1d9130f48@mail.gmail.com -->
<!--X-Reference: 45FF0E84.1060007@bmb.leeds.ac.uk -->
<!--X-Reference: 1174384147.29205.20.camel@pc172&#45;31&#45;2&#45;63.biochem.unimelb.edu.au -->
<!--X-Reference: 45FFEC5C.7060205@bmb.leeds.ac.uk -->
<!--X-Reference: 7f080ed10703200727l5fad8e72if4cf9aff74bc21@mail.gmail.com -->
<!--X-Reference: 45FFF714.7070903@bmb.leeds.ac.uk -->
<!--X-Reference: 7f080ed10703200813x323ec212l471796641855a7ff@mail.gmail.com -->
<!--X-Reference: 4603EA08.60801@bmb.leeds.ac.uk -->
<!--X-Reference: 7f080ed10703252217x7db43e6bxfe7324ad0379c778@mail.gmail.com -->
<!--X-Reference: 4607F0AB.6000807@bmb.leeds.ac.uk -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: how to parallelise model_free minimise -- March 26, 2007 - 19:26</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: how to parallelise model_free minimise</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00130" class="tabs">Index by Date</a> | <a href="threads.html#00130" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00129.html">Date Prev</a>] [<a href="msg00131.html">Date Next</a>] [<a href="msg00155.html">Thread Prev</a>] [<a href="msg00132.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: &quot;Gary S. Thompson&quot; &lt;garyt@xxxxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Tue, 27 Mar 2007 03:26:01 +1000</li>
<li class="menuitem">
<em>Cc</em>: relax-devel@xxxxxxx</li>
<li class="menuitem">
<em>Dkim-signature</em>: a=rsa-sha1; c=relaxed/relaxed; d=gmail.com; s=beta;	h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:cc:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;	b=amILlYRQ5iu5YA1AznlR3FERMrSi37m20yUinsIb5M33CvQiBqJ8EIRF/HLnGjtOwmnUXpClyg9H0cDplxOb/5esgC+kPd9YbWuaHTQMe7rDL25JVFmx2UFxuxXIOdX51kly0+w5kzp5zP0j8tgJxYpqfNSlxCUQmAp7Vqq/WyQ=</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00130.html">7f080ed10703261026l4d783b65o1e34f01315a95024@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;<a href="msg00092.html">7f080ed10703191030h79036e06w56912aa1d9130f48@mail.gmail.com</a>&gt;	&lt;<a href="msg00093.html">45FF0E84.1060007@bmb.leeds.ac.uk</a>&gt;	&lt;<a href="msg00097.html">1174384147.29205.20.camel@pc172-31-2-63.biochem.unimelb.edu.au</a>&gt;	&lt;<a href="msg00107.html">45FFEC5C.7060205@bmb.leeds.ac.uk</a>&gt;	&lt;<a href="msg00110.html">7f080ed10703200727l5fad8e72if4cf9aff74bc21@mail.gmail.com</a>&gt;	&lt;<a href="msg00112.html">45FFF714.7070903@bmb.leeds.ac.uk</a>&gt;	&lt;<a href="msg00114.html">7f080ed10703200813x323ec212l471796641855a7ff@mail.gmail.com</a>&gt;	&lt;<a href="msg00124.html">4603EA08.60801@bmb.leeds.ac.uk</a>&gt;	&lt;<a href="msg00126.html">7f080ed10703252217x7db43e6bxfe7324ad0379c778@mail.gmail.com</a>&gt;	&lt;<a href="msg00128.html">4607F0AB.6000807@bmb.leeds.ac.uk</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on March 26, 2007 - 19:26:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<blockquote class="blockquote"><pre style="margin: 0em;">&gt;&gt; i.e for six residues and 3 nodes
&gt;&gt;
&gt;&gt; node 1 calculates
&gt;&gt; res 1 [m1 m2 m3...]
&gt;&gt; res 2 [[m1 m2 m3..]
&gt;&gt;
&gt;&gt; node 2 calculates
&gt;&gt; res 3 [m1 m2 m3...]
&gt;&gt; res 4 [[m1 m2 m3..]
&gt;&gt;
&gt;&gt; node 3 calculates
&gt;&gt; res 5 [m1 m2 m3...]
&gt;&gt; res 6 [[m1 m2 m3..]
&gt;&gt;
&gt;&gt; this obviously places some limitations of the design of the
&gt;&gt; minimisation function as it might needs to have a set and tear down
&gt;&gt; region that cope with this batched data....
&gt;
&gt; The minimise() main loop is the finest grain parallelisation you can
&gt; get without writing a specific parallelised optimisation algorithm.
&gt;</pre><br>
<pre style="margin: 0em;">actually what i was aiming for was as coarse grained and well load
balanced a set of calculations as possible (i.e. minimum of
communication overhead (i.e. bigger chunks of data with similar
computations times going over the wire))
</pre></blockquote><pre style="margin: 0em;"><br>The coarse grained target of the looping over data pipes, which the
user must specifically ask for, will limit the number of active nodes
to the number of data pipes, which could be a specific list of
model-free models (assuming this is the only target).  The next level
is the main loop over the minimisation instances.  Finally, the finest
grain is from the parallelised grid search of grid searches (as
discussed in the thread starting at
<a  href="http://www.nmr-relax.com/mail.gna.org/public/relax-devel/2007-03/msg00088.html">https://mail.gna.org/public/relax-devel/2007-03/msg00088.html</a>,
Message-id: &lt;45FEAC46.8020307@xxxxxxxxxxxxxxx&gt;).  Can you see anything
else which could be targeted for parallelisation?</pre><br>
<br>
<blockquote class="blockquote"><pre style="margin: 0em;">just as another comment (or two)</pre><br>
<pre style="margin: 0em;">1. why does do we send no arguments to the fucntions e.g.
-#-num_frq [2]
-#-frq [[750800000.0, 599.71900000000005]]
</pre></blockquote><pre style="margin: 0em;"><br>Sorry, again I don't understand the question.  I'll try to answer it
anyway.  The num_frq value is used to deconvolute the 'remap_table',
'frq', 'ri_labels', and 'relax_data'.  This can vary for different
spin systems.  The frequencies are essential for the calculation of
the spectral density values (and hence the chi-squared value).</pre><br>
<br>
<blockquote class="blockquote"><pre style="margin: 0em;">2. how does the data return from minimisation work (specifically why is
param_vector  a  instance vaiable of  Model_free
e.g. we have</pre><br>
<pre style="margin: 0em;">self.param_vector, self.func, iter, fc, gc, hc, self.warning = results</pre><br>
<pre style="margin: 0em;">....</pre><br>
<pre style="margin: 0em;"># Disassemble the parameter vector.
self.disassemble_param_vector(index=index, sim_index=sim_index)</pre><br>
<pre style="margin: 0em;"><br></pre><br>
<pre style="margin: 0em;">inside a tight loop. So even though self.param_vector is an instance
variable it doesn't contain state for a Model_free object it just keeps
being overwritten by the latest contents of the result</pre><br>
<pre style="margin: 0em;">so why not</pre><br>
<pre style="margin: 0em;">param_vector, self.func, iter, fc, gc, hc, self.warning = results</pre><br>
<pre style="margin: 0em;">....</pre><br>
<pre style="margin: 0em;"># Disassemble the parameter vector.
self.disassemble_param_vector(param_vector, index=index,
sim_index=sim_index)
</pre></blockquote><pre style="margin: 0em;"><br>Yes, this is probably how this should be done.  Grep for
'self.param_vector' in 'specific_fns/model_free.py' to see why there
has been an inertia for me to make this change.  If necessary for the
MPI code, please try to minimise the number of changes to this setup
as possible.  Sorry about the legacy code, but because of the nature
of the multi_processor branch you may need to work with it.  Hopefully
I'll have all these legacy issues completely removed in the 1.3 line
once the data model redesign is complete.  That being said, if you
need to, please feel free to make the above changes.</pre><br>
<pre style="margin: 0em;">Cheers,</pre><br>
<pre style="margin: 0em;">Edward</pre><br>
<br>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00132" href="msg00132.html">Re: how to parallelise model_free minimise</a></strong>
<ul><li><em>From:</em> gary thompson</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00092" href="msg00092.html">relax and Grid computing.</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00093" href="msg00093.html">Re: relax and Grid computing.</a></strong>
<ul><li><em>From:</em> Gary S. Thompson</li></ul></li>
<li><strong><a name="00097" href="msg00097.html">relax, MPI, and Grid computing.</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00107" href="msg00107.html">Re: relax, MPI, and Grid computing.</a></strong>
<ul><li><em>From:</em> Gary S. Thompson</li></ul></li>
<li><strong><a name="00110" href="msg00110.html">Re: relax, MPI, and Grid computing.</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00112" href="msg00112.html">Re: relax, MPI, and Grid computing.</a></strong>
<ul><li><em>From:</em> Gary S. Thompson</li></ul></li>
<li><strong><a name="00114" href="msg00114.html">Re: relax, MPI, and Grid computing.</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00124" href="msg00124.html">how to parallelise model_free minimise</a></strong>
<ul><li><em>From:</em> Gary S. Thompson</li></ul></li>
<li><strong><a name="00126" href="msg00126.html">Re: how to parallelise model_free minimise</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00128" href="msg00128.html">Re: how to parallelise model_free minimise</a></strong>
<ul><li><em>From:</em> Gary S. Thompson</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Thu Mar 29 18:21:03 2007</div>  
</body>
</html>
