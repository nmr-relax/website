<!-- MHonArc v2.6.16 -->
<!--X-Subject: r8125 &#45; in /1.3/test_suite:	shared_data/peak_lists/generic_intensity2.txt	system_tests/peak_lists.py -->
<!--X-From-R13: rqjneqNaze&#45;erynk.pbz -->
<!--X-Date: Thu, 04 Dec 2008 13:23:18 +0100 -->
<!--X-Message-Id: E1L8DEk&#45;0002H7&#45;LU@subversion.gna.org -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>r8125 - in /1.3/test_suite:	shared_data/peak_lists/generic_intensity2.txt	system_tests/peak_lists.py -- December 04, 2008 - 13:23</title>
<link rel="stylesheet" type="text/css" href="/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="https://gna.org/images/gna.theme/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />r8125 - in /1.3/test_suite:	shared_data/peak_lists/generic_intensity2.txt	system_tests/peak_lists.py</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00056" class="tabs">Index by Date</a> | <a href="threads.html#00056" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00055.html">Date Prev</a>] [<a href="msg00057.html">Date Next</a>] [<a href="msg00055.html">Thread Prev</a>] [<a href="msg00057.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: relax-commits@xxxxxxx</li>
<li class="menuitem">
<em>Date</em>: Thu, 04 Dec 2008 12:23:18 -0000</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00056.html">E1L8DEk-0002H7-LU@subversion.gna.org</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>edward</strong> on December 04, 2008 - 13:23:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Author: bugman
Date: Thu Dec  4 13:23:18 2008
New Revision: 8125

URL: <a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax?rev=8125&amp;view=rev">http://svn.gna.org/viewcvs/relax?rev=8125&amp;view=rev</a>
Log:
Seb, here is a challenge for the generic peak list reading code!

This includes a new valid peak intensity file and associated system test.  In 
this case the spectrum
ids are given, along with an array specifying the intensity columns.  This 
should cover much of what
I talked about in my post at 
<a  rel="nofollow" href="https://mail.gna.org/public/relax-devel/2008-12/msg00016.html">https://mail.gna.org/public/relax-devel/2008-12/msg00016.html</a>.


Added:
    1.3/test_suite/shared_data/peak_lists/generic_intensity2.txt
      - copied, changed from r8124, 
1.3/test_suite/shared_data/peak_lists/generic_intensity.txt
Modified:
    1.3/test_suite/system_tests/peak_lists.py

Copied: 1.3/test_suite/shared_data/peak_lists/generic_intensity2.txt (from 
r8124, 1.3/test_suite/shared_data/peak_lists/generic_intensity.txt)
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/1.3/test_suite/shared_data/peak_lists/generic_intensity2.txt?p2=1.3/test_suite/shared_data/peak_lists/generic_intensity2.txt&amp;p1=1.3/test_suite/shared_data/peak_lists/generic_intensity.txt&amp;r1=8124&amp;r2=8125&amp;rev=8125&amp;view=diff">http://svn.gna.org/viewcvs/relax/1.3/test_suite/shared_data/peak_lists/generic_intensity2.txt?p2=1.3/test_suite/shared_data/peak_lists/generic_intensity2.txt&amp;p1=1.3/test_suite/shared_data/peak_lists/generic_intensity.txt&amp;r1=8124&amp;r2=8125&amp;rev=8125&amp;view=diff</a>
==============================================================================
--- 1.3/test_suite/shared_data/peak_lists/generic_intensity.txt (original)
+++ 1.3/test_suite/shared_data/peak_lists/generic_intensity2.txt Thu Dec  4 
13:23:18 2008
@@ -1,7 +1,6 @@
-mol_name    res_num    res_name    spin_num    spin_name    proton    
intensity_1    intensity_2    intensity_3    intensity_4    intensity_5    
intensity_6    intensity_7    intensity_8    intensity_9    intensity_10
-
-None        20         GLY         None        N            HN        1.0000 
        0.9714         0.9602         0.9626         0.8839         0.8327    
     0.7088         0.5098         0.2410         0.1116
-None        23         ALA         None        N            HN        1.0000 
        0.9789         0.9751         0.9762         0.9074         0.8532    
     0.7089         0.5170         0.2444         0.1537
-None        34         CYS         None        N            HN        1.0000 
        0.9659         0.9580         0.9559         0.9325         0.8460    
     0.7187         0.5303         0.2954         0.1683
-None        35         MET         None        N            HN        1.0000 
        0.9657         0.9389         0.9366         0.9331         0.8683    
     0.7169         0.5357         0.2769         0.1625
-None        36         LYS         None        N            HN        1.0000 
        1.0060         0.9556         0.9456         0.9077         0.8411    
     0.6788         0.4558         0.2448         0.1569
+Num        Name        A              B              C              D        
      E              F              G              H              I           
   J
+20         GLY         1.0000         0.9714         0.9602         0.9626   
      0.8839         0.8327         0.7088         0.5098         0.2410      
   0.1116
+23         ALA         1.0000         0.9789         0.9751         0.9762   
      0.9074         0.8532         0.7089         0.5170         0.2444      
   0.1537
+34         CYS         1.0000         0.9659         0.9580         0.9559   
      0.9325         0.8460         0.7187         0.5303         0.2954      
   0.1683
+35         MET         1.0000         0.9657         0.9389         0.9366   
      0.9331         0.8683         0.7169         0.5357         0.2769      
   0.1625
+36         LYS         1.0000         1.0060         0.9556         0.9456   
      0.9077         0.8411         0.6788         0.4558         0.2448      
   0.1569

Modified: 1.3/test_suite/system_tests/peak_lists.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/1.3/test_suite/system_tests/peak_lists.py?rev=8125&amp;r1=8124&amp;r2=8125&amp;view=diff">http://svn.gna.org/viewcvs/relax/1.3/test_suite/system_tests/peak_lists.py?rev=8125&amp;r1=8124&amp;r2=8125&amp;view=diff</a>
==============================================================================
--- 1.3/test_suite/system_tests/peak_lists.py (original)
+++ 1.3/test_suite/system_tests/peak_lists.py Thu Dec  4 13:23:18 2008
@@ -28,6 +28,7 @@
 # relax module imports.
 from data import Relax_data_store; ds = Relax_data_store()
 from generic_fns import pipes
+from generic_fns.mol_res_spin import spin_loop
 
 
 class Peak_lists(TestCase):
@@ -74,6 +75,47 @@
         self.assertEqual(cdp.mol[0].res[0].spin[0].intensities[7], 0.5098)
         self.assertEqual(cdp.mol[0].res[0].spin[0].intensities[8], 0.2410)
         self.assertEqual(cdp.mol[0].res[0].spin[0].intensities[9], 0.1116)
+
+
+    def test_read_peak_list_generic2(self):
+        &quot;&quot;&quot;Test the reading of a generic peak intensity list (test number 
2).&quot;&quot;&quot;
+        
+        # Get the current data pipe.
+        cdp = pipes.get_pipe()
+
+        # Create the sequence data, and name the spins.
+        self.relax.interpreter._Residue.create(20)
+        self.relax.interpreter._Residue.create(23)
+        self.relax.interpreter._Residue.create(34)
+        self.relax.interpreter._Residue.create(35)
+        self.relax.interpreter._Residue.create(36)
+        self.relax.interpreter._Spin.name(name='N')
+        
+        # Spectrum ids.
+        spectrum_ids=['0.0109016', '0.0218032', '0.0436064', '0.0436064', 
'0.0872128', '0.1744260', '0.3488510', '0.6977020', '1.3954000', '1.9949900']
+
+        # Read the peak list.
+        
self.relax.interpreter._Spectrum.read_intensities(file=&quot;generic_intensity2.txt&quot;,
 dir=sys.path[-1] + &quot;/test_suite/shared_data/peak_lists&quot;, 
spectrum_id=spectrum_ids, int_col=range(2, 12), int_method='volume')
+
+        # The intensities.
+        intensities = []
+        intensities.append([1.0000, 0.9714, 0.9602, 0.9626, 0.8839, 0.8327, 
0.7088, 0.5098, 0.2410, 0.1116])
+        intensities.append([1.0000, 0.9789, 0.9751, 0.9762, 0.9074, 0.8532, 
0.7089, 0.5170, 0.2444, 0.1537])
+        intensities.append([1.0000, 0.9659, 0.9580, 0.9559, 0.9325, 0.8460, 
0.7187, 0.5303, 0.2954, 0.1683])
+        intensities.append([1.0000, 0.9657, 0.9389, 0.9366, 0.9331, 0.8683, 
0.7169, 0.5357, 0.2769, 0.1625])
+        intensities.append([1.0000, 1.0060, 0.9556, 0.9456, 0.9077, 0.8411, 
0.6788, 0.4558, 0.2448, 0.1569])
+
+        # Test the spectrum ids.
+        self.assertEqual(cdp.spectrum_ids, spectrum_ids)
+
+        # Test the data.
+        index = 0
+        for spin in spin_loop():
+            for j in xrange(len(spin.intensities)):
+                self.assertEqual(spin.intensities[j], intensities[index][j])
+
+            # Increment the index.
+            index = index + 1
 
 
     def test_read_peak_list_nmrview(self):



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer">You are on the <a href="http://gna.org">Gna!</a> mail server.</div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Thu Dec 04 15:00:02 2008</div>  
</body>
</html>
