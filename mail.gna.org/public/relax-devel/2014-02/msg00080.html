<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: r22184 &#45; in /trunk: prompt/interpreter.py relax.py -->
<!--X-From-R13: "Sqjneq q'Ohiretar" <rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Fri, 14 Feb 2014 11:36:11 +0100 -->
<!--X-Message-Id: CAED9pY&#45;HJB2HyBaZM41qDr=Hi0FuWZDQDVyFzHAo6po7f&#45;aFSA@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: E1WEFv8&#45;0008LV&#45;FE@subversion.gna.org -->
<!--X-Reference: CA+CBx2NjidRgN7bUYtRcciwvAKDKpqCGWaKEKRB3ar72xb76zw@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: r22184 - in /trunk: prompt/interpreter.py relax.py -- February 14, 2014 - 11:36</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: r22184 - in /trunk: prompt/interpreter.py relax.py</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00080" class="tabs">Index by Date</a> | <a href="threads.html#00080" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00079.html">Date Prev</a>] [<a href="msg00081.html">Date Next</a>] [<a href="msg00077.html">Thread Prev</a>] [<a href="msg00081.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Fri, 14 Feb 2014 11:35:41 +0100</li>
<li class="menuitem">
<em>Cc</em>: &quot;relax-devel@xxxxxxx&quot; &lt;relax-devel@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;	h=mime-version:sender:in-reply-to:references:date:message-id:subject	:from:to:cc:content-type:content-transfer-encoding;	bh=RGhqVNS+C9u/Z86i/PEG6gRnLtiv/m0pI2lQS71baKQ=;	b=u6NTmogRgE435rXFWqZ2sLCfSqRflnzuM9ZwWnfn1qVsY1e5SSayRnN8DSKPQe2Ngx	tnkS7Tk0Fcm48C/6zZW9hompcHuMzbgVeFaY/NNxDR4dBBlHiNkCw1z8Ta3AMT6V0G8g	EXRnvqRdSHi2otJRYFuXEt4RTKU3+NuhXSLgujKC9SwHbnmeXiITFYu+ThR7IwPzoZdO	1HVspZ+SD+HvhvJrFDAdJZO3TsSQrPaGFGeuDib6p8Gg8pLrJ88qshRLkRVR5EG/5n/T	7RmIDKKi8vxKZe96dxnEAxtz7roF+v5b2u2k3nnloplEVDgqDRT4QWBWwXwa64RIKhJH	h/eg==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00080.html">CAED9pY-HJB2HyBaZM41qDr=Hi0FuWZDQDVyFzHAo6po7f-aFSA@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;E1WEFv8-0008LV-FE@xxxxxxxxxxxxxxxxxx&gt;	&lt;CA+CBx2NjidRgN7bUYtRcciwvAKDKpqCGWaKEKRB3ar72xb76zw@xxxxxxxxxxxxxx&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on February 14, 2014 - 11:36:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Hi,

Here is a good example:
<a  rel="nofollow" href="http://article.gmane.org/gmane.science.nmr.relax.scm/18871/match=r21115">http://article.gmane.org/gmane.science.nmr.relax.scm/18871/match=r21115</a>.
 You will need an subversion copy of the repository for this.  Because
svn is not as powerful as git, make sure you include the 'svn merge'
command in the commit message, just as in that example.  That allows
the change to be followed.

Regards,

Edward



On 14 February 2014 11:24, Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxxxxxx&gt; 
wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi Edward.

I did a huge error in the commit process.
How do I roll back two commits?

Sorry!

Best
Troels

---------- Forwarded message ----------
From: &lt;tlinnet@xxxxxxxxxxxxx&gt;
Date: 2014-02-14 11:22 GMT+01:00
Subject: r22184 - in /trunk: prompt/interpreter.py relax.py
To: relax-commits@xxxxxxx


Author: tlinnet
Date: Fri Feb 14 11:22:57 2014
New Revision: 22184

URL: <a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax?rev=22184&amp;view=rev">http://svn.gna.org/viewcvs/relax?rev=22184&amp;view=rev</a>
Log:
Modified the help text to explain that -p will launch relax in prompt mode
after running any optionally supplied scripts.

Fix for sr #3117, (<a  rel="nofollow" href="https://gna.org/support/?3117">https://gna.org/support/?3117</a>) - Functionality to inspect
interactively after running script - The equivalence to python -i

This is to allow the -p --prompt option to be given without a script. relax
should support this so that a user doesn't get too confused when
trying to start in prompt mode with the --prompt flag and support the
--prompt argument without a script being supplied.

Modified:
    trunk/prompt/interpreter.py
    trunk/relax.py

Modified: trunk/prompt/interpreter.py
URL:
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/trunk/prompt/interpreter.py?rev=22184&amp;r1=22183&amp;r2=22184&amp;view=diff">http://svn.gna.org/viewcvs/relax/trunk/prompt/interpreter.py?rev=22184&amp;r1=22183&amp;r2=22184&amp;view=diff</a>
==============================================================================
--- trunk/prompt/interpreter.py (original)
+++ trunk/prompt/interpreter.py Fri Feb 14 11:22:57 2014
@@ -336,14 +336,18 @@
         # Reverse the system path so that the script path is first.
         sys.path.reverse()

-        # Execute the script as a module.
-        #if dep_check.runpy_module:
-        #    runpy.run_module(module, globals)
+        # Execute the script as a module if the inspect interactively
prompt flag is not true.
+        if dep_check.runpy_module and not status.prompt:
+            runpy.run_module(module, globals)
+
+        # Execute the script as a module if the inspect interactively
prompt flag is not true.
+        elif dep_check.runpy_module and not status.prompt:
+            runpy.run_module(module, globals)

         # Allow scripts to run under Python &lt;= 2.4.
-        #else:
-        #    exec(compile(open(name).read(), name, 'exec'), globals)
-        exec(compile(open(name).read(), name, 'exec'), globals)
+        else:
+            exec(compile(open(name).read(), name, 'exec'), globals)
+

     finally:
         # Switch back to the original working directory.

Modified: trunk/relax.py
URL:
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/trunk/relax.py?rev=22184&amp;r1=22183&amp;r2=22184&amp;view=diff">http://svn.gna.org/viewcvs/relax/trunk/relax.py?rev=22184&amp;r1=22183&amp;r2=22184&amp;view=diff</a>
==============================================================================
--- trunk/relax.py (original)
+++ trunk/relax.py Fri Feb 14 11:22:57 2014
@@ -215,7 +215,7 @@
             # Only import the module in the test modes (to improve program
start up speeds).
             from test_suite.test_suite_runner import Test_suite_runner

-            # Load the interpreter and turn intros on.
+            # Load the interpreter and turn intros on.launch relax in
prompt mode after running any optionally supplied scripts
             self.interpreter = interpreter.Interpreter(show_script=False,
raise_relax_error=True)
             self.interpreter.on()

@@ -280,7 +280,7 @@
         parser.add_option('-t', '--tee', action='store', type='string',
dest='tee', help='tee relax output to stdout and the file LOG_FILE',
metavar='LOG_FILE')
         parser.add_option('-g', '--gui', action='store_true', dest='gui',
default=0, help='launch the relax GUI')
         parser.add_option('-e', '--escalate', action='store_true',
dest='escalate', default=0, help='escalate all warnings to errors')
-        parser.add_option('-p', '--prompt', action='store_true',
dest='prompt', default=0, help='execute the given script and continue into
the prompt mode to allow for interactive inspection')
+        parser.add_option('-p', '--prompt', action='store_true',
dest='prompt', default=0, help='launch relax in prompt mode after running
any optionally supplied scripts')
         parser.add_option('--test', action='store_true', dest='test',
default=0, help='run relax in test mode')
         parser.add_option('-x', '--test-suite', action='store_true',
dest='test_suite', default=0, help='execute the relax test suite')
         parser.add_option('-s', '--system-tests', action='store_true',
dest='system_tests', default=0, help='execute the relax system/functional
tests (part of the test suite)')


_______________________________________________
relax (<a  rel="nofollow" href="http://www.nmr-relax.com">http://www.nmr-relax.com</a>)

This is the relax-commits mailing list
relax-commits@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="http://www.nmr-relax.com/mail.gna.org/listinfo/relax-commits">https://mail.gna.org/listinfo/relax-commits</a>

</pre></blockquote><pre style="margin: 0em;">


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00081" href="msg00081.html">Re: r22184 - in /trunk: prompt/interpreter.py relax.py</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00077" href="msg00077.html">Fwd: r22184 - in /trunk: prompt/interpreter.py relax.py</a></strong>
<ul><li><em>From:</em> Troels Emtekær Linnet</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Fri Feb 14 11:40:19 2014</div>  
</body>
</html>
