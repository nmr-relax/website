<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: r25361 &#45; in /trunk: auto_analyses/relax_disp.py gui/analyses/auto_relax_disp.py -->
<!--X-From-R13: "Sqjneq q'Ohiretar" &#60;rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Thu, 28 Aug 2014 09:29:50 +0200 -->
<!--X-Message-Id: CAED9pY_R==N&#45;LbfsnfDf5BYxThHW3G7ALyT8Y6u+8TA3ysN08g@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: E1XMl1y&#45;0003QX&#45;SN@subversion.gna.org -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: r25361 - in /trunk: auto_analyses/relax_disp.py gui/analyses/auto_relax_disp.py -- August 28, 2014 - 09:29</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: r25361 - in /trunk: auto_analyses/relax_disp.py gui/analyses/auto_relax_disp.py</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00325" class="tabs">Index by Date</a> | <a href="threads.html#00325" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00324.html">Date Prev</a>] [<a href="msg00326.html">Date Next</a>] [<a href="msg00324.html">Thread Prev</a>] [<a href="msg00326.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: &quot;relax-devel@xxxxxxx&quot; &lt;relax-devel@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Thu, 28 Aug 2014 09:29:19 +0200</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113; h=mime-version:sender:in-reply-to:references:date:message-id:subject :from:to:content-type:content-transfer-encoding; bh=IPRsXECxjJZNbGkUuhJsGfoLwXIv3yuj/fEHf1QKx4o=; b=flp5IroH1RVMcE6x0nelDMkgPIInLuBTH3qOFXUiHLZ4a0T/Bk0Md3qKDwL0Xwd/0n jRS5Ai8ZXTHNImCl0ts+RgEeG89WhjGyQmUKhkq3KiBFaMvL9N9giS1UNFtebz63ZSMa n9znqcSzZ2DVkTnxiKlZXqDnQHXBF4lKd9D+hdtSs7c3nUOZa7r+ZaMlCnN/l5yLDCUQ iXQ9mbRXgnFbj3aC0wNuPq04XZLuMndlOoPh+T//b2vbhtzb7DIEDwmvU3JwdTGzi1OV KBr/8SIULEZZTnDw6h5ItFaWHeBGL+8ROZ3tWXDAksmAh6rZEFEltCCH+1AzTQcVGctk FtYg==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;CAED9pY_R==N-LbfsnfDf5BYxThHW3G7ALyT8Y6u+8TA3ysN08g@mail.gmail.com&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;E1XMl1y-0003QX-SN@subversion.gna.org&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on August 28, 2014 - 09:29:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Nicely done!  I would suggest a few small things:

- Putting this above the mc_sim_num GUI element in the analysis tab as
it is executed first.
- Removing all commas from the tooltip as they are not needed.
- Changing the description to something like 'Exponential curve MC
simulation number' or 'Exponential curve error analysis'.  If there is
not enough room, try setting the width_text class variable at the top
to give you more space (see the gui.analyses.base module).

Cheers,

Edward


On 27 August 2014 23:45,  &lt;tlinnet@xxxxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Author: tlinnet
Date: Wed Aug 27 23:45:26 2014
New Revision: 25361

URL: <a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax?rev=25361&amp;view=rev">http://svn.gna.org/viewcvs/relax?rev=25361&amp;view=rev</a>
Log:
Added keyword &quot;exp_mc_sim_num&quot;, to the auto analyses in the GUI.

This sets the number of Monte Carlo simulations for R2eff error estimation 
in exponential curve fitting.

When setting to -1, the errors are estimated from the Covariance Matrix.

These errors are highly likely to be wrong, but can be used in Rapid 
testing of data and plotting.

task #7822(<a  rel="nofollow" href="https://gna.org/task/index.php?7822">https://gna.org/task/index.php?7822</a>): Implement user function to 
estimate R2eff and associated errors for exponential curve fitting.

Modified:
    trunk/auto_analyses/relax_disp.py
    trunk/gui/analyses/auto_relax_disp.py

Modified: trunk/auto_analyses/relax_disp.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/trunk/auto_analyses/relax_disp.py?rev=25361&amp;r1=25360&amp;r2=25361&amp;view=diff">http://svn.gna.org/viewcvs/relax/trunk/auto_analyses/relax_disp.py?rev=25361&amp;r1=25360&amp;r2=25361&amp;view=diff</a>
==============================================================================
--- trunk/auto_analyses/relax_disp.py   (original)
+++ trunk/auto_analyses/relax_disp.py   Wed Aug 27 23:45:26 2014
@@ -66,7 +66,7 @@
         @type grid_inc:                     int or None
         @keyword mc_sim_num:                The number of Monte Carlo 
simulations to be used for error analysis at the end of the analysis.
         @type mc_sim_num:                   int
-        @keyword exp_mc_sim_num:            The number of Monte Carlo 
simulations for the error analysis in the 'R2eff' model when exponential 
curves are fitted.  This defaults to the value of the mc_sim_num argument 
when not given.  For the 2-point fixed-time calculation for the 'R2eff' 
model, this argument is ignored.
+        @keyword exp_mc_sim_num:            The number of Monte Carlo 
simulations for the error analysis in the 'R2eff' model when exponential 
curves are fitted.  This defaults to the value of the mc_sim_num argument 
when not given.  When set to '-1', the R2eff errors are estimated from the 
Covariance matrix.  For the 2-point fixed-time calculation for the 'R2eff' 
model, this argument is ignored.
         @type exp_mc_sim_num:               int or None
         @keyword modsel:                    The model selection technique 
to use in the analysis to determine which model is the best for each spin 
cluster.  This can currently be one of 'AIC', 'AICc', and 'BIC'.
         @type modsel:                       str

Modified: trunk/gui/analyses/auto_relax_disp.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/trunk/gui/analyses/auto_relax_disp.py?rev=25361&amp;r1=25360&amp;r2=25361&amp;view=diff">http://svn.gna.org/viewcvs/relax/trunk/gui/analyses/auto_relax_disp.py?rev=25361&amp;r1=25360&amp;r2=25361&amp;view=diff</a>
==============================================================================
--- trunk/gui/analyses/auto_relax_disp.py       (original)
+++ trunk/gui/analyses/auto_relax_disp.py       Wed Aug 27 23:45:26 2014
@@ -118,6 +118,7 @@
             ds.relax_gui.analyses[data_index].numeric_only = False
             ds.relax_gui.analyses[data_index].grid_inc = None
             ds.relax_gui.analyses[data_index].mc_sim_num = None
+            ds.relax_gui.analyses[data_index].exp_mc_sim_num = None
             ds.relax_gui.analyses[data_index].pre_run_dir = None
             ds.relax_gui.analyses[data_index].mc_sim_all_models = False
             ds.relax_gui.analyses[data_index].insignificance = 1.0
@@ -298,6 +299,7 @@

         # The number of Monte Carlo simulations to be used for error 
analysis at the end of the analysis.
         data.mc_sim_num = gui_to_int(self.mc_sim_num.GetValue())
+        data.exp_mc_sim_num = gui_to_int(self.exp_mc_sim_num.GetValue())
         data.mc_sim_all_models = self.mc_sim_all_models.GetValue()

         # The insignificance level.
@@ -370,6 +372,7 @@

         # The MC simulation settings.
         self.mc_sim_num = Spin_ctrl(box, self, text=&quot;Monte Carlo 
simulation number:&quot;, default=500, min=1, max=100000, tooltip=&quot;This is the 
number of Monte Carlo simulations performed for error propagation and 
analysis.  For best results, at least 500 is recommended.&quot;, 
width_text=self.width_text, width_button=self.width_button, 
spacer=self.spacer_horizontal)
+        self.exp_mc_sim_num = Spin_ctrl(box, self, text=&quot;Exponential Monte 
Carlo simulation:&quot;, default=500, min=-1, max=100000, tooltip=&quot;This is the 
number of Monte Carlo simulations performed for error propagation and 
analysis, when estimating R2eff errors from exponential curve fitting.  
Setting to '-1', estimates error from the Covariance matrix.&quot;, 
width_text=self.width_text, width_button=self.width_button, 
spacer=self.spacer_horizontal)
         self.mc_sim_all_models = Boolean_ctrl(box, self, text=&quot;Per model 
error analysis:&quot;, default=False, tooltip=&quot;A flag which if True will cause 
Monte Carlo simulations to be performed for each individual model.  
Otherwise Monte Carlo simulations will be reserved for the final model.&quot;, 
width_text=self.width_text, width_button=self.width_button, 
spacer=self.spacer_horizontal)

         # The speed up of grid search.
@@ -628,6 +631,12 @@
             self.data.mc_sim_num = gui_to_int(self.mc_sim_num.GetValue())
         elif hasattr(self.data, 'mc_sim_num'):
             self.mc_sim_num.SetValue(int(self.data.mc_sim_num))
+
+        # The EXP MC sim number.
+        if upload:
+            self.data.exp_mc_sim_num = 
gui_to_int(self.exp_mc_sim_num.GetValue())
+        elif hasattr(self.data, 'exp_mc_sim_num'):
+            self.exp_mc_sim_num.SetValue(int(self.data.exp_mc_sim_num))

         # The All model MC sim flag.
         if upload:
@@ -713,7 +722,7 @@
         Relax_disp.opt_max_iterations = self.data.opt_max_iterations

         # Execute.
-        Relax_disp(pipe_name=self.data.pipe_name, 
pipe_bundle=self.data.pipe_bundle, results_dir=self.data.save_dir, 
models=self.data.models, grid_inc=self.data.inc, 
mc_sim_num=self.data.mc_sim_num, pre_run_dir=self.data.pre_run_dir, 
mc_sim_all_models=self.data.mc_sim_all_models, 
insignificance=self.data.insignificance, 
numeric_only=self.data.numeric_only, r1_fit=self.data.r1_fit)
+        Relax_disp(pipe_name=self.data.pipe_name, 
pipe_bundle=self.data.pipe_bundle, results_dir=self.data.save_dir, 
models=self.data.models, grid_inc=self.data.inc, 
mc_sim_num=self.data.mc_sim_num, exp_mc_sim_num=self.data.exp_mc_sim_num, 
pre_run_dir=self.data.pre_run_dir, 
mc_sim_all_models=self.data.mc_sim_all_models, 
insignificance=self.data.insignificance, 
numeric_only=self.data.numeric_only, r1_fit=self.data.r1_fit)

         # Alias the relax data store data.
         data = ds.relax_gui.analyses[self.data_index]


_______________________________________________
relax (<a  rel="nofollow" href="http://www.nmr-relax.com">http://www.nmr-relax.com</a>)

This is the relax-commits mailing list
relax-commits@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="https://mail.gna.org/listinfo/relax-commits">https://mail.gna.org/listinfo/relax-commits</a>
</pre></blockquote><pre style="margin: 0em;">


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Thu Aug 28 10:20:18 2014</div>  
</body>
</html>
