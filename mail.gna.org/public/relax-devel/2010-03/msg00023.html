<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: r10993 &#45; /branches/bieri_gui/auto_analyses/relax_fit.py -->
<!--X-From-R13: "Sqjneq q'Ohiretar" <rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Mon, 15 Mar 2010 23:33:31 +0100 -->
<!--X-Message-Id: 7f080ed11003151532v1bbe7282u2cfcabb5a00aefa0@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: E1NqwA8&#45;00023Q&#45;C2@subversion.gna.org -->
<!--X-Reference: 7f080ed11003150317w6ff03f55ha1807eb1a841b39b@mail.gmail.com -->
<!--X-Reference: 4B9EA39D.2030801@gmx.ch -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: r10993 - /branches/bieri_gui/auto_analyses/relax_fit.py -- March 15, 2010 - 23:33</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: r10993 - /branches/bieri_gui/auto_analyses/relax_fit.py</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00023" class="tabs">Index by Date</a> | <a href="threads.html#00023" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00022.html">Date Prev</a>] [<a href="msg00024.html">Date Next</a>] [<a href="msg00018.html">Thread Prev</a>] [<a href="msg00042.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Michael Bieri &lt;michael.bieri@xxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Mon, 15 Mar 2010 23:32:45 +0100</li>
<li class="menuitem">
<em>Cc</em>: relax-devel@xxxxxxx</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00023.html">7f080ed11003151532v1bbe7282u2cfcabb5a00aefa0@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;E1NqwA8-00023Q-C2@xxxxxxxxxxxxxxxxxx&gt;	&lt;7f080ed11003150317w6ff03f55ha1807eb1a841b39b@xxxxxxxxxxxxxx&gt;	&lt;4B9EA39D.2030801@xxxxxx&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on March 15, 2010 - 23:33:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Hi,

I'll look into this and try to revert all the changes.  The svn merge
-rxxx:xxx command is what must be used in these cases to remove solely
the commits to be deleted.  The issue comes about with the handling of
the branch, especially merging it back.  The commits are like little
packets that will be applied one by one to the 1.3 line, and if there
is anything funny there then the merging process will not know what to
do.  For example if you would like to remove revisions 45, 46, 48, but
not 47, you need to type:

$ svn merge -r48:47 .
$ svn merge -r46:44 .

If there are any conflicts at any point (according to 'svn st') this
must be resolved.  It would be best to discuss the issue on the
mailing list so we can sort out what needs to be done.  To fix this
will require a series of 'svn merge' commands.  I'll see what I can
do.

Regards,

Edward


On 15 March 2010 22:16, Michael Bieri &lt;michael.bieri@xxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">I am sorry, I think I messed it up.... There were a lot of conflicts by
reverting the changes made, so I downloaded the initial relax_fit.py
script you created and replaced it. The command then was the normal svn
diff &gt;patch.... The problem that occurred somehow was that suddenly
(after downloading a clean copy), there was a header an about 20 lines
of code followed by the same header with the complete code. In this
commit, I just deleted the first rubbish code.

Edward d'Auvergne schrieb:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi Michael,

Please stop changing this code, otherwise soon I will have to delete
the branch and we will have to start again!!  I cannot keep track of
the revisions going in and out!  Please state the exact svnmerge
commands you use in the commit messages, this is essential!  This
commit looks like a deletion by hand rather than a svnmerge command.
Which means that the svnmerge command used previously was incorrect
(<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/bieri_gui/auto_analyses/relax_fit.py?rev=10960&amp;r1=10936&amp;r2=10960">http://svn.gna.org/viewcvs/relax/branches/bieri_gui/auto_analyses/relax_fit.py?rev=10960&amp;r1=10936&amp;r2=10960</a>).
 Let me try to fix this.  But first you need to state the svnmerge
commands you have used so far.  I will try to recover this so that the
bieri_gui branch is not totally and irreversibly corrupted.  I might
be able to save this by reverting on mass the entire 'auto' directory
using svnmerge from the very first revision of this branch until now!
I hope this will be enough.  If this is a deletion by hand, then the
branch cannot be merged back into the 1.3 line.  I can check this by
merging back into the 1.3 line (without committing the merge).

Cheers,

Edward



On 14 March 2010 23:19,  &lt;michael.bieri@xxxxxx&gt; wrote:

</pre><blockquote class="blockquote"><pre style="margin: 0em;">Author: michaelbieri
Date: Sun Mar 14 23:19:55 2010
New Revision: 10993

URL: <a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax?rev=10993&amp;view=rev">http://svn.gna.org/viewcvs/relax?rev=10993&amp;view=rev</a>
Log:
Cleaned up relax_fit.py code, which was broken after revision 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax?rev=10960&amp;view=rev">http://svn.gna.org/viewcvs/relax?rev=10960&amp;view=rev</a>.

Modified:
   branches/bieri_gui/auto_analyses/relax_fit.py

Modified: branches/bieri_gui/auto_analyses/relax_fit.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/bieri_gui/auto_analyses/relax_fit.py?rev=10993&amp;r1=10992&amp;r2=10993&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/bieri_gui/auto_analyses/relax_fit.py?rev=10993&amp;r1=10992&amp;r2=10993&amp;view=diff</a>
==============================================================================
--- branches/bieri_gui/auto_analyses/relax_fit.py (original)
+++ branches/bieri_gui/auto_analyses/relax_fit.py Sun Mar 14 23:19:55 2010
@@ -22,10 +22,6 @@

 # Module docstring.
 &quot;&quot;&quot;The automatic relaxation curve fitting protocol.&quot;&quot;&quot;
-
-#python modules
-import time
-from os import sep

 # relax module imports.
 from prompt.interpreter import Interpreter
@@ -57,96 +53,6 @@
        self.relax_times = relax_times
        self.int_method = int_method
        self.mc_num = mc_num
-        self.pdb_file = pdb_file
-        self.unresolved = unresolved
-        self.directory = directory
-        self.grace_dir = self.directory + sep + 'grace'
-        self.rx_type = rx_type
-        self.freq = str(freq)
-
-        # User variable checks.
-        self.check_vars()
-
-        # Load the interpreter.
-        self.interpreter = Interpreter(show_script=False, quit=False, 
raise_relax_error=True)
-        self.interpreter.populate_self()
-        self.interpreter.on(verbose=False)
-
-        # Execute.
-        self.run()
-
-
-    def run(self):
-        &quot;&quot;&quot;Set up and run the curve-fitting.&quot;&quot;&quot;
-
-        # Create the data pipe.
-        self.interpreter.pipe.create(self.pipe_name, 'relax_fit')
-
-        # Load the sequence.
-        self.interpreter.sequence.read(file=self.seq_args[0], 
dir=self.seq_args[1], mol_name_col=self.seq_args[2], 
res_num_col=self.seq_args[3], res_name_col=self.seq_args[4], 
spin_num_col=self.seq_args[5], spin_name_col=self.seq_args[6], 
sep=self.seq_args[7])
-
-        # Loop over the spectra.
-        for i in xrange(len(self.file_names)):
-            # Load the peak intensities.
-            
self.interpreter.spectrum.read_intensities(file=self.file_names[i], 
spectrum_id=self.file_names[i], int_method=self.int_method)
-
-            # Set the relaxation times.
-            
self.interpreter.relax_fit.relax_time(time=self.relax_times[i]), 
spectrum_id=self.file_names[i])
-###############################################################################
-#                                                                        
     #
-# Copyright (C) 2004-2010 Edward d'Auvergne                              
     #
-#                                                                        
     #
-# This file is part of the program relax.                                
     #
-#                                                                        
     #
-# relax is free software; you can redistribute it and/or modify          
     #
-# it under the terms of the GNU General Public License as published by   
     #
-# the Free Software Foundation; either version 2 of the License, or      
     #
-# (at your option) any later version.                                    
     #
-#                                                                        
     #
-# relax is distributed in the hope that it will be useful,               
     #
-# but WITHOUT ANY WARRANTY; without even the implied warranty of         
     #
-# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the          
     #
-# GNU General Public License for more details.                           
     #
-#                                                                        
     #
-# You should have received a copy of the GNU General Public License      
     #
-# along with relax; if not, write to the Free Software                   
     #
-# Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  
USA   #
-#                                                                        
     #
-###############################################################################
-
-# Module docstring.
-&quot;&quot;&quot;The automatic relaxation curve fitting protocol.&quot;&quot;&quot;
-
-# relax module imports.
-from prompt.interpreter import Interpreter
-
-
-
-class Relax_fit:
-    def __init__(self, pipe_name='rx', seq_args=None, file_names=None, 
relax_times=None, int_method='height', mc_num=500):
-        &quot;&quot;&quot;Perform relaxation curve fitting.
-
-        @keyword pipe_name:     The name of the data pipe to create.
-        @type pipe_name:        str
-        @keyword seq_args:      The sequence data (file name, dir, 
mol_name_col, res_num_col, res_name_col, spin_num_col, spin_name_col, 
sep).  These are the arguments to the  sequence.read() user function, for 
more information please see the documentation for that function.
-        @type seq_args:         list of lists of [str, None or str, None 
or int, None or int, None or int, None or int, None or int, None or int, 
None or int, None or str]
-        @keyword file_names:    A list of all the peak list file names.
-        @type file_names:       list of str
-        @keyword relax_times:   The list of relaxation times 
corresponding to file_names.  These two lists must be of the same size.
-        @type relax_times:      list of float
-        @keyword int_method:    The integration method, one of 'height', 
'point sum' or 'other'.
-        @type int_method:       str
-        @keyword mc_num:        The number of Monte Carlo simulations to 
be used for error analysis at the end of the analysis.
-        @type mc_num:           int
-        &quot;&quot;&quot;
-
-        # Store the args.
-        self.pipe_name = pipe_name
-        self.seq_args = seq_args
-        self.file_names = file_names
-        self.relax_times = relax_times
-        self.int_method = int_method
-        self.mc_num = mc_num

        # User variable checks.
        self.check_vars()


_______________________________________________
relax (<a  rel="nofollow" href="http://nmr-relax.com">http://nmr-relax.com</a>)

This is the relax-commits mailing list
relax-commits@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="/mail.gna.org/listinfo/relax-commits">https://mail.gna.org/listinfo/relax-commits</a>


</pre></blockquote><pre style="margin: 0em;">

_______________________________________________
relax (<a  rel="nofollow" href="http://nmr-relax.com">http://nmr-relax.com</a>)

This is the relax-devel mailing list
relax-devel@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="/mail.gna.org/listinfo/relax-devel">https://mail.gna.org/listinfo/relax-devel</a>


</pre></blockquote><pre style="margin: 0em;">

_______________________________________________
relax (<a  rel="nofollow" href="http://nmr-relax.com">http://nmr-relax.com</a>)

This is the relax-devel mailing list
relax-devel@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="/mail.gna.org/listinfo/relax-devel">https://mail.gna.org/listinfo/relax-devel</a>

</pre></blockquote><pre style="margin: 0em;">


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00042" href="msg00042.html">Re: r10993 - /branches/bieri_gui/auto_analyses/relax_fit.py</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00012" href="msg00012.html">Re: r10993 - /branches/bieri_gui/auto_analyses/relax_fit.py</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00018" href="msg00018.html">Re: r10993 - /branches/bieri_gui/auto_analyses/relax_fit.py</a></strong>
<ul><li><em>From:</em> Michael Bieri</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Tue Mar 16 15:00:36 2010</div>  
</body>
</html>
