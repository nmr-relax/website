<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: How is the R2eff data collected and processed for clustered analysis? -->
<!--X-From-R13: "Sqjneq q'Ohiretar" &#60;rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Wed, 04 Jun 2014 15:04:53 +0200 -->
<!--X-Message-Id: CAED9pY_t+Zw96Xiw&#45;18rpqzTxQyTG3w=omLOLmRp9jmNceuCpA@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: CA+CBx2Mkmn7AyX1O=CVFbG68BSq9nEMBcZUUMnMBJ8vAAkSm1w@mail.gmail.com -->
<!--X-Reference: CA+CBx2NCC_GGBpMBma6&#45;tiC1ReoEywG=DazwxmBUEZ2pLGEh4g@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: How is the R2eff data collected and processed for clustered analysis? -- June 04, 2014 - 15:04</title>
<link rel="stylesheet" type="text/css" href="/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="https://gna.org/images/gna.theme/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: How is the R2eff data collected and processed for clustered analysis?</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00007" class="tabs">Index by Date</a> | <a href="threads.html#00007" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00006.html">Date Prev</a>] [<a href="msg00008.html">Date Next</a>] [<a href="msg00005.html">Thread Prev</a>] [<a href="msg00010.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Wed, 4 Jun 2014 15:04:22 +0200</li>
<li class="menuitem">
<em>Cc</em>: &quot;relax-devel@xxxxxxx&quot; &lt;relax-devel@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113; h=mime-version:sender:in-reply-to:references:date:message-id:subject :from:to:cc:content-type:content-transfer-encoding; bh=lLMdE3b3DEPlqw0aFGSlJXFTChXWXYGEbNxfiQo/+nA=; b=dkHKHWx6+UttfuvSq+YJep/y2Vj/jPKOrGXO7/bkEMkiXUI+MCrXLNJ7yagAIjRRg+ sQ93HVDfb885n4wRdyY45fl7MIZTDKCW4nIvvfPsI18jHi4nV5+i4UfTZTQNgmWOUt8w gE7RplE75O+dndKaVJucQ+xwnm7SDuHIeTwCvnReeyi606HeH9MCv++Gj5h8Izs8+Wk1 UuSX5d2DiKZIfq5vy7ir4KOBN0gOx4ggQm9UkI4D+vk1RDkLOmNeX++tn/ZPG2popv2l UWMlnVeFG+Je4cE1GO9FmJPxX5w88xLuyOKKwppz/Ep6OUuDUVlF2qg3WtR7nXv/jPTI W8Ng==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;CAED9pY_t+Zw96Xiw-18rpqzTxQyTG3w=omLOLmRp9jmNceuCpA@mail.gmail.com&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;CA+CBx2Mkmn7AyX1O=CVFbG68BSq9nEMBcZUUMnMBJ8vAAkSm1w@mail.gmail.com&gt; &lt;CA+CBx2NCC_GGBpMBma6-tiC1ReoEywG=DazwxmBUEZ2pLGEh4g@mail.gmail.com&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on June 04, 2014 - 15:04:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Hi,

Such a huge speed up cannot be from the changes of the 'disp_speed'
branch alone.  I would expect from that branch a maximum drop from 30
min to 15 min.  Therefore it must be your grid search changes.  When
changing, simplifying, or eliminating the grid search, you have to be
very careful about the introduced bias.  This bias is unavoidable.  It
needs to be mentioned in the methods of any paper.  The key is to be
happy that the bias you have introduced will not negatively impact
your results.  For example if you believe that the grid search
replacement is reasonably close to the true solution that the
optimisation will be able to reach the global minimum.  You also have
to convince the people reading your paper that the introduced bias is
reasonable.

As for a script to show the speed changes, you could have a look at
maybe the test_suite/shared_data/dispersion/Hansen/relax_results/relax_disp.py
file.  This performs a full analysis with a large range of dispersion
models on the truncated data set from Flemming Hansen.  Or
test_suite/shared_data/dispersion/Hansen/relax_disp.py which uses all
of Flemming's data.  These could be run before and after the merger of
the 'disp_speed' branch, maybe with different models and the profile
flag turned on.  You could then create a text file in the
test_suite/shared_data/dispersion/Hansen/relax_results/ directory
called something like 'relax_timings' to permanently record the speed
ups.  This file can be used in the future for documenting any other
speed ups as well.

Regards,

Edward




On 4 June 2014 14:37, Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Looking at my old data, I can see that writing out of data between each
global fit analysis before took around 30 min.

They now take 2-6 mins.

I almost can't believe that speed up!

Could we devise a devel-script, which we could use to simulate the change?

Best
Troels



2014-06-04 14:24 GMT+02:00 Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxxxxxx&gt;:

</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi Edward.

After the changes to the lib/dispersion/model.py files, I see massive
speed-up of the computations.

During 2 days, I performed over 600 global fittings for a 68 residue
protein, where all residues where clustered.I just did it with 1 cpu.

This is really really impressive.

I did though also alter how the grid search was performed, pre-setting
some of the values from known values referred to in a paper.
So I can't really say what has cut the time down.

But looking at the calculations running, the minimisation runs quite fast.

So, how does relax do the collecting of data for global fitting?

Does i collect all the R2eff values for the clustered spins, and sent it
to the target function
together with the array of parameters to vary?

Or does it calculate per spin, and share the common parameters?

My current bottle neck actually seems to be the saving of the state file,
between each iteration of global analysis.

Best
Troels

</pre></blockquote><pre style="margin: 0em;">_______________________________________________
relax (<a  rel="nofollow" href="http://www.nmr-relax.com">http://www.nmr-relax.com</a>)

This is the relax-devel mailing list
relax-devel@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="https://mail.gna.org/listinfo/relax-devel">https://mail.gna.org/listinfo/relax-devel</a>
</pre></blockquote><pre style="margin: 0em;">


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00010" href="msg00010.html">Re: How is the R2eff data collected and processed for clustered analysis?</a></strong>
<ul><li><em>From:</em> Troels Emtekær Linnet</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00004" href="msg00004.html">How is the R2eff data collected and processed for clustered analysis?</a></strong>
<ul><li><em>From:</em> Troels Emtekær Linnet</li></ul></li>
<li><strong><a name="00005" href="msg00005.html">Re: How is the R2eff data collected and processed for clustered analysis?</a></strong>
<ul><li><em>From:</em> Troels Emtekær Linnet</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer">You are on the <a href="http://gna.org">Gna!</a> mail server.</div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Wed Jun 04 17:00:11 2014</div>  
</body>
</html>
