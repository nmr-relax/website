<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: Temperature calibration &#38; relax @ Mac OS X 10.7.	3 „Lion“ -->
<!--X-From-R13: "Sqjneq q'Ohiretar" <rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Thu, 05 Apr 2012 10:34:21 +0200 -->
<!--X-Message-Id: CAED9pY8xv1dssjNR53gcfevL0LusPRR&#45;oTNji9OH8cwWsD1Rkg@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 15983F01&#45;ECC5&#45;4C70&#45;BC56&#45;5D07A903C489@fmp&#45;berlin.de -->
<!--X-Reference: CAED9pY_SwQrHovzmoU52rFC_dVrfA0o93ZtrzVvQkgLpcrQN4g@mail.gmail.com -->
<!--X-Reference: 1333036943.82143.YahooMailNeo@web125803.mail.ne1.yahoo.com -->
<!--X-Reference: CAED9pY_32w7UZg4simkMAwwhZbERD&#45;CXQ6FPC6n0uWMnEoS7zA@mail.gmail.com -->
<!--X-Reference: 8D020FEF&#45;3022&#45;4FCF&#45;A36D&#45;EC709619EEEC@fmp&#45;berlin.de -->
<!--X-Reference: CAED9pY9=yrYRU6x9=zwbiUZNQQ&#45;qOzBDd+orHuZmVt3qdghvpA@mail.gmail.com -->
<!--X-Reference: 20120404165843.GA19967@crystal.harvard.edu -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: Temperature calibration &amp; relax @ Mac OS X 10.7.	3 „Lion“ -- April 05, 2012 - 10:34</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: Temperature calibration &amp; relax @ Mac OS X 10.7.	3 „Lion“</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00021" class="tabs">Index by Date</a> | <a href="threads.html#00021" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00020.html">Date Prev</a>] [<a href="msg00022.html">Date Next</a>] [<a href="msg00019.html">Thread Prev</a>] [<a href="msg00029.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Ben Eisenbraun &lt;bene@xxxxxxxxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Thu, 5 Apr 2012 10:33:50 +0200</li>
<li class="menuitem">
<em>Cc</em>: &quot;relax-users@xxxxxxx&quot; &lt;relax-users@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;	h=mime-version:sender:in-reply-to:references:date	:x-google-sender-auth:message-id:subject:from:to:cc:content-type	:content-transfer-encoding;	bh=cXTzFLZH/rnGj5iTbjKsMQkoTfNJh41ol4+llAd3DJ8=;	b=p9awhX84MnrjA5BbNFUPpug9QMQ3BtrUugYYs7kcXAhyrfybEeT3N4reRenisdQZPt	1AgWsJA1KmwQ9x1srT1Saf62B4Fkohjqi5JVB5pwL7oO1zNDnBfkpbb4jxOjNzIlVB4L	6/KIW97kQzSbN5rrf1kQRy0TC8eG1zCsQaFDyH3aTaFuk4BbuWvpbfLGf/jq+Yn2cNOa	oCYkhz0Ry2PAXJSIVY9Lj1cCG7s4q3BaboSljs37W/f/KICc2QkZB4xNUe/Iv2WRnGC9	pMN2tAFypg1C0nsl8eJuR/UMEskwT/qGdfSaeAY1KD6/fdafQucMEofPmhg8WNQbZ024	QwDg==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00021.html">CAED9pY8xv1dssjNR53gcfevL0LusPRR-oTNji9OH8cwWsD1Rkg@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;15983F01-ECC5-4C70-BC56-5D07A903C489@xxxxxxxxxxxxx&gt;	&lt;CAED9pY_SwQrHovzmoU52rFC_dVrfA0o93ZtrzVvQkgLpcrQN4g@xxxxxxxxxxxxxx&gt;	&lt;1333036943.82143.YahooMailNeo@xxxxxxxxxxxxxxxxxxxxxxxxxxxx&gt;	&lt;CAED9pY_32w7UZg4simkMAwwhZbERD-CXQ6FPC6n0uWMnEoS7zA@xxxxxxxxxxxxxx&gt;	&lt;8D020FEF-3022-4FCF-A36D-EC709619EEEC@xxxxxxxxxxxxx&gt;	&lt;CAED9pY9=yrYRU6x9=zwbiUZNQQ-qOzBDd+orHuZmVt3qdghvpA@xxxxxxxxxxxxxx&gt;	&lt;20120404165843.GA19967@xxxxxxxxxxxxxxxxxxx&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on April 05, 2012 - 10:34:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Hi Ben,

Thank you for that info, that will really help in solving some of
these problems!  I never though that one of the issues is that of the
machine architecture.  This is obviously a multi-layer, i.e. not just
one failure point, problem with the py2app script for converting
Python programs/scripts into full Mac Applications
(<a  rel="nofollow" href="http://wiki.python.org/moin/MacPython/py2app">http://wiki.python.org/moin/MacPython/py2app</a>,
<a  rel="nofollow" href="http://svn.pythonmac.org/py2app/py2app/trunk/doc/index.html">http://svn.pythonmac.org/py2app/py2app/trunk/doc/index.html</a>).  I might
have to approach this in a number of ways, some fixes will probably
allow relax to run for some Mac users while others will not be so
lucky.  In the first attack, I will try to eliminate this TickCount
problem.  This seams to be a problem with program argument emulation
on the Mac with certain Python versions.  A solution is posted at
<a  rel="nofollow" href="http://stackoverflow.com/questions/3461983/evt-tickcount-not-found-with-python2-6-on-osx-10-6-3">http://stackoverflow.com/questions/3461983/evt-tickcount-not-found-with-python2-6-on-osx-10-6-3</a>,
where the suggested code is:

APP = ['MyApp.py']
OPTIONS = {
   'argv_emulation': False,
   ...
}

setup(
    app=APP,
    options={'py2app': OPTIONS},
    setup_requires=['py2app'],
)

In relax's py2app setup.py script, the 'argv_emulation' is currently
set to True (see
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/*checkout*/relax/1.3/setup.py?revision=15481&amp;content-type=text%2Fplain">http://svn.gna.org/viewcvs/*checkout*/relax/1.3/setup.py?revision=15481&amp;content-type=text%2Fplain</a>).
 relax currently requires arguments, but maybe I can hack the code to
catch this and skip the argument processing.  But only for this
situation as the prompt/scripting UI modes will be important for some
users.

This fix doesn't solve the problem of the py2app created relax app not
using the bundled Python version and internal Python modules, so some
users will still be affected by that.  For some people this is not an
issue while for others it causes relax to fail.

A third problem might be in the wxPython code, as was seen and
reported by Jack Howarth when creating the Fink distribution of relax
(see the threads starting at
<a  rel="nofollow" href="/mail.gna.org/public/relax-users/2012-03/msg00053.html">https://mail.gna.org/public/relax-users/2012-03/msg00053.html</a> and
<a  rel="nofollow" href="/mail.gna.org/public/relax-users/2012-04/msg00003.html">https://mail.gna.org/public/relax-users/2012-04/msg00003.html</a>, and
<a  rel="nofollow" href="http://pdb.finkproject.org/pdb/browse.php?name=relax">http://pdb.finkproject.org/pdb/browse.php?name=relax</a>).  This will
probably also affect those who install relax from the sources
distribution file
(<a  rel="nofollow" href="/download.html#Source_code_release">http://www.nmr-relax.com/download.html#Source_code_release</a>).  The
problem might require a workaround inside the relax GUI code.  I will
try to tackle each problem one by one, and hopefully as each is solved
more and more users will have luck in running relax in GUI mode on the
Mac.

Cheers,

Edward


P. S.  For those users who can currently run the relax application in
GUI mode from the DMG file, these fixes should not affect you.



On 4 April 2012 18:58, Ben Eisenbraun &lt;bene@xxxxxxxxxxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi Edward,

I am seeing the same issues reported by others.

 $ open /programs/i386-mac/relax/1.3.14/relax.app

Output in Console.app:

4/4/12 12:15:26.639 PM [0x0-0x18a28a1].com.nmr-relax.relax: Traceback (most 
recent call last):
4/4/12 12:15:26.639 PM [0x0-0x18a28a1].com.nmr-relax.relax:   File 
&quot;/nfs/programs/i386-mac/relax/1.3.14/relax.app/Contents/Resources/__boot__.py&quot;,
 line 126, in &lt;module&gt;
4/4/12 12:15:26.640 PM [0x0-0x18a28a1].com.nmr-relax.relax:     
_argv_emulation()
4/4/12 12:15:26.640 PM [0x0-0x18a28a1].com.nmr-relax.relax:   File 
&quot;/nfs/programs/i386-mac/relax/1.3.14/relax.app/Contents/Resources/__boot__.py&quot;,
 line 124, in _argv_emulation
4/4/12 12:15:26.640 PM [0x0-0x18a28a1].com.nmr-relax.relax:     
_get_argvemulator().mainloop()
4/4/12 12:15:26.640 PM [0x0-0x18a28a1].com.nmr-relax.relax:   File 
&quot;/nfs/programs/i386-mac/relax/1.3.14/relax.app/Contents/Resources/__boot__.py&quot;,
 line 63, in mainloop
4/4/12 12:15:26.640 PM [0x0-0x18a28a1].com.nmr-relax.relax:     stoptime = 
Evt.TickCount() + timeout
4/4/12 12:15:26.640 PM [0x0-0x18a28a1].com.nmr-relax.relax: AttributeError: 
'module' object has no attribute 'TickCount'
4/4/12 12:15:26.715 PM relax: relax Error

This is a problem related to Carbon support in 32-bit vs 64-bit Python. I
can reproduce this on the command line in 10.6 and 10.7 like so:

 $ type python
python is hashed (/usr/bin/python)
 $ python
Python 2.7.1 (r271:86832, Jun 16 2011, 16:59:05)
[GCC 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2335.15.00)] on 
darwin
Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.
</pre><blockquote class="blockquote"><blockquote class="blockquote"><blockquote class="blockquote"><pre style="margin: 0em;">from Carbon import Evt
Evt.TickCount()
</pre></blockquote></blockquote></blockquote><pre style="margin: 0em;">Traceback (most recent call last):
 File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
AttributeError: 'module' object has no attribute 'TickCount'

And it's because the 64-bit Python doesn't have full Carbon support:

 $ export VERSIONER_PYTHON_PREFER_32_BIT=true
 $ python
Python 2.7.1 (r271:86832, Jun 16 2011, 16:59:06)
[GCC 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2335.15.00)] on 
darwin
Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.
</pre><blockquote class="blockquote"><blockquote class="blockquote"><blockquote class="blockquote"><pre style="margin: 0em;">from Carbon import Evt
Evt.TickCount()
</pre></blockquote></blockquote></blockquote><pre style="margin: 0em;">278493166

Similar thread here:

<a  rel="nofollow" href="http://stackoverflow.com/questions/3461983/evt-tickcount-not-found-with-python2-6-on-osx-10-6-3">http://stackoverflow.com/questions/3461983/evt-tickcount-not-found-with-python2-6-on-osx-10-6-3</a>

I can run the relax binary directly if I force 32-bit:

 $ arch -i386 relax.app/Contents/MacOS/relax

And I can get the relax.app bundle to work if I lipo the relax binary:

 $ mv relax relax.orig
 $ lipo -thin i386 -output relax relax.orig

I tried various other ways of forcing 32-bitness for Python: lipo'ing the
python binaries, export VERISONER_PYTHON_PREFER_32_BIT=true,
LSArchitecturePriority in the Info.plist without effect.

-ben

--
| Ben Eisenbraun
| SBGrid Consortium                          | <a  rel="nofollow" href="http://sbgrid.org">http://sbgrid.org</a>       |
| Harvard Medical School                     | <a  rel="nofollow" href="http://hms.harvard.edu">http://hms.harvard.edu</a>  |
</pre></blockquote><pre style="margin: 0em;">


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00031" href="msg00031.html">Re: Temperature calibration &amp; re	lax @ Mac OS X 10.7.3 „Lion“</a></strong>
<ul><li><em>From:</em> Ben Eisenbraun</li></ul></li>
<li><strong><a name="00029" href="msg00029.html">Re: Temperature calibration &amp; relax @ Mac OS X 10.7.	3 „Lion“</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00000" href="msg00000.html">Re: Temperature calibration &amp; relax @ Mac	 OS X 10.7.3 „Lion“</a></strong>
<ul><li><em>From:</em> Martin Ballaschk</li></ul></li>
<li><strong><a name="00001" href="msg00001.html">Re: Temperature calibration &amp; relax @ Mac OS X 10.7.	3 „Lion“</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00019" href="msg00019.html">Re: Temperature calibration &amp; re	lax @ Mac OS X 10.7.3 „Lion“</a></strong>
<ul><li><em>From:</em> Ben Eisenbraun</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Thu Apr 05 16:40:06 2012</div>  
</body>
</html>
