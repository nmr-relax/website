<!-- MHonArc v2.6.18 -->
<!--X-Subject: Idea to fix systemtest? -->
<!--X-From-R13: Febryf Szgrxæe Zvaarg &#60;gyvaargNaze&#45;erynk.pbz> -->
<!--X-Date: Sun, 15 Jun 2014 23:03:45 +0200 -->
<!--X-Message-Id: CA+CBx2Oika&#45;=uCxxsc2URbV9EpmeF1t0sn28W&#45;T7edZRN+wfmQ@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Idea to fix systemtest? -- June 15, 2014 - 23:03</title>
<link rel="stylesheet" type="text/css" href="/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="https://gna.org/images/gna.theme/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Idea to fix systemtest?</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00246" class="tabs">Index by Date</a> | <a href="threads.html#00246" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00245.html">Date Prev</a>] [<a href="msg00247.html">Date Next</a>] [<a href="msg00238.html">Thread Prev</a>] [<a href="msg00247.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: &quot;relax-devel@xxxxxxx&quot; &lt;relax-devel@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Sun, 15 Jun 2014 23:02:52 +0200</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113; h=mime-version:sender:from:date:message-id:subject:to:content-type; bh=RauEEQCYlvUM1nbPzUqh8mTeQpdTrQ5tjLTueP/XdkQ=; b=0MfzXyr0BXV7MAZsBJG2x87+JZG4nLNlmvXMPHwb2e86g2c5Xqh8FvmdDFUlGU9KfA L0oRMvMtHpJPp2a27ZKwccnU67sNcAcjLdRkFdOy3xKjcGkKXYE1KD2VG5mtFs2iIiQZ Ki/Mnf6jxroTntz9MepZK+vwat2U0DbKB3z0rRPbNkdN060STlCyKuajuRt7BGqnz2O6 fEUFjQ0a3WOWeftXbUZePv1unbsKon7OOuoSaJ4Q29Db8X/OybRJBZUKst2fc0hIUBoa /9uorFKZTPx3ly/G/cjTIhcwEyc7Z2/9XehJymNXkVyLNbKfFsvMU2811t5LNC7+U+PA BoZA==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;CA+CBx2Oika-=uCxxsc2URbV9EpmeF1t0sn28W-T7edZRN+wfmQ@mail.gmail.com&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Troels Emtekær Linnet</strong> on June 15, 2014 - 23:03:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Hi Ed.

This now fails:
 Relax_disp.test_bug_21460_disp_cluster_fail

&quot;/Users/tlinnet/software/disp_spin_speed/specific_analyses/relax_disp/data.py&quot;,
line 1863, in plot_disp_curves
    point = cpmg_frqs_new[ei][mi][oi][di]
IndexError: list index out of range

Do you have an idea?

Best
Troels


-------------------
---------------------
- The 'R2eff' model -
---------------------


relax&gt; pipe.copy(pipe_from='origin - relax_disp (Thu Jan  2 13:46:44
2014)', pipe_to='R2eff - relax_disp (Thu Jan  2 13:46:44 2014)',
bundle_to='relax_disp (Thu Jan  2 13:46:44 2014)')

relax&gt; pipe.switch(pipe_name='R2eff - relax_disp (Thu Jan  2 13:46:44
2014)')

relax&gt; relax_disp.select_model(model='R2eff')
The model for determining the R2eff/R1rho values from peak intensities.

relax&gt; calc(verbosity=1)
Calculating the R2eff/R1rho values for fixed relaxation time period data.
Spin ':459@N'.


Results writing
===============


relax&gt;
relax_disp.plot_disp_curves(dir='/var/folders/ww/1jkhkh315x57jglgxnr9g24w0000gp/T/tmppeiu5o/R2eff',
num_points=1000, extend=500.0, force=True)
Opening the file
'/var/folders/ww/1jkhkh315x57jglgxnr9g24w0000gp/T/tmppeiu5o/R2eff/disp_459_N.agr'
for writing.
Opening the file
'/var/folders/ww/1jkhkh315x57jglgxnr9g24w0000gp/T/tmppeiu5o/R2eff/grace2images.py'
for writing.

relax&gt;
relax_disp.write_disp_curves(dir='/var/folders/ww/1jkhkh315x57jglgxnr9g24w0000gp/T/tmppeiu5o/R2eff',
force=True)
Opening the file
'/var/folders/ww/1jkhkh315x57jglgxnr9g24w0000gp/T/tmppeiu5o/R2eff/disp_459_N.out'
for writing.

relax&gt; value.write(param='r2eff', file='r2eff.out',
dir='/var/folders/ww/1jkhkh315x57jglgxnr9g24w0000gp/T/tmppeiu5o/R2eff',
scaling=1.0, comment=None, bc=False, force=True)
Opening the file
'/var/folders/ww/1jkhkh315x57jglgxnr9g24w0000gp/T/tmppeiu5o/R2eff/r2eff.out'
for writing.

relax&gt; grace.write(x_data_type='res_num', y_data_type='r2eff',
spin_id=None, plot_data='value', file='r2eff.agr',
dir='/var/folders/ww/1jkhkh315x57jglgxnr9g24w0000gp/T/tmppeiu5o/R2eff',
force=True, norm=False)
Opening the file
'/var/folders/ww/1jkhkh315x57jglgxnr9g24w0000gp/T/tmppeiu5o/R2eff/r2eff.agr'
for writing.

relax&gt; results.write(file='results',
dir='/var/folders/ww/1jkhkh315x57jglgxnr9g24w0000gp/T/tmppeiu5o/R2eff',
compress_type=1, force=True)
Opening the file
'/var/folders/ww/1jkhkh315x57jglgxnr9g24w0000gp/T/tmppeiu5o/R2eff/results.bz2'
for writing.



----------------------
- The 'No Rex' model -
----------------------


relax&gt; pipe.copy(pipe_from='origin - relax_disp (Thu Jan  2 13:46:44
2014)', pipe_to='No Rex - relax_disp (Thu Jan  2 13:46:44 2014)',
bundle_to='relax_disp (Thu Jan  2 13:46:44 2014)')

relax&gt; pipe.switch(pipe_name='No Rex - relax_disp (Thu Jan  2 13:46:44
2014)')

relax&gt; relax_disp.select_model(model='No Rex')
The model for no chemical exchange relaxation.

relax&gt; value.copy(pipe_from='R2eff - relax_disp (Thu Jan  2 13:46:44
2014)', pipe_to='No Rex - relax_disp (Thu Jan  2 13:46:44 2014)',
param='r2eff')


Optimisation
============


Nesting and model equivalence checks
------------------------------------

No model nesting or model equivalence detected.

relax&gt; grid_search(lower=None, upper=None, inc=3, constraints=True,
verbosity=1)


Fitting to the spin block [':459@N']
------------------------------------

Unconstrained grid search size: 9 (constraints may decrease this size).


Grid search
~~~~~~~~~~~

Searching through 9 grid nodes.
k: 0        xk: [            0.5,             0.5]    fk: 436.862516468

k: 3        xk: [            0.5,            1.25]    fk: 406.49758716


Optimised parameter values:
r2 (SQ CPMG - 0.00059977 MHz)         5.000000000000000
r2 (SQ CPMG - 599.77212354 MHz)        12.500000000000000

relax&gt; minimise(min_algor='simplex', line_search=None, hessian_mod=None,
hessian_type=None, func_tol=1e-05, grad_tol=None, max_iter=1000,
constraints=True, scaling=True, verbosity=1)


Fitting to the spin block [':459@N']
------------------------------------



Logarithmic barrier function
~~~~~~~~~~~~~~~~~~~~~~~~~~~~
k: 0        xk: [            0.5,            1.25]    fk: 406.49758716

Entering sub-algorithm.
 Simplex minimisation
 ~~~~~~~~~~~~~~~~~~~~

k: 0        xk: [            0.5,            1.25]    fk: 406.443271114


Parameter values: [0.0021207261241890383, 0.89458126560725759]
Function value:   1.2065517126305849
 Iterations:       43
Function calls:   83
Gradient calls:   0
 Hessian calls:    0
Warning:          None

k: 1        xk: [ 0.002120726124,    0.8945812656]    fk: 1.20356618386

Entering sub-algorithm.
 Simplex minimisation
~~~~~~~~~~~~~~~~~~~~

k: 0        xk: [ 0.002120726124,    0.8945812656]    fk: 1.20336591206


Parameter values: [0.00022841489930163758, 0.89459438262210345]
 Function value:   1.1986979999438134
Iterations:       23
Function calls:   48
 Gradient calls:   0
Hessian calls:    0
Warning:          None

k: 2        xk: [0.0002284148993,    0.8945943826]    fk: 1.19844299599

Entering sub-algorithm.
 Simplex minimisation
 ~~~~~~~~~~~~~~~~~~~~

k: 0        xk: [0.0002284148993,    0.8945943826]    fk: 1.19844554603


Parameter values: [0.00022841489930163758, 0.89459438262210345]
Function value:   1.1984455460281873
 Iterations:       9
Function calls:   21
Gradient calls:   0
 Hessian calls:    0
Warning:          None

k: 3        xk: [0.0002284148993,    0.8945943826]    fk: 1.19844895966

Entering sub-algorithm.
 Simplex minimisation
~~~~~~~~~~~~~~~~~~~~

k: 0        xk: [0.0002284148993,    0.8945943826]    fk: 1.19844302149


Parameter values: [0.00022841489930163758, 0.89459438262210345]
 Function value:   1.1984430214890309
Iterations:       9
Function calls:   21
 Gradient calls:   0
Hessian calls:    0
Warning:          None


Parameter values: [0.00022841489930163758, 0.89459438262210345]
Function value:   1.1984429959886356
Iterations:       84
Function calls:   173
Gradient calls:   0
Hessian calls:    0
Warning:          None


Optimised parameter values:
r2 (SQ CPMG - 0.00059977 MHz)         0.002284148993016
r2 (SQ CPMG - 599.77212354 MHz)         8.945943826221034

relax&gt; eliminate(function=None, args=None)


Results writing
===============


relax&gt;
relax_disp.plot_disp_curves(dir='/var/folders/ww/1jkhkh315x57jglgxnr9g24w0000gp/T/tmppeiu5o/No
Rex', num_points=1000, extend=500.0, force=True)
Opening the file
'/var/folders/ww/1jkhkh315x57jglgxnr9g24w0000gp/T/tmppeiu5o/No
Rex/disp_459_N.agr' for writing.
Traceback (most recent call last):
  File
&quot;/Users/tlinnet/software/disp_spin_speed/test_suite/system_tests/relax_disp.py&quot;,
line 926, in test_bug_21460_disp_cluster_fail
    relax_disp.Relax_disp(pipe_name=&quot;origin - relax_disp (Thu Jan  2
13:46:44 2014)&quot;, pipe_bundle=&quot;relax_disp (Thu Jan  2 13:46:44 2014)&quot;,
results_dir=self.tmpdir, models=['R2eff', 'No Rex', 'CR72', 'NS CPMG 2-site
expanded'], grid_inc=3, mc_sim_num=5, modsel='AIC', pre_run_dir=None,
insignificance=1.0, numeric_only=False, mc_sim_all_models=False,
eliminate=True)
  File
&quot;/Users/tlinnet/software/disp_spin_speed/auto_analyses/relax_disp.py&quot;, line
124, in __init__
    self.run()
  File
&quot;/Users/tlinnet/software/disp_spin_speed/auto_analyses/relax_disp.py&quot;, line
494, in run
    self.write_results(path=path, model=model)
  File
&quot;/Users/tlinnet/software/disp_spin_speed/auto_analyses/relax_disp.py&quot;, line
541, in write_results
    self.interpreter.relax_disp.plot_disp_curves(dir=path, force=True)
  File &quot;/Users/tlinnet/software/disp_spin_speed/prompt/uf_objects.py&quot;, line
223, in __call__
    self._backend(*new_args, **uf_kargs)
  File
&quot;/Users/tlinnet/software/disp_spin_speed/specific_analyses/relax_disp/data.py&quot;,
line 1863, in plot_disp_curves
    point = cpmg_frqs_new[ei][mi][oi][di]
IndexError: list index out of range

----------------------------------------------------------------------
Ran 1 test in 0.121s

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00247" href="msg00247.html">Re: Idea to fix systemtest?</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer">You are on the <a href="http://gna.org">Gna!</a> mail server.</div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Mon Jun 16 19:20:16 2014</div>  
</body>
</html>
