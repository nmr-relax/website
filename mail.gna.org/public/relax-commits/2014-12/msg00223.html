<!-- MHonArc v2.6.18 -->
<!--X-Subject: r27100 &#45; /trunk/test_suite/system_tests/structure.py -->
<!--X-From-R13: rqjneqNaze&#45;erynk.pbz -->
<!--X-Date: Thu, 11 Dec 2014 19:10:38 +0100 -->
<!--X-Message-Id: E1Xz8CD&#45;0004sm&#45;TP@subversion.gna.org -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>r27100 - /trunk/test_suite/system_tests/structure.py -- December 11, 2014 - 19:10</title>
<link rel="stylesheet" type="text/css" href="/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="https://gna.org/images/gna.theme/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />r27100 - /trunk/test_suite/system_tests/structure.py</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00223" class="tabs">Index by Date</a> | <a href="threads.html#00223" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00222.html">Date Prev</a>] [<a href="msg00224.html">Date Next</a>] [<a href="msg00222.html">Thread Prev</a>] [<a href="msg00224.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: relax-commits@xxxxxxx</li>
<li class="menuitem">
<em>Date</em>: Thu, 11 Dec 2014 18:10:37 -0000</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00223.html">E1Xz8CD-0004sm-TP@subversion.gna.org</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>edward</strong> on December 11, 2014 - 19:10:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Author: bugman
Date: Thu Dec 11 19:10:37 2014
New Revision: 27100

URL: <a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax?rev=27100&amp;view=rev">http://svn.gna.org/viewcvs/relax?rev=27100&amp;view=rev</a>
Log:
Modified some system tests of the structure.align and structure.superimpose 
user functions.

The displace_id argument has been introduced for both of these user functions 
for finer control over
which atoms are translated and rotated by the algorithm.  This allows, for 
example, to align
structures based on a set of backbone heavy atoms while the protons and side 
chains are displaced by
default.  Or if a domain is aligned, then just that domain can be displaced.


Modified:
    trunk/test_suite/system_tests/structure.py

Modified: trunk/test_suite/system_tests/structure.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/trunk/test_suite/system_tests/structure.py?rev=27100&amp;r1=27099&amp;r2=27100&amp;view=diff">http://svn.gna.org/viewcvs/relax/trunk/test_suite/system_tests/structure.py?rev=27100&amp;r1=27099&amp;r2=27100&amp;view=diff</a>
==============================================================================
--- trunk/test_suite/system_tests/structure.py  (original)
+++ trunk/test_suite/system_tests/structure.py  Thu Dec 11 19:10:37 2014
@@ -105,7 +105,7 @@
         self.interpreter.structure.add_atom(mol_name='uniform_mol1', 
atom_name='Ti', res_name='TST', res_num=1, pos=[[1.0, 2.0, 3.0], [1.0, 2.0, 
3.0]], element='Ti', pdb_record='HETATM')
 
         # The alignment.
-        self.interpreter.structure.align(pipes=['ref', 'align'], method='fit 
to first', atom_id='@N,H')
+        self.interpreter.structure.align(pipes=['ref', 'align'], method='fit 
to first', atom_id='@N,H', displace_id='@N,H')
 
         # Output PDB to stdout to help in debugging.
         self.interpreter.structure.write_pdb(file=sys.stdout)
@@ -4335,7 +4335,7 @@
         self.interpreter.structure.add_atom(mol_name='uniform_mol1', 
atom_name='Ti', res_name='TST', res_num=1, pos=[[1.0, 2.0, 3.0], [2.0, 3.0, 
4.0]], element='Ti', pdb_record='HETATM')
 
         # Superimpose the backbone heavy atoms.
-        self.interpreter.structure.superimpose(method='fit to mean', 
atom_id='@N,C,CA,O')
+        self.interpreter.structure.superimpose(method='fit to mean', 
atom_id='@N,C,CA,O', displace_id=':82-114')
 
         # Check that the two structures now have the same atomic coordinates.
         model1 = cdp.structure.structural_data[0].mol[0]
@@ -4346,9 +4346,9 @@
             self.assertAlmostEqual(model1.z[i], model2.z[i], 2)
 
         # The last atom must be different.
-        self.assertNotAlmostEqual(model1.x[-1], model2.x[-1], 2)
-        self.assertNotAlmostEqual(model1.y[-1], model2.y[-1], 2)
-        self.assertNotAlmostEqual(model1.z[-1], model2.z[-1], 2)
+        self.assertAlmostEqual(model1.x[-1] - model2.x[-1], -1.0, 2)
+        self.assertAlmostEqual(model1.y[-1] - model2.y[-1], -1.0, 2)
+        self.assertAlmostEqual(model1.z[-1] - model2.z[-1], -1.0, 2)
 
 
     def test_superimpose_fit_to_mean2(self):



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer">You are on the <a href="http://gna.org">Gna!</a> mail server.</div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Thu Dec 11 19:40:02 2014</div>  
</body>
</html>
