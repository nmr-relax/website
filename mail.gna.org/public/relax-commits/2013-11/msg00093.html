<!-- MHonArc v2.6.16 -->
<!--X-Subject: r21435 &#45; in /branches/relax_disp: ./ auto_analyses/ lib/alignment/	pipe_control/ specific_analyses/n_state_model/ target_fun... -->
<!--X-From-R13: rqjneqNaze&#45;erynk.pbz -->
<!--X-Date: Wed, 13 Nov 2013 18:46:52 +0100 -->
<!--X-Message-Id: E1VgeWh&#45;0003aH&#45;Vk@subversion.gna.org -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>r21435 - in /branches/relax_disp: ./ auto_analyses/ lib/alignment/	pipe_control/ specific_analyses/n_state_model/ target_fun... -- November 13, 2013 - 18:46</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />r21435 - in /branches/relax_disp: ./ auto_analyses/ lib/alignment/	pipe_control/ specific_analyses/n_state_model/ target_fun...</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00093" class="tabs">Index by Date</a> | <a href="threads.html#00093" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00092.html">Date Prev</a>] [<a href="msg00094.html">Date Next</a>] [<a href="msg00092.html">Thread Prev</a>] [<a href="msg00094.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: relax-commits@xxxxxxx</li>
<li class="menuitem">
<em>Date</em>: Wed, 13 Nov 2013 17:46:51 -0000</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00093.html">E1VgeWh-0003aH-Vk@subversion.gna.org</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>edward</strong> on November 13, 2013 - 18:46:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Author: bugman
Date: Wed Nov 13 18:46:51 2013
New Revision: 21435

URL: <a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax?rev=21435&amp;view=rev">http://svn.gna.org/viewcvs/relax?rev=21435&amp;view=rev</a>
Log:
Merged revisions 21391,21407-21434 via svnmerge from 
svn+ssh://bugman@xxxxxxxxxxx/svn/relax/trunk

........
  r21391 | bugman | 2013-11-06 10:21:38 +0100 (Wed, 06 Nov 2013) | 7 lines
  
  Improvements to the pymol.view and molmol.view user functions for finding 
the PDB files.
  
  Now the possibility that this is being run from a results subdirectory is 
taken into consideration.
  If the file cannot be found, the os.pardir parent directory is added to the 
start of the relative
  path and the file checked for.
........
  r21407 | bugman | 2013-11-12 16:47:16 +0100 (Tue, 12 Nov 2013) | 5 lines
  
  The rdc.read user function will now skip all lines of the RDC file starting 
with '#'.
  
  To include molecule identifiers at the start of the line will now require 
quotation marks.
........
  r21408 | bugman | 2013-11-12 19:35:23 +0100 (Tue, 12 Nov 2013) | 3 lines
  
  Shifted the RDC and PCS assembly methods from the main class to the data 
module for the N-state analysis.
........
  r21409 | bugman | 2013-11-12 19:45:04 +0100 (Tue, 12 Nov 2013) | 3 lines
  
  Created the pipe_control.mol_res_spin.is_pseudoatom() function to simplify 
pseudo-atom handling.
........
  r21410 | bugman | 2013-11-12 19:54:20 +0100 (Tue, 12 Nov 2013) | 5 lines
  
  Created the pipe_control.mol_res_spin.pseudoatom_loop() function.
  
  This is used to loop over the spin containers corresponding to a given 
pseudo-atom.
........
  r21411 | bugman | 2013-11-13 09:57:41 +0100 (Wed, 13 Nov 2013) | 5 lines
  
  Added a PDB file and RDC values (and absolute J+D and J) for propylene 
carbonate.
  
  This will be used for testing of pseudo-atoms in the N-state model analysis.
........
  r21412 | bugman | 2013-11-13 10:04:28 +0100 (Wed, 13 Nov 2013) | 3 lines
  
  Renamed the propylene carbonate files to the correct name of pyrotartaric 
anhydride.
........
  r21413 | bugman | 2013-11-13 10:47:37 +0100 (Wed, 13 Nov 2013) | 8 lines
  
  Created two new system tests based on the new pyrotarctic anhydride long 
range (1J, 2J &amp; 3J) RDC data.
  
  The first (N_state_model.test_pyrotartaric_anhydride_rdcs) optimises an 
alignment tensor using long
  range signed RDC data.  The second 
(N_state_model.test_pyrotartaric_anhydride_absT) optimises an
  alignment tensor using long range absolute T (J+D) data.  Both test long 
range data together with
  methyl group pseudo-atom data.
........
  r21414 | bugman | 2013-11-13 11:06:59 +0100 (Wed, 13 Nov 2013) | 5 lines
  
  Added all of the pyrotartaric anhydride RDC generation scripts and files.
  
  This is simply for reference and reproducibility.
........
  r21415 | bugman | 2013-11-13 11:09:09 +0100 (Wed, 13 Nov 2013) | 5 lines
  
  Modifications for the pyrotartaric anhydride system test script.
  
  The grid search now is much quicker, and the RDC correlation plots are now 
sent to DEVNULL.
........
  r21416 | bugman | 2013-11-13 11:12:12 +0100 (Wed, 13 Nov 2013) | 6 lines
  
  Added the return_id argument to the 
pipe_control.mol_res_spin.pseudoatom_loop() function.
  
  This will then yield both the spin container and spin ID string.  This 
mimics the spin_loop()
  function.
........
  r21417 | bugman | 2013-11-13 14:05:03 +0100 (Wed, 13 Nov 2013) | 12 lines
  
  Added proper pseudo-atom support for the RDCs in the N-state model analysis.
  
  This involves a number of changes.  The pseudo-atom specific functions 
ave_rdc_tensor_pseudoatom()
  and ave_rdc_tensor_pseudoatom_dDij_dAmn() have been added to the 
lib.alignment.rdc module.  These
  simply average the values from the equivalent non-pseudo-atom functions.  
The return_rdc_data()
  function in the specific_analyses.n_state_model.data module has been 
modified to assemble the RDC
  constants and unit vectors for all members of the pseudo-atom and add these 
to the returned
  structures, as well as a new list of flags specifying if the interatom pair 
contains pseudo-atoms.
  The N-state model target function and gradient have been updated to send 
the pseudo-atom data to the
  new lib.alignment.rdc module functions.
........
  r21418 | bugman | 2013-11-13 14:18:01 +0100 (Wed, 13 Nov 2013) | 6 lines
  
  J couplings for the N-state analysis are now properly handled for 
pseudo-atoms.
  
  The measured J couplings for the members of the pseudo-atom should not be 
used, but rather that of
  the pseudo-atom spin itself (as the former does not exist).
........
  r21419 | bugman | 2013-11-13 14:26:23 +0100 (Wed, 13 Nov 2013) | 6 lines
  
  Fix for the pyrotartaric_anhydride.py N-state model system test script.
  
  This is used in two system tests.  The user function call for reading the 
inter-spin distances was
  instead reading the J couplings as the distance.
........
  r21420 | bugman | 2013-11-13 14:58:54 +0100 (Wed, 13 Nov 2013) | 3 lines
  
  The interatomic loop now skips the element if either of the spin systems 
are deselected.
........
  r21421 | bugman | 2013-11-13 15:02:27 +0100 (Wed, 13 Nov 2013) | 6 lines
  
  Eliminated the old pseudo-atom handling in the N-state model specific 
return_rdc_data() function.
  
  This was multiplying the RDCs by -3 to handle the tetrahedral geometry of 
the 1J methyl RDCs.
  However this approach is not valid for non-methyl pseudo-atoms or for 2J, 
3J, etc. data.
........
  r21422 | bugman | 2013-11-13 15:06:50 +0100 (Wed, 13 Nov 2013) | 17 lines
  
  Reverted r21420 as the spin containers and interatomic data containers 
should be handled separately.
  
  The command used was:
  svn merge -r21420:r21419 .
  
  This is important to allow interatomic containers with good RDC data to be 
selected while one of the
  spin pairs deselected (for example if its PCS data is bad).
  
  .....
    r21420 | bugman | 2013-11-13 14:58:54 +0100 (Wed, 13 Nov 2013) | 3 lines
    Changed paths:
       M /trunk/pipe_control/interatomic.py
    
    The interatomic loop now skips the element if either of the spin systems 
are deselected.
  .....
........
  r21423 | bugman | 2013-11-13 15:33:18 +0100 (Wed, 13 Nov 2013) | 6 lines
  
  A RelaxError is now raised for the N-state model optimisation with 
gradients when T = J+D data is used.
  
  The gradients for this data type are not implemented yet, so it is better 
to prevent the user from
  using this.
........
  r21424 | bugman | 2013-11-13 15:34:40 +0100 (Wed, 13 Nov 2013) | 5 lines
  
  The N_state_model.test_pyrotartaric_anhydride_absT system test now uses 
simplex optimisation to pass.
  
  The Newton algorithm cannot be used as the gradients for T = J+D type data 
have not been implemented.
........
  r21425 | bugman | 2013-11-13 16:51:00 +0100 (Wed, 13 Nov 2013) | 5 lines
  
  An RDC error of 0.0 will now deselect the corresponding interatomic data 
container.
  
  This can be used for simpler pseudo-atom handling.
........
  r21426 | bugman | 2013-11-13 16:51:59 +0100 (Wed, 13 Nov 2013) | 3 lines
  
  Updated the menthol long range RDC data file to include pseudo-atom member 
distances.
........
  r21427 | bugman | 2013-11-13 16:59:10 +0100 (Wed, 13 Nov 2013) | 5 lines
  
  Renamed the interatomic_loop() function 'selected' argument to 'skip_desel'.
  
  This is to match the spin_loop() function arguments.
........
  r21428 | bugman | 2013-11-13 17:02:06 +0100 (Wed, 13 Nov 2013) | 6 lines
  
  The interatom.unit_vectors user function now calculates the unit vectors 
for deselected containers.
  
  This is useful for pseudo-atom handling where the interatomic containers to 
the pseudo-atom members
  have already been deselected.
........
  r21429 | bugman | 2013-11-13 17:05:05 +0100 (Wed, 13 Nov 2013) | 5 lines
  
  Updated the value checking for the N_state_model.test_absolute_rdc_menthol 
system test.
  
  The pseudo-atoms are now properly handled so the result is now much better.
........
  r21430 | bugman | 2013-11-13 17:35:30 +0100 (Wed, 13 Nov 2013) | 5 lines
  
  The stereochemistry auto-analysis can now accept a file of interatomic 
distances.
  
  This is for better pseudo-atom support.
........
  r21431 | bugman | 2013-11-13 17:46:19 +0100 (Wed, 13 Nov 2013) | 3 lines
  
  The N-state model specific check_rdcs() function now properly handles 
pseudo-atoms.
........
  r21432 | bugman | 2013-11-13 17:52:22 +0100 (Wed, 13 Nov 2013) | 5 lines
  
  The pipe_control.rdc.q_factors() function now properly handles pseudo-atoms.
  
  If pseudo-atoms are present, then 2Da^2(4 + 3R)/5 normalised Q factor is 
skipped.
........
  r21433 | bugman | 2013-11-13 18:12:05 +0100 (Wed, 13 Nov 2013) | 5 lines
  
  Fix for the N_state_model.test_stereochem_analysis system test for the 
pseudo-atom handling.
  
  An interatomic distance file is now used to explicitly set up all distances.
........
  r21434 | bugman | 2013-11-13 18:30:44 +0100 (Wed, 13 Nov 2013) | 6 lines
  
  Fixes for the N-state model target function gradient and Hessian for the 
data structure changes.
  
  The unit vector data structure is no longer a pure numpy array but a mixed 
list and array structure
  to handle pseudo-atoms.
........

Added:
    
branches/relax_disp/test_suite/shared_data/align_data/pyrotartaric_anhydride/
      - copied from r21434, 
trunk/test_suite/shared_data/align_data/pyrotartaric_anhydride/
    
branches/relax_disp/test_suite/shared_data/structures/phthalic_acid/snapshots/distances
      - copied unchanged from r21434, 
trunk/test_suite/shared_data/structures/phthalic_acid/snapshots/distances
    
branches/relax_disp/test_suite/shared_data/structures/pyrotartaric_anhydride.pdb
      - copied unchanged from r21434, 
trunk/test_suite/shared_data/structures/pyrotartaric_anhydride.pdb
    
branches/relax_disp/test_suite/system_tests/scripts/n_state_model/pyrotartaric_anhydride.py
      - copied unchanged from r21434, 
trunk/test_suite/system_tests/scripts/n_state_model/pyrotartaric_anhydride.py
Modified:
    branches/relax_disp/   (props changed)
    branches/relax_disp/auto_analyses/stereochem_analysis.py
    branches/relax_disp/lib/alignment/rdc.py
    branches/relax_disp/pipe_control/interatomic.py
    branches/relax_disp/pipe_control/mol_res_spin.py
    branches/relax_disp/pipe_control/molmol.py
    branches/relax_disp/pipe_control/pymol_control.py
    branches/relax_disp/pipe_control/rdc.py
    branches/relax_disp/pipe_control/selection.py
    branches/relax_disp/specific_analyses/n_state_model/__init__.py
    branches/relax_disp/specific_analyses/n_state_model/data.py
    branches/relax_disp/target_functions/n_state_model.py
    
branches/relax_disp/test_suite/shared_data/align_data/menthol/long_range_rdc
    branches/relax_disp/test_suite/system_tests/n_state_model.py
    
branches/relax_disp/test_suite/system_tests/scripts/n_state_model/stereochem_analysis.py

[This mail would be too long, it was shortened to contain the URLs only.]

Modified: branches/relax_disp/auto_analyses/stereochem_analysis.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/relax_disp/auto_analyses/stereochem_analysis.py?rev=21435&amp;r1=21434&amp;r2=21435&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/relax_disp/auto_analyses/stereochem_analysis.py?rev=21435&amp;r1=21434&amp;r2=21435&amp;view=diff</a>

Modified: branches/relax_disp/lib/alignment/rdc.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/relax_disp/lib/alignment/rdc.py?rev=21435&amp;r1=21434&amp;r2=21435&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/relax_disp/lib/alignment/rdc.py?rev=21435&amp;r1=21434&amp;r2=21435&amp;view=diff</a>

Modified: branches/relax_disp/pipe_control/interatomic.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/relax_disp/pipe_control/interatomic.py?rev=21435&amp;r1=21434&amp;r2=21435&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/relax_disp/pipe_control/interatomic.py?rev=21435&amp;r1=21434&amp;r2=21435&amp;view=diff</a>

Modified: branches/relax_disp/pipe_control/mol_res_spin.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/relax_disp/pipe_control/mol_res_spin.py?rev=21435&amp;r1=21434&amp;r2=21435&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/relax_disp/pipe_control/mol_res_spin.py?rev=21435&amp;r1=21434&amp;r2=21435&amp;view=diff</a>

Modified: branches/relax_disp/pipe_control/molmol.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/relax_disp/pipe_control/molmol.py?rev=21435&amp;r1=21434&amp;r2=21435&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/relax_disp/pipe_control/molmol.py?rev=21435&amp;r1=21434&amp;r2=21435&amp;view=diff</a>

Modified: branches/relax_disp/pipe_control/pymol_control.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/relax_disp/pipe_control/pymol_control.py?rev=21435&amp;r1=21434&amp;r2=21435&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/relax_disp/pipe_control/pymol_control.py?rev=21435&amp;r1=21434&amp;r2=21435&amp;view=diff</a>

Modified: branches/relax_disp/pipe_control/rdc.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/relax_disp/pipe_control/rdc.py?rev=21435&amp;r1=21434&amp;r2=21435&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/relax_disp/pipe_control/rdc.py?rev=21435&amp;r1=21434&amp;r2=21435&amp;view=diff</a>

Modified: branches/relax_disp/pipe_control/selection.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/relax_disp/pipe_control/selection.py?rev=21435&amp;r1=21434&amp;r2=21435&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/relax_disp/pipe_control/selection.py?rev=21435&amp;r1=21434&amp;r2=21435&amp;view=diff</a>

Modified: branches/relax_disp/specific_analyses/n_state_model/__init__.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/relax_disp/specific_analyses/n_state_model/__init__.py?rev=21435&amp;r1=21434&amp;r2=21435&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/relax_disp/specific_analyses/n_state_model/__init__.py?rev=21435&amp;r1=21434&amp;r2=21435&amp;view=diff</a>

Modified: branches/relax_disp/specific_analyses/n_state_model/data.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/relax_disp/specific_analyses/n_state_model/data.py?rev=21435&amp;r1=21434&amp;r2=21435&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/relax_disp/specific_analyses/n_state_model/data.py?rev=21435&amp;r1=21434&amp;r2=21435&amp;view=diff</a>

Modified: branches/relax_disp/target_functions/n_state_model.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/relax_disp/target_functions/n_state_model.py?rev=21435&amp;r1=21434&amp;r2=21435&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/relax_disp/target_functions/n_state_model.py?rev=21435&amp;r1=21434&amp;r2=21435&amp;view=diff</a>

Modified: 
branches/relax_disp/test_suite/shared_data/align_data/menthol/long_range_rdc
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/relax_disp/test_suite/shared_data/align_data/menthol/long_range_rdc?rev=21435&amp;r1=21434&amp;r2=21435&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/relax_disp/test_suite/shared_data/align_data/menthol/long_range_rdc?rev=21435&amp;r1=21434&amp;r2=21435&amp;view=diff</a>

Modified: branches/relax_disp/test_suite/system_tests/n_state_model.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/relax_disp/test_suite/system_tests/n_state_model.py?rev=21435&amp;r1=21434&amp;r2=21435&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/relax_disp/test_suite/system_tests/n_state_model.py?rev=21435&amp;r1=21434&amp;r2=21435&amp;view=diff</a>

Modified: 
branches/relax_disp/test_suite/system_tests/scripts/n_state_model/stereochem_analysis.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/relax_disp/test_suite/system_tests/scripts/n_state_model/stereochem_analysis.py?rev=21435&amp;r1=21434&amp;r2=21435&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/relax_disp/test_suite/system_tests/scripts/n_state_model/stereochem_analysis.py?rev=21435&amp;r1=21434&amp;r2=21435&amp;view=diff</a>



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Wed Nov 13 22:20:01 2013</div>  
</body>
</html>
