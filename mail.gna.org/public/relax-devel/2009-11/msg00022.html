<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: Mitgliedsantrag für die Gruppe relax -->
<!--X-From-R13: [vpunry Pvrev <zvpunry.ovrevNtzk.pu> -->
<!--X-Date: Mon, 16 Nov 2009 01:43:09 +0100 -->
<!--X-Message-Id: 4B00A015.30400@gmx.ch -->
<!--X-Content-Type: multipart/mixed -->
<!--X-Reference: 20091112&#45;031720.sv15425.93757@gna.org -->
<!--X-Reference: 7f080ed10911120240r4c37766me76a7601797046d5@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: Mitgliedsantrag für die Gruppe relax -- November 16, 2009 - 01:43</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: Mitgliedsantrag für die Gruppe relax</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00022" class="tabs">Index by Date</a> | <a href="threads.html#00022" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00021.html">Date Prev</a>] [<a href="msg00023.html">Date Next</a>] [<a href="msg00014.html">Thread Prev</a>] [<a href="msg00026.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Mon, 16 Nov 2009 11:43:01 +1100</li>
<li class="menuitem">
<em>Cc</em>: relax-devel@xxxxxxx</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00022.html">4B00A015.30400@gmx.ch</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;20091112-031720.sv15425.93757@xxxxxxx&gt;	&lt;7f080ed10911120240r4c37766me76a7601797046d5@xxxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>User-agent</em>: Thunderbird 2.0.0.23 (X11/20090817)</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Michael Bieri</strong> on November 16, 2009 - 01:43:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">
Hi Edward

</pre><tt>So as far as I understood, I have to prove that I can write scripts. As 
</tt><tt>already mentioned, I am not a programmer. To prove, I attach the 
</tt><tt>final_data_extraction.py script. i tested it with your code_validator.py 
</tt><tt>script and it seems to be ok.
</tt><pre style="margin: 0em;">

I hope this can help.

Cheers
Michael


Edward d'Auvergne schrieb:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">
Hi,

Interesting that the subject of this message ist 'auf Deutsch'!
Unfortunately I cannot allow you to be a member of the relax project
straight away.  Becoming a relax developer is a democratic process
which first requires a demonstration of basic coding ability (or more
precisely knowing your limits and not hurting other parts of the code)
and adherence to the principles of the project and the coding
conventions.  This is all described in chapter 9 of the relax manual,
the development chapter, which should be read prior to joining the
project.  Section 9.4.1 &quot;Becoming a committer&quot; details the steps for
joining.  From the outside an open source project looks quite chaotic
but in reality it is highly structured and only code of the highest
quality - every line of code is checked by myself or others - is
accepted.

Cheers,

Edward



2009/11/12 Michael Bieri &lt;michael.bieri@xxxxxx&gt;:
</pre><tt>  
</tt><blockquote class="blockquote"><pre style="margin: 0em;">
Michael Bieri requested membership to the group relax
at Gna!

User Details:
-------------
Name:   Michael Bieri
Login:   michaelbieri
Email:   michael.bieri@xxxxxx

Project Details:
----------------
Name:   relax
Unix Name: relax
Main Page:        <a  rel="nofollow" href="https://gna.org/projects/relax">https://gna.org/projects/relax</a>

Message from user:
------------------

hello


Note:
-----
You receive this email because you are registered as an administrator of this
project and the system has been configured to send emails to administrators
when new users register.




Please login and go to the page
<a  rel="nofollow" href="https://gna.org/project/admin/useradmin.php?group=relax">https://gna.org/project/admin/useradmin.php?group=relax</a>
and approve or discard this membership request.


 -- the Gna! team


_______________________________________________
 Nachricht geschickt von/durch Gna!
 <a  rel="nofollow" href="http://gna.org/">http://gna.org/</a>


</pre><tt>    
</tt></blockquote><pre style="margin: 0em;">

</pre><tt>  
</tt></blockquote><pre style="margin: 0em;">#####################################################################################
#          Script for Final Data Extraction after Model-free Analysis         
      #
#                                Michael Bieri                                
      #
#                                  16.9.2009                                  
      #
#####################################################################################


# Extract Data to Table

#create a table file

# Python module imports.
from string import replace

# relax module imports.
from generic_fns.mol_res_spin import spin_loop
from generic_fns import pipes


pipe.create('Data_extraction', 'mf')
results.read()

#create file

self.file = open('Model-free_Results.txt', 'w')

self.file.write('Data Extraction by Michael Bieri')
self.file.write(&quot;\n&quot;)
self.file.write(&quot;\n&quot;)
self.file.write(&quot;Residue                Model   S2                      Rex 
[1/s]               Te                      Relaxation Parameters\n&quot;)
self.file.write(&quot;\n&quot;)


for spin, spin_id in spin_loop(return_id=True):
            # The spin ID string.
            spin_no = spin_id[spin_id.index(':')+1:spin_id.index('&amp;')]
            spin_res = spin_id[spin_id.index('&amp;')+2:spin_id.index('@')]
            self.file.write((spin_res) + &quot; &quot; + (spin_no))
            # The spin is not selected.
            if not spin.select:
                self.file.write(&quot;\n&quot;)
                continue


# The model-free model.
            if hasattr(spin, 'model'):
                spin.model = spin.model[1:2]
                self.file.write(&quot;               &quot; + spin.model)


# S2.
            if hasattr(spin, 's2'):
                s2 = str(spin.s2)
                s2_err = str(spin.s2_err)
                if spin.s2 == None:
                        self.file.write(&quot;&quot;)
                else:
                        self.file.write(&quot;       &quot; + s2[0:5]+ &quot; +/- &quot; + 
s2_err[0:4])


# Rex.
            if hasattr(spin, 'rex'):
                rex = str(spin.rex)
                rex_err = str(spin.rex_err)
                if spin.rex == None:
                        self.file.write(&quot;                       &quot;)
                else:
                        rex_eff = spin.rex * (int(spin.frq_labels[1]) * 
1000000 * 2 * 3.14159)**2
                        rex = str(rex_eff)
                        rex_err_eff = spin.rex_err * (int(spin.frq_labels[1]) 
* 1000000 * 2 * 3.14159)**2
                        rex_err = str(rex_err_eff)
                        self.file.write(&quot;               &quot; + rex[0:5]+ &quot; +/- &quot; 
+ rex_err[0:4])


# Te
            if hasattr(spin, 'te'):
                if spin.te == None:
                        self.file.write(&quot;               &quot;)
                else:
                        te_ps = spin.te * 1e-12
                        te = str(te_ps)
                        te_err = str(spin.te_err)
                        self.file.write(&quot;               &quot; + te[0:5]+ &quot; +/- &quot; 
+ te_err[0:4])



# Parameters.
            if hasattr(spin, 'params'):
                self.file.write(&quot;                       &quot; + 
str(spin.params[0:len(spin.params)]))
            else:
                self.file.write(&quot;\\n&quot;)
                continue



# Start a new line.
            self.file.write(&quot;\n&quot;)


##################################################################################################

#Create Single Data Files


value.write(param='rex', file='rex.txt', dir='final_results', force=True)
value.write(param='s2', file='s2.txt', dir='final_results', force=True)
value.write(param='s2f', file='s2f.txt', dir='final_results', force=True)
value.write(param='s2s', file='s2s.txt', dir='final_results', force=True)
value.write(param='te', file='te.txt', dir='final_results', force=True)
value.write(param='tf', file='tf.txt', dir='final_results', force=True)
value.write(param='ts', file='ts.txt', dir='final_results', force=True)
value.write(param='rex', file='rex.txt', dir='final_results', force=True)
value.write(param='r', file='r.txt', dir='final_results', force=True)
value.write(param='rex', file='rex.txt', dir='final_results', force=True)
value.write(param='csa', file='csa.txt', dir='final_results', force=True)
value.write(param='rex', file='rex.txt', dir='final_results', force=True)
value.write(param='local_tm', file='local_tm.txt', dir='final_results', 
force=True)

##################################################################################################

#Create Grace Plots

grace.write(x_data_type='spin', y_data_type='s2', file='s2.agr', force=True)
grace.write(x_data_type='spin', y_data_type='te', file='te.agr', force=True)
grace.write(x_data_type='spin', y_data_type='s2f', file='s2f.agr', force=True)
grace.write(x_data_type='spin', y_data_type='s2s', file='s2s.agr', force=True)
grace.write(x_data_type='spin', y_data_type='ts', file='ts.agr', force=True)
grace.write(x_data_type='spin', y_data_type='tf', file='tf.agr', force=True)
grace.write(x_data_type='spin', y_data_type='csa', file='csa.agr', force=True)
grace.write(x_data_type='te', y_data_type='s2', file='s2-te.agr', force=True)

##################################################################################################

#Create Diffusion Tensor

# Display the diffusion tensor.
diffusion_tensor.display()

# Create the tensor PDB file.
tensor_file = 'tensor.pdb'
structure.create_diff_tensor_pdb(file=tensor_file, force=True)

##################################################################################################

# Create S2 Macro for PyMol 

# Python module imports.
from string import replace

# relax module imports.
from generic_fns.mol_res_spin import spin_loop
from generic_fns import pipes

#create file

self.file = open('s2.pml', 'w')

self.file.write(&quot;bg_color white\n&quot;)
self.file.write(&quot;color gray90\n&quot;)
self.file.write(&quot;hide all\n&quot;)
self.file.write(&quot;show ribbon\n&quot;)

for spin, spin_id in spin_loop(return_id=True):

#select residue
            spin_no = spin_id[spin_id.index(':')+1:spin_id.index('&amp;')]


#ribbon color
            if hasattr(spin, 's2'):
                s2 = str(spin.s2)
                if spin.s2 == None:
                        self.file.write(&quot;&quot;)
                else:
                        width = ((1-spin.s2) * 2)
                        green = 1 - ((spin.s2)**3) 
                        green = green * green * green #* green * green
                        green = 1 - green
                        self.file.write(&quot;set_color resicolor&quot; + spin_no + &quot;, 
[1, &quot; + str(green) + &quot;, 0]\n&quot;)
                        self.file.write(&quot;color resicolor&quot; + spin_no + &quot;, resi 
&quot; + spin_no + &quot;\n&quot;)
                        self.file.write(&quot;set_bond stick_radius, &quot; + 
str(width) + &quot;, resi &quot; + spin_no + &quot;\n&quot;)



self.file.write(&quot;hide all\n&quot;)
self.file.write(&quot;show sticks, name C+N+CA\n&quot;)
self.file.write(&quot;set stick_quality, 10\n&quot;)
self.file.write(&quot;ray\n&quot;)


##################################################################################################

# Create Rex Macro for PyMol 

#create file

self.file = open('rex.pml', 'w')

self.file.write(&quot;bg_color white\n&quot;)
self.file.write(&quot;color gray90\n&quot;)
self.file.write(&quot;hide all\n&quot;)
self.file.write(&quot;show ribbon\n&quot;)

max_rex = 0

#find max Rex
for spin, spin_id in spin_loop(return_id=True):

            if hasattr(spin, 'rex'):

                  if not spin.rex == None:
                       if spin.rex &gt; max_rex:
                             max_rex = spin.rex 


for spin, spin_id in spin_loop(return_id=True):

#select residue
            spin_no = spin_id[spin_id.index(':')+1:spin_id.index('&amp;')]
#ribbon color
            if hasattr(spin, 'rex'):
                rex = str(spin.rex)
                if spin.rex == None:
                        self.file.write(&quot;&quot;)
                else:
                        rel_rex = spin.rex / max_rex
                        width = ((rel_rex) * 2)
                        green = ((rel_rex)) 
                        green = green * green * green #* green * green
                        green = 1 - green
                        self.file.write(&quot;set_color resicolor&quot; + spin_no + &quot;, 
[1 ,&quot; + str(green) + &quot;, 0]\n&quot;)
                        self.file.write(&quot;color resicolor&quot; + spin_no + &quot;, resi 
&quot; + spin_no + &quot;\n&quot;)
                        self.file.write(&quot;set_bond stick_radius, &quot; + 
str(width) + &quot;, resi &quot; + spin_no + &quot;\n&quot;)



self.file.write(&quot;hide all\n&quot;)
self.file.write(&quot;show sticks, name C+N+CA\n&quot;)
self.file.write(&quot;set stick_quality, 10\n&quot;)
self.file.write(&quot;ray\n&quot;)



##################################################################################################


print &quot;&quot;
print &quot;&quot;
print &quot; ---------- done ----------------&quot;
print &quot;&quot;
print &quot;&quot;
print &quot;Grace Plots are in Folder /grace/&quot;
print &quot;&quot;
print &quot;Signle Text Files for Relaxation Parameters are in Folder 
/final_results/&quot;
print &quot;&quot;
print &quot;Diffusion Tensor is in current Folder&quot;
print &quot;&quot;
print &quot;PyMol Macros are in current Folder - execute in PyMol with Command:&quot;
print &quot;@rex.pml and @s2.pml&quot;




</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00026" href="msg00026.html">Re: Mitgliedsantrag für die Gruppe relax</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00014" href="msg00014.html">Re: Mitgliedsantrag für die Gruppe relax</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Tue Nov 17 12:00:22 2009</div>  
</body>
</html>
