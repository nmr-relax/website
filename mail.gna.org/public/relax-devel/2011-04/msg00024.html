<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: [bug #18019] Gridsearch appears not to be working when	upper/lower bounds are set -->
<!--X-From-R13: "Sqjneq q'Ohiretar" <rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Tue, 12 Apr 2011 16:06:29 +0200 -->
<!--X-Message-Id: BANLkTi=ymtRqx2twv8MZ8&#45;oPOdZfmOmx5Q@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 20110411&#45;114249.sv0.99173@gna.org -->
<!--X-Reference: BANLkTimtVhvu_CC0vL8WBWSQr_cDMMqtmA@mail.gmail.com -->
<!--X-Reference: ABE22EE25F4A43B583B38A5E85C707ED@Mercurio -->
<!--X-Reference: BANLkTikKOEFv4PSPoKccOrAh5p69jTve1g@mail.gmail.com -->
<!--X-Reference: B9FE460D11E746CD83CF04EB36BE0FD4@Mercurio -->
<!--X-Reference: BANLkTimZVbC6uqd9pdxEN0LBdzfKzoykXg@mail.gmail.com -->
<!--X-Reference: 450ECD999DC247EAA122BFA9EC78714E@Mercurio -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [bug #18019] Gridsearch appears not to be working when	upper/lower bounds are set -- April 12, 2011 - 16:06</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: [bug #18019] Gridsearch appears not to be working when	upper/lower bounds are set</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00024" class="tabs">Index by Date</a> | <a href="threads.html#00024" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00030.html">Date Prev</a>] [<a href="msg00031.html">Date Next</a>] [<a href="msg00030.html">Thread Prev</a>] [<a href="msg00031.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Tiago Pais &lt;tpais@xxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Tue, 12 Apr 2011 16:05:57 +0200</li>
<li class="menuitem">
<em>Cc</em>: relax-devel@xxxxxxx</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=gamma;	h=domainkey-signature:mime-version:sender:in-reply-to:references:date	:x-google-sender-auth:message-id:subject:from:to:cc:content-type	:content-transfer-encoding;	bh=r7StFhcj7wJptaQf9jXZ5OxOqFojPv8NWYdBuV+A2Aw=;	b=ONDIzP3B8THawk2caisoDcUba525VgMA3rwV6uj0Ehv945hFP8+YHBJSssZk2KTlI2	igs6vMWxBkYq3wmU/ecsWqJK2PyCgX3FPcSzAzj7EaYlkUpq3gRCPsj3d3cOPymP1WEj	OTBkGx9Dh5JWPVLTM+2Wc256rFvXoG3++a+T8=</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00024.html">BANLkTi=ymtRqx2twv8MZ8-oPOdZfmOmx5Q@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;20110411-114249.sv0.99173@xxxxxxx&gt;	&lt;BANLkTimtVhvu_CC0vL8WBWSQr_cDMMqtmA@xxxxxxxxxxxxxx&gt;	&lt;<a href="msg00028.html">ABE22EE25F4A43B583B38A5E85C707ED@Mercurio</a>&gt;	&lt;BANLkTikKOEFv4PSPoKccOrAh5p69jTve1g@xxxxxxxxxxxxxx&gt;	&lt;<a href="msg00029.html">B9FE460D11E746CD83CF04EB36BE0FD4@Mercurio</a>&gt;	&lt;BANLkTimZVbC6uqd9pdxEN0LBdzfKzoykXg@xxxxxxxxxxxxxx&gt;	&lt;<a href="msg00030.html">450ECD999DC247EAA122BFA9EC78714E@Mercurio</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on April 12, 2011 - 16:06:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Hi,

The relax version is the most recent, and the --info print out
indicates that the minfx used is correct (assuming the new version of
relax is at /usr/local/relax-1.3).  This is quite peculiar :S  If you
use the grid search command:

relax&gt; grid_search(lower=[0.111, 0, 0.0], upper=[0.111, 1.0, 200e-12],
inc=[1, 16, 16], constraints=True, verbosity=1)

What do you see?  Try copying and pasting this line into the script.

Cheers,

Edward



On 12 April 2011 15:39, Tiago Pais &lt;tpais@xxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Sorry Edward, still not working...
The checked out revision of the repository relax version is number 12819
The errors appear to be exactly the same. What kind of values are you
getting for S2 and tauS? Here, I am getting 0 for all tauS and 0.06667 for
all S2.

$relax --info plots the following:

relax repository checkout

                             Molecular dynamics by NMR data analysis

                            Copyright (C) 2001-2006 Edward d'Auvergne
                        Copyright (C) 2006-2011 the relax development team

This is free software which you are welcome to modify and redistribute under
the conditions of the
GNU General Public License (GPL).  This program, including all modules, is
licensed under the GPL
and comes with absolutely no warranty.  For details type 'GPL' within the
relax prompt.

Assistance in using the relax prompt and scripting interface can be accessed
by typing 'help' within
the prompt.

Hardware information:
   Machine:                 i686
   Processor:

System information:
   System:                  Linux
   Release:                 2.6.31-23-generic
   Version:                 #74-Ubuntu SMP Mon Feb 28 21:32:57 UTC 2011
   GNU/Linux version:       Ubuntu 9.10 karmic
   Distribution:            Ubuntu 9.10 karmic
   Full platform string:
Linux-2.6.31-23-generic-i686-with-Ubuntu-9.10-karmic

Software information:
   Architecture:            32bit ELF
   Python version:          2.6.4
   Python branch:           tags/r264
   Python build:            r264:75706, Dec  7 2009 18:45:15
   Python compiler:         GCC 4.4.1
   Python implementation:   CPython
   Python revision:         75706
   Numpy version:           1.3.0
   Libc version:            glibc 2.4

Python packages (most are optional):

Package              Installed       Version         Path
minfx                True            Unknown
/usr/local/relax-1.3/minfx
bmrblib              False
numpy                True            1.3.0
/usr/lib/python2.6/dist-packages/numpy
ScientificPython     True            2.8
/usr/lib/python2.6/dist-packages/Scientific
wxPython             False
mpi4py               False
epydoc               False
optparse             True            1.5.3
/usr/lib/python2.6/optparse.pyc
readline             True
/usr/lib/python2.6/lib-dynload/readline.so
profile              True
/usr/lib/python2.6/profile.pyc
bz2                  True
/usr/lib/python2.6/lib-dynload/bz2.so
gzip                 True
/usr/lib/python2.6/gzip.pyc
os.devnull           True
/usr/lib/python2.6/os.pyc

Compiled relax C modules:
   Relaxation curve fitting: True


Sorry for all the trouble.
Cheers
Tiago P







-----Original Message-----
From: edward.dauvergne@xxxxxxxxx [<a  rel="nofollow" href="mailto:edward.dauvergne@xxxxxxxxx">mailto:edward.dauvergne@xxxxxxxxx</a>] On
Behalf Of Edward d'Auvergne
Sent: terça-feira, 12 de Abril de 2011 13:02
To: Tiago Pais
Cc: relax-devel@xxxxxxx
Subject: Re: [bug #18019] Gridsearch appears not to be working when
upper/lower bounds are set

Hi,

Where is the new one installed?  Maybe relax is not using it.  Are the
errors 100% the same?  It's working for me perfectly with the
truncated data.  I removed residue 37, and the grid search gives:

-----
relax&gt; grid_search(lower=[0.111, 0, 0.0], upper=[0.111, 1.0,
2.0000000000000001e-10], inc=[1, 16, 16], constraints=True,
verbosity=1)


Over-fit spin deselection.

RelaxWarning: The spin '#snPHSinDiffFrame2CHnoHs_mol1:37&amp;:L@506&amp;@CD1'
has been deselected because of missing relaxation data.
Only the model-free parameters for single spins will be used.


Fitting to spin '#snPHSinDiffFrame2CHnoHs_mol1:14&amp;:L@119&amp;@CD1'
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Grid search
~~~~~~~~~~~

Searching through 256 grid nodes.
k: 0        xk: [       0.111,           0,           0] fk: 16513.3641708
k: 1        xk: [       0.111,    0.066667,           0] fk: 10390.3333598
k: 2        xk: [       0.111,           0,      13.333] fk: 7092.56902759
k: 3        xk: [       0.111,    0.066667,      13.333] fk: 4780.221211
k: 5        xk: [       0.111,    0.066667,      26.667] fk: 2820.12641286
k: 7        xk: [       0.111,    0.066667,          40] fk: 2039.04303462
k: 9        xk: [       0.111,    0.066667,      53.333] fk: 1700.9699681
k: 11       xk: [       0.111,    0.066667,      66.667] fk: 1546.15216207
k: 13       xk: [       0.111,    0.066667,          80] fk: 1476.32033148
k: 15       xk: [       0.111,    0.066667,      93.333] fk: 1454.68522627
-----


Maybe you need to newest version of relax as well.  Try:

$ svn co <a  rel="nofollow" href="http://svn.gna.org/svn/relax/1.3">http://svn.gna.org/svn/relax/1.3</a> relax-1.3
$ cd relax-1.3
$ svn co <a  rel="nofollow" href="http://svn.gna.org/svn/minfx/trunk/minfx">http://svn.gna.org/svn/minfx/trunk/minfx</a>
$ cd ..
$ scons

and then see if things run?

Cheers,

Edward


On 12 April 2011 13:49, Tiago Pais &lt;tpais@xxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi,
I have deleted the previous minfx and installed the new one but It's still
not working. I also tried to increase the interval of S2f and put some
increments but the same error occurs.

Did you manage to do it with the truncated data?

TiagoP

-----Original Message-----
From: edward.dauvergne@xxxxxxxxx [<a  rel="nofollow" href="mailto:edward.dauvergne@xxxxxxxxx">mailto:edward.dauvergne@xxxxxxxxx</a>] On
Behalf Of Edward d'Auvergne
Sent: terça-feira, 12 de Abril de 2011 10:27
To: Tiago Pais
Cc: relax-devel@xxxxxxx
Subject: Re: [bug #18019] Gridsearch appears not to be working when
upper/lower bounds are set

Hi,

I found the problem to be in minfx.  Strangely, this used to work
before as I had performed grid searches with an increment of 1 in one
of the dimensions.  The problem is that when there is an increment of
one, you need to pick a value between the lower and upper bound
values.  Minfx is now taking the average value.

To use this, you can delete the minfx directory in the 1.3.8
installation, and get the new version of minfx by typing:

$ svn co <a  rel="nofollow" href="http://svn.gna.org/svn/minfx/trunk/minfx">http://svn.gna.org/svn/minfx/trunk/minfx</a>

If you don't have access to svn, you might have to wait until I
release a new version of relax.  However due to holidays, I will
unfortunately not be able to do this before mid May.

Regards,

Edward



On 12 April 2011 10:38, Tiago Pais &lt;tpais@xxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi Edward,
Yes I am sorry about the private label. I set it initially to private
because I was going to include the structure of the protein attached, but
then I realized that I didn't need to send the whole thing. Eventually I
forgot to set the label back to public. So, yes, you can use the info as
</pre></blockquote><pre style="margin: 0em;">you
</pre><blockquote class="blockquote"><pre style="margin: 0em;">wish to try and solve the issue - including the test suite.

Hope to hear from you soon.
Cheers
TP

-----Original Message-----
From: Edward d'Auvergne [<a  rel="nofollow" href="mailto:edward.dauvergne@xxxxxxxxx">mailto:edward.dauvergne@xxxxxxxxx</a>]
Sent: terça-feira, 12 de Abril de 2011 7:51
To: anonymous
Cc: Tiago Pais; relax-devel@xxxxxxx
Subject: Re: [bug #18019] Gridsearch appears not to be working when
upper/lower bounds are set

Hi,

Is there any reason this bug report has been made private?  The data
is so truncated, there's nothing much anyone can do with it.  The
privacy tag is usually reserved for security issues whereby it needs
to be kept private until a fix is found and released.  Then the bug
can be made public.  I'm looking into this now, but I'm not exactly
sure what is happening.  Is it ok if I include this data, or part of
it, into the relax test suite?  This will significantly help in the
debugging and will make sure this bug never returns!

Cheers,

Edward



On 11 April 2011 13:42, anonymous &lt;NO-REPLY.INVALID-ADDRESS@xxxxxxx&gt;
</pre></blockquote><pre style="margin: 0em;">wrote:
</pre><blockquote class="blockquote"><blockquote class="blockquote"><pre style="margin: 0em;">

URL:
 &lt;<a  rel="nofollow" href="http://gna.org/bugs/?18019">http://gna.org/bugs/?18019</a>&gt;

                Summary: Gridsearch appears not to be working when
upper/lower bounds are set
                Project: relax
           Submitted by: None
           Submitted on: Mon 11 Apr 2011 11:42:49 AM UTC
               Category: relax's source code
               Severity: 3 - Normal
               Priority: 5 - Normal
                 Status: None
                Privacy: Private
            Assigned to: None
        Originator Name: Tiago Pais
       Originator Email: tpais@xxxxxxxxxxx
            Open/Closed: Open
        Discussion Lock: Any
                Release: 1.3.8
       Operating System: GNU/Linux

   _______________________________________________________

Details:

My system is Ubuntu-9.04:
When I perform a gridsearch, exclusively for m5, with the lower and
</pre></blockquote></blockquote></blockquote><pre style="margin: 0em;">upper
</pre><blockquote class="blockquote"><blockquote class="blockquote"><blockquote class="blockquote"><pre style="margin: 0em;">bounds set to: lower=[0.111, 0, -0.0], upper=[0.111, 1.00, 200] I keep
</pre></blockquote><pre style="margin: 0em;">seeing
</pre><blockquote class="blockquote"><pre style="margin: 0em;">the following message during the calculations:



&quot;Min f:              3474.82



k: 3860     xk: [       0.111,    0.066667,          -0] fk: nan


Increment:          array([ 5, 16, 16])

Params:             array([ 0.111,  1.   ,    Inf])

Min params:         array([ 0.111     ,  0.06666667, -0.        ])

f:                  nan



Min f:              3474.82



k: 3861     xk: [       0.111,    0.066667,          -0] fk: nan


Increment:          array([ 6, 16, 16])

Params:             array([ 0.111,  1.   ,    Inf])

Min params:         array([ 0.111     ,  0.06666667, -0.        ])

f:                  nan

&quot;

And at the end the tauS is zero for all spins and the S2s is always
</pre></blockquote></blockquote></blockquote><pre style="margin: 0em;">close
</pre><blockquote class="blockquote"><blockquote class="blockquote"><pre style="margin: 0em;">to
</pre><blockquote class="blockquote"><pre style="margin: 0em;">1.

Attached follows the script that I am using and a truncated sample of my
</pre></blockquote><pre style="margin: 0em;">data
</pre><blockquote class="blockquote"><pre style="margin: 0em;">set (I hope it is not too truncated!) as well as the results that I am
getting.

If you need more info let me know.
Thanks
Regards
Tiago P



   _______________________________________________________

File Attachments:


-------------------------------------------------------
Date: Mon 11 Apr 2011 11:42:49 AM UTC  Name: ErrorReportRelax.tar.gz
</pre></blockquote><pre style="margin: 0em;"> Size:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">8kB   By: None

&lt;<a  rel="nofollow" href="http://gna.org/bugs/download.php?file_id=12833">http://gna.org/bugs/download.php?file_id=12833</a>&gt;

   _______________________________________________________

Reply to this item at:

 &lt;<a  rel="nofollow" href="http://gna.org/bugs/?18019">http://gna.org/bugs/?18019</a>&gt;

_______________________________________________
 Message sent via/by Gna!
 <a  rel="nofollow" href="http://gna.org/">http://gna.org/</a>


_______________________________________________
relax (<a  rel="nofollow" href="http://nmr-relax.com">http://nmr-relax.com</a>)

This is the relax-devel mailing list
relax-devel@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="/mail.gna.org/listinfo/relax-devel">https://mail.gna.org/listinfo/relax-devel</a>

</pre></blockquote><pre style="margin: 0em;">

__________ Information from ESET NOD32 Antivirus, version of virus
</pre></blockquote><pre style="margin: 0em;">signature
</pre><blockquote class="blockquote"><pre style="margin: 0em;">database 6034 (20110411) __________

The message was checked by ESET NOD32 Antivirus.

<a  rel="nofollow" href="http://www.eset.com">http://www.eset.com</a>




__________ Information from ESET NOD32 Antivirus, version of virus
</pre></blockquote><pre style="margin: 0em;">signature
</pre><blockquote class="blockquote"><pre style="margin: 0em;">database 6034 (20110411) __________

The message was checked by ESET NOD32 Antivirus.

<a  rel="nofollow" href="http://www.eset.com">http://www.eset.com</a>



</pre></blockquote><pre style="margin: 0em;">

__________ Information from ESET NOD32 Antivirus, version of virus
</pre></blockquote><pre style="margin: 0em;">signature
</pre><blockquote class="blockquote"><pre style="margin: 0em;">database 6034 (20110411) __________

The message was checked by ESET NOD32 Antivirus.

<a  rel="nofollow" href="http://www.eset.com">http://www.eset.com</a>




__________ Information from ESET NOD32 Antivirus, version of virus
</pre></blockquote><pre style="margin: 0em;">signature
</pre><blockquote class="blockquote"><pre style="margin: 0em;">database 6035 (20110412) __________

The message was checked by ESET NOD32 Antivirus.

<a  rel="nofollow" href="http://www.eset.com">http://www.eset.com</a>



</pre></blockquote><pre style="margin: 0em;">

__________ Information from ESET NOD32 Antivirus, version of virus signature
database 6035 (20110412) __________

The message was checked by ESET NOD32 Antivirus.

<a  rel="nofollow" href="http://www.eset.com">http://www.eset.com</a>




__________ Information from ESET NOD32 Antivirus, version of virus signature
database 6035 (20110412) __________

The message was checked by ESET NOD32 Antivirus.

<a  rel="nofollow" href="http://www.eset.com">http://www.eset.com</a>



</pre></blockquote><pre style="margin: 0em;">


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00031" href="msg00031.html">RE: [bug #18019] Gridsearch appears not to be working when	upper/lower bounds are set</a></strong>
<ul><li><em>From:</em> Tiago Pais</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00017" href="msg00017.html">[bug #18019] Gridsearch appears not to be working when upper/lower	bounds are set</a></strong>
<ul><li><em>From:</em> anonymous</li></ul></li>
<li><strong><a name="00018" href="msg00018.html">Re: [bug #18019] Gridsearch appears not to be working when	upper/lower bounds are set</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00028" href="msg00028.html">RE: [bug #18019] Gridsearch appears not to be working when	upper/lower bounds are set</a></strong>
<ul><li><em>From:</em> Tiago Pais</li></ul></li>
<li><strong><a name="00021" href="msg00021.html">Re: [bug #18019] Gridsearch appears not to be working when	upper/lower bounds are set</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00029" href="msg00029.html">RE: [bug #18019] Gridsearch appears not to be working when	upper/lower bounds are set</a></strong>
<ul><li><em>From:</em> Tiago Pais</li></ul></li>
<li><strong><a name="00022" href="msg00022.html">Re: [bug #18019] Gridsearch appears not to be working when	upper/lower bounds are set</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00030" href="msg00030.html">RE: [bug #18019] Gridsearch appears not to be working when	upper/lower bounds are set</a></strong>
<ul><li><em>From:</em> Tiago Pais</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Wed Apr 13 03:00:11 2011</div>  
</body>
</html>
