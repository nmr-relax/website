<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: r24988 &#45; in /branches/R1_fitting: specific_analyses/relax_disp/ test_suite/unit_tests/_specific_analyses/_relax_disp/ -->
<!--X-From-R13: "Sqjneq q'Ohiretar" &#60;rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Mon, 18 Aug 2014 16:48:03 +0200 -->
<!--X-Message-Id: CAED9pY8BQFx6cKRB2A0C047dqLhmsnmWRV90OX18Y+eqvMaSyQ@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: E1XH7qz&#45;0006rW&#45;JW@subversion.gna.org -->
<!--X-Reference: CAED9pY_BPkbLdp98You1Fo+1eL295MwhxeEksUhWXYSaUhsXdA@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: r24988 - in /branches/R1_fitting: specific_analyses/relax_disp/ test_suite/unit_tests/_specific_analyses/_relax_disp/ -- August 18, 2014 - 16:48</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: r24988 - in /branches/R1_fitting: specific_analyses/relax_disp/ test_suite/unit_tests/_specific_analyses/_relax_disp/</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00114" class="tabs">Index by Date</a> | <a href="threads.html#00114" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00113.html">Date Prev</a>] [<a href="msg00115.html">Date Next</a>] [<a href="msg00113.html">Thread Prev</a>] [<a href="msg00118.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: &quot;relax-devel@xxxxxxx&quot; &lt;relax-devel@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Mon, 18 Aug 2014 16:41:50 +0200</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113; h=mime-version:sender:in-reply-to:references:date:message-id:subject :from:to:content-type; bh=9PrY3acdMYAtUGoxxq4kSh1HN8W53tbAqv8pYjimKp8=; b=XPUi9L/3NgHpx0mC8j1tX2xL7gXSlrt7Gzpcv6BKKm1aiDQtPaCckz5W3Jy/TxfhmU W1lpYl7bJY8CYZy4I7YRCM5p8SE2gX9ZCdRZolKyMHeTNDWUik6Z+6GUI8to83ze3bYY 8R/ui83X8MMCFZtmHfE9qllwyfV9J1AftyCFU3L7oxEg1LdjKARBIV6HWo6A+oUJL7v5 GREL9vh2NzZc5mHzMWBIFjQRinJBbyPzZdsWSBAduORh+8eH4iESnCnuGXfeQYgEP2CW UapKMSowUeAh7Apmv9V1ihC5LbEWJzaTtR4R6PMduD3bkFNQKeDnxg3KCRMnEGm4Dcam dkoQ==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00114.html">CAED9pY8BQFx6cKRB2A0C047dqLhmsnmWRV90OX18Y+eqvMaSyQ@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;E1XH7qz-0006rW-JW@subversion.gna.org&gt; &lt;<a href="msg00113.html">CAED9pY_BPkbLdp98You1Fo+1eL295MwhxeEksUhWXYSaUhsXdA@mail.gmail.com</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on August 18, 2014 - 16:48:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Note that I used the CR72 model as a base for many other slow exchange
models as it is a robust and quick solution which in most cases
accurately approximates the parameters of other models, especially the
numeric models.

Regards,

Edward


On 18 August 2014 16:38, Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi,

The model IT99 is extremely different to all other models, hence it is
not nested in the auto-analysis.  No other model approximates it
parameters in any meaningful sense.  See
test_suite/shared_data/dispersion/software_comparison for example.  I
think that the model IT99 should have no corresponding nested model:

MODEL_NESTING = {
    ...
    MODEL_IT99:  None
    ...
}

To see this problem, just take any test data and optimise both CR72
and IT99 and see if you can get any parameters to be close between the
two models.  The new model nesting protocol is really starting to
worry me.  Why did it change in the first place?

Regards,

Edward




On 12 August 2014 10:54,  &lt;tlinnet@xxxxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Author: tlinnet
Date: Tue Aug 12 10:54:49 2014
New Revision: 24988

URL: <a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax?rev=24988&amp;view=rev">http://svn.gna.org/viewcvs/relax?rev=24988&amp;view=rev</a>
Log:
Fix for nesting kex, when model is CR72, and analysed models is IT99.

sr #3135(<a  rel="nofollow" href="https://gna.org/support/?3135">https://gna.org/support/?3135</a>): Optimisation of the R1 relaxation 
rate for the off-resonance R1rho relaxation dispersion models.

Modified:
    branches/R1_fitting/specific_analyses/relax_disp/variables.py
    
branches/R1_fitting/test_suite/unit_tests/_specific_analyses/_relax_disp/test_variables.py

Modified: branches/R1_fitting/specific_analyses/relax_disp/variables.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/R1_fitting/specific_analyses/relax_disp/variables.py?rev=24988&amp;r1=24987&amp;r2=24988&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/R1_fitting/specific_analyses/relax_disp/variables.py?rev=24988&amp;r1=24987&amp;r2=24988&amp;view=diff</a>
==============================================================================
--- branches/R1_fitting/specific_analyses/relax_disp/variables.py       
(original)
+++ branches/R1_fitting/specific_analyses/relax_disp/variables.py       
Tue Aug 12 10:54:49 2014
@@ -911,6 +911,10 @@
                 elif param == 'phi_ex' and compa_model.model in 
MODEL_LIST_ANALYTIC_CPMG + MODEL_LIST_NUMERIC_CPMG and model in 
MODEL_LIST_ANALYTIC_CPMG + MODEL_LIST_NUMERIC_CPMG:
                     continue

+                # Special situation, where 'kex'=1/tex can still be 
nested from IT99 model.
+                elif param == 'tex' and compa_model.model in 
MODEL_LIST_ANALYTIC_CPMG + MODEL_LIST_NUMERIC_CPMG and model in 
MODEL_LIST_ANALYTIC_CPMG + MODEL_LIST_NUMERIC_CPMG:
+                    continue
+
                 # Else break out of the loop.
                 else:
                     # Break the for loop, if not found.
@@ -953,6 +957,13 @@
                 if compa_model.model in MODEL_LIST_R1RHO_W_R1_ONLY + 
MODEL_LIST_R1RHO_FIT_R1_ONLY:
                     return model_info, compa_model

+        # Special case for IT99.
+        elif model in [MODEL_IT99]:
+            # Loop over the models.
+            for compa_model in compa_models:
+                # If one of the comparable models is in list with R1rho 
R1, return this.
+                if compa_model.model in MODEL_LIST_ANALYTIC_CPMG + 
MODEL_LIST_NUMERIC_CPMG:
+                    return model_info, compa_model

     # If there is no comparable models according to EXP_TYPE, check if 
some models can be nested anyway.
     else:

Modified: 
branches/R1_fitting/test_suite/unit_tests/_specific_analyses/_relax_disp/test_variables.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/R1_fitting/test_suite/unit_tests/_specific_analyses/_relax_disp/test_variables.py?rev=24988&amp;r1=24987&amp;r2=24988&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/R1_fitting/test_suite/unit_tests/_specific_analyses/_relax_disp/test_variables.py?rev=24988&amp;r1=24987&amp;r2=24988&amp;view=diff</a>
==============================================================================
--- 
branches/R1_fitting/test_suite/unit_tests/_specific_analyses/_relax_disp/test_variables.py
  (original)
+++ 
branches/R1_fitting/test_suite/unit_tests/_specific_analyses/_relax_disp/test_variables.py
  Tue Aug 12 10:54:49 2014
@@ -151,9 +151,27 @@
         model = MODEL_CR72

         # Test the return.
-        print nesting_model(self_models=self_models, model=model)
         self.assertEqual(nesting_model(self_models=self_models, 
model=model)[1].model, MODEL_LM63)

+        ## Test MODEL_IT99 model request, when models are CR72.
+        # Define all the models tested in the analysis.
+        self_models = [MODEL_R2EFF, MODEL_NOREX, MODEL_CR72, MODEL_IT99]
+
+        # Define which current model is selected
+        model = MODEL_IT99
+
+        # Test the return.
+        self.assertEqual(nesting_model(self_models=self_models, 
model=model)[1].model, MODEL_CR72)
+
+        ## Test MODEL_CR72 model request, when models are MODEL_IT99.
+        # Define all the models tested in the analysis.
+        self_models = [MODEL_R2EFF, MODEL_NOREX, MODEL_IT99, MODEL_CR72]
+
+        # Define which current model is selected
+        model = MODEL_CR72
+
+        # Test the return.
+        self.assertEqual(nesting_model(self_models=self_models, 
model=model)[1].model, MODEL_IT99)


     def test_nesting_model_cpmg_mmq(self):


_______________________________________________
relax (<a  rel="nofollow" href="http://www.nmr-relax.com">http://www.nmr-relax.com</a>)

This is the relax-commits mailing list
relax-commits@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="https://mail.gna.org/listinfo/relax-commits">https://mail.gna.org/listinfo/relax-commits</a>
</pre></blockquote></blockquote><pre style="margin: 0em;">


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00118" href="msg00118.html">Re: r24988 - in /branches/R1_fitting: specific_analyses/relax_disp/ test_suite/unit_tests/_specific_analyses/_relax_disp/</a></strong>
<ul><li><em>From:</em> Troels Emtek√¶r Linnet</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00113" href="msg00113.html">Re: r24988 - in /branches/R1_fitting: specific_analyses/relax_disp/ test_suite/unit_tests/_specific_analyses/_relax_disp/</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Mon Aug 18 17:20:15 2014</div>  
</body>
</html>
