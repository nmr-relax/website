<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [task #7793] Speed&#45;up of dispersion models -->
<!--X-From-R13: "Sqjneq q'Ohiretar" &#60;rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Thu, 29 May 2014 18:42:12 +0200 -->
<!--X-Message-Id: CAED9pY&#45;TzvkAyMjAAOsoKWS2NG81gdPPUO1hydUuhkRtB&#45;VkDg@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 20140510&#45;164954.sv20529.59902@gna.org -->
<!--X-Reference: 20140519&#45;021026.sv20529.52272@gna.org -->
<!--X-Reference: 20140519&#45;084652.sv20529.53544@gna.org -->
<!--X-Reference: 20140520&#45;193658.sv20529.25377@gna.org -->
<!--X-Reference: 20140526&#45;234210.sv20529.39552@gna.org -->
<!--X-Reference: 20140527&#45;150113.sv20529.12143@gna.org -->
<!--X-Reference: 20140527&#45;153656.sv20529.17793@gna.org -->
<!--X-Reference: 20140527&#45;154258.sv20529.22412@gna.org -->
<!--X-Reference: 20140527&#45;173400.sv20529.75118@gna.org -->
<!--X-Reference: 20140528&#45;094937.sv2782.83458@gna.org -->
<!--X-Reference: 20140528&#45;095339.sv2782.95150@gna.org -->
<!--X-Reference: 20140529&#45;110350.sv20529.44313@gna.org -->
<!--X-Reference: CAED9pY_s9JfvUopJqp2_i85FJ&#45;9zC5mWi9xzCwXk_AqQRe8hQA@mail.gmail.com -->
<!--X-Reference: CA+CBx2P&#45;zdkdmtE0sFq9du_N_8qweiD5R5n5WiV8urtF7uM&#45;Gw@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [task #7793] Speed-up of dispersion models -- May 29, 2014 - 18:42</title>
<link rel="stylesheet" type="text/css" href="/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="https://gna.org/images/gna.theme/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: [task #7793] Speed-up of dispersion models</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00563" class="tabs">Index by Date</a> | <a href="threads.html#00563" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00562.html">Date Prev</a>] [<a href="msg00564.html">Date Next</a>] [<a href="msg00559.html">Thread Prev</a>] [<a href="msg00300.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Thu, 29 May 2014 18:41:41 +0200</li>
<li class="menuitem">
<em>Cc</em>: &quot;Troels E. Linnet&quot; &lt;NO-REPLY.INVALID-ADDRESS@xxxxxxx&gt;, &quot;relax-devel@xxxxxxx&quot; &lt;relax-devel@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113; h=mime-version:sender:in-reply-to:references:date:message-id:subject :from:to:cc:content-type:content-transfer-encoding; bh=7N+2fZjvU77d5L5peiStjXg9MEzom6poHgn65eWLQ6w=; b=qHDOiEeTVMC7dH8wv2cAloqPuf8d+Vj3pq4vgvnXScmQw8GCNMptkw5pgAaIgsE55T NkJVOIzjQ5G2b/lx2m2qgCu4/OK4/FkE7S86pBz9ddRrg/IgxafZx/NZov0GpUE86+00 dh3SCh4TecrXu+Kjp3Y/wr+ba/RMrWT2Y3pm8fVTnWcjRJwla+7S49KnGFOU3bLgS+sU tMVymIxfkSWmF8uFTEtCTFe9VQgcpJ8jGoOnBi81svqnrMfB0P485GOETxQOR838GAN6 cTXm55p9lqvsTSmOqczpxnMF3BduY7flqeeSguG7tk11enSoiEqFOjPRljL3uPXkTgPX V/IQ==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00563.html">CAED9pY-TzvkAyMjAAOsoKWS2NG81gdPPUO1hydUuhkRtB-VkDg@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;<a href="msg00299.html">20140510-164954.sv20529.59902@gna.org</a>&gt; &lt;<a href="msg00343.html">20140519-021026.sv20529.52272@gna.org</a>&gt; &lt;<a href="msg00354.html">20140519-084652.sv20529.53544@gna.org</a>&gt; &lt;<a href="msg00399.html">20140520-193658.sv20529.25377@gna.org</a>&gt; &lt;<a href="msg00490.html">20140526-234210.sv20529.39552@gna.org</a>&gt; &lt;<a href="msg00504.html">20140527-150113.sv20529.12143@gna.org</a>&gt; &lt;<a href="msg00506.html">20140527-153656.sv20529.17793@gna.org</a>&gt; &lt;<a href="msg00507.html">20140527-154258.sv20529.22412@gna.org</a>&gt; &lt;<a href="msg00513.html">20140527-173400.sv20529.75118@gna.org</a>&gt; &lt;<a href="msg00528.html">20140528-094937.sv2782.83458@gna.org</a>&gt; &lt;<a href="msg00529.html">20140528-095339.sv2782.95150@gna.org</a>&gt; &lt;<a href="msg00557.html">20140529-110350.sv20529.44313@gna.org</a>&gt; &lt;<a href="msg00558.html">CAED9pY_s9JfvUopJqp2_i85FJ-9zC5mWi9xzCwXk_AqQRe8hQA@mail.gmail.com</a>&gt; &lt;<a href="msg00559.html">CA+CBx2P-zdkdmtE0sFq9du_N_8qweiD5R5n5WiV8urtF7uM-Gw@mail.gmail.com</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on May 29, 2014 - 18:42:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Cheers.  This task can now be closed, the branch has been merged.
Please have a close look at the current trunk as there were many
problematic conflicts during the merge process that I had to resolve
by hand.  There may therefore be errors.

As for a speed test, I would recommend just having a script in the
test_suite/shared_data/dispersion/ directories and use that.  Then put
the timings into a text file in the same directory for a record.  This
does not need to be part of the test suite, and there are many
examples in the test_suite/shared_data/ directories already where
scripts are used for demonstration purposes but are not included in
the test suite due to the amount of time they would require.

Note that for timings you have two options:

- True profiling (<a  rel="nofollow" href="https://docs.python.org/2/library/profile.html">https://docs.python.org/2/library/profile.html</a>).
This is the most reliable method.

- The timeit Python module
(<a  rel="nofollow" href="https://docs.python.org/2/library/timeit.html">https://docs.python.org/2/library/timeit.html</a>).  This is useful for
comparing the speed of different ways of performing a simple operation
in Python.

The time output by the system tests are so variable that they are
close to useless.  The test suite timings are completely unreliable.
These two methods are far better, and are really the only way to
obtain reliable timings.  For example I have recently used timeit:

[edward@localhost ~]$ python -m timeit -n 1000000 'import numpy; c =
numpy.array([[ 1, 2, 3],[-1, 1, 4]]);
numpy.apply_along_axis(numpy.linalg.norm, 1, c)'
1000000 loops, best of 3: 59.9 usec per loop
[edward@localhost ~]$ python -m timeit -n 1000000 'import numpy; c =
numpy.array([[ 1, 2, 3],[-1, 1, 4]]); numpy.linalg.norm(c, axis=1)'
1000000 loops, best of 3: 16.9 usec per loop
[edward@localhost ~]$

Regards,

Edward



On 29 May 2014 14:17, Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi Ed.

Features
Edge cases of function failure is now properly handled for all analytical
dispersion models.
Speed-up of all analytical dispersion models, by moving from value check, to
array check.

Could we take one of the systemtest, and inklude more spins for a speed
test?

For example one of the hansen data for CR72?
Or is all the data truncated?


Best
Troels




2014-05-29 13:14 GMT+02:00 Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt;:

</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi,

It looks complete to me :)  The target_functions.relax_disp to
lib.dispersion API is now consistent and clean.  And the changes do
not appear to have changed the speed, as it shouldn't.  Great work!
I'll merge it back to trunk now.  When I release relax 3.2.2 with the
speed ups and edge case fixes, would you have suggestions for the
points to add to the 'features' list in the release notes (such as at
<a  rel="nofollow" href="http://gna.org/forum/forum.php?forum_id=2448">http://gna.org/forum/forum.php?forum_id=2448</a>)?  Or for the
&quot;Description&quot; paragraph at the start?

Cheers,

Edward

On 29 May 2014 13:03, Troels E. Linnet &lt;NO-REPLY.INVALID-ADDRESS@xxxxxxx&gt;
wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Follow-up Comment #108, task #7793 (project relax):

This should now be completed.

    _______________________________________________________

Reply to this item at:

  &lt;<a  rel="nofollow" href="http://gna.org/task/?7793">http://gna.org/task/?7793</a>&gt;

_______________________________________________
  Message sent via/by Gna!
  <a  rel="nofollow" href="http://gna.org/">http://gna.org/</a>

</pre></blockquote></blockquote><pre style="margin: 0em;">


</pre></blockquote><pre style="margin: 0em;">


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00299" href="msg00299.html">[task #7793] Speed-up of dispersion models</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
<li><strong><a name="00343" href="msg00343.html">[task #7793] Speed-up of dispersion models</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
<li><strong><a name="00354" href="msg00354.html">[task #7793] Speed-up of dispersion models</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
<li><strong><a name="00399" href="msg00399.html">[task #7793] Speed-up of dispersion models</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
<li><strong><a name="00490" href="msg00490.html">[task #7793] Speed-up of dispersion models</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
<li><strong><a name="00504" href="msg00504.html">[task #7793] Speed-up of dispersion models</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
<li><strong><a name="00506" href="msg00506.html">[task #7793] Speed-up of dispersion models</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
<li><strong><a name="00507" href="msg00507.html">[task #7793] Speed-up of dispersion models</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
<li><strong><a name="00513" href="msg00513.html">[task #7793] Speed-up of dispersion models</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
<li><strong><a name="00528" href="msg00528.html">[task #7793] Speed-up of dispersion models</a></strong>
<ul><li><em>From:</em> Edward d Auvergne</li></ul></li>
<li><strong><a name="00529" href="msg00529.html">[task #7793] Speed-up of dispersion models</a></strong>
<ul><li><em>From:</em> Edward d Auvergne</li></ul></li>
<li><strong><a name="00557" href="msg00557.html">[task #7793] Speed-up of dispersion models</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
<li><strong><a name="00558" href="msg00558.html">Re: [task #7793] Speed-up of dispersion models</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00559" href="msg00559.html">Re: [task #7793] Speed-up of dispersion models</a></strong>
<ul><li><em>From:</em> Troels Emtekær Linnet</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer">You are on the <a href="http://gna.org">Gna!</a> mail server.</div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Fri May 30 10:00:18 2014</div>  
</body>
</html>
