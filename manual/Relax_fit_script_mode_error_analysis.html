<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.1//EN">

<!--Converted with LaTeX2HTML 2008 (1.71)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>Relax-fit script mode - error analysis</TITLE>
<META NAME="description" CONTENT="Relax-fit script mode - error analysis">
<META NAME="keywords" CONTENT="relax">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

  <!--Google analytics JS-->
  <script type="text/javascript">
  
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-30096326-1']);
    _gaq.push(['_setDomainName', 'nmr-relax.com']);
    _gaq.push(['_trackPageview']);
  
    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  
  </script>

<LINK REL="STYLESHEET" HREF="relax.css">

<LINK REL="next" HREF="Relax_fit_script_mode_finishing_off.html">
<LINK REL="previous" HREF="Relax_fit_script_mode_optimisation_exponential_curves.html">
<LINK REL="up" HREF="Relaxation_curve_fitting_in_prompt_script_UI_mode.html">
<LINK REL="next" HREF="Relax_fit_script_mode_finishing_off.html">
</HEAD>

<BODY >

<DIV CLASS="navigation"><!--Navigation Panel-->
<A NAME="tex2html6017"
  HREF="Relax_fit_script_mode_finishing_off.html">
<IMG WIDTH="48" HEIGHT="48" TITLE="Next" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html6011"
  HREF="Relaxation_curve_fitting_in_prompt_script_UI_mode.html">
<IMG WIDTH="48" HEIGHT="48" TITLE="Up" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html6005"
  HREF="Relax_fit_script_mode_optimisation_exponential_curves.html">
<IMG WIDTH="48" HEIGHT="48" TITLE="Previous" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html6013"
  HREF="Contents.html">
<IMG WIDTH="48" HEIGHT="48" TITLE="Contents" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A> 
<A NAME="tex2html6015"
  HREF="Index.html">
<IMG WIDTH="48" HEIGHT="48" TITLE="Index" ALIGN="BOTTOM" BORDER="0" ALT="index" SRC="index.png"></A> <A NAME="tex2html1"
  HREF="http://download.gna.org/relax/manual/relax.pdf"><IMG
 ALIGN="BOTTOM" BORDER="0" SRC="http://www.nmr-relax.com/images/pdf_icon_nav.png"
 ALT="pdf_icon_nav.png"></A><A NAME="tex2html2"
  HREF="http://www.nmr-relax.com"><IMG
 ALIGN="BOTTOM" BORDER="0" SRC="http://www.nmr-relax.com/images/relax_logo_nav.png"
 ALT="relax_logo_nav.png"></A>
<BR>
<B> Next:</B> <A NAME="tex2html6018"
  HREF="Relax_fit_script_mode_finishing_off.html">Relax-fit script mode -</A>
<B> Up:</B> <A NAME="tex2html6012"
  HREF="Relaxation_curve_fitting_in_prompt_script_UI_mode.html">Relaxation curve-fitting in the</A>
<B> Previous:</B> <A NAME="tex2html6006"
  HREF="Relax_fit_script_mode_optimisation_exponential_curves.html">Relax-fit script mode -</A>
 &nbsp; <B>  <A NAME="tex2html6014"
  HREF="Contents.html">Contents</A></B> 
 &nbsp; <B>  <A NAME="tex2html6016"
  HREF="Index.html">Index</A></B> 
<BR>
<BR></DIV>
<!--End of Navigation Panel-->

<H2><A NAME="SECTION05137000000000000000">
Relax-fit script mode - error analysis</A>
</H2>

<P>
Only one technique adequately estimates parameter errors when the parameter values where found by optimisation - Monte Carlo simulations<A NAME="3847"></A>.
In relax this can be implemented by using a series of functions from the <TT>monte_carlo</TT> user function class.
Firstly the number of simulations needs to be set

<P>
<PRE>[firstnumber=68]
# Monte Carlo simulations.
monte_carlo.setup(number=500)
</PRE>

<P>
For each simulation, randomised relaxation curves will be fit using exactly the same methodology as the original exponential curves.
These randomised curves are created by back calculation from the fitted model parameter values and then each point on the curve randomised using the error values set earlier in the script

<P>
<PRE>[firstnumber=70]
monte_carlo.create_data()
</PRE>

<P>
As a grid search for each simulation would be too computationally expensive, the starting point for optimisation for each simulation can be set to the position of the optimised parameter values of the model

<P>
<PRE>[firstnumber=71]
monte_carlo.initial_values()
</PRE>

<P>
Then exactly the same optimisation as was used for the model can be performed

<P>
<PRE>[firstnumber=72]
minimise.execute('newton', constraints=False)
</PRE>

<P>
The parameter errors are then determined as the standard deviation of the optimised parameter values of the simulations

<P>
<PRE>[firstnumber=73]
monte_carlo.error_analysis()
</PRE>

<P>

<DIV CLASS="navigation"><HR>
<!--Navigation Panel-->
<A NAME="tex2html6017"
  HREF="Relax_fit_script_mode_finishing_off.html">
<IMG WIDTH="48" HEIGHT="48" TITLE="Next" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html6011"
  HREF="Relaxation_curve_fitting_in_prompt_script_UI_mode.html">
<IMG WIDTH="48" HEIGHT="48" TITLE="Up" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html6005"
  HREF="Relax_fit_script_mode_optimisation_exponential_curves.html">
<IMG WIDTH="48" HEIGHT="48" TITLE="Previous" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html6013"
  HREF="Contents.html">
<IMG WIDTH="48" HEIGHT="48" TITLE="Contents" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A> 
<A NAME="tex2html6015"
  HREF="Index.html">
<IMG WIDTH="48" HEIGHT="48" TITLE="Index" ALIGN="BOTTOM" BORDER="0" ALT="index" SRC="index.png"></A> <A NAME="tex2html1"
  HREF="http://download.gna.org/relax/manual/relax.pdf"><IMG
 ALIGN="BOTTOM" BORDER="0" SRC="http://www.nmr-relax.com/images/pdf_icon_nav.png"
 ALT="pdf_icon_nav.png"></A><A NAME="tex2html2"
  HREF="http://www.nmr-relax.com"><IMG
 ALIGN="BOTTOM" BORDER="0" SRC="http://www.nmr-relax.com/images/relax_logo_nav.png"
 ALT="relax_logo_nav.png"></A>
<BR>
<B> Next:</B> <A NAME="tex2html6018"
  HREF="Relax_fit_script_mode_finishing_off.html">Relax-fit script mode -</A>
<B> Up:</B> <A NAME="tex2html6012"
  HREF="Relaxation_curve_fitting_in_prompt_script_UI_mode.html">Relaxation curve-fitting in the</A>
<B> Previous:</B> <A NAME="tex2html6006"
  HREF="Relax_fit_script_mode_optimisation_exponential_curves.html">Relax-fit script mode -</A>
 &nbsp; <B>  <A NAME="tex2html6014"
  HREF="Contents.html">Contents</A></B> 
 &nbsp; <B>  <A NAME="tex2html6016"
  HREF="Index.html">Index</A></B> </DIV>
<!--End of Navigation Panel-->
<ADDRESS>
The <a href=http://www.nmr-relax.com>relax</a> <a href=http://www.nmr-relax.com/manual>user manual</a> (<a href=http://download.gna.org/relax/manual/relax.pdf>PDF</a>), created 2014-10-10.
</ADDRESS>
</BODY>
</HTML>
