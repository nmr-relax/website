<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: field strength off&#45;resonance R1rho constant relax time relaxation dispersion -->
<!--X-From-R13: Febryf Szgrxæe Zvaarg &#60;gyvaargNaze&#45;erynk.pbz> -->
<!--X-Date: Thu, 21 Aug 2014 12:00:50 +0200 -->
<!--X-Message-Id: CA+CBx2Mg__D3tEqkxexndVt_37Qb_2VERpcwvm0mif8uKVNpUQ@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: CAMmADa=s09qKHWv4TUcKMJ_iX=dLygyL95c&#45;6RG5xKxH008EUg@mail.gmail.com -->
<!--X-Reference: CA+CBx2PCeVAexqxY=fn8zOcW8sLgtV2s5ghEi42rx00_B&#45;_B8Q@mail.gmail.com -->
<!--X-Reference: CA+CBx2N3uBGFUK4JvgHOFcCT649fCsOxUxH3JxRNtEWeTQurmw@mail.gmail.com -->
<!--X-Reference: CAED9pY&#45;Z&#45;&#45;kdfHPyEP7osunX0EjTYkaZD&#45;WyO41gFjnvAE4=og@mail.gmail.com -->
<!--X-Reference: CAMmADan_GNQ2DeD0+cjQx31_87U0JiivEW6hG6vYaSbZFgv8Wg@mail.gmail.com -->
<!--X-Reference: CAMmADakiDBq9RBGM_e0CKeia_fJB=K5+f8rXT2xA=ABO1sNDPg@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: field strength off-resonance R1rho constant relax time relaxation dispersion -- August 21, 2014 - 12:00</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: field strength off-resonance R1rho constant relax time relaxation dispersion</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00021" class="tabs">Index by Date</a> | <a href="threads.html#00021" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00020.html">Date Prev</a>] [<a href="msg00022.html">Date Next</a>] [<a href="msg00020.html">Thread Prev</a>] [<a href="msg00022.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Atul Srivastava &lt;asrivast@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Thu, 21 Aug 2014 12:00:00 +0200</li>
<li class="menuitem">
<em>Cc</em>: &quot;relax-users@xxxxxxx&quot; &lt;relax-users@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113; h=mime-version:sender:in-reply-to:references:from:date:message-id :subject:to:cc:content-type:content-transfer-encoding; bh=ie0fdPpcN5Xzb/HwYPeB8wmvVOKoQNNBi8alXXjbKig=; b=x2C/3cDTDeRxKXm18pGzYWpZ33aeCl+HwXE9sJnc544GDM4Hdxj21toAPfMhLFH6VD yuG7kIwcwa+9TObkTFBKmecaGfylexkKP+oynKMaCjQGv33FA5OMnTrl/d8aBqIEReZ9 XMlayonCgAdY8EMU1HTx1mnB61w/NXQoMt4adgBqHX+REhU4yo7CGWnFcihweYKdc3X2 7K+GxVMtrc7RdCRUhPtm6aVBdtkPCXguVdg1Wt3nTiyYtr7omWZ58yJJ5zEmS/dmoAMr T0xvJxQ/z+oR/mnSMeBiyg9/e3PRUH9yoq120q/v2FRRb2lQDiP+p+AMAS9BRmGuLZFQ p2kA==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00021.html">CA+CBx2Mg__D3tEqkxexndVt_37Qb_2VERpcwvm0mif8uKVNpUQ@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;CAMmADa=s09qKHWv4TUcKMJ_iX=dLygyL95c-6RG5xKxH008EUg@mail.gmail.com&gt; &lt;CA+CBx2PCeVAexqxY=fn8zOcW8sLgtV2s5ghEi42rx00_B-_B8Q@mail.gmail.com&gt; &lt;<a href="msg00009.html">CA+CBx2N3uBGFUK4JvgHOFcCT649fCsOxUxH3JxRNtEWeTQurmw@mail.gmail.com</a>&gt; &lt;CAED9pY-Z--kdfHPyEP7osunX0EjTYkaZD-WyO41gFjnvAE4=og@mail.gmail.com&gt; &lt;<a href="msg00018.html">CAMmADan_GNQ2DeD0+cjQx31_87U0JiivEW6hG6vYaSbZFgv8Wg@mail.gmail.com</a>&gt; &lt;CAMmADakiDBq9RBGM_e0CKeia_fJB=K5+f8rXT2xA=ABO1sNDPg@mail.gmail.com&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Troels Emtekær Linnet</strong> on August 21, 2014 - 12:00:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Dear Atul.

Thank you for a very descriptive problem.

I am sure this post will help others.
I will write an extended detailed description, in hope it can help others.
Most of it will be trivial for you.

Let us arm ourself with some reference information, to let the details
become clearer.

Since your last post, I have quickly expanded the wiki tutorial on
R1rho off resonance:

In the section: 1_setup_r1rho.py
<a  rel="nofollow" href="http://wiki.nmr-relax.com/Tutorial_for_Relaxation_dispersion_analysis_r1rho_fixed_time_recorded_on_varian_as_sequential_spectra">http://wiki.nmr-relax.com/Tutorial_for_Relaxation_dispersion_analysis_r1rho_fixed_time_recorded_on_varian_as_sequential_spectra</a>

And also the sample script you mention:
relax/sample_scripts/relax_disp/R1rho_analysis.py
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/*checkout*/relax/trunk/sample_scripts/relax_disp/R1rho_analysis.py?revision=HEAD">http://svn.gna.org/viewcvs/*checkout*/relax/trunk/sample_scripts/relax_disp/R1rho_analysis.py?revision=HEAD</a>

And we can use Figure 1 and 10 in the reference.
Palmer, A.G. &amp; Massi, F. (2006). Characterization of the dynamics of
biomacromolecules using rotating-frame spin relaxation NMR
spectroscopy. Chem. Rev. 106, 1700-1719
DOI: <a  rel="nofollow" href="http://dx.doi.org/10.1021/cr04042875">http://dx.doi.org/10.1021/cr04042875</a>

I have tried to reproduce that figure here:
<a  rel="nofollow" href="http://wiki.nmr-relax.com/images/1/12/Fig1_Palmer_Massi_2006.png">http://wiki.nmr-relax.com/images/1/12/Fig1_Palmer_Massi_2006.png</a>

------
Let us go through lines in the Sample script.

# Load the sequence.
sequence.read('fake_sequence.in', dir=DATA_PATH, res_num_col=1, 
res_name_col=2)
-&gt; This basically creates the spin-data structure, to store subsequent
information.

# Set the isotope information.
spin.isotope(isotope='15N')
-&gt; By defining which isotope, we can convert to ppm, when we have the
spectrometer field.
-&gt;  The physical constants are pulled from: cat lib/physical_constants.py

Then comes a section, to load data.
In the sample script, the data is put in manually.
In the wiki tutorial, it is pulled from files, which are prepared in bash.
That is a 'preference' issue. The data I have analysed, were with 70+ 
spectrum.
So I preferred to do it in files.

Then we loop over the spectrums:

spectrum.read_intensities(file=file, dir=DATA_PATH, spectrum_id=id,
int_method='height')
spectrum.baseplane_rmsd(spectrum_id=id, error=rmsd)
-&gt; The intensities, and its associated error. One can either measure
the RMSD of the spectrum,
</pre><blockquote class="blockquote"><pre style="margin: 0em;">or replicate spectrums. For R1rho, it will normally measuring the RMSD.
</pre></blockquote><pre style="margin: 0em;">-&gt; A quick way in linux is (for NMRPipe data):
showApod test.ft2 | grep &quot;REMARK Automated Noise Std Dev in Processed
Data:&quot; | awk '{print $9}'

Or in SPARKY:
<a  rel="nofollow" href="http://wiki.nmr-relax.com/Tutorial_for_Relaxation_dispersion_analysis_cpmg_fixed_time_recorded_on_varian_as_fid_interleaved#Measure_the_backgorund_noise_.22RMSD.22_in_each_of_the_.ft2_files">http://wiki.nmr-relax.com/Tutorial_for_Relaxation_dispersion_analysis_cpmg_fixed_time_recorded_on_varian_as_fid_interleaved#Measure_the_backgorund_noise_.22RMSD.22_in_each_of_the_.ft2_files</a>

# Set the relaxation dispersion experiment type.
relax_disp.exp_type(spectrum_id=id, exp_type='R1rho')
-&gt; Well, the program needs to know which &quot;code-path&quot; to take. Not CPMG code. 
:-)


# Set the relaxation dispersion spin-lock field strength (nu1).
relax_disp.spin_lock_field(spectrum_id=id, field=field)
-&gt; Here: 'help(relax_disp.spin_lock_field)', show is that this should be in 
Hz.
-&gt; Let is review figure Fig1_Palmer_Massi_2006.png
-&gt; This is the w_1 on S_x axis.
-&gt; What is here put into relax is nu_1. This is then later converted
to w_1, by multiplying with 2*pi.
-&gt; It seems that you have: 'spin-lock amplitude' / &quot;nu_1&quot; / 'spin-lock
field' in column 4, while the the sample script has this in Column 3.

# Set the spin-lock offset.
relax_disp.spin_lock_offset(spectrum_id=id, offset=offset)
-&gt; Here: 'help(relax_disp.spin_lock_offset)', show is that this should
be in &quot;ppm&quot;.
-&gt; I see you have the distance/position (in Hz)  of the spin-lock
carrier in column 3. Values of 2100, 2728, ... .... ... ...6500
-&gt; Relax needs to know the position in ppm. Edward can give you a
detailed description why we use ppm. It is related to minimise user
error input.
-&gt; You need to calculate this yourself.
</pre><blockquote class="blockquote"><pre style="margin: 0em;">If you use NMRPipe, and look in 'fic.com', it could look like this
</pre></blockquote><pre style="margin: 0em;">var2pipe -in ./fid \
 -noaswap  \
  -xN              2044  -yN               256  \
  -xT              1022  -yT               128  \
  -xMODE        Complex  -yMODE      Rance-Kay  \
  -xSW        12001.200  -ySW         2659.928  \
  -xOBS         750.061  -yOBS          76.012  \
  -xCAR          4.7893  -yCAR         118.536  \
  -xLAB              HN  -yLAB             N15  \
  -ndim               2  -aq2D          States  \
  -out ./test.fid -verb -ov

Or try this script in relax:

</pre><blockquote class="blockquote"><pre style="margin: 0em;">relax test.py
</pre></blockquote><pre style="margin: 0em;">------------  test.py
from math import pi
from lib.physical_constants import return_gyromagnetic_ratio

H_frq = 900.0e6
print(&quot;The magnetic field strength as the proton frequency in Mega
Hertz: %3.2f&quot; % (H_frq / 1.E6) )

xOBS_Hz = H_frq
B0_tesla =  xOBS_Hz / return_gyromagnetic_ratio(nucleus='1H') * 2.0 * pi
print(&quot;BO in Tesla: %3.2f&quot; % B0_tesla)

yOBS_N15_Hz = abs( xOBS_Hz / return_gyromagnetic_ratio(nucleus='1H') *
return_gyromagnetic_ratio(nucleus='15N') )
print(&quot;The precess frequency for 15N in MHz: %3.2f&quot; % (yOBS_N15_Hz / 1.E6) )

offset_Hz = 2100.

offset_ppm_N15 = offset_Hz / yOBS_N15_Hz * 1E6
print(&quot;The offset ppm: %3.2f&quot; % (offset_ppm_N15) )

# Position of carrier.
yCAR_N15_ppm = 118.536
print(&quot;The center position of the carrier: %3.2f&quot; % (yCAR_N15_ppm) )

omega_rf_ppm = yCAR_N15_ppm + offset_ppm_N15
print(&quot;The omega_rf in ppm: %3.2f&quot; % (omega_rf_ppm) )
------------

# Set the relaxation times (in s).
relax_disp.relax_time(spectrum_id=id, time=relax_time)
-&gt; This is used for the initial R2eff calculation, for exponential
curve fitting.

# Set the NMR field strength of the spectrum.
spectrometer.frequency(id=id, frq=H_frq)
-&gt; This is used for conversion between nucleus, etc.

# Load the R1 data.
relax_data.read(ri_id='500MHz', ri_type='R1', frq=500e6,
file='R1_500MHz.out', dir=DATA_PATH, mol_name_col=1, res_num_col=2,
res_name_col=3, spin_num_col=4, spin_name_col=5, data_col=6,
error_col=7)
-&gt; R1 needs to be loaded. This is because that R1 is part of the
equations. :-) The next release of relax, will implement feature where
R1 is fitted.
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Note, that fitting introduces another variable in the equations.
</pre></blockquote><pre style="margin: 0em;">

# Read the chemical shift data.
chemical_shift.read(file='ref_500MHz.list', dir=DATA_PATH)

-&gt; This is needed to get the ppm position of the nucleus.
-&gt; See now: <a  rel="nofollow" href="http://www.nmr-relax.com/manual/Dispersion_model_summary.html">http://www.nmr-relax.com/manual/Dispersion_model_summary.html</a>
-&gt; The &quot;average resonance in the rotating frame&quot; Omega(bar) = w_(bar) - w_rf.&quot;
-&gt; Here w_bar is the chemical shift, and w_rf is the offset.
-&gt; Let is review figure Fig1_Palmer_Massi_2006.png
-&gt; This is the S_z axis.

That should be it.

If you have any questions, please don't hesitate to write again.

If you need more help, consider writing a support request on the
homepage tracker.
- <a  rel="nofollow" href="https://gna.org/support/?group=relax">https://gna.org/support/?group=relax</a>

Add following information:
# Please attach a system info file
</pre><blockquote class="blockquote"><pre style="margin: 0em;">relax -i -t relax_i.txt
</pre></blockquote><pre style="margin: 0em;">

# Please write up, which buttons you pushed, or attach your script.
# Consider adding your data in &quot;sample&quot; format. Meaning that you
delete all confidential information from the files, and only have 1-2
residues left for testing.

If you write such a support request, it it easier to share script files, and
help other users.

The benefits from such a support request is:
  - The information is available to all users, which can benefit
others in same situation.
  - The information can be tracked back.
  - The relax manual can be expanded, to help future users in same situation.


Good luck!

Best
Troels Emtekær Linnet
PhD student
Copenhagen University
SBiNLab, 3-0-41
Ole Maaloes Vej 5
2200 Copenhagen N
Tlf: +45 353-22083
Lync Tlf: +45 353-30195



2014-08-20 18:56 GMT+02:00 Atul Srivastava &lt;asrivast@xxxxxxx&gt;:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Dear Edward,

I already mentioned the issue but I realized  that perhaps the question was
not very clear.

Following is the situation I am trying to solve by 'relax':
I have constant-relaxation-time relaxation-dispersion data for off-resonance
15N R1rho acquired on Bruker spectrometers (I would like to mention that I
have 15N R1 data as well) at two magnetic fields.
In this relaxation-dispersion experiment I have used a constant spin-lock
amplitude of 1500 Hz. Spin-lock time  was 0.04 second.
I varied only the position of the spin-lock carrier. The distance (in Hz)
between the center of the spectrum (along 15N dimension) and the spin-lock
carrier were 2100, 2728, ... .... ... ...6500 Hz.

As you know that the effective field sensed by each spin will be different
according to the position of the peak in the spectrum. I tried to calculate
that by 'relax' that gave a output file 'w2_eff.out'; but these values did
not match with what I calculated manually.

I request you to please provide a new sample script for the
relaxation-dispersion analysis appropriate for the above mentioned case.


Further,  in the following format the column for offset (third column) does
not accept 'None' which I needed to set reference intensity. It returns the
message &quot;RelaxError: The offset value must be provided.&quot;. However, the
program accepts 'None' for 'field',.
--------------------------------------------------------------------------------------------------------------------------------------------------
data = [
    ['900MHz_reference',    'ref_off_reso_R1rho_ubi_1.list',   None, 1500,
0.320,  900.0e6, 90000],
    ['900MHz_2100',    '2100_off_reso_R1rho_ubi_2.list',       2100, 1500,
0.320,  900.0e6, 90000],
    ['900MHz_2728',    '2728_off_reso_R1rho_ubi_3.list',       2728, 1500,
0.320,  900.0e6, 90000],
    ['900MHz_3357',    '3357_reso_R1rho_ubi_4.list',           3357, 1500,
0.320,  900.0e6, 90000],
    ['900MHz_3985',    '3985_off_reso_R1rho_ubi_5.list',       3985, 1500,
0.320,  900.0e6, 90000],
    ['900MHz_4614',    '4614_off_reso_R1rho_ubi_6.list',       4614, 1500,
0.320,  900.0e6, 90000],
    ['900MHz_rep_4614','4614_rep_off_reso_R1rho_ubi_10.list',  4614, 1500,
0.320,  900.0e6, 90000],
    ['900MHz_5242',    '5242_off_reso_R1rho_ubi_7.list',       5242, 1500,
0.320,  900.0e6, 90000],
    ['900MHz_5871',    '5871_off_reso_R1rho_ubi_8.list',       5871, 1500,
0.320,  900.0e6, 90000],
    ['900MHz_6500',    '6500_off_reso_R1rho_ubi_9.list',       6500, 1500,
0.320,  900.0e6, 90000]
]
---------------------------------------------------------------------------------------------------------------------------------------------------

I emphasized few things above for clarity, though they are trivial for you.

Thanks,
Atul


On Tue, Aug 19, 2014 at 9:52 AM, Atul Srivastava &lt;asrivast@xxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">

Hi Edward,

Thanks for yours and Troels' kind help. I am trying to get the data on
second field.
I am still working with the test data and trying to analyze few residues
manually to check if the analysis is consistent.  I will update you once I
am satisfied with my analysis.

Thanks again,
Atul


On Mon, Aug 18, 2014 at 2:37 AM, Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt;
wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">

Hi Atul,

I have just returned from holidays, hence my late reply.  However
Troels' reply should have fully addressed your questions and issues.
Is the analysis now working for you?  Note that the spin-lock
amplitude Omega_1 is the spin-lock field strength or nu_1, as you have
supplied (converted using the factor of 2*pi).  Tilt angles and
anything else the specific model requires are calculated from this and
the difference of the spin's chemical shift and the experiment
specific spin-lock offset.

Regards,

Edward




On 2 August 2014 09:52, Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxxxxxx&gt;
wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Dear Atul.

I forgot one question.

Do you have R1 data available?

relax cannot currently do calculation without these measured values.
relax_data.read(ri_id='R1', ri_type='R1',
frq=cdp.spectrometer_frq_list[0], file= .....)

I am about to try to also make it possible to fit R1 values.
sr #3135: Optimisation of the R1 relaxation rate for the off-resonance
R1rho relaxation dispersion models.
<a  rel="nofollow" href="https://gna.org/support/?3135">https://gna.org/support/?3135</a>

But that can take some weeks before it is implemented, and tested
properly.

Best
Troels

2014-08-02 9:47 GMT+02:00 Troels Emtekær Linnet
&lt;tlinnet@xxxxxxxxxxxxx&gt;:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Dear Atul.

Welcome to the mailing list!

This question is a very good one, and is not covered good enough in
the manual !

There has been a question related to this question on the mailing list
recently.
From Peixiang, at:
<a  rel="nofollow" href="http://thread.gmane.org/gmane.science.nmr.relax.user/1654">http://thread.gmane.org/gmane.science.nmr.relax.user/1654</a>
<a  rel="nofollow" href="http://thread.gmane.org/gmane.science.nmr.relax.user/1666">http://thread.gmane.org/gmane.science.nmr.relax.user/1666</a>
<a  rel="nofollow" href="http://thread.gmane.org/gmane.science.nmr.relax.user/1667">http://thread.gmane.org/gmane.science.nmr.relax.user/1667</a>

Try to go through these post first, to cover the background.
Don't get to confused, I will give you the answer below. :-)

By asking here on the public mailing list, your question will
potentially help any other users who would
have the same question. And it will help us to turn our attention to
the manual lacking a tutorial for R1rho models.

For example this mailing list can be viewed here:
<a  rel="nofollow" href="http://thread.gmane.org/gmane.science.nmr.relax.user">http://thread.gmane.org/gmane.science.nmr.relax.user</a>

And searches in same mail directory can be done here:
<a  rel="nofollow" href="http://dir.gmane.org/gmane.science.nmr.relax.user">http://dir.gmane.org/gmane.science.nmr.relax.user</a>

Your specific question is now listed here:
<a  rel="nofollow" href="http://thread.gmane.org/gmane.science.nmr.relax.user/1718">http://thread.gmane.org/gmane.science.nmr.relax.user/1718</a>

Edward can probably extend the your answer into details.
I know, that he is on holiday for the next two weeks, so I can try to
answer your question.

I am a PhD student at the structural biology in Copenhagen, and have
been working on the dispersion branch (CPMG and R1rho).
So I will however do my best to try to help you in the meantime.

##### How to get help

How to find help:
The manual
<a  rel="nofollow" href="http://wiki.nmr-relax.com/Manual">http://wiki.nmr-relax.com/Manual</a>

Related to: Relaxation Dispersion:
<a  rel="nofollow" href="http://www.nmr-relax.com/manual/Relaxation_dispersion.html">http://www.nmr-relax.com/manual/Relaxation_dispersion.html</a>

<a  rel="nofollow" href="http://www.nmr-relax.com/manual/Relaxation_dispersion_optimisation_theory.html">http://www.nmr-relax.com/manual/Relaxation_dispersion_optimisation_theory.html</a>

<a  rel="nofollow" href="http://www.nmr-relax.com/manual/Analysing_dispersion_in_prompt_script_UI_mode.html">http://www.nmr-relax.com/manual/Analysing_dispersion_in_prompt_script_UI_mode.html</a>
<a  rel="nofollow" href="http://www.nmr-relax.com/manual/Dispersion_model_summary.html">http://www.nmr-relax.com/manual/Dispersion_model_summary.html</a>

It seems we have a problem, that setting up R1rho experiments is not
covered in well the manual.

Then I see that you have found the folder with sample scripts.
The sample script at:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">cat sample_scripts/relax_disp/R1rho_analysis.py
</pre></blockquote><pre style="margin: 0em;">

Did you know, that you can get help to all the functions?

You can start relax, and see the help information this way:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">relax
help(sequence.read)
help(spectrum.read_intensities)
</pre></blockquote><pre style="margin: 0em;">

But what you are looking for is this:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">help(relax_disp.spin_lock_field)
help(relax_disp.spin_lock_offset)
</pre></blockquote><pre style="margin: 0em;">

Or go to the GUI, and in the top select:
user functions (n-z) -&gt; relax_disp -&gt; spin_lock_field

---------

Relax has something called &quot;system tests&quot;, which make sure that all
functions of relax is kept when changing the code.

Try opening the setup of one of these systemtests:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">gedit test_suite/system_tests/relax_disp.py
</pre></blockquote><pre style="margin: 0em;">

And search for &quot;def setup_r1rho_kjaergaard&quot;.
Skip all lines with:
- self.assertEqual
Delete all:
- self.interpreter

Here you can get another way to inspire you how to setup things.
Test data resides in:
cd test_suite/shared_data/dispersion/Kjaergaard_et_al_2013/

And have been analysed by:

<a  rel="nofollow" href="http://wiki.nmr-relax.com/Tutorial_for_Relaxation_dispersion_analysis_r1rho_fixed_time_recorded_on_varian_as_sequential_spectra#Intro">http://wiki.nmr-relax.com/Tutorial_for_Relaxation_dispersion_analysis_r1rho_fixed_time_recorded_on_varian_as_sequential_spectra#Intro</a>

So back to your question.
You mention spin-lock amplitude.
This is in relax called &quot;spin-lock field&quot; or &quot; spin-lock field
strength&quot;.

If we set in the setup:

-----
# In MHz.
yOBS = 81.050
# In ppm
yCAR = 118.078
centerPPM_N15 = yCAR
-------

# So for varian giving offset in Hertz, and relax wants in ppm:

# Calculating the spin-lock offset in ppm, from offsets values
provided in Hz.
frq_N15_Hz = yOBS * 1E6
offset_ppm_N15 = float(deltadof2) / frq_N15_Hz * 1E6
omega_rf_ppm = centerPPM_N15 + offset_ppm_N15

# Set The spin-lock offset, omega_rf, in ppm.
relax_disp.spin_lock_offset(spectrum_id=sp_id, offset=omega_rf_ppm)


For this experiment, we first had to do a calibration experiment to
find how the lock power translated into field strength.
That results is written into a python dictionary in the setup:

spin_lock_field_strengths_Hz = {'35': 431.0, '39': 651.2, '41': 800.5,
'43': 984.0, '46': 1341.11, '48': 1648.5}

# Looping over file with all settings:
dpwr2slock = line.split()[3]
spin_lock_field_strength = spin_lock_field_strengths_Hz[dpwr2slock]

# Set The spin-lock field strength, nu1, in Hz
relax_disp.spin_lock_field(spectrum_id=sp_id,
field=spin_lock_field_strength)

I hope this helps!

Please write back here to the mailing list, if the answer covers your
question.

Good luck!

Best
Troels Emtekær Linnet
PhD student
Copenhagen University
SBiNLab, 3-0-41
Ole Maaloes Vej 5
2200 Copenhagen N
Tlf: +45 353-22083
Lync Tlf: +45 353-30195



2014-08-01 19:42 GMT+02:00 Atul Srivastava &lt;asrivast@xxxxxxx&gt;:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Dear Edward,

I am trying to use 'relax' for the off-resonance R1rho
constant-relaxation-time relaxation dispersion using
R1rho_analysis.py
script available as sample script with relax.

The following is the section where I have question:

---------------------------------------------------------------------------------------
data = [
    ['900MHz_reference_3000.list',
'ref_off_reso_R1rho_ubi_1.list',
None, 118.275, 0.320,  900.21422558574e6, 90000],
    ['900MHz_2100.list',    '2100_off_reso_R1rho_ubi_2.list',
2100,
118.275, 0.320,  900.21422558574e6, 90000],
    ['900MHz_2728.list',    '2728_off_reso_R1rho_ubi_3.list',
2728,
118.275, 0.320,  900.21422558574e6, 90000],
    ['900MHz_3357.list',    '3357_reso_R1rho_ubi_4.list',
3357,
118.275, 0.320,  900.21422558574e6, 90000],
    ['900MHz_3985.list',    '3985_off_reso_R1rho_ubi_5.list',
3985,
118.275, 0.320,  900.21422558574e6, 90000],
    ['900MHz_4614.list',    '4614_off_reso_R1rho_ubi_6.list',
4614,
118.275, 0.320,  900.21422558574e6, 90000],
    ['900MHz_rep_4614.list','4614_rep_off_reso_R1rho_ubi_10.list',
4614,
118.275, 0.320,  900.21422558574e6, 90000],
    ['900MHz_5242.list',    '5242_off_reso_R1rho_ubi_7.list',
5242,
118.275, 0.320,  900.21422558574e6, 90000],
    ['900MHz_5871.list',    '5871_off_reso_R1rho_ubi_8.list',
5871,
118.275, 0.320,  900.21422558574e6, 90000],
    ['900MHz_6500.list',    '6500_off_reso_R1rho_ubi_9.list',
6500,
118.275, 0.320,  900.21422558574e6, 90000]
]
# Loop over the spectra.
for id, file, field, offset, relax_time, H_frq, rmsd in data:
    # Load the peak intensities and set the errors.
    spectrum.read_intensities(file=file, dir=DATA_PATH,
spectrum_id=id,
int_method='height')
    spectrum.baseplane_rmsd(spectrum_id=id, error=rmsd)

    # Set the relaxation dispersion experiment type.
    relax_disp.exp_type(spectrum_id=id, exp_type='R1rho')

    # Set the relaxation dispersion spin-lock field strength (nu1).
    relax_disp.spin_lock_field(spectrum_id=id, field=field)

    # Set the spin-lock offset.
    relax_disp.spin_lock_offset(spectrum_id=id, offset=offset)

    # Set the relaxation times (in s).
    relax_disp.relax_time(spectrum_id=id, time=relax_time)

    # Set the NMR field strength of the spectrum.
    spectrometer.frequency(id=id, frq=H_frq)

------------------------------------------------------------------------------------------------------
I have supplied the spin lock offset from the center of the spectrum
in Hz
for &quot;field&quot;.
And the center of spectrum in ppm as 118.275 ppm for &quot;offset&quot;.
However, I wonder where the value of spin-lock amplitude is to be
provided
as it is indispensable for the calculation of spin-lock effective
field. I
have acquired my data with spinlock amplitude 1500 kz with different
offset
values for 15N spin.

Please let me know that at your earliest convenience.
Thanks for your time and consideration.

Sincerely,
Atul
_______________________________________________
relax (<a  rel="nofollow" href="http://www.nmr-relax.com">http://www.nmr-relax.com</a>)

This is the relax-users mailing list
relax-users@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="https://mail.gna.org/listinfo/relax-users">https://mail.gna.org/listinfo/relax-users</a>
</pre></blockquote></blockquote><pre style="margin: 0em;">

_______________________________________________
relax (<a  rel="nofollow" href="http://www.nmr-relax.com">http://www.nmr-relax.com</a>)

This is the relax-users mailing list
relax-users@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="https://mail.gna.org/listinfo/relax-users">https://mail.gna.org/listinfo/relax-users</a>
</pre></blockquote></blockquote><pre style="margin: 0em;">


</pre></blockquote><pre style="margin: 0em;">

</pre></blockquote><pre style="margin: 0em;">


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00024" href="msg00024.html">Re: field strength off-resonance R1rho constant relax time relaxation dispersion</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00023" href="msg00023.html">Re: field strength off-resonance R1rho constant relax time relaxation dispersion</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00022" href="msg00022.html">Re: field strength off-resonance R1rho constant relax time relaxation dispersion</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00007" href="msg00007.html">field strength off-resonance R1rho constant relax time relaxation dispersion</a></strong>
<ul><li><em>From:</em> Atul Srivastava</li></ul></li>
<li><strong><a name="00008" href="msg00008.html">Re: field strength off-resonance R1rho constant relax time relaxation dispersion</a></strong>
<ul><li><em>From:</em> Troels Emtekær Linnet</li></ul></li>
<li><strong><a name="00009" href="msg00009.html">Re: field strength off-resonance R1rho constant relax time relaxation dispersion</a></strong>
<ul><li><em>From:</em> Troels Emtekær Linnet</li></ul></li>
<li><strong><a name="00015" href="msg00015.html">Re: field strength off-resonance R1rho constant relax time relaxation dispersion</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00018" href="msg00018.html">Re: field strength off-resonance R1rho constant relax time relaxation dispersion</a></strong>
<ul><li><em>From:</em> Atul Srivastava</li></ul></li>
<li><strong><a name="00020" href="msg00020.html">Re: field strength off-resonance R1rho constant relax time relaxation dispersion</a></strong>
<ul><li><em>From:</em> Atul Srivastava</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Fri Aug 22 10:20:36 2014</div>  
</body>
</html>
