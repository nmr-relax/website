<!-- MHonArc v2.6.16 -->
<!--X-Subject: r8099 &#45; in /1.3/test_suite: shared_data/peak_lists/	shared_data/sequence/ system_tests/scripts/ -->
<!--X-From-R13: rqjneqNaze&#45;erynk.pbz -->
<!--X-Date: Wed, 03 Dec 2008 14:12:31 +0100 -->
<!--X-Message-Id: E1L7rWp&#45;0006IA&#45;Su@subversion.gna.org -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>r8099 - in /1.3/test_suite: shared_data/peak_lists/	shared_data/sequence/ system_tests/scripts/ -- December 03, 2008 - 14:12</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />r8099 - in /1.3/test_suite: shared_data/peak_lists/	shared_data/sequence/ system_tests/scripts/</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00030" class="tabs">Index by Date</a> | <a href="threads.html#00030" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00029.html">Date Prev</a>] [<a href="msg00031.html">Date Next</a>] [<a href="msg00029.html">Thread Prev</a>] [<a href="msg00031.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: relax-commits@xxxxxxx</li>
<li class="menuitem">
<em>Date</em>: Wed, 03 Dec 2008 13:12:31 -0000</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00030.html">E1L7rWp-0006IA-Su@subversion.gna.org</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>edward</strong> on December 03, 2008 - 14:12:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Author: bugman
Date: Wed Dec  3 14:12:31 2008
New Revision: 8099

URL: <a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax?rev=8099&amp;view=rev">http://svn.gna.org/viewcvs/relax?rev=8099&amp;view=rev</a>
Log:
Added all the files necessary to reproduce bug #12670 
(<a  rel="nofollow" href="https://gna.org/bugs/index.php?12670">https://gna.org/bugs/index.php?12670</a>).

This bug was reported by Michael Funk (mifu att nmr dot mpibpc dot mpg dot 
de).

The script needs to be modified to point to the correct locations and needs 
to be activated as a
system test.


Added:
    1.3/test_suite/shared_data/peak_lists/700mhz-263k-1m-02.listb
    1.3/test_suite/shared_data/peak_lists/700mhz-263k-1m-04.listb
    1.3/test_suite/shared_data/peak_lists/700mhz-263k-1m-06.listb
    1.3/test_suite/shared_data/peak_lists/700mhz-263k-1m-08.listb
    1.3/test_suite/shared_data/peak_lists/700mhz-263k-1m-10.listb
    1.3/test_suite/shared_data/peak_lists/700mhz-263k-1m-12.listb
    1.3/test_suite/shared_data/peak_lists/700mhz-263k-1m-14.listb
    1.3/test_suite/shared_data/peak_lists/700mhz-263k-1m-16.listb
    1.3/test_suite/shared_data/sequence/1UBQ.seq
    1.3/test_suite/system_tests/scripts/1UBQ_relax_fit.py

Added: 1.3/test_suite/shared_data/peak_lists/700mhz-263k-1m-02.listb
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/1.3/test_suite/shared_data/peak_lists/700mhz-263k-1m-02.listb?rev=8099&amp;view=auto">http://svn.gna.org/viewcvs/relax/1.3/test_suite/shared_data/peak_lists/700mhz-263k-1m-02.listb?rev=8099&amp;view=auto</a>
==============================================================================
--- 1.3/test_suite/shared_data/peak_lists/700mhz-263k-1m-02.listb (added)
+++ 1.3/test_suite/shared_data/peak_lists/700mhz-263k-1m-02.listb Wed Dec  3 
14:12:31 2008
@@ -1,0 +1,3 @@
+      Assignment         w1         w2   Data Height       S/N     Spectrum  
 
+
+            Q2N-H    122.592      9.103       487178         28

Added: 1.3/test_suite/shared_data/peak_lists/700mhz-263k-1m-04.listb
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/1.3/test_suite/shared_data/peak_lists/700mhz-263k-1m-04.listb?rev=8099&amp;view=auto">http://svn.gna.org/viewcvs/relax/1.3/test_suite/shared_data/peak_lists/700mhz-263k-1m-04.listb?rev=8099&amp;view=auto</a>
==============================================================================
--- 1.3/test_suite/shared_data/peak_lists/700mhz-263k-1m-04.listb (added)
+++ 1.3/test_suite/shared_data/peak_lists/700mhz-263k-1m-04.listb Wed Dec  3 
14:12:31 2008
@@ -1,0 +1,3 @@
+      Assignment         w1         w2   Data Height       S/N     Spectrum  
 
+
+            Q2N-H    122.581      9.100       394412         23

Added: 1.3/test_suite/shared_data/peak_lists/700mhz-263k-1m-06.listb
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/1.3/test_suite/shared_data/peak_lists/700mhz-263k-1m-06.listb?rev=8099&amp;view=auto">http://svn.gna.org/viewcvs/relax/1.3/test_suite/shared_data/peak_lists/700mhz-263k-1m-06.listb?rev=8099&amp;view=auto</a>
==============================================================================
--- 1.3/test_suite/shared_data/peak_lists/700mhz-263k-1m-06.listb (added)
+++ 1.3/test_suite/shared_data/peak_lists/700mhz-263k-1m-06.listb Wed Dec  3 
14:12:31 2008
@@ -1,0 +1,3 @@
+      Assignment         w1         w2   Data Height       S/N     Spectrum  
 
+
+            Q2N-H    122.583      9.101       298711         41

Added: 1.3/test_suite/shared_data/peak_lists/700mhz-263k-1m-08.listb
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/1.3/test_suite/shared_data/peak_lists/700mhz-263k-1m-08.listb?rev=8099&amp;view=auto">http://svn.gna.org/viewcvs/relax/1.3/test_suite/shared_data/peak_lists/700mhz-263k-1m-08.listb?rev=8099&amp;view=auto</a>
==============================================================================
--- 1.3/test_suite/shared_data/peak_lists/700mhz-263k-1m-08.listb (added)
+++ 1.3/test_suite/shared_data/peak_lists/700mhz-263k-1m-08.listb Wed Dec  3 
14:12:31 2008
@@ -1,0 +1,3 @@
+      Assignment         w1         w2   Data Height       S/N  
+
+            Q2N-H    122.611      9.101       295565         25 

Added: 1.3/test_suite/shared_data/peak_lists/700mhz-263k-1m-10.listb
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/1.3/test_suite/shared_data/peak_lists/700mhz-263k-1m-10.listb?rev=8099&amp;view=auto">http://svn.gna.org/viewcvs/relax/1.3/test_suite/shared_data/peak_lists/700mhz-263k-1m-10.listb?rev=8099&amp;view=auto</a>
==============================================================================
--- 1.3/test_suite/shared_data/peak_lists/700mhz-263k-1m-10.listb (added)
+++ 1.3/test_suite/shared_data/peak_lists/700mhz-263k-1m-10.listb Wed Dec  3 
14:12:31 2008
@@ -1,0 +1,3 @@
+      Assignment         w1         w2   Data Height       S/N  
+
+            Q2N-H    122.591      9.101       198763         13 

Added: 1.3/test_suite/shared_data/peak_lists/700mhz-263k-1m-12.listb
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/1.3/test_suite/shared_data/peak_lists/700mhz-263k-1m-12.listb?rev=8099&amp;view=auto">http://svn.gna.org/viewcvs/relax/1.3/test_suite/shared_data/peak_lists/700mhz-263k-1m-12.listb?rev=8099&amp;view=auto</a>
==============================================================================
--- 1.3/test_suite/shared_data/peak_lists/700mhz-263k-1m-12.listb (added)
+++ 1.3/test_suite/shared_data/peak_lists/700mhz-263k-1m-12.listb Wed Dec  3 
14:12:31 2008
@@ -1,0 +1,3 @@
+      Assignment         w1         w2   Data Height       S/N  
+
+            Q2N-H    122.601      9.103       182650         13 

Added: 1.3/test_suite/shared_data/peak_lists/700mhz-263k-1m-14.listb
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/1.3/test_suite/shared_data/peak_lists/700mhz-263k-1m-14.listb?rev=8099&amp;view=auto">http://svn.gna.org/viewcvs/relax/1.3/test_suite/shared_data/peak_lists/700mhz-263k-1m-14.listb?rev=8099&amp;view=auto</a>
==============================================================================
--- 1.3/test_suite/shared_data/peak_lists/700mhz-263k-1m-14.listb (added)
+++ 1.3/test_suite/shared_data/peak_lists/700mhz-263k-1m-14.listb Wed Dec  3 
14:12:31 2008
@@ -1,0 +1,3 @@
+      Assignment         w1         w2   Data Height       S/N  
+
+            Q2N-H    122.595      9.107       132678          8 

Added: 1.3/test_suite/shared_data/peak_lists/700mhz-263k-1m-16.listb
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/1.3/test_suite/shared_data/peak_lists/700mhz-263k-1m-16.listb?rev=8099&amp;view=auto">http://svn.gna.org/viewcvs/relax/1.3/test_suite/shared_data/peak_lists/700mhz-263k-1m-16.listb?rev=8099&amp;view=auto</a>
==============================================================================
--- 1.3/test_suite/shared_data/peak_lists/700mhz-263k-1m-16.listb (added)
+++ 1.3/test_suite/shared_data/peak_lists/700mhz-263k-1m-16.listb Wed Dec  3 
14:12:31 2008
@@ -1,0 +1,3 @@
+      Assignment         w1         w2   Data Height       S/N  
+
+            Q2N-H    122.552      9.100       102729          8 

Added: 1.3/test_suite/shared_data/sequence/1UBQ.seq
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/1.3/test_suite/shared_data/sequence/1UBQ.seq?rev=8099&amp;view=auto">http://svn.gna.org/viewcvs/relax/1.3/test_suite/shared_data/sequence/1UBQ.seq?rev=8099&amp;view=auto</a>
==============================================================================
--- 1.3/test_suite/shared_data/sequence/1UBQ.seq (added)
+++ 1.3/test_suite/shared_data/sequence/1UBQ.seq Wed Dec  3 14:12:31 2008
@@ -1,0 +1,77 @@
+Mol_name   Res_num    Res_name   Spin_num   Spin_name  
+A          1          MET        1          N          
+A          2          GLN        9          N          
+A          3          ILE        18         N          
+A          4          PHE        26         N          
+A          5          VAL        37         N          
+A          6          LYS        44         N          
+A          7          THR        53         N          
+A          8          LEU        60         N          
+A          9          THR        68         N          
+A          10         GLY        75         N          
+A          11         LYS        79         N          
+A          12         THR        88         N          
+A          13         ILE        95         N          
+A          14         THR        103        N          
+A          15         LEU        110        N          
+A          16         GLU        118        N          
+A          17         VAL        127        N          
+A          18         GLU        134        N          
+A          19         PRO        143        N          
+A          20         SER        150        N          
+A          21         ASP        156        N          
+A          22         THR        164        N          
+A          23         ILE        171        N          
+A          24         GLU        179        N          
+A          25         ASN        188        N          
+A          26         VAL        196        N          
+A          27         LYS        203        N          
+A          28         ALA        212        N          
+A          29         LYS        217        N          
+A          30         ILE        226        N          
+A          31         GLN        234        N          
+A          32         ASP        243        N          
+A          33         LYS        251        N          
+A          34         GLU        260        N          
+A          35         GLY        269        N          
+A          36         ILE        273        N          
+A          37         PRO        281        N          
+A          38         PRO        288        N          
+A          39         ASP        295        N          
+A          40         GLN        303        N          
+A          41         GLN        312        N          
+A          42         ARG        321        N          
+A          43         LEU        332        N          
+A          44         ILE        340        N          
+A          45         PHE        348        N          
+A          46         ALA        359        N          
+A          47         GLY        364        N          
+A          48         LYS        368        N          
+A          49         GLN        377        N          
+A          50         LEU        386        N          
+A          51         GLU        394        N          
+A          52         ASP        403        N          
+A          53         GLY        411        N          
+A          54         ARG        415        N          
+A          55         THR        426        N          
+A          56         LEU        433        N          
+A          57         SER        441        N          
+A          58         ASP        447        N          
+A          59         TYR        455        N          
+A          60         ASN        467        N          
+A          61         ILE        475        N          
+A          62         GLN        483        N          
+A          63         LYS        492        N          
+A          64         GLU        501        N          
+A          65         SER        510        N          
+A          66         THR        516        N          
+A          67         LEU        523        N          
+A          68         HIS        531        N          
+A          69         LEU        541        N          
+A          70         VAL        549        N          
+A          71         LEU        556        N          
+A          72         ARG        564        N          
+A          73         LEU        575        N          
+A          74         ARG        583        N          
+A          75         GLY        594        N          
+A          76         GLY        598        N          

Added: 1.3/test_suite/system_tests/scripts/1UBQ_relax_fit.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/1.3/test_suite/system_tests/scripts/1UBQ_relax_fit.py?rev=8099&amp;view=auto">http://svn.gna.org/viewcvs/relax/1.3/test_suite/system_tests/scripts/1UBQ_relax_fit.py?rev=8099&amp;view=auto</a>
==============================================================================
--- 1.3/test_suite/system_tests/scripts/1UBQ_relax_fit.py (added)
+++ 1.3/test_suite/system_tests/scripts/1UBQ_relax_fit.py Wed Dec  3 14:12:31 
2008
@@ -1,0 +1,89 @@
+# Script for catching bug #12670 (<a  rel="nofollow" href="https://gna.org/bugs/index.php?12670">https://gna.org/bugs/index.php?12670</a>) as 
submitted by Michael Funk (mifu att nmr dot mpibpc dot mpg dot de).
+
+# Create the 'rx' data pipe.
+pipe.create('rx', 'relax_fit')
+
+# Load the sequence.
+sequence.read('1UBQ.seq', mol_name_col=0, res_num_col=1, res_name_col=2, 
spin_num_col=3, spin_name_col=4)
+
+# Spectrum names.
+names = [
+    '700mhz-263k-1m-02',
+    '700mhz-263k-1m-04',
+    '700mhz-263k-1m-06',
+    '700mhz-263k-1m-08',
+    '700mhz-263k-1m-10',
+    '700mhz-263k-1m-12',
+    '700mhz-263k-1m-14',
+    '700mhz-263k-1m-16'
+    ]
+
+# Relaxation times (in seconds).
+times = [
+    0.004,
+    0.008,
+    0.012,
+    0.016,
+    0.020,
+    0.024,
+    0.028,
+    0.032
+]
+
+#maf# Definte data path
+data_path = '.'
+
+# Loop over the spectra.
+for i in xrange(len(names)):
+    # Load the peak intensities.
+    spectrum.read_intensities(file=names[i]+'.listb', dir=data_path, 
spectrum_id=names[i], int_method='height', proton='H')
+
+    # Set the relaxation times.
+    relax_fit.relax_time(time=times[i], spectrum_id=names[i])
+
+# Specify the duplicated spectra.
+
+#maf# Spectrum baseplane noise for non-duplicated spectra
+spectrum.baseplane_rmsd(error=20570, spectrum_id='700mhz-263k-1m-02', 
spin_id=None)
+spectrum.baseplane_rmsd(error=20570, spectrum_id='700mhz-263k-1m-04', 
spin_id=None)
+spectrum.baseplane_rmsd(error=18125, spectrum_id='700mhz-263k-1m-06', 
spin_id=None)
+spectrum.baseplane_rmsd(error=15560, spectrum_id='700mhz-263k-1m-08', 
spin_id=None)
+spectrum.baseplane_rmsd(error=15652, spectrum_id='700mhz-263k-1m-10', 
spin_id=None)
+spectrum.baseplane_rmsd(error=16500, spectrum_id='700mhz-263k-1m-12', 
spin_id=None)
+spectrum.baseplane_rmsd(error=16000, spectrum_id='700mhz-263k-1m-14', 
spin_id=None)
+spectrum.baseplane_rmsd(error=16700, spectrum_id='700mhz-263k-1m-16', 
spin_id=None)
+
+# Peak intensity error analysis.
+spectrum.error_analysis()
+
+# Set the relaxation curve type.
+relax_fit.select_model('exp')
+
+# Grid search.
+grid_search(inc=11)
+
+# Minimise.
+minimise('simplex', scaling=False, constraints=False)
+
+# Monte Carlo simulations.
+monte_carlo.setup(number=5)
+monte_carlo.create_data()
+monte_carlo.initial_values()
+minimise('simplex', scaling=False, constraints=False)
+monte_carlo.error_analysis()
+
+# Save the relaxation rates.
+value.write(param='rx', file='devnull', force=True)
+
+# Save the results.
+results.write(file='devnull', force=True)
+
+# Create Grace plots of the data.
+grace.write(y_data_type='chi2', file='devnull', force=True)    # Minimised 
chi-squared value.
+grace.write(y_data_type='i0', file='devnull', force=True)    # Initial peak 
intensity.
+grace.write(y_data_type='rx', file='devnull', force=True)    # Relaxation 
rate.
+grace.write(x_data_type='relax_times', y_data_type='int', file='devnull', 
force=True)    # Average peak intensities.
+grace.write(x_data_type='relax_times', y_data_type='int', norm=True, 
file='devnull', force=True)    # Average peak intensities (normalised).
+
+# Save the program state.
+state.save('devnull', force=True)



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Wed Dec 03 14:20:03 2008</div>  
</body>
</html>
