<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: [bug #20173] bugs in Relax -->
<!--X-From-R13: zratwha.khrNznvyobk.gh&#45;oreyva.qr -->
<!--X-Date: Mon, 17 Sep 2012 18:40:31 +0200 -->
<!--X-Message-Id: 20120917183939.12565jnq341wc3t7@webmail.tu&#45;berlin.de -->
<!--X-Content-Type: multipart/mixed -->
<!--X-Reference: 20120917&#45;114217.sv0.79273@gna.org -->
<!--X-Reference: CAED9pY&#45;e&#45;UtvQX+TUw1hw15r+oySnbxwxRxe5b1bwG6WA66uDw@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [bug #20173] bugs in Relax -- September 17, 2012 - 18:40</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: [bug #20173] bugs in Relax</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00027" class="tabs">Index by Date</a> | <a href="threads.html#00027" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00026.html">Date Prev</a>] [<a href="msg00028.html">Date Next</a>] [<a href="msg00026.html">Thread Prev</a>] [<a href="msg00031.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Mon, 17 Sep 2012 18:39:39 +0200</li>
<li class="menuitem">
<em>Cc</em>: relax-users@xxxxxxx</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00027.html">20120917183939.12565jnq341wc3t7@webmail.tu-berlin.de</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;20120917-114217.sv0.79273@xxxxxxx&gt;	&lt;CAED9pY-e-UtvQX+TUw1hw15r+oySnbxwxRxe5b1bwG6WA66uDw@xxxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>User-agent</em>: Internet Messaging Program (IMP) H3 (4.3.9)</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>mengjun . xue</strong> on September 17, 2012 - 18:40:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">
Dear Dr. Edward d'Auvergne,

</pre><tt>Thank you very much for answers. I have read the manual of relax and  
</tt><tt>checked the mf_multimodel.py.
</tt><pre style="margin: 0em;">

</pre><tt>I have changed the mf_multimodel.py into a new version according to my  
</tt><tt>data, and have tried to run it in scripts mode in Relax.
</tt><pre style="margin: 0em;">

</pre><tt>I started relax script mode by clicking the relax.py, and type  
</tt><tt>mf_multimodel, but Relax did not perform calculations, and a error  
</tt><tt>window came up:
</tt><pre style="margin: 0em;">

mf_multimodel.py
Traceback (most recent call last):
  File &quot;&lt;input&gt;&quot;, line 1, in &lt;module&gt;
NameError: name 'mf_multimodel' is not defined

Attached please find the new mf_multimodel.py

</pre><tt>I do not know how to start the calcultioin by mf_multimodel so that  
</tt><tt>the part of model free analysis can be performed. Perhaps something is  
</tt><tt>wrong in the new mf_multimodel.py.
</tt><pre style="margin: 0em;">

Also I I have submitted it as a bug report.

Thank you very much.

With best regards,

Mengjun Xue





Quoting Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt;:

</pre><blockquote class="blockquote"><pre style="margin: 0em;">
Hi Mengjun,

For your bug report at <a  rel="nofollow" href="https://web.archive.org/web/https://gna.org/bugs/?20173">https://gna.org/bugs/?20173</a>, I have changed the
title.  It would be better if you chose a title which allows other
users looking at <a  rel="nofollow" href="https://web.archive.org/web/https://gna.org/bugs/index.php">https://gna.org/bugs/index.php</a> to instantly
understand what and where the bug is.  In this case, the bug is simply
because the diffusion tensor has not been set up.  I would suggest
looking at the sample script
sample_scripts/model_free/mf_multimodel.py to see how to perform part
of a model-free analysis in the GUI without using the auto-analyses
(note this is only a tiny part, please read the model-free chapter of
the user manual for the explanation why this is only 1/3 of one
iteration of up to 20 iterations).

I have eliminated the bug by having relax throw a RelaxError saying
that the diffusion tensor is not set up yet.

Cheers,

Edward
</pre></blockquote><pre style="margin: 0em;">

</pre><pre style="margin: 0em;">###############################################################################
#                                                                             
#
# Copyright (C) 2003-2012 Edward d'Auvergne                                   
#
#                                                                             
#
# This file is part of the program relax (<a  rel="nofollow" href="/">http://www.nmr-relax.com</a>).          
#
#                                                                             
#
# This program is free software: you can redistribute it and/or modify        
#
# it under the terms of the GNU General Public License as published by        
#
# the Free Software Foundation, either version 3 of the License, or           
#
# (at your option) any later version.                                         
#
#                                                                             
#
# This program is distributed in the hope that it will be useful,             
#
# but WITHOUT ANY WARRANTY; without even the implied warranty of              
#
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the               
#
# GNU General Public License for more details.                                
#
#                                                                             
#
# You should have received a copy of the GNU General Public License           
#
# along with this program.  If not, see &lt;<a  rel="nofollow" href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a>&gt;.       
#
#                                                                             
#
###############################################################################

&quot;&quot;&quot;This script performs a model-free analysis for the models 'm0' to 'm9' (or 
'tm0' to 'tm9').&quot;&quot;&quot;


# Set the data pipe names (also the names of preset model-free models).
#pipes = ['tm0', 'tm1', 'tm2', 'tm3', 'tm4', 'tm5', 'tm6', 'tm7', 'tm8', 
'tm9']
pipes = ['m0', 'm1', 'm2', 'm3', 'm4', 'm5', 'm6', 'm7', 'm8', 'm9']

# Loop over the pipes.
for name in pipes:
    # Create the data pipe.
    pipe.create(name, 'mf')

    # Set up the 15N spins.
    sequence.read('noe.500.out', res_num_col=1)
    spin.name('N')
    spin.element(element='N', spin_id='@N')
    spin.isotope('15N', spin_id='@N')

    # Load a PDB file.
    structure.read_pdb(file='C:\\Documents and Settings\\Mengjun 
Xue\\Desktop\\Relax bugs\\Relax\\tutorial_pdc\\tutorial_pdc\\1UBQ_H.pdb', 
dir=None, read_mol=None, set_mol_name=None, read_model=None, 
set_model_num=None, parser='internal')

    # Load the relaxation data.
    bruker.read(ri_id='noe_600', file='C:\\Documents and Settings\\Mengjun 
Xue\\Desktop\\Relax bugs\\Relax\\NOE demo.txt', dir=None)   
bruker.read(ri_id='r1_600', file='C:\\Documents and Settings\\Mengjun 
Xue\\Desktop\\Relax bugs\\Relax\\T1 demo.txt', dir=None)   
bruker.read(ri_id='r2_600', file='C:\\Documents and Settings\\Mengjun 
Xue\\Desktop\\Relax bugs\\Relax\\T2 demo.txt', dir=None) # Set up the 
diffusion tensor.
    diffusion_tensor.init(1e-8, fixed=True)
    #diffusion_tensor.init((1e-8, 1.0, 60, 290), param_types=0, 
spheroid_type='oblate', fixed=True)

    # Generate the 1H spins for the magnetic dipole-dipole relaxation 
interaction.
    sequence.attach_protons()

    # Define the magnetic dipole-dipole relaxation interaction.
    dipole_pair.define(spin_id1='@N', spin_id2='@H', direct_bond=True)
    dipole_pair.set_dist(spin_id1='@N', spin_id2='@H', ave_dist=1.02 * 1e-10)
    structure.get_pos('@N')
    structure.get_pos('@H')
    dipole_pair.unit_vectors()

    # Define the chemical shift relaxation interaction.
    value.set(-172 * 1e-6, 'csa', spin_id='@N')

    # Select the model-free model.
    model_free.select_model(model=name)

    # Minimise.
    grid_search(inc=11)
    minimise('newton')

    # Write the results.
    results.write(file='results', force=True)

# Save the program state.
state.save('save', force=True)
</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00031" href="msg00031.html">Re: [bug #20173] bugs in Relax</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00026" href="msg00026.html">Re: [bug #20173] bugs in Relax</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Tue Sep 18 10:40:07 2012</div>  
</body>
</html>
