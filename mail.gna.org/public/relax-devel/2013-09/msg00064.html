<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: r20799 &#45; /branches/relax_disp/docs/latex/dispersion.tex -->
<!--X-From-R13: "Sqjneq q'Ohiretar" <rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Wed, 04 Sep 2013 17:27:52 +0200 -->
<!--X-Message-Id: CAED9pY&#45;mkJdz1ktgop8b_E7j2bLtOHSHrPFO0mUKvqznoZ7_kQ@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: E1VHCu3&#45;0004Le&#45;Jr@subversion.gna.org -->
<!--X-Reference: CA+CBx2MXL3J0CJ=Qd12CUODXmR5Np8sHQ6+eoRH8LM8yWh&#45;bXw@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: r20799 - /branches/relax_disp/docs/latex/dispersion.tex -- September 04, 2013 - 17:27</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: r20799 - /branches/relax_disp/docs/latex/dispersion.tex</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00064" class="tabs">Index by Date</a> | <a href="threads.html#00064" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00063.html">Date Prev</a>] [<a href="msg00065.html">Date Next</a>] [<a href="msg00063.html">Thread Prev</a>] [Thread Next]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Wed, 4 Sep 2013 17:27:18 +0200</li>
<li class="menuitem">
<em>Cc</em>: &quot;relax-devel@xxxxxxx&quot; &lt;relax-devel@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;	h=mime-version:sender:in-reply-to:references:date:message-id:subject	:from:to:cc:content-type;	bh=g674b9e15OX9Xxq+BJF2ioHRwqegZe/C8IjoeDtp8IA=;	b=Q3FXfPMGQUPVhwR3PIUSI4U2ApF+mbdK8V0unb4L2/xLduFqfRqnXW5rZK9Scm5o/o	jR1eMk7PBxcYVWxenP8HS/Mm7qgf5MUewF4j3GWDbU4CJop3Jxppb0Gc7LsHbTjKu8oI	I22JU5Le0TjWoRqglAygZ3L6JmgMingeUG2FAUb33D/sGEebw/x8n5HQfOtJXgjHOi5W	mKCLGyua8nftO7uVb26L+Cin/ji/WqzDAWamD+4IfDCE03pr837tiAdOLji+RN6tyquo	2UCRUjayFcDeKpX5F+OilTLRVPLomNRaaiVuw7LfZ5tnmBYJLPlOqtw6hrrOM2Q+SulC	oUWg==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00064.html">CAED9pY-mkJdz1ktgop8b_E7j2bLtOHSHrPFO0mUKvqznoZ7_kQ@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;E1VHCu3-0004Le-Jr@xxxxxxxxxxxxxxxxxx&gt;	&lt;CA+CBx2MXL3J0CJ=Qd12CUODXmR5Np8sHQ6+eoRH8LM8yWh-bXw@xxxxxxxxxxxxxx&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on September 04, 2013 - 17:27:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Hi,

Ok, now it is debugging time :)  But first here are some basic steps
which you will need to take, in order:

1)  I would recommend the kA to k_AB change - you will probably
uncover some bugs in the process that I have already spotted.

2)  Then the parameter needs to be fixed in the
specific_analyses.relax_disp.parameter module where it is still
sometimes referred to as 'ka' rather than 'kA' and in other places not
referred to at all!  This module is where a lot of your problems lie.

3)  Fix the Relax_disp.test_kteilum_fmpoulsen_makke_cpmg_data_to_cr72
system test - it does not pass yet.

4)  Create a system test for the TSMFK01 model based on
Relax_disp.test_kteilum_fmpoulsen_makke_cpmg_data_to_cr72, but only
once that test passes in the repository code.

Once this is done, the debugging game will be much, much easier.  I
have more points below:


</pre><blockquote class="blockquote"><pre style="margin: 0em;">That means:
For kA:
2.655 rad.s * 2 * 3.14 = 16.6734 Hz.
Not totally close, but at least within discussion possibility.
</pre></blockquote><pre style="margin: 0em;">

Ah, this is a classic mistake.  I've documented it in
<a  rel="nofollow" href="http://wiki.nmr-relax.com/Hidden_radian_units">http://wiki.nmr-relax.com/Hidden_radian_units</a>.  The radian unit is
hidden - physicists do this often because to them it is obvious.
Anything rotational, like everything in NMR, has radian units.  It's
so obvious ;)  Note that whenever you see s^-1, this means that
radians are present!!  Otherwise it would be reported as Hz.  But s^-1
!= Hz.  So there is no conversion, k_AB must be 11.3 rad.s^-1, as
reported in the paper.


</pre><blockquote class="blockquote"><pre style="margin: 0em;">Converting dw from ppm to Hz
print cdp.mol[0].res[56].spin[0].dw * cdp.spectrometer_frq['Z_A2'] * 1E-6
5192.97184369
</pre></blockquote><pre style="margin: 0em;">

You will need to convert to rad.s^-1, the units used in the paper.
Here you do need 2pi.  So your dw value is:

32628.40 rad.s^-1

But this is also likely to be incorrect.  The value of
cdp.spectrometer_frq is the proton frequency in Hz, and you probably
need the heteronuclear frequency instead.  See how the frqs data
structure is created in the
specific_analyses.relax_disp.disp_data.return_r2eff_arrays() function
for how to do this correctly.  I would however suggest using the
reverse of this to convert the published value of 2.45 * 10^3 rad.s^-1
to ppm units.


</pre><blockquote class="blockquote"><pre style="margin: 0em;">Looks okay, but is this correct way of transforming the stored value?
</pre></blockquote><pre style="margin: 0em;">

Actually the numbers are not ok, and some debugging will be required.
But first following the steps above will significantly help you in
this process and may remove all the bugs anyway.


</pre><blockquote class="blockquote"><pre style="margin: 0em;">R2, looks the same, but there is something wrong with a 2*pi factor.
</pre></blockquote><pre style="margin: 0em;">

It looks ok, but because k_AB and dw are incorrect, I have a feeling
that it will be closer to the reported value once the bug is found.
There is no 2pi factor as rad.s^-1 == s^-1 for this rotational
process.


</pre><blockquote class="blockquote"><pre style="margin: 0em;">Do you think this values looks reasonable or have I made a mistake 
somewhere?
</pre></blockquote><pre style="margin: 0em;">

I can clearly see that there is a bug, and can see some places in the
code where it could come from.  I hope the steps above will be
sufficient for you to solve this.

Regards,

Edward


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00063" href="msg00063.html">Fwd: r20799 - /branches/relax_disp/docs/latex/dispersion.tex</a></strong>
<ul><li><em>From:</em> Troels Emtekær Linnet</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Wed Sep 04 20:40:09 2013</div>  
</body>
</html>
