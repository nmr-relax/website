<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: R1rho RD analysis -->
<!--X-From-R13: "Sqjneq q'Ohiretar" &#60;rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Wed, 11 Jun 2014 10:36:58 +0200 -->
<!--X-Message-Id: CAED9pY_bJwCjpXFgrhTn7KiFNk9Wss5xaOwKcsVqvc6=qcP0nQ@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: mailman.0.1400242739.20441.relax&#45;users@gna.org -->
<!--X-Reference: 537A143C.3020901@ibs.fr -->
<!--X-Reference: CAED9pY8GmeRj=HfGGb9x0Gk00bn1vBQYfYsUFDTzRmgyY7B_VA@mail.gmail.com -->
<!--X-Reference: 5391E4B1.6050707@ibs.fr -->
<!--X-Reference: CAED9pY_67hJ9AnXLun0TxCb39n1WT+Yxwe_U1xfXwEs+=YkNVw@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: R1rho RD analysis -- June 11, 2014 - 10:36</title>
<link rel="stylesheet" type="text/css" href="/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="https://gna.org/images/gna.theme/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: R1rho RD analysis</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00013" class="tabs">Index by Date</a> | <a href="threads.html#00013" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00012.html">Date Prev</a>] [<a href="msg00014.html">Date Next</a>] [<a href="msg00012.html">Thread Prev</a>] [<a href="msg00016.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: pma &lt;Peixiang.Ma@xxxxxx&gt;, Andrew Baldwin &lt;andrew.baldwin@xxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Wed, 11 Jun 2014 10:36:27 +0200</li>
<li class="menuitem">
<em>Cc</em>: &quot;relax-users@xxxxxxx&quot; &lt;relax-users@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113; h=mime-version:sender:in-reply-to:references:date:message-id:subject :from:to:cc:content-type; bh=0z/JP5mXO7psABHBPyHfZQu6t6DJosY6Zx0xHpOybu0=; b=fe069rKYZCFZocHPkRXgcCOYKw/2DnuAeSeUHADvaopbCofaq6wMesZNr0A0K1HHz5 l+4Aki75UJmwjuEqPQRUtadW0is+yKv3ANtVE9Y4S7YuHmm2j0FL5QgY5E9qEURVq8Zh q/PkojDU+k1n3aXU6fbejjCSZ0QJYfimQcn+JBJCu6G40r6Ly8HfhjzMsFcv6Ikpr032 khIE70fYksvXUoJ3B5C+kUaOkZwhEs7umskEgzmCpHDtFL/7D6mKO1c5ogR9aVSHNiiw EMqslTdga9996qs0dskyrCzub6wTQvASrawJvKhlQrgzUM0lOdqYpXweF9c4dH31Ly3u 8RzQ==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;CAED9pY_bJwCjpXFgrhTn7KiFNk9Wss5xaOwKcsVqvc6=qcP0nQ@mail.gmail.com&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;mailman.0.1400242739.20441.relax-users@gna.org&gt; &lt;537A143C.3020901@ibs.fr&gt; &lt;CAED9pY8GmeRj=HfGGb9x0Gk00bn1vBQYfYsUFDTzRmgyY7B_VA@mail.gmail.com&gt; &lt;<a href="msg00006.html">5391E4B1.6050707@ibs.fr</a>&gt; &lt;CAED9pY_67hJ9AnXLun0TxCb39n1WT+Yxwe_U1xfXwEs+=YkNVw@mail.gmail.com&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on June 11, 2014 - 10:36:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Hi Peixiang,

Actually, for comparison purposes for applying the 'NS R1rho 2-site'
model (<a  rel="nofollow" href="http://wiki.nmr-relax.com/NS_R1rho_2-site">http://wiki.nmr-relax.com/NS_R1rho_2-site</a>) to variable-time
R1rho-type data, Art Palmer's MP05 model would be much better
(<a  rel="nofollow" href="http://wiki.nmr-relax.com/MP05">http://wiki.nmr-relax.com/MP05</a>) than the DPL94 model
(<a  rel="nofollow" href="http://wiki.nmr-relax.com/DPL94">http://wiki.nmr-relax.com/DPL94</a>) as it is of much higher quality.
Andy Baldwin apparently has derived an even better analytic model,
especially when R20A and R20B are significantly different, see:

<a  rel="nofollow" href="http://gna.org/support/?3155#comment0">http://gna.org/support/?3155#comment0</a>

and the discussions in the thread:

<a  rel="nofollow" href="http://thread.gmane.org/gmane.science.nmr.relax.devel/5414/focus=5447">http://thread.gmane.org/gmane.science.nmr.relax.devel/5414/focus=5447</a>

and:

<a  rel="nofollow" href="http://thread.gmane.org/gmane.science.nmr.relax.devel/5410/focus=5433">http://thread.gmane.org/gmane.science.nmr.relax.devel/5410/focus=5433</a>

This last thread is about the B14 model (Baldwin 2014,
<a  rel="nofollow" href="http://wiki.nmr-relax.com/B14">http://wiki.nmr-relax.com/B14</a>) implemented in relax by Troels Linnet,
but there are mentions of Andy's R1rho model.  However the R1rho model
from Andy is not implemented in relax yet.  Do you have much
experience with variable-time R1rho numeric models?  Looking at the
code for where the relax_time variable comes from, it is not very
clear which relaxation time is being used:

<a  rel="nofollow" href="http://www.nmr-relax.com/api/3.2/specific_analyses.relax_disp.data-module.html#loop_time">http://www.nmr-relax.com/api/3.2/specific_analyses.relax_disp.data-module.html#loop_time</a>

</pre><blockquote class="blockquote"><pre style="margin: 0em;">From the code itself:
</pre></blockquote><pre style="margin: 0em;">

<a  rel="nofollow" href="http://www.nmr-relax.com/api/3.2/specific_analyses.relax_disp.data-pysrc.html#loop_time">http://www.nmr-relax.com/api/3.2/specific_analyses.relax_disp.data-pysrc.html#loop_time</a>

it looks like this loop_time() function assumes fixed-time data and
hence only the first encountered time value for the given experiment,
magnetic field strength, offset, and dispersion point is used.  So
your expertise will be very useful for resolving this variable-time
R1rho numeric model problem!

Note that there are a few improvements to the R1rho models that are
yet to be implemented in relax:

<a  rel="nofollow" href="http://thread.gmane.org/gmane.science.nmr.relax.devel/5414/focus=5808">http://thread.gmane.org/gmane.science.nmr.relax.devel/5414/focus=5808</a>
<a  rel="nofollow" href="http://www.nmr-relax.com/manual/do_dispersion_features_yet_be_implemented.html">http://www.nmr-relax.com/manual/do_dispersion_features_yet_be_implemented.html</a>

Cheers,

Edward



On 11 June 2014 10:07, Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi Peixiang,

Please see below:


</pre><blockquote class="blockquote"><pre style="margin: 0em;">Congratulations about the new version of 3.2.2, I tried, it works well :)
</pre></blockquote><pre style="margin: 0em;">

Cheers.  If you notice any other problems or strange behaviour, please
don't hesitate to submit a bug report
(<a  rel="nofollow" href="https://gna.org/bugs/?func=additem&amp;group=relax">https://gna.org/bugs/?func=additem&amp;group=relax</a>).  Then that problem
will likely be fixed for the next relax version.


</pre><blockquote class="blockquote"><pre style="margin: 0em;">Still one question of using the different relaxation time periods.

My R1rho RD experiment has different relaxation time periods, I could 
input all the peaks by the loop.

Then I fit with 'NS 2-site R1 model', they could also do the fitting and 
give the results and also a nice fitting of the dispersion curve.
Still I did not figure out, which Trelax is it using in the NS model in 
the case of different relaxation time periods.
Only the last relaxation time period? Then fit as fixed time experiment?
</pre></blockquote><pre style="margin: 0em;">

As this code was directly contributed by Paul Schanda and Dominique
Marion, and I'm guessing that their offices are not too far from yours
at the IBS, maybe you could ask them directly ;)  Well, it was Paul
who organised that the code be contributed to relax.  In reality the
original authors were Nikolai Skrynnikov and Martin Tollinger.  The
API documentation is also a useful resource for answering such
questions (<a  rel="nofollow" href="http://www.nmr-relax.com/api/3.2/">http://www.nmr-relax.com/api/3.2/</a>).  For this, see the
relax library documentation for that model:

<a  rel="nofollow" href="http://www.nmr-relax.com/api/3.2/lib.dispersion.ns_r1rho_2site-module.html">http://www.nmr-relax.com/api/3.2/lib.dispersion.ns_r1rho_2site-module.html</a>

This documentation describes the origin and history of the code.  You
could even look at the source code for the direct implementation:

<a  rel="nofollow" href="http://www.nmr-relax.com/api/3.2/lib.dispersion.ns_r1rho_2site-pysrc.html">http://www.nmr-relax.com/api/3.2/lib.dispersion.ns_r1rho_2site-pysrc.html</a>

Trelax is the 'relax_time' argument here.  You can find all
implementation details in this API documentation.  Which relaxation
time would you suggest as being correct?  I'm actually no longer sure
which is being used.  And I'm not sure if the original code or even
the numeric model itself was designed to handle variable time data.


</pre><blockquote class="blockquote"><pre style="margin: 0em;">Maybe I am the minority to use such time consuming experiments, so I 
always have such strange questions ...
</pre></blockquote><pre style="margin: 0em;">

relax should still handle the situation.  Do you know if there is a
special treatment for the numerical models for such data?  Do you know
of a good citation?  Maybe the 'NS R1rho 2-site' model
(<a  rel="nofollow" href="http://wiki.nmr-relax.com/NS_R1rho_2-site">http://wiki.nmr-relax.com/NS_R1rho_2-site</a>) is not suitable for
variable time data, and a different - and importantly published -
solution is required.  The analytic models do not use the relaxation
time value, so those are safe.  Hence, as a check, you should see very
similar results from the 'DPL94' model
(<a  rel="nofollow" href="http://wiki.nmr-relax.com/DPL94">http://wiki.nmr-relax.com/DPL94</a>) and the 'NS R1rho 2-site' model.  If
not, something is wrong.

If the 'NS R1rho 2-site' model is really only for fixed-time data,
then we should modify relax to raise a RelaxError when this model is
chosen for optimisation and the data is variable time.  As not many
people optimise numeric models to variable-time data, your input into
this question would be very valuable.  Cheers!


</pre><blockquote class="blockquote"><pre style="margin: 0em;">Maybe another annoying question for the fix time people:
Another question, does it necessary to check how mono-exponential about 
their relaxation curve under certain rf-field? If not, how did they make 
sure they can use the mono-exponential assumption to get R2eff by two 
points?
</pre></blockquote><pre style="margin: 0em;">

From what I've seen and heard, some people do check, but the majority
just assume that the curves will be mono-exponential and publish the
fixed-time data and results.  Such a check is probably much more
important for those collecting R1rho-type data rather than CPMG-type
data.  Anyway, maybe you should ask people in front of their posters
at conferences to get a better overview of what the field does.

Regards,

Edward


</pre><blockquote class="blockquote"><pre style="margin: 0em;">

Best,

Peixiang




On 05/19/2014 05:49 PM, Edward d'Auvergne wrote:

Hi Peixiang,

Welcome to the relax mailing lists!  The relaxation dispersion
analysis implemented in relax is quite flexible, and the data you have
is supported.  This is well documented in the relax manual which you
should have with your copy of relax (the docs/relax.pdf file).  Have a
look at section 'The R2eff model' in the dispersion chapter of the
manual (<a  rel="nofollow" href="http://www.nmr-relax.com/manual/R2eff_model.html">http://www.nmr-relax.com/manual/R2eff_model.html</a>),
specifically the 'Variable relaxation period experiments' subsection.

Unfortunately the sample scripts are all for the fixed time dispersion
experiments.  However you could have a look at one of the scripts used
for the test suite in relax:

test_suite/system_tests/scripts/relax_disp/exp_fit.py

This script is run in the test suite to ensue that the data you have
will always be supported.  There are many more scripts in that
directory which you might find interesting.  The 'r1rho_on_res_m61.py'
script also involve an exponential fit with many different relaxation
time periods.
</pre></blockquote></blockquote><pre style="margin: 0em;">


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00016" href="msg00016.html">Re: R1rho RD analysis</a></strong>
<ul><li><em>From:</em> Troels Emtek√¶r Linnet</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00006" href="msg00006.html">Re: R1rho RD analysis</a></strong>
<ul><li><em>From:</em> pma</li></ul></li>
<li><strong><a name="00012" href="msg00012.html">Re: R1rho RD analysis</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer">You are on the <a href="http://gna.org">Gna!</a> mail server.</div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Thu Jun 26 10:20:14 2014</div>  
</body>
</html>
