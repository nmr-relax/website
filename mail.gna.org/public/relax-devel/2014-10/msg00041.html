<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: relax 3.3.1. -->
<!--X-From-R13: "Sqjneq q'Ohiretar" &#60;rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Tue, 07 Oct 2014 17:51:13 +0200 -->
<!--X-Message-Id: CAED9pY_oyC4f79&#45;xzKnJiYVPrjfTRvTuNsKgEe&#45;RDeG7BZ=f=A@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: CAED9pY85e5uEUSYezzqJ5NYjrrqCArh5&#45;RSyKH7BkuTLXdoRtA@mail.gmail.com -->
<!--X-Reference: CA+CBx2OW2TXr2OXTmrKJ0HeSn1CR5aWp=+QtNsO_U=HWW+R7JA@mail.gmail.com -->
<!--X-Reference: CAED9pY_xp6dwyD8Qibog0vykxhSTpfByJjLieZ_va3r6XKWF1w@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: relax 3.3.1. -- October 07, 2014 - 17:51</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: relax 3.3.1.</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00041" class="tabs">Index by Date</a> | <a href="threads.html#00041" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00040.html">Date Prev</a>] [<a href="msg00042.html">Date Next</a>] [<a href="msg00040.html">Thread Prev</a>] [<a href="msg00042.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Tue, 7 Oct 2014 17:50:44 +0200</li>
<li class="menuitem">
<em>Cc</em>: &quot;relax-devel@xxxxxxx&quot; &lt;relax-devel@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113; h=mime-version:sender:in-reply-to:references:date:message-id:subject :from:to:cc:content-type:content-transfer-encoding; bh=BlL7BP+9sKgaApcy9XoWV9mlAZeqtoiOJOani0fXQSc=; b=WYRj+2CnbgAK+eYvRAV5JCF9ArpkPN2iQwscY2DYifPEBVwIyum6U/jx4aJWkWv5S7 A6ivp9bpP9aVMHuM0ykKZOP2khUjfozRUS2rI071nzs75idZtkLm7hYV9T1kpazh/F0v BQhyVEGjUAmBG549vOLXt40H9QYDvZreNMLnin9eXE/MZAKyNj9ibGNA7sM2gKIwxRjS 6i3HQG0oCIW7s2gLvpi2WFfmuyhaZd4OKTH4yHy25WKeDz3Z21y/yUebtwXoX4CM4cBj b5cG0GNHK+uwj69lZ6YpOHLibo+GgH+91xfeEiQ7khQcIw+kB5F0GNSlsn5KOvvMyYur L28w==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;CAED9pY_oyC4f79-xzKnJiYVPrjfTRvTuNsKgEe-RDeG7BZ=f=A@mail.gmail.com&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;<a href="msg00038.html">CAED9pY85e5uEUSYezzqJ5NYjrrqCArh5-RSyKH7BkuTLXdoRtA@mail.gmail.com</a>&gt; &lt;CA+CBx2OW2TXr2OXTmrKJ0HeSn1CR5aWp=+QtNsO_U=HWW+R7JA@mail.gmail.com&gt; &lt;<a href="msg00040.html">CAED9pY_xp6dwyD8Qibog0vykxhSTpfByJjLieZ_va3r6XKWF1w@mail.gmail.com</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on October 07, 2014 - 17:51:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Hi Troels,

I've now fixed the problem.  It was just that your new relaxation
dispersion API code was triggering a different code path that was not
previously used for these unit tests.  The issue was simply that the
unit tests were not set up correctly - the
pipe_control.mol_res_spin.metadata_update() function needed to be
called to correctly set up the molecule, residue, and spin container
data structures for the tests
(<a  rel="nofollow" href="http://www.mail-archive.com/relax-commits@xxxxxxx/msg23710.html">http://www.mail-archive.com/relax-commits@xxxxxxx/msg23710.html</a>).

Cheers,

Edward



On 7 October 2014 16:55, Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hmmm, I'll have to see what your code does which causes these private
data structures to be outdated, and hence not present.  These
temporary and volatile structures are created and maintained by the
pipe_control.mol_res_spin.metadata_*() functions.  A change in the
specific analysis code should not trigger such a problem unless
something funky is being done with the spin containers (that should
not be done).

Regards,

Edward


On 7 October 2014 16:51, Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxxxxxx&gt; 
wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi Edward.

Yes, I saw the same.

I did know how to fix that.

I dont know why &quot; 'MoleculeContainer' object has no attribute
'_res_name_count'&quot;.

Is it because the spins are created manually?

Best
Troels


2014-10-07 16:47 GMT+02:00 Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt;:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">

Hi Troels,

I'm thinking of releasing relax 3.3.1 with all of the recent bugfixes
and minor improvements.  There are enough changes to make this
worthwhile.  However I can see that there is still an issue with the
unit tests:

$ ./relax -u test_suite.unit_tests._pipe_control.test_value --time
[snip]
======================================================================
ERROR: test_value_set_r1_rit
(test_suite.unit_tests._pipe_control.test_value.Test_value)
Test of the pipe_control.value.set() function.
----------------------------------------------------------------------
The spectrum ID 'test' is now set to the R1rho-type experiment.
Traceback (most recent call last):
  File
&quot;/data/relax/relax-trunk/test_suite/unit_tests/_pipe_control/test_value.py&quot;,
line 180, in test_value_set_r1_rit
    value.set(val=None, param='r2')
  File &quot;/data/relax/relax-trunk/pipe_control/value.py&quot;, line 424, in set
    api.set_param_values(param=param, value=val, index=index,
spin_id=spin_id, error=error, force=force)
  File &quot;/data/relax/relax-trunk/specific_analyses/relax_disp/api.py&quot;,
line 1182, in set_param_values
    for spin_ids in self.model_loop():
  File &quot;/data/relax/relax-trunk/specific_analyses/relax_disp/api.py&quot;,
line 868, in model_loop
    for spin, spin_id in spin_loop(return_id=True):
  File &quot;/data/relax/relax-trunk/pipe_control/mol_res_spin.py&quot;, line
3808, in spin_loop
    spin_id = generate_spin_id_unique(pipe_cont=dp, mol=mol, res=res,
spin=spin)
  File &quot;/data/relax/relax-trunk/pipe_control/mol_res_spin.py&quot;, line
1497, in generate_spin_id_unique
    if res and res.name != None and mol._res_name_count[res.name] &gt; 1:
AttributeError: 'MoleculeContainer' object has no attribute
'_res_name_count'

----------------------------------------------------------------------

Using bisection (via svn up -rxxxxxx), I can see that this failure was
introduced at your commit r26161
(<a  rel="nofollow" href="http://article.gmane.org/gmane.science.nmr.relax.scm/23913">http://article.gmane.org/gmane.science.nmr.relax.scm/23913</a>).  Once
this is fixed, I'll look at pushing out all the changes into relax
3.3.1.  Or do you have some important changes in mind that you think
should go into this release, rather than in relax 3.3.2?

Cheers,

Edward

_______________________________________________
relax (<a  rel="nofollow" href="http://www.nmr-relax.com">http://www.nmr-relax.com</a>)

This is the relax-devel mailing list
relax-devel@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="https://mail.gna.org/listinfo/relax-devel">https://mail.gna.org/listinfo/relax-devel</a>
</pre></blockquote><pre style="margin: 0em;">


</pre></blockquote></blockquote><pre style="margin: 0em;">


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00038" href="msg00038.html">relax 3.3.1.</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00039" href="msg00039.html">Re: relax 3.3.1.</a></strong>
<ul><li><em>From:</em> Troels Emtekær Linnet</li></ul></li>
<li><strong><a name="00040" href="msg00040.html">Re: relax 3.3.1.</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Tue Oct 07 19:40:10 2014</div>  
</body>
</html>
