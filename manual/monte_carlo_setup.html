<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.1//EN">

<!--Converted with LaTeX2HTML 2008 (1.71)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>monte_carlo.setup</TITLE>
<META NAME="description" CONTENT="monte_carlo.setup">
<META NAME="keywords" CONTENT="relax">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">

  <!--Google analytics JS-->
  <script type="text/javascript">
  
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-30096326-1']);
    _gaq.push(['_setDomainName', 'nmr-relax.com']);
    _gaq.push(['_trackPageview']);
  
    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  
  </script>

<LINK REL="STYLESHEET" HREF="relax.css">

<LINK REL="next" HREF="n_state_model_CoM.html">
<LINK REL="previous" HREF="monte_carlo_on.html">
<LINK REL="up" HREF="The_list_of_functions.html">
<LINK REL="next" HREF="n_state_model_CoM.html">
</HEAD>

<BODY >

<DIV CLASS="navigation"><!--Navigation Panel-->
<A NAME="tex2html19789"
  HREF="n_state_model_CoM.html">
<IMG WIDTH="48" HEIGHT="48" TITLE="Next" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html19783"
  HREF="The_list_of_functions.html">
<IMG WIDTH="48" HEIGHT="48" TITLE="Up" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html19777"
  HREF="monte_carlo_on.html">
<IMG WIDTH="48" HEIGHT="48" TITLE="Previous" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html19785"
  HREF="Contents.html">
<IMG WIDTH="48" HEIGHT="48" TITLE="Contents" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A> 
<A NAME="tex2html19787"
  HREF="Index.html">
<IMG WIDTH="48" HEIGHT="48" TITLE="Index" ALIGN="BOTTOM" BORDER="0" ALT="index" SRC="index.png"></A> <A NAME="tex2html1"
  HREF="https://sourceforge.net/projects/nmr-relax/files/manual/relax.pdf/download"><IMG
 ALIGN="BOTTOM" BORDER="0" SRC="/images/pdf_icon_nav.png"
 ALT="pdf_icon_nav.png"></A><A NAME="tex2html2"
  HREF="/"><IMG
 ALIGN="BOTTOM" BORDER="0" SRC="/images/relax_logo_nav.png"
 ALT="relax_logo_nav.png"></A>
<BR>
<B> Next:</B> <A NAME="tex2html19790"
  HREF="n_state_model_CoM.html">n_state_model.CoM</A>
<B> Up:</B> <A NAME="tex2html19784"
  HREF="The_list_of_functions.html">The list of functions</A>
<B> Previous:</B> <A NAME="tex2html19778"
  HREF="monte_carlo_on.html">monte_carlo.on</A>
 &nbsp; <B>  <A NAME="tex2html19786"
  HREF="Contents.html">Contents</A></B> 
 &nbsp; <B>  <A NAME="tex2html19788"
  HREF="Index.html">Index</A></B> 
<BR>
<BR></DIV>
<!--End of Navigation Panel-->
<!--Table of Child-Links-->
<A NAME="CHILD_LINKS"><STRONG>Subsections</STRONG></A>

<UL CLASS="ChildLinks">
<LI><A NAME="tex2html19791"
  HREF="monte_carlo_setup.html#SECTION081295100000000000000">Synopsis</A>
<LI><A NAME="tex2html19792"
  HREF="monte_carlo_setup.html#SECTION081295200000000000000">Defaults</A>
<LI><A NAME="tex2html19793"
  HREF="monte_carlo_setup.html#SECTION081295300000000000000">Keyword arguments</A>
<LI><A NAME="tex2html19794"
  HREF="monte_carlo_setup.html#SECTION081295400000000000000">Description</A>
<LI><A NAME="tex2html19795"
  HREF="monte_carlo_setup.html#SECTION081295500000000000000">Monte Carlo Simulation Overview</A>
</UL>
<!--End of Table of Child-Links-->
<HR>

<H2><A NAME="SECTION081295000000000000000"></A> <A NAME="uf:_monte_carlo.setup"></A>
<BR>
monte_carlo.setup
</H2>
<IMG
  WIDTH="128" HEIGHT="128" ALIGN="BOTTOM" BORDER="0"
 SRC="./roll-relax-blue.png"
 ALT="Image roll-relax-blue"> <IMG
  WIDTH="128" HEIGHT="128" ALIGN="BOTTOM" BORDER="0"
 SRC="./document-edit.png"
 ALT="Image document-edit">

<P>

<H3><A NAME="SECTION081295100000000000000">
Synopsis</A>
</H3>

<P>
Set up the Monte Carlo simulations.

<P>

<H3><A NAME="SECTION081295200000000000000">
Defaults</A>
</H3>

<P>
<DIV ALIGN="LEFT">
<SPAN  CLASS="textsf"><SPAN  CLASS="textbf">monte_carlo.setup</SPAN>(number=500)</SPAN>

</DIV>

<P>

<H3><A NAME="SECTION081295300000000000000">
Keyword arguments</A>
</H3>

<P>
 <SPAN  CLASS="textsf">number:</SPAN>  The number of Monte Carlo simulations.

<P>

<H3><A NAME="SECTION081295400000000000000">
Description</A>
</H3>

<P>
This must be called prior to any of the other Monte Carlo functions.  The effect is that the number of simulations will be set and that simulations will be turned on.

<P>

<H3><A NAME="SECTION081295500000000000000">
Monte Carlo Simulation Overview</A>
</H3>

<P>
For proper error analysis using Monte Carlo simulations, a sequence<A NAME="43909"></A> of function calls is required for running the various simulation components.  The steps necessary for implementing Monte Carlo simulations are:

<P>
<DL>
<DT><STRONG>1 -</STRONG></DT>
<DD>The measured data set together with the corresponding error set should be loaded into relax.
  
</DD>
<DT><STRONG>2 -</STRONG></DT>
<DD>Either minimisation<A NAME="43911"></A> is used to optimise<A NAME="43912"></A> the parameters of the chosen model, or a calculation is run.
  
</DD>
<DT><STRONG>3 -</STRONG></DT>
<DD>To initialise and turn on Monte Carlo simulations, the number of simulations, <SPAN CLASS="MATH"><I>n</I></SPAN>, needs to be set.
  
</DD>
<DT><STRONG>4 -</STRONG></DT>
<DD>The simulation data needs to be created either by back calculation from the fully minimised<A NAME="43913"></A> model parameters from step 2 or by direct calculation when values are calculated rather than minimised.<A NAME="43914"></A>  The error set is used to randomise each simulation data set by assuming Gaussian errors.  This creates a synthetic data set for each Monte Carlo simulation.
  
</DD>
<DT><STRONG>5 -</STRONG></DT>
<DD>Prior to minimisation<A NAME="43915"></A> of the parameters of each simulation, initial parameter estimates are required.  These are taken as the optimised<A NAME="43916"></A> model parameters.  An alternative is to use a grid search for each simulation to generate initial estimates, however this is extremely computationally expensive.  For the case where values are calculated rather than minimised,<A NAME="43917"></A> this step should be skipped (although the results will be unaffected if this is accidentally run).
  
</DD>
<DT><STRONG>6 -</STRONG></DT>
<DD>Each simulation requires minimisation<A NAME="43918"></A> or calculation.  The same techniques as used in step 2, excluding the grid search when minimising, should be used for the simulations.
  
</DD>
<DT><STRONG>7 -</STRONG></DT>
<DD>Failed simulations are removed using the techniques of model<A NAME="43919"></A> elimination.<A NAME="43920"></A>
  
</DD>
<DT><STRONG>8 -</STRONG></DT>
<DD>The model parameter errors are calculated from the distribution of simulation parameters.
</DD>
</DL>

<P>
Monte Carlo simulations can be turned on or off using functions within this class.  Once the function for setting up simulations has been called, simulations will be turned on.  The effect of having simulations turned on is that the functions used for minimisation<A NAME="43922"></A> (grid search, minimise,<A NAME="43923"></A> etc) or calculation will only affect the simulation parameters and not the model parameters.  By subsequently turning simulations off using the appropriate function, the functions used in minimisation<A NAME="43924"></A> will affect the model parameters and not the simulation parameters.

<P>
An example for model-free analysis using the prompt UI mode which includes only the functions required for implementing the above steps is:

<P>
<PRE>[numbers=none]
relax&gt; minimise.grid_search(inc=11)                              # Step 2.
</PRE>

<P>
<PRE>[numbers=none]
relax&gt; minimise.execute('newton')                                # Step 2.
</PRE>

<P>
<PRE>[numbers=none]
relax&gt; monte_carlo.setup(number=500)                             # Step 3.
</PRE>

<P>
<PRE>[numbers=none]
relax&gt; monte_carlo.create_data(method='back_calc')               # Step 4.
</PRE>

<P>
<PRE>[numbers=none]
relax&gt; monte_carlo.initial_values()                              # Step 5.
</PRE>

<P>
<PRE>[numbers=none]
relax&gt; minimise.execute('newton')                                # Step 6.
</PRE>

<P>
<PRE>[numbers=none]
relax&gt; eliminate()                                               # Step 7.
</PRE>

<P>
<PRE>[numbers=none]
relax&gt; monte_carlo.error_analysis()                              # Step 8.
</PRE>

<P>
An example for reduced spectral density mapping<A NAME="43941"></A> is:

<P>
<PRE>[numbers=none]
relax&gt; minimise.calculate()                                      # Step 2.
</PRE>

<P>
<PRE>[numbers=none]
relax&gt; monte_carlo.setup(number=500)                             # Step 3.
</PRE>

<P>
<PRE>[numbers=none]
relax&gt; monte_carlo.create_data(method='back_calc')               # Step 4.
</PRE>

<P>
<PRE>[numbers=none]
relax&gt; minimise.calculate()                                      # Step 6.
</PRE>

<P>
<PRE>[numbers=none]
relax&gt; monte_carlo.error_analysis()                              # Step 8.
</PRE>

<P>

<BR>

<DIV CLASS="navigation"><HR>
<!--Navigation Panel-->
<A NAME="tex2html19789"
  HREF="n_state_model_CoM.html">
<IMG WIDTH="48" HEIGHT="48" TITLE="Next" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html19783"
  HREF="The_list_of_functions.html">
<IMG WIDTH="48" HEIGHT="48" TITLE="Up" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html19777"
  HREF="monte_carlo_on.html">
<IMG WIDTH="48" HEIGHT="48" TITLE="Previous" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html19785"
  HREF="Contents.html">
<IMG WIDTH="48" HEIGHT="48" TITLE="Contents" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A> 
<A NAME="tex2html19787"
  HREF="Index.html">
<IMG WIDTH="48" HEIGHT="48" TITLE="Index" ALIGN="BOTTOM" BORDER="0" ALT="index" SRC="index.png"></A> <A NAME="tex2html1"
  HREF="https://sourceforge.net/projects/nmr-relax/files/manual/relax.pdf/download"><IMG
 ALIGN="BOTTOM" BORDER="0" SRC="/images/pdf_icon_nav.png"
 ALT="pdf_icon_nav.png"></A><A NAME="tex2html2"
  HREF="/"><IMG
 ALIGN="BOTTOM" BORDER="0" SRC="/images/relax_logo_nav.png"
 ALT="relax_logo_nav.png"></A>
<BR>
<B> Next:</B> <A NAME="tex2html19790"
  HREF="n_state_model_CoM.html">n_state_model.CoM</A>
<B> Up:</B> <A NAME="tex2html19784"
  HREF="The_list_of_functions.html">The list of functions</A>
<B> Previous:</B> <A NAME="tex2html19778"
  HREF="monte_carlo_on.html">monte_carlo.on</A>
 &nbsp; <B>  <A NAME="tex2html19786"
  HREF="Contents.html">Contents</A></B> 
 &nbsp; <B>  <A NAME="tex2html19788"
  HREF="Index.html">Index</A></B> </DIV>
<!--End of Navigation Panel-->
<ADDRESS>
The <a href="/">relax</a> <a href="/manual/">user manual</a> (<a href="https://sourceforge.net/projects/nmr-relax/files/manual/relax.pdf/download">PDF</a>), created 2016-10-28.
</ADDRESS>
</BODY>
</HTML>
