<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: Launching the GUI from relax. -->
<!--X-From-R13: [vpunry Pvrev <zvpunry.ovrevNtzk.pu> -->
<!--X-Date: Fri, 27 Nov 2009 06:05:07 +0100 -->
<!--X-Message-Id: 4B0F5DF9.30407@gmx.ch -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 7f080ed10911190611m1c309d9ela46671524abaf315@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: Launching the GUI from relax. -- November 27, 2009 - 06:05</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: Launching the GUI from relax.</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00055" class="tabs">Index by Date</a> | <a href="threads.html#00055" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00054.html">Date Prev</a>] [<a href="msg00056.html">Date Next</a>] [<a href="msg00045.html">Thread Prev</a>] [<a href="msg00056.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Edward d'Auvergne &lt;edward.dauvergne@xxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Fri, 27 Nov 2009 16:04:57 +1100</li>
<li class="menuitem">
<em>Cc</em>: relax-devel@xxxxxxx</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00055.html">4B0F5DF9.30407@gmx.ch</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;7f080ed10911190611m1c309d9ela46671524abaf315@xxxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>User-agent</em>: Thunderbird 2.0.0.23 (X11/20090817)</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Michael Bieri</strong> on November 27, 2009 - 06:05:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">
Hi Edward

</pre><tt>Thank you very much for the branch. I made some modifications and 
</tt><tt>included your and SÃ©bastien's comments.
</tt><pre style="margin: 0em;">

</pre><tt>Unfortunately,  I have a problem launching the relax functions. For 
</tt><tt>example by starting the noe calculation, an error appears:
</tt><pre style="margin: 0em;">
Traceback (most recent call last):
</pre><tt> File &quot;/home/michael/Programme/relax_bieri_gui/gui_bieri/relax_gui.py&quot;, 
</tt><tt>line 2645, in exec_noe1
</tt><tt>   make_noe(self.res_noe1.GetValue(), self.noe_ref_1.GetValue(), 
</tt><tt>self.noe_sat_1.GetValue(), self.noe_ref_err_1.GetValue(), 
</tt><tt>self.noe_sat_err_1.GetValue(), 
</tt><tt>self.nmrfreq_value_noe1.GetValue(),self.structure_noe1.GetValue(), 
</tt><tt>self.unres_noe1.GetValue(), start_relax, self, 1, global_setting, 
</tt><tt>file_setting, sequencefile)
</tt><tt> File 
</tt><tt>&quot;/home/michael/Programme/relax_bieri_gui/gui_bieri/res/calc_noe.py&quot;, 
</tt><tt>line 66, in make_noe
</tt><pre style="margin: 0em;">
   pipe.create(pipename, 'noe')
NameError: global name 'pipe' is not defined



</pre><tt>relaxGUI is not able to feed the commands into relax. Do  I have to 
</tt><tt>import other modules?
</tt><pre style="margin: 0em;">

Imported relax modules:
from float import floatAsByteArray
</pre><tt>from generic_fns.mol_res_spin import generate_spin_id, spin_index_loop, 
</tt><tt>spin_loop
</tt><pre style="margin: 0em;">
from generic_fns import pipes, spectrum
from relax_errors import RelaxError

Do you have an idea how to solve this problem?


</pre><tt>I have another problem relating the OMP data. relaxGUI calculated 
</tt><tt>local_tm model, but it is not able to calculate the others (also the 
</tt><tt>scripts can't calculate). There seems to be a problem with the pdb file, 
</tt><tt>I just don't see at the moment:
</tt><pre style="margin: 0em;">

Internal relax PDB parser.
Opening the file '/home/mbieri/LinuxBox/OMP/1F35_mono.pdb' for reading.
</pre><tt>RelaxWarning: The atom number 80 from the CONECT record cannot be found 
</tt><tt>within the ATOM and HETATM records.
</tt><tt>RelaxWarning: The atom number 88 from the CONECT record cannot be found 
</tt><tt>within the ATOM and HETATM records.
</tt><pre style="margin: 0em;">
Traceback (most recent call last):
 File &quot;relaxGUI.py&quot;, line 4126, in exec_model_free
   start_model_free(self, which_model)
 File &quot;relaxGUI.py&quot;, line 1533, in start_model_free
   Model()
 File &quot;relaxGUI.py&quot;, line 1125, in __init__
   structure.read_pdb(PDB_FILE)
 File &quot;/usr/local/relax-1.3.4/prompt/structure.py&quot;, line 464, in read_pdb
</pre><tt>   generic_fns.structure.main.read_pdb(file=file, dir=dir, 
</tt><tt>read_mol=read_mol, set_mol_name=set_mol_name, read_model=read_model, 
</tt><tt>set_model_num=set_model_num, parser=parser)
</tt><tt> File &quot;/usr/local/relax-1.3.4/generic_fns/structure/main.py&quot;, line 247, 
</tt><tt>in read_pdb
</tt><tt>   cdp.structure.load_pdb(file_path, read_mol=read_mol, 
</tt><tt>set_mol_name=set_mol_name, read_model=read_model, 
</tt><tt>set_model_num=set_model_num, verbosity=verbosity)
</tt><tt> File &quot;/usr/local/relax-1.3.4/generic_fns/structure/internal.py&quot;, line 
</tt><tt>628, in load_pdb
</tt><pre style="margin: 0em;">
   mol.fill_object_from_pdb(mol_records)
</pre><tt> File &quot;/usr/local/relax-1.3.4/generic_fns/structure/internal.py&quot;, line 
</tt><tt>1373, in fill_object_from_pdb
</tt><tt>   self.atom_connect(index1=self.__atom_index(record[1]), 
</tt><tt>index2=self.__atom_index(record[i+2]))
</tt><tt> File &quot;/usr/local/relax-1.3.4/generic_fns/structure/internal.py&quot;, line 
</tt><tt>1332, in atom_connect
</tt><pre style="margin: 0em;">
   if index2 not in self.bonded[index1]:
TypeError: list indices must be integers

I tried both, the monomer (extracted in pymol) and the dimer.


Thank you for your help!

Cheers
Michael




Edward d'Auvergne schrieb:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">
Michael,

I have been modifying your GUI branch to launch the GUI from relax.
All your code and pictures from file #7341
(<a  rel="nofollow" href="https://gna.org/support/download.php?file_id=7341">https://gna.org/support/download.php?file_id=7341</a>) attached to task
#6847 (<a  rel="nofollow" href="https://web.archive.org/web/https://gna.org/task/?6847#comment4">https://gna.org/task/?6847#comment4</a>) is now committed to the
SVN repository.  So to launch the GUI, you can type any one of the
following:

$ relax -g bieri
$ relax --gui bieri
$ relax -b
$ relax --bieri

You can see all my changes on the relax-commits mailing list
(<a  rel="nofollow" href="https://mail.gna.org/public/relax-commits">https://mail.gna.org/public/relax-commits</a>), which I would recommend
you subscribe to so you can see all the changes occurring to your
branch.  Not all elements of the interface may work, but the GUI
should launch independently of where relax is installed or where you
run it from.  If you haven't already, you can check out your branch by
typing:

$ svn co svn+ssh://michaelbieri@xxxxxxxxxxx/svn/relax/branches/bieri_gui

Later on I will make lots of code cleanups/modification
recommendations and suggestions for renaming of files and directories,
as well as for reorganising the separate GUI elements into separate
modules.  For example increasing the comment count and clearly
describing in human understandable terms what a statement or block of
statements are doing (this is part of the design of relax so that
non-programmers can understand and contribute).  And using the
standard relax variable, class, module etc. naming conventions.

Regards,

Edward

_______________________________________________
relax (<a  rel="nofollow" href="http://nmr-relax.com">http://nmr-relax.com</a>)

This is the relax-devel mailing list
relax-devel@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="https://mail.gna.org/listinfo/relax-devel">https://mail.gna.org/listinfo/relax-devel</a>

</pre><tt>  
</tt></blockquote><pre style="margin: 0em;">



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00056" href="msg00056.html">Re: Launching the GUI from relax.</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00045" href="msg00045.html">Launching the GUI from relax.</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Fri Nov 27 09:20:27 2009</div>  
</body>
</html>
