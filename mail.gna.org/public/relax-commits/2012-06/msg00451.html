<!-- MHonArc v2.6.16 -->
<!--X-Subject: r17006 &#45; in /branches/interatomic/test_suite/system_tests: ./	scripts/model_free/ -->
<!--X-From-R13: rqjneqNaze&#45;erynk.pbz -->
<!--X-Date: Wed, 20 Jun 2012 15:40:00 +0200 -->
<!--X-Message-Id: E1ShL8a&#45;0004ZV&#45;OA@subversion.gna.org -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>r17006 - in /branches/interatomic/test_suite/system_tests: ./	scripts/model_free/ -- June 20, 2012 - 15:40</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />r17006 - in /branches/interatomic/test_suite/system_tests: ./	scripts/model_free/</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00451" class="tabs">Index by Date</a> | <a href="threads.html#00451" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00450.html">Date Prev</a>] [<a href="msg00452.html">Date Next</a>] [<a href="msg00450.html">Thread Prev</a>] [<a href="msg00452.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: relax-commits@xxxxxxx</li>
<li class="menuitem">
<em>Date</em>: Wed, 20 Jun 2012 13:40:00 -0000</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00451.html">E1ShL8a-0004ZV-OA@subversion.gna.org</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>edward</strong> on June 20, 2012 - 15:40:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Author: bugman
Date: Wed Jun 20 15:40:00 2012
New Revision: 17006

URL: <a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax?rev=17006&amp;view=rev">http://svn.gna.org/viewcvs/relax?rev=17006&amp;view=rev</a>
Log:
Lots of fixes for the model-free system tests.


Modified:
    branches/interatomic/test_suite/system_tests/model_free.py
    
branches/interatomic/test_suite/system_tests/scripts/model_free/bug_14941_local_tm_global_selection.py
    
branches/interatomic/test_suite/system_tests/scripts/model_free/latex_mf_table.py
    
branches/interatomic/test_suite/system_tests/scripts/model_free/opt_setup_local_tm_10_S2_0_8_te_40.py
    
branches/interatomic/test_suite/system_tests/scripts/model_free/tylers_peptide.py

Modified: branches/interatomic/test_suite/system_tests/model_free.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/interatomic/test_suite/system_tests/model_free.py?rev=17006&amp;r1=17005&amp;r2=17006&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/interatomic/test_suite/system_tests/model_free.py?rev=17006&amp;r1=17005&amp;r2=17006&amp;view=diff</a>
==============================================================================
--- branches/interatomic/test_suite/system_tests/model_free.py (original)
+++ branches/interatomic/test_suite/system_tests/model_free.py Wed Jun 20 
15:40:00 2012
@@ -396,7 +396,7 @@
 
         # Load the relaxation data.
         for i in range(len(frq)):
-            self.interpreter.relax_data.read('NOE_%s'%frq[i], 'NOE', 
float(frq[i])*1e6, 'noe.%s.out' % frq[i], dir=cdp.path, res_num_col=1, 
res_name_col=2, data_col=3, error_col=4)
+            self.interpreter.relax_data.read('NOE_%s'%frq[i], 'NOE', 
float(frq[i])*1e6, 'noe.%s.out' % frq[i], dir=cdp.path, res_num_col=1, 
res_name_col=2, data_col=3, error_col=4, spin_id='@N')
             self.interpreter.relax_data.read('R1_%s'%frq[i],  'R1',  
float(frq[i])*1e6, 'r1.%s.out' % frq[i],  dir=cdp.path, res_num_col=1, 
res_name_col=2, data_col=3, error_col=4)
             self.interpreter.relax_data.read('R2_%s'%frq[i],  'R2',  
float(frq[i])*1e6, 'r2.%s.out' % frq[i],  dir=cdp.path, res_num_col=1, 
res_name_col=2, data_col=3, error_col=4)
 

Modified: 
branches/interatomic/test_suite/system_tests/scripts/model_free/bug_14941_local_tm_global_selection.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/interatomic/test_suite/system_tests/scripts/model_free/bug_14941_local_tm_global_selection.py?rev=17006&amp;r1=17005&amp;r2=17006&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/interatomic/test_suite/system_tests/scripts/model_free/bug_14941_local_tm_global_selection.py?rev=17006&amp;r1=17005&amp;r2=17006&amp;view=diff</a>
==============================================================================
--- 
branches/interatomic/test_suite/system_tests/scripts/model_free/bug_14941_local_tm_global_selection.py
 (original)
+++ 
branches/interatomic/test_suite/system_tests/scripts/model_free/bug_14941_local_tm_global_selection.py
 Wed Jun 20 15:40:00 2012
@@ -22,6 +22,8 @@
 # Local tm data.
 pipe.create(pipe_name='local_tm', pipe_type='mf')
 results.read(file='local_tm_trunc', dir=path)
+spin.element('N', '@N')
+spin.element('H', '@H')
 
 # Sphere data.
 pipe.create(pipe_name='sphere', pipe_type='mf')

Modified: 
branches/interatomic/test_suite/system_tests/scripts/model_free/latex_mf_table.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/interatomic/test_suite/system_tests/scripts/model_free/latex_mf_table.py?rev=17006&amp;r1=17005&amp;r2=17006&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/interatomic/test_suite/system_tests/scripts/model_free/latex_mf_table.py?rev=17006&amp;r1=17005&amp;r2=17006&amp;view=diff</a>
==============================================================================
--- 
branches/interatomic/test_suite/system_tests/scripts/model_free/latex_mf_table.py
 (original)
+++ 
branches/interatomic/test_suite/system_tests/scripts/model_free/latex_mf_table.py
 Wed Jun 20 15:40:00 2012
@@ -38,11 +38,9 @@
 # Python module imports.
 from os import sep
 from string import replace
-import sys
 
 # relax module imports.
 from generic_fns.mol_res_spin import spin_loop
-from generic_fns import pipes
 from relax_io import open_write_file
 from status import Status; status = Status()
 
@@ -139,25 +137,12 @@
         # End the font size.
         self.file.write(&quot;\\end{small}\n&quot;)
 
-        # Terminate the document.
-        self.file.write(&quot;\\end{document}\n&quot;)
-
 
     def latex_header(self):
         &quot;&quot;&quot;Create the LaTeX header.
 
         This function will need to be heavily modified to suit your needs.
         &quot;&quot;&quot;
-
-        # Document class - to allow for compilation tests.
-        self.file.write(&quot;\documentclass[a4paper, 12pt, twoside]{book}\n\n&quot;)
-
-        # Package inclusion.
-        self.file.write(&quot;\usepackage{longtable}\n&quot;)
-        self.file.write(&quot;\usepackage{booktabs}\n\n&quot;)
-
-        # Start the document.
-        self.file.write(&quot;\\begin{document}\n\n&quot;)
 
         # Font size.
         self.file.write(&quot;% Small font.\n&quot;)
@@ -193,10 +178,15 @@
 
             # The spin is not selected.
             if not spin.select:
-                self.file.write(&quot;\\\n&quot;)
+                self.file.write(&quot;\\multicolumn{11}{c}{} \\\\\n&quot;)
+                continue
 
             # The model-free model.
-            self.file.write(&quot;$%s$ &amp; &quot; % spin.model)
+            if hasattr(spin, 'model'):
+                self.file.write(&quot;$%s$ &amp; &quot; % spin.model)
+            else:
+                self.file.write(&quot;\\multicolumn{11}{c}{} \\\\\n&quot;)
+                continue
 
             # S2.
             if spin.s2 == None:

Modified: 
branches/interatomic/test_suite/system_tests/scripts/model_free/opt_setup_local_tm_10_S2_0_8_te_40.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/interatomic/test_suite/system_tests/scripts/model_free/opt_setup_local_tm_10_S2_0_8_te_40.py?rev=17006&amp;r1=17005&amp;r2=17006&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/interatomic/test_suite/system_tests/scripts/model_free/opt_setup_local_tm_10_S2_0_8_te_40.py?rev=17006&amp;r1=17005&amp;r2=17006&amp;view=diff</a>
==============================================================================
--- 
branches/interatomic/test_suite/system_tests/scripts/model_free/opt_setup_local_tm_10_S2_0_8_te_40.py
 (original)
+++ 
branches/interatomic/test_suite/system_tests/scripts/model_free/opt_setup_local_tm_10_S2_0_8_te_40.py
 Wed Jun 20 15:40:00 2012
@@ -20,6 +20,10 @@
 # Create the two spins.
 spin.create(res_num=5, res_name='GLU', spin_name='N')
 spin.create(res_num=5, res_name='GLU', spin_name='H')
+spin.element('N', '@N')
+spin.element('H', '@H')
+spin.isotope('15N', spin_id='@N')
+spin.isotope('1H', spin_id='@H')
 
 # Define the magnetic dipole-dipole relaxation interaction.
 dipole_pair.define(spin_id1='@N', spin_id2='@H', direct_bond=True)
@@ -28,9 +32,5 @@
 # Define the chemical shift relaxation interaction.
 value.set(-172 * 1e-6, 'csa')
 
-# Set the spin information.
-spin.isotope('15N', spin_id='@N')
-spin.isotope('1H', spin_id='@H')
-
 # Select the model-free model.
 model_free.select_model(model='tm2')

Modified: 
branches/interatomic/test_suite/system_tests/scripts/model_free/tylers_peptide.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/interatomic/test_suite/system_tests/scripts/model_free/tylers_peptide.py?rev=17006&amp;r1=17005&amp;r2=17006&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/interatomic/test_suite/system_tests/scripts/model_free/tylers_peptide.py?rev=17006&amp;r1=17005&amp;r2=17006&amp;view=diff</a>
==============================================================================
--- 
branches/interatomic/test_suite/system_tests/scripts/model_free/tylers_peptide.py
 (original)
+++ 
branches/interatomic/test_suite/system_tests/scripts/model_free/tylers_peptide.py
 Wed Jun 20 15:40:00 2012
@@ -18,6 +18,8 @@
 model_free.remove_tm(spin_id=None)
 sequence.display()
 structure.read_pdb(file='tylers_peptide_trunc.pdb', 
dir=DATA_PATH+'structures', parser='internal')
+structure.get_pos(&quot;@N&quot;)
+structure.get_pos(&quot;@H&quot;)
 dipole_pair.unit_vectors()
 diffusion_tensor.init(params=(1e-08, 0, 0, 0, 0, 0), time_scale=1.0, 
d_scale=1.0, angle_units='deg', param_types=0, spheroid_type=None, 
fixed=False)
 fix(element='all_spins', fixed=True)



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Wed Jun 20 16:00:02 2012</div>  
</body>
</html>
