<!-- MHonArc v2.6.19+ -->
<!--X-Subject: Re: Javascript problems on the relax wiki. -->
<!--X-From-R13: Febryf Szgrxæe Zvaarg &#60;gyvaargNaze&#45;erynk.pbz> -->
<!--X-Date: Tue, 20 Oct 2015 15:27:37 +0200 -->
<!--X-Message-Id: CA+CBx2MvFm1mZcS+c4tO+CHAM+Wf5RStUGn5pTRZRY_YonLExQ@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: CAED9pY9daNydCBfTfn&#45;JQRPLnsJ&#45;E&#45;CQaY+LLyvnBoz3wjF3rw@mail.gmail.com -->
<!--X-Reference: CA+CBx2OTr3&#45;8RJrc8hXcSkRjHmmP0H5JDxedSnKaJT=7saA4Lw@mail.gmail.com -->
<!--X-Reference: CA+CBx2MjRKdTsruKJESxy9O+yhOv817VOcf_FhxKbZvzLSSCsQ@mail.gmail.com -->
<!--X-Reference: CAED9pY&#45;Sxvv6n0qtjvQ+dF_9svB0wRjP&#45;LTKK2nFgXF1yByHrA@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: Javascript problems on the relax wiki. -- October 20, 2015 - 15:27</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: Javascript problems on the relax wiki.</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00011" class="tabs">Index by Date</a> | <a href="threads.html#00011" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00010.html">Date Prev</a>] [<a href="msg00012.html">Date Next</a>] [<a href="msg00010.html">Thread Prev</a>] [<a href="msg00012.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: &quot;Edward d'Auvergne&quot; &lt;edward@xxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Tue, 20 Oct 2015 15:26:49 +0200</li>
<li class="menuitem">
<em>Cc</em>: &quot;relax-devel@xxxxxxx&quot; &lt;relax-devel@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113; h=mime-version:sender:in-reply-to:references:from:date:message-id :subject:to:cc:content-type; bh=d8WmzhqJz69utGiUMGFozoBCKWzuDoQpPutBKFjbwaE=; b=ZmOVBQmPC7AycP4+jVqhVtgFl6ru++hWa5LzUk8Y//NjngApcXstdKXEGuzG1M2eyC 6wYk8YgThZhtQeOf8cIbNeKlC+4IFZvEPeJ2sdCUoK+IUlCDqIIiV/JyHPFc1WA2dG6z UDL5DNky2A4yooN7a6juGJnLDvZGNqdgagwFP9t+dX59UL/H2y7rQQMJZDHDP9zEkCmA sP3kuwuyKYk2ZIB6Rhf0BQ3k2y0ZZELdYIfvCGGg3WG5eOiYUYFC5TjdUXi0pgk7nudW VoEoUIZwMufbjD6ZZNp+LEaCVPHbdZULLfsNH+2vHj5OjlHDYJcyJaMVZlQ7ExqeIheS aX7g==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00011.html">CA+CBx2MvFm1mZcS+c4tO+CHAM+Wf5RStUGn5pTRZRY_YonLExQ@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;<a href="msg00005.html">CAED9pY9daNydCBfTfn-JQRPLnsJ-E-CQaY+LLyvnBoz3wjF3rw@mail.gmail.com</a>&gt; &lt;CA+CBx2OTr3-8RJrc8hXcSkRjHmmP0H5JDxedSnKaJT=7saA4Lw@mail.gmail.com&gt; &lt;<a href="msg00009.html">CA+CBx2MjRKdTsruKJESxy9O+yhOv817VOcf_FhxKbZvzLSSCsQ@mail.gmail.com</a>&gt; &lt;<a href="msg00010.html">CAED9pY-Sxvv6n0qtjvQ+dF_9svB0wRjP-LTKK2nFgXF1yByHrA@mail.gmail.com</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Troels Emtekær Linnet</strong> on October 20, 2015 - 15:27:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Hi Edward.

I will try to change the PHP version, to see what happens.

Best
Troels

2015-10-20 15:07 GMT+02:00 Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt;:

</pre><blockquote class="blockquote"><pre style="margin: 0em;">On 20 October 2015 at 13:00, Troels Emtekær Linnet
&lt;tlinnet@xxxxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi Edward.

In:
<a  rel="nofollow" href="https://www.mediawiki.org/wiki/Manual:Collapsible_elements#NavFrame">https://www.mediawiki.org/wiki/Manual:Collapsible_elements#NavFrame</a>

It says with red text, that MediaWiki version: ≤ 1.18

??
</pre></blockquote><pre style="margin: 0em;">

Hi,

Thanks for the quick response!  The support should be there, but some
bug is breaking the JavaScript on
<a  rel="nofollow" href="http://wiki.nmr-relax.com/MediaWiki:Common.js">http://wiki.nmr-relax.com/MediaWiki:Common.js</a> .  The &quot;mw-collapsible&quot;
is fully functional, but the class=&quot;NavFrame&quot; elements are more
advanced relying on this custom JavaScript to turn the &lt;div&gt; box into
a collapsible element, based on the MediaWiki &quot;mw-collapsible&quot;
concept.


</pre><blockquote class="blockquote"><pre style="margin: 0em;">2015-10-20 12:45 GMT+02:00 Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxxxxxx
:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">

Hi Edward.

I have tried:
<a  rel="nofollow" href="http://wiki.nmr-relax.com/Javascript_testing">http://wiki.nmr-relax.com/Javascript_testing</a>

For me this looks fine?

For the NavFrame test, I see both an expanded and collapsed box.

Is the error, that you don't see &quot; the [hide] and [show] links to the
right of the titles&quot; ?

This must be what you are missing:
I also don't see the possibility to expand or hide.
</pre></blockquote></blockquote><pre style="margin: 0em;">

This is the problem.  The standard MediaWiki NavFrame JavaScript that
I added to <a  rel="nofollow" href="http://wiki.nmr-relax.com/MediaWiki:Common.js">http://wiki.nmr-relax.com/MediaWiki:Common.js</a> is somehow
broken.  This js code should turn the &lt;div class=&quot;NavFrame&quot;/&gt; element
into a collapsible element, which appears to be working using an old
version of the NavFrame JavaScript, but it is having a problem adding
the &quot;[ show ]&quot; and &quot;[ hide ]&quot; text into the &lt;div&gt; box to allow the
&lt;div&gt; box to open and close.


</pre><blockquote class="blockquote"><blockquote class="blockquote"><pre style="margin: 0em;">From:
<a  rel="nofollow" href="http://wiki.nmr-relax.com/Special:Version">http://wiki.nmr-relax.com/Special:Version</a>

I see:
MediaWiki 1.21.1
PHP 5.3.29 (cgi-fcgi)
MySQL 5.6.25-1~dotdeb+7.1

Latest version of Mediawiki is:
1.25.3, and 1.21.1 is from 2013-05-25.
<a  rel="nofollow" href="https://www.mediawiki.org/wiki/News">https://www.mediawiki.org/wiki/News</a>

On the server is: PHP 5.3 enabled.
I can change to: 5.4, 5.5, 5.6, 7.0 (RC).

And there is options to change for PHP.
allow_url_fopen: On
allow_url_include: On
always_populate_raw_post_data: 0
apc.rfc1867: On
asp_tags: On
date.timezone
default_mimetype: text/html
display_errors: On
engine: On
expose_php: On
file_uploads: On
html_errors: On
magic_quotes_gpc: Off
max_execution_time: 30
max_file_uploads: 20
max_input_time: 60
max_input_vars: 1000
mbstring.func_overload: 0
mbstring.internal_encoding:
memory_limit: 128 MB
mysql.allow_persistent: On
mysql.default_host:
mysql.default_port: 3306
mysql.default_user:
mysql.trace_mode: Off
output_buffering: Off
post_max_size: 32 Mb
realpath_cache_size: 16
realpath_cache_ttl: 120
register_globals: Off
safe_mode: Off
session.auto_start: Off
session.bug_compat_42: Off
session.bug_compat_warn: Off
session.cookie_domain:
session.cookie_lifetime: 0
session.cookie_path: /
session.gc_maxlifetime: 3600

and some 20 more.


Does any of this help you?
</pre></blockquote></blockquote><pre style="margin: 0em;">

Unfortunately not.   The info at <a  rel="nofollow" href="http://wiki.nmr-relax.com/phpinfo.php">http://wiki.nmr-relax.com/phpinfo.php</a>
also doesn't help.  That's why I have a feeling that this is maybe a
bug within MediaWiki itself, specifically to do with JavaScript.
Though I cannot be sure.  In any case, the result should be that &quot;[
show ]&quot; and &quot;[ hide ]&quot; links are present, so that these two templates
match 100%, as the code is identical:

    <a  rel="nofollow" href="http://wiki.nmr-relax.com/Template:Collapsible_script">http://wiki.nmr-relax.com/Template:Collapsible_script</a>
    <a  rel="nofollow" href="http://wiki.flightgear.org/Template:Collapsible_script">http://wiki.flightgear.org/Template:Collapsible_script</a>

I'll continue with the testing.  Though temporarily removing all
installed extensions from LocalSettings.php does not fix the problem,
so it won't be an extension problem.  It is rather perplexing!

Cheers,

Edward

</pre></blockquote><pre style="margin: 0em;">

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00014" href="msg00014.html">Re: Javascript problems on the relax wiki.</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00012" href="msg00012.html">Re: Javascript problems on the relax wiki.</a></strong>
<ul><li><em>From:</em> Troels Emtekær Linnet</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00005" href="msg00005.html">Javascript problems on the relax wiki.</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00008" href="msg00008.html">Re: Javascript problems on the relax wiki.</a></strong>
<ul><li><em>From:</em> Troels Emtekær Linnet</li></ul></li>
<li><strong><a name="00009" href="msg00009.html">Re: Javascript problems on the relax wiki.</a></strong>
<ul><li><em>From:</em> Troels Emtekær Linnet</li></ul></li>
<li><strong><a name="00010" href="msg00010.html">Re: Javascript problems on the relax wiki.</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Tue Oct 20 15:40:03 2015</div>  
</body>
</html>
