<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: Model&#45;Free Results Output -->
<!--X-From-R13: Rbhtynf Ybwrgva <qbhtynf.xbwrgvaNtznvy.pbz> -->
<!--X-Date: Wed, 05 Nov 2008 17:52:29 +0100 -->
<!--X-Message-Id: 6E85EB27&#45;8BFE&#45;4B22&#45;A71E&#45;4B3B36581B80@gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 20081020121212.x2ihf0ojv34kcw04@my6.dal.ca -->
<!--X-Reference: 20081021211308.d4o3dla71a5cok0k@my6.dal.ca -->
<!--X-Reference: 48FE79F2.8050109@ulaval.ca -->
<!--X-Reference: 20081021221723.byo1mu7rwq1w480s@my4.dal.ca -->
<!--X-Reference: 7f080ed10810220109u50324f2bo488c8a7bc025eff4@mail.gmail.com -->
<!--X-Reference: 20081022100207.p7uvmqktf20wckso@my3.dal.ca -->
<!--X-Reference: 4901BB17.4060604@ulaval.ca -->
<!--X-Reference: 4901BBB6.7030309@ulaval.ca -->
<!--X-Reference: 7f080ed10810240605x583c5f12r4e8d2ae8a9833e00@mail.gmail.com -->
<!--X-Reference: 20081024101227.p5zx1x4pso0k4ks0@my1.dal.ca -->
<!--X-Reference: 7f080ed10810240652i16ed9f53qc1bf719b84ffce79@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: Model-Free Results Output -- November 05, 2008 - 17:52</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: Model-Free Results Output</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00002" class="tabs">Index by Date</a> | <a href="threads.html#00002" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00001.html">Date Prev</a>] [<a href="msg00003.html">Date Next</a>] [<a href="msg00001.html">Thread Prev</a>] [<a href="msg00008.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Edward d'Auvergne &lt;edward.dauvergne@xxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Wed, 5 Nov 2008 11:52:17 -0500</li>
<li class="menuitem">
<em>Cc</em>: Tyler Reddy &lt;TREDDY@xxxxxx&gt;, &quot;relax-users@xxxxxxx&quot; &lt;relax-users@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00002.html">6E85EB27-8BFE-4B22-A71E-4B3B36581B80@gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;20081020121212.x2ihf0ojv34kcw04@xxxxxxxxxx&gt;	&lt;20081021211308.d4o3dla71a5cok0k@xxxxxxxxxx&gt;	&lt;48FE79F2.8050109@xxxxxxxxx&gt;	&lt;20081021221723.byo1mu7rwq1w480s@xxxxxxxxxx&gt;	&lt;7f080ed10810220109u50324f2bo488c8a7bc025eff4@xxxxxxxxxxxxxx&gt;	&lt;20081022100207.p7uvmqktf20wckso@xxxxxxxxxx&gt;	&lt;4901BB17.4060604@xxxxxxxxx&gt; &lt;4901BBB6.7030309@xxxxxxxxx&gt;	&lt;7f080ed10810240605x583c5f12r4e8d2ae8a9833e00@xxxxxxxxxxxxxx&gt;	&lt;20081024101227.p5zx1x4pso0k4ks0@xxxxxxxxxx&gt;	&lt;7f080ed10810240652i16ed9f53qc1bf719b84ffce79@xxxxxxxxxxxxxx&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Douglas Kojetin</strong> on November 05, 2008 - 17:52:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">

I see a similar bug that occurs right after the 'init' round.

Doug


On Oct 24, 2008, at 9:52 AM, Edward d'Auvergne wrote:

</pre><blockquote class="blockquote"><pre style="margin: 0em;">
Hi,

This is a strange bug if it only occurred in the second round.  I
can't see what the problem is right now so I will have to think about
this one for a bit.  In the mean time, would you be able to create a
bug report for this issue?  Additional information may be required to
solve this one.  Again this must be specific to the system as this
code functions perfectly for other proteins, but we'll get to the
bottom of the issue.

Cheers,

Edward


On Fri, Oct 24, 2008 at 3:12 PM, Tyler Reddy &lt;TREDDY@xxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">
Thanks Seb.

</pre><tt>It looks like my 'prolate' iterations in the 2nd round are maxing  
</tt><tt>out and
</tt><pre style="margin: 0em;">
this
is causing an error output (even though the first round seemed okay):


k: 311     xk: array([  2.60992216e-11,   5.00000957e+02])
 fk: 2254.7254621187344
Entering sub-algorithm.

     Newton minimisation
     ~~~~~~~~~~~~~~~~~~~
     Line search:  Backtracking line search.
</pre><tt>     Hessian modification:  The Gill, Murray, and Wright modified  
</tt><tt>Cholesky
</tt><pre style="margin: 0em;">
algorithm.

     k: 0       xk: array([  2.60992216e-11,   5.00000957e+02])
       fk: 2254.7254621187344
     k: 100     xk: array([  2.60992216e-11,   5.00000958e+02])
       fk: 2254.7254579164155
     k: 200     xk: array([  2.60992216e-11,   5.00000958e+02])
       fk: 2254.7254537140993
     k: 300     xk: array([  2.60992216e-11,   5.00000959e+02])
       fk: 2254.7254495117813
     k: 400     xk: array([  2.60992216e-11,   5.00000959e+02])
       fk: 2254.7254453094624

     Parameter values: array([  2.60992216e-11,   5.00000960e+02])
     Function value:   2254.7254411071449
     Iterations:       500
     Function calls:   1001
     Gradient calls:   501
     Hessian calls:    500
     Warning:          Maximum number of iterations reached


k: 312     xk: array([  2.60992216e-11,   5.00000960e+02])
 fk: 2254.7254411071449
Entering sub-algorithm.

     Newton minimisation
     ~~~~~~~~~~~~~~~~~~~
     Line search:  Backtracking line search.
</pre><tt>     Hessian modification:  The Gill, Murray, and Wright modified  
</tt><tt>Cholesky
</tt><pre style="margin: 0em;">
algorithm.

     k: 0       xk: array([  2.60992216e-11,   5.00000960e+02])
       fk: 2254.7254411071449
     k: 100     xk: array([  2.60992216e-11,   5.00000961e+02])
       fk: 2254.7254369048283
     k: 200     xk: array([  2.60992216e-11,   5.00000961e+02])
       fk: 2254.7254327025107
     k: 300     xk: array([  2.60992216e-11,   5.00000962e+02])
       fk: 2254.7254285001914
     k: 400     xk: array([  2.60992216e-11,   5.00000963e+02])
       fk: 2254.7254242978743

     Parameter values: array([  2.60992216e-11,   5.00000963e+02])
     Function value:   2254.7254200955554
     Iterations:       500
     Function calls:   1001
     Gradient calls:   501
     Hessian calls:    500
     Warning:          Maximum number of iterations reached


Parameter values: array([  2.60992216e-11,   5.00000963e+02])
Function value:   2254.7254200955554
Iterations:       156500
Function calls:   313313
Gradient calls:   156813
Hessian calls:    156500
Warning:          Mu too small.



Fitting to spin ':258&amp;:LEU@N'
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~


Method of Multipliers
~~~~~~~~~~~~~~~~~~~~~

k: 0       xk: array([ 0.,  0.])
 fk: 3163.7013439706825
Entering sub-algorithm.

     Newton minimisation
     ~~~~~~~~~~~~~~~~~~~
     Line search:  Backtracking line search.
</pre><tt>     Hessian modification:  The Gill, Murray, and Wright modified  
</tt><tt>Cholesky
</tt><pre style="margin: 0em;">
algorithm.

     k: 0       xk: array([ 0.,  0.])
       fk: 3163.7013439706825
Traceback (most recent call last):
</pre><tt>File &quot;/Applications/relax-1.3.1/relax-1.3/relax&quot;, line 414, in  
</tt><tt>&lt;module&gt;
</tt><pre style="margin: 0em;">
 Relax()
</pre><tt>File &quot;/Applications/relax-1.3.1/relax-1.3/relax&quot;, line 131, in  
</tt><tt>__init__
</tt><pre style="margin: 0em;">
 self.interpreter.run(self.script_file)
</pre><tt>File &quot;/Applications/relax-1.3.1/relax-1.3/prompt/interpreter.py&quot;,  
</tt><tt>line 270,
</tt><pre style="margin: 0em;">
in
run
 return run_script(intro=self.__intro_string, local=self.local,
script_file=script_file, quit=self.__quit_flag,
show_script=self.__show_script,
raise_relax_error=self.__raise_relax_error)
</pre><tt>File &quot;/Applications/relax-1.3.1/relax-1.3/prompt/interpreter.py&quot;,  
</tt><tt>line 531,
</tt><pre style="margin: 0em;">
in
run_script
 return console.interact(intro, local, script_file, quit,
show_script=show_script, raise_relax_error=raise_relax_error)
</pre><tt>File &quot;/Applications/relax-1.3.1/relax-1.3/prompt/interpreter.py&quot;,  
</tt><tt>line 427,
</tt><pre style="margin: 0em;">
in
interact_script
 execfile(script_file, local)
File &quot;full_analysis.py&quot;, line 673, in &lt;module&gt;
 Main(self.relax)
File &quot;full_analysis.py&quot;, line 300, in __init__
 self.multi_model()
File &quot;full_analysis.py&quot;, line 665, in multi_model
 minimise(MIN_ALGOR)
</pre><tt>File &quot;/Applications/relax-1.3.1/relax-1.3/prompt/minimisation.py&quot;,  
</tt><tt>line
</tt><pre style="margin: 0em;">
362,
in minimise
minimise.minimise(min_algor=min_algor, min_options=min_options,
func_tol=func_tol, grad_tol=grad_tol, max_iterations=max_iterations,
constraints=constraints, scaling=scaling, verbosity=verbosity)
</pre><tt>File &quot;/Applications/relax-1.3.1/relax-1.3/generic_fns/minimise.py&quot;,  
</tt><tt>line
</tt><pre style="margin: 0em;">
239,
in minimise
</pre><tt> minimise(min_algor=min_algor, min_options=min_options,  
</tt><tt>func_tol=func_tol,
</tt><tt>grad_tol=grad_tol, max_iterations=max_iterations,  
</tt><tt>constraints=constraints,
</tt><pre style="margin: 0em;">
scaling=scaling, verbosity=verbosity)
File
</pre><tt>&quot;/Applications/relax-1.3.1/relax-1.3/specific_fns/model_free/ 
</tt><tt>mf_minimise.py&quot;,
</tt><pre style="margin: 0em;">
line 987, in minimise
 results = generic_minimise(func=self.mf.func, dfunc=self.mf.dfunc,
d2func=self.mf.d2func, args=(), x0=param_vector, min_algor=min_algor,
min_options=min_options, func_tol=func_tol, grad_tol=grad_tol,
maxiter=max_iterations, A=A, b=b, full_output=
ag=verbosity)
File
</pre><tt>&quot;/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/ 
</tt><tt>site-packages/minfx/generic.py&quot;,
</tt><pre style="margin: 0em;">
line 412, in generic_minimise
</pre><tt> results = method_of_multipliers(func=func, dfunc=dfunc,  
</tt><tt>d2func=d2func,
</tt><tt>args=args, x0=x0, min_options=min_options, A=A, b=b, l=l, u=u, c=c,  
</tt><tt>dc=dc,
</tt><pre style="margin: 0em;">
d2c=d2c, func_tol=func_tol, grad_tol=grad_tol, maxiter=maxiter,
full_output=full_output, print_flag=
File
</pre><tt>&quot;/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/ 
</tt><tt>site-packages/minfx/method_of_multipliers.py&quot;,
</tt><pre style="margin: 0em;">
line 143, in method_of_multipliers
 results = min.minimise()
File
</pre><tt>&quot;/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/ 
</tt><tt>site-packages/minfx/method_of_multipliers.py&quot;,
</tt><pre style="margin: 0em;">
line 403, in minimise
</pre><tt> results = self.generic_minimise(func=self.func_LA,  
</tt><tt>dfunc=self.func_dLA,
</tt><tt>d2func=self.func_d2LA, args=self.args, x0=self.xk,  
</tt><tt>min_algor=self.min_algor,
</tt><pre style="margin: 0em;">
min_options=self.min_options, func_tol=None, grad_tol=self.tk,
maxiter=maxiter,
full_output=1, pr
b_print_flag, print_prefix=&quot;\t&quot;)
File
</pre><tt>&quot;/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/ 
</tt><tt>site-packages/minfx/generic.py&quot;,
</tt><pre style="margin: 0em;">
line 343, in generic_minimise
</pre><tt> results = newton(func=func, dfunc=dfunc, d2func=d2func, args=args,  
</tt><tt>x0=x0,
</tt><pre style="margin: 0em;">
min_options=min_options, func_tol=func_tol, grad_tol=grad_tol,
maxiter=maxiter,
</pre><tt>full_output=full_output, print_flag=print_flag,  
</tt><tt>print_prefix=print_prefix)
</tt><pre style="margin: 0em;">
File
</pre><tt>&quot;/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/ 
</tt><tt>site-packages/minfx/newton.py&quot;,
</tt><pre style="margin: 0em;">
line 44, in newton
 results = min.minimise()
File
</pre><tt>&quot;/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/ 
</tt><tt>site-packages/minfx/base_classes.py&quot;,
</tt><pre style="margin: 0em;">
line 233, in minimise
 self.new_param_func()
File
</pre><tt>&quot;/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/ 
</tt><tt>site-packages/minfx/newton.py&quot;,
</tt><pre style="margin: 0em;">
line 166, in new_param_func
 self.line_search()
File
</pre><tt>&quot;/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/ 
</tt><tt>site-packages/minfx/base_classes.py&quot;,
</tt><pre style="margin: 0em;">
line 339, in backline
 self.alpha, fc = backtrack(self.func, self.args, self.xk, self.fk,
self.dfk,
self.pk, a_init=self.a0)
TypeError: 'NoneType' object is not iterable










Quoting Edward d'Auvergne &lt;edward.dauvergne@xxxxxxxxx&gt;:

</pre><blockquote class="blockquote"><pre style="margin: 0em;">
:S  It overwrites a pre-existing file!  And the important script of
</pre><tt>all things!!!  That'll have to be fixed.  Seb, could you submit a  
</tt><tt>bug
</tt><pre style="margin: 0em;">
report for that?

Cheers,

Edward


On Fri, Oct 24, 2008 at 2:12 PM, Sébastien Morin
&lt;sebastien.morin.1@xxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">

</pre><tt>Oh... Sorry... It's still early in the morning here (Quebec  
</tt><tt>City)...
</tt><pre style="margin: 0em;">

...

Dont' forget to specify a log file...

LOG   -&gt;   relax -l LOG script.py

TEE   -&gt;   relax -t LOG script.py

</pre><tt>If you just specify the script, the script will be erased by the  
</tt><tt>log...
</tt><pre style="margin: 0em;">

Cheers,


Séb


Sébastien Morin wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">

Hi Tyler,

</pre><tt>If you want all output from relax to go to a log file, use the  
</tt><tt>option
</tt><pre style="margin: 0em;">
'-l'... (relax -l script.py)

If you want all output from relax to go to a file AND the terminal
(display), use the option '-t'... (relax -t script.py)

</pre><tt>These options are visible when typing : ./relax --help  (or  
</tt><tt>relax -h)
</tt><pre style="margin: 0em;">

Good luck !


Séb  :)



Tyler Reddy wrote:

</pre><blockquote class="blockquote"><tt>Okay, I submitted the report. Let me know if there's more  
</tt><tt>information
</tt><pre style="margin: 0em;">
you need
</pre><tt>or a better way to submit bug reports in general.. haven't done  
</tt><tt>this
</tt><pre style="margin: 0em;">
before.
</pre><tt>Also, I had to manually copy/paste the output, and while it  
</tt><tt>looks fine,
</tt><pre style="margin: 0em;">
if
</pre><tt>there is a problem with the same pdb structure getting read  
</tt><tt>twice or
</tt><pre style="margin: 0em;">
something
</pre><tt>that's probably just my pasting error from the unix terminal to  
</tt><tt>the
</tt><pre style="margin: 0em;">
browser.

On that note, how can I fix this command:

relax full_analysis.py &gt; STDOUT.txt 2&gt; STDERR.txt
tcsh: Ambiguous output redirect.

</pre><tt>Or better yet, can I merge all the output streams to a single  
</tt><tt>text file
</tt><pre style="margin: 0em;">
and
</pre><tt>display the output in the terminal at the same time as well  
</tt><tt>(maybe I'm
</tt><pre style="margin: 0em;">
getting
too ambitious there..)?

</pre><tt>Also, I do get the same output for 'ellipsoid' as well, as Seb  
</tt><tt>asked.
</tt><pre style="margin: 0em;">

Yours,

Tyler


Quoting Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt;:



</pre><blockquote class="blockquote"><pre style="margin: 0em;">
Hi,

</pre><tt>This issue looks like a problem with the loaded PDB  
</tt><tt>structure.  The
</tt><pre style="margin: 0em;">
'local_tm' and 'sphere' optimisations do not utilise structural
information, but the 'oblate' and 'prolate' spheroids, and the
</pre><tt>'ellipsoid' all require this info.  Normally relax will catch  
</tt><tt>this
</tt><tt>problem and deselect the spins without XH bond vectors, but  
</tt><tt>this seems
</tt><tt>to be broken in the 1.3 versions hence you get the original  
</tt><tt>cryptic
</tt><tt>Python error.  As this is a real bug with the relax source  
</tt><tt>code (and
</tt><tt>not a yet-to-be converted feature or a sample script), would  
</tt><tt>you be
</tt><tt>able to submit a bug report for this issue?  The relax bug  
</tt><tt>tracker is
</tt><pre style="margin: 0em;">
located at <a  rel="nofollow" href="https://gna.org/bugs/?group=relax">https://gna.org/bugs/?group=relax</a> and the link at
</pre><tt><a  rel="nofollow" href="https://gna.org/bugs/?func=additem&amp;group=relax">https://gna.org/bugs/?func=additem&amp;group=relax</a> allows you to  
</tt><tt>create a
</tt><pre style="margin: 0em;">
report.  That would be much appreciated.

</pre><tt>The bug report will be useful for having this error caught by  
</tt><tt>the
</tt><tt>relax test suite - if I can replicate the bug there then I can  
</tt><tt>play
</tt><tt>with the bug and fix it.  Note the the actual problem occurred  
</tt><tt>earlier
</tt><tt>starting with the loading of the PDB file at the  
</tt><tt>structure.read_pdb()
</tt><tt>user function.  So if you could include all print out from  
</tt><tt>that user
</tt><tt>function to the end of the traceback error message, that would  
</tt><tt>be very
</tt><pre style="margin: 0em;">
useful.

Cheers,

Edward


</pre><tt>On Wed, Oct 22, 2008 at 3:17 AM, Tyler Reddy &lt;TREDDY@xxxxxx&gt;  
</tt><tt>wrote:
</tt><pre style="margin: 0em;">


</pre><blockquote class="blockquote"><pre style="margin: 0em;">
Hi Seb,

I just tested 'oblate' and it produces the same error output.

Tyler


Quoting Sébastien Morin &lt;sebastien.morin.1@xxxxxxxxx&gt;:



</pre><blockquote class="blockquote"><pre style="margin: 0em;">
Hi Tyler,

</pre><tt>Do you get the same error when trying the 'oblate' or  
</tt><tt>'ellipsoid'
</tt><pre style="margin: 0em;">
diffusion tensors ?


Sébastien


Tyler Reddy wrote:


</pre><blockquote class="blockquote"><tt>I'm having an issue with the full_analysis.py script. It  
</tt><tt>seems to
</tt><pre style="margin: 0em;">
work
fine when
</pre><tt>DIFF_MODEL = 'local_tm' or 'sphere' (converges on 4th  
</tt><tt>round) but
</tt><pre style="margin: 0em;">
for
'prolate'
I get the following output:

Grid search
~~~~~~~~~~~

Searching the grid.
Traceback (most recent call last):
</pre><tt>File &quot;/Applications/relax-1.3.1/relax-1.3/relax&quot;, line 408,  
</tt><tt>in
</tt><pre style="margin: 0em;">
&lt;module&gt;
  Relax()
</pre><tt>File &quot;/Applications/relax-1.3.1/relax-1.3/relax&quot;, line 125,  
</tt><tt>in
</tt><pre style="margin: 0em;">
__init__
  self.interpreter.run(self.script_file)
</pre><tt>File &quot;/Applications/relax-1.3.1/relax-1.3/prompt/ 
</tt><tt>interpreter.py&quot;,
</tt><pre style="margin: 0em;">
line 270, in
run
</pre><tt>  return run_script(intro=self.__intro_string,  
</tt><tt>local=self.local,
</tt><pre style="margin: 0em;">
script_file=script_file, quit=self.__quit_flag,
show_script=self.__show_script,
raise_relax_error=self.__raise_relax_er
</pre><tt>File &quot;/Applications/relax-1.3.1/relax-1.3/prompt/ 
</tt><tt>interpreter.py&quot;,
</tt><pre style="margin: 0em;">
line 531, in
run_script
  return console.interact(intro, local, script_file, quit,
show_script=show_script, raise_relax_error=raise_relax_error)
</pre><tt>File &quot;/Applications/relax-1.3.1/relax-1.3/prompt/ 
</tt><tt>interpreter.py&quot;,
</tt><pre style="margin: 0em;">
line 427, in
interact_script
  execfile(script_file, local)
File &quot;full_analysis.py&quot;, line 673, in &lt;module&gt;
  Main(self.relax)
File &quot;full_analysis.py&quot;, line 284, in __init__
  grid_search(inc=inc)
</pre><tt>File &quot;/Applications/relax-1.3.1/relax-1.3/prompt/ 
</tt><tt>minimisation.py&quot;,
</tt><pre style="margin: 0em;">
line 152,
in grid_search
  minimise.grid_search(lower=lower, upper=upper, inc=inc,
constraints=constraints, verbosity=verbosity)
File
</pre><tt>&quot;/Applications/relax-1.3.1/relax-1.3/generic_fns/ 
</tt><tt>minimise.py&quot;, line
</tt><pre style="margin: 0em;">
185,
in grid_search
  grid_search(lower=lower, upper=upper, inc=inc,
constraints=constraints,
verbosity=verbosity)
File

</pre><tt>&quot;/Applications/relax-1.3.1/relax-1.3/specific_fns/ 
</tt><tt>model_free/mf_minimise.py&quot;,
</tt><pre style="margin: 0em;">
line 479, in grid_search
  self.minimise(min_algor='grid', lower=lower, upper=upper,
inc=inc,
</pre><tt>constraints=constraints, verbosity=verbosity,  
</tt><tt>sim_index=sim_index)
</tt><pre style="margin: 0em;">
File

</pre><tt>&quot;/Applications/relax-1.3.1/relax-1.3/specific_fns/ 
</tt><tt>model_free/mf_minimise.py&quot;,
</tt><pre style="margin: 0em;">
line 987, in minimise
  results = generic_minimise(func=self.mf.func,
dfunc=self.mf.dfunc,
d2func=self.mf.d2func, args=(), x0=param_vector,
min_algor=min_algor,
min_options=min_options, func_tol=func_tol, g
l, maxiter=max_iterations, A=A, b=b, full_output=1,
print_flag=verbosity)
File

</pre><tt>&quot;/Library/Frameworks/Python.framework/Versions/2.5/lib/ 
</tt><tt>python2.5/site-packages/minfx/generic.py&quot;,
</tt><pre style="margin: 0em;">
line 319, in generic_minimise
</pre><tt>  xk, fk, k = grid(func=func, args=args,  
</tt><tt>grid_ops=min_options,
</tt><pre style="margin: 0em;">
A=A, b=b, l=l,
u=u, c=c, print_flag=print_flag)
File

</pre><tt>&quot;/Library/Frameworks/Python.framework/Versions/2.5/lib/ 
</tt><tt>python2.5/site-packages/minfx/grid.py&quot;,
</tt><pre style="margin: 0em;">
line 129, in grid
  f = func(*(params,)+args)
</pre><tt>File &quot;/Applications/relax-1.3.1/relax-1.3/maths_fns/mf.py&quot;,  
</tt><tt>line
</tt><pre style="margin: 0em;">
506, in
func_diff
  self.diff_data.calc_di(data, self.diff_data)
File

</pre><tt>&quot;/Applications/relax-1.3.1/relax-1.3/maths_fns/ 
</tt><tt>direction_cosine.py&quot;,
</tt><pre style="margin: 0em;">
line
64, in calc_spheroid_di
  data.dz = dot(data.xh_unit_vector, diff_data.dpar)
TypeError: unsupported operand type(s) for *: 'NoneType' and
'float'




Quoting Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt;:




</pre><blockquote class="blockquote"><pre style="margin: 0em;">
Hi,

</pre><tt>For the bug you mention, I've fixed this and the changes  
</tt><tt>are in
</tt><pre style="margin: 0em;">
the
</pre><tt>repository.  There were a few other issues to do with  
</tt><tt>subsequent
</tt><pre style="margin: 0em;">
LaTeX
</pre><tt>compilation and these have been fixed too.  You can see  
</tt><tt>the new
</tt><pre style="margin: 0em;">
sample
script at:  <a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/1.3/sample_scripts/">http://svn.gna.org/viewcvs/relax/1.3/sample_scripts/</a>

Regards,

Edward


On Tue, Oct 21, 2008 at 3:44 AM, Tyler Reddy &lt;TREDDY@xxxxxx&gt;
wrote:



</pre><blockquote class="blockquote"><pre style="margin: 0em;">
Hello,

</pre><tt>1) I changed that line and I'm still having a bit of  
</tt><tt>trouble (see
</tt><pre style="margin: 0em;">
output
below).

2) The errors that I'm using are described as 'the standard
error for each
</pre><tt>parameter... [which] is an easy calculation from the  
</tt><tt>covariance
</tt><pre style="margin: 0em;">
matrix.'
</pre><tt>Paraphrasing from the author there--I'm guessing this  
</tt><tt>isn't the
</tt><pre style="margin: 0em;">
optimal
input?

</pre><tt>3) I'm not sure it's explicitly stated in the manual, but  
</tt><tt>I'm
</tt><pre style="margin: 0em;">
proceeding on
the
</pre><tt>assumption that you run the multi-model script first and  
</tt><tt>then
</tt><pre style="margin: 0em;">
modsel to
decide
</pre><tt>on the right model for each given residue. A few weeks  
</tt><tt>ago I was
</tt><pre style="margin: 0em;">
experimenting
</pre><tt>with this and if I didn't leave the global correlation  
</tt><tt>time as
</tt><pre style="margin: 0em;">
fixed the
</pre><tt>computation seemed to take a VERY long time (unclear if  
</tt><tt>it was
</tt><pre style="margin: 0em;">
ever going to
finish).

</pre><tt>Also, as a side note, since my peptide is actually in a  
</tt><tt>micelle,
</tt><pre style="margin: 0em;">
I'm not
sure if
there's anything extra I can do for diffusion tensor and
correlation time
type
</pre><tt>stuff. I know some programs (i.e. the Mathematica  
</tt><tt>notebooks by
</tt><pre style="margin: 0em;">
Dr.
Spyracopoulos) read in PDB files for diffusion tensor
calculations, but I
</pre><tt>suspect it's a bit of a mess when the system is more  
</tt><tt>complicated
</tt><pre style="margin: 0em;">
than the
structure in the PDB file would suggest.

Output:

Latex()

----------------------------------------------------------------------------------------------------

relax&gt; pipe.create(pipe_name='results', pipe_type='mf')

relax&gt; results.read(file='results', dir=None)
Opening the file 'results' for reading.
Traceback (most recent call last):
</pre><tt>File &quot;/Applications/relax-1.3.1/relax-1.3/relax&quot;, line  
</tt><tt>408, in
</tt><pre style="margin: 0em;">
&lt;module&gt;
Relax()
</pre><tt>File &quot;/Applications/relax-1.3.1/relax-1.3/relax&quot;, line  
</tt><tt>125, in
</tt><pre style="margin: 0em;">
__init__
self.interpreter.run(self.script_file)
File
</pre><tt>&quot;/Applications/relax-1.3.1/relax-1.3/prompt/ 
</tt><tt>interpreter.py&quot;,
</tt><pre style="margin: 0em;">
line 270,
in
run
</pre><tt>return run_script(intro=self.__intro_string,  
</tt><tt>local=self.local,
</tt><pre style="margin: 0em;">
script_file=script_file, quit=self.__quit_flag,
show_script=self.__show_script,
raise_relax_error=self.__raise_relax_error)
File
</pre><tt>&quot;/Applications/relax-1.3.1/relax-1.3/prompt/ 
</tt><tt>interpreter.py&quot;,
</tt><pre style="margin: 0em;">
line 531,
in
run_script
return console.interact(intro, local, script_file, quit,
</pre><tt>show_script=show_script,  
</tt><tt>raise_relax_error=raise_relax_error)
</tt><pre style="margin: 0em;">
File
</pre><tt>&quot;/Applications/relax-1.3.1/relax-1.3/prompt/ 
</tt><tt>interpreter.py&quot;,
</tt><pre style="margin: 0em;">
line 427,
in
interact_script
execfile(script_file, local)
File &quot;latex_mf_table.py&quot;, line 220, in &lt;module&gt;
Latex()
File &quot;latex_mf_table.py&quot;, line 68, in __init__
self.table_body()
File &quot;latex_mf_table.py&quot;, line 186, in table_body
</pre><tt>self.file.write(&quot;%9.3f &amp; %9.3f &amp; &quot; % (spin.s2,  
</tt><tt>spin.s2_err))
</tt><tt>AttributeError: 'SpinContainer' object has no attribute  
</tt><tt>'s2_err'
</tt><pre style="margin: 0em;">



Quoting Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt;:




</pre><blockquote class="blockquote"><pre style="margin: 0em;">
Hi,

</pre><tt>Using a new system test, I found one more bug in the  
</tt><tt>script.
</tt><pre style="margin: 0em;">
This has
</pre><tt>been fixed in the 1.3 repository line.  If you haven't  
</tt><tt>used
</tt><pre style="margin: 0em;">
subversion
</pre><tt>to check out (and update) the 1.3 line, then you can see  
</tt><tt>the
</tt><pre style="margin: 0em;">
changes
required in my commit at:

<a  rel="nofollow" href="https://mail.gna.org/public/relax-commits/2008-10/msg00402.html">https://mail.gna.org/public/relax-commits/2008-10/msg00402.html</a>

</pre><tt>Just change the line starting with '-' to the line  
</tt><tt>starting with
</tt><pre style="margin: 0em;">
'+'.
</pre><tt>Oh, it may take a few minutes for the link to be  
</tt><tt>generated.
</tt><pre style="margin: 0em;">

Regards,

Edward


On Mon, Oct 20, 2008 at 10:12 PM, Edward d'Auvergne
&lt;edward@xxxxxxxxxxxxx&gt; wrote:



</pre><blockquote class="blockquote"><pre style="margin: 0em;">
Hi,

</pre><tt>That's a bug in the sample script.  Try adding a ':'  
</tt><tt>character
</tt><pre style="margin: 0em;">
to the
</pre><tt>end of line 171 in your script.  I've fixed this in the  
</tt><tt>1.3
</tt><pre style="margin: 0em;">
repository
</pre><tt>line and will try to add a system test to the program  
</tt><tt>to try to
</tt><pre style="margin: 0em;">
catch
any bugs before you do ;)

Cheers,

Edward



</pre><tt>On Mon, Oct 20, 2008 at 9:27 PM, Tyler Reddy &lt;TREDDY@xxxxxx 
</tt><tt>&gt;
</tt><pre style="margin: 0em;">
wrote:



</pre><blockquote class="blockquote"><tt>I've been trying to use the latex python script on the  
</tt><tt>aic
</tt><pre style="margin: 0em;">
results file.
I get
</pre><tt>the syntax error below. Not sure if I'm doing  
</tt><tt>something wrong
</tt><pre style="margin: 0em;">
or if
there's
just a small problem with that line of code:

Latex()


----------------------------------------------------------------------------------------------------
Traceback (most recent call last):
</pre><tt>File &quot;/Applications/relax-1.3.1/relax-1.3/relax&quot;, line  
</tt><tt>408,
</tt><pre style="margin: 0em;">
in
&lt;module&gt;
Relax()
</pre><tt>File &quot;/Applications/relax-1.3.1/relax-1.3/relax&quot;, line  
</tt><tt>125,
</tt><pre style="margin: 0em;">
in
__init__
self.interpreter.run(self.script_file)
File
</pre><tt>&quot;/Applications/relax-1.3.1/relax-1.3/prompt/ 
</tt><tt>interpreter.py&quot;,
</tt><pre style="margin: 0em;">
line 270, in
run
return run_script(intro=self.__intro_string,
local=self.local,
script_file=script_file, quit=self.__quit_flag,
show_script=self.__show_script,
raise_relax_error=self.__raise_relax_error)
File
</pre><tt>&quot;/Applications/relax-1.3.1/relax-1.3/prompt/ 
</tt><tt>interpreter.py&quot;,
</tt><pre style="margin: 0em;">
line 531, in
run_script
return console.interact(intro, local, script_file, quit,
</pre><tt>show_script=show_script,  
</tt><tt>raise_relax_error=raise_relax_error)
</tt><pre style="margin: 0em;">
File
</pre><tt>&quot;/Applications/relax-1.3.1/relax-1.3/prompt/ 
</tt><tt>interpreter.py&quot;,
</tt><pre style="margin: 0em;">
line 427, in
interact_script
execfile(script_file, local)
File &quot;latex_mf_table.py&quot;, line 171
for spin, spin_id in spin_loop(return_id=True)
SyntaxError: invalid syntax










Quoting Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt;:




</pre><blockquote class="blockquote"><tt>On Mon, Oct 20, 2008 at 5:12 PM, Tyler Reddy &lt;TREDDY@xxxxxx 
</tt><tt>&gt;
</tt><pre style="margin: 0em;">
wrote:



</pre><blockquote class="blockquote"><pre style="margin: 0em;">
Hello,

1)

I have been using the multi model and model selection
scripts in
relax 1.3.2 but
</pre><tt>I have trouble displaying the output in a tabulated  
</tt><tt>format.
</tt><pre style="margin: 0em;">
Both
scripts seem
</pre><tt>to produce an xml document with various headers that  
</tt><tt>isn't
</tt><pre style="margin: 0em;">
easy to
read. It
</pre><tt>looks like format='columnar' isn't supported. I  
</tt><tt>wonder what
</tt><pre style="margin: 0em;">
other
options I
</pre><tt>have to look at this data? For some reason, I don't  
</tt><tt>recall
</tt><pre style="margin: 0em;">
having
this problem
</pre><tt>on a Linux machine a few weeks ago (using a Mac OS  
</tt><tt>10.4 at
</tt><pre style="margin: 0em;">
the
moment), but
</pre><tt>anyways it would be nice to get readable model-free  
</tt><tt>output.
</tt><pre style="margin: 0em;">



</pre></blockquote><tt>The results file is now in XML format and the more  
</tt><tt>readable
</tt><pre style="margin: 0em;">
'columnar'
</pre><tt>format has been removed from the 1.3 line.  With the  
</tt><tt>change
</tt><pre style="margin: 0em;">
to the new
XML results file all the contents of a data pipe,
irrespective of what
</pre><tt>that data is, is packaged.  So you can put data into  
</tt><tt>this
</tt><pre style="margin: 0em;">
pipe
</pre><tt>yourself and it will save that information (for  
</tt><tt>advanced
</tt><pre style="margin: 0em;">
users,
</pre><tt>complex python objects will need the to_xml() and  
</tt><tt>from_xml()
</tt><pre style="margin: 0em;">
methods
</pre><tt>to package and unpackage the data).  The reason for  
</tt><tt>removing
</tt><pre style="margin: 0em;">
the
</pre><tt>'columnar' format was that it was considered too  
</tt><tt>inflexible
</tt><pre style="margin: 0em;">
for the
</pre><tt>changes occuring in the 1.3 line, it contained  
</tt><tt>duplicate
</tt><pre style="margin: 0em;">
information,
</pre><tt>had numerical precision issues, and there were  
</tt><tt>alternatives
</tt><pre style="margin: 0em;">
to easily
view this data.  You can use the value.display() and
value.write()
</pre><tt>user functions to display and save the results for a  
</tt><tt>single
</tt><pre style="margin: 0em;">
parameter.
</pre><tt>If needed, these user functions could be extended to  
</tt><tt>accept
</tt><pre style="margin: 0em;">
a list of
parameters.

</pre><tt>Then there is the sample_scripts/latex_mf_table.py  
</tt><tt>sample
</tt><pre style="margin: 0em;">
script which
</pre><tt>will generate a LaTeX table of the model-free  
</tt><tt>results.  This
</tt><pre style="margin: 0em;">
file can
</pre><tt>be copied and modified - this requires learning a bit  
</tt><tt>of
</tt><pre style="margin: 0em;">
python - to
</pre><tt>format and display the results any way you wish.  And  
</tt><tt>finally
</tt><pre style="margin: 0em;">
if
anyone really wants to, and has the skills to, they can
modify this
</pre><tt>sample script to recreate a version of the 'columnar'  
</tt><tt>format.
</tt><pre style="margin: 0em;">
This
</pre><tt>could be added to the relax sample scripts, and if  
</tt><tt>their
</tt><pre style="margin: 0em;">
skills are
</pre><tt>very advanced, then much code from the 1.2 relax  
</tt><tt>versions can
</tt><pre style="margin: 0em;">
be
recycled.





</pre><blockquote class="blockquote"><pre style="margin: 0em;">
2)

The error input for the relaxation rate parameters is
currently my
non-linear
</pre><tt>curve fitting standard deviation. I'm not sure if  
</tt><tt>that means
</tt><pre style="margin: 0em;">
subsequent
</pre><tt>analysis will be completely incorrect? I guess it  
</tt><tt>depends on
</tt><pre style="margin: 0em;">
the
comparison of
</pre><tt>magnitude between these errors and the type of error  
</tt><tt>that is
</tt><pre style="margin: 0em;">
propagated by
</pre><tt>relax during its own curve-fitting (which I am  
</tt><tt>unable to do
</tt><pre style="margin: 0em;">
at the
moment).



</pre></blockquote><tt>I'm guessing this is the sum of squared error value  
</tt><tt>(SSE)
</tt><pre style="margin: 0em;">
from the
</pre><tt>fit.  Or is it a regression coefficient or a chi- 
</tt><tt>squared
</tt><pre style="margin: 0em;">
value?  Did
the fitting use a technique such as bootstrapping or
jackknife
simulations to estimate the parameter errors via
propagation?  Or did
</pre><tt>it use the covariance matrix?  If it is the SSE, chi- 
</tt><tt>squared,
</tt><pre style="margin: 0em;">
or
</pre><tt>regression coefficient then that value cannot be  
</tt><tt>used.  This
</tt><pre style="margin: 0em;">
will be
</pre><tt>wildly wrong and cause massive failure in model  
</tt><tt>selection.
</tt><pre style="margin: 0em;">
It will
</pre><tt>cause big problems in optimisation, and if you are  
</tt><tt>unlucky
</tt><pre style="margin: 0em;">
and have
spaces with long, curved valleys or flat curved spaces
leading to the
</pre><tt>minimum (that's model-free models m5 to m8 in most  
</tt><tt>cases and
</tt><pre style="margin: 0em;">
not so
</pre><tt>uncommon in model m4) then the minimum can be  
</tt><tt>squeezed and
</tt><pre style="margin: 0em;">
appear in
</pre><tt>another completely different region in the space.  It  
</tt><tt>will
</tt><pre style="margin: 0em;">
likely also
</pre><tt>cause model failure issues, which although removed by  
</tt><tt>the
</tt><pre style="margin: 0em;">
eliminate()
</pre><tt>user function, might discount the best solution.  I  
</tt><tt>would
</tt><pre style="margin: 0em;">
guess that
all of this will have a measurable affect on the final
diffusion
</pre><tt>tensor as well and, if so, this will cause the  
</tt><tt>appearance of
</tt><pre style="margin: 0em;">
artificial motions (my 2007 JBNMR paper at
</pre><tt><a  rel="nofollow" href="http://dx.doi.org/10.1039/b702202f">http://dx.doi.org/10.1039/b702202f</a> explains these  
</tt><tt>problems
</tt><pre style="margin: 0em;">
in detail).
If one is not careful with the errors and they are
significantly off,
</pre><tt>then the result is that the results may not be real.   
</tt><tt>So I
</tt><pre style="margin: 0em;">
would only
use the error if it comes from an established error
propagation
</pre><tt>technique (i.e. from data to parameter error  
</tt><tt>propagation).
</tt><pre style="margin: 0em;">

Regards,

Edward




</pre></blockquote><pre style="margin: 0em;">
_______________________________________________
relax (<a  rel="nofollow" href="http://nmr-relax.com">http://nmr-relax.com</a>)

This is the relax-users mailing list
relax-users@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="https://mail.gna.org/listinfo/relax-users">https://mail.gna.org/listinfo/relax-users</a>




</pre></blockquote></blockquote></blockquote><pre style="margin: 0em;">


</pre></blockquote></blockquote><pre style="margin: 0em;">
_______________________________________________
relax (<a  rel="nofollow" href="http://nmr-relax.com">http://nmr-relax.com</a>)

This is the relax-users mailing list
relax-users@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="https://mail.gna.org/listinfo/relax-users">https://mail.gna.org/listinfo/relax-users</a>




</pre></blockquote><pre style="margin: 0em;">
_______________________________________________
relax (<a  rel="nofollow" href="http://nmr-relax.com">http://nmr-relax.com</a>)

This is the relax-users mailing list
relax-users@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="https://mail.gna.org/listinfo/relax-users">https://mail.gna.org/listinfo/relax-users</a>



</pre></blockquote><pre style="margin: 0em;">
_______________________________________________
relax (<a  rel="nofollow" href="http://nmr-relax.com">http://nmr-relax.com</a>)

This is the relax-users mailing list
relax-users@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="https://mail.gna.org/listinfo/relax-users">https://mail.gna.org/listinfo/relax-users</a>



</pre></blockquote><pre style="margin: 0em;">
_______________________________________________
relax (<a  rel="nofollow" href="http://nmr-relax.com">http://nmr-relax.com</a>)

This is the relax-users mailing list
relax-users@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="https://mail.gna.org/listinfo/relax-users">https://mail.gna.org/listinfo/relax-users</a>



</pre></blockquote><pre style="margin: 0em;">


_______________________________________________
relax (<a  rel="nofollow" href="http://nmr-relax.com">http://nmr-relax.com</a>)

This is the relax-users mailing list
relax-users@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="https://mail.gna.org/listinfo/relax-users">https://mail.gna.org/listinfo/relax-users</a>



</pre></blockquote><pre style="margin: 0em;">



</pre></blockquote><pre style="margin: 0em;">


</pre></blockquote><pre style="margin: 0em;">

</pre></blockquote><pre style="margin: 0em;">




</pre></blockquote><pre style="margin: 0em;">

_______________________________________________
relax (<a  rel="nofollow" href="http://nmr-relax.com">http://nmr-relax.com</a>)

This is the relax-users mailing list
relax-users@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="https://mail.gna.org/listinfo/relax-users">https://mail.gna.org/listinfo/relax-users</a>
</pre></blockquote><pre style="margin: 0em;">



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Thu Nov 06 10:20:37 2008</div>  
</body>
</html>
