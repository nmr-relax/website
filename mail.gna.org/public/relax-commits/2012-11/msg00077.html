<!-- MHonArc v2.6.16 -->
<!--X-Subject: r18016 &#45;	/branches/frame_order_testing/generic_fns/structure/api_base.py -->
<!--X-From-R13: rqjneqNaze&#45;erynk.pbz -->
<!--X-Date: Thu, 22 Nov 2012 10:20:36 +0100 -->
<!--X-Message-Id: E1TbSxY&#45;0006yQ&#45;1R@subversion.gna.org -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>r18016 -	/branches/frame_order_testing/generic_fns/structure/api_base.py -- November 22, 2012 - 10:20</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />r18016 -	/branches/frame_order_testing/generic_fns/structure/api_base.py</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00077" class="tabs">Index by Date</a> | <a href="threads.html#00077" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00076.html">Date Prev</a>] [<a href="msg00078.html">Date Next</a>] [<a href="msg00076.html">Thread Prev</a>] [<a href="msg00078.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: relax-commits@xxxxxxx</li>
<li class="menuitem">
<em>Date</em>: Thu, 22 Nov 2012 09:20:35 -0000</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00077.html">E1TbSxY-0006yQ-1R@subversion.gna.org</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>edward</strong> on November 22, 2012 - 10:20:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Author: bugman
Date: Thu Nov 22 10:20:35 2012
New Revision: 18016

URL: <a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax?rev=18016&amp;view=rev">http://svn.gna.org/viewcvs/relax?rev=18016&amp;view=rev</a>
Log:
The structural API base pack_structs() method has been modified to add the 
absolute file path.

This will be used as a fall back mechanism for loading PDB or XYZ files from 
old state or results
files if the file cannot be found on the relative path.  This is useful for 
the PyMOL and Molmol
user functions.


Modified:
    branches/frame_order_testing/generic_fns/structure/api_base.py

Modified: branches/frame_order_testing/generic_fns/structure/api_base.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/frame_order_testing/generic_fns/structure/api_base.py?rev=18016&amp;r1=18015&amp;r2=18016&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/frame_order_testing/generic_fns/structure/api_base.py?rev=18016&amp;r1=18015&amp;r2=18016&amp;view=diff</a>
==============================================================================
--- branches/frame_order_testing/generic_fns/structure/api_base.py (original)
+++ branches/frame_order_testing/generic_fns/structure/api_base.py Thu Nov 22 
10:20:35 2012
@@ -477,7 +477,7 @@
         return len(self.structural_data[0].mol)
 
 
-    def pack_structs(self, data_matrix, orig_model_num=None, 
set_model_num=None, orig_mol_num=None, set_mol_name=None, file_name=None, 
file_path=None):
+    def pack_structs(self, data_matrix, orig_model_num=None, 
set_model_num=None, orig_mol_num=None, set_mol_name=None, file_name=None, 
file_path=None, file_path_abs=None):
         &quot;&quot;&quot;From the given structural data, expand the structural data data 
structure.
 
         @param data_matrix:         A matrix of structural objects.
@@ -490,11 +490,12 @@
         @type orig_mol_num:         list of int
         @keyword set_mol_name:      The new molecule names.
         @type set_mol_name:         list of str
-        @keyword file_name:         The name of the file from which the 
molecular data has been
-                                    extracted.
+        @keyword file_name:         The name of the file from which the 
molecular data has been extracted.
         @type file_name:            None or str
         @keyword file_path:         The full path to the file specified by 
'file_name'.
         @type file_path:            None or str
+        @keyword file_path_abs:     The absolute path to the file specified 
by 'file_name'.  This is a fallback mechanism in case results or save files 
are located somewhere other than the working directory.
+        @type file_path_abs:        None or str
         &quot;&quot;&quot;
 
         # Test the number of models.
@@ -562,6 +563,7 @@
                 model.mol[-1].mol_name = set_mol_name[j]
                 model.mol[-1].file_name = file_name
                 model.mol[-1].file_path = file_path
+                model.mol[-1].file_path_abs = file_path_abs
                 model.mol[-1].file_mol_num = orig_mol_num[j]
                 model.mol[-1].file_model = orig_model_num[i]
 



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Thu Nov 22 10:40:02 2012</div>  
</body>
</html>
