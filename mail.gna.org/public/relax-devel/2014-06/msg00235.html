<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [task #7807] Speed&#45;up of dispersion models for Clustered analysis -->
<!--X-From-R13: "Sqjneq q'Ohiretar" &#60;rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Sun, 15 Jun 2014 15:46:47 +0200 -->
<!--X-Message-Id: CAED9pY97R8HV3ZUcYoDQvZHtLu45d6JckP&#45;FyvRNXzKv0DDcjQ@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 20140606&#45;164034.sv20529.18004@gna.org -->
<!--X-Reference: 20140606&#45;203152.sv20529.82733@gna.org -->
<!--X-Reference: 20140607&#45;192042.sv20529.55008@gna.org -->
<!--X-Reference: 20140608&#45;115339.sv20529.22097@gna.org -->
<!--X-Reference: 20140608&#45;175211.sv20529.15019@gna.org -->
<!--X-Reference: 20140608&#45;182605.sv20529.57278@gna.org -->
<!--X-Reference: 20140608&#45;183428.sv20529.91269@gna.org -->
<!--X-Reference: 20140608&#45;184803.sv20529.12856@gna.org -->
<!--X-Reference: 20140608&#45;214642.sv20529.45231@gna.org -->
<!--X-Reference: 20140608&#45;224658.sv20529.82233@gna.org -->
<!--X-Reference: 20140609&#45;230256.sv20529.53904@gna.org -->
<!--X-Reference: 20140610&#45;170645.sv20529.74988@gna.org -->
<!--X-Reference: 20140611&#45;154047.sv2782.24206@gna.org -->
<!--X-Reference: 20140615&#45;083021.sv2782.41765@gna.org -->
<!--X-Reference: CA+CBx2N+6cp4MmHqY2axSN780YnAxmpGjigJz0J4az5QHGpnqQ@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [task #7807] Speed-up of dispersion models for Clustered analysis -- June 15, 2014 - 15:46</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: [task #7807] Speed-up of dispersion models for Clustered analysis</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00235" class="tabs">Index by Date</a> | <a href="threads.html#00235" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00234.html">Date Prev</a>] [<a href="msg00236.html">Date Next</a>] [<a href="msg00232.html">Thread Prev</a>] [<a href="msg00245.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Sun, 15 Jun 2014 15:46:16 +0200</li>
<li class="menuitem">
<em>Cc</em>: Edward d Auvergne &lt;NO-REPLY.INVALID-ADDRESS@xxxxxxx&gt;, &quot;relax-devel@xxxxxxx&quot; &lt;relax-devel@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113; h=mime-version:sender:in-reply-to:references:date:message-id:subject :from:to:cc:content-type:content-transfer-encoding; bh=fYDFxai7YystzOGQGf8QFqyhyP01wYx4q/7O5lqXXe0=; b=f+PV2yMSNXWVRDOCNibGyXTNukP25tJnwjBMjYJZ5qAohIWYwdrjU/6lTmahF0jcke SDuFxi+wOhlvfoT+5wwuZL1XVQKqNzBC7O1aT3aS6K6XjMkcmhIaowNGmqavYUxuuAPF fn0ubcXlr7eKF1bTlVmCrGjy6dSucRpVZAY0wYEe/F5SmXboIBrw8KIsuVeG0t5xDb4h 65Sj+o+K2IhXu1mBvn3LkJLn6QyzlQ1/EYKaMl1PpiIvn3yxoxkUudYlqu5excEZ+pfC TvBs/8t3nxJbrMqlTN1yoL0qQ3ErQlaWkdg0cAO7XYp/4K4Ez0RFPlsOUq1QHi2iSllq llvg==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00235.html">CAED9pY97R8HV3ZUcYoDQvZHtLu45d6JckP-FyvRNXzKv0DDcjQ@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;<a href="msg00069.html">20140606-164034.sv20529.18004@gna.org</a>&gt; &lt;<a href="msg00071.html">20140606-203152.sv20529.82733@gna.org</a>&gt; &lt;<a href="msg00072.html">20140607-192042.sv20529.55008@gna.org</a>&gt; &lt;<a href="msg00073.html">20140608-115339.sv20529.22097@gna.org</a>&gt; &lt;<a href="msg00074.html">20140608-175211.sv20529.15019@gna.org</a>&gt; &lt;<a href="msg00075.html">20140608-182605.sv20529.57278@gna.org</a>&gt; &lt;<a href="msg00076.html">20140608-183428.sv20529.91269@gna.org</a>&gt; &lt;<a href="msg00077.html">20140608-184803.sv20529.12856@gna.org</a>&gt; &lt;<a href="msg00078.html">20140608-214642.sv20529.45231@gna.org</a>&gt; &lt;<a href="msg00079.html">20140608-224658.sv20529.82233@gna.org</a>&gt; &lt;<a href="msg00082.html">20140609-230256.sv20529.53904@gna.org</a>&gt; &lt;<a href="msg00131.html">20140610-170645.sv20529.74988@gna.org</a>&gt; &lt;<a href="msg00177.html">20140611-154047.sv2782.24206@gna.org</a>&gt; &lt;<a href="msg00222.html">20140615-083021.sv2782.41765@gna.org</a>&gt; &lt;<a href="msg00228.html">CA+CBx2N+6cp4MmHqY2axSN780YnAxmpGjigJz0J4az5QHGpnqQ@mail.gmail.com</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on June 15, 2014 - 15:46:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">One more thing, for the link:

<a  rel="nofollow" href="http://www.huyng.com/posts/faster-numpy-dot-product/">http://www.huyng.com/posts/faster-numpy-dot-product/</a>

Note that this guy has not gone to the numpy mailing list.  Often
there is a hidden reason for this, and one must be always wary.  It is
likely that he hasn't used any ideas from
<a  rel="nofollow" href="http://wiki.scipy.org/PerformanceTips">http://wiki.scipy.org/PerformanceTips</a>, and is hence seeing such a
difference.  If the guy had any courage, he would be communicating on
the numpy/scipy mailing lists for how these packages can be improved.
The fact that he hasn't is a big worry.  I have seen this many times
before as I have been optimising relax over the last 10 years, and I
now only use ideas posted to official lists where there is a response
from the core developers confirming that one way is faster than
another.  There is a tonne of speeding up information on the internet
that turns out to be rubbish, or there is a better 'standard' way of
doing it.

Regards,

Edward




On 15 June 2014 14:59, Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi Ed.

At the wiki, I added some references for faster dot:
<a  rel="nofollow" href="http://wiki.nmr-relax.com/Numpy_linalg">http://wiki.nmr-relax.com/Numpy_linalg</a>

<a  rel="nofollow" href="http://www.huyng.com/posts/faster-numpy-dot-product/">http://www.huyng.com/posts/faster-numpy-dot-product/</a>

from scipy.linalg import fblas as FB
X = FB.dgemm(alpha=1., a=A, b=B, trans_b=True)


2014-06-15 10:30 GMT+02:00 Edward d Auvergne
&lt;NO-REPLY.INVALID-ADDRESS@xxxxxxx&gt;:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">

Follow-up Comment #199, task #7807 (project relax):


The following python script, to be placed in the base relax directory, and
the
corresponding log file, demonstrate the speed differences of various dot
product operations.  This is to help make the numeric dispersion models
faster.

The script tests 3 different operations:

1) Sequential dot products (a = dot(b, c); a = dot(a, d)).
2) Chained dot products (a = b.dot(c).dot(d)).
3) Using the out argument to avoid memory allocation and garbage
collection
(dot(b, c, a); dot(a, d, a)).

The timings are:

1) 3.71 s.
2) 4.05 s.
3) 1.99 s.

As option 1) is the implementation used in the relax trunk, clearly option
3
has the potential to significantly speed up the models.


(file #21021, file #21022)
    _______________________________________________________

Additional Item Attachment:

File name: dot_speed.py                   Size:2 KB
File name: dot_speed.log                  Size:0 KB


    _______________________________________________________

Reply to this item at:

  &lt;<a  rel="nofollow" href="http://gna.org/task/?7807">http://gna.org/task/?7807</a>&gt;

_______________________________________________
  Message sent via/by Gna!
  <a  rel="nofollow" href="http://gna.org/">http://gna.org/</a>

</pre></blockquote><pre style="margin: 0em;">

</pre></blockquote><pre style="margin: 0em;">


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00069" href="msg00069.html">[task #7807] Speed-up of dispersion models for Clustered analysis</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
<li><strong><a name="00071" href="msg00071.html">[task #7807] Speed-up of dispersion models for Clustered analysis</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
<li><strong><a name="00072" href="msg00072.html">[task #7807] Speed-up of dispersion models for Clustered analysis</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
<li><strong><a name="00073" href="msg00073.html">[task #7807] Speed-up of dispersion models for Clustered analysis</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
<li><strong><a name="00074" href="msg00074.html">[task #7807] Speed-up of dispersion models for Clustered analysis</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
<li><strong><a name="00075" href="msg00075.html">[task #7807] Speed-up of dispersion models for Clustered analysis</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
<li><strong><a name="00076" href="msg00076.html">[task #7807] Speed-up of dispersion models for Clustered analysis</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
<li><strong><a name="00077" href="msg00077.html">[task #7807] Speed-up of dispersion models for Clustered analysis</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
<li><strong><a name="00078" href="msg00078.html">[task #7807] Speed-up of dispersion models for Clustered analysis</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
<li><strong><a name="00079" href="msg00079.html">[task #7807] Speed-up of dispersion models for Clustered analysis</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
<li><strong><a name="00082" href="msg00082.html">[task #7807] Speed-up of dispersion models for Clustered analysis</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
<li><strong><a name="00131" href="msg00131.html">[task #7807] Speed-up of dispersion models for Clustered analysis</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
<li><strong><a name="00177" href="msg00177.html">[task #7807] Speed-up of dispersion models for Clustered analysis</a></strong>
<ul><li><em>From:</em> Edward d Auvergne</li></ul></li>
<li><strong><a name="00222" href="msg00222.html">[task #7807] Speed-up of dispersion models for Clustered analysis</a></strong>
<ul><li><em>From:</em> Edward d Auvergne</li></ul></li>
<li><strong><a name="00228" href="msg00228.html">Re: [task #7807] Speed-up of dispersion models for Clustered analysis</a></strong>
<ul><li><em>From:</em> Troels Emtekær Linnet</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Sun Jun 15 21:40:12 2014</div>  
</body>
</html>
