<!-- MHonArc v2.6.10 -->
<!--X-Subject: Re: Accounting for N1 and N3 CSA differences in RNA -->
<!--X-From-R13: "Oyrknaqne Vnafra" <ivbpurzvfgNtznvy.pbz> -->
<!--X-Date: Wed, 04 Oct 2006 16:18:12 +0200 -->
<!--X-Message-Id: 481156b20610040717u35e6ab20v16d8083f24338d76@mail.gmail.com -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: 481156b20609280917q6bc4edbapa4ca0cc3fc9636e5@mail.gmail.com -->
<!--X-Reference: 7f080ed10609280947v963a98dy126f47813a29b292@mail.gmail.com -->
<!--X-Reference: 481156b20610031057k263a23act6aa2bb6729edf9a1@mail.gmail.com -->
<!--X-Reference: 7f080ed10610032153o4571935bq138d2739f55ca3bd@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: Accounting for N1 and N3 CSA differences in RNA -- October 04, 2006 - 16:18</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: Accounting for N1 and N3 CSA differences in RNA</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00004" class="tabs">Index by Date</a> | <a href="threads.html#00004" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00003.html">Date Prev</a>] [<a href="msg00005.html">Date Next</a>] [<a href="msg00002.html">Thread Prev</a>] [<a href="msg00006.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: &quot;Edward d'Auvergne&quot; &lt;edward@xxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Wed, 4 Oct 2006 10:17:35 -0400</li>
<li class="menuitem">
<em>Cc</em>: relax-users@xxxxxxx</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00004.html">481156b20610040717u35e6ab20v16d8083f24338d76@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;481156b20609280917q6bc4edbapa4ca0cc3fc9636e5@mail.gmail.com&gt;	&lt;7f080ed10609280947v963a98dy126f47813a29b292@mail.gmail.com&gt;	&lt;<a href="msg00001.html">481156b20610031057k263a23act6aa2bb6729edf9a1@mail.gmail.com</a>&gt;	&lt;<a href="msg00002.html">7f080ed10610032153o4571935bq138d2739f55ca3bd@mail.gmail.com</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Alexandar Hansen</strong> on October 04, 2006 - 16:18:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
I think that's pretty much perfect.&nbsp; Is there any reason why you can't
leave pdb.read flexible for those who would only use 1 nucleus type.&nbsp;
That way, scripts wouldn't need to be broken.<br><br>Alex<br><br><div><span class="gmail_quote">On 10/4/06, <b class="gmail_sendername">Edward d'Auvergne</b> &lt;<a href="mailto:edward@xxxxxxxxxxxxx">edward@xxxxxxxxxxxxx
</a>&gt; wrote:</span><blockquote class="gmail_quote" style="border-left: 1px solid rgb(204, 204, 204); margin: 0pt 0pt 0pt 0.8ex; padding-left: 1ex;">Unfortunately this approach for setting the heteronucleus name won't<br>
work.&nbsp;&nbsp;It is assumed in relax that the heteronucleus name will be the<br>same for each residue.&nbsp;&nbsp;That's a big mistake on my part!&nbsp;&nbsp;Back in<br>August 2004 I merged the user functions 'pdb()' and 'vectors()' into<br>the single user function 'pdb()'.&nbsp;&nbsp;This occurred at r1312 of the 
0.3<br>versions of relax (<a href="http://svn.gna.org/viewcvs/relax/0.3/?rev=1387">http://svn.gna.org/viewcvs/relax/0.3/?rev=1387</a> vs<br><a href="http://svn.gna.org/viewcvs/relax/0.3/?rev=1388">http://svn.gna.org/viewcvs/relax/0.3/?rev=1388
</a>).&nbsp;&nbsp;For proteins when<br>either the backbone NH or backbone CH relaxation data is being<br>studied, there was no need for the two user functions.&nbsp;&nbsp;This obviously<br>isn't the case when studying RNA.<br><br>I have an elegant solution which should fix this issue.&nbsp;&nbsp;I first
<br>propose to split the 'pdb()' user function back into the original two<br>user functions.&nbsp;&nbsp;However as they are related my idea is to create a<br>function class which contains both user functions.&nbsp;&nbsp;These two<br>functions could be called '
pdb.read()' and 'pdb.set_vectors()'.<br><br>The second change would be to add the two function arguments 'res_num'<br>and 'res_name' to the 'pdb.set_vectors()' user function.&nbsp;&nbsp;Then for<br>Alex's example you could use following lines in the script:
<br><br>pdb.read(name, self.alex_pdb)<br>pdb.set_vectors(name, heteronuc='N1', proton='H1', res_name='G')<br>pdb.set_vectors(name, heteronuc='N3', proton='H3', res_name='U')<br><br>These changes break script compatibility, 
i.e. a script written for<br>relax version 1.2.7 which uses the 'pdb()' user function will no<br>longer work with these changes.&nbsp;&nbsp;Therefore the changes must occur in<br>the next relax minor number - the 1.3 versions.<br><br>
What do you think?<br><br>Edward<br><br><br>On 10/4/06, Alexandar Hansen &lt;<a href="mailto:viochemist@xxxxxxxxx">viochemist@xxxxxxxxx</a>&gt; wrote:<br>&gt; Great!&nbsp;&nbsp;I'm glad the CSA should be easy.&nbsp;&nbsp;However, I realized another
<br>&gt; problem with multiple nuclei.&nbsp;&nbsp;How do we choose different PDB nuclei to form<br>&gt; the bond?&nbsp;&nbsp;Again, i was thinking something along the lines of:<br>&gt;<br>&gt; Also, will this work in full analysis?<br>&gt;<br>
&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # Load the PDB file.<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if not local_tm:<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if <a href="http://residue.name">residue.name</a> == 'G'<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; pdb(name, self.alex_pdb, heteronuc='N1', proton='H1')
<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if <a href="http://residue.name">residue.name</a> == 'U'<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; pdb(name, self.alex_pdb, heteronuc='N3', proton='H3')<br>&gt;<br>&gt;<br>&gt; self.alex_pdb is my pdb which I decided to define where I define
<br>&gt; local_tm/sphere/etc.<br>&gt;<br>&gt; Is this anywhere close to something that would work?<br>&gt;<br>&gt; Alex H.<br>&gt;<br>&gt;<br>&gt;<br>&gt;<br>&gt;<br>&gt; On 9/28/06, Edward d'Auvergne &lt; <a href="mailto:edward.dauvergne@xxxxxxxxx">
edward.dauvergne@xxxxxxxxx</a>&gt; wrote:<br>&gt; &gt; Unfortunately this approach won't work.&nbsp;&nbsp;You would need to create an<br>&gt; &gt; additional loop where you loop through the residues (in the future<br>&gt; &gt; maybe data sets) and set the value on a per residue basis.&nbsp;&nbsp;You would
<br>&gt; &gt; need something like:<br>&gt; &gt;<br>&gt; &gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value.set(name, 1.01 * 1e-10, 'bond_length')<br>&gt; &gt;<br>&gt; &gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Loop over the sequence.<br>&gt; &gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for residue in 
self.relax.data.res:<br>&gt; &gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Guanium.<br>&gt; &gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if <a href="http://residue.name">residue.name</a> == 'G':<br>&gt; &gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value.set(name,- 130 * 1e-6, 'csa',<br>
&gt; &gt; res_num=residue.num, res_name=<a href="http://residue.name">residue.name</a> )<br>&gt; &gt;<br>&gt; &gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Uracil.<br>&gt; &gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if <a href="http://residue.name">residue.name</a>
 == 'U':<br>&gt; &gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value.set(name, -100 * 1e-6, 'csa',<br>&gt; &gt; res_num=residue.num, res_name= <a href="http://residue.name">residue.name</a>)<br>&gt; &gt;<br>&gt; &gt;<br>&gt; &gt; That should do the job.&nbsp;&nbsp;However a much more powerful approach would
<br>&gt; &gt; be to take this out of the hands of the user.&nbsp;&nbsp;This could be done by<br>&gt; &gt; modifying the 'value.set()' user function to set values based on the<br>&gt; &gt; residue name.&nbsp;&nbsp;Actually, I just checked the code - I implemented this
<br>&gt; &gt; feature years ago!!!&nbsp;&nbsp;That simplifies things, all you need to do is<br>&gt; &gt; supply the residue name to the 'value.set()' function and it will set<br>&gt; &gt; the values based on the name.&nbsp;&nbsp;The solution is therefore extremely
<br>&gt; &gt; basic:<br>&gt; &gt;<br>&gt; &gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Set the bond length.<br>&gt; &gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value.set(name, 1.01 * 1e-10, 'bond_length')<br>&gt; &gt;<br>&gt; &gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Set the NH CSA values of the four bases.
<br>&gt; &gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value.set(name, - 130 * 1e-6, 'csa', res_name='G')<br>&gt; &gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value.set(name, - 100 * 1e-6, 'csa', res_name='U')<br>&gt; &gt;<br>&gt; &gt; That's it!<br>&gt; &gt;<br>&gt; &gt; Edward
<br>&gt; &gt;<br>&gt; &gt;<br>&gt; &gt;<br>&gt; &gt; On 9/29/06, Alexandar Hansen &lt; <a href="mailto:viochemist@xxxxxxxxx">viochemist@xxxxxxxxx</a>&gt; wrote:<br>&gt; &gt; &gt; As I was running the full_analysis.py for an RNA data set of U and G
<br>&gt; data, I<br>&gt; &gt; &gt; realized that it's trying to use the same CSA for each residue.&nbsp;&nbsp;Looking<br>&gt; &gt; &gt; into the script, it would seem to be relatively easy to code the &quot;set<br>&gt; the<br>&gt; &gt; &gt; bond length and CSA values&quot; section in such a way that it chooses a
<br>&gt; &gt; &gt; different CSA value for the given residue types. Currently it's simply:<br>&gt; &gt; &gt;<br>&gt; &gt; &gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; value.set(name, 1.02 * 1e-10, 'bond_length')<br>&gt; &gt; &gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; value.set
(name, -170 * 1e-6, 'csa')<br>&gt; &gt; &gt;<br>&gt; &gt; &gt; to modify this for RNA, could one edit it to say:<br>&gt; &gt; &gt;<br>&gt; &gt; &gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; value.set(name, 1.01 * 1e-10, 'bond_length')<br>&gt; &gt; &gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if residuename = G
<br>&gt; &gt; &gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; value.set(name, -130 * 1e-6, 'csa')<br>&gt; &gt; &gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; else if residuename = U<br>&gt; &gt; &gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; value.set(name, -100 * 1e-6, 'csa')<br>&gt; &gt; &gt;<br>&gt; &gt; &gt; Am I overtrivializing this, or should it be pretty straight forward?
<br>&gt; &gt; &gt;<br>&gt; &gt; &gt;<br>&gt; &gt; &gt; Alex Hansen<br>&gt; &gt; &gt;<br>&gt; &gt; &gt;<br>&gt; &gt; &gt; _______________________________________________<br>&gt; &gt; &gt; relax ( <a href="http://nmr-relax.com">
http://nmr-relax.com</a>)<br>&gt; &gt; &gt;<br>&gt; &gt; &gt; This is the relax-users mailing list<br>&gt; &gt; &gt; <a href="mailto:relax-users@xxxxxxx">relax-users@xxxxxxx</a><br>&gt; &gt; &gt;<br>&gt; &gt; &gt; To unsubscribe from this list, get a password
<br>&gt; &gt; &gt; reminder, or change your subscription options,<br>&gt; &gt; &gt; visit the list information page at<br>&gt; &gt; &gt; <a href="/mail.gna.org/listinfo/relax-users">https://mail.gna.org/listinfo/relax-users
</a><br>&gt; &gt; &gt;<br>&gt; &gt; &gt;<br>&gt; &gt; &gt;<br>&gt; &gt;<br>&gt;<br>&gt;<br>&gt;</blockquote></div><br clear="all"><br>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00006" href="msg00006.html">Re: Accounting for N1 and N3 CSA differences in RNA</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00001" href="msg00001.html">Re: Accounting for N1 and N3 CSA differences in RNA</a></strong>
<ul><li><em>From:</em> Alexandar Hansen</li></ul></li>
<li><strong><a name="00002" href="msg00002.html">Re: Accounting for N1 and N3 CSA differences in RNA</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Wed Oct 04 17:40:12 2006</div>  
</body>
</html>
