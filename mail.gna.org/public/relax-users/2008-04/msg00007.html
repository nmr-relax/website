<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: AIC from ModeFree data -->
<!--X-From-R13: "Sqjneq q'Ohiretar" <rqjneq.qnhiretarNtznvy.pbz> -->
<!--X-Date: Thu, 03 Apr 2008 15:24:41 +0200 -->
<!--X-Message-Id: 7f080ed10804030624h12ec62e9s263d15550b1d7141@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 47F2ABF1.4030700@ulaval.ca -->
<!--X-Reference: 7f080ed10804020046g7c9e038r37ec8181c1b9ccd8@mail.gmail.com -->
<!--X-Reference: 47F3BE35.70904@ulaval.ca -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: AIC from ModeFree data -- April 03, 2008 - 15:24</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: AIC from ModeFree data</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00007" class="tabs">Index by Date</a> | <a href="threads.html#00007" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00006.html">Date Prev</a>] [<a href="msg00008.html">Date Next</a>] [<a href="msg00005.html">Thread Prev</a>] [<a href="msg00008.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: &quot;Sébastien Morin&quot; &lt;sebastien.morin.1@xxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Thu, 3 Apr 2008 15:24:24 +0200</li>
<li class="menuitem">
<em>Cc</em>: relax-users@xxxxxxx</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00007.html">7f080ed10804030624h12ec62e9s263d15550b1d7141@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;47F2ABF1.4030700@xxxxxxxxx&gt;	&lt;7f080ed10804020046g7c9e038r37ec8181c1b9ccd8@xxxxxxxxxxxxxx&gt;	&lt;47F3BE35.70904@xxxxxxxxx&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on April 03, 2008 - 15:24:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">On Wed, Apr 2, 2008 at 7:11 PM, Sébastien Morin
&lt;sebastien.morin.1@xxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">

 Hi,

 I tried to use the palmer.extract() function, with no real success...
</pre></blockquote><pre style="margin: 0em;">

I have to admit that my Modelfree star format parser is not of very
high quality.  It woks if you use the palmer.py sample script, but
obviously not in this situation.  Nothing that's not fixable though.
I'll start a new thread about this in the relax-devel mailing list.


</pre><blockquote class="blockquote"><pre style="margin: 0em;"> I had several error message during my first tries and manage to get rid of
them with a script like :

 =======================================

 runs = ['m1', 'm2', 'm3', 'm4', 'm5']
 diff_tensor_Phi = 22.4
 diff_tensor_Theta = -3.49
 diff_tensor_Dratio = 1.22
 diff_tensor_tm = 1.242e-08

 for name in runs:
     run.create(name, 'mf')
     sequence.read(name, 'sequence')
     diffusion_tensor.init(name, (diff_tensor_tm, diff_tensor_Dratio,
diff_tensor_Theta, diff_tensor_Phi), param_types=2, spheroid_type='prolate',
fixed=1)
     palmer.extract(run=name)

 name = 'aic'
 run.create(name, 'mf')
 sequence.read(name, 'sequence')
 relax_data.read(name, 'R1', '800', 799.812 * 1e6,
'800_R1.dat_plus_sequence')
 relax_data.read(name, 'R2', '800', 799.812 * 1e6,
'800_R2.dat_plus_sequence')
 relax_data.read(name, 'R1', '600', 599.739 * 1e6,
'600_R1.dat_plus_sequence')
 relax_data.read(name, 'R2', '600', 599.739 * 1e6,
'600_R2.dat_plus_sequence')
 relax_data.read(name, 'NOE', '600', 599.739 * 1e6,
'600_NOE.dat_plus_sequence')
 relax_data.read(name, 'R1', '500', 499.827 * 1e6,
'500_R1.dat_plus_sequence')
 relax_data.read(name, 'R2', '500', 499.827 * 1e6,
'500_R2.dat_plus_sequence')
 relax_data.read(name, 'NOE', '500', 499.827 * 1e6,
'500_NOE.dat_plus_sequence')
 diffusion_tensor.init(name, (diff_tensor_tm, diff_tensor_Dratio,
diff_tensor_Theta, diff_tensor_Phi), param_types=2, spheroid_type='prolate',
fixed=1)
 model_selection(method='AIC', modsel_run=name)
 results.write(run=name, file='results', force=1)

 =======================================
</pre></blockquote><pre style="margin: 0em;">

It is a little strange that you need to read in the sequence and the
relaxation data for the 'aic' run.  If you look at the palmer.py
sample script in the exec_stage_2() function, you'll see that none of
this is done.  The following should also work:


=======================================

runs = ['m1', 'm2', 'm3', 'm4', 'm5']
diff_tensor_Phi = 22.4
diff_tensor_Theta = -3.49
diff_tensor_Dratio = 1.22
diff_tensor_tm = 1.242e-08

for name in runs:
    run.create(name, 'mf')
    sequence.read(name, 'sequence')
    diffusion_tensor.init(name, (diff_tensor_tm, diff_tensor_Dratio,
diff_tensor_Theta, diff_tensor_Phi), param_types=2,
spheroid_type='prolate', fixed=1)
    The rest of the setup user functions ....
    palmer.extract(run=name)

name = 'aic'
run.create(name, 'mf')
model_selection(method='AIC', modsel_run=name)
results.write(run=name, file='results', force=1)

=======================================


</pre><blockquote class="blockquote"><pre style="margin: 0em;"> However, there is one problem still present : no model is chosen during AIC
selection... Here is what I get after the command
&quot;model_selection(method='AIC', modsel_run=name)&quot; :

 =======================================

 ...

 Instance 261.

 Run                  Num_params_(k)       Num_data_sets_(n)    Chi2
Criterion

 The model from the run None has been selected.

 ...

 =======================================
</pre></blockquote><pre style="margin: 0em;">

Is this for all spins?  Maybe running relax with the --debug flag will
give more information.


</pre><blockquote class="blockquote"><pre style="margin: 0em;"> It seems the mfout (which are all located in their respective folder : m1,
m2 , m3, m4 and m5) are not loaded properly...

 Do you have any clue about this issue ?
</pre></blockquote><pre style="margin: 0em;">

Sorry, I don't have any idea.  This will require investigation of the
relax data storage object to see what data is loaded from the mfout
file, and quite likely a little bit of coding, if you wish to do so.
Please refer to my post to relax-devel which will come soon.


</pre><blockquote class="blockquote"><pre style="margin: 0em;"> Also, is there a way of extracting information from a mfout with relax
without inputing any sequence, diffusion tensor, or data..? I thought it
would be possible to use palmer.extract() in a short script like this :

 =======================================

 runs = ['m1', 'm2', 'm3', 'm4', 'm5']

 for name in runs:
     palmer.extract(run=name)

 name = 'aic'
 run.create(name, 'mf')
 model_selection(method='AIC', modsel_run=name)
 results.write(run=name, file='results', force=1)

 =======================================


 Do you see anything I do wrong ?
</pre></blockquote><pre style="margin: 0em;">

There is nothing wrong, the mfout file parser doesn't yet extract this
information.  I'll continue this in my post to relax-devel.

Cheers,

Edward


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00008" href="msg00008.html">Re: AIC from ModeFree data</a></strong>
<ul><li><em>From:</em> Sébastien Morin</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00001" href="msg00001.html">AIC from ModeFree data</a></strong>
<ul><li><em>From:</em> Sébastien Morin</li></ul></li>
<li><strong><a name="00002" href="msg00002.html">Re: AIC from ModeFree data</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00005" href="msg00005.html">Re: AIC from ModeFree data</a></strong>
<ul><li><em>From:</em> Sébastien Morin</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Thu Apr 03 16:02:35 2008</div>  
</body>
</html>
