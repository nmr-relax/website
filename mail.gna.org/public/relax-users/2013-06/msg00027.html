<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: A tip for converting the result directories xmgrace files to eps	and png -->
<!--X-From-R13: "Sqjneq q'Ohiretar" <rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Thu, 13 Jun 2013 18:04:22 +0200 -->
<!--X-Message-Id: CAED9pY&#45;_7siXukR6gQpn_2QxRhSCADmWTBuK3TVR=Z+aVoSE_Q@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: CA+CBx2MS4Hra+0Z_uRUXJfzbPoE_MYm9AcOK8OQtf7GrwHBLnQ@mail.gmail.com -->
<!--X-Reference: CAED9pY_JTPU7xzd3SMZFujvpjHYtQ9G7q33&#45;woTDqJ3uJHp7=g@mail.gmail.com -->
<!--X-Reference: CA+CBx2NwLp4Y++dkKuubdS5zMYr5G4_F4TX3mjKKGsMnCYQPBQ@mail.gmail.com -->
<!--X-Reference: CAED9pY9J=sf5a7pBrzyhnN39wuAHPyB+FeuSNp1X9FUa_pTZUA@mail.gmail.com -->
<!--X-Reference: CA+CBx2NN1oeigL7T6n+qz31+H6UZ8YD1dUB0F=4dNd2Zm=pb0A@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: A tip for converting the result directories xmgrace files to eps	and png -- June 13, 2013 - 18:04</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: A tip for converting the result directories xmgrace files to eps	and png</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00027" class="tabs">Index by Date</a> | <a href="threads.html#00027" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00026.html">Date Prev</a>] [<a href="msg00028.html">Date Next</a>] [<a href="msg00025.html">Thread Prev</a>] [<a href="msg00029.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Thu, 13 Jun 2013 18:03:42 +0200</li>
<li class="menuitem">
<em>Cc</em>: &quot;relax-users@xxxxxxx&quot; &lt;relax-users@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;	h=mime-version:sender:in-reply-to:references:date	:x-google-sender-auth:message-id:subject:from:to:cc:content-type	:content-transfer-encoding;	bh=hXKOVugVX5EdlIUJ89N4K/ktIjBl7cGr4Z+0nwFf1Sk=;	b=Y3Hl1kvdJSvb+uCFgjU1MrFRlGv4ZIDWyJTD2OuNq/tjZ5eCxDprFzw5EtGthzi8YG	geHsig39XHd6c/K/0QglaDP+gDKJUP3PkI0LnucRaKGbsW/D5/Tqcd/Ih3JOwBQobWcJ	JonC0qhOdY8OwkwANkA3lDvee23Xh9I53a2RqBZjFRwwaCz6XMgbZCYXtcCn/Eufw8R3	ewkwiZtZ67GPl+Fpc5dt8twhzonDxFXMKO85cjKOsjpZFR7fcCcswUFrNcau/Iw2HvZ6	Ah8j27vpySQV1GbZp48elhD+Sv6Z8YFjOfTQLsCWDvKpqsJUNloJyh56ilJYh2wOiS3p	/wcQ==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00027.html">CAED9pY-_7siXukR6gQpn_2QxRhSCADmWTBuK3TVR=Z+aVoSE_Q@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;CA+CBx2MS4Hra+0Z_uRUXJfzbPoE_MYm9AcOK8OQtf7GrwHBLnQ@xxxxxxxxxxxxxx&gt;	&lt;CAED9pY_JTPU7xzd3SMZFujvpjHYtQ9G7q33-woTDqJ3uJHp7=g@xxxxxxxxxxxxxx&gt;	&lt;CA+CBx2NwLp4Y++dkKuubdS5zMYr5G4_F4TX3mjKKGsMnCYQPBQ@xxxxxxxxxxxxxx&gt;	&lt;CAED9pY9J=sf5a7pBrzyhnN39wuAHPyB+FeuSNp1X9FUa_pTZUA@xxxxxxxxxxxxxx&gt;	&lt;CA+CBx2NN1oeigL7T6n+qz31+H6UZ8YD1dUB0F=4dNd2Zm=pb0A@xxxxxxxxxxxxxx&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on June 13, 2013 - 18:04:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Great!  For the 64-bit issue, if you look in the file for that test
you might be able to see what I am doing with this.  The file to look
at and the line to go to is given at the end of the traceback message
which you attached to the bug report (<a  rel="nofollow" href="https://gna.org/bugs/?20821">https://gna.org/bugs/?20821</a>).
For a hint, the problem has something to do with precision variability
between different setups.  As for adding new models, this is pretty
straight forward when following the tutorial at:

<a  rel="nofollow" href="http://thread.gmane.org/gmane.science.nmr.relax.devel/3907">http://thread.gmane.org/gmane.science.nmr.relax.devel/3907</a>

</pre><blockquote class="blockquote"><pre style="margin: 0em;">From my commit messages, you can probably see that it only take me a
</pre></blockquote><pre style="margin: 0em;">few hours per dispersion model.  Note that I have now copied this
tutorial, as well as the docstring for the relax_disp.select_model
user function and created a basic initial relaxation dispersion
chapter in the relax manual.  If you know LaTeX then, when adding the
model, it would good to add the equations and reference via a bibtex
entry to that chapter.  If you have Scons and LaTeX installed on your
system, the manual can be built by typing:

$ scons user_manual_pdf

Cheers,

Edward



On 13 June 2013 17:25, Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Sure why not :-)

And I am soon in the mood for the Tollinger/Kay equation.
And solve the 64 bit problem in windows.

Can you guide me in the direction where I should look for the 64 bit
problem?

Best
troels

Troels Emtekær Linnet


2013/6/13 Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt;
</pre><blockquote class="blockquote"><pre style="margin: 0em;">

Would you like to try to give this a go?

Regards,

Edward


On 13 June 2013 16:35, Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">I am happy that you think it is great. :-)

As soon there is a file type, which can fast be opened by a image
viewer, I
am happy.

It works for PNG here, and it is very probably a compilation issue.
I have PNG as a possibility to print in my xmgrace menu.

I found the commands here:
<a  rel="nofollow" href="http://ringo.ams.sunysb.edu/index.php/Xmgrace">http://ringo.ams.sunysb.edu/index.php/Xmgrace</a>

This is for EPS and PNG, but I havent found options for JPEG yet.

I would say the &quot;more the merrier&quot;.
It take's time to create scripts, but no time to delete.

Best
Troels




Troels Emtekær Linnet


2013/6/13 Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt;
</pre><blockquote class="blockquote"><pre style="margin: 0em;">

That's a great trick!  My knowledge of Grace is not that extensive.
You know what would be even better - if the
relax_disp.plot_disp_curves user function created this script and
dropped it into the directory with the Grace files!  I've now shifted
the code into the
specific_analyses.relax_disp.disp_data.plot_disp_curves() function.
Such a script could easily be created at the end of this function -
best by calling a special function in lib.software.grace.

What would be good would be to generate one script for the PNG files,
maybe called 'grace_to_png.sh' just to be more informative to the user
that this is for conversion and that it is a shell script, one for EPS
files called possibly 'grace_to_eps.sh', and a third called
'eps_to_pdf.sh'.  The plot_disp_curves() function can even make them
executable for the user.  I suggest that the *.tmp files be removed by
the script at the end.

The only problem is that I tried this and received error messages and
broken files:

Unknown device: DEVICE &quot;PNG&quot; FONT ANTIALIASING ON
Unknown device: DEVICE &quot;PNG&quot; OP &quot;compression:9&quot;
File modifications are disabled in safe mode: PRINT
File modifications are disabled in safe mode: PRINT
disp_:70@N agr

The EPS files are created successfully.  I'm not sure why the PNGs
failed, maybe it's not compiled in.  JPEG and SVG are present in the
print options through the GUI though, so maybe scripts for these
formats can be very easily created as well.  A simple loop over 'PNG',
'EPS', 'SVG', and 'JPEG' could create separate scripts for each format
and make them executable, and then at the end the 'eps_to_pdf.sh' can
be created.  The script generation could be documented in the user
function docstring.  What do you think?

Cheers,

Edward


On 13 June 2013 14:31, Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi.

I got tired of opening each xmgrace file to see the plot.
I found that to export to png, you need to:

Add this to the end of the xmgrace file

#Print out to
@PRINT TO &quot;/home/you/output.png&quot;
@HARDCOPY DEVICE &quot;PNG&quot;
@DEVICE &quot;PNG&quot; FONT ANTIALIASING on
# Make white background transparent
#@DEVICE &quot;PNG&quot; OP &quot;transparent:on&quot;
@DEVICE &quot;PNG&quot; OP &quot;compression:9&quot;
@PRINT

Then issue an &quot;HARDCOPY&quot; with xmgrace
</pre><blockquote class="blockquote"><pre style="margin: 0em;">xmgrace -hardcopy xmgracefile.agr
</pre></blockquote><pre style="margin: 0em;">


Script to make both png and eps for a folder with xmgrace files

Write in: xmgrace_png
and put in your bin folder

#!/bin/bash

for gracefile in *.agr; do
filename=$(basename &quot;$gracefile&quot;)
extension=&quot;${filename##*.}&quot;
filename=&quot;${filename%.*}&quot;

TMPPNG=${filename}_png.tmp
cat $gracefile &gt; $TMPPNG
echo &quot;#Print out to&quot; &gt;&gt; $TMPPNG
echo '@PRINT TO &quot;'&quot;${PWD}/${filename}.png&quot;'&quot;' &gt;&gt; $TMPPNG
echo '@HARDCOPY DEVICE &quot;PNG&quot;' &gt;&gt; $TMPPNG
echo '@DEVICE &quot;PNG&quot; FONT ANTIALIASING on' &gt;&gt; $TMPPNG
echo '# Make white background transparent' &gt;&gt; $TMPPNG
echo '#@DEVICE &quot;PNG&quot; OP &quot;transparent:on&quot;' &gt;&gt; $TMPPNG
echo '@DEVICE &quot;PNG&quot; OP &quot;compression:9&quot;' &gt;&gt; $TMPPNG
echo '@PRINT' &gt;&gt; $TMPPNG
xmgrace -hardcopy $TMPPNG

TMPEPS=${filename}_eps.tmp
cat $gracefile &gt; $TMPEPS
echo &quot;#Print out to&quot; &gt;&gt; $TMPEPS
echo '@PRINT TO &quot;'&quot;${PWD}/${filename}.eps&quot;'&quot;' &gt;&gt; $TMPEPS
echo '@HARDCOPY DEVICE &quot;EPS&quot;' &gt;&gt; $TMPEPS
echo '@DEVICE &quot;EPS&quot; OP &quot;level2&quot;' &gt;&gt; $TMPEPS
echo '@PRINT' &gt;&gt; $TMPEPS
xmgrace -hardcopy $TMPEPS

echo &quot;$filename $extension&quot;
#eps2png -resolution 200 $TMPEPS
#epstopdf $TMPEPS
done

Then just make &quot;chmod +x xmgrace_png
and in the folder, issue an:

xmgrace_png

sit back and relax

If you want to convert eps to pdf

bash ;
for epsfile in *.eps; epstopdf $epsfile; echo &quot;Making pdf: $epsfile&quot;;
done

Troels Emtekær Linnet

_______________________________________________
relax (<a  rel="nofollow" href="http://www.nmr-relax.com">http://www.nmr-relax.com</a>)

This is the relax-users mailing list
relax-users@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="https://mail.gna.org/listinfo/relax-users">https://mail.gna.org/listinfo/relax-users</a>
</pre></blockquote></blockquote><pre style="margin: 0em;">


</pre></blockquote></blockquote><pre style="margin: 0em;">


</pre></blockquote><pre style="margin: 0em;">


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00029" href="msg00029.html">Re: A tip for converting the result directories xmgrace files to eps	and png</a></strong>
<ul><li><em>From:</em> Troels Emtekær Linnet</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00021" href="msg00021.html">A tip for converting the result directories xmgrace files to eps and	png</a></strong>
<ul><li><em>From:</em> Troels Emtekær Linnet</li></ul></li>
<li><strong><a name="00022" href="msg00022.html">Re: A tip for converting the result directories xmgrace files to eps	and png</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00023" href="msg00023.html">Re: A tip for converting the result directories xmgrace files to eps	and png</a></strong>
<ul><li><em>From:</em> Troels Emtekær Linnet</li></ul></li>
<li><strong><a name="00024" href="msg00024.html">Re: A tip for converting the result directories xmgrace files to eps	and png</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00025" href="msg00025.html">Re: A tip for converting the result directories xmgrace files to eps	and png</a></strong>
<ul><li><em>From:</em> Troels Emtekær Linnet</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Fri Jun 14 08:40:06 2013</div>  
</body>
</html>
