<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: problems with final_data_extraction.py -->
<!--X-From-R13: [vpunry Pvrev <zvpunry.ovrevNaze&#45;erynk.pbz> -->
<!--X-Date: Fri, 27 May 2011 03:51:25 +0200 -->
<!--X-Message-Id: 4DDF0373.9040505@nmr&#45;relax.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: A3A8C8CF61A4874A8920E0513086BC1206F67758DC@NIHMLBX06.nih.gov -->
<!--X-Reference: BANLkTin6JRGHLx&#45;z0kuuRUCfjkjA47TFCA@mail.gmail.com -->
<!--X-Reference: A3A8C8CF61A4874A8920E0513086BC1206F67758EF@NIHMLBX06.nih.gov -->
<!--X-Reference: A3A8C8CF61A4874A8920E0513086BC1206F67758F2@NIHMLBX06.nih.gov -->
<!--X-Reference: BANLkTik7Ca&#45;Q2Cc7NkKA=jgk4Gq9=JcGUw@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: problems with final_data_extraction.py -- May 27, 2011 - 03:51</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: problems with final_data_extraction.py</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00013" class="tabs">Index by Date</a> | <a href="threads.html#00013" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00012.html">Date Prev</a>] [<a href="msg00014.html">Date Next</a>] [<a href="msg00012.html">Thread Prev</a>] [<a href="msg00017.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Fri, 27 May 2011 11:50:43 +1000</li>
<li class="menuitem">
<em>Cc</em>: &quot;relax-users@xxxxxxx&quot; &lt;relax-users@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00013.html">4DDF0373.9040505@nmr-relax.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;A3A8C8CF61A4874A8920E0513086BC1206F67758DC@xxxxxxxxxxxxxxxxx&gt;	&lt;BANLkTin6JRGHLx-z0kuuRUCfjkjA47TFCA@xxxxxxxxxxxxxx&gt;	&lt;A3A8C8CF61A4874A8920E0513086BC1206F67758EF@xxxxxxxxxxxxxxxxx&gt;	&lt;A3A8C8CF61A4874A8920E0513086BC1206F67758F2@xxxxxxxxxxxxxxxxx&gt;	&lt;BANLkTik7Ca-Q2Cc7NkKA=jgk4Gq9=JcGUw@xxxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>User-agent</em>: Mozilla/5.0 (X11; U; Linux x86_64; en-US;	rv:1.9.2.17) Gecko/20110424 Lightning/1.0b2 Thunderbird/3.1.10</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Michael Bieri</strong> on May 27, 2011 - 03:51:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">
Hi Lalit

</pre><tt>What kind of results do you want to extract. The script works for the 
</tt><tt>results obtained after your final run (after calculation of models I - 
</tt><tt>V). I am guessing you are trying to extract local tm data. This is why 
</tt><tt>there are no errors in the results file as well as no diffusion tensor.
</tt><pre style="margin: 0em;">

</pre><tt>Edward. I think we could manipulate the script so it detects whether MC 
</tt><tt>simulations were performed or not and errors are expected. The same for 
</tt><tt>the diffusion tensor. If local tm model was selected (e.g. in case for 
</tt><tt>small peptides), it would just skip this extraction.
</tt><pre style="margin: 0em;">

Cheers
Michael


Am 27.05.2011 01:13, schrieb Edward d'Auvergne:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">
Hi,

Commenting out the lines might fix the problem.  Could you
nevertheless copy and paste the sequence information printed out by
relax via the sequence.display() command.  The missing diffusion
tensor is interesting.  How have you used relax?  Have you used the
new protocol of my paper
<a  rel="nofollow" href="http://www.nmr-relax.com/refs.html#dAuvergneGooley08b">http://www.nmr-relax.com/refs.html#dAuvergneGooley08b</a> ?  If so, maybe
the local tm global model has been selected over the sphere,
spheroids, and ellipsoid tensors.  Can you see such a result from the
relax printouts?  Michael maybe able to better help out with these
errors.

Cheers,

Edward


On 26 May 2011 16:31, Deshmukh, Lalit (NIH/NIDDK) [F]
&lt;lalit.deshmukh@xxxxxxx&gt;  wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">
Hi,

Thanks for the reply. I've added &quot;sequence.display()&quot; and ran the script 
again. Attached is the error file.
I also tried to modify the script (albeit crudely). Here are the 
modifications:
------------------------------------------------------------------------------------------------------------------------
            # spin_no = spin_id[spin_id.index(':')+1:spin_id.index('&amp;')]
            # spin_res = spin_id[spin_id.index('&amp;')+2:spin_id.index('@')]
            spin_no = spin_id[spin_id.index(':')+1:spin_id.index('@')]
            spin_res = spin_no
            print &quot;spin_id is:  X&quot;, spin_id, &quot;X&quot;
            print &quot;spin_no is: X&quot;, spin_no, &quot;X&quot;
            self.file.write((spin_res) + &quot; &quot; + (spin_no))
-------------------------------------------------------------------------------------------------------------------------
# S2.
            if  hasattr(spin, 's2'):
                s2 = str(spin.s2)
                # s2_err = str(spin.s2_err)
                if spin.s2 == None:
                        self.file.write(&quot;&quot;)
                else:
                        # self.file.write(&quot;     &quot; + s2[0:5]+ &quot; +/- &quot; + 
s2_err[0:4])
                        self.file.write(&quot;       &quot; + s2[0:5]+ &quot; +/-  0.00&quot;)
------------------------------------------------------------------------------------------------------------------------
# Rex.
            if hasattr(spin, 'rex'):
                rex = str(spin.rex)
                # rex_err = str(spin.rex_err)
                if spin.rex == None:
                        self.file.write(&quot;&quot;)
                else:
                        # self.file.write(&quot;             &quot; + rex[0:5]+ &quot; +/- &quot; 
+ rex_err[0:4])
                        self.file.write(&quot;               &quot; + rex[0:5]+ &quot; +/- 
0.00&quot;)
--------------------------------------------------------------------------------------------------------------------------
After these modifications, the script does create new directories 
(final_results, grace, s2final_results)  and writes all the files in it. 
However, then fails with following message:
---------------------------------------------------------------------------------------------------------------------------
relax&gt;  diffusion_tensor.display()
RelaxError: No diffusion tensor data exists.
----------------------------------------------------------------------------------------------------------------------------

Thanks in advance,

Regards,
Lalit
________________________________________
From: edward.dauvergne@xxxxxxxxx [edward.dauvergne@xxxxxxxxx] On Behalf Of 
Edward d'Auvergne [edward@xxxxxxxxxxxxx]
Sent: Thursday, May 26, 2011 4:30 AM
To: Deshmukh, Lalit (NIH/NIDDK) [F]; Michael Bieri
Cc: relax-users@xxxxxxx
Subject: Re: problems with final_data_extraction.py

Dear Lalit and Michael,

Welcome to the relax mailing lists.  I've looked into this and it
appears to be a problem in the script with the nomenclature of one of
your spin systems.  Michael, would you be able to look into this?  The
problem appear to be in the script.  Lalit, it would help
significantly if you could provide some more information.  With the
current information, we can see it is a problem with spin names.
However there is not enough info to pinpoint the problem.  Would you
be able to give some more information?  For example if you execute
&quot;sequence.display()&quot; prior to line 36 in the script, this will display
the sequence which might help with the debugging.

Cheers,

Edward



---------- Forwarded message ----------
From: Deshmukh, Lalit (NIH/NIDDK) [F]&lt;lalit.deshmukh@xxxxxxx&gt;
Date: 23 May 2011 18:23
Subject: problems with final_data_extraction.py
To: &quot;relax-users@xxxxxxx&quot;&lt;relax-users@xxxxxxx&gt;


Hi,

I am having some trouble with final_data_extraction.py script.  Here
is the error.
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------
relax&gt;  results.read(file='results', dir=None)
Opening the file 'results.bz2' for reading.
Traceback (most recent call last):
  File &quot;/usr/local/bin/relax&quot;, line 381, in&lt;module&gt;
   Relax()
  File &quot;/usr/local/bin/relax&quot;, line 117, in __init__
   self.interpreter.run(self.script_file)
  File &quot;/usr/local/relax-1.3.10/prompt/interpreter.py&quot;, line 294, in run
   return run_script(intro=self.__intro_string, local=locals(),
script_file=script_file, quit=self.__quit_flag,
show_script=self.__show_script,
raise_relax_error=self.__raise_relax_error)
  File &quot;/usr/local/relax-1.3.10/prompt/interpreter.py&quot;, line 597, in 
run_script
   return console.interact(intro, local, script_file, quit,
show_script=show_script, raise_relax_error=raise_relax_error)
  File &quot;/usr/local/relax-1.3.10/prompt/interpreter.py&quot;, line 483, in
interact_script
   exec_script(script_file, local)
  File &quot;/usr/local/relax-1.3.10/prompt/interpreter.py&quot;, line 376, in 
exec_script
   runpy.run_module(module, globals)
  File &quot;/usr/lib/python2.6/runpy.py&quot;, line 140, in run_module
   fname, loader, pkg_name)
  File &quot;/usr/lib/python2.6/runpy.py&quot;, line 34, in _run_code
   exec code in run_globals
  File 
&quot;/u/deshmukhl/Capsid/T1T1p_NOE/Relax/Calc/local_tm/aic/final_data_extraction.py&quot;,
line 36, in&lt;module&gt;
   spin_no = spin_id[spin_id.index(':')+1:spin_id.index('&amp;')]
ValueError: substring not found
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Thanks in advance,

Regards,
Lalit

_______________________________________________
relax (<a  rel="nofollow" href="http://nmr-relax.com">http://nmr-relax.com</a>)

This is the relax-users mailing list
relax-users@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="https://mail.gna.org/listinfo/relax-users">https://mail.gna.org/listinfo/relax-users</a>

_______________________________________________
relax (<a  rel="nofollow" href="http://nmr-relax.com">http://nmr-relax.com</a>)

This is the relax-users mailing list
relax-users@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="https://mail.gna.org/listinfo/relax-users">https://mail.gna.org/listinfo/relax-users</a>


</pre></blockquote><pre style="margin: 0em;">

</pre></blockquote><pre style="margin: 0em;">


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00017" href="msg00017.html">Re: problems with final_data_extraction.py</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00008" href="msg00008.html">problems with final_data_extraction.py</a></strong>
<ul><li><em>From:</em> Deshmukh, Lalit (NIH/NIDDK) [F]</li></ul></li>
<li><strong><a name="00009" href="msg00009.html">Re: problems with final_data_extraction.py</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00010" href="msg00010.html">RE: problems with final_data_extraction.py</a></strong>
<ul><li><em>From:</em> Deshmukh, Lalit (NIH/NIDDK) [F]</li></ul></li>
<li><strong><a name="00011" href="msg00011.html">Re: problems with final_data_extraction.py</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Fri May 27 10:40:11 2011</div>  
</body>
</html>
