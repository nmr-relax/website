<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: Consistency tests -->
<!--X-From-R13: Eronfgvra [beva <fronfgvra.zbeva.1Nhyniny.pn> -->
<!--X-Date: Mon, 09 Jul 2007 17:57:02 +0200 -->
<!--X-Message-Id: 46925A52.4010004@ulaval.ca -->
<!--X-Content-Type: multipart/mixed -->
<!--X-Reference: 4672D803.4060009@ulaval.ca -->
<!--X-Reference: 7f080ed10706240949n1b42f06egd424e932d46db48f@mail.gmail.com -->
<!--X-Reference: 46814D2C.1020606@ulaval.ca -->
<!--X-Reference: 7f080ed10707090347m69be69b0w67fa204563dfc17b@mail.gmail.com -->
<!--X-Reference: 7f080ed10707090355x2c39cd01u4e4939dc1b40f77e@mail.gmail.com -->
<!--X-Reference: 46924763.2040703@ulaval.ca -->
<!--X-Reference: 7f080ed10707090825vbe84e84h26080e777b107cb1@mail.gmail.com -->
<!--X-Reference: 469255EB.4070600@ulaval.ca -->
<!--X-Reference: 469256DF.8010800@ulaval.ca -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: Consistency tests -- July 09, 2007 - 17:57</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: Consistency tests</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00011" class="tabs">Index by Date</a> | <a href="threads.html#00011" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00010.html">Date Prev</a>] [<a href="msg00012.html">Date Next</a>] [<a href="msg00010.html">Thread Prev</a>] [<a href="msg00012.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Edward d'Auvergne &lt;edward.dauvergne@xxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Mon, 09 Jul 2007 11:54:58 -0400</li>
<li class="menuitem">
<em>Cc</em>: relax-devel@xxxxxxx</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00011.html">46925A52.4010004@ulaval.ca</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;4672D803.4060009@xxxxxxxxx&gt;	&lt;7f080ed10706240949n1b42f06egd424e932d46db48f@xxxxxxxxxxxxxx&gt;	&lt;46814D2C.1020606@xxxxxxxxx&gt;	&lt;7f080ed10707090347m69be69b0w67fa204563dfc17b@xxxxxxxxxxxxxx&gt;	&lt;7f080ed10707090355x2c39cd01u4e4939dc1b40f77e@xxxxxxxxxxxxxx&gt;	&lt;46924763.2040703@xxxxxxxxx&gt;	&lt;7f080ed10707090825vbe84e84h26080e777b107cb1@xxxxxxxxxxxxxx&gt;	&lt;469255EB.4070600@xxxxxxxxx&gt; &lt;469256DF.8010800@xxxxxxxxx&gt;</li>
<li class="menuitem">
<em>User-agent</em>: Thunderbird 2.0.0.4 (X11/20070615)</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Sebastien Morin</strong> on July 09, 2007 - 17:57:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<table width="100%"><tr><td bgcolor="#ffffff" style="background-color: #ffffff; color: #000000; "><font color="#000000">



Hi,<br>
<br>
Here is the patch for the file 'specific_fns/consistency_tests.py'.<br>
<br>
Ciao !<br>
<br>
<br>
<br>
S&eacute;bastien<br>
<br>
<br>
<br>
<br>
Sebastien Morin wrote:
<blockquote cite="" type="cite">
  
Hi<br>
  <br>
Here the patch for the file 'maths_fns/consistency.py'<br>
  <br>
  <br>
S&eacute;b :)<br>
  <br>
  <br>
  <br>
Sebastien Morin wrote:
  <blockquote cite="" type="cite">
    <pre wrap="">Hi again !

Here is again the first patch for the file 'prompt/consistency_tests.py'.

I modified the header for the copyrights.

Also, the former patches were not copied-pasted, but attached using
Thunderbird after their creation using a command like 'svn diff &gt; patch'
under Linux. When I send those kinds of files as attachment, I usually
see them as text in the e-mail, but also as an attachment that can be
save. Tell me if it is okay and if it is still a problem, I'll put them
on my lab's website...

Cheers


S&eacute;b :)



Edward d'Auvergne wrote:
  </pre>
    <blockquote type="cite">
      <pre wrap="">Hi,

Just add some text such as 'Copyright (C) 2007 Sebastien Morin
&lt;sebastien.morin.1 at ulaval.ca&gt;' underneath the already existent
copyright text.  The can be changed later, for example I can give you
a ???@nmr-relax.com email address which is an alias for any other
email address (once voted in as a relax developer).  Could you add
this and then resend the patches?  Ta.  If they are attached rather
than cut and paste that would be much easier for applying the patches
(as email wraps lines).  Also, maybe responding to your original posts
will allow the patches to be more easily tracked in the mailing list
<a rel="nofollow" moz-do-not-send="true" class="moz-txt-link-freetext"
 href="/mail.gna.org/public/relax-devel/">https://mail.gna.org/public/relax-devel/</a>.

Cheers,

Edward


On 7/9/07, Sebastien Morin <a rel="nofollow" moz-do-not-send="true"
 class="moz-txt-link-rfc2396E" href="mailto:sebastien.morin.1@xxxxxxxxx">&lt;sebastien.morin.1@xxxxxxxxx&gt;</a> wrote:
    </pre>
      <blockquote type="cite">
        <pre wrap="">Hi !

I'm about to create the patches to merge the consistency tests code into
the 1.2 branch.

However, I have one question. How do I treat the copyrights ? Do I leave
the original author from which I copied the code and then modified it or
do I had my name to the code headers..?

Thanks !


S&eacute;bastien  :)




Edward d'Auvergne wrote:
      </pre>
        <blockquote type="cite">
          <pre wrap="">Oh, I've committed your patch at

        </pre>
        </blockquote>
        <pre wrap=""><a rel="nofollow" moz-do-not-send="true"
 class="moz-txt-link-freetext"
 href="http://maple.rsvs.ulaval.ca/mediawiki/index.php/Patch_consistency_tests_2007-06-26">http://maple.rsvs.ulaval.ca/mediawiki/index.php/Patch_consistency_tests_2007-06-26</a>

      </pre>
        <blockquote type="cite">
          <pre wrap="">as revision r3324, applying it to the 1.2 branch.  I've carefully
checked the code and none of the changes are detrimental or could
affect the stability of the stable 1.2 relax codebase.  Note however
that the code in the branch will not run as the consistency_test.py
files are still identical copies of the jw_mapping.py files.

Cheers,

Edward


On 7/9/07, Edward d'Auvergne <a rel="nofollow" moz-do-not-send="true"
 class="moz-txt-link-rfc2396E" href="mailto:edward.dauvergne@xxxxxxxxx">&lt;edward.dauvergne@xxxxxxxxx&gt;</a> wrote:
        </pre>
          <blockquote type="cite">
            <pre wrap="">Hi,

I've now created two branches within the relax repository for you to
play with.  The first is a copy of the 1.2 line and is located at
svn.gna.org/svn/relax/branches/consistency_tests_1.2/.  The second is
a copy of the 1.3 line and is located at
svn.gna.org/svn/relax/branches/consistency_tests_1.3/.  I've
          </pre>
          </blockquote>
        </blockquote>
        <pre wrap="">initially
      </pre>
        <blockquote type="cite">
          <blockquote type="cite">
            <pre wrap="">used 'svn cp' to create the 5 consistency_tests.py files as described
in <a rel="nofollow" moz-do-not-send="true" class="moz-txt-link-freetext"
 href="/mail.gna.org/public/relax-devel/2007-07/msg00001.html">https://mail.gna.org/public/relax-devel/2007-07/msg00001.html</a>
(Message-id:
<a rel="nofollow" moz-do-not-send="true" class="moz-txt-link-rfc2396E"
 href="mailto:7f080ed10707090251ve1c4a8fl7f8618843e5c9459@xxxxxxxxxxxxxx">&lt;7f080ed10707090251ve1c4a8fl7f8618843e5c9459@xxxxxxxxxxxxxx&gt;</a>).
 Would you be able to create patches for these files (in the 1.2 line
first, no need to worry about the 1.3 line yet), and then post the
individual patches as text file attachments to the mailing list?
Thanks.  I will then be able to commit these patches individually,
checking them in fine detail.

Things to note in creating the patches from the code at
<a rel="nofollow" moz-do-not-send="true" class="moz-txt-link-freetext"
 href="http://maple.rsvs.ulaval.ca/mediawiki/index.php/Relax_development">http://maple.rsvs.ulaval.ca/mediawiki/index.php/Relax_development</a>
include the copyright preservation, a number of integers in
'maths_fns/consistency_tests.py' which should be floating point
numbers (just add '.0' to the end of the number), the addition of
Grace plots as an output in the 'sample_scripts/consistency_tests.py'
script to be able to create a picture similar to that on your relax
development site, maybe only allowing 'Tc' and 'tc' in the
return_data_name() function and not 'TC', and 'degrees' instead of
'degree' in the return_units() function.

One bug includes:

             setattr(self.relax.data.res[self.run][index], 'csa',
float(value[0]))
             setattr(self.relax.data.res[self.run][index], 'r',
float(value[1]))
+            setattr(self.relax.data.res[self.run][index],
'orientation', float(value[1]))
+            setattr(self.relax.data.res[self.run][index], 'tc',
float(value[1]))

value[1] has been used twice.  I have a feeling there is another bug
somewhere where an index has been repeated a few times when it should
be different indices, but I can't find it at the moment.  The
individual patches should help.  Finally, I have a feeling that there
is unused code which can be deleted as it is a relic from the copy of
the J(w) mapping code and is not needed.  For the 1.3 line code I
would recommend that identical functions are shifted into files such
as 'specific_fns/base_class.py', but for the 1.2 line code I would
prefer the duplication as this means that the current stable code
          </pre>
          </blockquote>
        </blockquote>
        <pre wrap="">base
      </pre>
        <blockquote type="cite">
          <blockquote type="cite">
            <pre wrap="">remains stable.

Cheers,

Edward



On 6/26/07, Sebastien Morin <a rel="nofollow" moz-do-not-send="true"
 class="moz-txt-link-rfc2396E" href="mailto:sebastien.morin.1@xxxxxxxxx">&lt;sebastien.morin.1@xxxxxxxxx&gt;</a> wrote:
          </pre>
            <blockquote type="cite">
              <pre wrap="">Hi,

I started working on implementing the consistency tests last week
            </pre>
            </blockquote>
            <pre wrap="">before
          </pre>
            <blockquote type="cite">
              <pre wrap="">the last post was made and, hence, I worked on repository line 1.2
(revision 3303).

I implemented the consistency tests as a new type of run ('ct')
            </pre>
            </blockquote>
            <pre wrap="">similar
          </pre>
            <blockquote type="cite">
              <pre wrap="">to the one for Jw mapping.

The calculations are made for J(0), F_eta and F_R2 separately
            </pre>
            </blockquote>
          </blockquote>
        </blockquote>
        <pre wrap="">for each
      </pre>
        <blockquote type="cite">
          <blockquote type="cite">
            <blockquote type="cite">
              <pre wrap="">magnetic field (one at a time). The output results file is
            </pre>
            </blockquote>
          </blockquote>
        </blockquote>
        <pre wrap="">similar to
      </pre>
        <blockquote type="cite">
          <blockquote type="cite">
            <blockquote type="cite">
              <pre wrap="">the one for Jw mapping. The user then needs to plot them and
            </pre>
            </blockquote>
          </blockquote>
        </blockquote>
        <pre wrap="">look for
      </pre>
        <blockquote type="cite">
          <blockquote type="cite">
            <blockquote type="cite">
              <pre wrap="">consistency with its own criteria (calculation correlation
coefficients,  mean ratios and standard deviations, etc).

Please look at the followinr URL for a listing of the
            </pre>
            </blockquote>
          </blockquote>
        </blockquote>
        <pre wrap="">modifications to
      </pre>
        <blockquote type="cite">
          <blockquote type="cite">
            <blockquote type="cite">
              <pre wrap="">old files and also necessary new files.

<a rel="nofollow" moz-do-not-send="true" class="moz-txt-link-freetext"
 href="http://maple.rsvs.ulaval.ca/mediawiki/index.php/Relax_development">http://maple.rsvs.ulaval.ca/mediawiki/index.php/Relax_development</a>

The file 'sample_scripts/consistency_tests.py' should be useful to
understand how the new procedure works.

Even if this was done on repository line 1.2, I think it is
            </pre>
            </blockquote>
          </blockquote>
        </blockquote>
        <pre wrap="">quite fine
      </pre>
        <blockquote type="cite">
          <blockquote type="cite">
            <blockquote type="cite">
              <pre wrap="">since nothing was deleted but only things added (maybe too much,
            </pre>
            </blockquote>
          </blockquote>
        </blockquote>
        <pre wrap="">as I
      </pre>
        <blockquote type="cite">
          <blockquote type="cite">
            <blockquote type="cite">
              <pre wrap="">reproduced the Jw mapping approach, maybe too much as I added
            </pre>
            </blockquote>
          </blockquote>
        </blockquote>
        <pre wrap="">lines in
      </pre>
        <blockquote type="cite">
          <blockquote type="cite">
            <blockquote type="cite">
              <pre wrap="">the codes for grace, molmol, etc, maybe too much also since some
            </pre>
            </blockquote>
            <pre wrap="">code is
          </pre>
            <blockquote type="cite">
              <pre wrap="">duplicated from the Jw mapping code). The test-suite still works
perfectly and, so, I think it could be fine to add the tests to the
            </pre>
            </blockquote>
            <pre wrap="">1.2
          </pre>
            <blockquote type="cite">
              <pre wrap="">line as well... However, if necessary, I could implement the
            </pre>
            </blockquote>
            <pre wrap="">consistency
          </pre>
            <blockquote type="cite">
              <pre wrap="">testing procedure on line 1.3, following your comments as I am
            </pre>
            </blockquote>
            <pre wrap="">quite new
          </pre>
            <blockquote type="cite">
              <pre wrap="">to Python and maybe made things somehow not perfectly...

Please tell me what you think about this.

Cheers,


S&eacute;bastien  :)



Edward d'Auvergne wrote:
            </pre>
              <blockquote type="cite">
                <pre wrap="">Hi,

I have previously talked about data set consistency.  For example
              </pre>
              </blockquote>
            </blockquote>
            <pre wrap="">see
          </pre>
            <blockquote type="cite">
              <blockquote type="cite">
                <pre wrap="">the post at
              </pre>
              </blockquote>
            </blockquote>
            <pre wrap=""><a rel="nofollow" moz-do-not-send="true"
 class="moz-txt-link-freetext"
 href="/mail.gna.org/public/relax-users/2007-06/msg00001.html">https://mail.gna.org/public/relax-users/2007-06/msg00001.html</a>
          </pre>
            <blockquote type="cite">
              <blockquote type="cite">
                <pre wrap="">in which a few reasons for inconsistencies have been
              </pre>
              </blockquote>
            </blockquote>
          </blockquote>
        </blockquote>
        <pre wrap="">explained.  I
      </pre>
        <blockquote type="cite">
          <blockquote type="cite">
            <blockquote type="cite">
              <blockquote type="cite">
                <pre wrap="">have, from experience, noticed that small changes in protein
concentration can change the collected relaxation rates
              </pre>
              </blockquote>
            </blockquote>
            <pre wrap="">significantly
          </pre>
            <blockquote type="cite">
              <blockquote type="cite">
                <pre wrap="">- most likely because of packing interactions.  All samples
              </pre>
              </blockquote>
            </blockquote>
          </blockquote>
        </blockquote>
        <pre wrap="">should
      </pre>
        <blockquote type="cite">
          <blockquote type="cite">
            <blockquote type="cite">
              <blockquote type="cite">
                <pre wrap="">essentially be identical in all respects for the relaxation
              </pre>
              </blockquote>
            </blockquote>
          </blockquote>
        </blockquote>
        <pre wrap="">rates to
      </pre>
        <blockquote type="cite">
          <blockquote type="cite">
            <blockquote type="cite">
              <blockquote type="cite">
                <pre wrap="">be compared.  And the temperate should always be fine tuned
              </pre>
              </blockquote>
            </blockquote>
          </blockquote>
        </blockquote>
        <pre wrap="">between
      </pre>
        <blockquote type="cite">
          <blockquote type="cite">
            <blockquote type="cite">
              <blockquote type="cite">
                <pre wrap="">experiments and spectrometers using methanol (and always checked
              </pre>
              </blockquote>
            </blockquote>
            <pre wrap="">later
          </pre>
            <blockquote type="cite">
              <blockquote type="cite">
                <pre wrap="">on if there is a large time between collecting the same
              </pre>
              </blockquote>
            </blockquote>
          </blockquote>
        </blockquote>
        <pre wrap="">experiment).
      </pre>
        <blockquote type="cite">
          <blockquote type="cite">
            <blockquote type="cite">
              <blockquote type="cite">
                <pre wrap="">Therefore these tests would be quite useful.  Data consistency is
essential for the model-free results to be correct (as well as
              </pre>
              </blockquote>
            </blockquote>
            <pre wrap="">reduced
          </pre>
            <blockquote type="cite">
              <blockquote type="cite">
                <pre wrap="">spectral density mapping, SRLS, etc.) as this affects both the
optimisation and model selection and can result in artificial
              </pre>
              </blockquote>
            </blockquote>
            <pre wrap="">motions
          </pre>
            <blockquote type="cite">
              <blockquote type="cite">
                <pre wrap="">appearing.  However I don't know how these test would
              </pre>
              </blockquote>
            </blockquote>
          </blockquote>
        </blockquote>
        <pre wrap="">currently fit
      </pre>
        <blockquote type="cite">
          <blockquote type="cite">
            <blockquote type="cite">
              <blockquote type="cite">
                <pre wrap="">within relax.  Maybe a new type of analysis should be created for
              </pre>
              </blockquote>
            </blockquote>
            <pre wrap="">this
          </pre>
            <blockquote type="cite">
              <blockquote type="cite">
                <pre wrap="">(see the pipe.create() user function in the 1.3 line or the
run.create() user function in the 1.2 line).  These ideas
              </pre>
              </blockquote>
            </blockquote>
          </blockquote>
        </blockquote>
        <pre wrap="">should all
      </pre>
        <blockquote type="cite">
          <blockquote type="cite">
            <blockquote type="cite">
              <blockquote type="cite">
                <pre wrap="">go into the 1.3 line (via a branch) as the 1.2 line is stable
              </pre>
              </blockquote>
            </blockquote>
          </blockquote>
        </blockquote>
        <pre wrap="">and no
      </pre>
        <blockquote type="cite">
          <blockquote type="cite">
            <blockquote type="cite">
              <blockquote type="cite">
                <pre wrap="">new major features will be added to this code.  What are the
              </pre>
              </blockquote>
            </blockquote>
            <pre wrap="">ideas you
          </pre>
            <blockquote type="cite">
              <blockquote type="cite">
                <pre wrap="">have been playing with?

Cheers,

Edward


On 6/15/07, Sebastien Morin <a rel="nofollow" moz-do-not-send="true"
 class="moz-txt-link-rfc2396E" href="mailto:sebastien.morin.1@xxxxxxxxx">&lt;sebastien.morin.1@xxxxxxxxx&gt;</a> wrote:
              </pre>
                <blockquote type="cite">
                  <pre wrap="">Hi everyone

During the last months, I was astonished to realize that some
                </pre>
                </blockquote>
              </blockquote>
            </blockquote>
          </blockquote>
        </blockquote>
        <pre wrap="">spin
      </pre>
        <blockquote type="cite">
          <blockquote type="cite">
            <blockquote type="cite">
              <blockquote type="cite">
                <blockquote type="cite">
                  <pre wrap="">relaxation data I had acquired at different fields were not
                </pre>
                </blockquote>
              </blockquote>
            </blockquote>
            <pre wrap="">consistent
          </pre>
            <blockquote type="cite">
              <blockquote type="cite">
                <blockquote type="cite">
                  <pre wrap="">between each other. The way I realized that was by seeing
                </pre>
                </blockquote>
              </blockquote>
            </blockquote>
            <pre wrap="">discrepancy
          </pre>
            <blockquote type="cite">
              <blockquote type="cite">
                <blockquote type="cite">
                  <pre wrap="">between J(0) values calculated with those different datasets.

I looked a little bit in the litterature and found some
                </pre>
                </blockquote>
              </blockquote>
            </blockquote>
          </blockquote>
        </blockquote>
        <pre wrap="">interesting
      </pre>
        <blockquote type="cite">
          <blockquote type="cite">
            <blockquote type="cite">
              <blockquote type="cite">
                <blockquote type="cite">
                  <pre wrap="">consistency tests in a paper by Fushman (Fushman et al., JACS,
                </pre>
                </blockquote>
              </blockquote>
            </blockquote>
            <pre wrap="">1998,
          </pre>
            <blockquote type="cite">
              <blockquote type="cite">
                <blockquote type="cite">
                  <pre wrap="">120:10947-10952).

This paper present 2 consistency tests to compare datasets from
different magnetic fields / samples / time / etc.

I think it would be interesting to implement those simple tests
                </pre>
                </blockquote>
              </blockquote>
            </blockquote>
            <pre wrap="">in relax
          </pre>
            <blockquote type="cite">
              <blockquote type="cite">
                <blockquote type="cite">
                  <pre wrap="">so the user can, before trying to fit their data, know the
                </pre>
                </blockquote>
              </blockquote>
            </blockquote>
            <pre wrap="">quality of
          </pre>
            <blockquote type="cite">
              <blockquote type="cite">
                <blockquote type="cite">
                  <pre wrap="">those... Regrettably, very few people look at the consistency of
                </pre>
                </blockquote>
              </blockquote>
            </blockquote>
            <pre wrap="">their
          </pre>
            <blockquote type="cite">
              <blockquote type="cite">
                <blockquote type="cite">
                  <pre wrap="">datasets before analysis...

The underlying principle is the same as when looking at
                </pre>
                </blockquote>
              </blockquote>
            </blockquote>
            <pre wrap="">consistency for
          </pre>
            <blockquote type="cite">
              <blockquote type="cite">
                <blockquote type="cite">
                  <pre wrap="">J(0). Thus, I think that those two tests and a J(0) test
                </pre>
                </blockquote>
              </blockquote>
            </blockquote>
          </blockquote>
        </blockquote>
        <pre wrap="">should be
      </pre>
        <blockquote type="cite">
          <blockquote type="cite">
            <blockquote type="cite">
              <blockquote type="cite">
                <blockquote type="cite">
                  <pre wrap="">implemented altogether...

I'll try to work a bit on this. Mimicking the code for spectral
                </pre>
                </blockquote>
              </blockquote>
            </blockquote>
            <pre wrap="">density
          </pre>
            <blockquote type="cite">
              <blockquote type="cite">
                <blockquote type="cite">
                  <pre wrap="">should be a good starting point.

Am I right ?
Do you see any value in those tests ?

Cheers


S&eacute;bastien  :)


_______________________________________________
relax (<a rel="nofollow" moz-do-not-send="true" class="moz-txt-link-freetext"
 href="http://nmr-relax.com">http://nmr-relax.com</a>)

This is the relax-devel mailing list
<a rel="nofollow" moz-do-not-send="true" class="moz-txt-link-abbreviated"
 href="mailto:relax-devel@xxxxxxx">relax-devel@xxxxxxx</a>

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a rel="nofollow" moz-do-not-send="true" class="moz-txt-link-freetext"
 href="/mail.gna.org/listinfo/relax-devel">https://mail.gna.org/listinfo/relax-devel</a>

                </pre>
                </blockquote>
              </blockquote>
              <pre wrap="">--
         ______________________________________
     _______________________________________________
    |                                               |
   || Sebastien Morin                               ||
  ||| Etudiant au PhD en biochimie                  |||
 |||| Laboratoire de resonance magnetique nucleaire ||||
||||| Dr Stephane Gagne                             |||||
 |||| CREFSIP (Universite Laval, Quebec, CANADA)    ||||
  ||| 1-418-656-2131 #4530                          |||
   ||                                               ||
    |_______________________________________________|
         ______________________________________



            </pre>
            </blockquote>
          </blockquote>
        </blockquote>
        <pre wrap="">-- 
         ______________________________________
     _______________________________________________
    |                                               |
   || Sebastien Morin                               ||
  ||| Etudiant au PhD en biochimie                  |||
 |||| Laboratoire de resonance magnetique nucleaire ||||
||||| Dr Stephane Gagne                             |||||
 |||| CREFSIP (Universite Laval, Quebec, CANADA)    ||||
  ||| 1-418-656-2131 #4530                          |||
   ||                                               ||
    |_______________________________________________|
         ______________________________________



      </pre>
      </blockquote>
    </blockquote>
    <pre wrap=""><!---->
  </pre>
    <pre wrap=""><pre wrap=""><hr size="4" width="90%">
_______________________________________________
relax (<a rel="nofollow" moz-do-not-send="true" class="moz-txt-link-freetext"
 href="http://nmr-relax.com">http://nmr-relax.com</a>)

This is the relax-devel mailing list
<a rel="nofollow" moz-do-not-send="true" class="moz-txt-link-abbreviated"
 href="mailto:relax-devel@xxxxxxx">relax-devel@xxxxxxx</a>

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a rel="nofollow" moz-do-not-send="true" class="moz-txt-link-freetext"
 href="/mail.gna.org/listinfo/relax-devel">https://mail.gna.org/listinfo/relax-devel</a>
</pre></pre>
  </blockquote>
  <br>
  <pre class="moz-signature" cols="72">-- 
         ______________________________________    
     _______________________________________________
    |                                               |
   || Sebastien Morin                               ||
  ||| Etudiant au PhD en biochimie                  |||
 |||| Laboratoire de resonance magnetique nucleaire ||||
||||| Dr Stephane Gagne                             |||||
 |||| CREFSIP (Universite Laval, Quebec, CANADA)    ||||
  ||| 1-418-656-2131 #4530                          |||
   ||                                               ||
    |_______________________________________________|
         ______________________________________    
  </pre>
  <pre wrap=""><pre wrap="">
<hr size="4" width="90%">
_______________________________________________
relax (<a rel="nofollow" class="moz-txt-link-freetext" href="http://nmr-relax.com">http://nmr-relax.com</a>)

This is the relax-devel mailing list
<a rel="nofollow" class="moz-txt-link-abbreviated" href="mailto:relax-devel@xxxxxxx">relax-devel@xxxxxxx</a>

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a rel="nofollow" class="moz-txt-link-freetext" href="/mail.gna.org/listinfo/relax-devel">https://mail.gna.org/listinfo/relax-devel</a>
</pre></pre>
</blockquote>
<br>
<pre class="moz-signature" cols="72">-- 
         ______________________________________    
     _______________________________________________
    |                                               |
   || Sebastien Morin                               ||
  ||| Etudiant au PhD en biochimie                  |||
 |||| Laboratoire de resonance magnetique nucleaire ||||
||||| Dr Stephane Gagne                             |||||
 |||| CREFSIP (Universite Laval, Quebec, CANADA)    ||||
  ||| 1-418-656-2131 #4530                          |||
   ||                                               ||
    |_______________________________________________|
         ______________________________________    
</pre>


</font></td></tr></table><pre style="margin: 0em;">Index: specific_fns/consistency_tests.py
===================================================================
--- specific_fns/consistency_tests.py   (revision 3324)
+++ specific_fns/consistency_tests.py   (working copy)
@@ -1,6 +1,7 @@
 
###############################################################################
 #                                                                            
 #
 # Copyright (C) 2004-2006 Edward d'Auvergne                                  
 #
+# Copyright (C) 2007 Sebastien Morin &lt;sebastien.morin.1 at ulaval.ca&gt;        
 #
 #                                                                            
 #
 # This file is part of the program relax.                                    
 #
 #                                                                            
 #
@@ -24,24 +25,24 @@
 from string import replace
 
 from base_class import Common_functions
-from maths_fns.jw_mapping import Mapping
+from maths_fns.consistency_tests import Consistency
 
 
-class Jw_mapping(Common_functions):
+class Consistency_tests(Common_functions):
     def __init__(self, relax):
-        &quot;&quot;&quot;Class containing functions specific to reduced spectral density 
mapping.&quot;&quot;&quot;
+        &quot;&quot;&quot;Class containing functions specific to consistency testing.&quot;&quot;&quot;
 
         self.relax = relax
 
 
     def calculate(self, run=None, print_flag=1, sim_index=None):
-        &quot;&quot;&quot;Calculation of the spectral density values.&quot;&quot;&quot;
+        &quot;&quot;&quot;Calculation of the consistency functions.&quot;&quot;&quot;
 
         # Run argument.
         self.run = run
 
         # Test if the frequency has been set.
-        if not hasattr(self.relax.data, 'jw_frq') or not 
self.relax.data.jw_frq.has_key(self.run) or 
type(self.relax.data.jw_frq[self.run]) != float:
+        if not hasattr(self.relax.data, 'ct_frq') or not 
self.relax.data.ct_frq.has_key(self.run) or 
type(self.relax.data.ct_frq[self.run]) != float:
             raise RelaxError, &quot;The frequency for the run &quot; + `self.run` + &quot; 
has not been set up.&quot;
 
         # Test if the nucleus type has been set.
@@ -52,7 +53,7 @@
         if not self.relax.data.res.has_key(self.run):
             raise RelaxNoSequenceError, self.run
 
-        # Test if the CSA and bond length values have been set.
+        # Test if the CSA, bond length, angle Theta and correlation time 
values have been set.
         for i in xrange(len(self.relax.data.res[self.run])):
             # Skip unselected residues.
             if not self.relax.data.res[self.run][i].select:
@@ -66,11 +67,19 @@
             if not hasattr(self.relax.data.res[self.run][i], 'r') or 
self.relax.data.res[self.run][i].r == None:
                 raise RelaxNoValueError, &quot;bond length&quot;
 
+            # Angle Theta
+            if not hasattr(self.relax.data.res[self.run][i], 'orientation') 
or self.relax.data.res[self.run][i].orientation == None:
+                raise RelaxNoValueError, &quot;angle Theta&quot;
+
+            # Correlation time
+            if not hasattr(self.relax.data.res[self.run][i], 'tc') or 
self.relax.data.res[self.run][i].tc == None:
+                raise RelaxNoValueError, &quot;correlation time&quot;
+
         # Frequency index.
-        if self.relax.data.jw_frq[self.run] not in 
self.relax.data.frq[self.run]:
-            raise RelaxError, &quot;No relaxation data corresponding to the 
frequency &quot; + `self.relax.data.jw_frq[self.run]` + &quot; has been loaded.&quot;
+        if self.relax.data.ct_frq[self.run] not in 
self.relax.data.frq[self.run]:
+            raise RelaxError, &quot;No relaxation data corresponding to the 
frequency &quot; + `self.relax.data.ct_frq[self.run]` + &quot; has been loaded.&quot;
 
-        # Reduced spectral density mapping.
+        # Consistency testing.
         for i in xrange(len(self.relax.data.res[self.run])):
             # Reassign data structure.
             data = self.relax.data.res[self.run][i]
@@ -82,7 +91,7 @@
             # Residue specific frequency index.
             frq_index = None
             for j in xrange(data.num_frq):
-                if data.frq[j] == self.relax.data.jw_frq[self.run]:
+                if data.frq[j] == self.relax.data.ct_frq[self.run]:
                     frq_index = j
             if frq_index == None:
                 continue
@@ -120,30 +129,30 @@
                 continue
 
             # Initialise the function to calculate.
-            self.jw = Mapping(frq=self.relax.data.jw_frq[self.run], 
gx=self.relax.data.gx, gh=self.relax.data.gh, mu0=self.relax.data.mu0, 
h_bar=self.relax.data.h_bar)
+            self.ct = Consistency(frq=self.relax.data.ct_frq[self.run], 
gx=self.relax.data.gx, gh=self.relax.data.gh, mu0=self.relax.data.mu0, 
h_bar=self.relax.data.h_bar)
 
-            # Calculate the spectral density values.
-            j0, jwx, jwh = self.jw.func(r=data.r, csa=data.csa, r1=r1, 
r2=r2, noe=noe)
+            # Calculate the consistency functions.
+            j0, f_eta, f_r2 = self.ct.func(orientation=data.orientation, 
tc=data.tc, r=data.r, csa=data.csa, r1=r1, r2=r2, noe=noe)
 
-            # Reduced spectral density values.
+            # Consistency testing values.
             if sim_index == None:
                 data.j0 = j0
-                data.jwx = jwx
-                data.jwh = jwh
+                data.f_eta = f_eta
+                data.f_r2 = f_r2
 
-            # Monte Carlo simulated reduced spectral density values.
+            # Monte Carlo simulated consistency testing values.
             else:
                 # Initialise the simulation data structures.
                 self.data_init(data, sim=1)
                 if data.j0_sim == None:
                     data.j0_sim = []
-                    data.jwx_sim = []
-                    data.jwh_sim = []
+                    data.f_eta_sim = []
+                    data.f_r2_sim = []
 
                 # Reduced spectral density values.
                 data.j0_sim.append(j0)
-                data.jwx_sim.append(jwx)
-                data.jwh_sim.append(jwh)
+                data.f_eta_sim.append(f_eta)
+                data.f_r2_sim.append(f_r2)
 
 
     def data_init(self, data, sim=0):
@@ -175,11 +184,16 @@
 
         csa:  CSA value.
 
+        orientation: Angle between the 15N-1H vector and the principal axis 
of the 15N chemical
+                     shift tensor.
+
+        tc: Correlation time.
+
         j0:  Spectral density value at 0 MHz.
 
-        jwx:  Spectral density value at the frequency of the heteronucleus.
+        f_eta:  Eta test.
 
-        jwh:  Spectral density value at the frequency of the heteronucleus.
+        f_r2:  R2 test.
         &quot;&quot;&quot;
 
         # Initialise.
@@ -188,11 +202,13 @@
         # Values.
         names.append('r')
         names.append('csa')
+        names.append('orientation')
+        names.append('tc')
 
-        # Spectral density values.
+        # Consistency functions values.
         names.append('j0')
-        names.append('jwx')
-        names.append('jwh')
+        names.append('f_eta')
+        names.append('f_r2')
 
         return names
 
@@ -203,14 +219,18 @@
         ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 
         
_______________________________________________________________________________________
-        |                                       |              |             
                 |
-        | Data type                             | Object name  | Value       
                 |
-        
|_______________________________________|______________|______________________________|
-        |                                       |              |             
                 |
-        | Bond length                           | 'r'          | 1.02 * 
1e-10                 |
-        |                                       |              |             
                 |
-        | CSA                                   | 'csa'        | -170 * 1e-6 
                 |
-        
|_______________________________________|______________|______________________________|
+        |                                       |               |            
                 |
+        | Data type                             | Object name   | Value      
                 |
+        
|_______________________________________|_______________|_____________________________|
+        |                                       |               |            
                 |
+        | Bond length                           | 'r'           | 1.02 * 
1e-10                |
+        |                                       |               |            
                 |
+        | CSA                                   | 'csa'         | -170 * 
1e-6                 |
+        |                                       |               |            
                 |
+        | Angle Theta                           | 'orientation' | 15.7       
                 |
+        |                                       |               |            
                 |
+        | Correlation time                      | 'tc'          | 13 * 1e-9  
                 |
+        
|_______________________________________|_______________|_____________________________|
 
         &quot;&quot;&quot;
 
@@ -222,7 +242,15 @@
         if param == 'CSA':
             return -170 * 1e-6
 
+        # Angle Theta
+        if param == 'orientation':
+            return 15.7
 
+        # Correlation time
+        if param == 'tc':
+            return 13 * 1e-9
+
+
     def num_instances(self, run=None):
         &quot;&quot;&quot;Function for returning the number of instances.&quot;&quot;&quot;
 
@@ -246,7 +274,7 @@
 
         # Loop over residue data:
         for residue in self.relax.data.res[run]:
-    
+
             # Check for sufficient data
             if not hasattr(residue, 'relax_data'):
                 residue.select = 0
@@ -266,24 +294,28 @@
 
     def return_data_name(self, name):
         &quot;&quot;&quot;
-        Reduced spectral density mapping data type string matching patterns
+        Consistency testing data type string matching patterns
         ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 
         
____________________________________________________________________________________________
-        |                        |              |                            
                      |
-        | Data type              | Object name  | Patterns                   
                      |
-        
|________________________|______________|__________________________________________________|
-        |                        |              |                            
                      |
-        | J(0)                   | 'j0'         | '^[Jj]0$' or '[Jj]\(0\)'   
                      |
-        |                        |              |                            
                      |
-        | J(wX)                  | 'jwx'        | '^[Jj]w[Xx]$' or 
'[Jj]\(w[Xx]\)'                 |
-        |                        |              |                            
                      |
-        | J(wH)                  | 'jwh'        | '^[Jj]w[Hh]$' or 
'[Jj]\(w[Hh]\)'                 |
-        |                        |              |                            
                      |
-        | Bond length            | 'r'          | '^r$' or '[Bb]ond[ 
-_][Ll]ength'                 |
-        |                        |              |                            
                      |
-        | CSA                    | 'csa'        | '^[Cc][Ss][Aa]$'           
                      |
-        
|________________________|______________|__________________________________________________|
+        |                       |               |                            
                      |
+        | Data type             | Object name   | Patterns                   
                      |
+        
|_______________________|_______________|__________________________________________________|
+        |                       |               |                            
                      |
+        | J(0)                  | 'j0'          | '^[Jj]0$' or '[Jj]\(0\)'   
                      |
+        |                       |               |                            
                      |
+        | F_eta                 | 'f_eta'       | '^[Ff]_[Ee][Tt][Aa]$'      
                      |
+        |                       |               |                            
                      |
+        | F_R2                  | 'f_r2'        | '^[Ff]_[Rr]2$'             
                      |
+        |                       |               |                            
                      |
+        | Bond length           | 'r'           | '^r$' or '[Bb]ond[ 
-_][Ll]ength'                 |
+        |                       |               |                            
                      |
+        | CSA                   | 'csa'         | '^[Cc][Ss][Aa]$'           
                      |
+        |                       |               |                            
                      |
+        | Angle Theta           | 'orientation' | 
'^[Oo][Rr][Ii][Ee][Nn][Tt][Aa][Tt][Ii][Oo][Nn]$' |
+        |                       |               |                            
                      |
+        | Correlation time      | 'tc'          | '^[Tt]c$'                  
                      |
+        
|_______________________|_______________|__________________________________________________|
 
         &quot;&quot;&quot;
 
@@ -292,12 +324,12 @@
             return 'j0'
 
         # J(wX).
-        if search('^[Jj]w[Xx]$', name) or search('[Jj]\(w[Xx]\)', name):
-            return 'jwx'
+        if search('^[Ff]_[Ee][Tt][Aa]$', name):
+            return 'f_eta'
 
         # J(wH).
-        if search('^[Jj]w[Hh]$', name) or search('[Jj]\(w[Hh]\)', name):
-            return 'jwh'
+        if search('^^[Ff]_[Rr]2$', name):
+            return 'f_r2'
 
         # Bond length.
         if search('^r$', name) or search('[Bb]ond[ -_][Ll]ength', name):
@@ -307,7 +339,15 @@
         if search('^[Cc][Ss][Aa]$', name):
             return 'csa'
 
+        # Angle Theta
+        if search('^[Oo][Rr][Ii][Ee][Nn][Tt][Aa][Tt][Ii][Oo][Nn]$', name):
+            return 'orientation'
 
+        # Correlation time
+        if search('^[Tt]c$', name):
+            return 'tc'
+
+
     def return_grace_string(self, data_type):
         &quot;&quot;&quot;Function for returning the Grace string representing the data 
type for axis labelling.&quot;&quot;&quot;
 
@@ -319,12 +359,12 @@
             return '\\qJ(0)\\Q'
 
         # J(wX).
-        elif object_name == 'jwx':
-            return '\\qJ(\\xw\\f{}\\sX\\N)\\Q'
+        elif object_name == 'f_eta':
+            return '\\qF\\s\\xh\\Q'
 
         # J(wH).
-        elif object_name == 'jwh':
-            return '\\qJ(\\xw\\f{}\\sH\\N)\\Q'
+        elif object_name == 'f_r2':
+            return '\\qF\\sR2\\Q'
 
         # Bond length.
         elif object_name == 'r':
@@ -334,7 +374,15 @@
         elif object_name == 'csa':
             return '\\qCSA\\Q'
 
+        # Angle Theta
+        elif object_name == 'orientation':
+            return '\\q\\xq\\Q'
 
+        # Correlation time
+        elif object_name == 'tc':
+            return '\\q\\xt\\f{}c\\Q'
+
+
     def return_units(self, data_type):
         &quot;&quot;&quot;Function for returning a string representing the parameters units.
 
@@ -354,14 +402,23 @@
         elif object_name == 'csa':
             return 'ppm'
 
+        # Angle Theta
+        elif object_name == 'orientation':
+            return 'degrees'
 
+        # Correlation time
+        elif object_name == 'tc':
+            return 'ns'
+
+
     def set(self, run=None, value=None, error=None, param=None, index=None):
         &quot;&quot;&quot;
-        Reduced spectral density mapping set details
+        Consistency testing set details
         ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 
-        In reduced spectral density mapping, only two values can be set, the 
bond length and CSA
-        value.  These must be set prior to the calculation of spectral 
density values.
+        In consistency testing, only four values can be set, the bond 
length, CSA, angle
+        Theta and correlation time values.  These must be set prior to the 
calculation
+        of consistency functions.
 
         &quot;&quot;&quot;
 
@@ -374,26 +431,30 @@
         if param == None:
             # The values are supplied by the user:
             if value:
-                # Test if the length of the value array is equal to 2.
-                if len(value) != 2:
-                    raise RelaxError, &quot;The length of &quot; + `len(value)` + &quot; of 
the value array must be equal to two.&quot;
+                # Test if the length of the value array is equal to 4.
+                if len(value) != 4:
+                    raise RelaxError, &quot;The length of &quot; + `len(value)` + &quot; of 
the value array must be equal to four.&quot;
 
             # Default values.
             else:
                 # Set 'value' to an empty array.
                 value = []
 
-                # CSA and Bond length.
+                # CSA, Bond length Angle Theta and Correlation time.
                 value.append(self.default_value('csa'))
                 value.append(self.default_value('r'))
+                value.append(self.default_value('orientation'))
+                value.append(self.default_value('tc'))
 
             # Initilise data.
             if not hasattr(self.relax.data.res[self.run][index], 'csa') or 
not hasattr(self.relax.data.res[self.run][index], 'csa'):
                 self.data_init(self.relax.data.res[self.run][index])
 
-            # CSA and Bond length.
+            # CSA, bond length, angle Theta and correlation time.
             setattr(self.relax.data.res[self.run][index], 'csa', 
float(value[0]))
             setattr(self.relax.data.res[self.run][index], 'r', 
float(value[1]))
+            setattr(self.relax.data.res[self.run][index], 'orientation', 
float(value[2]))
+            setattr(self.relax.data.res[self.run][index], 'tc', 
float(value[3]))
 
 
         # Individual data type.
@@ -403,7 +464,7 @@
             # Get the object.
             object_name = self.return_data_name(param)
             if not object_name:
-                raise RelaxError, &quot;The reduced spectral density mapping data 
type &quot; + `param` + &quot; does not exist.&quot;
+                raise RelaxError, &quot;The consistency tests data type &quot; + 
`param` + &quot; does not exist.&quot;
 
             # Initialise all data if it doesn't exist.
             if not hasattr(self.relax.data.res[self.run][index], 
object_name):
@@ -422,7 +483,7 @@
 
 
     def set_frq(self, run=None, frq=None):
-        &quot;&quot;&quot;Function for selecting which relaxation data to use in the J(w) 
mapping.&quot;&quot;&quot;
+        &quot;&quot;&quot;Function for selecting which relaxation data to use in the 
consistency tests.&quot;&quot;&quot;
 
         # Run argument.
         self.run = run
@@ -431,21 +492,21 @@
         if not self.run in self.relax.data.run_names:
             raise RelaxNoRunError, self.run
 
-        # Test if the run type is set to 'jw'.
+        # Test if the run type is set to 'ct'.
         function_type = 
self.relax.data.run_types[self.relax.data.run_names.index(self.run)]
-        if function_type != 'jw':
+        if function_type != 'ct':
             raise RelaxFuncSetupError, 
self.relax.specific_setup.get_string(function_type)
 
         # Test if the frequency has been set.
-        if hasattr(self.relax.data, 'jw_frq') and 
self.relax.data.jw_frq.has_key(self.run):
+        if hasattr(self.relax.data, 'ct_frq') and 
self.relax.data.ct_frq.has_key(self.run):
             raise RelaxError, &quot;The frequency for the run &quot; + `self.run` + &quot; 
has already been set.&quot;
 
         # Create the data structure if it doesn't exist.
-        if not hasattr(self.relax.data, 'jw_frq'):
-            self.relax.data.jw_frq = {}
+        if not hasattr(self.relax.data, 'ct_frq'):
+            self.relax.data.ct_frq = {}
 
         # Set the frequency.
-        self.relax.data.jw_frq[self.run] = frq
+        self.relax.data.ct_frq[self.run] = frq
 
 
     def set_error(self, run, instance, index, error):
@@ -458,13 +519,13 @@
         if index == 0:
             self.relax.data.res[self.run][instance].j0_err = error
 
-        # Return J(wX) sim data.
+        # Return F_eta sim data.
         if index == 1:
-            self.relax.data.res[self.run][instance].jwx_err = error
+            self.relax.data.res[self.run][instance].f_eta_err = error
 
-        # Return J(wH) sim data.
+        # Return F_R2 sim data.
         if index == 2:
-            self.relax.data.res[self.run][instance].jwh_err = error
+            self.relax.data.res[self.run][instance].f_r2_err = error
 
 
     def sim_return_param(self, run, instance, index):
@@ -481,13 +542,13 @@
         if index == 0:
             return self.relax.data.res[self.run][instance].j0_sim
 
-        # Return J(wX) sim data.
+        # Return F_eta sim data.
         if index == 1:
-            return self.relax.data.res[self.run][instance].jwx_sim
+            return self.relax.data.res[self.run][instance].f_eta_sim
 
-        # Return J(wH) sim data.
+        # Return F_R2 sim data.
         if index == 2:
-            return self.relax.data.res[self.run][instance].jwh_sim
+            return self.relax.data.res[self.run][instance].f_r2_sim
 
 
     def sim_return_selected(self, run, instance):
@@ -521,7 +582,7 @@
         self.relax.data.res[run][i].relax_sim_data = sim_data
 
 
-    def write_columnar_line(self, file=None, num=None, name=None, 
select=None, data_set=None, nucleus=None, wH=None, j0=None, jwx=None, 
jwh=None, r=None, csa=None, ri_labels=None, remap_table=None, 
frq_labels=None, frq=None, ri=None, ri_error=None):
+    def write_columnar_line(self, file=None, num=None, name=None, 
select=None, data_set=None, nucleus=None, wH=None, j0=None, f_eta=None, 
f_r2=None, r=None, csa=None, ri_labels=None, remap_table=None, 
frq_labels=None, frq=None, ri=None, ri_error=None):
         &quot;&quot;&quot;Function for printing a single line of the columnar formatted 
results.&quot;&quot;&quot;
 
         # Residue number and name.
@@ -538,8 +599,8 @@
 
         # Parameters.
         file.write(&quot;%-25s &quot; % j0)
-        file.write(&quot;%-25s &quot; % jwx)
-        file.write(&quot;%-25s &quot; % jwh)
+        file.write(&quot;%-25s &quot; % f_eta)
+        file.write(&quot;%-25s &quot; % f_r2)
         file.write(&quot;%-25s &quot; % r)
         file.write(&quot;%-25s &quot; % csa)
 
@@ -597,7 +658,7 @@
                 ri_error.append('Ri_error_(' + 
self.relax.data.ri_labels[self.run][i] + &quot;_&quot; + 
self.relax.data.frq_labels[self.run][self.relax.data.remap_table[self.run][i]]
 + &quot;)&quot;)
 
         # Write the header line.
-        self.write_columnar_line(file=file, num='Num', name='Name', 
select='Selected', data_set='Data_set', nucleus='Nucleus', 
wH='Proton_frq_(MHz)', j0='J(0)', jwx='J(wX)', jwh='J(wH)', 
r='Bond_length_(A)', csa='CSA_(ppm)', ri_labels='Ri_labels', 
remap_table='Remap_table', frq_labels='Frq_labels', frq='Frequencies', ri=ri, 
ri_error=ri_error)
+        self.write_columnar_line(file=file, num='Num', name='Name', 
select='Selected', data_set='Data_set', nucleus='Nucleus', 
wH='Proton_frq_(MHz)', j0='J(0)', f_eta='F_eta', f_r2='F_R2', 
r='Bond_length_(A)', csa='CSA_(ppm)', ri_labels='Ri_labels', 
remap_table='Remap_table', frq_labels='Frq_labels', frq='Frequencies', ri=ri, 
ri_error=ri_error)
 
 
         # Values.
@@ -607,7 +668,7 @@
         nucleus = self.relax.generic.nuclei.find_nucleus()
 
         # The proton frequency in MHz.
-        wH = self.relax.data.jw_frq[self.run] / 1e6
+        wH = self.relax.data.ct_frq[self.run] / 1e6
 
         # Relaxation data setup.
         try:
@@ -631,15 +692,15 @@
             if hasattr(data, 'j0'):
                 j0 = data.j0
 
-            # J(wX).
-            jwx = None
-            if hasattr(data, 'jwx'):
-                jwx = data.jwx
+            # F_eta.
+            f_eta = None
+            if hasattr(data, 'f_eta'):
+                f_eta = data.f_eta
 
-            # J(wH).
-            jwh = None
-            if hasattr(data, 'jwh'):
-                jwh = data.jwh
+            # F_R2.
+            f_r2 = None
+            if hasattr(data, 'f_r2'):
+                f_r2 = data.f_r2
 
             # Bond length.
             r = None
@@ -671,7 +732,7 @@
                         ri_error.append(None)
 
             # Write the line.
-            self.write_columnar_line(file=file, num=data.num, 
name=data.name, select=data.select, data_set='value', nucleus=nucleus, 
wH=`wH`, j0=`j0`, jwx=`jwx`, jwh=`jwh`, r=`r`, csa=`csa`, 
ri_labels=ri_labels, remap_table=remap_table, frq_labels=frq_labels, frq=frq, 
ri=ri, ri_error=ri_error)
+            self.write_columnar_line(file=file, num=data.num, 
name=data.name, select=data.select, data_set='value', nucleus=nucleus, 
wH=`wH`, j0=`j0`, f_eta=`f_eta`, f_r2=`f_r2`, r=`r`, csa=`csa`, 
ri_labels=ri_labels, remap_table=remap_table, frq_labels=frq_labels, frq=frq, 
ri=ri, ri_error=ri_error)
 
 
         # Errors.
@@ -693,15 +754,15 @@
             if hasattr(data, 'j0_err'):
                 j0 = data.j0_err
 
-            # J(wX).
-            jwx = None
-            if hasattr(data, 'jwx_err'):
-                jwx = data.jwx_err
+            # F_eta.
+            f_eta = None
+            if hasattr(data, 'f_eta_err'):
+                f_eta = data.f_eta_err
 
-            # J(wH).
-            jwh = None
-            if hasattr(data, 'jwh_err'):
-                jwh = data.jwh_err
+            # F_R2.
+            f_r2 = None
+            if hasattr(data, 'f_r2_err'):
+                f_r2 = data.f_r2_err
 
             # Bond length.
             r = None
@@ -721,7 +782,7 @@
                 ri_error.append(None)
 
             # Write the line.
-            self.write_columnar_line(file=file, num=data.num, 
name=data.name, select=data.select, data_set='error', nucleus=nucleus, 
wH=`wH`, j0=`j0`, jwx=`jwx`, jwh=`jwh`, r=`r`, csa=`csa`, 
ri_labels=ri_labels, remap_table=remap_table, frq_labels=frq_labels, frq=frq, 
ri=ri, ri_error=ri_error)
+            self.write_columnar_line(file=file, num=data.num, 
name=data.name, select=data.select, data_set='error', nucleus=nucleus, 
wH=`wH`, j0=`j0`, f_eta=`f_eta`, f_r2=`f_r2`, r=`r`, csa=`csa`, 
ri_labels=ri_labels, remap_table=remap_table, frq_labels=frq_labels, frq=frq, 
ri=ri, ri_error=ri_error)
 
 
         # Simulation values.
@@ -739,15 +800,15 @@
                 if hasattr(data, 'j0_sim'):
                     j0 = data.j0_sim[i]
 
-                # J(wX).
-                jwx = None
-                if hasattr(data, 'jwx_sim'):
-                    jwx = data.jwx_sim[i]
+                # F_eta.
+                f_eta = None
+                if hasattr(data, 'f_eta_sim'):
+                    f_eta = data.f_eta_sim[i]
 
-                # J(wH).
-                jwh = None
-                if hasattr(data, 'jwh_sim'):
-                    jwh = data.jwh_sim[i]
+                # F_R2.
+                f_r2 = None
+                if hasattr(data, 'f_r2_sim'):
+                    f_r2 = data.f_r2_sim[i]
 
                 # Bond length.
                 r = None
@@ -778,4 +839,4 @@
                         ri_error.append(None)
 
                 # Write the line.
-                self.write_columnar_line(file=file, num=data.num, 
name=data.name, select=data.select, data_set='sim_'+`i`, nucleus=nucleus, 
wH=`wH`, j0=`j0`, jwx=`jwx`, jwh=`jwh`, r=`r`, csa=`csa`, 
ri_labels=ri_labels, remap_table=remap_table, frq_labels=frq_labels, frq=frq, 
ri=ri, ri_error=ri_error)
+                self.write_columnar_line(file=file, num=data.num, 
name=data.name, select=data.select, data_set='sim_'+`i`, nucleus=nucleus, 
wH=`wH`, j0=`j0`, f_eta=`f_eta`, f_r2=`f_r2`, r=`r`, csa=`csa`, 
ri_labels=ri_labels, remap_table=remap_table, frq_labels=frq_labels, frq=frq, 
ri=ri, ri_error=ri_error)
</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00012" href="msg00012.html">Re: Consistency tests</a></strong>
<ul><li><em>From:</em> Sebastien Morin</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00002" href="msg00002.html">Re: Consistency tests</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00003" href="msg00003.html">Re: Consistency tests</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00004" href="msg00004.html">Re: Consistency tests</a></strong>
<ul><li><em>From:</em> Sebastien Morin</li></ul></li>
<li><strong><a name="00008" href="msg00008.html">Re: Consistency tests</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00009" href="msg00009.html">Re: Consistency tests</a></strong>
<ul><li><em>From:</em> Sebastien Morin</li></ul></li>
<li><strong><a name="00010" href="msg00010.html">Re: Consistency tests</a></strong>
<ul><li><em>From:</em> Sebastien Morin</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Mon Jul 09 18:00:41 2007</div>  
</body>
</html>
