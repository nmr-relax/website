<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: Storage of the theta and omega_eff dispersion parameters. -->
<!--X-From-R13: "Sqjneq q'Ohiretar" <rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Thu, 06 Mar 2014 14:52:53 +0100 -->
<!--X-Message-Id: CAED9pY&#45;jrqAYTDZEL07n5eCnJd6R4Jw_BUH0fvtdj8K5Tt+SKw@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: CAED9pY_2DxcHTXfNzvgiHXyqdTcegapJn_LONgzP6JSDFRuukQ@mail.gmail.com -->
<!--X-Reference: CA+CBx2OUNjJE_F5CYPrq4f7tVuPF0h3s07CTJdgzcFXs4VaWpQ@mail.gmail.com -->
<!--X-Reference: CAED9pY_1Spgmn6T0du8K1N8acMp88Eb0SCA0UkDBv&#45;AvhCGnGQ@mail.gmail.com -->
<!--X-Reference: CA+CBx2OfchBbcD6f4K0QEGpuBTiiO4zLoV66&#45;mkksonSQ&#45;8&#45;Og@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: Storage of the theta and omega_eff dispersion parameters. -- March 06, 2014 - 14:52</title>
<link rel="stylesheet" type="text/css" href="/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="https://gna.org/images/gna.theme/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: Storage of the theta and omega_eff dispersion parameters.</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00032" class="tabs">Index by Date</a> | <a href="threads.html#00032" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00031.html">Date Prev</a>] [<a href="msg00033.html">Date Next</a>] [<a href="msg00031.html">Thread Prev</a>] [<a href="msg00027.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Thu, 6 Mar 2014 14:52:19 +0100</li>
<li class="menuitem">
<em>Cc</em>: &quot;relax-devel@xxxxxxx&quot; &lt;relax-devel@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;	h=mime-version:sender:in-reply-to:references:date:message-id:subject	:from:to:cc:content-type:content-transfer-encoding;	bh=0o7yWBeCDNUqGy8Z1TxxfaOMXq1rINIMF6PuvDGEi+M=;	b=Vt7yNfrVwJiw1aadlCU3zSW49BYGJygYbhhIv9fsmjx7FZijZTFli3xvtoja6kncJZ	wAgX5mgJXGU1VBPgD7uoQoIUbpQbvzjfxtBJeexotpEt/2VuUHIWnXWa1nWVZacbSt03	/SRHtCgcH1JR+b5wt5QgrI4qJxrvN+PC8yNf7EjnUvjSo755XNJCP1gLkzjtrrEw9OrR	UF8Qv/ydFGzf8HT+53Xh/vC8+VaQQ4T6lPuJCnEqW+9zkb+vw/AWKanHNRnhaAcEnBn7	V4E0S8/TPAqwH3m9ATnSIhNt8A/2m7ENyGhzwVAqI6JbDmm/xacfaz2UeRa/ws0/CNJf	rktQ==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00032.html">CAED9pY-jrqAYTDZEL07n5eCnJd6R4Jw_BUH0fvtdj8K5Tt+SKw@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;CAED9pY_2DxcHTXfNzvgiHXyqdTcegapJn_LONgzP6JSDFRuukQ@xxxxxxxxxxxxxx&gt;	&lt;CA+CBx2OUNjJE_F5CYPrq4f7tVuPF0h3s07CTJdgzcFXs4VaWpQ@xxxxxxxxxxxxxx&gt;	&lt;CAED9pY_1Spgmn6T0du8K1N8acMp88Eb0SCA0UkDBv-AvhCGnGQ@xxxxxxxxxxxxxx&gt;	&lt;CA+CBx2OfchBbcD6f4K0QEGpuBTiiO4zLoV66-mkksonSQ-8-Og@xxxxxxxxxxxxxx&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on March 06, 2014 - 14:52:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Hi,

It is the first - relax is simply storing the R1rho values in the data
structure called r2eff.  One day we might discover a name that would
encompass both data types, and then we can change r2eff to that name
(and add backwards compatibility hooks into the code in the
'data_store' package).  I think the unit test is a good idea to
understand this function, and you should then see how you can use it
to obtain the values you need.  If there is no data input needed, then
modifying return_offset_data() to calculate and return omega_eff and
then using that data where you need it will be the simplest, safest
and cleanest implementation.

Regards,

Edward





On 6 March 2014 14:43, Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Dear Edward.

A little note on the naming of r2eff for an R1rho analysis with DPL94.
<a  rel="nofollow" href="http://wiki.nmr-relax.com/DPL94">http://wiki.nmr-relax.com/DPL94</a>

Does r2eff here means:
r2eff = R1rho = R1*cos(t)*2 + (R1rho' + P_ex*k_ex/(k_ex^2 + w_e^2) ) * 
sin(t) *2
or is it:
R2,eff = (R1rho - R1*cos(t)*2) / sin(t) *2

I guess it must reflect the first?
I think I am a little lost matching different conventions about the
terminology for naming equations and parts of them. :-)

I do not have an interest in loading in omega_eff values.
It is rather the writing out of them, which I then could manually
compare to values in a spreadsheet or similar.

I am writing up a unit test, to get the values return_offset_data().
That should probably help me in understanding the data structure.

Thanks
Troels


2014-03-06 14:10 GMT+01:00 Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt;:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi,

One more point:

</pre><blockquote class="blockquote"><pre style="margin: 0em;">A desired functionality, would be to implement a user function. Maybe
- relax_disp.return_offset_data
- relax_data.return_offset_data

or add the functionality to
- relax_data.back_calc

The user function should create parameters as a dictionary:
The dictionary keys could be the same as r2eff

cdp.mol[0].res[7].spin[0].r2eff
{'r1rho_799.77739910_118.078_800.500': 9.84888500988483,
'r1rho_799.77739910_142.754_1341.110': 4.9805363953113471,
'r1rho_799.77739910_130.416_1341.110': 9.1530088665806915,
'r1rho_799.77739910_130.416_800.500': 7.3650924682616958,
'r1rho_799.77739910_118.078_984.000': 9.9513756586716013,
'r1rho_799.77739910_118.078_651.200': 9.4610010912607088,
'r1rho_799.77739910_241.459_1341.110': 1.2925550460815427,
'r1rho_799.77739910_118.078_431.000': 8.0090052925282862,
'r1rho_799.77739910_118.078_1648.500': 10.202945137023924,
'r1rho_799.77739910_179.768_1341.110': 1.8836588047273142,
'r1rho_799.77739910_118.078_1341.110': 10.31096739492439,
'r1rho_799.77739910_130.416_1648.500': 9.3622346598033772,
'r1rho_799.77739910_124.247_1341.110': 10.835446929931628,
'r1rho_799.77739910_142.754_800.500': 3.1304734741765006}

And the writing out of the values could be:
value.write(param='r2eff', file='r2eff.out', dir=None, scaling=1.0,
comment=None, bc=False, force=False)
value.write(param='theta', file='theta.out', dir=None, scaling=1.0,
comment=None, bc=False, force=False)

For generating plots, grace.write will complain with:
grace.write(x_data_type='spin_lock_nu1', y_data_type='r2eff',
spin_id=':13@N', plot_data='value',
file='/sbinlab2/tlinnet/test/test.agr', dir=None, force=True,
norm=False)
raise RelaxError(&quot;The series data %s does not have the same number of
elements as %s.&quot; % (x_val, y_val))

Therefore the relax_disp.plot_disp_curves should be able to chose
between, taking x and y arguments as:
y : r2eff, r1rho
x : spin_lock strength, theta, Omega_eff

If theta, Omega_eff does not exists, it should call the above user
function to create the data.
</pre></blockquote><pre style="margin: 0em;">

A user function is not needed, as this is happening in the relax
backend.  The specific_analyses.relax_disp.disp_data.return_offset_data()
function can return the values in the data matrix form (lists of
lists) as it currently does.  But just modify that function to return
omega_eff as well.  The options for the X-axis are perfect.  But the
options for the Y-axis are not needed as r1rho and r2eff are stored as
the same data (in the spin container r2eff dictionary).

Regards,

Edward
</pre></blockquote></blockquote><pre style="margin: 0em;">


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00024" href="msg00024.html">Storage of the theta and omega_eff dispersion parameters.</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00025" href="msg00025.html">Re: Storage of the theta and omega_eff dispersion parameters.</a></strong>
<ul><li><em>From:</em> Troels Emtekær Linnet</li></ul></li>
<li><strong><a name="00029" href="msg00029.html">Re: Storage of the theta and omega_eff dispersion parameters.</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00031" href="msg00031.html">Re: Storage of the theta and omega_eff dispersion parameters.</a></strong>
<ul><li><em>From:</em> Troels Emtekær Linnet</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer">You are on the <a href="http://gna.org">Gna!</a> mail server.</div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Thu Mar 06 18:00:19 2014</div>  
</body>
</html>
