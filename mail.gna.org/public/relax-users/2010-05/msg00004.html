<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: Ellipsoid minimization does not converge -->
<!--X-From-R13: "Sqjneq q'Ohiretar" <rqjneq.qnhiretarNtznvy.pbz> -->
<!--X-Date: Mon, 17 May 2010 19:22:32 +0200 -->
<!--X-Message-Id: AANLkTiknxMl6nkX0vTT3vTzOG5_1dokocG7bX8WxPIdD@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: C1269215&#45;2B6A&#45;4EBA&#45;9C41&#45;6C0018FE2DA6@mol.biol.ethz.ch -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: Ellipsoid minimization does not converge -- May 17, 2010 - 19:22</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: Ellipsoid minimization does not converge</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00004" class="tabs">Index by Date</a> | <a href="threads.html#00004" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00003.html">Date Prev</a>] [<a href="msg00005.html">Date Next</a>] [<a href="msg00003.html">Thread Prev</a>] [<a href="msg00005.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Daniel Pérez &lt;daniel.perez@xxxxxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Mon, 17 May 2010 19:21:34 +0200</li>
<li class="menuitem">
<em>Cc</em>: relax-users@xxxxxxx</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00004.html">AANLkTiknxMl6nkX0vTT3vTzOG5_1dokocG7bX8WxPIdD@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;C1269215-2B6A-4EBA-9C41-6C0018FE2DA6@xxxxxxxxxxxxxxxx&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on May 17, 2010 - 19:22:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Hi,

Wow, that's an incredible number of iterations!  Have you tried
Sebastien's consistency testing to see if there could be a problem
with the data?  The reference is in Seb's sample script that comes
with relax.  Is this a single domain protein?  As for this bug, I've
had a look at the code and it appears to be fixed in the repository.
Do you have the subversion program installed, and have you used it
before?  If so, you can download a copy of the repository code by
typing:

$ svn co svn://svn.gna.org/svn/relax/1.3 relax-1.3

or if this doesn't work:

$ svn co <a  rel="nofollow" href="http://svn.gna.org/svn/relax/1.3">http://svn.gna.org/svn/relax/1.3</a> relax-1.3

If you already have a checked out copy, try typing:

$ svn up

in the base directory to update to the most current version.  If you
try this newest version, does this problem go away?

Regards,

Edward



2010/5/17 Daniel Pérez &lt;daniel.perez@xxxxxxxxxxxxxxxx&gt;:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi everyone,

Thanks Ed and Sébastien for your answers.

The minimization with the ellipsoid tensor took good 31 rounds and finally 
it passed the convergence test.

Now I face anther issue, I couldn't make the program run through the model 
selection. It crashes during the Monte Carlo simulation. Apparently it has 
some trouble reading in the back calculated data.

Here I attached the last steps before crashing

I'll appreciate any feedback.

Thanks in advance

Daniel



relax&gt; monte_carlo.create_data(method='back_calc')
Traceback (most recent call last):
 File &quot;/soft/group/relax/relax-1.3/relax&quot;, line 358, in ?
   Relax()
 File &quot;/soft/group/relax/relax-1.3/relax&quot;, line 126, in __init__
   self.interpreter.run(self.script_file)
 File &quot;/soft/group/relax/relax-1.3/prompt/interpreter.py&quot;, line 287, in run
   return run_script(intro=self.__intro_string, local=locals(), 
script_file=script_file, quit=self.__quit_flag, 
show_script=self.__show_script, raise_relax_error=self.__raise_relax_error)
 File &quot;/soft/group/relax/relax-1.3/prompt/interpreter.py&quot;, line 533, in 
run_script
   return console.interact(intro, local, script_file, quit, 
show_script=show_script, raise_relax_error=raise_relax_error)
 File &quot;/soft/group/relax/relax-1.3/prompt/interpreter.py&quot;, line 429, in 
interact_script
   execfile(script_file, local)
 File &quot;full_analysis_last.py&quot;, line 197, in ?
   dAuvergne_protocol(diff_model=DIFF_MODEL, mf_models=MF_MODELS, 
local_tm_models=LOCAL_TM_MODELS, pdb_file=PDB_FILE, seq_args=SEQ_ARGS, 
het_name=HET_NAME, relax_data=RELAX_DATA, unres=UNRES, exclude=EXCLUDE, 
bond_length=BOND_LENGTH, csa=CSA, hetnuc=HETNUC, proton=PROTON, 
grid_inc=GRID_INC, min_algor=MIN_ALGOR, mc_num=MC_NUM, conv_loop=CONV_LOOP)
 File &quot;/soft/group/relax/relax-1.3/auto_analyses/dauvergne_protocol.py&quot;, 
line 401, in __init__
   self.interpreter.monte_carlo.create_data()
 File &quot;/soft/group/relax/relax-1.3/prompt/monte_carlo.py&quot;, line 77, in 
create_data
   monte_carlo.create_data(method=method)
 File &quot;/soft/group/relax/relax-1.3/generic_fns/monte_carlo.py&quot;, line 69, in 
create_data
   data = create_mc_data(data_index)
 File &quot;/soft/group/relax/relax-1.3/specific_fns/model_free/main.py&quot;, line 
1175, in create_mc_data
   value = self.back_calc_ri(spin_index=global_index, 
ri_label=spin.ri_labels[j], frq_label=spin.frq_labels[spin.remap_table[j]], 
frq=spin.frq[spin.remap_table[j]])
 File &quot;/soft/group/relax/relax-1.3/specific_fns/model_free/main.py&quot;, line 
452, in back_calc_ri
   if hasattr(cdp, 'diff_tensor') and (cdp.diff_tensor.type == 'spheroid' 
or cdp.diff_tensor.type == 'ellipsoid') and (not hasattr(spin, 'xh_vect') 
or not spin.xh_vect):
ValueError: The truth value of an array with more than one element is 
ambiguous. Use a.any() or a.all()



Dr. Daniel Pérez
Institut für Molekularbiologie und Biophysik
Schafmattstrasse 20
ETH-Hönggerberg, HPK G 5
CH-8093 Zürich
Phone: +41 44 633 25 37
E-mail: daniel.perez@xxxxxxxxxxxxxxxx


_______________________________________________
relax (<a  rel="nofollow" href="http://nmr-relax.com">http://nmr-relax.com</a>)

This is the relax-users mailing list
relax-users@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="https://mail.gna.org/listinfo/relax-users">https://mail.gna.org/listinfo/relax-users</a>

</pre></blockquote><pre style="margin: 0em;">


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00003" href="msg00003.html">Re: Ellipsoid minimization does not converge</a></strong>
<ul><li><em>From:</em> Daniel Pérez</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Thu May 20 09:40:16 2010</div>  
</body>
</html>
