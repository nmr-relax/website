<!-- MHonArc v2.6.10 -->
<!--X-Subject: Re: r3237 &#45; in /branches/multi_processor: multi/mpi4py_processor.py	relax -->
<!--X-From-R13: "Sqjneq q'Ohiretar" <rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Tue, 20 Mar 2007 14:57:38 +0100 -->
<!--X-Message-Id: 7f080ed10703200656r9214f7ey213d390959e95828@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: E1HTJY1&#45;0005VF&#45;O1@subversion.gna.org -->
<!--X-Reference: 45FEAC46.8020307@bmb.leeds.ac.uk -->
<!--X-Reference: 7f080ed10703190923s4b09fab1vd958ed6001031b9c@mail.gmail.com -->
<!--X-Reference: 45FF1AF7.2000606@bmb.leeds.ac.uk -->
<!--X-Reference: 7f080ed10703200322ua51bfcexc4e26556a623a0d0@mail.gmail.com -->
<!--X-Reference: 45FFC5DC.8000208@bmb.leeds.ac.uk -->
<!--X-Reference: 7f080ed10703200534s6d34dc6t66d54b604519db38@mail.gmail.com -->
<!--X-Reference: 45FFDF91.8070704@bmb.leeds.ac.uk -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: r3237 - in /branches/multi_processor: multi/mpi4py_processor.py	relax -- March 20, 2007 - 14:57</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: r3237 - in /branches/multi_processor: multi/mpi4py_processor.py	relax</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00105" class="tabs">Index by Date</a> | <a href="threads.html#00105" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00104.html">Date Prev</a>] [<a href="msg00106.html">Date Next</a>] [<a href="msg00104.html">Thread Prev</a>] [<a href="msg00109.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: &quot;Gary S. Thompson&quot; &lt;garyt@xxxxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Wed, 21 Mar 2007 00:56:58 +1100</li>
<li class="menuitem">
<em>Cc</em>: relax-devel@xxxxxxx</li>
<li class="menuitem">
<em>Dkim-signature</em>: a=rsa-sha1; c=relaxed/relaxed; d=gmail.com; s=beta;	h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:cc:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;	b=UHWgdVKAK5zcn9RULL36QQ25npSe6ZcLPDTQnsl/ceu5xKe1rjb2TvzA5mtaqwZIHzPEMksTsal3P1SNgAz9jpArlUzv3EhA7aB2ZchBv87TAkSxGUm7fdrL/oZ+6bT4dawOFxwhR2lxixWI3fqTtv7UCc8chPgXfwOq4NKEnHE=</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00105.html">7f080ed10703200656r9214f7ey213d390959e95828@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;E1HTJY1-0005VF-O1@subversion.gna.org&gt;	&lt;<a href="msg00088.html">45FEAC46.8020307@bmb.leeds.ac.uk</a>&gt;	&lt;<a href="msg00091.html">7f080ed10703190923s4b09fab1vd958ed6001031b9c@mail.gmail.com</a>&gt;	&lt;<a href="msg00094.html">45FF1AF7.2000606@bmb.leeds.ac.uk</a>&gt;	&lt;<a href="msg00099.html">7f080ed10703200322ua51bfcexc4e26556a623a0d0@mail.gmail.com</a>&gt;	&lt;<a href="msg00100.html">45FFC5DC.8000208@bmb.leeds.ac.uk</a>&gt;	&lt;<a href="msg00102.html">7f080ed10703200534s6d34dc6t66d54b604519db38@mail.gmail.com</a>&gt;	&lt;<a href="msg00104.html">45FFDF91.8070704@bmb.leeds.ac.uk</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on March 20, 2007 - 14:57:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<tt>On 3/21/07, Gary S. Thompson &lt;garyt@xxxxxxxxxxxxxxx&gt; wrote:
</tt><blockquote class="blockquote"><pre style="margin: 0em;">Edward d'Auvergne wrote:</pre><br>
<pre style="margin: 0em;">&gt;&gt; &gt;&gt; &gt;&gt; do i modify interpreter.run to take a quit varaiable set to
&gt;&gt; False  so
&gt;&gt; &gt;&gt; &gt;&gt; that run_script can be
&gt;&gt; &gt;&gt; &gt;&gt; run with quit = false?
&gt;&gt; &gt;&gt; &gt;
&gt;&gt; &gt;&gt; &gt;
&gt;&gt; &gt;&gt; &gt; Avoid the interpreter and wait at the optimisation steps - the only
&gt;&gt; &gt;&gt; &gt; serious number crunching code in relax.
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; I agree!  interpeters are not required on the slave just the relax
&gt;&gt; data
&gt;&gt; &gt;&gt; structures in a clean and useable state
&gt;&gt; &gt;
&gt;&gt; &gt;
&gt;&gt; &gt; If you're working at the level of the model-free 'minimise()'
&gt;&gt; &gt; function, don't bother with the relax data structures!  See my
&gt;&gt; &gt; previous post mentioned above.
&gt;&gt;
&gt;&gt; I follow now, my only worry is that the processing will be fairly fine
&gt;&gt; grained so causing a greater ratio of network traffic to processing
&gt;
&gt;
&gt; The level of the minimise() method is coarser than splitting up a grid
&gt; search.  That is because the main loop of the method executes the grid
&gt; search for each optimisation instance.</pre><br>
<tt><br>does this limit the number of processors I can use?
</tt></blockquote><pre style="margin: 0em;"><br>Yes.  If you are studying n spin systems (or residues in a typical
protein analysis) you will be limited to n processors.</pre><br>
<br>
<blockquote class="blockquote"><pre style="margin: 0em;"> also i am not
following what you mean by each optimization instance is this a model
type if so that is too (!) course grained...
</pre></blockquote><pre style="margin: 0em;"><br>There are 4 different classes of model-free model supported by relax.
These are found by the 'determine_param_set_type()' method and are
handled differently by the 'minimise()' method and the 'maths_fns.mf'
module.  The four types are:</pre><br>
<pre style="margin: 0em;">   'mf' - one model-free model.
   'local_tm' - one model-free model together with the local tm parameter.
   'diff' - solely the diffusion tensor (the model-free model
parameters are held constant).
   'all' - all model-free models of all spin systems together with
the Brownian rotational diffusion parameters.</pre><br>
<pre style="margin: 0em;">The minimise() method loops over the minimisation instances which for
the four models total n, n, 1, and 1 instances respectively.</pre><br>
<blockquote class="blockquote"><pre style="margin: 0em;">The original aim for the
optimisation during minimisation was to split up residue ranges as this
gives coarse grains but a reasonable number of them.... (e.g. if you
have a 120 aa protein you have upto 120 grains available (though by that
stage your communication overhead may get too much)
</pre></blockquote><pre style="margin: 0em;"><br>I'll assume that 'split up residue ranges' means for n residues there
are n optimisations.  This is constrained by the model.  For a grid
search with 10 to 20 increments per dimension across the space of the
most complex model-free model, this could be a few minutes per
residue.  For the minimisation the timing could be similar.  I don't
think there will be much communication overhead in this situation.  If
this is found to be too coarse, then the grid search could be
parallelised.  The minimisation of one optimisation instance can never
be parallelised though (unless you get into the minimisation code and
implement a parallelised optimisation algorithm (I wouldn't do that
though))!</pre><br>
<br>
<blockquote class="blockquote"><pre style="margin: 0em;">so actually I was
looking at the relax_fit specific function....
</pre></blockquote><pre style="margin: 0em;"><br>'relax_fit'?  Do you mean the fitting of the exponential curves to
determine the R1 and R2 relaxation rates?</pre><br>
<br>
<blockquote class="blockquote"><pre style="margin: 0em;"> plus passing parameters
to restrict the residue range or using the select function pluse some
saving and restoring of state in the master.
</pre></blockquote><pre style="margin: 0em;"><br>It could be me not fully understanding MPI but isn't it the master
which collects the results and then places these into the relax data
storage object?  Or do the slaves have access to the program namespace
and hence have access to the relax data storage object singleton and
can do it themselves?  Why does the program state need saving?</pre><br>
<br>
<blockquote class="blockquote"><pre style="margin: 0em;">If i have this upside down
and back to front i apolergise I am still learning ;-)
</pre></blockquote><pre style="margin: 0em;"><br>So am I, mainly though your relax subversion commit messages!  My
knowledge of MPI is definitely lacking.</pre><br>
<pre style="margin: 0em;">Bye,</pre><br>
<pre style="margin: 0em;">Edward</pre><br>
<br>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00109" href="msg00109.html">Re: r3237 - in /branches/multi_processor: multi/mpi4py_processor.py	relax</a></strong>
<ul><li><em>From:</em> Gary S. Thompson</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00088" href="msg00088.html">Re: r3237 - in /branches/multi_processor: multi/mpi4py_processor.py	relax</a></strong>
<ul><li><em>From:</em> Gary S. Thompson</li></ul></li>
<li><strong><a name="00091" href="msg00091.html">Re: r3237 - in /branches/multi_processor: multi/mpi4py_processor.py	relax</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00094" href="msg00094.html">Re: r3237 - in /branches/multi_processor: multi/mpi4py_processor.py	relax</a></strong>
<ul><li><em>From:</em> Gary S. Thompson</li></ul></li>
<li><strong><a name="00099" href="msg00099.html">Re: r3237 - in /branches/multi_processor: multi/mpi4py_processor.py	relax</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00100" href="msg00100.html">Re: r3237 - in /branches/multi_processor: multi/mpi4py_processor.py	relax</a></strong>
<ul><li><em>From:</em> Gary S. Thompson</li></ul></li>
<li><strong><a name="00102" href="msg00102.html">Re: r3237 - in /branches/multi_processor: multi/mpi4py_processor.py	relax</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00104" href="msg00104.html">Re: r3237 - in /branches/multi_processor: multi/mpi4py_processor.py	relax</a></strong>
<ul><li><em>From:</em> Gary S. Thompson</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Tue Mar 20 15:40:35 2007</div>  
</body>
</html>
