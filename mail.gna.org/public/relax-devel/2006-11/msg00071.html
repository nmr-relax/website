<!-- MHonArc v2.6.10 -->
<!--X-Subject: Re: [bug #7641] Infinite Chi2 warning -->
<!--X-From-R13: Quevf [npDnvyq <p.n.znpenvyqNyrrqf.np.hx> -->
<!--X-Date: Mon, 06 Nov 2006 19:17:25 +0100 -->
<!--X-Message-Id: 1162836984.3525.217.camel@mrspell -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 20061106&#45;103850.sv6347.63993@gna.org -->
<!--X-Reference: 1162830136.3525.207.camel@mrspell -->
<!--X-Reference: 454F63B9.8080009@bmb.leeds.ac.uk -->
<!--X-Reference: 481156b20611060912s4cfa0f5cme2ac01c2cc534913@mail.gmail.com -->
<!--X-Reference: 7f080ed10611060918g45f0dfd1m1ea15ae75e0f17a8@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [bug #7641] Infinite Chi2 warning -- November 06, 2006 - 19:17</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: [bug #7641] Infinite Chi2 warning</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00071" class="tabs">Index by Date</a> | <a href="threads.html#00071" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00070.html">Date Prev</a>] [<a href="msg00072.html">Date Next</a>] [<a href="msg00070.html">Thread Prev</a>] [<a href="msg00072.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Edward d'Auvergne &lt;edward.dauvergne@xxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Mon, 06 Nov 2006 18:16:24 +0000</li>
<li class="menuitem">
<em>Cc</em>: Alex Hansen &lt;NO-REPLY.INVALID-ADDRESS@xxxxxxx&gt;, relax-devel@xxxxxxx</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00071.html">1162836984.3525.217.camel@mrspell</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;<a href="msg00063.html">20061106-103850.sv6347.63993@gna.org</a>&gt;	&lt;<a href="msg00066.html">1162830136.3525.207.camel@mrspell</a>&gt;	&lt;<a href="msg00067.html">454F63B9.8080009@bmb.leeds.ac.uk</a>&gt;	&lt;<a href="msg00068.html">481156b20611060912s4cfa0f5cme2ac01c2cc534913@mail.gmail.com</a>&gt;	&lt;<a href="msg00070.html">7f080ed10611060918g45f0dfd1m1ea15ae75e0f17a8@mail.gmail.com</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Chris MacRaild</strong> on November 06, 2006 - 19:17:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Something of a side issue, I know, but this appears to be the
optimisation of a 3-parameter model to 3 data points. Hence the chi2
value of 0. 

I thought we had coded residue selection to deselect residues in this
case. Any idea why it is apparently not happening here?

In any case, a quick workaround for the problem is to simply not
optimise models with more parameters than you have data points (even if
relax did ever give you results for these models, the results would be
meaningless).

Chris


On Tue, 2006-11-07 at 04:18 +1100, Edward d'Auvergne wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">As it is the chi-squared value which is optimised in model-free
analysis, this is synonymous with the 'function value' or 'fk'.  Gary,
you might need to handle this one.

Cheers,

Edward



On 11/7/06, Alexandar Hansen &lt;viochemist@xxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">I'm not entirely sure what the processor specs are, but I'm running this 
on
a 64 bit system running RedHat 7 (??).  I haven't had any issues prior to
this due to a different platform.

This is the last thing to happen before the RelaxError:

Fitting to residue: 23 G
~~~~~~~~~~~~~~~~~~~~~~~~


Method of Multipliers
~~~~~~~~~~~~~~~~~~~~~

k: 0       xk: array([  1.20000000e+04,   9.00000000e-01,   
5.00000000e+00])
   fk: 327.68236595759424
Entering sub-algorithm.

        Newton minimisation
        ~~~~~~~~~~~~~~~~~~~
        Line search:  Backtracking line search.
        Hessian modification:  The Gill, Murray, and Wright modified
Cholesky algorithm.

        k: 0       xk: array([  1.20000000e+04,   9.00000000e-01,
5.00000000e+00])     fk: 327.68236595759424

        Parameter values: array([  2.97262710e+03,   2.75282891e-01,
2.22776495e+01])
        Function value:   1.1399366931634486e-11
        Iterations:       7
        Function calls:   16
        Gradient calls:   8
        Hessian calls:    7
        Warning:          None


k: 1       xk: array([  2.97262710e+03 ,   2.75282891e-01,
2.22776495e+01])    fk: 1.1399366931634486e-11
Entering sub-algorithm.

        Newton minimisation
        ~~~~~~~~~~~~~~~~~~~
        Line search:  Backtracking line search.
        Hessian modification:  The Gill, Murray, and Wright modified
Cholesky algorithm.

        k: 0       xk: array([  2.97262710e+03,   2.75282891e-01,
2.22776495e+01])     fk: 1.1399366931634486e-11

        Parameter values: array([  2.97262779e+03,   2.75282907e-01,
2.22776492e+01])
         Function value:   1.368250643042848e-23
        Iterations:       1
        Function calls:   3
        Gradient calls:   2
        Hessian calls:    1
        Warning:          None


k: 2       xk: array([  2.97262779e+03,   2.75282907e-01,   
2.22776492e+01])
   fk: 1.368250643042848e-23
Entering sub-algorithm.

        Newton minimisation
        ~~~~~~~~~~~~~~~~~~~
        Line search:  Backtracking line search.
        Hessian modification:  The Gill, Murray, and Wright modified
Cholesky algorithm.

        k: 0       xk: array([  2.97262779e+03,   2.75282907e-01,
2.22776492e+01])     fk: 1.368250643042848e-23

         Parameter values: array([  2.97262779e+03,   2.75282907e-01,
2.22776492e+01])
        Function value:   2.5466842239831223e-29
        Iterations:       1
        Function calls:   3
        Gradient calls:   2
        Hessian calls:    1
        Warning:          None


k: 3       xk: array([  2.97262779e+03,   2.75282907e-01,   
2.22776492e+01])
   fk: 2.5466842239831223e-29
Entering sub-algorithm.

        Newton minimisation
        ~~~~~~~~~~~~~~~~~~~
        Line search:  Backtracking line search.
        Hessian modification:  The Gill, Murray, and Wright modified
Cholesky algorithm.

        k: 0       xk: array([  2.97262779e+03 ,   2.75282907e-01,
2.22776492e+01])     fk: 2.5466842239831223e-29

        Parameter values: array([  2.97262779e+03,   2.75282907e-01,
2.22776492e+01])
        Function value:   0.0
        Iterations:       1
        Function calls:   3
        Gradient calls:   2
        Hessian calls:    1
        Warning:          None


Parameter values: array([  2.97262779e+03,   2.75282907e-01,
2.22776492e+01])
 Function value:   0.0
Iterations:       10
Function calls:   25
Gradient calls:   14
Hessian calls:    10
Warning:          None

RelaxError: The invalid chi-squared floating point value of infinity has
occurred.





On 11/6/06, Gary S. Thompson &lt;garyt@xxxxxxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Chris MacRaild wrote:

</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi Alex,

I can't reproduce this with my own data, so I suspect its something to
do with either your data or the way relax is handling it. There are a
few things you could do to try and track this down. First try running
your script with the --debug flag. This should cause relax to save 
state
in response to the error. You can then load this state in an 
interactive
relax session and explore the data to find any sign of the problems. 
You
will want to type:

self.relax.data.res[run_name][index]

(where index is any integer from 0 to the number of residues you have)
This will give you all the residue specific data for this residue. 
Check
whether chi2 is finite (in which case that residue is probably not the
cause of your problems), and check that the relax_data and relax_error
fields match your expectations.

Hope that helps,
Chris


</pre></blockquote><pre style="margin: 0em;">One other question to ask here is what architecture are you running this
on. It isn't a powerpc based mac, an sgi  or a sun by any chance? The
code in float.py has only been tested on intel based platforms (linux
x86 and windows) currently.....

regards
gary

--

</pre></blockquote><pre style="margin: 0em;">-------------------------------------------------------------------
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Dr Gary Thompson
Astbury Centre for Structural Molecular Biology,
University of Leeds, Astbury Building,
Leeds, LS2 9JT, West-Yorkshire, UK             Tel. +44-113-3433024
email: garyt@xxxxxxxxxxxxxxx                   Fax  +44-113-2331407

</pre></blockquote><pre style="margin: 0em;">-------------------------------------------------------------------
</pre><blockquote class="blockquote"><pre style="margin: 0em;">



_______________________________________________
relax (<a  href="http://nmr-relax.com">http://nmr-relax.com</a>)

This is the relax-devel mailing list
relax-devel@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  href="https://mail.gna.org/listinfo/relax-devel">https://mail.gna.org/listinfo/relax-devel</a>

</pre></blockquote><pre style="margin: 0em;">



--
_______________________________________________
relax (<a  href="http://nmr-relax.com">http://nmr-relax.com</a>)

This is the relax-devel mailing list
relax-devel@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  href="https://mail.gna.org/listinfo/relax-devel">https://mail.gna.org/listinfo/relax-devel</a>



</pre></blockquote><pre style="margin: 0em;">

_______________________________________________
relax (<a  href="http://nmr-relax.com">http://nmr-relax.com</a>)

This is the relax-devel mailing list
relax-devel@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  href="https://mail.gna.org/listinfo/relax-devel">https://mail.gna.org/listinfo/relax-devel</a>

</pre></blockquote><pre style="margin: 0em;">



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00075" href="msg00075.html">Re: [bug #7641] Infinite Chi2 warning</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00072" href="msg00072.html">Re: [bug #7641] Infinite Chi2 warning</a></strong>
<ul><li><em>From:</em> Alexandar Hansen</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00063" href="msg00063.html">[bug #7641] Infinite Chi2 warning</a></strong>
<ul><li><em>From:</em> Alex Hansen</li></ul></li>
<li><strong><a name="00066" href="msg00066.html">Re: [bug #7641] Infinite Chi2 warning</a></strong>
<ul><li><em>From:</em> Chris MacRaild</li></ul></li>
<li><strong><a name="00067" href="msg00067.html">Re: [bug #7641] Infinite Chi2 warning</a></strong>
<ul><li><em>From:</em> Gary S. Thompson</li></ul></li>
<li><strong><a name="00068" href="msg00068.html">Re: [bug #7641] Infinite Chi2 warning</a></strong>
<ul><li><em>From:</em> Alexandar Hansen</li></ul></li>
<li><strong><a name="00070" href="msg00070.html">Re: [bug #7641] Infinite Chi2 warning</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Tue Nov 07 07:21:17 2006</div>  
</body>
</html>
