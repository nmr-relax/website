<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: Pulse miscalibration,	R1A and R1B in the fitting_main_kex.py script. -->
<!--X-From-R13: "Sqjneq q'Ohiretar" <rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Wed, 17 Jul 2013 11:32:50 +0200 -->
<!--X-Message-Id: CAED9pY_EfYnPtCyVsEDitricB=6zzHPFV8pTGm=K7O9V3P69aA@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: CAED9pY8P5o_fFaCpQnnuZ6zS9vNBtkgOiu&#45;UZmKKVQ7BryDpjQ@mail.gmail.com -->
<!--X-Reference: 51E56212.9030802@ibs.fr -->
<!--X-Reference: CAED9pY&#45;TM_4EX9Mto6P01RPugoQ9Zk9qBLnhn0r_n3u=GDt3XQ@mail.gmail.com -->
<!--X-Reference: 51E57130.60309@ibs.fr -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: Pulse miscalibration,	R1A and R1B in the fitting_main_kex.py script. -- July 17, 2013 - 11:32</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: Pulse miscalibration,	R1A and R1B in the fitting_main_kex.py script.</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00045" class="tabs">Index by Date</a> | <a href="threads.html#00045" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00044.html">Date Prev</a>] [<a href="msg00046.html">Date Next</a>] [<a href="msg00043.html">Thread Prev</a>] [<a href="msg00041.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Paul Schanda &lt;paul.schanda@xxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Wed, 17 Jul 2013 11:32:19 +0200</li>
<li class="menuitem">
<em>Cc</em>: &quot;Dominique Marion \(IBS\)&quot; &lt;Dominique.Marion@xxxxxx&gt;,	mathilde lescanne &lt;mathilde.lescanne@xxxxxxxxx&gt;,	&quot;relax-devel@xxxxxxx&quot; &lt;relax-devel@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;	h=mime-version:sender:in-reply-to:references:date	:x-google-sender-auth:message-id:subject:from:to:cc:content-type	:content-transfer-encoding;	bh=86s25nlJWVuGSxdaODvOAKDBmGvYSLQahPtmJI7setc=;	b=nTwMonwlgLp5z6I4o3oBIMb1PYf+RyZzSarOfqoqPj+wIM+eiC+899wslKSX5OM8ZH	xglvi9wULxFzLBrtKqJ+lW5/XKbYrudpk63yxFnvhQw2n9KBWTj7h2Z3H2xUqj3DVmMs	8xGHGsn5GkWJjDPxgzW1+zsttMuarwcTCALLF+2qmVTI0WF2iJebyJjAk+giI7vV/S3G	kjK2okI7NxTgz5abxDsM2JSv/MHN9TFFaO5H0DQ6Srg+YMoMuTqKK020aOume/ubQjwg	zvge8zaalEEO4mQ0Nukf/pej5S6eacz//Fya4xw6O/CoL6WLhRGDbRPjNzjIHnrlVOJV	D+tA==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00045.html">CAED9pY_EfYnPtCyVsEDitricB=6zzHPFV8pTGm=K7O9V3P69aA@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;CAED9pY8P5o_fFaCpQnnuZ6zS9vNBtkgOiu-UZmKKVQ7BryDpjQ@xxxxxxxxxxxxxx&gt;	&lt;51E56212.9030802@xxxxxx&gt;	&lt;CAED9pY-TM_4EX9Mto6P01RPugoQ9Zk9qBLnhn0r_n3u=GDt3XQ@xxxxxxxxxxxxxx&gt;	&lt;51E57130.60309@xxxxxx&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on July 17, 2013 - 11:32:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Hi,

There is one more 'trick' I am using to speed everything up.  The
initial grid search required prior to optimisation can be quite
expensive for the models with the R20A and R20B parameters (i.e. R2G
and R2E).  So I have created simpler or reduced versions of the models
whereby R20A = R20B = R20 in the target function (the relax library
code derived from the fitting_main_kex.py script is not touched).  In
the automated analysis presented to users, the simpler model is
optimised first.  Then instead of performing the expensive grid search
on the more complex model, the parameters of the simpler model are
taken as the starting point for the more complex model.  The R20A and
R20B values are initialised to the same R20 value, but these then
diverge.  Note that this has no effect on Monte Carlo simulation
speed.  This also is not used if the standard relax script interface
is used and the auto-analysis is avoided.  I will write an email once
all of the models are taken over into relax and all the reduced models
have been created.

Regards,

Edward


P. S.  The relax auto-analyses are simply large relax scripts bundled
with the program and presented to the user in a simple interface in
both the script/prompt UI and graphical user interface.



On 16 July 2013 18:13, Paul Schanda &lt;paul.schanda@xxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi Edward,

Sounds great.
I will be very interested to see how much speed you gain, and also how the
different fitting procedures (2D version, the Maple-derived numerical one,
and the 3D version) compare.
If all your optimizations bring an order of magnitude or so speed-up, it
will be a big advantage for the Monte Carlo runs.

best -

paul


On 16.07.13 17:40, Edward d'Auvergne wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">

Cheers,

I'll leave all the functionality intact then, but just default to
zeros.  As the R2eff calculation and matrix construction is in the
relax library and a clean separation between it and the target
function code (for optimisation), the relaxation dispersion
auto-analysis (to simplify the analysis for users), GUI, and the
specific analysis code, the functions can be directly imported into
simulation scripts and used as is.  I have now simplified and speed up
most of this code.  Most speed ups are due to a large reduction in the
number of multiplications per target function call, simply by
performing the multiplication at the highest loop level and storing
the value as a variable.  As well as by minimisation numpy matrix
creation and destruction.  Additional large speed ups in the analysis
of experimental data are due to a switch from the scipy optimisation
algorithms to those of minfx (<a  rel="nofollow" href="http://gna.org/projects/minfx/">http://gna.org/projects/minfx/</a>).

Regards,

Edward

On 16 July 2013 17:09, Dominique Marion (IBS) &lt;Dominique.Marion@xxxxxx&gt;
wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">

Hello,

We have found useful to carry out some simulations with the same
equations
to figure out the influence of some parameters.  You are right, the train
of
180ยบ pulses can be miscalibrated and the rf coil can be highly
inhomogeneous.  If the CPMG pulses differ from 180ยบ, then the spins spend
some fraction of time along the z-axis. In the case of slow tumbling
proteins, the difference between R1 and R2 may become quite large.
Whether
the small oscillations observed for some CPMG profiles originate from
imperfect 180ยบ remains to be demonstrated.

Cheers,

Dominique



On 16/7/13 16:35 , Edward d'Auvergne wrote:

Hello,

I'm now copying in the function returned by MakeFunction when a==1
into relax.  I have noticed that this has the ability to handle
miscalibrated pulses via the R180_3Dx() function, however the pi-pulse
angle is 180 + a degrees, where a is hardcoded to 0.0 degrees.  Is
this a planned future feature?

It is also not clear how the R1 relaxation rates for states G and E
(or A and B) are used.  Is the aim to have R1G (per spin), R1E (per
spin), and the pulse angle (all per magnetic field strength) as
optimisable parameters of the model?  For the current implementation,
I will just set these all to hardcoded values of zero, as neither
relax nor the fitting_main_kex.py script appear to use these.

Cheers,

Edward



_______________________________________________
relax (<a  rel="nofollow" href="http://www.nmr-relax.com">http://www.nmr-relax.com</a>)

This is the relax-devel mailing list
relax-devel@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="http://www.nmr-relax.com/mail.gna.org/listinfo/relax-devel">https://mail.gna.org/listinfo/relax-devel</a>

</pre></blockquote></blockquote><pre style="margin: 0em;">


--
Paul Schanda, Ph.D.
Biomolecular NMR group
Institut de Biologie Structurale Jean-Pierre Ebel (IBS)
41, rue Jules Horowitz
F-38027 Grenoble
France
+33 438 78 95 55
paul.schanda@xxxxxx
<a  rel="nofollow" href="http://www.ibs.fr/groups/biomolecular-nmr-spectroscopy?lang=en">http://www.ibs.fr/groups/biomolecular-nmr-spectroscopy?lang=en</a>

</pre></blockquote><pre style="margin: 0em;">


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00038" href="msg00038.html">Pulse miscalibration, R1A and R1B in the fitting_main_kex.py script.</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00039" href="msg00039.html">Re: Pulse miscalibration, R1A and R1B in the fitting_main_kex.py	script.</a></strong>
<ul><li><em>From:</em> Dominique Marion (IBS)</li></ul></li>
<li><strong><a name="00040" href="msg00040.html">Re: Pulse miscalibration,	R1A and R1B in the fitting_main_kex.py script.</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00043" href="msg00043.html">Re: Pulse miscalibration, R1A and R1B in the fitting_main_kex.py	script.</a></strong>
<ul><li><em>From:</em> Paul Schanda</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Wed Jul 17 13:40:09 2013</div>  
</body>
</html>
