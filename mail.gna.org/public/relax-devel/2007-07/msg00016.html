<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: Consistency tests -->
<!--X-From-R13: "Sqjneq q'Ohiretar" <rqjneq.qnhiretarNtznvy.pbz> -->
<!--X-Date: Mon, 09 Jul 2007 21:06:36 +0200 -->
<!--X-Message-Id: 7f080ed10707091205j38242590pe7dbc3abd182e41d@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 4672D803.4060009@ulaval.ca -->
<!--X-Reference: 7f080ed10706240949n1b42f06egd424e932d46db48f@mail.gmail.com -->
<!--X-Reference: 46814D2C.1020606@ulaval.ca -->
<!--X-Reference: 7f080ed10707090347m69be69b0w67fa204563dfc17b@mail.gmail.com -->
<!--X-Reference: 7f080ed10707090355x2c39cd01u4e4939dc1b40f77e@mail.gmail.com -->
<!--X-Reference: 46924763.2040703@ulaval.ca -->
<!--X-Reference: 7f080ed10707090825vbe84e84h26080e777b107cb1@mail.gmail.com -->
<!--X-Reference: 469255EB.4070600@ulaval.ca -->
<!--X-Reference: 7f080ed10707090934k6912141ev45423a51bb96ff3a@mail.gmail.com -->
<!--X-Reference: 20070709133145.w0k44cckock8o8w0@agora.ulaval.ca -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: Consistency tests -- July 09, 2007 - 21:06</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: Consistency tests</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00016" class="tabs">Index by Date</a> | <a href="threads.html#00016" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00015.html">Date Prev</a>] [<a href="msg00017.html">Date Next</a>] [<a href="msg00039.html">Thread Prev</a>] [<a href="msg00017.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: &quot;Sébastien Morin&quot; &lt;sebastien.morin.1@xxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Mon, 9 Jul 2007 21:05:58 +0200</li>
<li class="menuitem">
<em>Cc</em>: relax-devel@xxxxxxx</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00016.html">7f080ed10707091205j38242590pe7dbc3abd182e41d@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;4672D803.4060009@xxxxxxxxx&gt;	&lt;7f080ed10706240949n1b42f06egd424e932d46db48f@xxxxxxxxxxxxxx&gt;	&lt;46814D2C.1020606@xxxxxxxxx&gt;	&lt;7f080ed10707090347m69be69b0w67fa204563dfc17b@xxxxxxxxxxxxxx&gt;	&lt;7f080ed10707090355x2c39cd01u4e4939dc1b40f77e@xxxxxxxxxxxxxx&gt;	&lt;46924763.2040703@xxxxxxxxx&gt;	&lt;7f080ed10707090825vbe84e84h26080e777b107cb1@xxxxxxxxxxxxxx&gt;	&lt;469255EB.4070600@xxxxxxxxx&gt;	&lt;7f080ed10707090934k6912141ev45423a51bb96ff3a@xxxxxxxxxxxxxx&gt;	&lt;20070709133145.w0k44cckock8o8w0@xxxxxxxxxxxxxxx&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on July 09, 2007 - 21:06:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">
The patches are now in file format and I can patch correctly.  I'll
apply them one by one and carefully check them to see if anything
needs fixing or improvements.

Thanks,

Edward


On 7/9/07, Sébastien Morin &lt;sebastien.morin.1@xxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">
Hi Ed

Tell me if this works better. I'm now using the mail server directly from the
internet GUI... (not with Thuderbird).

If this does not work neither, maybe we could try with the task...

Ciao !


Sébastien


Selon Edward d'Auvergne &lt;edward.dauvergne@xxxxxxxxx&gt;, 09.07.2007:

&gt; I've tried cutting an pasting the patch but I get the following:
&gt;
&gt; edau@klymene:/media/usbdisk/relax/branches/consistency_tests_1.2&gt;
&gt; patch -p0 &lt; patch
&gt; patching file prompt/consistency_tests.py
&gt; Hunk #2 FAILED at 26.
&gt; Hunk #3 FAILED at 40.
&gt; Hunk #4 FAILED at 49.
&gt; Hunk #5 FAILED at 74.
&gt; 4 out of 5 hunks FAILED -- saving rejects to file
&gt; prompt/consistency_tests.py.rej
&gt; edau@klymene:/media/usbdisk/relax/branches/consistency_tests_1.2&gt;
&gt;
&gt; I don't know why, but thunderbird is destroying the attachment.  The
&gt; failed 'hunks' are the wrapped lines.  Maybe there is a way to prevent
&gt; thunderbird from doing this.  Otherwise using another email client (or
&gt; webmail) may work.  I could also create a task for this consistency
&gt; test work and these could be attached to the task.  It's best that,
&gt; for the record, the files are located within the permanent relax
&gt; infrastructure.
&gt;
&gt; Cheers,
&gt;
&gt; Edward
&gt;
&gt;
&gt;
&gt;
&gt; On 7/9/07, Sebastien Morin &lt;sebastien.morin.1@xxxxxxxxx&gt; wrote:
&gt; &gt; Hi again !
&gt; &gt;
&gt; &gt; Here is again the first patch for the file 'prompt/consistency_tests.py'.
&gt; &gt;
&gt; &gt; I modified the header for the copyrights.
&gt; &gt;
&gt; &gt; Also, the former patches were not copied-pasted, but attached using
&gt; &gt; Thunderbird after their creation using a command like 'svn diff &gt; patch'
&gt; &gt; under Linux. When I send those kinds of files as attachment, I usually
&gt; &gt; see them as text in the e-mail, but also as an attachment that can be
&gt; &gt; save. Tell me if it is okay and if it is still a problem, I'll put them
&gt; &gt; on my lab's website...
&gt; &gt;
&gt; &gt; Cheers
&gt; &gt;
&gt; &gt;
&gt; &gt; Séb :)
&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt; Edward d'Auvergne wrote:
&gt; &gt; &gt; Hi,
&gt; &gt; &gt;
&gt; &gt; &gt; Just add some text such as 'Copyright (C) 2007 Sebastien Morin
&gt; &gt; &gt; &lt;sebastien.morin.1 at ulaval.ca&gt;' underneath the already existent
&gt; &gt; &gt; copyright text.  The can be changed later, for example I can give you
&gt; &gt; &gt; a ???@nmr-relax.com email address which is an alias for any other
&gt; &gt; &gt; email address (once voted in as a relax developer).  Could you add
&gt; &gt; &gt; this and then resend the patches?  Ta.  If they are attached rather
&gt; &gt; &gt; than cut and paste that would be much easier for applying the patches
&gt; &gt; &gt; (as email wraps lines).  Also, maybe responding to your original posts
&gt; &gt; &gt; will allow the patches to be more easily tracked in the mailing list
&gt; &gt; &gt; <a  rel="nofollow" href="https://mail.gna.org/public/relax-devel/">https://mail.gna.org/public/relax-devel/</a>.
&gt; &gt; &gt;
&gt; &gt; &gt; Cheers,
&gt; &gt; &gt;
&gt; &gt; &gt; Edward
&gt; &gt; &gt;
&gt; &gt; &gt;
&gt; &gt; &gt; On 7/9/07, Sebastien Morin &lt;sebastien.morin.1@xxxxxxxxx&gt; wrote:
&gt; &gt; &gt;&gt; Hi !
&gt; &gt; &gt;&gt;
&gt; &gt; &gt;&gt; I'm about to create the patches to merge the consistency tests code 
into
&gt; &gt; &gt;&gt; the 1.2 branch.
&gt; &gt; &gt;&gt;
&gt; &gt; &gt;&gt; However, I have one question. How do I treat the copyrights ? Do I 
leave
&gt; &gt; &gt;&gt; the original author from which I copied the code and then modified it 
or
&gt; &gt; &gt;&gt; do I had my name to the code headers..?
&gt; &gt; &gt;&gt;
&gt; &gt; &gt;&gt; Thanks !
&gt; &gt; &gt;&gt;
&gt; &gt; &gt;&gt;
&gt; &gt; &gt;&gt; Sébastien  :)
&gt; &gt; &gt;&gt;
&gt; &gt; &gt;&gt;
&gt; &gt; &gt;&gt;
&gt; &gt; &gt;&gt;
&gt; &gt; &gt;&gt; Edward d'Auvergne wrote:
&gt; &gt; &gt;&gt; &gt; Oh, I've committed your patch at
&gt; &gt; &gt;&gt; &gt;
&gt; &gt; &gt;&gt;
&gt;
<a  rel="nofollow" href="http://maple.rsvs.ulaval.ca/mediawiki/index.php/Patch_consistency_tests_2007-06-26">http://maple.rsvs.ulaval.ca/mediawiki/index.php/Patch_consistency_tests_2007-06-26</a>
&gt; &gt; &gt;&gt;
&gt; &gt; &gt;&gt; &gt;
&gt; &gt; &gt;&gt; &gt; as revision r3324, applying it to the 1.2 branch.  I've carefully
&gt; &gt; &gt;&gt; &gt; checked the code and none of the changes are detrimental or could
&gt; &gt; &gt;&gt; &gt; affect the stability of the stable 1.2 relax codebase.  Note however
&gt; &gt; &gt;&gt; &gt; that the code in the branch will not run as the consistency_test.py
&gt; &gt; &gt;&gt; &gt; files are still identical copies of the jw_mapping.py files.
&gt; &gt; &gt;&gt; &gt;
&gt; &gt; &gt;&gt; &gt; Cheers,
&gt; &gt; &gt;&gt; &gt;
&gt; &gt; &gt;&gt; &gt; Edward
&gt; &gt; &gt;&gt; &gt;
&gt; &gt; &gt;&gt; &gt;
&gt; &gt; &gt;&gt; &gt; On 7/9/07, Edward d'Auvergne &lt;edward.dauvergne@xxxxxxxxx&gt; wrote:
&gt; &gt; &gt;&gt; &gt;&gt; Hi,
&gt; &gt; &gt;&gt; &gt;&gt;
&gt; &gt; &gt;&gt; &gt;&gt; I've now created two branches within the relax repository for you to
&gt; &gt; &gt;&gt; &gt;&gt; play with.  The first is a copy of the 1.2 line and is located at
&gt; &gt; &gt;&gt; &gt;&gt; svn.gna.org/svn/relax/branches/consistency_tests_1.2/.  The second 
is
&gt; &gt; &gt;&gt; &gt;&gt; a copy of the 1.3 line and is located at
&gt; &gt; &gt;&gt; &gt;&gt; svn.gna.org/svn/relax/branches/consistency_tests_1.3/.  I've
&gt; &gt; &gt;&gt; initially
&gt; &gt; &gt;&gt; &gt;&gt; used 'svn cp' to create the 5 consistency_tests.py files as 
described
&gt; &gt; &gt;&gt; &gt;&gt; in <a  rel="nofollow" href="https://mail.gna.org/public/relax-devel/2007-07/msg00001.html">https://mail.gna.org/public/relax-devel/2007-07/msg00001.html</a>
&gt; &gt; &gt;&gt; &gt;&gt; (Message-id:
&gt; &gt; &gt;&gt; &gt;&gt; &lt;7f080ed10707090251ve1c4a8fl7f8618843e5c9459@xxxxxxxxxxxxxx&gt;).
&gt; &gt; &gt;&gt; &gt;&gt;  Would you be able to create patches for these files (in the 1.2 
line
&gt; &gt; &gt;&gt; &gt;&gt; first, no need to worry about the 1.3 line yet), and then post the
&gt; &gt; &gt;&gt; &gt;&gt; individual patches as text file attachments to the mailing list?
&gt; &gt; &gt;&gt; &gt;&gt; Thanks.  I will then be able to commit these patches individually,
&gt; &gt; &gt;&gt; &gt;&gt; checking them in fine detail.
&gt; &gt; &gt;&gt; &gt;&gt;
&gt; &gt; &gt;&gt; &gt;&gt; Things to note in creating the patches from the code at
&gt; &gt; &gt;&gt; &gt;&gt; <a  rel="nofollow" href="http://maple.rsvs.ulaval.ca/mediawiki/index.php/Relax_development">http://maple.rsvs.ulaval.ca/mediawiki/index.php/Relax_development</a>
&gt; &gt; &gt;&gt; &gt;&gt; include the copyright preservation, a number of integers in
&gt; &gt; &gt;&gt; &gt;&gt; 'maths_fns/consistency_tests.py' which should be floating point
&gt; &gt; &gt;&gt; &gt;&gt; numbers (just add '.0' to the end of the number), the addition of
&gt; &gt; &gt;&gt; &gt;&gt; Grace plots as an output in the 
'sample_scripts/consistency_tests.py'
&gt; &gt; &gt;&gt; &gt;&gt; script to be able to create a picture similar to that on your relax
&gt; &gt; &gt;&gt; &gt;&gt; development site, maybe only allowing 'Tc' and 'tc' in the
&gt; &gt; &gt;&gt; &gt;&gt; return_data_name() function and not 'TC', and 'degrees' instead of
&gt; &gt; &gt;&gt; &gt;&gt; 'degree' in the return_units() function.
&gt; &gt; &gt;&gt; &gt;&gt;
&gt; &gt; &gt;&gt; &gt;&gt; One bug includes:
&gt; &gt; &gt;&gt; &gt;&gt;
&gt; &gt; &gt;&gt; &gt;&gt;              setattr(self.relax.data.res[self.run][index], 'csa',
&gt; &gt; &gt;&gt; &gt;&gt; float(value[0]))
&gt; &gt; &gt;&gt; &gt;&gt;              setattr(self.relax.data.res[self.run][index], 'r',
&gt; &gt; &gt;&gt; &gt;&gt; float(value[1]))
&gt; &gt; &gt;&gt; &gt;&gt; +            setattr(self.relax.data.res[self.run][index],
&gt; &gt; &gt;&gt; &gt;&gt; 'orientation', float(value[1]))
&gt; &gt; &gt;&gt; &gt;&gt; +            setattr(self.relax.data.res[self.run][index], 'tc',
&gt; &gt; &gt;&gt; &gt;&gt; float(value[1]))
&gt; &gt; &gt;&gt; &gt;&gt;
&gt; &gt; &gt;&gt; &gt;&gt; value[1] has been used twice.  I have a feeling there is another bug
&gt; &gt; &gt;&gt; &gt;&gt; somewhere where an index has been repeated a few times when it 
should
&gt; &gt; &gt;&gt; &gt;&gt; be different indices, but I can't find it at the moment.  The
&gt; &gt; &gt;&gt; &gt;&gt; individual patches should help.  Finally, I have a feeling that 
there
&gt; &gt; &gt;&gt; &gt;&gt; is unused code which can be deleted as it is a relic from the copy 
of
&gt; &gt; &gt;&gt; &gt;&gt; the J(w) mapping code and is not needed.  For the 1.3 line code I
&gt; &gt; &gt;&gt; &gt;&gt; would recommend that identical functions are shifted into files such
&gt; &gt; &gt;&gt; &gt;&gt; as 'specific_fns/base_class.py', but for the 1.2 line code I would
&gt; &gt; &gt;&gt; &gt;&gt; prefer the duplication as this means that the current stable code
&gt; &gt; &gt;&gt; base
&gt; &gt; &gt;&gt; &gt;&gt; remains stable.
&gt; &gt; &gt;&gt; &gt;&gt;
&gt; &gt; &gt;&gt; &gt;&gt; Cheers,
&gt; &gt; &gt;&gt; &gt;&gt;
&gt; &gt; &gt;&gt; &gt;&gt; Edward
&gt; &gt; &gt;&gt; &gt;&gt;
&gt; &gt; &gt;&gt; &gt;&gt;
&gt; &gt; &gt;&gt; &gt;&gt;
&gt; &gt; &gt;&gt; &gt;&gt; On 6/26/07, Sebastien Morin &lt;sebastien.morin.1@xxxxxxxxx&gt; wrote:
&gt; &gt; &gt;&gt; &gt;&gt; &gt; Hi,
&gt; &gt; &gt;&gt; &gt;&gt; &gt;
&gt; &gt; &gt;&gt; &gt;&gt; &gt; I started working on implementing the consistency tests last week
&gt; &gt; &gt;&gt; &gt;&gt; before
&gt; &gt; &gt;&gt; &gt;&gt; &gt; the last post was made and, hence, I worked on repository line 1.2
&gt; &gt; &gt;&gt; &gt;&gt; &gt; (revision 3303).
&gt; &gt; &gt;&gt; &gt;&gt; &gt;
&gt; &gt; &gt;&gt; &gt;&gt; &gt; I implemented the consistency tests as a new type of run ('ct')
&gt; &gt; &gt;&gt; &gt;&gt; similar
&gt; &gt; &gt;&gt; &gt;&gt; &gt; to the one for Jw mapping.
&gt; &gt; &gt;&gt; &gt;&gt; &gt;
&gt; &gt; &gt;&gt; &gt;&gt; &gt; The calculations are made for J(0), F_eta and F_R2 separately
&gt; &gt; &gt;&gt; for each
&gt; &gt; &gt;&gt; &gt;&gt; &gt; magnetic field (one at a time). The output results file is
&gt; &gt; &gt;&gt; similar to
&gt; &gt; &gt;&gt; &gt;&gt; &gt; the one for Jw mapping. The user then needs to plot them and
&gt; &gt; &gt;&gt; look for
&gt; &gt; &gt;&gt; &gt;&gt; &gt; consistency with its own criteria (calculation correlation
&gt; &gt; &gt;&gt; &gt;&gt; &gt; coefficients,  mean ratios and standard deviations, etc).
&gt; &gt; &gt;&gt; &gt;&gt; &gt;
&gt; &gt; &gt;&gt; &gt;&gt; &gt; Please look at the followinr URL for a listing of the
&gt; &gt; &gt;&gt; modifications to
&gt; &gt; &gt;&gt; &gt;&gt; &gt; old files and also necessary new files.
&gt; &gt; &gt;&gt; &gt;&gt; &gt;
&gt; &gt; &gt;&gt; &gt;&gt; &gt; <a  rel="nofollow" href="http://maple.rsvs.ulaval.ca/mediawiki/index.php/Relax_development">http://maple.rsvs.ulaval.ca/mediawiki/index.php/Relax_development</a>
&gt; &gt; &gt;&gt; &gt;&gt; &gt;
&gt; &gt; &gt;&gt; &gt;&gt; &gt; The file 'sample_scripts/consistency_tests.py' should be useful to
&gt; &gt; &gt;&gt; &gt;&gt; &gt; understand how the new procedure works.
&gt; &gt; &gt;&gt; &gt;&gt; &gt;
&gt; &gt; &gt;&gt; &gt;&gt; &gt; Even if this was done on repository line 1.2, I think it is
&gt; &gt; &gt;&gt; quite fine
&gt; &gt; &gt;&gt; &gt;&gt; &gt; since nothing was deleted but only things added (maybe too much,
&gt; &gt; &gt;&gt; as I
&gt; &gt; &gt;&gt; &gt;&gt; &gt; reproduced the Jw mapping approach, maybe too much as I added
&gt; &gt; &gt;&gt; lines in
&gt; &gt; &gt;&gt; &gt;&gt; &gt; the codes for grace, molmol, etc, maybe too much also since some
&gt; &gt; &gt;&gt; &gt;&gt; code is
&gt; &gt; &gt;&gt; &gt;&gt; &gt; duplicated from the Jw mapping code). The test-suite still works
&gt; &gt; &gt;&gt; &gt;&gt; &gt; perfectly and, so, I think it could be fine to add the tests to 
the
&gt; &gt; &gt;&gt; &gt;&gt; 1.2
&gt; &gt; &gt;&gt; &gt;&gt; &gt; line as well... However, if necessary, I could implement the
&gt; &gt; &gt;&gt; &gt;&gt; consistency
&gt; &gt; &gt;&gt; &gt;&gt; &gt; testing procedure on line 1.3, following your comments as I am
&gt; &gt; &gt;&gt; &gt;&gt; quite new
&gt; &gt; &gt;&gt; &gt;&gt; &gt; to Python and maybe made things somehow not perfectly...
&gt; &gt; &gt;&gt; &gt;&gt; &gt;
&gt; &gt; &gt;&gt; &gt;&gt; &gt; Please tell me what you think about this.
&gt; &gt; &gt;&gt; &gt;&gt; &gt;
&gt; &gt; &gt;&gt; &gt;&gt; &gt; Cheers,
&gt; &gt; &gt;&gt; &gt;&gt; &gt;
&gt; &gt; &gt;&gt; &gt;&gt; &gt;
&gt; &gt; &gt;&gt; &gt;&gt; &gt; Sébastien  :)
&gt; &gt; &gt;&gt; &gt;&gt; &gt;
&gt; &gt; &gt;&gt; &gt;&gt; &gt;
&gt; &gt; &gt;&gt; &gt;&gt; &gt;
&gt; &gt; &gt;&gt; &gt;&gt; &gt; Edward d'Auvergne wrote:
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt; Hi,
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt;
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt; I have previously talked about data set consistency.  For 
example
&gt; &gt; &gt;&gt; &gt;&gt; see
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt; the post at
&gt; &gt; &gt;&gt; &gt;&gt; <a  rel="nofollow" href="https://mail.gna.org/public/relax-users/2007-06/msg00001.html">https://mail.gna.org/public/relax-users/2007-06/msg00001.html</a>
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt; in which a few reasons for inconsistencies have been
&gt; &gt; &gt;&gt; explained.  I
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt; have, from experience, noticed that small changes in protein
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt; concentration can change the collected relaxation rates
&gt; &gt; &gt;&gt; &gt;&gt; significantly
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt; - most likely because of packing interactions.  All samples
&gt; &gt; &gt;&gt; should
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt; essentially be identical in all respects for the relaxation
&gt; &gt; &gt;&gt; rates to
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt; be compared.  And the temperate should always be fine tuned
&gt; &gt; &gt;&gt; between
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt; experiments and spectrometers using methanol (and always checked
&gt; &gt; &gt;&gt; &gt;&gt; later
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt; on if there is a large time between collecting the same
&gt; &gt; &gt;&gt; experiment).
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt;
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt; Therefore these tests would be quite useful.  Data consistency 
is
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt; essential for the model-free results to be correct (as well as
&gt; &gt; &gt;&gt; &gt;&gt; reduced
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt; spectral density mapping, SRLS, etc.) as this affects both the
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt; optimisation and model selection and can result in artificial
&gt; &gt; &gt;&gt; &gt;&gt; motions
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt; appearing.  However I don't know how these test would
&gt; &gt; &gt;&gt; currently fit
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt; within relax.  Maybe a new type of analysis should be created 
for
&gt; &gt; &gt;&gt; &gt;&gt; this
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt; (see the pipe.create() user function in the 1.3 line or the
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt; run.create() user function in the 1.2 line).  These ideas
&gt; &gt; &gt;&gt; should all
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt; go into the 1.3 line (via a branch) as the 1.2 line is stable
&gt; &gt; &gt;&gt; and no
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt; new major features will be added to this code.  What are the
&gt; &gt; &gt;&gt; &gt;&gt; ideas you
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt; have been playing with?
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt;
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt; Cheers,
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt;
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt; Edward
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt;
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt;
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt; On 6/15/07, Sebastien Morin &lt;sebastien.morin.1@xxxxxxxxx&gt; wrote:
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt;&gt; Hi everyone
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt;&gt;
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt;&gt; During the last months, I was astonished to realize that some
&gt; &gt; &gt;&gt; spin
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt;&gt; relaxation data I had acquired at different fields were not
&gt; &gt; &gt;&gt; &gt;&gt; consistent
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt;&gt; between each other. The way I realized that was by seeing
&gt; &gt; &gt;&gt; &gt;&gt; discrepancy
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt;&gt; between J(0) values calculated with those different datasets.
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt;&gt;
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt;&gt; I looked a little bit in the litterature and found some
&gt; &gt; &gt;&gt; interesting
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt;&gt; consistency tests in a paper by Fushman (Fushman et al., JACS,
&gt; &gt; &gt;&gt; &gt;&gt; 1998,
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt;&gt; 120:10947-10952).
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt;&gt;
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt;&gt; This paper present 2 consistency tests to compare datasets from
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt;&gt; different magnetic fields / samples / time / etc.
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt;&gt;
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt;&gt; I think it would be interesting to implement those simple tests
&gt; &gt; &gt;&gt; &gt;&gt; in relax
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt;&gt; so the user can, before trying to fit their data, know the
&gt; &gt; &gt;&gt; &gt;&gt; quality of
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt;&gt; those... Regrettably, very few people look at the consistency 
of
&gt; &gt; &gt;&gt; &gt;&gt; their
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt;&gt; datasets before analysis...
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt;&gt;
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt;&gt; The underlying principle is the same as when looking at
&gt; &gt; &gt;&gt; &gt;&gt; consistency for
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt;&gt; J(0). Thus, I think that those two tests and a J(0) test
&gt; &gt; &gt;&gt; should be
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt;&gt; implemented altogether...
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt;&gt;
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt;&gt; I'll try to work a bit on this. Mimicking the code for spectral
&gt; &gt; &gt;&gt; &gt;&gt; density
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt;&gt; should be a good starting point.
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt;&gt;
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt;&gt; Am I right ?
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt;&gt; Do you see any value in those tests ?
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt;&gt;
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt;&gt; Cheers
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt;&gt;
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt;&gt;
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt;&gt; Sébastien  :)
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt;&gt;
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt;&gt;
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt;&gt; _______________________________________________
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt;&gt; relax (<a  rel="nofollow" href="http://nmr-relax.com">http://nmr-relax.com</a>)
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt;&gt;
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt;&gt; This is the relax-devel mailing list
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt;&gt; relax-devel@xxxxxxx
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt;&gt;
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt;&gt; To unsubscribe from this list, get a password
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt;&gt; reminder, or change your subscription options,
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt;&gt; visit the list information page at
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt;&gt; <a  rel="nofollow" href="https://mail.gna.org/listinfo/relax-devel">https://mail.gna.org/listinfo/relax-devel</a>
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt;&gt;
&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt;
&gt; &gt; &gt;&gt; &gt;&gt; &gt;
&gt; &gt; &gt;&gt; &gt;&gt; &gt; --
&gt; &gt; &gt;&gt; &gt;&gt; &gt;          ______________________________________
&gt; &gt; &gt;&gt; &gt;&gt; &gt;      _______________________________________________
&gt; &gt; &gt;&gt; &gt;&gt; &gt;     |                                               |
&gt; &gt; &gt;&gt; &gt;&gt; &gt;    || Sebastien Morin                               ||
&gt; &gt; &gt;&gt; &gt;&gt; &gt;   ||| Etudiant au PhD en biochimie                  |||
&gt; &gt; &gt;&gt; &gt;&gt; &gt;  |||| Laboratoire de resonance magnetique nucleaire ||||
&gt; &gt; &gt;&gt; &gt;&gt; &gt; ||||| Dr Stephane Gagne                             |||||
&gt; &gt; &gt;&gt; &gt;&gt; &gt;  |||| CREFSIP (Universite Laval, Quebec, CANADA)    ||||
&gt; &gt; &gt;&gt; &gt;&gt; &gt;   ||| 1-418-656-2131 #4530                          |||
&gt; &gt; &gt;&gt; &gt;&gt; &gt;    ||                                               ||
&gt; &gt; &gt;&gt; &gt;&gt; &gt;     |_______________________________________________|
&gt; &gt; &gt;&gt; &gt;&gt; &gt;          ______________________________________
&gt; &gt; &gt;&gt; &gt;&gt; &gt;
&gt; &gt; &gt;&gt; &gt;&gt; &gt;
&gt; &gt; &gt;&gt; &gt;&gt; &gt;
&gt; &gt; &gt;&gt; &gt;&gt;
&gt; &gt; &gt;&gt; &gt;
&gt; &gt; &gt;&gt;
&gt; &gt; &gt;&gt; --
&gt; &gt; &gt;&gt;          ______________________________________
&gt; &gt; &gt;&gt;      _______________________________________________
&gt; &gt; &gt;&gt;     |                                               |
&gt; &gt; &gt;&gt;    || Sebastien Morin                               ||
&gt; &gt; &gt;&gt;   ||| Etudiant au PhD en biochimie                  |||
&gt; &gt; &gt;&gt;  |||| Laboratoire de resonance magnetique nucleaire ||||
&gt; &gt; &gt;&gt; ||||| Dr Stephane Gagne                             |||||
&gt; &gt; &gt;&gt;  |||| CREFSIP (Universite Laval, Quebec, CANADA)    ||||
&gt; &gt; &gt;&gt;   ||| 1-418-656-2131 #4530                          |||
&gt; &gt; &gt;&gt;    ||                                               ||
&gt; &gt; &gt;&gt;     |_______________________________________________|
&gt; &gt; &gt;&gt;          ______________________________________
&gt; &gt; &gt;&gt;
&gt; &gt; &gt;&gt;
&gt; &gt; &gt;&gt;
&gt; &gt; &gt;
&gt; &gt;
&gt; &gt; --
&gt; &gt;          ______________________________________
&gt; &gt;      _______________________________________________
&gt; &gt;     |                                               |
&gt; &gt;    || Sebastien Morin                               ||
&gt; &gt;   ||| Etudiant au PhD en biochimie                  |||
&gt; &gt;  |||| Laboratoire de resonance magnetique nucleaire ||||
&gt; &gt; ||||| Dr Stephane Gagne                             |||||
&gt; &gt;  |||| CREFSIP (Universite Laval, Quebec, CANADA)    ||||
&gt; &gt;   ||| 1-418-656-2131 #4530                          |||
&gt; &gt;    ||                                               ||
&gt; &gt;     |_______________________________________________|
&gt; &gt;          ______________________________________
&gt; &gt;
&gt; &gt;
&gt; &gt; Index: prompt/consistency_tests.py
&gt; &gt; ===================================================================
&gt; &gt; --- prompt/consistency_tests.py (revision 3324)
&gt; &gt; +++ prompt/consistency_tests.py (working copy)
&gt; &gt; @@ -1,6 +1,7 @@
&gt; &gt;
&gt;
###############################################################################
&gt; &gt;  #
&gt;    #
&gt; &gt;  # Copyright (C) 2004-2005 Edward d'Auvergne
&gt;    #
&gt; &gt; +# Copyright (C) 2007 Sebastien Morin &lt;sebastien.morin.1 at ulaval.ca&gt;
&gt; &gt;  #
&gt;    #
&gt; &gt;  # This file is part of the program relax.
&gt;    #
&gt; &gt;  #
&gt;    #
&gt; &gt; @@ -25,11 +26,11 @@
&gt; &gt;  import help
&gt; &gt;
&gt; &gt;
&gt; &gt; -class Jw_mapping:
&gt; &gt; +class Consistency_tests:
&gt; &gt;      def __init__(self, relax):
&gt; &gt;          # Help.
&gt; &gt;          self.__relax_help__ = \
&gt; &gt; -        &quot;&quot;&quot;Class containing functions specific to reduced spectral 
density
&gt; mapping.&quot;&quot;&quot;
&gt; &gt; +        &quot;&quot;&quot;Class containing functions specific to consistency tests for
&gt; datasets from different fields.&quot;&quot;&quot;
&gt; &gt;
&gt; &gt;          # Add the generic help string.
&gt; &gt;          self.__relax_help__ = self.__relax_help__ + &quot;\n&quot; +
&gt; help.relax_class_help
&gt; &gt; @@ -39,7 +40,7 @@
&gt; &gt;
&gt; &gt;
&gt; &gt;      def set_frq(self, run=None, frq=None):
&gt; &gt; -        &quot;&quot;&quot;Function for selecting which relaxation data to use in the 
J(w)
&gt; mapping.
&gt; &gt; +        &quot;&quot;&quot;Function for selecting which relaxation data to use in the
&gt; consistency tests.
&gt; &gt;
&gt; &gt;          Keyword Arguments
&gt; &gt;          ~~~~~~~~~~~~~~~~~
&gt; &gt; @@ -48,24 +49,23 @@
&gt; &gt;
&gt; &gt;          frq:  The spectrometer frequency in Hz.
&gt; &gt;
&gt; &gt; -
&gt; &gt;          Description
&gt; &gt;          ~~~~~~~~~~~
&gt; &gt;
&gt; &gt; -        This function will select the relaxation data to use in the
&gt; reduced spectral density mapping
&gt; &gt; -        corresponding to the given frequency.
&gt; &gt; +        This function will select the relaxation data to use in the
&gt; consistency tests
&gt; &gt; +        corresponding to the given frequencies.
&gt; &gt;
&gt; &gt;
&gt; &gt;          Examples
&gt; &gt;          ~~~~~~~~
&gt; &gt;
&gt; &gt; -        relax&gt; jw_mapping.set_frq('jw', 600.0 * 1e6)
&gt; &gt; -        relax&gt; jw_mapping.set_frq(run='jw', frq=600.0 * 1e6)
&gt; &gt; +        relax&gt; consistency_tests.set_frq('test', 600.0 * 1e6)
&gt; &gt; +        relax&gt; consistency_tests.set_frq(run='test', frq=600.0 * 1e6)
&gt; &gt;          &quot;&quot;&quot;
&gt; &gt;
&gt; &gt;          # Function intro text.
&gt; &gt;          if self.__relax__.interpreter.intro:
&gt; &gt; -            text = sys.ps3 + &quot;jw_mapping.set_frq(&quot;
&gt; &gt; +            text = sys.ps3 + &quot;consistency_tests.set_frq(&quot;
&gt; &gt;              text = text + &quot;run=&quot; + `run`
&gt; &gt;              text = text + &quot;, frq=&quot; + `frq` + &quot;)&quot;
&gt; &gt;              print text
&gt; &gt; @@ -74,9 +74,9 @@
&gt; &gt;          if type(run) != str:
&gt; &gt;              raise RelaxStrError, ('run', run)
&gt; &gt;
&gt; &gt; -        # The frq argument.
&gt; &gt; +        # The frq arguments.
&gt; &gt;          if type(frq) != float:
&gt; &gt;              raise RelaxStrError, ('frq', frq)
&gt; &gt;
&gt; &gt;          # Execute the functional code.
&gt; &gt; -        self.__relax__.specific.jw_mapping.set_frq(run=run, frq=frq)
&gt; &gt; +        self.__relax__.specific.consistency_tests.set_frq(run=run,
&gt; frq=frq)
&gt; &gt;
&gt; &gt;
&gt;
&gt;

</pre></blockquote><pre style="margin: 0em;">


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00023" href="msg00023.html">Re: Consistency tests</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00022" href="msg00022.html">Re: Consistency tests</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00021" href="msg00021.html">Re: Consistency tests</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00020" href="msg00020.html">Re: Consistency tests</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00017" href="msg00017.html">Re: Consistency tests</a></strong>
<ul><li><em>From:</em> Sebastien Morin</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00002" href="msg00002.html">Re: Consistency tests</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00003" href="msg00003.html">Re: Consistency tests</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00004" href="msg00004.html">Re: Consistency tests</a></strong>
<ul><li><em>From:</em> Sebastien Morin</li></ul></li>
<li><strong><a name="00008" href="msg00008.html">Re: Consistency tests</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00009" href="msg00009.html">Re: Consistency tests</a></strong>
<ul><li><em>From:</em> Sebastien Morin</li></ul></li>
<li><strong><a name="00013" href="msg00013.html">Re: Consistency tests</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00014" href="msg00014.html">Re: Consistency tests</a></strong>
<ul><li><em>From:</em> Sébastien Morin</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Fri Jul 13 13:20:28 2007</div>  
</body>
</html>
