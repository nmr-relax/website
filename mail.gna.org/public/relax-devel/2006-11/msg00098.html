<!-- MHonArc v2.6.10 -->
<!--X-Subject: Re: [bug #7670] scons compile issue -->
<!--X-From-R13: Rbhtynf Ybwrgva <qbhtynf.xbwrgvaNtznvy.pbz> -->
<!--X-Date: Wed, 08 Nov 2006 17:28:18 +0100 -->
<!--X-Message-Id: 0E180DBB&#45;896A&#45;45F6&#45;B19D&#45;D6A02FD2BA4A@gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 20061108&#45;135202.sv0.47378@gna.org -->
<!--X-Reference: 7f080ed10611080630l17317622mc9c0e13c514fc256@mail.gmail.com -->
<!--X-Reference: D3013D2F&#45;373E&#45;4BC8&#45;B5F9&#45;02D87B274F6A@gmail.com -->
<!--X-Reference: 7f080ed10611080807h508223a9i27bf82e947dc828a@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [bug #7670] scons compile issue -- November 08, 2006 - 17:28</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: [bug #7670] scons compile issue</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00098" class="tabs">Index by Date</a> | <a href="threads.html#00098" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00097.html">Date Prev</a>] [<a href="msg00099.html">Date Next</a>] [<a href="msg00099.html">Thread Prev</a>] [<a href="msg00102.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Edward d'Auvergne &lt;edward.dauvergne@xxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Wed, 8 Nov 2006 11:27:30 -0500</li>
<li class="menuitem">
<em>Cc</em>: relax-devel@xxxxxxx</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00098.html">0E180DBB-896A-45F6-B19D-D6A02FD2BA4A@gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;<a href="msg00085.html">20061108-135202.sv0.47378@gna.org</a>&gt;	&lt;<a href="msg00087.html">7f080ed10611080630l17317622mc9c0e13c514fc256@mail.gmail.com</a>&gt;	&lt;<a href="msg00092.html">D3013D2F-373E-4BC8-B5F9-02D87B274F6A@gmail.com</a>&gt;	&lt;<a href="msg00094.html">7f080ed10611080807h508223a9i27bf82e947dc828a@mail.gmail.com</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Douglas Kojetin</strong> on November 08, 2006 - 17:28:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<tt>I worked out some settings so that I no longer receive the error.   
The steps I used are outlined below:</tt><br>
<br>
<pre style="margin: 0em;">(1) grabbed a clean 1.3 source via svn</pre><br>
<tt>(2) changed the first in the 'relax' file to read:<br>
     #! /usr/bin/env python<br>
which by default will use /sw/bin/python instead of /usr/bin/python  
on my system</tt><br>
<br>
<tt>(3) edited the gnulink.py in the scons distribution (line 49):<br>
    elif env['PLATFORM'] == 'darwin':<br>
        #env['SHLINKFLAGS'] = SCons.Util.CLVar('$LINKFLAGS - 
dynamiclib')<br>
        env['SHLINKFLAGS'] = SCons.Util.CLVar('$LINKFLAGS')</tt><br>
<br>
<pre style="margin: 0em;">(4) invoked 'scons' in the main directory</pre><br>
<tt>(5) moved 'maths_fns/relax_fit.dylib' to 'maths_fns/relax_fit.so' to  
match the file name that is present after linux complication</tt><br>
<br>
<pre style="margin: 0em;"><br>Would it be possible to change the
     #! /usr/bin/env python
line in relax to
     #! /usr/bin/env python
or would that break functionality?</pre><br>
<pre style="margin: 0em;">Doug</pre><br>
<pre style="margin: 0em;">On Nov 8, 2006, at 11:07 AM, Edward d'Auvergne wrote:</pre><br>
<blockquote class="blockquote"><pre style="margin: 0em;">I wonder if it is the file 'maths_fns/relax_fit.dylib' which should
have a different extension?  As relax hides the importing error
messages and prints 'ImportError: relaxation curve fitting is
unavailable, try compiling the C modules.' instead, you can get the
true error message by typing the following at the relax prompt:</pre><br>
<tt>from maths_fns.relax_fit import setup, func, dfunc, d2func,  
back_calc_I</tt><br>
<br>
<pre style="margin: 0em;">Does typing this give any useful messages?</pre><br>
<pre style="margin: 0em;">Edward</pre><br>
<tt><br>On 11/9/06, Douglas Kojetin &lt;douglas.kojetin@xxxxxxxxx&gt; wrote:
</tt><blockquote class="blockquote"><pre style="margin: 0em;">Hi Edward-</pre><br>
<pre style="margin: 0em;">The following worked without error:</pre><br>
<tt>gcc -bundle -bundle_loader /sw/bin/python -dynamic -o<br>
maths_fns/relax_fit.dylib maths_fns/c_chi2.os maths_fns/ 
exponential.os<br>
maths_fns/relax_fit.os</tt><br>
<br>
<pre style="margin: 0em;">but invoking relax afterwards suggests the relaxation curve fitting
is still not available:</pre><br>
<pre style="margin: 0em;">% ./relax --test</pre><br>
<pre style="margin: 0em;">ImportError: relaxation curve fitting is unavailible, try compiling
the C modules.</pre><br>
<pre style="margin: 0em;">Is there anything else I need to do or should try?</pre><br>
<pre style="margin: 0em;">Thanks,
Doug</pre><br>
<tt><br>On Nov 8, 2006, at 9:30 AM, Edward d'Auvergne wrote:<br>
&gt; Hi,<br>
&gt;<br>
&gt; I have to warn you first that the 'tensor_pdb' branch is very  
unstable<br>
&gt; code at the moment and I'm constantly breaking things as the code<br>
&gt; shapes up.  There may be times when it won't even run.  These  
aren't<br>
&gt; related to this bug though.<br>
&gt;<br>
&gt; I've had a look at the 'sconstruct' script in the base relax  
directory<br>
&gt; and one thing which is apparent is the '-dynamiclib' flag being  
passed<br>
&gt; into 'gcc'.  The script has been specifically modified for OS X to<br>
&gt; compile the shared objects to be loaded by python, hence the<br>
&gt; '-bundle', etc. flags.  However '-dynamiclib' is not one of the<br>
&gt; options in the script so it must be SCons adding that.  If you type<br>
&gt; the following gcc line at the prompt, do get the same<br>
&gt; 'powerpc-apple-darwin8-gcc-4.0.1' error message or does the code<br>
&gt; compile?<br>
&gt;<br>
&gt; gcc -bundle -bundle_loader /sw/bin/python -dynamic -o<br>
&gt; maths_fns/relax_fit.dylib maths_fns/c_chi2.os maths_fns/ 
exponential.os<br>
&gt; maths_fns/relax_fit.os<br>
&gt;<br>
&gt; If we can work out how to compile the C modules on the command  
line,<br>
&gt; then the SCons script can be subsequently updated to pass the  
correct<br>
&gt; options to gcc.<br>
&gt;<br>
&gt; Cheers,<br>
&gt;<br>
&gt; Edward<br>
&gt;<br>
&gt;<br>
&gt; On 11/8/06, anonymous &lt;NO-REPLY.INVALID-ADDRESS@xxxxxxx&gt; wrote:<br>
&gt;&gt;<br>
&gt;&gt; URL:<br>
&gt;&gt;   &lt;<a  href="http://gna.org/bugs/?7670">http://gna.org/bugs/?7670</a>&gt;<br>
&gt;&gt;<br>
&gt;&gt;                  Summary: scons compile issue<br>
&gt;&gt;                  Project: relax<br>
&gt;&gt;             Submitted by: None<br>
&gt;&gt;             Submitted on: Wednesday 11/08/2006 at 13:52 CET<br>
&gt;&gt;                 Category: Scons build system<br>
&gt;&gt;                 Priority: 5 - Normal<br>
&gt;&gt;                 Severity: 4 - Important<br>
&gt;&gt;                   Status: None<br>
&gt;&gt;                  Privacy: Public<br>
&gt;&gt;              Assigned to: None<br>
&gt;&gt;          Originator Name: doug<br>
&gt;&gt;         Originator Email:<br>
&gt;&gt;              Open/Closed: Open<br>
&gt;&gt;                  Release: 1.2.7<br>
&gt;&gt;         Operating System: Mac OS X<br>
&gt;&gt;<br>
&gt;&gt;     _______________________________________________________<br>
&gt;&gt;<br>
&gt;&gt; Details:<br>
&gt;&gt;<br>
&gt;&gt; I'm using the tensor_pdb version (svn co<br>
&gt;&gt; svn://svn.gna.org/svn/relax/branches/tensor_pdb) and running Mac<br>
&gt;&gt; OS X 10.4.8<br>
&gt;&gt; w/ gcc version 4.0.1 (PowerPC version).<br>
&gt;&gt;<br>
&gt;&gt; I tried to install relax using the directions in the relax.pdf<br>
&gt;&gt; section 1.2.1<br>
&gt;&gt; using the 'scons' program under OS X.  I am seeing the following<br>
&gt;&gt; error (even<br>
&gt;&gt; after trying to execute 'scons' a few times, which is shown  
below):<br>
&gt;&gt;<br>
&gt;&gt; % scons clean<br>
&gt;&gt; scons: Reading SConscript files ...<br>
&gt;&gt; scons: done reading SConscript files.<br>
&gt;&gt; scons: Building targets ...<br>
&gt;&gt; clean_temp_files([&quot;clean_temp&quot;], [])<br>
&gt;&gt;<br>
&gt;&gt; ###############################<br>
&gt;&gt; # Cleaning up temporary files #<br>
&gt;&gt; ###############################<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt; Removing the files ending in ['pyc', 'bak', 'o', 'os', 'obj',<br>
&gt;&gt; 'exp', 'lib'].<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt; clean_manual_files([&quot;manual_clean&quot;], [])<br>
&gt;&gt;<br>
&gt;&gt; ##########################################<br>
&gt;&gt; # Cleaning up the temporary manual files #<br>
&gt;&gt; ##########################################<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt; clean_files([&quot;clean&quot;], [])<br>
&gt;&gt;<br>
&gt;&gt; ###############<br>
&gt;&gt; # Cleaning up #<br>
&gt;&gt; ###############<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt; Removing the files ending in ['so', 'sconsign', 'dll'].<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt; scons: done building targets.<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt; % scons<br>
&gt;&gt; scons: Reading SConscript files ...<br>
&gt;&gt; scons: done reading SConscript files.<br>
&gt;&gt; scons: Building targets ...<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt; ###########################<br>
&gt;&gt; # Compiling the C modules #<br>
&gt;&gt; ###########################<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt; Building the relaxation curve fitting module 'maths_fns/<br>
&gt;&gt; relax_fit.dylib'<br>
&gt;&gt;<br>
&gt;&gt; gcc -I/sw/include/python2.4 -fPIC -c -o maths_fns/c_chi2.os<br>
&gt;&gt; maths_fns/c_chi2.c<br>
&gt;&gt; gcc -I/sw/include/python2.4 -fPIC -c -o maths_fns/exponential.os<br>
&gt;&gt; maths_fns/exponential.c<br>
&gt;&gt; gcc -I/sw/include/python2.4 -fPIC -c -o maths_fns/relax_fit.os<br>
&gt;&gt; maths_fns/relax_fit.c<br>
&gt;&gt; gcc -bundle -bundle_loader /sw/bin/python -dynamic -dynamiclib -o<br>
&gt;&gt; maths_fns/relax_fit.dylib maths_fns/c_chi2.os maths_fns/<br>
&gt;&gt; exponential.os<br>
&gt;&gt; maths_fns/relax_fit.os<br>
&gt;&gt; powerpc-apple-darwin8-gcc-4.0.1: -bundle not allowed with - 
dynamiclib<br>
&gt;&gt; scons: *** [maths_fns/relax_fit.dylib] Error 1<br>
&gt;&gt; scons: building terminated because of errors.<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt; I blindly tried removing the -bundle and -bundle_loader flags, but<br>
&gt;&gt; that did<br>
&gt;&gt; not help.<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt;     _______________________________________________________<br>
&gt;&gt;<br>
&gt;&gt; Follow-up Comments:<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt; -------------------------------------------------------<br>
&gt;&gt; Date: Wednesday 11/08/2006 at 13:52 CETBy: Anonymous<br>
&gt;&gt; I'm using the tensor_pdb version (svn co<br>
&gt;&gt; svn://svn.gna.org/svn/relax/branches/tensor_pdb) and running Mac<br>
&gt;&gt; OS X 10.4.8<br>
&gt;&gt; w/ gcc version 4.0.1 (PowerPC version).<br>
&gt;&gt;<br>
&gt;&gt; I tried to install relax using the directions in the relax.pdf<br>
&gt;&gt; section 1.2.1<br>
&gt;&gt; using the 'scons' program under OS X.  I am seeing the following<br>
&gt;&gt; error (even<br>
&gt;&gt; after trying to execute 'scons' a few times, which is shown  
below):<br>
&gt;&gt;<br>
&gt;&gt; % scons clean<br>
&gt;&gt; scons: Reading SConscript files ...<br>
&gt;&gt; scons: done reading SConscript files.<br>
&gt;&gt; scons: Building targets ...<br>
&gt;&gt; clean_temp_files([&quot;clean_temp&quot;], [])<br>
&gt;&gt;<br>
&gt;&gt; ###############################<br>
&gt;&gt; # Cleaning up temporary files #<br>
&gt;&gt; ###############################<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt; Removing the files ending in ['pyc', 'bak', 'o', 'os', 'obj',<br>
&gt;&gt; 'exp', 'lib'].<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt; clean_manual_files([&quot;manual_clean&quot;], [])<br>
&gt;&gt;<br>
&gt;&gt; ##########################################<br>
&gt;&gt; # Cleaning up the temporary manual files #<br>
&gt;&gt; ##########################################<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt; clean_files([&quot;clean&quot;], [])<br>
&gt;&gt;<br>
&gt;&gt; ###############<br>
&gt;&gt; # Cleaning up #<br>
&gt;&gt; ###############<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt; Removing the files ending in ['so', 'sconsign', 'dll'].<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt; scons: done building targets.<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt; % scons<br>
&gt;&gt; scons: Reading SConscript files ...<br>
&gt;&gt; scons: done reading SConscript files.<br>
&gt;&gt; scons: Building targets ...<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt; ###########################<br>
&gt;&gt; # Compiling the C modules #<br>
&gt;&gt; ###########################<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt; Building the relaxation curve fitting module 'maths_fns/<br>
&gt;&gt; relax_fit.dylib'<br>
&gt;&gt;<br>
&gt;&gt; gcc -I/sw/include/python2.4 -fPIC -c -o maths_fns/c_chi2.os<br>
&gt;&gt; maths_fns/c_chi2.c<br>
&gt;&gt; gcc -I/sw/include/python2.4 -fPIC -c -o maths_fns/exponential.os<br>
&gt;&gt; maths_fns/exponential.c<br>
&gt;&gt; gcc -I/sw/include/python2.4 -fPIC -c -o maths_fns/relax_fit.os<br>
&gt;&gt; maths_fns/relax_fit.c<br>
&gt;&gt; gcc -bundle -bundle_loader /sw/bin/python -dynamic -dynamiclib -o<br>
&gt;&gt; maths_fns/relax_fit.dylib maths_fns/c_chi2.os maths_fns/<br>
&gt;&gt; exponential.os<br>
&gt;&gt; maths_fns/relax_fit.os<br>
&gt;&gt; powerpc-apple-darwin8-gcc-4.0.1: -bundle not allowed with - 
dynamiclib<br>
&gt;&gt; scons: *** [maths_fns/relax_fit.dylib] Error 1<br>
&gt;&gt; scons: building terminated because of errors.<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt; I blindly tried removing the -bundle and -bundle_loader flags, but<br>
&gt;&gt; that did<br>
&gt;&gt; not help.<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt;     _______________________________________________________<br>
&gt;&gt;<br>
&gt;&gt; Reply to this item at:<br>
&gt;&gt;<br>
&gt;&gt;   &lt;<a  href="http://gna.org/bugs/?7670">http://gna.org/bugs/?7670</a>&gt;<br>
&gt;&gt;<br>
&gt;&gt; _______________________________________________<br>
&gt;&gt;   Message sent via/by Gna!<br>
&gt;&gt;   <a  href="http://gna.org/">http://gna.org/</a><br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt; _______________________________________________<br>
&gt;&gt; relax (<a  href="http://nmr-relax.com">http://nmr-relax.com</a>)<br>
&gt;&gt;<br>
&gt;&gt; This is the relax-devel mailing list<br>
&gt;&gt; relax-devel@xxxxxxx<br>
&gt;&gt;<br>
&gt;&gt; To unsubscribe from this list, get a password<br>
&gt;&gt; reminder, or change your subscription options,<br>
&gt;&gt; visit the list information page at<br>
&gt;&gt; <a  href="http://www.nmr-relax.com/mail.gna.org/listinfo/relax-devel">https://mail.gna.org/listinfo/relax-devel</a><br>
&gt;&gt;</tt><br>
<br>
<pre style="margin: 0em;"><br></pre><br>
<br>
</blockquote></blockquote><pre style="margin: 0em;"><br></pre><br>
<br>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00111" href="msg00111.html">Re: [bug #7670] scons compile issue</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00102" href="msg00102.html">Re: [bug #7670] scons compile issue</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00085" href="msg00085.html">[bug #7670] scons compile issue</a></strong>
<ul><li><em>From:</em> anonymous</li></ul></li>
<li><strong><a name="00087" href="msg00087.html">Re: [bug #7670] scons compile issue</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00092" href="msg00092.html">Re: [bug #7670] scons compile issue</a></strong>
<ul><li><em>From:</em> Douglas Kojetin</li></ul></li>
<li><strong><a name="00094" href="msg00094.html">Re: [bug #7670] scons compile issue</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Thu Nov 09 05:00:35 2006</div>  
</body>
</html>
