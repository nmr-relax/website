<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: relax 1.3.13/14 oddities -->
<!--X-From-R13: Xnpx Vbjnegu <ubjneguNoebzb.zrq.hp.rqh> -->
<!--X-Date: Mon, 26 Mar 2012 19:55:09 +0200 -->
<!--X-Message-Id: 20120326175439.GA31913@bromo.med.uc.edu -->
<!--X-Content-Type: multipart/mixed -->
<!--X-Reference: 20120326161412.GA30924@bromo.med.uc.edu -->
<!--X-Reference: CAED9pY8pV+033UdZqPbLQeehn8_Tr71pxtzFvFToXGS7q5=UNA@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: relax 1.3.13/14 oddities -- March 26, 2012 - 19:55</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: relax 1.3.13/14 oddities</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00055" class="tabs">Index by Date</a> | <a href="threads.html#00055" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00054.html">Date Prev</a>] [<a href="msg00056.html">Date Next</a>] [<a href="msg00054.html">Thread Prev</a>] [<a href="msg00058.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: &quot;Edward d'Auvergne&quot; &lt;edward.dauvergne@xxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Mon, 26 Mar 2012 13:54:39 -0400</li>
<li class="menuitem">
<em>Cc</em>: relax-users@xxxxxxx</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00055.html">20120326175439.GA31913@bromo.med.uc.edu</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;20120326161412.GA30924@xxxxxxxxxxxxxxxx&gt;	&lt;CAED9pY8pV+033UdZqPbLQeehn8_Tr71pxtzFvFToXGS7q5=UNA@xxxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>User-agent</em>: Mutt/1.5.18 (2008-05-17)</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Jack Howarth</strong> on March 26, 2012 - 19:55:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">On Mon, Mar 26, 2012 at 07:16:31PM +0200, Edward d'Auvergne wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi Jack,

Thank you for updating this!  From memory, I did see a similar problem
when I was using the fink versions of all the software required.
Though I also had many problems with dependency clashes with Python,
wxPython, numpy, and scipy (note this is different to Scientific
Python which is no longer a dependency, see
<a  rel="nofollow" href="http://pdb.finkproject.org/pdb/package.php/scipy-py27">http://pdb.finkproject.org/pdb/package.php/scipy-py27</a>) - I had to use
the sources and these different relax dependencies had their own
dependencies which were not compatible with each other.  The problem,
I think, was the dependance on different gcc versions, so each was
taking a day or longer to build as fink kept rebuilding the full tool
chain.  Anyway, that's not completely related to this problem and
might already be resolved in fink.

The problem looks more like a wxPython issue.  Would you be able to
tell me the fink repository software and versions you used for this so
I can try to replicate the problem?  Do you use the binary
distribution archive for the dependencies or have fink compile from
the source archives?  I am using XCode 3.2.2, but I don't think using
4.2 will change this problem.  If you had the exact sequence of fink
commnds to set the relax dependencies up, that would be appreciated as
I could then be sure that I have close to the same setup as you.  Then
I could debug and find the exact xwgtk problem, and come up with a
special work around.

Cheers!

Edward
</pre></blockquote><pre style="margin: 0em;">

Edward,
    Try the attached packaging placed in /sw/fink/10.4/local/main/finkinfo. I 
don't
know how old your fink installation is. If it is rather old, you might want 
to consider
a clean bootstrap following the instructions on 
<a  rel="nofollow" href="http://www.finkproject.org/download/srcdist.php">http://www.finkproject.org/download/srcdist.php</a>.
You will want to move aside your current fink installation from /sw to 
/sw.old beforehand.
Also make sure you do 'fink selfupdate-cvs' and 'fink update-all' to keep your
trees and installation current. You should be able to just use 'fink install 
relax-py27'
to install relax 1.3.14. I would also consider upgrading your Xcode to 3.2.6 
which
is the last release of the 3.2.x series. Oh, on darwin10, I used the gcc46 
compilers
for the build, when prompted, if that makes any difference.
                     Jack
ps I also have built relax 1.3.14 under fink but had to use the 2.9.3 release 
of 
wxPython because that is the only wxPython they have for python 2.7 in 
macports.
Have you tested relax against the wxPython 2.9.3 release on linux or any 
other target?



</pre><blockquote class="blockquote"><pre style="margin: 0em;">




On 26 March 2012 18:14, Jack Howarth &lt;howarth@xxxxxxxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Edward,
  I am in the process of updating the relax-py and relax packages in fink 
and
macports to the latest release. However I am seeing some oddities with 
the new
gui interface. In both cases, relax 1.3.13 and 1.3.14 exhibits a bug when
executed as 'relax --gui'. The gui interface window opens much larger 
than the
displayed contents. Only if I refresh the window does the contents 
properly
expand out to the actual size of the window (by clicking on the green zoom
button in the window frame twice). If I move aside the window, I also see 
a small
square with a butterfly icon left on the screen. This square can't be 
closed or
moved. Running 'relax --test-suite' is even more problematic as it seems 
to
be trapped in an endless loop of display the squares with the butterfly 
icon
and segfaults on exiting...

% relax --test-suite
/sw/lib/python2.7/site-packages/wx-2.8-gtk2-unicode/wx/_core.py:14448: 
UserWarning: wxPython/wxWidgets release number mismatch
 warnings.warn(&quot;wxPython/wxWidgets release number mismatch&quot;)
Echoing of user function calls has been enabled.




#############################
# System / functional tests #
#############################


.........................................................................................................................................................................................................................................
----------------------------------------------------------------------
Ran 233 tests in 291.075s

OK




##############
# Unit tests #
##############


................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................
----------------------------------------------------------------------
Ran 1232 tests in 11.183s

OK




#############
# GUI tests #
#############



(python2.7:9037): Gtk-WARNING **: Unable to find default local directory 
monitor type

(python2.7:9037): Gtk-WARNING **: Unable to find default local directory 
monitor type

(python2.7:9037): Gtk-WARNING **: Unable to find default local directory 
monitor type

(python2.7:9037): Gtk-WARNING **: Unable to find default local directory 
monitor type

(python2.7:9037): Gtk-WARNING **: Unable to find default local directory 
monitor type

(python2.7:9037): Gtk-WARNING **: Unable to find default local directory 
monitor type

(python2.7:9037): Gtk-WARNING **: Unable to find default local directory 
monitor type

(python2.7:9037): Gtk-WARNING **: Unable to find default local directory 
monitor type

(python2.7:9037): Gtk-WARNING **: Unable to find default local directory 
monitor type

(python2.7:9037): Gtk-WARNING **: Unable to find default local directory 
monitor type

(python2.7:9037): Gtk-WARNING **: Unable to find default local directory 
monitor type

(python2.7:9037): Gtk-WARNING **: Unable to find default local directory 
monitor type

(python2.7:9037): Gtk-WARNING **: Unable to find default local directory 
monitor type

(python2.7:9037): Gtk-WARNING **: Unable to find default local directory 
monitor type
.
(python2.7:9037): Gtk-WARNING **: Unable to find default local directory 
monitor type

(python2.7:9037): Gtk-WARNING **: Unable to find default local directory 
monitor type

(python2.7:9037): Gtk-WARNING **: Unable to find default local directory 
monitor type

(python2.7:9037): Gtk-WARNING **: Unable to find default local directory 
monitor type

(python2.7:9037): Gtk-WARNING **: Unable to find default local directory 
monitor type

(python2.7:9037): Gtk-WARNING **: Unable to find default local directory 
monitor type

(python2.7:9037): Gtk-WARNING **: Unable to find default local directory 
monitor type

(python2.7:9037): Gtk-WARNING **: Unable to find default local directory 
monitor type
.
(python2.7:9037): Gtk-WARNING **: Unable to find default local directory 
monitor type

(python2.7:9037): Gtk-WARNING **: Unable to find default local directory 
monitor type

(python2.7:9037): Gtk-WARNING **: Unable to find default local directory 
monitor type

(python2.7:9037): Gtk-WARNING **: Unable to find default local directory 
monitor type

(python2.7:9037): Gtk-WARNING **: Unable to find default local directory 
monitor type

(python2.7:9037): Gtk-WARNING **: Unable to find default local directory 
monitor type

(python2.7:9037): Gtk-WARNING **: Unable to find default local directory 
monitor type

(python2.7:9037): Gtk-WARNING **: Unable to find default local directory 
monitor type

(python2.7:9037): Gtk-WARNING **: Unable to find default local directory 
monitor type

(python2.7:9037): Gtk-WARNING **: Unable to find default local directory 
monitor type

(python2.7:9037): Gtk-WARNING **: Unable to find default local directory 
monitor type

(python2.7:9037): Gtk-WARNING **: Unable to find default local directory 
monitor type

(python2.7:9037): Gtk-WARNING **: Unable to find default local directory 
monitor type

(python2.7:9037): Gtk-WARNING **: Unable to find default local directory 
monitor type

(python2.7:9037): Gtk-WARNING **: Unable to find default local directory 
monitor type

(python2.7:9037): Gtk-WARNING **: Unable to find default local directory 
monitor type

(python2.7:9037): Gtk-WARNING **: Unable to find default local directory 
monitor type

(python2.7:9037): Gtk-WARNING **: Unable to find default local directory 
monitor type

(python2.7:9037): Gtk-WARNING **: Unable to find default local directory 
monitor type

(python2.7:9037): Gtk-WARNING **: Unable to find default local directory 
monitor type

(python2.7:9037): Gtk-WARNING **: Unable to find default local directory 
monitor type

(python2.7:9037): Gtk-WARNING **: Unable to find default local directory 
monitor type

(python2.7:9037): Gtk-WARNING **: Unable to find default local directory 
monitor type

(python2.7:9037): Gtk-WARNING **: Unable to find default local directory 
monitor type
..
----------------------------------------------------------------------
Ran 4 tests in 70.926s

OK




###################################
# Summary of the relax test suite #
###################################


# Optional packages/modules
###########################

No tests skipped due to missing modules.

# Synopsis
##########

System/functional tests ......................................... [ OK ]
Unit tests ...................................................... [ OK ]
GUI tests ....................................................... [ OK ]
Synopsis ........................................................ [ OK ]



Segmentation fault

It is odd that the GUI tests pass but that relax segfaults in the process.
                Jack
ps This is on x86_64 fink under darwin10 using Xcode 4.2.

_______________________________________________
relax (<a  rel="nofollow" href="http://nmr-relax.com">http://nmr-relax.com</a>)

This is the relax-users mailing list
relax-users@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="http://www.nmr-relax.com/mail.gna.org/listinfo/relax-users">https://mail.gna.org/listinfo/relax-users</a>
</pre></blockquote></blockquote><pre style="margin: 0em;">Info2: &lt;&lt;
Package: relax-py%type_pkg[python]
Version: 1.3.14
Revision: 1
Type: python (2.6 2.7)
Source: <a  rel="nofollow" href="http://download.gna.org/relax/relax-%v.src.tar.bz2">http://download.gna.org/relax/relax-%v.src.tar.bz2</a>
Source-MD5: d8bb7eebfa4112f95ade4e22c99899a7
SourceDirectory: relax-%v
Depends: python%type_pkg[python], numpy-py%type_pkg[python], 
scientificpython-py%type_pkg[python] (&gt;= 2.9.0), wxgtk2.8-py%type_pkg[python] 
BuildDepends: python%type_pkg[python], scons, numpy-py%type_pkg[python], 
scientificpython-py%type_pkg[python] (&gt;= 2.9.0), 
wxgtk2.8-py%type_pkg[python], fink (&gt;= 0.24.12)
Conflicts: relax-py24, relax-py25, relax-py26, relax-py27
Replaces: relax-py24, relax-py25, relax-py26, relax-py27
#SetCC: gcc-4.2
PatchFile: relax-py.patch
PatchFile-MD5: 74e2711a8688bcf7320cb2949a0041cb 
PatchScript: &lt;&lt;
#!/bin/sh -ev
sed 's|python2.X|python%type_raw[python]|g' &lt; %{PatchFile} |sed 
's|@FINK_PREFIX@|%p|g' | sed 's|@FINK_INSTALL_DIR@|%i|g' | sed 
's|relax-py2X|relax-py%type_pkg[python]|g' | patch -p1
if [ &quot;%m&quot; == &quot;x86_64&quot; ] ; then
perl -pi -e &quot;s|cflags = '-I'|cflags = '-m64 -I'|g&quot; ./sconstruct
perl -pi -e &quot;s|'-bundle',|'-m64', '-bundle',|g&quot; ./sconstruct
else
perl -pi -e &quot;s|cflags = '-I'|cflags = '-m32 -I'|g&quot; ./sconstruct
perl -pi -e &quot;s|'-bundle',|'-m32', '-bundle',|g&quot; ./sconstruct
fi
&lt;&lt;
# running relax compiles the scripts
InfoTest: TestScript: ./relax --test-suite; /usr/bin/find 
%i/lib/relax-py%type_pkg[python] -name '*.pyc' -delete; /usr/bin/find 
%i/lib/relax-py%type_pkg[python] -name '*.pyo' -delete; exit 0 :
CompileScript: &lt;&lt;
%p/bin/python%type_raw[python] %p/bin/scons 
&lt;&lt;
InstallScript: &lt;&lt;
mkdir -p %i/lib
mkdir -p %i/bin
%p/bin/python%type_raw[python] %p/bin/scons install
/usr/bin/find %i/lib/relax-py%type_pkg[python] -name '*.pyc' -delete
/usr/bin/find %i/lib/relax-py%type_pkg[python] -name '*.pyo' -delete
rm %i/bin/relax
&lt;&lt;
PostInstScript: &lt;&lt;
update-alternatives --install %p/bin/relax relax 
%p/lib/relax-py%type_pkg[python]/relax %type_pkg[python]
%p/bin/python%type_raw[python] -O 
%p/lib/python%type_raw[python]/compileall.py -q 
%p/lib/relax-py%type_pkg[python]
cd %p/lib/relax-py%type_pkg[python]
perl -pi -e 's|%i|%p|g' ./sconstruct
relax --test
&lt;&lt;
PreRmScript: &lt;&lt;
if [ $1 != &quot;upgrade&quot; ]; then
  update-alternatives --remove relax %p/lib/relax-py%type_pkg[python]/relax
fi
/usr/bin/find %p/lib/relax-py%type_pkg[python] -name '*.pyc' -delete
/usr/bin/find %p/lib/relax-py%type_pkg[python] -name '*.pyo' -delete
&lt;&lt;
Description: Protein dynamics by NMR relax. data analysis
License: GPL
Homepage: <a  rel="nofollow" href="http://www.nmr-relax.com/">http://www.nmr-relax.com/</a>
Maintainer: None &lt;fink-devel@xxxxxxxxxxxxxxxxxxxxx&gt;
&lt;&lt;
</pre><pre style="margin: 0em;">diff -uNr relax-1.3.5/relax relax-1.3.5.new/relax
--- relax-1.3.5/relax   2010-05-21 11:00:31.000000000 -0400
+++ relax-1.3.5.new/relax       2010-06-24 15:27:29.000000000 -0400
@@ -1,4 +1,4 @@
-#! /usr/bin/env python
+#! /usr/bin/env python2.X
 
 
###############################################################################
 #                                                                            
 #
diff -uNr relax-1.3.5/scons/install.py relax-1.3.5.new/scons/install.py
--- relax-1.3.5/scons/install.py        2010-05-21 11:00:21.000000000 -0400
+++ relax-1.3.5.new/scons/install.py    2010-06-24 15:28:06.000000000 -0400
@@ -112,8 +112,8 @@
     ###############
 
     # Run relax to create the *.pyc files.
-    print(&quot;\nRunning relax to create the byte-compiled *.pyc files.&quot;)
-    system(env['SYMLINK'] + &quot; --test&quot;)
+    # print(&quot;\nRunning relax to create the byte-compiled *.pyc files.&quot;)
+    # system(env['SYMLINK'] + &quot; --test&quot;)
 
     # Final print out.
     print(&quot;\n\n\n&quot;)
--- relax-1.3.14/sconstruct.orig        2012-03-19 12:05:34.000000000 -0400
+++ relax-1.3.14/sconstruct     2012-03-26 11:56:13.000000000 -0400
@@ -1,4 +1,4 @@
-#! /usr/bin/python
+#! @FINK_PREFIX@/bin/python2.x
 # That line was just so programs like gvim or emacs will understand that 
this is Python code!  Don't
 # make this file executable.
 
@@ -99,7 +99,7 @@
     SYS = SYSTEM
 
     # Mac OS X installation path.
-    INSTALL_PATH = sys.prefix + sep + 'local'
+    INSTALL_PATH = '@FINK_INSTALL_DIR@' + sep + 'lib'
 
 
 # All other operating systems.
@@ -116,10 +116,10 @@
 ###############
 
 # Relax installation directory.
-RELAX_PATH = INSTALL_PATH + sep + 'relax'
+RELAX_PATH = INSTALL_PATH + sep + 'relax-py2X'
 
 # Installation path for binaries.
-BIN_PATH = INSTALL_PATH + sep + 'bin'
+BIN_PATH = '@FINK_INSTALL_DIR@' + sep + 'bin'
 
 # Symbolic link installation path.
 SYMLINK = BIN_PATH + sep + 'relax'
@@ -497,11 +497,11 @@
                  'relax_fit.c']
 
         # Construct the python include path (for Python.h).
-        py_include_minpath = sys.prefix + path.sep + 'include'
+        py_include_minpath = '@FINK_PREFIX@' + path.sep + 'include'
         py_include_fullpath = py_include_minpath + path.sep + 'python' + 
`sys.version_info[0]` + '.' + `sys.version_info[1]`
 
         # Construct the python bin path.
-        py_bin_minpath = sys.prefix + path.sep + 'bin'
+        py_bin_minpath = '@FINK_PREFIX@' + path.sep + 'bin'
         py_bin_fullpath = py_bin_minpath + path.sep + 'python' + 
`sys.version_info[0]` + '.' + `sys.version_info[1]`
 
         # Get the numpy include path (for numpy/arrayobject.h).
@@ -515,9 +515,9 @@
             cflags = '/nologo /I\&quot;' + py_include_minpath + '\&quot; /I\&quot;' + 
numpy_path + '\&quot;'
         else:
             cflags = '-I' + py_include_fullpath + ' -I' + numpy_path
-        if env['PLATFORM'] == 'darwin':
-            for arch in ['i386', 'x86_64', 'ppc', 'ppc64']:
-                cflags = '%s -arch %s' % (cflags, arch)
+        # if env['PLATFORM'] == 'darwin':
+        #    for arch in ['i386', 'x86_64', 'ppc', 'ppc64']:
+        #        cflags = '%s -arch %s' % (cflags, arch)
 
         # Python library path.
         libpath = ''
</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00058" href="msg00058.html">Re: relax 1.3.13/14 oddities</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00053" href="msg00053.html">relax 1.3.13/14 oddities</a></strong>
<ul><li><em>From:</em> Jack Howarth</li></ul></li>
<li><strong><a name="00054" href="msg00054.html">Re: relax 1.3.13/14 oddities</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Mon Mar 26 20:20:47 2012</div>  
</body>
</html>
