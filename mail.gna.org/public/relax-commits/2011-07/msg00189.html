<!-- MHonArc v2.6.16 -->
<!--X-Subject: r13546 &#45; /branches/gui_testing/prompt/grace.py -->
<!--X-From-R13: rqjneqNaze&#45;erynk.pbz -->
<!--X-Date: Fri, 08 Jul 2011 16:15:54 +0200 -->
<!--X-Message-Id: E1QfBqU&#45;000540&#45;7w@subversion.gna.org -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>r13546 - /branches/gui_testing/prompt/grace.py -- July 08, 2011 - 16:15</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />r13546 - /branches/gui_testing/prompt/grace.py</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00189" class="tabs">Index by Date</a> | <a href="threads.html#00189" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00188.html">Date Prev</a>] [<a href="msg00190.html">Date Next</a>] [<a href="msg00188.html">Thread Prev</a>] [<a href="msg00190.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: relax-commits@xxxxxxx</li>
<li class="menuitem">
<em>Date</em>: Fri, 08 Jul 2011 14:15:54 -0000</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00189.html">E1QfBqU-000540-7w@subversion.gna.org</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>edward</strong> on July 08, 2011 - 16:15:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Author: bugman
Date: Fri Jul  8 16:15:53 2011
New Revision: 13546

URL: <a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax?rev=13546&amp;view=rev">http://svn.gna.org/viewcvs/relax?rev=13546&amp;view=rev</a>
Log:
Converted the grace user functions to the new documentation system.


Modified:
    branches/gui_testing/prompt/grace.py

Modified: branches/gui_testing/prompt/grace.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/gui_testing/prompt/grace.py?rev=13546&amp;r1=13545&amp;r2=13546&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/gui_testing/prompt/grace.py?rev=13546&amp;r1=13545&amp;r2=13546&amp;view=diff</a>
==============================================================================
--- branches/gui_testing/prompt/grace.py (original)
+++ branches/gui_testing/prompt/grace.py Fri Jul  8 16:15:53 2011
@@ -1,6 +1,6 @@
 
###############################################################################
 #                                                                            
 #
-# Copyright (C) 2004-2005, 2009-2010 Edward d'Auvergne                       
 #
+# Copyright (C) 2004-2011 Edward d'Auvergne                                  
 #
 #                                                                            
 #
 # This file is part of the program relax.                                    
 #
 #                                                                            
 #
@@ -25,7 +25,7 @@
 __docformat__ = 'plaintext'
 
 # relax module imports.
-from base_class import User_fn_class
+from base_class import User_fn_class, _build_doc
 import arg_check
 from doc_string import docs
 from generic_fns import grace, minimise
@@ -39,35 +39,6 @@
     &quot;&quot;&quot;Class for interfacing with Grace.&quot;&quot;&quot;
 
     def view(self, file=None, dir='grace', grace_exe='xmgrace'):
-        &quot;&quot;&quot;Function for running Grace.
-
-        Keyword Arguments
-        ~~~~~~~~~~~~~~~~~
-
-        file:  The name of the file.
-
-        dir:  The directory name.
-
-        grace_exe:  The Grace executable file.
-
-
-        Description
-        ~~~~~~~~~~~
-
-        This function can be used to execute Grace to view the specified 
file the Grace '.agr' file
-        and the execute Grace. If the directory name is set to None, the 
file will be assumed to be
-        in the current working directory.
-
-
-        Examples
-        ~~~~~~~~
-
-        To view the file 's2.agr' in the directory 'grace', type:
-
-        relax&gt; grace.view(file='s2.agr')
-        relax&gt; grace.view(file='s2.agr', dir='grace')
-        &quot;&quot;&quot;
-
         # Function intro text.
         if self._exec_info.intro:
             text = self._exec_info.ps3 + &quot;grace.view(&quot;
@@ -84,64 +55,82 @@
         # Execute the functional code.
         grace.view(file=file, dir=dir, grace_exe=grace_exe)
 
+    # The function doc info.
+    view._doc_title = &quot;Visualise the file within Grace.&quot;
+    view._doc_title_short = &quot;Grace execution.&quot;
+    view._doc_args = [
+        [&quot;file&quot;, &quot;The name of the file.&quot;],
+        [&quot;dir&quot;, &quot;The directory name.&quot;],
+        [&quot;grace_exe&quot;, &quot;The Grace executable file.&quot;]
+    ]
+    view._doc_desc = &quot;&quot;&quot;
+        This function can be used to execute Grace to view the specified 
file the Grace '.agr' file and the execute Grace. If the directory name is 
set to None, the file will be assumed to be in the current working directory.
+        &quot;&quot;&quot;
+    view._doc_examples = &quot;&quot;&quot;
+        To view the file 's2.agr' in the directory 'grace', type:
+
+        relax&gt; grace.view(file='s2.agr')
+        relax&gt; grace.view(file='s2.agr', dir='grace')
+        &quot;&quot;&quot;
+    _build_doc(view)
+
 
     def write(self, x_data_type='spin', y_data_type=None, spin_id=None, 
plot_data='value', file=None, dir='grace', force=False, norm=False):
-        &quot;&quot;&quot;Function for creating a grace '.agr' file.
+        # Function intro text.
+        if self._exec_info.intro:
+            text = self._exec_info.ps3 + &quot;grace.write(&quot;
+            text = text + &quot;x_data_type=&quot; + repr(x_data_type)
+            text = text + &quot;, y_data_type=&quot; + repr(y_data_type)
+            text = text + &quot;, spin_id=&quot; + repr(spin_id)
+            text = text + &quot;, plot_data=&quot; + repr(plot_data)
+            text = text + &quot;, file=&quot; + repr(file)
+            text = text + &quot;, dir=&quot; + repr(dir)
+            text = text + &quot;, force=&quot; + repr(force)
+            text = text + &quot;, norm=&quot; + repr(norm) + &quot;)&quot;
+            print(text)
 
-        Keyword Arguments
-        ~~~~~~~~~~~~~~~~~
+        # The argument checks.
+        arg_check.is_str(x_data_type, 'x data type')
+        arg_check.is_str(y_data_type, 'y data type')
+        arg_check.is_str(spin_id, 'spin identification string', 
can_be_none=True)
+        arg_check.is_str(plot_data, 'plot data')
+        arg_check.is_str(file, 'file name')
+        arg_check.is_str(dir, 'directory name', can_be_none=True)
+        arg_check.is_bool(force, 'force flag')
+        arg_check.is_bool(norm, 'normalisation flag')
 
-        x_data_type:  The data type for the X-axis (no regular expression is 
allowed).
+        # Execute the functional code.
+        grace.write(x_data_type=x_data_type, y_data_type=y_data_type, 
spin_id=spin_id, plot_data=plot_data, file=file, dir=dir, force=force, 
norm=norm)
 
-        y_data_type:  The data type for the Y-axis (no regular expression is 
allowed).
+    # The function doc info.
+    write._doc_title = &quot;Create a grace '.agr' file.&quot;
+    write._doc_title_short = &quot;Grace file creation.&quot;
+    write._doc_args = [
+        [&quot;x_data_type&quot;, &quot;The data type for the X-axis (no regular expression 
is allowed).&quot;],
+        [&quot;y_data_type&quot;, &quot;The data type for the Y-axis (no regular expression 
is allowed).&quot;],
+        [&quot;spin_id&quot;, &quot;The spin identification string.&quot;],
+        [&quot;plot_data&quot;, &quot;The data to use for the plot.&quot;],
+        [&quot;norm&quot;, &quot;Flag for the normalisation of series type data.&quot;],
+        [&quot;file&quot;, &quot;The name of the file.&quot;],
+        [&quot;dir&quot;, &quot;The directory name.&quot;],
+        [&quot;force&quot;, &quot;A flag which, if set to True, will cause the file to be 
overwritten.&quot;]
+    ]
+    write._doc_desc = &quot;&quot;&quot;
+        This function is designed to be as flexible as possible so that any 
combination of data can be plotted.  The output is in the format of a Grace 
plot (also known as ACE/gr, Xmgr, and xmgrace) which only supports two 
dimensional plots.  Three types of keyword arguments can be used to create 
various types of plot.  These include the X-axis and Y-axis data types, the 
spin identification string, and an argument for selecting what to actually 
plot.
 
-        spin_id:  The spin identification string.
+        The X-axis and Y-axis data type arguments should be plain strings, 
regular expression is not allowed.  If the X-axis data type argument is not 
given, the plot will default to having the spin sequence along the x-axis.  
The two axes of the Grace plot can be absolutely any of the data types listed 
in the tables below.  The only limitation, currently anyway, is that the data 
must belong to the same data pipe.
 
-        plot_data:  The data to use for the plot.
+        The spin identification string can be used to limit which spins are 
used in the plot.  The default is that all spins will be used, however, these 
arguments can be used to select a subset of all spins, or a single spin for 
plots of Monte Carlo simulations, etc.
 
-        norm:  Flag for the normalisation of series type data.
+        The property which is actually plotted can be controlled by the 
'plot_data' argument.  It can be one of the following:
 
-        file:  The name of the file.
-
-        dir:  The directory name.
-
-        force:  A flag which, if set to True, will cause the file to be 
overwritten.
-
-
-        Description
-        ~~~~~~~~~~~
-
-        This function is designed to be as flexible as possible so that any 
combination of data can
-        be plotted.  The output is in the format of a Grace plot (also known 
as ACE/gr, Xmgr, and
-        xmgrace) which only supports two dimensional plots.  Three types of 
keyword arguments can
-        be used to create various types of plot.  These include the X-axis 
and Y-axis data types,
-        the spin identification string, and an argument for selecting what 
to actually plot.
-
-        The X-axis and Y-axis data type arguments should be plain strings, 
regular expression is not
-        allowed.  If the X-axis data type argument is not given, the plot 
will default to having the
-        spin sequence along the x-axis.  The two axes of the Grace plot can 
be absolutely any of
-        the data types listed in the tables below.  The only limitation, 
currently anyway, is that
-        the data must belong to the same data pipe.
-
-        The spin identification string can be used to limit which spins are 
used in the plot.  The
-        default is that all spins will be used, however, these arguments can 
be used to select a
-        subset of all spins, or a single spin for plots of Monte Carlo 
simulations, etc.
-
-        The property which is actually plotted can be controlled by the 
'plot_data' argument.  It
-        can be one of the following:
             'value':  Plot values (with errors if they exist).
             'error':  Plot errors.
             'sims':   Plot the simulation values.
 
-        Normalisation is only allowed for series type data, for example the 
R2 exponential curves,
-        and will be ignored for all other data types.  If the norm flag is 
set to True then the
-        y-value of the first point of the series will be set to 1.  This 
normalisation is useful for
-        highlighting errors in the data sets.
-
-
-        Examples
-        ~~~~~~~~
-
+        Normalisation is only allowed for series type data, for example the 
R2 exponential curves, and will be ignored for all other data types.  If the 
norm flag is set to True then the y-value of the first point of the series 
will be set to 1.  This normalisation is useful for highlighting errors in 
the data sets.
+        &quot;&quot;&quot;
+    write._doc_examples = &quot;&quot;&quot;
         To write the NOE values for all spins to the Grace file 'noe.agr', 
type one of:
 
         relax&gt; grace.write('spin', 'noe', file='noe.agr')
@@ -175,42 +164,12 @@
         relax&gt; grace.write(x_data_type='relax_times', y_data_type='ave_int',
                            file='intensities_norm.agr', force=True, 
norm=True)
         &quot;&quot;&quot;
-
-        # Function intro text.
-        if self._exec_info.intro:
-            text = self._exec_info.ps3 + &quot;grace.write(&quot;
-            text = text + &quot;x_data_type=&quot; + repr(x_data_type)
-            text = text + &quot;, y_data_type=&quot; + repr(y_data_type)
-            text = text + &quot;, spin_id=&quot; + repr(spin_id)
-            text = text + &quot;, plot_data=&quot; + repr(plot_data)
-            text = text + &quot;, file=&quot; + repr(file)
-            text = text + &quot;, dir=&quot; + repr(dir)
-            text = text + &quot;, force=&quot; + repr(force)
-            text = text + &quot;, norm=&quot; + repr(norm) + &quot;)&quot;
-            print(text)
-
-        # The argument checks.
-        arg_check.is_str(x_data_type, 'x data type')
-        arg_check.is_str(y_data_type, 'y data type')
-        arg_check.is_str(spin_id, 'spin identification string', 
can_be_none=True)
-        arg_check.is_str(plot_data, 'plot data')
-        arg_check.is_str(file, 'file name')
-        arg_check.is_str(dir, 'directory name', can_be_none=True)
-        arg_check.is_bool(force, 'force flag')
-        arg_check.is_bool(norm, 'normalisation flag')
-
-        # Execute the functional code.
-        grace.write(x_data_type=x_data_type, y_data_type=y_data_type, 
spin_id=spin_id, plot_data=plot_data, file=file, dir=dir, force=force, 
norm=norm)
-
-
-
-    # Docstring modification.
-    #########################
-
-    # Write function.
-    write.__doc__ = write.__doc__ + &quot;\n\n&quot; + docs.regexp.doc + &quot;\n&quot;
-    write.__doc__ = write.__doc__ + minimise.return_data_name_doc + &quot;\n\n&quot;
-    write.__doc__ = write.__doc__ + Noe.return_data_name_doc + &quot;\n&quot;
-    write.__doc__ = write.__doc__ + Relax_fit.return_data_name_doc + &quot;\n&quot;
-    write.__doc__ = write.__doc__ + Jw_mapping.return_data_name_doc + &quot;\n\n&quot;
-    write.__doc__ = write.__doc__ + Model_free.return_data_name_doc + &quot;\n\n&quot;
+    write._doc_additional = [
+        docs.regexp.doc,
+        minimise.return_data_name_doc,
+        Noe.return_data_name_doc,
+        Relax_fit.return_data_name_doc,
+        Jw_mapping.return_data_name_doc,
+        Model_free.return_data_name_doc
+    ]
+    _build_doc(write)



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Fri Jul 08 16:20:02 2011</div>  
</body>
</html>
