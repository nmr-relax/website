<!-- MHonArc v2.6.10 -->
<!--X-Subject: Re: [bug #6503] Uncaught nan in xh_vect -->
<!--X-From-R13: "Unel E. Fubzcfba" <tnelgNozo.yrrqf.np.hx> -->
<!--X-Date: Mon, 07 Aug 2006 10:19:38 +0200 -->
<!--X-Message-Id: 44D6F769.10204@bmb.leeds.ac.uk -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 20060802&#45;104941.sv4125.3051@gna.org -->
<!--X-Reference: 7f080ed10608020558o47fd0260s9579f663147ab84@mail.gmail.com -->
<!--X-Reference: 1154597081.28764.140.camel@fbsdpcu021 -->
<!--X-Reference: 7f080ed10608030650t7896164mbcfa499f1987270a@mail.gmail.com -->
<!--X-Reference: 1154620634.28764.190.camel@fbsdpcu021 -->
<!--X-Reference: 7f080ed10608040708k4738dd5cjb41e9056acd88902@mail.gmail.com -->
<!--X-Reference: 1154706350.28764.284.camel@fbsdpcu021 -->
<!--X-Reference: 44D37486.6060003@bmb.leeds.ac.uk -->
<!--X-Reference: 7f080ed10608040954n4971257diabac2c1b51f17790@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [bug #6503] Uncaught nan in xh_vect -- August 07, 2006 - 10:19</title>
<link rel="stylesheet" type="text/css" href="/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="https://gna.org/images/gna.theme/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: [bug #6503] Uncaught nan in xh_vect</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00020" class="tabs">Index by Date</a> | <a href="threads.html#00020" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00019.html">Date Prev</a>] [<a href="msg00021.html">Date Next</a>] [<a href="msg00016.html">Thread Prev</a>] [<a href="msg00022.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Edward d'Auvergne &lt;edward.dauvergne@xxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Mon, 07 Aug 2006 09:18:49 +0100</li>
<li class="menuitem">
<em>Cc</em>: relax-devel@xxxxxxx</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00020.html">44D6F769.10204@bmb.leeds.ac.uk</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;20060802-104941.sv4125.3051@gna.org&gt;	&lt;<a href="msg00000.html">7f080ed10608020558o47fd0260s9579f663147ab84@mail.gmail.com</a>&gt;	&lt;<a href="msg00001.html">1154597081.28764.140.camel@fbsdpcu021</a>&gt;	&lt;<a href="msg00002.html">7f080ed10608030650t7896164mbcfa499f1987270a@mail.gmail.com</a>&gt;	&lt;<a href="msg00003.html">1154620634.28764.190.camel@fbsdpcu021</a>&gt;	&lt;<a href="msg00007.html">7f080ed10608040708k4738dd5cjb41e9056acd88902@mail.gmail.com</a>&gt;	&lt;<a href="msg00009.html">1154706350.28764.284.camel@fbsdpcu021</a>&gt;	&lt;<a href="msg00013.html">44D37486.6060003@bmb.leeds.ac.uk</a>&gt;	&lt;<a href="msg00016.html">7f080ed10608040954n4971257diabac2c1b51f17790@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>User-agent</em>: Mozilla Thunderbird 1.0 (X11/20041206)</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Gary S. Thompson</strong> on August 07, 2006 - 10:19:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Edward d'Auvergne wrote:</pre><br>
<blockquote class="blockquote"><blockquote class="blockquote"><pre style="margin: 0em;">It ought to be said that nan and inf etc have very clearly defined bit
patterns in memory that are defined by an ieee754 cf
<a  href="http://steve.hollasch.net/cgindex/coding/ieeefloat.html">http://steve.hollasch.net/cgindex/coding/ieeefloat.html</a> and
<a  href="http://www.psc.edu/general/software/packages/ieee/ieee.html">http://www.psc.edu/general/software/packages/ieee/ieee.html</a>. Thus its a
question of python/compilers not putting nan in the right place and not
using comaprisons etc properly when nans are are present. It should
always be possible to detect if a nan is present by the bit pattern in
memory (and this is the way fpconst.py does it). It is of course
possible to test if nans are supported correctly on a paricular
architecture and compiler by comparisons etc and if not warnings etc
could be raised or alternative code executed)
</pre></blockquote><pre style="margin: 0em;"><br></pre><br>
<blockquote class="blockquote"><pre style="margin: 0em;">another thing to say is that though fpconst.py  is gpl incompatible due
to some arcana about /patent termination cases
(<a  href="http://en.wikipedia.org/wiki/Apache_License">http://en.wikipedia.org/wiki/Apache_License</a>)/ in the apache license,
due to they way it works should be relativley easy to cook up our own
version which would bullet proof and low maintenance in the same way as
fpconst.py is... and also quite legal
</pre></blockquote><pre style="margin: 0em;"><br></pre><br>
<tt>Could the fpconst.py file be legally included in a relax distribution?
</tt></blockquote><pre style="margin: 0em;"><br>I am not a lawyer and the waters eem to be muddy...</pre><br>
<pre style="margin: 0em;"><br>     Is the Apache license compatible with the GPL (GNU Public License)?</pre><br>
<tt>It is the unofficial position of The Apache Software Foundation that the 
Apache license *is* compatible with the GPL. However, the Free Software 
Foundation holds a different position, although we have not been able to 
get them to give us categorical answers to our queries asking for 
details on just what aspects they consider incompatible.</tt><br>
<br>
<tt>Whether to mix software covered under these two different licenses 
*must* be a determination made by those attempting such a synthesis.</tt><br>
<br>
<tt><br>    </tt><br>
<br>
<tt><br>however I don''t see that ther is a problem if the file is in a separate 
module... plenty of people install apache based software and gpl 
software in their python machines. At worst all that would happen is 
someone would complain and we would have to write out own...<br>
( I reckon I could do the whole thing in a few hours at most including 
some unit tests)</tt><br>
<br>
<blockquote class="blockquote"><tt>I can't reach it's homepage so I can't read the licence.  Do you<br>
think it is cross platform or is it dependent upon the underlying C<br>
libraries?  
</tt></blockquote><pre style="margin: 0em;"><br></pre><br>
<tt>It is completley cross platform as far as I can see. If you ran it on a 
non ieee platform you might get some weird edge cases but this would be 
for somewhat bizarra architectures these days (do you want to run it on 
a gray or a vax?)</tt><br>
<br>
<blockquote class="blockquote"><pre style="margin: 0em;">Importantly does the value of NaN actually need to be
caught?  Prevention could be used to eliminate most NaNs and the cure
could be to have iteration limits.</pre><br>
<pre style="margin: 0em;">The limit on the iterations for the backtracking line search will
probably not be too much of an issue.  The bigger issue is that the
convergence test:
   fk_new - fk &lt;= f_tol,
when fk_new and fk are both chi-squared values of NaN, never evaluates
true.  Then the number of iterations of the optimisation algorithm
will hence be the most expensive factor rather than the backtracking
subalgorithm.</pre><br>
</blockquote><tt>If this will get rid of it, then thats great can of worms canned (but 
will it stay that way or will unexpected things crawl out of the 
woodwork)?? Also don't we want nans to propgate sometimes so that peple 
know there has bee a problem, rather than have a warning burried in 
miles of output</tt><br>
<br>
<pre style="margin: 0em;"><br></pre><br>
<blockquote class="blockquote"><pre style="margin: 0em;">Edward</pre><br>
<pre style="margin: 0em;">.</pre><br>
</blockquote><pre style="margin: 0em;"><br></pre><br>
<pre style="margin: 0em;">--
-------------------------------------------------------------------
Dr Gary Thompson
Astbury Centre for Structural Molecular Biology,
University of Leeds, Astbury Building,
Leeds, LS2 9JT, West-Yorkshire, UK             Tel. +44-113-3433024
email: garyt@xxxxxxxxxxxxxxx                   Fax  +44-113-2331407
-------------------------------------------------------------------</pre><br>
<pre style="margin: 0em;"><br></pre><br>
<br>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00022" href="msg00022.html">Re: [bug #6503] Uncaught nan in xh_vect</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00000" href="msg00000.html">Re: [bug #6503] Uncaught nan in xh_vect</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00001" href="msg00001.html">Re: [bug #6503] Uncaught nan in xh_vect</a></strong>
<ul><li><em>From:</em> Chris MacRaild</li></ul></li>
<li><strong><a name="00002" href="msg00002.html">Re: [bug #6503] Uncaught nan in xh_vect</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00003" href="msg00003.html">Re: [bug #6503] Uncaught nan in xh_vect</a></strong>
<ul><li><em>From:</em> Chris MacRaild</li></ul></li>
<li><strong><a name="00007" href="msg00007.html">Re: [bug #6503] Uncaught nan in xh_vect</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00009" href="msg00009.html">Re: [bug #6503] Uncaught nan in xh_vect</a></strong>
<ul><li><em>From:</em> Chris MacRaild</li></ul></li>
<li><strong><a name="00013" href="msg00013.html">Re: [bug #6503] Uncaught nan in xh_vect</a></strong>
<ul><li><em>From:</em> Gary S. Thompson</li></ul></li>
<li><strong><a name="00016" href="msg00016.html">Re: [bug #6503] Uncaught nan in xh_vect</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer">You are on the <a href="http://gna.org">Gna!</a> mail server.</div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Mon Aug 07 12:01:13 2006</div>  
</body>
</html>
