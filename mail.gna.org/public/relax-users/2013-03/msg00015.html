<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: relax on cluster -->
<!--X-From-R13: "Sqjneq q'Ohiretar" <rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Sat, 23 Mar 2013 20:41:26 +0100 -->
<!--X-Message-Id: CAED9pY8Rn4+rsSSRC3xJmiUyoDYJXniCR=cJ3PmxC8ugyXed8Q@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 1CDD48B4&#45;3957&#45;4E83&#45;A142&#45;C55680A2086A@ucl.ac.uk -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: relax on cluster -- March 23, 2013 - 20:41</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: relax on cluster</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00015" class="tabs">Index by Date</a> | <a href="threads.html#00015" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00014.html">Date Prev</a>] [<a href="msg00016.html">Date Next</a>] [<a href="msg00014.html">Thread Prev</a>] [<a href="msg00016.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: &quot;Waudby, Christopher&quot; &lt;c.waudby@xxxxxxxxx&gt;,	Gary Thompson &lt;garyt@xxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Sat, 23 Mar 2013 20:40:54 +0100</li>
<li class="menuitem">
<em>Cc</em>: &quot;relax-users@xxxxxxx&quot; &lt;relax-users@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;	h=mime-version:x-received:sender:in-reply-to:references:date	:x-google-sender-auth:message-id:subject:from:to:cc:content-type	:content-transfer-encoding;	bh=nwwsoFOuSDCW9WZvuPm+6EyOYzv14ErcEcWm1OnJO/I=;	b=kbqvkWHPENJ+aSSNIq7je4b6o+E6Y7nEI64wJ/3h3/d7ue6K5bc90HUi83hv795vVA	yfWcIPULMBPXFE/JioSC60JwjVhpe62MNLY1JFQTPPXNQndkl97UHolxC2YXOa9tihbM	Sr8XuHdguuL7D9SChRr1TgtH02dw7Y8MG2qRhhumhEcsGQFj0A+6iDdYwiVVbcHDLEwO	hg4S0a/2QWZF2BSFS7kIFoU53/6DvLMRImpEaQs0CjLK0S3Z0KRhqBxLSffWD9nKd5Ab	zKdJpVFvPBywSXUVeKzHpp86MGHSANxWr6pbQ77eh9XXvL6myBFqCfhSVuOEkfBLYMqB	6O3g==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00015.html">CAED9pY8Rn4+rsSSRC3xJmiUyoDYJXniCR=cJ3PmxC8ugyXed8Q@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;1CDD48B4-3957-4E83-A142-C55680A2086A@xxxxxxxxx&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on March 23, 2013 - 20:41:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Hi Chris,

Welcome to the relax mailing lists!  I would guess that the problem
you are seeing is probably more related to the MPI installation and
configuration on your cluster.  It may also relate to the mpi4py
site-package you have installed for Python.  Could you copy and paste
the output of the relax command:

$ relax --info

This might help in identifying the problem.  Have you run the mpi4py
tests (<a  rel="nofollow" href="http://mpi4py.scipy.org/docs/usrman/install.html#testing">http://mpi4py.scipy.org/docs/usrman/install.html#testing</a>)
to check if the problem is on the cluster, the MPI installation or
mpi4py?  When running on my dual core system I could see, in the past,
using 'top' that both cores are being used.  I would also guess that
the problem is not in relax as Gary Thompson's multi-processor code
(in the multi/ directory) does not distinguish between cores and nodes
as this is all handled automatically by the MPI protocol.  The text
'node' is not even used in this code.  But that does not mean that the
problem is not in relax.

Regards,

Edward




On 23 March 2013 16:52, Waudby, Christopher &lt;c.waudby@xxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi,

I'm trying to run a model-free calculation in relax 2.2.3 on a cluster, set 
up with mpi4py and Open MPI as described in the documentation. I ran the 
job with 64 cores, and this was successfully picked up by the software:

Processor fabric: MPI 2.1 running via mpi4py with 63 space processors &amp; 1 
master. Using Open MPI 1.4.1.

However, when the job finished an analysis of the CPU time used showed that 
only 11 or 12 cores were actually being used for computations, which I 
presume correlates with the number of cores per node. Indeed, when I ran 
another test using 12 cores over nodes containing 4 cores, only 3 cores 
were active during the calculation.

Is there an error in my set up, or is this some kind of bug?

Best wishes,

Chris Waudby

c.waudby@xxxxxxxxx

_______________________________________________
relax (<a  rel="nofollow" href="/">http://www.nmr-relax.com</a>)

This is the relax-users mailing list
relax-users@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="/mail.gna.org/listinfo/relax-users">https://mail.gna.org/listinfo/relax-users</a>
</pre></blockquote><pre style="margin: 0em;">


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00014" href="msg00014.html">relax on cluster</a></strong>
<ul><li><em>From:</em> Waudby, Christopher</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Fri Mar 29 02:20:07 2013</div>  
</body>
</html>
