<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [task #7860] When dx_map is issued, create a parameter file which maps parameters to chi2 value. -->
<!--X-From-R13: Febryf Szgrxæe Zvaarg &#60;gyvaargNaze&#45;erynk.pbz> -->
<!--X-Date: Mon, 13 Oct 2014 10:31:48 +0200 -->
<!--X-Message-Id: CA+CBx2NfK3Q2G+n_j1hfgxf_mZ1KX69L_Mo93h+5Er2AtGAr1Q@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 20141010&#45;120954.sv20529.32926@gna.org -->
<!--X-Reference: 20141010&#45;123105.sv2782.3020@gna.org -->
<!--X-Reference: 20141010&#45;123358.sv2782.37682@gna.org -->
<!--X-Reference: CA+CBx2PyWv440m3USPwpFADOD7gwrAJXJm7_4y81JOBNxETwtA@mail.gmail.com -->
<!--X-Reference: CAED9pY9SkQZcq428ykqK0Gej_jXVFueEwnz7LynGL1N=&#45;va6JQ@mail.gmail.com -->
<!--X-Reference: CA+CBx2NgiQB7ov&#45;Unw3D69Gh+uBMezwaKBzfAD0rhbJLY&#45;ezBg@mail.gmail.com -->
<!--X-Reference: CAED9pY9LDQt7FdSPgS_Qc5eKx1RawBj_zJ7Diz7Sn+ORCoiTCA@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [task #7860] When dx_map is issued, create a parameter file which maps parameters to chi2 value. -- October 13, 2014 - 10:31</title>
<link rel="stylesheet" type="text/css" href="/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="https://gna.org/images/gna.theme/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: [task #7860] When dx_map is issued, create a parameter file which maps parameters to chi2 value.</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00060" class="tabs">Index by Date</a> | <a href="threads.html#00060" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00059.html">Date Prev</a>] [<a href="msg00061.html">Date Next</a>] [<a href="msg00059.html">Thread Prev</a>] [<a href="msg00061.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: &quot;Edward d'Auvergne&quot; &lt;edward@xxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Mon, 13 Oct 2014 10:30:57 +0200</li>
<li class="menuitem">
<em>Cc</em>: Edward d Auvergne &lt;NO-REPLY.INVALID-ADDRESS@xxxxxxx&gt;, &quot;relax-devel@xxxxxxx&quot; &lt;relax-devel@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113; h=mime-version:sender:in-reply-to:references:from:date:message-id :subject:to:cc:content-type; bh=M4Grm1vdPudu+w/u9eMjotyolcVbvrcovPE03bE3Kcs=; b=gYo5dPdG52xMRFyDLohpTceFKbd8ZvjYBN3Wd1JuwnL9JoevHXxGAUeTtBbWw93agH +wyog5vmrrmB8X+iH0wzptIYNRxLTGqkI4RtjlMybkZGbEUOkTGPzUeUetanMe088BpT qUkhC0LqXPI91RR3sVSNWo0ez3a0czbNB3ZmEOPYBOB6i9KcAFIvCeyaOdJslPFPhjJv MZsbvDgWvK5aNMLWQN1/nfDm6nKbc3xQSj9ICw7wa7R8MqHeUQvzmStj/NqPwlOD2TWd aOmqeQwfb+X7eXzvSt2Clbw8KT3x8wsqe3SGN4MZGLK3KtqNjcIU2W3R4C+lQm/b9J+C hEzA==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00060.html">CA+CBx2NfK3Q2G+n_j1hfgxf_mZ1KX69L_Mo93h+5Er2AtGAr1Q@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;<a href="msg00051.html">20141010-120954.sv20529.32926@gna.org</a>&gt; &lt;<a href="msg00052.html">20141010-123105.sv2782.3020@gna.org</a>&gt; &lt;<a href="msg00053.html">20141010-123358.sv2782.37682@gna.org</a>&gt; &lt;<a href="msg00054.html">CA+CBx2PyWv440m3USPwpFADOD7gwrAJXJm7_4y81JOBNxETwtA@mail.gmail.com</a>&gt; &lt;CAED9pY9SkQZcq428ykqK0Gej_jXVFueEwnz7LynGL1N=-va6JQ@mail.gmail.com&gt; &lt;<a href="msg00055.html">CA+CBx2NgiQB7ov-Unw3D69Gh+uBMezwaKBzfAD0rhbJLY-ezBg@mail.gmail.com</a>&gt; &lt;<a href="msg00059.html">CAED9pY9LDQt7FdSPgS_Qc5eKx1RawBj_zJ7Diz7Sn+ORCoiTCA@mail.gmail.com</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Troels Emtekær Linnet</strong> on October 13, 2014 - 10:31:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Hi Edward.

I have created the map with inc=20 for each dimension.

The map takes up 280 kB.
The new file created takes up 1.1 MB.

I think it took between 1-2 Hours to make the map.

The new parameter + chi2 value files, gives a perfect insight into the chi2
values of the space.

It is also a perfect opportunity, to quickly make 2D maps, as either 3D or
contour maps at different levels.

The file has also just revealed, that relax failed to find the global
minimum.

For this particular spin, at these particular conditions, 2 holes in the
chi2 surface exist.

Without this file, it would not be possible to gain this insight so easily.

What I try to imagine, is a similar situation which could occur to someone
else.

They would look at the dispersion graph and think:

- That does not look good. I wonder if relax really found the global
minimum.

How would one proceed ?

The very very easiest thing is to make a dx map.

You both get the opportunity to view the 4th dimensional data, as well as a
list with parameters and chi2 values.

This is a perfect situation.

You mention hard disk space as a problem.

Waiting 1-2 Hours for creating a map, and &quot;only pay&quot; 1.1 MB is not an issue
I can see as a problem.

The situation you have described, is a really special situation.

And I believe that under such circumstances, one would also be able to
handle a &quot;delete file&quot; command, if space becomes a problem.

I think, that not creating this parameter file is step backwards in
usability.


Of course, if you demand this as an obligatory implementation, I will make
the Boolean argument.

Best
Troels



2014-10-13 9:46 GMT+02:00 Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt;:

</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi Troels,

It is actually not so difficult to reconstruct this text file from the
OpenDX data files, if you know the parameter bounds used in the dx.map
user function call.  However if you would like it automatically
created, then this must be as an option.  The aim of the dx.map user
function is to create the input files for OpenDX to visualise a map of
the space.  Your proposed text file is additional functionality on top
of this, which is not required for the primary purpose.  For good
design, additional features should be made as an option that the user
chooses to have or not have.  And the default is that additional
features are off.

I will give you an example whereby this feature is highly undesired.
In my original work on model-free model selection:

    d'Auvergne, E. J. and Gooley, P. R. (2003). The use of model
selection in the model-free analysis of protein dynamics. J. Biomol.
NMR, 25(1), 25-39. (<a  rel="nofollow" href="http://dx.doi.org/10.1023/A:1021902006114">http://dx.doi.org/10.1023/A:1021902006114</a>)

This work involved a mass screening of the entire model-free parameter
space.  I created two 3D grids covering all of the space for two
different types of motion.  Then for each grid point, I took those
parameter values and back-calculated the relaxation data.  I then
generated full OpenDX maps for each grid point and, as this map is
itself a grid, the total data content is essentially the grid squared!
 All the data files generated, even after bzip2 compression took up
many, many gigabytes.  It was too big for the hard disk in my
computer, so I had to burn it off onto 40+ CDs.  In this analysis I
also performed optimisation and model selection, and created
additional OpenDX maps via external scripting for the figures in that
paper.

The point is that had these additional files been created, as they
contain 4 times the number of floating point numbers as the DX data
file, they would have increased this size by 5.  That would have make
the analysis totally infeasible.  In such cases, which I will probably
encounter again in the future, your proposed text files will make this
type of mass screening impossible.  Therefore, if you would like this,
it really must be activated by a new Boolean argument to the user
function which defaults to False.

Cheers,

Edward



On 10 October 2014 15:29, Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxxxxxx&gt;
wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">So, when creating a dx map, you get a nice image.

If a text file where to provide the mapping of chi2 values from the
parameters, you would get a better feeling with the parameters.

So, this i just a possibility to examine the dx_map creation.

This is what I am after.

Best
Troels

2014-10-10 15:02 GMT+02:00 Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt;:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">

Hi,

Then I would suggest something much more powerful!  The dx.map user
function is currently only for 3 dimensions or parameters, so it is
rather useless for looking for a global minimum if the parameter
values of the other dimensions are not set to the values of that
unknown minimum!

I would therefore suggest a much, much more powerful user function
that will be very quick for you to implement.  It could be called
maybe the minimise.grid_map or minimise.map_space user function.  You
can create this by simple duplication of the minimise.grid_search user
function code, but just add a new argument for an output text file.
Then you set up your target function and loop over the parameter space
yourself (by first creating a massive parameter grid) and then calling
the target function and placing the returned chi2 value into the text
file.  As your dimensions are not limited - though you could extend it
so you only use a subset of parameters just as in the dx.map user
function - you will be able to see much more of the space.  Is this
what you would be after?

Regards,

Edward


On 10 October 2014 14:50, Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxxxxxx&gt;
wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi Edward.

The reason I am looking into this, is that I maybe have some maps
</pre></blockquote></blockquote></blockquote><pre style="margin: 0em;">which
</pre><blockquote class="blockquote"><blockquote class="blockquote"><blockquote class="blockquote"><pre style="margin: 0em;">shows that relax did not find the global minimum.

So, I look into my data, and will create the files for inspection.

Best
Troels

2014-10-10 14:33 GMT+02:00 Edward d Auvergne
&lt;NO-REPLY.INVALID-ADDRESS@xxxxxxx&gt;:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">

Follow-up Comment #2, task #7860 (project relax):

Using the 'map_type', and adding a new section 'plain text', then
</pre></blockquote></blockquote></blockquote></blockquote><pre style="margin: 0em;">this
</pre><blockquote class="blockquote"><blockquote class="blockquote"><blockquote class="blockquote"><blockquote class="blockquote"><pre style="margin: 0em;">could
be extended to map out 4, 5, or much higher dimensions as well.  This
could
almost be a new user function though, as half of the dx.map user
function
options will not be used.

    _______________________________________________________

Reply to this item at:

  &lt;<a  rel="nofollow" href="http://gna.org/task/?7860">http://gna.org/task/?7860</a>&gt;

_______________________________________________
  Message sent via/by Gna!
  <a  rel="nofollow" href="http://gna.org/">http://gna.org/</a>

</pre></blockquote><pre style="margin: 0em;">

</pre></blockquote></blockquote><pre style="margin: 0em;">


</pre></blockquote><pre style="margin: 0em;">

</pre></blockquote><pre style="margin: 0em;">

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00061" href="msg00061.html">Re: [task #7860] When dx_map is issued, create a parameter file which maps parameters to chi2 value.</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00051" href="msg00051.html">[task #7860] When dx_map is issued, create a parameter file which maps parameters to chi2 value.</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
<li><strong><a name="00052" href="msg00052.html">[task #7860] When dx_map is issued, create a parameter file which maps parameters to chi2 value.</a></strong>
<ul><li><em>From:</em> Edward d Auvergne</li></ul></li>
<li><strong><a name="00053" href="msg00053.html">[task #7860] When dx_map is issued, create a parameter file which maps parameters to chi2 value.</a></strong>
<ul><li><em>From:</em> Edward d Auvergne</li></ul></li>
<li><strong><a name="00054" href="msg00054.html">Re: [task #7860] When dx_map is issued, create a parameter file which maps parameters to chi2 value.</a></strong>
<ul><li><em>From:</em> Troels Emtekær Linnet</li></ul></li>
<li><strong><a name="00056" href="msg00056.html">Re: [task #7860] When dx_map is issued, create a parameter file which maps parameters to chi2 value.</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00055" href="msg00055.html">Re: [task #7860] When dx_map is issued, create a parameter file which maps parameters to chi2 value.</a></strong>
<ul><li><em>From:</em> Troels Emtekær Linnet</li></ul></li>
<li><strong><a name="00059" href="msg00059.html">Re: [task #7860] When dx_map is issued, create a parameter file which maps parameters to chi2 value.</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer">You are on the <a href="http://gna.org">Gna!</a> mail server.</div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Mon Oct 13 11:20:11 2014</div>  
</body>
</html>
