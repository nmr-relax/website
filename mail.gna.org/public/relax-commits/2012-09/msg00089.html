<!-- MHonArc v2.6.16 -->
<!--X-Subject: r17499 &#45; in /trunk/test_suite/gui_tests: __init__.py	test_user_functions.py -->
<!--X-From-R13: rqjneqNaze&#45;erynk.pbz -->
<!--X-Date: Wed, 19 Sep 2012 10:55:30 +0200 -->
<!--X-Message-Id: E1TEG4A&#45;0003z2&#45;J1@subversion.gna.org -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>r17499 - in /trunk/test_suite/gui_tests: __init__.py	test_user_functions.py -- September 19, 2012 - 10:55</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />r17499 - in /trunk/test_suite/gui_tests: __init__.py	test_user_functions.py</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00089" class="tabs">Index by Date</a> | <a href="threads.html#00089" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00088.html">Date Prev</a>] [<a href="msg00090.html">Date Next</a>] [<a href="msg00088.html">Thread Prev</a>] [<a href="msg00090.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: relax-commits@xxxxxxx</li>
<li class="menuitem">
<em>Date</em>: Wed, 19 Sep 2012 08:55:30 -0000</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00089.html">E1TEG4A-0003z2-J1@subversion.gna.org</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>edward</strong> on September 19, 2012 - 10:55:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Author: bugman
Date: Wed Sep 19 10:55:30 2012
New Revision: 17499

URL: <a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax?rev=17499&amp;view=rev">http://svn.gna.org/viewcvs/relax?rev=17499&amp;view=rev</a>
Log:
Created the User_functions.test_structure_pdb_read GUI test for checking the 
sequence editor window.

This new user function GUI testing class is to be used for testing out the 
special GUI elements not
invoked within the unit testing.  The test_structure_pdb_read() test 
specifically shows a number of
failures of the sequence editor window.


Added:
    trunk/test_suite/gui_tests/test_user_functions.py
Modified:
    trunk/test_suite/gui_tests/__init__.py

Modified: trunk/test_suite/gui_tests/__init__.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/trunk/test_suite/gui_tests/__init__.py?rev=17499&amp;r1=17498&amp;r2=17499&amp;view=diff">http://svn.gna.org/viewcvs/relax/trunk/test_suite/gui_tests/__init__.py?rev=17499&amp;r1=17498&amp;r2=17499&amp;view=diff</a>
==============================================================================
--- trunk/test_suite/gui_tests/__init__.py (original)
+++ trunk/test_suite/gui_tests/__init__.py Wed Sep 19 10:55:30 2012
@@ -44,6 +44,7 @@
 from pipes import Pipes
 from rx import Rx
 from state import State
+from test_suite.gui_tests.test_user_functions import User_functions
 from test_suite.relax_test_loader import RelaxTestLoader as TestLoader
 
 
@@ -124,6 +125,7 @@
             suite_array.append(TestLoader().loadTestsFromTestCase(Pipes))
             suite_array.append(TestLoader().loadTestsFromTestCase(Rx))
             suite_array.append(TestLoader().loadTestsFromTestCase(State))
+            
suite_array.append(TestLoader().loadTestsFromTestCase(User_functions))
 
         # Group all tests together.
         full_suite = TestSuite(suite_array)

Added: trunk/test_suite/gui_tests/test_user_functions.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/trunk/test_suite/gui_tests/test_user_functions.py?rev=17499&amp;view=auto">http://svn.gna.org/viewcvs/relax/trunk/test_suite/gui_tests/test_user_functions.py?rev=17499&amp;view=auto</a>
==============================================================================
--- trunk/test_suite/gui_tests/test_user_functions.py (added)
+++ trunk/test_suite/gui_tests/test_user_functions.py Wed Sep 19 10:55:30 2012
@@ -1,0 +1,89 @@
+###############################################################################
+#                                                                            
 #
+# Copyright (C) 2012 Edward d'Auvergne                                       
 #
+#                                                                            
 #
+# This file is part of the program relax (<a  rel="nofollow" href="http://www.nmr-relax.com">http://www.nmr-relax.com</a>).         
 #
+#                                                                            
 #
+# This program is free software: you can redistribute it and/or modify       
 #
+# it under the terms of the GNU General Public License as published by       
 #
+# the Free Software Foundation, either version 3 of the License, or          
 #
+# (at your option) any later version.                                        
 #
+#                                                                            
 #
+# This program is distributed in the hope that it will be useful,            
 #
+# but WITHOUT ANY WARRANTY; without even the implied warranty of             
 #
+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the              
 #
+# GNU General Public License for more details.                               
 #
+#                                                                            
 #
+# You should have received a copy of the GNU General Public License          
 #
+# along with this program.  If not, see &lt;<a  rel="nofollow" href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a>&gt;.      
 #
+#                                                                            
 #
+###############################################################################
+
+&quot;&quot;&quot;Module for testing the special features of the user function GUI 
windows.&quot;&quot;&quot;
+
+# Python module imports.
+from os import sep
+
+# relax module imports.
+from status import Status; status = Status()
+from test_suite.gui_tests.base_classes import GuiTestCase
+
+# relax GUI imports.
+from gui.interpreter import Interpreter; interpreter = Interpreter()
+from gui.string_conv import int_to_gui, str_to_gui
+from gui.uf_objects import Uf_storage; uf_store = Uf_storage()
+
+
+class User_functions(GuiTestCase):
+    &quot;&quot;&quot;Class for testing special features of the user function GUI 
windows.&quot;&quot;&quot;
+
+    def test_structure_pdb_read(self):
+        &quot;&quot;&quot;Test the full operation of the structure.read_pdb user function 
GUI window.&quot;&quot;&quot;
+
+        # Open the pipe.create user function window, set the args and 
execute.
+        uf = uf_store['pipe.create']
+        uf._sync = True
+        uf.create_wizard(parent=self.app.gui)
+        uf.page.SetValue('pipe_name', str_to_gui('PDB reading test'))
+        uf.page.SetValue('pipe_type', str_to_gui('mf'))
+        uf.wizard._go_next(None)
+
+        # Open the structure.read_pdb user function window.
+        uf = uf_store['structure.read_pdb']
+        uf._sync = True
+        uf.create_wizard(parent=self.app.gui)
+
+        # The PDB file to operate on.
+        file = status.install_path + sep + 'test_suite' + sep + 
'shared_data' + sep + 'structures' + sep + 'trunc_ubi_pcs.pdb'
+        uf.page.SetValue('file', str_to_gui(file))
+
+        # Set the models to read.
+        uf.page.uf_args['read_model'].selection_win_show()
+        uf.page.uf_args['read_model'].sel_win.append_row(None)
+        uf.page.uf_args['read_model'].sel_win.append_row(None)
+        uf.page.uf_args['read_model'].sel_win.append_row(None)
+        
uf.page.uf_args['read_model'].sel_win.sequence.SetStringItem(index=0, col=0, 
label=int_to_gui(2))
+        
uf.page.uf_args['read_model'].sel_win.sequence.SetStringItem(index=1, col=0, 
label=int_to_gui(4))
+        uf.page.uf_args['read_model'].selection_win_data()
+
+        # Renumber the models.
+        uf.page.uf_args['set_model_num'].selection_win_show()
+        uf.page.uf_args['set_model_num'].sel_win.append_row(None)
+        uf.page.uf_args['set_model_num'].sel_win.append_row(None)
+        
uf.page.uf_args['set_model_num'].sel_win.sequence.SetStringItem(index=0, 
col=0, label=int_to_gui(1))
+        
uf.page.uf_args['set_model_num'].sel_win.sequence.SetStringItem(index=1, 
col=0, label=int_to_gui(3))
+        uf.page.uf_args['set_model_num'].selection_win_data()
+
+        # GUI data checks.
+        self.assertEqual(uf.page.uf_args['read_model'].GetValue(), [2, 4])
+        self.assertEqual(uf.page.uf_args['set_model_num'].GetValue(), [1, 2])
+
+        # Execute the user function.
+        uf.wizard._go_next(None)
+
+        # Check the structural data.
+        self.assert_(hasattr(cdp, 'structure'))
+        self.assert_(hasattr(cdp.structure, 'structural_data'))
+        self.assertEqual(len(cdp.structure.structural_data), 2)
+        self.assertEqual(cdp.structure.structural_data[0].num, 1)
+        self.assertEqual(cdp.structure.structural_data[1].num, 3)



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Wed Sep 19 11:40:01 2012</div>  
</body>
</html>
