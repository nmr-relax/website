<!-- MHonArc v2.6.10 -->
<!--X-Subject: Re: MII&#45;MV of full_analysis.py with RNA -->
<!--X-From-R13: "Sqjneq q'Ohiretar" <rqjneq.qnhiretarNtznvy.pbz> -->
<!--X-Date: Fri, 29 Sep 2006 17:47:50 +0200 -->
<!--X-Message-Id: 7f080ed10609290847w5648a510ga6ea217a4e6839f@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 481156b20609281057o4fe80f47wc1dda6ea6516498d@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: MII-MV of full_analysis.py with RNA -- September 29, 2006 - 17:47</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: MII-MV of full_analysis.py with RNA</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00046" class="tabs">Index by Date</a> | <a href="threads.html#00046" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00045.html">Date Prev</a>] [<a href="msg00047.html">Date Next</a>] [<a href="msg00041.html">Thread Prev</a>] [<a href="msg00042.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: &quot;Alexandar Hansen&quot; &lt;viochemist@xxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Sat, 30 Sep 2006 01:47:15 +1000</li>
<li class="menuitem">
<em>Cc</em>: relax-users@xxxxxxx</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00046.html">7f080ed10609290847w5648a510ga6ea217a4e6839f@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;<a href="msg00041.html">481156b20609281057o4fe80f47wc1dda6ea6516498d@mail.gmail.com</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on September 29, 2006 - 17:47:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<tt>On 9/29/06, Alexandar Hansen &lt;viochemist@xxxxxxxxx&gt; wrote:
</tt><blockquote class="blockquote"><pre style="margin: 0em;">Hello again,</pre><br>
<pre style="margin: 0em;">I'm having some problems getting relax to read in an RNA pdb.  When I use MI
(local_tm) it runs perfectly well, but when I go to sphere, it crashes.</pre><br>
<pre style="margin: 0em;">I realized quickly that I needed to tell the pdb input function to look for
different nuclei so I changed those lines (380 and 174) in full_analysis.py
to:</pre><br>
<pre style="margin: 0em;">pdb(name, 'etar_au22_phage_df_pt.pdb', heteronuc='N1', proton='H1')</pre><br>
<pre style="margin: 0em;"> And that helped, but still it crashed.  I was using a pdb where the
residues weren't numbered sequentially, so I tried one where they were
sequential and that didn't help.  I simplified the PDB and input down to one
residue and it still failed.  Using the Input and PDB I have below, this is
my full result when setting self.diff_model = 'sphere':
</pre></blockquote><pre style="margin: 0em;"><br>Are these three failures identical?  Do they print out the same error
message (the traceback)?</pre><br>
<br>
<blockquote class="blockquote"><pre style="margin: 0em;">$ python relax full_analysis.py</pre><br>
<pre style="margin: 0em;">relax&gt; run.create(run='sphere', run_type='mf')</pre><br>
<pre style="margin: 0em;">relax&gt; results.read(run='sphere', file='results', dir='local_tm/aic',
format='columnar')
Opening the file 'local_tm/aic/results.bz2' for reading.</pre><br>
<pre style="margin: 0em;">relax&gt; model_free.remove_tm(run='sphere', res_num=None)</pre><br>
<pre style="margin: 0em;">relax&gt; pdb(run='sphere', file='etar_au22_phage_df_pt.pdb',
dir=None, model=None, heteronuc='N1', proton='H1', load_seq=1)
Loading all structures from the PDB file.
Structure('etar_au22_phage_df_pt.pdb', model=1):
  Nucleotide chain of length 1</pre><br>
<pre style="margin: 0em;"><br>Calculating unit XH vectors.</pre><br>
<pre style="margin: 0em;"><br>Structure 1</pre><br>
<pre style="margin: 0em;">Traceback (most recent call last):
  File &quot;relax&quot;, line 458, in ?
    Relax()
  File &quot;relax&quot;, line 170, in __init__
    self.interpreter.run()
  File
&quot;/local/home/viochem/relax_1.2.7/prompt/interpreter.py&quot;,
line 213, in run
    run_script(intro=self.relax.intro_string, local=self.local,
script_file=self.relax.script_file, quit=1)
  File
&quot;/local/home/viochem/relax_1.2.7/prompt/interpreter.py&quot;,
line 388, in run_script
    console.interact (intro, local, script_file, quit)
  File
&quot;/local/home/viochem/relax_1.2.7/prompt/interpreter.py&quot;,
line 340, in interact_script
    execfile(script_file, local)
  File &quot;full_analysis.py&quot;, line 412, in ?
    Main()
  File &quot;full_analysis.py&quot;, line 174, in __init__
    pdb(name, 'etar_au22_phage_df_pt.pdb', heteronuc='N1', proton='H1')
  File &quot;/local/home/viochem/relax_1.2.7/prompt/pdb.py&quot;,
line 129, in pdb
    self.relax.generic.pdb.load(run=run, file=file, dir=dir, model=model,
heteronuc=heteronuc, proton=proton, load_seq=load_seq)
  File
&quot;/local/home/viochem/relax_1.2.7/generic_fns/pdb.py&quot;, line
198, in load
    self.vectors()
  File
&quot;/local/home/viochem/relax_1.2.7/generic_fns/pdb.py&quot;, line
229, in vectors
    pdb_residues =
self.relax.data.pdb[self.run].structures[i].peptide_chains[0].residues
IndexError: list index out of range</pre><br>
<pre style="margin: 0em;"><br>Is this a bug, or is there something else I'm forgetting?  I find the 
second
to last line a little curious (pdb_residues = ... .peptide_chains[0]... )
since I'm using a nucleic acid.
</pre></blockquote><pre style="margin: 0em;"><br>Yep, that is most definitely a bug!  For your molecule it should be
'nucleotide_chains' rather than 'peptide_chains'.  Could you please
create another bug report for this one?  Thanks.  All that's needed is
the print out from the program together with the traceback message, a
link to your post which is now archived at
<a  href="/mail.gna.org/public/relax-users/">https://mail.gna.org/public/relax-users/</a> (don't forget to include the
message ID as this helps others to precisely identify the post in
their archived email messages), and possibly the sample data from the
end of your message.</pre><br>
<pre style="margin: 0em;">Now, the difference between 'nucleotide_chains' and 'peptide_chains'
brings up an interesting problem.  For a PDB file with a single
protein/peptide or a single nucleic acid molecule, there should be no
problems.  But what happens if a PDB file is input which has one
protein molecule and one RNA molecule?  In this case there will be
both 'nucleotide_chains' and 'peptide_chains'.  How will relax know
whether the user is studying the protein or the RNA (or both)?  Or
what if there are two protein molecules?  Or two RNA molecules?  The
solution to all these questions should probably be implemented in
relax as a fix to the bug.  The current 'pdb()' user function is very
limited.</pre><br>
<br>
<blockquote class="blockquote"><pre style="margin: 0em;">So, In relation to this, what are the important features of the input pdb?</pre><br>
<tt>1) sequential numbering of the residues
</tt></blockquote><pre style="margin: 0em;"><br>This I don't know.  The PDB file is being read by the PDB reader from
Scientific python
(<a  href="http://starship.python.net/~hinsen/ScientificPython/">http://starship.python.net/~hinsen/ScientificPython/</a>).  The
description of the resultant data structure is given in the Scientific
python manual at
<a  href="http://starship.python.net/~hinsen/ScientificPython/ScientificPythonManual/Scientific_25.html">http://starship.python.net/~hinsen/ScientificPython/ScientificPythonManual/Scientific_25.html</a>.
If Scientific python can't handle a certain PDB file, unfortunately
there's not much I can do about it.  For most PDB files this shouldn't
be a problem.</pre><br>
<blockquote class="blockquote"><tt>2) sequential numbering of the atoms
</tt></blockquote><pre style="margin: 0em;"><br>Again this is up to Scientific python.</pre><br>
<blockquote class="blockquote"><tt>3) spacing of the columns
</tt></blockquote><pre style="margin: 0em;"><br>This shouldn't be a problem (unless two columns are fused due to
insufficient whitespace).</pre><br>
<blockquote class="blockquote"><pre style="margin: 0em;">4) first line (MODEL      #)
5) Last two lines (ENDMDL and END)
</pre></blockquote><pre style="margin: 0em;"><br>The Scientific PDB reader handles all PDB types so these lines should
not be a worry.</pre><br>
<pre style="margin: 0em;">In the distant past relax had two user functions, one called 'pdb()'
and the other 'vectors()'.  These were fused into the single 'pdb()'
function.  Thinking about how RNA has multiple data sets per residue,
each of which is specified by different atom names in the PDB, I think
the function should be separated again.  Then the PDB would be loaded
once and the XH unit vectors calculated separately for each data set
type.</pre><br>
<pre style="margin: 0em;">I hope this info helps,</pre><br>
<pre style="margin: 0em;">Edward</pre><br>
<br>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00041" href="msg00041.html">MII-MV of full_analysis.py with RNA</a></strong>
<ul><li><em>From:</em> Alexandar Hansen</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Fri Sep 29 19:20:10 2006</div>  
</body>
</html>
