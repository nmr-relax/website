<!-- MHonArc v2.6.10 -->
<!--X-Subject: Re: problems reading Xeasy format -->
<!--X-From-R13: "Sqjneq q'Ohiretar" <rqjneq.qnhiretarNtznvy.pbz> -->
<!--X-Date: Wed, 15 Nov 2006 03:20:27 +0100 -->
<!--X-Message-Id: 7f080ed10611141819m208d499akd991146cfed205ce@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 59ADAF5CA6A8FC4C889BD4097D912BB1072D330D@its&#45;xchg4.massey.ac.nz -->
<!--X-Reference: 7f080ed10611092342w2b05da34vb02ce40f355892cf@mail.gmail.com -->
<!--X-Reference: 59ADAF5CA6A8FC4C889BD4097D912BB1072D3314@its&#45;xchg4.massey.ac.nz -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: problems reading Xeasy format -- November 15, 2006 - 03:20</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: problems reading Xeasy format</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00010" class="tabs">Index by Date</a> | <a href="threads.html#00010" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00009.html">Date Prev</a>] [<a href="msg00011.html">Date Next</a>] [<a href="msg00011.html">Thread Prev</a>] [<a href="msg00012.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: &quot;Headey, Stephen&quot; &lt;S.J.Headey@xxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Wed, 15 Nov 2006 13:19:40 +1100</li>
<li class="menuitem">
<em>Cc</em>: relax-users@xxxxxxx</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00010.html">7f080ed10611141819m208d499akd991146cfed205ce@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;<a href="msg00003.html">59ADAF5CA6A8FC4C889BD4097D912BB1072D330D@its-xchg4.massey.ac.nz</a>&gt;	&lt;<a href="msg00006.html">7f080ed10611092342w2b05da34vb02ce40f355892cf@mail.gmail.com</a>&gt;	&lt;<a href="msg00008.html">59ADAF5CA6A8FC4C889BD4097D912BB1072D3314@its-xchg4.massey.ac.nz</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on November 15, 2006 - 03:20:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">That's bizarre.  When I run the 'noe.py' from the tar file script
attached to bug #7676 (<a  href="https://web.archive.org/web/https://gna.org/bugs/?7676">https://gna.org/bugs/?7676</a>), after renaming
'3c14.pdb' to 'ark.pdb', 'ref.list' to 'ref2.text', and 'sat.list' to
'sat2.text', both the 1.2 and 1.3 repository lines work fine and I get
grace plots of your steady-state NOE values.  For 1.3, the 'noe.py'
script had to be modified as the 1.2 version user function 'pdb()' is
currently called 'pdb.read()' in the 1.3 line (this will change again
soon).  When I tried the 1.2.9 version, all the data from the XEasy
files was skipped  - this is understandable though as this version
doesn't contain the fixes.</pre><br>
<pre style="margin: 0em;">One thing that it might be is that your working copy of the repository
source code may be out of date.  This can be updated by typing 'svn
up' in the relax base directory.  I'm not sure what is going on
because I can't reproduce the error.  Are you using the same data as
attached to the bug report?  Any help in reproducing this bug would be
appreciated.</pre><br>
<pre style="margin: 0em;">Cheers,</pre><br>
<pre style="margin: 0em;">Edward</pre><br>
<tt><br>On 11/14/06, Headey, Stephen &lt;S.J.Headey@xxxxxxxxxxxx&gt; wrote:
</tt><blockquote class="blockquote"><pre style="margin: 0em;">Hi Edward,</pre><br>
<pre style="margin: 0em;">   I've installed relax-1.2.9. I've also installed subversion and used it to 
get relax-1.2 and relax-1.3 as you specified using the commands</pre><br>
<pre style="margin: 0em;">   svn co svn://svn.gna.org/svn/relax/1.2 relax-1.2
   svn co svn://svn.gna.org/svn/relax/1.2 relax-1.3</pre><br>
<pre style="margin: 0em;">   Everything seemed to download OK. However, the same (or similar) problems 
are still occurring. Did I neglect something? The ref data set is still 
skipped, the sat file is not read and I get the following error:</pre><br>
<pre style="margin: 0em;">   Skipping the data: ['660', '1', '123.588', '8.445', 'N', '181', 'LYS', 
'HN', '181', 'LYS', '5.754e+04', '0.00e+00', 'm']
   Skipping the data: ['661', '1', '127.440', '8.029', 'N', '182', 'GLN', 
'HN', '182', 'GLN', '9.641e+04', '0.00e+00', 'm']
   Traceback (most recent call last):
     File &quot;/usr/local/bin/relax&quot;, line 454, in ?
       Relax()
     File &quot;/usr/local/bin/relax&quot;, line 166, in __init__
       self.interpreter.run()
     File &quot;/usr/local/relax/prompt/interpreter.py&quot;, line 213, in run
       run_script(intro=self.relax.intro_string, local=self.local, 
script_file=self.relax.script_file, quit=1)
     File &quot;/usr/local/relax/prompt/interpreter.py&quot;, line 388, in run_script
       console.interact(intro, local, script_file, quit)
     File &quot;/usr/local/relax/prompt/interpreter.py&quot;, line 340, in 
interact_script
       execfile(script_file, local)
     File &quot;noe.py&quot;, line 11, in ?
       noe.read(name, file='ref.list_ori', spectrum_type='ref', 
format='xeasy')
     File &quot;/usr/local/relax/prompt/noe.py&quot;, line 226, in read
       self.__relax__.specific.noe.read(run=run, file=file, dir=dir, 
spectrum_type=spectrum_type, format=format, heteronuc=heteronuc, 
proton=proton, int_col=int_col)
     File &quot;/usr/local/relax/specific_fns/noe.py&quot;, line 110, in read
       self.relax.generic.intensity.read(run=run, file=file, dir=dir, 
format=format, heteronuc=heteronuc, proton=proton, int_col=int_col, 
assign_func=self.assign_function)
     File &quot;/usr/local/relax/generic_fns/intensity.py&quot;, line 142, in read
       res_num, X_name, H_name, intensity = self.intensity(file_data[i])
     File &quot;/usr/local/relax/generic_fns/intensity.py&quot;, line 73, in 
intensity_xeasy
       if line[4] == 'inv.':
   IndexError: list index out of range</pre><br>
<pre style="margin: 0em;">   Cheers,
   Steve</pre><br>
<pre style="margin: 0em;"><br></pre><br>
<pre style="margin: 0em;"><br>-----Original Message-----
From:   Edward d'Auvergne [<a  href="mailto:edward.dauvergne@xxxxxxxxx">mailto:edward.dauvergne@xxxxxxxxx</a>]
Sent:   Fri 11/10/2006 8:42 PM
To:     Headey, Stephen
Cc:     relax-users@xxxxxxx
Subject:        Re: problems reading Xeasy format</pre><br>
<pre style="margin: 0em;">I've now fixed the issue.  Steve reported the problem as bug #7676
(<a  href="https://web.archive.org/web/https://gna.org/bugs/index.php?7676">https://gna.org/bugs/index.php?7676</a>), and the fine details of the fix
are available at that link.  The problem was that relax was assuming
that the w1 dimension in the XEasy text file was the proton dimension.
 There was also a side issue that the first two lines of the XEasy
file were being ignored.  I have fixed the problems by creating two
new functions: one to determine how many header lines are in the file;
the other to determine which of w1 or w2 is the proton dimension.</pre><br>
<pre style="margin: 0em;">To get the new code there are two options.  The changes are located in
the relax source code repository (<a  href="http://svn.gna.org/viewcvs/relax/">http://svn.gna.org/viewcvs/relax/</a>)
which is a Subversion repository (<a  href="http://subversion.tigris.org/">http://subversion.tigris.org/</a>).  The
exact location of the fixes are the 1.2 and 1.3 repository lines.
Steve, if you have Subversion installed, you can download the 1.2 line
code by typing:</pre><br>
<pre style="margin: 0em;">svn co svn://svn.gna.org/svn/relax/1.2 relax-1.2</pre><br>
<pre style="margin: 0em;">If that doesn't work, you can also use the command:</pre><br>
<pre style="margin: 0em;">svn co <a  href="http://svn.gna.org/svn/relax/1.2">http://svn.gna.org/svn/relax/1.2</a> relax-1.2</pre><br>
<pre style="margin: 0em;">This code is very stable.  The other option is to wait until I make a
new relax release.  As I have just released versions 1.2.8 and 1.2.9
(please don't use 1.2.8 as that version introduced a very important
bug) in the last week, I would prefer to wait a while before releasing
1.2.10 to accumulate a few more bug fixes.</pre><br>
<pre style="margin: 0em;">Cheers,</pre><br>
<pre style="margin: 0em;">Edward</pre><br>
<pre style="margin: 0em;"><br></pre><br>
<pre style="margin: 0em;">On 11/8/06, Headey, Stephen &lt;S.J.Headey@xxxxxxxxxxxx&gt; wrote:
&gt; Hi Edward,
&gt;
&gt; I've just started using relax and I thought I'd try calculating the NOE 
just to try it out. My data is in Xeasy text window format and I specified 
format='xeasy' as instructed by the manual. This is recognised when the script 
is executed but only the first 2 lines of input appear to be read and the rest 
of the data is skipped. No NOE value is calculated for any residue. What is the 
reason for this?
&gt;
&gt; Cheers,
&gt; Steve Headey
&gt;
&gt; Here is a sample of the relevant input and output.
&gt;
&gt; INPUT
&gt;
&gt;
&gt;    3    1   101.181   8.267    N  51 GLY     HN  51 GLY    9.578e+03  
0.00e+00     m
&gt;    5    1   103.383   8.211    N 148 GLY     HN 148 GLY    3.732e+03  
0.00e+00     m
&gt;    6    1   103.407   7.805    N 158 GLY     HN 158 GLY    1.425e+04  
0.00e+00     m
&gt;    8    1   103.257   8.593    N  88 GLY     HN  88 GLY    1.314e+04  
0.00e+00     m
&gt;    9    1   103.280   8.973    N 163 GLY     HN 163 GLY    1.745e+04  
0.00e+00     m
&gt;
&gt; OUTPUT
&gt; relax&gt; noe.read(run='noe', file='ref.list', dir=None, spectrum_type='ref', 
format='xeasy', heteronuc='N', proton='HN', int_col=None)
&gt; Reference spectrum.
&gt; XEasy formatted data file.
&gt;
&gt; Opening the file 'ref.list' for reading.
&gt; Skipping the data: ['6', '1', '103.407', '7.805', 'N', '158', 'GLY', 'HN', 
'158', 'GLY', '1.425e+04', '0.00e+00', 'm']
&gt; Skipping the data: ['8', '1', '103.257', '8.593', 'N', '88', 'GLY', 'HN', 
'88', 'GLY', '1.314e+04', '0.00e+00', 'm']
&gt; Skipping the data: ['9', '1', '103.280', '8.973', 'N', '163', 'GLY', 'HN', 
'163', 'GLY', '1.745e+04', '0.00e+00', 'm']
&gt;
&gt;
&gt;
&gt;
&gt;
&gt; _______________________________________________
&gt; relax (<a  href="http://nmr-relax.com">http://nmr-relax.com</a>)
&gt;
&gt; This is the relax-users mailing list
&gt; relax-users@xxxxxxx
&gt;
&gt; To unsubscribe from this list, get a password
&gt; reminder, or change your subscription options,
&gt; visit the list information page at
&gt; <a  href="https://mail.gna.org/listinfo/relax-users">https://mail.gna.org/listinfo/relax-users</a>
&gt;
&gt;
&gt;
&gt;</pre><br>
<pre style="margin: 0em;"><br></pre><br>
<br>
</blockquote><pre style="margin: 0em;"><br></pre><br>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00012" href="msg00012.html">RE: problems reading Xeasy format</a></strong>
<ul><li><em>From:</em> Headey, Stephen</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00003" href="msg00003.html">problems reading Xeasy format</a></strong>
<ul><li><em>From:</em> Headey, Stephen</li></ul></li>
<li><strong><a name="00006" href="msg00006.html">Re: problems reading Xeasy format</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00008" href="msg00008.html">RE: problems reading Xeasy format</a></strong>
<ul><li><em>From:</em> Headey, Stephen</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Wed Nov 15 06:00:26 2006</div>  
</body>
</html>
