<!-- MHonArc v2.6.19+ -->
<!--X-Subject: Re: Using multi&#45;processor for model_free -->
<!--X-From-R13: "[nuqv, Enz" &#60;fnz.znuqv.846Nzl.pfha.rqh> -->
<!--X-Date: Tue, 06 Sep 2016 19:11:07 +0200 -->
<!--X-Message-Id: CALgM0gWz1fS03WRFsPYarvoii&#45;443L6bi7NFeZHto5L&#45;O2WoDQ@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: CALgM0gUvCzpo2B20iHDxkPWBeKYdj4LLUv_yu2hDVo3gjVha4Q@mail.gmail.com -->
<!--X-Reference: CALgM0gXrG+=85_FiJqQ98kRSSmRQ8APe=y+PFqrcpnuEne78YQ@mail.gmail.com -->
<!--X-Reference: CA+CBx2PcJHScP=EdZpXqwvfdgEGO8vu8Gq&#45;gNbCKS_HDH0NLJw@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: Using multi-processor for model_free -- September 06, 2016 - 19:11</title>
<link rel="stylesheet" type="text/css" href="/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="https://gna.org/images/gna.theme/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: Using multi-processor for model_free</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00004" class="tabs">Index by Date</a> | <a href="threads.html#00004" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00003.html">Date Prev</a>] [<a href="msg00005.html">Date Next</a>] [<a href="msg00003.html">Thread Prev</a>] [<a href="msg00005.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxxxxxx&gt;,  relax-users@xxxxxxx</li>
<li class="menuitem">
<em>Date</em>: Tue, 6 Sep 2016 10:10:38 -0700</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=my-csun-edu.20150623.gappssmtp.com; s=20150623; h=mime-version:in-reply-to:references:from:date:message-id:subject:to; bh=Dc/2qdkjUIFvwemJCHB9jOQpEdVxGCYyV4nQN2sD/og=; b=jvW7GThpzZdrR602sgdJZXW/d/KYwLLFHDFsvom8BjeP7eIcXwq9raQgf2A5QRjF1T +DZMmI5pmGzpOeS8vSNgvw/u3uFIDLuKSCOdXuHE7jJYfTE97hlkvVAqytIupOLZ23cY bF0N5XaOPEOVgAzNNDff5Rzp6JkNA8ygvENDJ5us4ZEuvQQJd/Lh0jSSJRRj6Uc1ToyB cTvZ76KQkXtby0wggE8PRe9HD3Fh+zkYm/0RYhQ5W1Ulo5oBs/6OKX+pYh1QkFuoE+cc DMcJlYDHfKexeqpGYcPKevK0tkDRjS1vE8vxiLJwIRO4HM/b9ICXqvO4z3I1gnyRf/m6 6t1g==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00004.html">CALgM0gWz1fS03WRFsPYarvoii-443L6bi7NFeZHto5L-O2WoDQ@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;<a href="msg00001.html">CALgM0gUvCzpo2B20iHDxkPWBeKYdj4LLUv_yu2hDVo3gjVha4Q@mail.gmail.com</a>&gt; &lt;CALgM0gXrG+=85_FiJqQ98kRSSmRQ8APe=y+PFqrcpnuEne78YQ@mail.gmail.com&gt; &lt;CA+CBx2PcJHScP=EdZpXqwvfdgEGO8vu8Gq-gNbCKS_HDH0NLJw@mail.gmail.com&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Mahdi, Sam</strong> on September 06, 2016 - 19:11:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Thank you for your reply. When I come to upload my data though, I see there
are only 4 available slots I can upload my data. I have a total of 6 data
files however, that need to be uploaded (3 of each frequency). I also need
to upload the relax -i of 2 different computers, and the script file I've
been using for a total of 9 files that need to be uploaded. Is there a way
to increase the amount I can upload, or can I upload more after the initial
submission?

On Mon, Sep 5, 2016 at 2:46 AM, Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxxxxxx
</pre><blockquote class="blockquote"><pre style="margin: 0em;">wrote:
</pre></blockquote><pre style="margin: 0em;">

</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi Sam.

To solve this problem, it would be easier to have access to some of your
data.
Can you upload to: <a  rel="nofollow" href="https://gna.org/bugs/?group=relax">https://gna.org/bugs/?group=relax</a>

Take each of your data files, and delete all data, except 2 spins.
Also provide your script file, or a description of which button you press
in the GUI.

Please also provide information about your system with:
relax -i

Then I will make a tutorial for you. To be added here:
<a  rel="nofollow" href="http://wiki.nmr-relax.com/Category:Tutorials">http://wiki.nmr-relax.com/Category:Tutorials</a>

If there is a problem in relax, I will write a systemtest which will solve
the problem.
And the problem will never return.

If this a user error, the tutorial should help to prevent this, and would
be the first step before
adding/modifying the manual.

Regarding using mpirun.
Have a look at this page. Maybe it helps.
<a  rel="nofollow" href="http://wiki.nmr-relax.com/OpenMPI">http://wiki.nmr-relax.com/OpenMPI</a>


Cheers.


2016-09-03 4:13 GMT+02:00 Mahdi, Sam &lt;sam.mahdi.846@xxxxxxxxxxx&gt;:

</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hello everyone,

So I was able to set up and run the dauvergne_protocol successfully by
using the script in the wiki. The problem I have come across now is the
program doesn't seem to read my data. Using the gui interface I was able
to
successfully load my data and run it. When I upload my data using the
script command:
relax_data.read(ri_id='R1_Agnes',ri_type='R1',frq=599.642*1e6,
file='R1_Agnes',res_num_col=1,data_col=2,error_col=3)

The output file simply gives errors for amino acids I don't have data for:
RelaxWarning: The sequence data in the line ['1'] is invalid, the data is
missing.

This is fine as relax just ignores these values and continues its
calculations. I only receive this warning for values I don't have data
for.
This is the same thing I got when using the gui interface (the gui however
showed my values that I have data for and the residue it corresponds to,
using the script I don't receive such an output, I don't know whether this
is normal or not). However, since I don't get this warning for every amino
acid, I assume this means it has read the values for the other amino
acids.
All of my data is the same, relax warnings only pop up for amino acids
that
I don't have data for. The problem is, when I enter the dAuvergne
protocol,
I get the protocol working, it starts running local_tm however it appears
none of my data has been uploaded:
RelaxWarning: The spin '#hRGS7:2@N' has been deselected because of
missing
relaxation data
RelaxWarning: The spin '#hRGS7:3@N' has been deselected because of
missing
relaxation data

And I get that warning for every single amino acid. From the output, it
appears to have read the file since it knows exactly which amino acids I
don't have data for, but I don't know why when it comes to running the
protocol, it tells me I havn't inputed any data. I have typed everything
directly according to the script from the wiki. From running the protoco,
it appears everything has properly been uploaded, structure data, magnetic
dipole interactions, csa, the data pipe, the analysis variables, the
python
module imports, and setting up the spins from the pdb file. It appears the
only error is from loading the actual relaxation data.

On a completely unrelated side note, I have been attempting to run relax
on
multiple processors. I have tried 2 different computers, both fedora
linux.
I have mpi4py and openmpi downloaded on both. On one, I can get relax on
multiple cores working (havn't been able to successfully run it due to
being unable to upload any data properly). On the other however, I type in
the mpirun -np --multi='mpi4py' script, but I get no output. I can see
that
it's running in the background (top command), but nothing pops up, no text
command, nothing. I typed the same mpirun with the --gui, but that opened
up nothing. On a uni-processor (typing in the exact same command without
indicating how many cores i.e. no -np --multi='mpi4py') it works just
fine,
so I don't think its my openmpi that's an issue. I don't know whether this
is an issue with my mpi4py or a personal computer issue (since on the
other
computer relax runs just fine on multiple cores).

Sincerely,
Sam

P.S. when I do enter the top command to see what's running. My master
shows
mpirun, and the 3 slaves display python when I put -np 4, so I know
something is running in the background. I have 8 cores.

On Wed, Aug 31, 2016 at 6:49 PM, Mahdi, Sam &lt;sam.mahdi.846@xxxxxxxxxxx&gt;
wrote:

</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hello everyone,

I am attempting to run relax on a multi-processor mode. I have been able
to successfully set-up relax to operate in a multi-processor mode by
</pre></blockquote><pre style="margin: 0em;">using
</pre><blockquote class="blockquote"><pre style="margin: 0em;">the mpirun -np #ofprocessors /location/of/relax --multi='mpi4py'

The problem I encounter is when using the --tee log
</pre></blockquote><pre style="margin: 0em;">dauvergne_protocol.py
</pre><blockquote class="blockquote"><pre style="margin: 0em;">command. I receive this error
RelaxError: the script file 'dauvergne_protocol.py' does not exist

I located the script file and tried to direct to it's path
mpirun /usr/local/Relax/relax-2.2.5/relax --multi='mpi4py' --tee log
/usr/local/Relax/relax-2.2.5/auto-analyses/dauvergne_protocol.py

But i received this error
RelaxError: the script file '/usr/local/Relax/relax-2.2.5/
auto-analyses/dauvergne_protocol.py' does not exist.

Even though I have the script, it doesn't seem to be able to locate it.

On a side note, in the manual, one dash doesn't actually run the
</pre></blockquote><pre style="margin: 0em;">command.
</pre><blockquote class="blockquote"><pre style="margin: 0em;">I.e. in the manual it displays -multi='mpi4py' . What it should be is
--multi='mpi4py' . The same goes for -tee. It should be --tee.

Sincerely,
Sam

</pre></blockquote><pre style="margin: 0em;">_______________________________________________
relax (<a  rel="nofollow" href="http://www.nmr-relax.com">http://www.nmr-relax.com</a>)

This is the relax-users mailing list
relax-users@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="https://mail.gna.org/listinfo/relax-users">https://mail.gna.org/listinfo/relax-users</a>

</pre></blockquote><pre style="margin: 0em;">


</pre></blockquote><pre style="margin: 0em;">

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00005" href="msg00005.html">Re: Using multi-processor for model_free</a></strong>
<ul><li><em>From:</em> Troels Emtekær Linnet</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00001" href="msg00001.html">Using multi-processor for model_free</a></strong>
<ul><li><em>From:</em> Mahdi, Sam</li></ul></li>
<li><strong><a name="00002" href="msg00002.html">Re: Using multi-processor for model_free</a></strong>
<ul><li><em>From:</em> Mahdi, Sam</li></ul></li>
<li><strong><a name="00003" href="msg00003.html">Re: Using multi-processor for model_free</a></strong>
<ul><li><em>From:</em> Troels Emtekær Linnet</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer">You are on the <a href="http://gna.org">Gna!</a> mail server.</div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Wed Sep 07 10:00:06 2016</div>  
</body>
</html>
