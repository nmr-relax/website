<!-- MHonArc v2.6.16 -->
<!--X-Subject: r6371 &#45; /1.3/test_suite/system_tests/model_free.py -->
<!--X-From-R13: rqjneqNaze&#45;erynk.pbz -->
<!--X-Date: Sun, 22 Jun 2008 03:18:35 +0200 -->
<!--X-Message-Id: E1KADsw&#45;0007U7&#45;9Z@subversion.gna.org -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>r6371 - /1.3/test_suite/system_tests/model_free.py -- June 22, 2008 - 03:18</title>
<link rel="stylesheet" type="text/css" href="/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="https://gna.org/images/gna.theme/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />r6371 - /1.3/test_suite/system_tests/model_free.py</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00064" class="tabs">Index by Date</a> | <a href="threads.html#00064" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00063.html">Date Prev</a>] [<a href="msg00065.html">Date Next</a>] [<a href="msg00063.html">Thread Prev</a>] [<a href="msg00065.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: relax-commits@xxxxxxx</li>
<li class="menuitem">
<em>Date</em>: Sun, 22 Jun 2008 00:56:49 -0000</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00064.html">E1KADsw-0007U7-9Z@subversion.gna.org</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>edward</strong> on June 22, 2008 - 03:18:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Author: bugman
Date: Sun Jun 22 02:56:40 2008
New Revision: 6371

URL: <a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax?rev=6371&amp;view=rev">http://svn.gna.org/viewcvs/relax?rev=6371&amp;view=rev</a>
Log:
A pile of fixes for the relax 1.2 model-free results file reading system test.


Modified:
    1.3/test_suite/system_tests/model_free.py

Modified: 1.3/test_suite/system_tests/model_free.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/1.3/test_suite/system_tests/model_free.py?rev=6371&amp;r1=6370&amp;r2=6371&amp;view=diff">http://svn.gna.org/viewcvs/relax/1.3/test_suite/system_tests/model_free.py?rev=6371&amp;r1=6370&amp;r2=6371&amp;view=diff</a>
==============================================================================
--- 1.3/test_suite/system_tests/model_free.py (original)
+++ 1.3/test_suite/system_tests/model_free.py Sun Jun 22 02:56:40 2008
@@ -643,7 +643,7 @@
         s2s = [0.49230363061145249, 0.38491796164819009, 0.4240433056059994, 
0.41462904855388333, 0.60095102971952741, 0.48406574687168274, 
0.50800379067049317, 0.51557336720143987, 0.59486845122178478, 
0.47839684761453399, 0.47873867934666214, 0.62433881919629686, 
0.46368028522041266, 0.51210557140148982, 0.57690296800513374, 
0.49281795745831319, 0.55430962492751434, 0.61815983018913379, 
0.5276873464009153, 0.50385285725620466, 0.57319933407525203, 
0.35637907423767778]
         tf = [51.972302580836775, 40.664901270582988, 28.130299965023671, 
33.804249387275249, None, None, 39.01236115991609, None, None, None, None, 
None, None, None, None, None, None, None, None, None, None, 
44.039078787981225]
         ts = [4485.91415175767, 4102.7781982031429, 3569.2837792404325, 
6879.5308400989479, 3372.9879908647699, 4029.0617588044606, 
4335.5290462417324, 4609.1336532777468, 2628.5638771308277, 
3618.1332115807745, 6208.3028336637644, 3763.0843884066526, 
3847.9994107906346, 2215.2061317769703, 2936.1282626562524, 
3647.0715185456729, 3803.6990762708042, 2277.5259401416288, 
3448.4496004396187, 3884.6917561878495, 1959.3267951363712, 
4100.8496898773756]
-        rex = [None, 4102.7781982031429, None, None, None, None, None, None, 
None, None, None, None, None, None, None, None, None, None, None, None, None, 
4100.8496898773756]
+        rex = [None, 0.37670424516405815, None, None, None, None, None, 
None, None, None, None, None, None, None, None, None, None, None, None, None, 
None, 0.71472288436387088]
         r1_500 = [2.2480000000000002, 2.2679999999999998, 
2.2309999999999999, 2.383, 2.1960000000000002, 2.3570000000000002, 
2.3340000000000001, 2.3999999999999999, 2.2839999999999998, 
2.3889999999999998, 2.375, 2.274, 2.407, 2.3220000000000001, 
2.2130000000000001, 2.351, 2.3260000000000001, 2.2949999999999999, 
2.2829999999999999, 2.302, 2.2719999999999998, 2.2280000000000002]
         r2_500 = [5.3419999999999996, 5.3730000000000002, 
5.1280000000000001, 5.6749999999999998, 5.9669999999999996, 
5.8410000000000002, 5.774, 6.0419999999999998, 6.3129999999999997, 
5.9210000000000003, 6.1269999999999998, 6.1120000000000001, 
6.0570000000000004, 5.6399999999999997, 6.2809999999999997, 
5.8890000000000002, 5.875, 6.1429999999999998, 5.7370000000000001, 
5.5490000000000004, 5.7110000000000003, 5.4020000000000001]
         noe_500 = [0.4617, 0.46560000000000001, 0.61670000000000003, 
0.60860000000000003, 0.68869999999999998, 0.6663, 0.58620000000000005, 
0.64939999999999998, 0.61070000000000002, 0.61180000000000001, 
0.73129999999999995, 0.69650000000000001, 0.65139999999999998, 0.4929, 
0.65920000000000001, 0.63029999999999997, 0.64380000000000004, 
0.53500000000000003, 0.63839999999999997, 0.65000000000000002, 
0.49909999999999999, 0.45979999999999999]
@@ -653,6 +653,15 @@
         r1_750 = [1.6220000000000001, 1.706, 1.73, 1.665, 1.627, 1.768, 
1.706, 1.7030000000000001, 1.7649999999999999, 1.8129999999999999, 1.675, 
1.6339999999999999, 1.845, 1.7829999999999999, 1.764, 1.7470000000000001, 
1.681, 1.647, 1.6850000000000001, 1.667, 1.7010000000000001, 
1.6850000000000001]
         r2_750 = [6.2619999999999996, 6.5359999999999996, 
5.8959999999999999, 6.6840000000000002, 6.8819999999999997, 
6.7569999999999997, 6.5620000000000003, 7.0030000000000001, 
6.9740000000000002, 6.649, 6.9829999999999997, 7.2309999999999999, 
6.4429999999999996, 6.6840000000000002, 6.8070000000000004, 
6.4850000000000003, 6.9400000000000004, 6.944, 6.4640000000000004, 
6.4889999999999999, 6.9009999999999998, 6.9539999999999997]
         noe_750 = [0.61909999999999998, 0.65890000000000004, 
0.72009999999999996, 0.71009999999999995, 0.75219999999999998, 
0.80420000000000003, 0.70020000000000004, 0.81999999999999995, 
0.81040000000000001, 0.83409999999999995, 0.81299999999999994, 
0.81910000000000005, 0.7782, 0.74760000000000004, 0.8115, 0.7379, 
0.81100000000000005, 0.78249999999999997, 0.75729999999999997, 
0.78259999999999996, 0.75139999999999996, 0.65210000000000001]
+        r1_500_err = [0.044999999999999998, 0.044999999999999998, 
0.044499999999999998, 0.048000000000000001, 0.043999999999999997, 0.047, 
0.0465, 0.048000000000000001, 0.045499999999999999, 0.048000000000000001, 
0.047500000000000001, 0.045499999999999999, 0.048000000000000001, 0.0465, 
0.044499999999999998, 0.047, 0.0465, 0.045499999999999999, 
0.045499999999999999, 0.045999999999999999, 0.045499999999999999, 
0.044499999999999998]
+        r2_500_err = [0.107, 0.1075, 0.10249999999999999, 0.1135, 
0.11899999999999999, 0.11650000000000001, 0.11600000000000001, 0.121, 0.1265, 
0.11799999999999999, 0.123, 0.122, 0.1215, 0.1125, 0.17599999999999999, 
0.11749999999999999, 0.11749999999999999, 0.123, 0.1145, 0.111, 0.1145, 0.108]
+        noe_500_err = [0.050000000000000003, 0.050000000000000003, 
0.050000000000000003, 0.050000000000000003, 0.050000000000000003, 
0.050000000000000003, 0.050000000000000003, 0.050000000000000003, 
0.050000000000000003, 0.050000000000000003, 0.050000000000000003, 
0.050000000000000003, 0.050000000000000003, 0.050000000000000003, 
0.050000000000000003, 0.050000000000000003, 0.050000000000000003, 
0.050000000000000003, 0.050000000000000003, 0.050000000000000003, 
0.050000000000000003, 0.050000000000000003]
+        r1_600_err = [0.037999999999999999, 0.040000000000000001, 
0.040500000000000001, 0.0395, 0.0385, 0.041000000000000002, 
0.040000000000000001, 0.040500000000000001, 0.040000000000000001, 
0.042000000000000003, 0.041500000000000002, 0.039, 0.042000000000000003, 
0.042000000000000003, 0.0395, 0.040500000000000001, 0.040000000000000001, 
0.039, 0.0395, 0.040000000000000001, 0.040500000000000001, 0.039]
+        r2_600_err = [0.1125, 0.11550000000000001, 0.108, 0.1235, 0.1265, 
0.1275, 0.123, 0.125, 0.1285, 0.12, 0.128, 0.13350000000000001, 0.1225, 
0.11899999999999999, 0.1265, 0.1195, 0.128, 0.129, 0.1225, 0.122, 0.1265, 
0.1225]
+        noe_600_err = [0.050000000000000003, 0.050000000000000003, 
0.050000000000000003, 0.050000000000000003, 0.050000000000000003, 
0.050000000000000003, 0.050000000000000003, 0.050000000000000003, 
0.050000000000000003, 0.050000000000000003, 0.050000000000000003, 
0.050000000000000003, 0.050000000000000003, 0.050000000000000003, 
0.050000000000000003, 0.050000000000000003, 0.050000000000000003, 
0.050000000000000003, 0.050000000000000003, 0.050000000000000003, 
0.050000000000000003, 0.050000000000000003]
+        r1_750_err = [0.032500000000000001, 0.034000000000000002, 
0.035000000000000003, 0.033500000000000002, 0.032500000000000001, 
0.035499999999999997, 0.034000000000000002, 0.034000000000000002, 
0.035499999999999997, 0.036499999999999998, 0.033500000000000002, 
0.032500000000000001, 0.036999999999999998, 0.035499999999999997, 
0.035499999999999997, 0.035000000000000003, 0.033500000000000002, 
0.033000000000000002, 0.034000000000000002, 0.033000000000000002, 
0.034000000000000002, 0.033500000000000002]
+        r2_750_err = [0.1255, 0.1305, 0.11799999999999999, 
0.13400000000000001, 0.13800000000000001, 0.13550000000000001, 
0.13150000000000001, 0.14050000000000001, 0.13950000000000001, 
0.13300000000000001, 0.14000000000000001, 0.14449999999999999, 0.129, 
0.13400000000000001, 0.13600000000000001, 0.1295, 0.13850000000000001, 
0.13900000000000001, 0.1295, 0.13, 0.13800000000000001, 0.13900000000000001]
+        noe_750_err = [0.050000000000000003, 0.050000000000000003, 
0.050000000000000003, 0.050000000000000003, 0.050000000000000003, 
0.050000000000000003, 0.050000000000000003, 0.050000000000000003, 
0.050000000000000003, 0.050000000000000003, 0.050000000000000003, 
0.050000000000000003, 0.050000000000000003, 0.050000000000000003, 
0.050000000000000003, 0.050000000000000003, 0.050000000000000003, 
0.050000000000000003, 0.050000000000000003, 0.050000000000000003, 
0.050000000000000003, 0.050000000000000003]
 
         # Diffusion tensor type.
         self.assertEqual(cdp.diff_tensor.type, 'sphere')
@@ -660,11 +669,22 @@
         # tm.
         self.assertEqual(cdp.diff_tensor.tm, 6.2029050826362826e-09)
 
+        # Global minimisation statistic tests.
+        self.assertEqual(88.0888600975, cdp.chi2)
+        self.assertEqual(1, cdp.iter)
+        self.assertEqual(20, cdp.f_count)
+        self.assertEqual(2, cdp.g_count)
+        self.assertEqual(1, cdp.h_count)
+        self.assertEqual(None, cdp.warning)
+
         # Loop over the residues of the original data.
+        j = 0
         for i in xrange(len(cdp.mol[0].res)):
             # Aliases
             res = cdp.mol[0].res[i]
             spin = cdp.mol[0].res[i].spin[0]
+            print res
+            print spin
 
             # Spin info tests.
             self.assertEqual(num[i], res.num)
@@ -678,25 +698,29 @@
                 continue
 
             # Model-free tests.
-            self.assertEqual(model[i], spin.model)
-            self.assertEqual(params[i], spin.params)
-            self.assertEqual(s2[i], spin.s2)
-            self.assertEqual(s2f[i], spin.s2f)
-            self.assertEqual(s2s[i], spin.s2s)
+            self.assertEqual(model[j], spin.model)
+            self.assertEqual(params[j], spin.params)
+            self.assertEqual(s2[j], spin.s2)
+            self.assertEqual(s2f[j], spin.s2f)
+            self.assertEqual(s2s[j], spin.s2s)
             self.assertEqual(None, spin.local_tm)
             self.assertEqual(None, spin.te)
-            self.assertEqual(tf[i], spin.tf)
-            self.assertEqual(ts[i], spin.ts)
-            self.assertEqual(rex[i], spin.rex)
-            self.assertEqual(1.02, spin.r)
-            self.assertEqual(-170.0, spin.csa)
+            if tf[j] != None:
+                tf[j] = tf[j]*1e-12
+            self.assertEqual(tf[j], spin.tf)
+            self.assertEqual(ts[j]*1e-12, spin.ts)
+            if rex[j] != None:
+                rex[j] = rex[j]/(2.0*pi*500000000.0)**2
+            self.assertEqual(rex[j], spin.rex)
+            self.assertEqual(1.0200000000000001e-10, spin.r)
+            self.assertEqual(-0.00016999999999999999, spin.csa)
 
             # Minimisation statistic tests.
-            self.assertEqual(88.0888600975, spin.chi2)
-            self.assertEqual(1, spin.iter)
-            self.assertEqual(20, spin.f_count)
-            self.assertEqual(2, spin.g_count)
-            self.assertEqual(1, spin.h_count)
+            self.assertEqual(None, spin.chi2)
+            self.assertEqual(None, spin.iter)
+            self.assertEqual(None, spin.f_count)
+            self.assertEqual(None, spin.g_count)
+            self.assertEqual(None, spin.h_count)
             self.assertEqual(None, spin.warning)
 
             # Relaxation data tests.
@@ -704,8 +728,11 @@
             self.assertEqual([0,0,0,1,1,1,2,2,2], spin.remap_table)
             self.assertEqual(['500','600','750'], spin.frq_labels)
             self.assertEqual([500000000.0,600000000.0,750000000.0], spin.frq)
-            self.assertEqual(relax_data[i], spin.relax_data)
-            self.assertEqual(relax_error[i], spin.relax_error)
+            self.assertEqual(spin.relax_data, [r1_500[j], r2_500[j], 
noe_500[j], r1_600[j], r2_600[j], noe_600[j], r1_750[j], r2_750[j], 
noe_750[j]])
+            self.assertEqual(spin.relax_error, [r1_500_err[j], 
r2_500_err[j], noe_500_err[j], r1_600_err[j], r2_600_err[j], noe_600_err[j], 
r1_750_err[j], r2_750_err[j], noe_750_err[j]])
+
+            # Secondary index.
+            j = j + 1
 
 
     def test_select_m4(self):



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer">You are on the <a href="http://gna.org">Gna!</a> mail server.</div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Sun Jun 22 03:20:11 2008</div>  
</body>
</html>
