<!-- MHonArc v2.6.10 -->
<!--X-Subject: Re: Redesign of the relax data model: 2. A new run concept -->
<!--X-From-R13: "Sqjneq q'Ohiretar" <rqjneq.qnhiretarNtznvy.pbz> -->
<!--X-Date: Fri, 19 Jan 2007 08:16:31 +0100 -->
<!--X-Message-Id: 7f080ed10701182315h32a3fc9ap62f6baf5258ee121@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: f001463a0701071314i61276e67hde685fe3afb8fe42@mail.gmail.com -->
<!--X-Reference: 7f080ed10701142244ne7d107bl84582ce604d1888e@mail.gmail.com -->
<!--X-Reference: 1168873580.7569.449.camel@mrspell -->
<!--X-Reference: 7f080ed10701160653k48038558ve891cfa7e9061eef@mail.gmail.com -->
<!--X-Reference: 1168963743.7569.565.camel@mrspell -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: Redesign of the relax data model: 2. A new run concept -- January 19, 2007 - 08:16</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: Redesign of the relax data model: 2. A new run concept</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00039" class="tabs">Index by Date</a> | <a href="threads.html#00039" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00038.html">Date Prev</a>] [<a href="msg00040.html">Date Next</a>] [<a href="msg00038.html">Thread Prev</a>] [<a href="msg00014.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: &quot;Chris MacRaild&quot; &lt;c.a.macraild@xxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Fri, 19 Jan 2007 18:15:36 +1100</li>
<li class="menuitem">
<em>Cc</em>: relax-devel@xxxxxxx</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00039.html">7f080ed10701182315h32a3fc9ap62f6baf5258ee121@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;<a href="msg00013.html">f001463a0701071314i61276e67hde685fe3afb8fe42@mail.gmail.com</a>&gt;	&lt;<a href="msg00029.html">7f080ed10701142244ne7d107bl84582ce604d1888e@mail.gmail.com</a>&gt;	&lt;<a href="msg00035.html">1168873580.7569.449.camel@mrspell</a>&gt;	&lt;<a href="msg00037.html">7f080ed10701160653k48038558ve891cfa7e9061eef@mail.gmail.com</a>&gt;	&lt;<a href="msg00038.html">1168963743.7569.565.camel@mrspell</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on January 19, 2007 - 08:16:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<blockquote class="blockquote"><pre style="margin: 0em;">&gt; &gt; all runs are stored in a dictionary, keyed by run name, but only the
&gt; &gt; run-selection machinery should access this dictionary. The current run
&gt; &gt; should be the object self.relax.data.run (or something simiar), and all
&gt; &gt; relax functions should operate on that object.
&gt;
&gt; I agree, however I would extend this using the global variable ideas
&gt; Gary proposed 
(<a  href="http://www.nmr-relax.com/mail.gna.org/public/relax-devel/2007-01/msg00013.html">https://mail.gna.org/public/relax-devel/2007-01/msg00013.html</a>,
&gt; Message-id: &lt;f001463a0701071314i61276e67hde685fe3afb8fe42@xxxxxxxxxxxxxx&gt;).
&gt;  So instead of using 'self.relax.data.run' the data container of the
&gt; current run, which is located in the dictionary type object
&gt; 'self.relax.data[]', could be aliased as say 'data_pipe' or
&gt; 'current_pipe' and placed into '__builtin__'.  Then any part of relax
&gt; can access the data of the current data pipe by referring directly to
&gt; 'current_pipe'.  Maybe a better variable name would be 'cdp' (current
&gt; data pipe)?  Or maybe simply 'data'?</pre><br>
<pre style="margin: 0em;">&gt; In addition, I don't believe the name 'run' encapsulates the concept
&gt; at all.  This name is a relic which is not at all related to its
&gt; current use (<a  href="http://www.nmr-relax.com/mail.gna.org/public/relax-devel/2006-10/msg00056.html">https://mail.gna.org/public/relax-devel/2006-10/msg00056.html</a>,
&gt; Message-id: 
&lt;1160555137.9523.70.camel@xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&gt;).
&gt;  The current use of the name 'run' encapsulates the segregation of the
&gt; data.  This is why I prefer the words 'data pipe' or 'pipe' over
&gt; 'run'.
&gt;</pre><br>
<pre style="margin: 0em;"><br>I wasn't trying to express an opinion over where or how the current run
object is stored or aliased or even over what it is called. I simply
wanted to say that within the relax code, we should address the run as
an object, not as a string that serves as key to the dictionary of runs.
(I had to adopt a position on names, locations, etc only in a vain
attempt to avoid my arguments becoming intractably abstract)
</pre></blockquote><pre style="margin: 0em;"><br>If we alias the current run (data pipe) as 'cdp' into '__builtin__',
then 'cdp' throughout relax would access the data pipe data structure
object.  The string is used by the user when necessary in the UI
whereas the developer uses the aliased object behind the scenes.</pre><br>
<br>
<blockquote class="blockquote"><pre style="margin: 0em;">ie. current_pipe should be the current pipe, not the name of the current
pipe, whether current_pipe is an attribute of __builtin__ or of
self.relax.data or of any other class we care to nominate.
</pre></blockquote><pre style="margin: 0em;"><br>That's what I meant.</pre><br>
<br>
<blockquote class="blockquote"><pre style="margin: 0em;">On the other hand, I think we agree that the user command pipe.current()
should return the name of the current pipe, and similarly all user
commands should address runs with run names.
</pre></blockquote><pre style="margin: 0em;"><br>Agreed :)</pre><br>
<br>
<blockquote class="blockquote"><pre style="margin: 0em;">If I were to express an opinion on the question of the appropriate name
for the 'run' idea, I would have to say that pipe is better than run,
but still not ideal. Essentially because the idea of a run/pipe in relax
is actually quite different to the pipe idea exemplified by nmrPipe, eg.
The better metaphor might be of the production line, but
current_production_line will quickly become unwieldy!!
</pre></blockquote><pre style="margin: 0em;"><br>I like the production line analogy.  Maybe there are some avenues
there for finding another name which is a little shorter?  If we can't
find an alternative simple yet descriptive noun, we could refer to the
pipe in the docstrings, documentation, etc. as 'data pipes'.  Then
this is easily differentiable from the well known Unix pipes of
nmrPipe.</pre><br>
<br>
<blockquote class="blockquote"><pre style="margin: 0em;">&gt; pipe.switch(pipe_name):
&gt;     __builtin__.current_pipe = self.relax.data[pipe_name]
&gt;
&gt;
&gt; &gt; run.current():
&gt; &gt;     return self.relax.data.run.name
&gt;
&gt; pipe.current():
&gt;     return current_pipe.name
&gt;
&gt; Having the name stored in the dictionary as a key and in the data pipe
&gt; container as the 'name' variable is a little redundant.  Maybe the
&gt; current pipe name should be stored as say 'self.relax.current_pipe'?</pre><br>
<pre style="margin: 0em;">I like the clarity of having an attribute for name. In fact in other
contexts I have coded a sub-class of dictionary which automates this
process so there can never be a conflict between the key and the 'name'.
Something like:</pre><br>
<pre style="margin: 0em;">class NamedDict(dict):
    def __setitem__(self, key, val):
        dict.__setitem__(self, key, val)
        self[key].name = key
</pre></blockquote><pre style="margin: 0em;"><br>That's a much better way of doing it.  If we ever implement a user
function such as 'pipe.rename()', then we need to remember to modify
other functions.</pre><br>
<pre style="margin: 0em;">Cheers,</pre><br>
<pre style="margin: 0em;">Edward</pre><br>
<br>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00013" href="msg00013.html">re: Redesign of the relax data model: 2. A new run concept</a></strong>
<ul><li><em>From:</em> gary thompson</li></ul></li>
<li><strong><a name="00029" href="msg00029.html">Re: Redesign of the relax data model: 2. A new run concept</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00035" href="msg00035.html">Re: Redesign of the relax data model: 2. A new run concept</a></strong>
<ul><li><em>From:</em> Chris MacRaild</li></ul></li>
<li><strong><a name="00037" href="msg00037.html">Re: Redesign of the relax data model: 2. A new run concept</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00038" href="msg00038.html">Re: Redesign of the relax data model: 2. A new run concept</a></strong>
<ul><li><em>From:</em> Chris MacRaild</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Fri Jan 19 08:40:13 2007</div>  
</body>
</html>
