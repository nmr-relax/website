<!-- MHonArc v2.6.10 -->
<!--X-Subject: Re: r2540 &#45; in /branches/warning: errors.py generic_fns/pdb.py relax -->
<!--X-From-R13: Quevf [npDnvyq <p.n.znpenvyqNyrrqf.np.hx> -->
<!--X-Date: Thu, 31 Aug 2006 16:01:45 +0200 -->
<!--X-Message-Id: 1157032829.28764.948.camel@fbsdpcu021 -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: E1GDknf&#45;00066r&#45;01@subversion.gna.org -->
<!--X-Reference: 7f080ed10608292250u3bc0a0b0ud7a319e05ee70f28@mail.gmail.com -->
<!--X-Reference: 1157023684.28764.936.camel@fbsdpcu021 -->
<!--X-Reference: 7f080ed10608310629o7a915bf0l4986d11f92ed71cc@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: r2540 - in /branches/warning: errors.py generic_fns/pdb.py relax -- August 31, 2006 - 16:01</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: r2540 - in /branches/warning: errors.py generic_fns/pdb.py relax</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00091" class="tabs">Index by Date</a> | <a href="threads.html#00091" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00090.html">Date Prev</a>] [<a href="msg00092.html">Date Next</a>] [<a href="msg00090.html">Thread Prev</a>] [<a href="msg00092.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt;, relax-devel@xxxxxxx</li>
<li class="menuitem">
<em>Date</em>: Thu, 31 Aug 2006 15:00:29 +0100</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00091.html">1157032829.28764.948.camel@fbsdpcu021</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;E1GDknf-00066r-01@subversion.gna.org&gt;	&lt;<a href="msg00082.html">7f080ed10608292250u3bc0a0b0ud7a319e05ee70f28@mail.gmail.com</a>&gt;	&lt;<a href="msg00088.html">1157023684.28764.936.camel@fbsdpcu021</a>&gt;	&lt;<a href="msg00089.html">7f080ed10608310629o7a915bf0l4986d11f92ed71cc@mail.gmail.com</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Chris MacRaild</strong> on August 31, 2006 - 16:01:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">On Thu, 2006-08-31 at 23:29 +1000, Edward d'Auvergne wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">On 8/31/06, Chris MacRaild wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">On Wed, 2006-08-30 at 15:50 +1000, Edward d'Auvergne wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Thanks, these changes look very promising.  A few things need to be
discussed and tested before merging this code back into the main 1.2
line.  I have a few points below interspersed between your code.
Firstly I have committed a change which affects the order of
initialisation so that the RelaxErrors and RelaxWarnings are
initialised after the pedantic flag but before the command line
parsing (see 
<a  href="http://www.nmr-relax.com/mail.gna.org/public/relax-commits/2006-08/msg00014.html">https://mail.gna.org/public/relax-commits/2006-08/msg00014.html</a>,
Message-id: &lt;E1GIIBN-00026c-Ga@xxxxxxxxxxxxxxxxxx&gt;).  This removes the
missing AllRelaxErrors error.

</pre></blockquote><pre style="margin: 0em;">

Testing this again in preparation for the merge shows that this change
has broken the pedantic functionality. The pedantic flag must be
correctly set before RelaxWarnings is initialised. Probably the best fix
will be to initialise RelaxErrors first, before parsing comand line
arguments, then finally initialise the warnings.
</pre></blockquote><pre style="margin: 0em;">

Maybe the RelaxParser.error() function (in the file 'relax') needs to
be reconsidered to remove the dependence on the RelaxErrors.  Then the
order won't matter.  I think the only reason for the entire
RelaxParser code is to print 'RelaxError: ' in front of all the parser
errors.  This could be done without the try statement, just add the
text to the front of the message, write it to stderr, then sys.exit().

</pre></blockquote><pre style="margin: 0em;">

It makes sense to me for parser errors to be RelaxErrors - this way they
can be appropriately caught by higher-level code if necessary. I assumed
this was the purpose of the RelaxParser class, but looking closer, I see
it doesn't do that. I propose replacing the try clause in
RelaxParser.error with a simple 'raise RelaxError, message' (the
sys.exit() then becomes redundant). A specific exception class might
also be a good idea (RelaxOptionsError, eg). The order of operations I
proposed above is required to initialise both the errors and the
warnings appropriately.

Chris


</pre><blockquote class="blockquote"><pre style="margin: 0em;">Edward

</pre></blockquote><pre style="margin: 0em;">



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00092" href="msg00092.html">Re: r2540 - in /branches/warning: errors.py generic_fns/pdb.py relax</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00082" href="msg00082.html">Re: r2540 - in /branches/warning: errors.py generic_fns/pdb.py relax</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00088" href="msg00088.html">Re: r2540 - in /branches/warning: errors.py generic_fns/pdb.py relax</a></strong>
<ul><li><em>From:</em> Chris MacRaild</li></ul></li>
<li><strong><a name="00089" href="msg00089.html">Re: r2540 - in /branches/warning: errors.py generic_fns/pdb.py relax</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Thu Aug 31 16:21:29 2006</div>  
</body>
</html>
