<!-- MHonArc v2.6.16 -->
<!--X-Subject: RE: Peak list reading -->
<!--X-From-R13: [Y Qub <zva&#45;xlh.pubNyvir.pbz> -->
<!--X-Date: Tue, 24 Dec 2013 09:13:37 +0100 -->
<!--X-Message-Id: BLU177&#45;W19871783E4919366CC2D46C9C00@phx.gbl -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: BLU177&#45;DS8226D46B9BA61A6D3651EC9C40@phx.gbl -->
<!--X-Reference: CA+CBx2OTnWWPB5YsfGh50tv4vqf8Da3PPDLKrmMuR4R3OdVT+A@mail.gmail.com -->
<!--X-Reference: CAED9pY8pHtTTf_YAs6Uf&#45;6TcwLXctXLHfEt6p7UePEBbb7B=UQ@mail.gmail.com -->
<!--X-Reference: BLU403&#45;EAS1401DA3922F098C78F3020DC9C70@phx.gbl -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>RE: Peak list reading -- December 24, 2013 - 09:13</title>
<link rel="stylesheet" type="text/css" href="/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="https://gna.org/images/gna.theme/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />RE: Peak list reading</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00007" class="tabs">Index by Date</a> | <a href="threads.html#00007" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00006.html">Date Prev</a>] [Date Next] [<a href="msg00006.html">Thread Prev</a>] [Thread Next]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Tue, 24 Dec 2013 02:13:07 -0600</li>
<li class="menuitem">
<em>Cc</em>: &quot;relax-users@xxxxxxx&quot; &lt;relax-users@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Importance</em>: Normal</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00007.html">BLU177-W19871783E4919366CC2D46C9C00@phx.gbl</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;BLU177-DS8226D46B9BA61A6D3651EC9C40@xxxxxxx&gt;	&lt;CA+CBx2OTnWWPB5YsfGh50tv4vqf8Da3PPDLKrmMuR4R3OdVT+A@xxxxxxxxxxxxxx&gt;	&lt;CAED9pY8pHtTTf_YAs6Uf-6TcwLXctXLHfEt6p7UePEBbb7B=UQ@xxxxxxxxxxxxxx&gt;,	&lt;BLU403-EAS1401DA3922F098C78F3020DC9C70@xxxxxxx&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>MK Cho</strong> on December 24, 2013 - 09:13:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<table width="100%"><tr><td style="">

<div dir='ltr'><div><span style="font-size: 12pt;">The header line and atom name solved the problem.&nbsp;</span></div><div><span style="font-size: 12pt;"><br></span></div><div><span style="font-size: 12pt;">Thank you.</span></div><div><span style="font-size: 12pt;"><br></span></div><div><span style="font-size: 12pt;">Min-Kyu</span></div><div><br><div>&gt; Subject: Re: Peak list reading<br>&gt; From: min-kyu.cho@xxxxxxxx<br>&gt; Date: Sat, 21 Dec 2013 09:33:07 -0500<br>&gt; To: edward@xxxxxxxxxxxxx<br>&gt; CC: tlinnet@xxxxxxxxxxxxx; relax-users@xxxxxxx<br>&gt; <br>&gt; Hi Ed and Troels,<br>&gt; <br>&gt; Thank you for the comment. I will try today when I get back to my laptop. <br>&gt; <br>&gt; Wish all you have merry Christmas and Happy new year!<br>&gt; <br>&gt; Min-Kyu<br>&gt; <br>&gt; Dec 21, 2013 7:14 AM "Edward d'Auvergne" &lt;edward@xxxxxxxxxxxxx&gt; 작성:<br>&gt; <br>&gt; &gt; Hi Min-Kyu and Troels,<br>&gt; &gt; <br>&gt; &gt; From the messages, I can see 4 potential issues:<br>&gt; &gt; <br>&gt; &gt; 1)  The assignment:<br>&gt; &gt; <br>&gt; &gt; 568?-?  123.445 8.765 3.45E06<br>&gt; &gt; <br>&gt; &gt; is ambiguous, as it could be any spin pair.  It is best to assign the<br>&gt; &gt; atoms properly, otherwise relax cannot tell if it is a N-H pair, the<br>&gt; &gt; Trp NE1-HE1 pair, or something more exotic.  Note that you can analyse<br>&gt; &gt; your Trp NE1 data at the same time as the backbone N data.  Troels, on<br>&gt; &gt; line 108 of the ./lib/spectrum/sparky.py file (as well as the other<br>&gt; &gt; peak list files in that package), maybe it is worth searching for the<br>&gt; &gt; "?-?" string in the assignment rather than matching "?-?" to skip the<br>&gt; &gt; line of data?  Actually it might be best if we just skip every single<br>&gt; &gt; assignment containing "?", and just give a warning that the line is<br>&gt; &gt; being skipped as the assignment has a question mark in it.<br>&gt; &gt; <br>&gt; &gt; <br>&gt; &gt; 2)  The Sparky assignment format is:<br>&gt; &gt; <br>&gt; &gt; [Group][atom1]-[Group][atom2]-[Group][atom3]<br>&gt; &gt; <br>&gt; &gt; The group is optional for the 2nd, 3rd, etc. dimensions.  The format<br>&gt; &gt; of the "Group" is not defined in Sparky, but in its manual it uses the<br>&gt; &gt; convention of letters for the residue name followed by the residue<br>&gt; &gt; number.  However despite the warnings from relax about the missing<br>&gt; &gt; residue name, I would assume that the data would be nevertheless read.<br>&gt; &gt; The spectrum.read_intensities user function will print out a list of<br>&gt; &gt; all the intensities read into the program at the end, so you will be<br>&gt; &gt; able to tell what has been read or skipped.<br>&gt; &gt; <br>&gt; &gt; <br>&gt; &gt; 3)  For you Troels - could you have a look at line 172 of the<br>&gt; &gt; ./lib/spectrum/sparky.py file?  It has the confusing text "Improperly<br>&gt; &gt; formatted NMRPipe SeriesTab file" which is probably a copy and paste<br>&gt; &gt; error from the ./lib/spectrum/nmrpipe.py file.<br>&gt; &gt; <br>&gt; &gt; <br>&gt; &gt; 4)  The "IndexError: list index out of range" might be due to the<br>&gt; &gt; badly formatted header line, as Troels mentioned.  Min-Kyu, if you fix<br>&gt; &gt; that, does the error go away?  Alternatively, it could be that one<br>&gt; &gt; line in the file is differently formatted, for some unknown reason.<br>&gt; &gt; This can be tested by deleting lines out of the file one by one until<br>&gt; &gt; the error goes away (except for the header which is needed to<br>&gt; &gt; determine the "Data Height" column).  If you do find that there is a<br>&gt; &gt; problem with the file, could you submit a bug report at<br>&gt; &gt; https://gna.org/bugs/?func=additem&amp;group=relax and attach the<br>&gt; &gt; truncated peak list which still causes the error?  With this, I can<br>&gt; &gt; construct a system test for relax and also make sure that an<br>&gt; &gt; informative RelaxError or RelaxWarning is given so that the user knows<br>&gt; &gt; exactly what the problem is and how it should be fixed.<br>&gt; &gt; <br>&gt; &gt; <br>&gt; &gt; As for the FASTA format, this is not supported by relax yet.  This is<br>&gt; &gt; not a great format as you don't know the residue numbering and it will<br>&gt; &gt; very likely not start at one.  But as Troels mentioned, you can load<br>&gt; &gt; the sequence from your peak lists.  It might then be worth having the<br>&gt; &gt; amino acid names in the group part of the Sparky assignment if you<br>&gt; &gt; would like residue names to be present.<br>&gt; &gt; <br>&gt; &gt; Regards,<br>&gt; &gt; <br>&gt; &gt; Edward<br>&gt; &gt; <br>&gt; &gt; <br>&gt; &gt; P. S.  I may not be able to do much until after the new year so, if<br>&gt; &gt; you don't hear from me until then, I wish you a merry Christmas and<br>&gt; &gt; happy new year!<br>&gt; &gt; <br>&gt; &gt; <br>&gt; &gt; <br>&gt; &gt; <br>&gt; &gt;&gt; On 21 December 2013 02:41, Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxxxxxx&gt; wrote:<br>&gt; &gt;&gt; Hi Min-Kyu.<br>&gt; &gt;&gt; <br>&gt; &gt;&gt; I believe you probably need to define the right header<br>&gt; &gt;&gt; for the file.<br>&gt; &gt;&gt; ex:<br>&gt; &gt;&gt;      Assignment         w1         w2   Data Height<br>&gt; &gt;&gt; <br>&gt; &gt;&gt; And see if you can fix the question marks.<br>&gt; &gt;&gt; 568N-HN<br>&gt; &gt;&gt; <br>&gt; &gt;&gt; Have a look in the test-suite for some typical definition of peaks files.<br>&gt; &gt;&gt; test_suite/shared_data/peak_lists<br>&gt; &gt;&gt; <br>&gt; &gt;&gt; If you have a peak list, the new 3.1.1 version allow you to define the spins<br>&gt; &gt;&gt; from<br>&gt; &gt;&gt; a typical peak list.<br>&gt; &gt;&gt; spectrum.read_spins(file='peak_file.list', dir='/path/to/file')<br>&gt; &gt;&gt; <br>&gt; &gt;&gt; Cheers<br>&gt; &gt;&gt; <br>&gt; &gt;&gt; <br>&gt; &gt;&gt; <br>&gt; &gt;&gt; 2013/12/20 Min-Kyu Cho &lt;min-kyu.cho@xxxxxxxx&gt;<br>&gt; &gt;&gt;&gt; <br>&gt; &gt;&gt;&gt; Hi ,<br>&gt; &gt;&gt;&gt; <br>&gt; &gt;&gt;&gt; <br>&gt; &gt;&gt;&gt; <br>&gt; &gt;&gt;&gt; <br>&gt; &gt;&gt;&gt; <br>&gt; &gt;&gt;&gt; I got sparky peak list file written as<br>&gt; &gt;&gt;&gt; <br>&gt; &gt;&gt;&gt; <br>&gt; &gt;&gt;&gt; <br>&gt; &gt;&gt;&gt; 568?-?  123.445 8.765 3.45E06<br>&gt; &gt;&gt;&gt; <br>&gt; &gt;&gt;&gt; . . . . .<br>&gt; &gt;&gt;&gt; <br>&gt; &gt;&gt;&gt; <br>&gt; &gt;&gt;&gt; <br>&gt; &gt;&gt;&gt; <br>&gt; &gt;&gt;&gt; <br>&gt; &gt;&gt;&gt; When I tried to read in this file through GUI, it complains<br>&gt; &gt;&gt;&gt; <br>&gt; &gt;&gt;&gt; ----------<br>&gt; &gt;&gt;&gt; <br>&gt; &gt;&gt;&gt; Sparky formatted data file.<br>&gt; &gt;&gt;&gt; <br>&gt; &gt;&gt;&gt; <br>&gt; &gt;&gt;&gt; <br>&gt; &gt;&gt;&gt; Number of header lines found: 1<br>&gt; &gt;&gt;&gt; <br>&gt; &gt;&gt;&gt; 2D peak list detected.<br>&gt; &gt;&gt;&gt; <br>&gt; &gt;&gt;&gt; RelaxWarning: Improperly formatted Sparky file, cannot process the residue<br>&gt; &gt;&gt;&gt; name for dimension 1 in assignment: 546N-H. Setting residue name to None.<br>&gt; &gt;&gt;&gt; <br>&gt; &gt;&gt;&gt; RelaxWarning: Improperly formatted NMRPipe SeriesTab file, cannot process<br>&gt; &gt;&gt;&gt; the residue name for dimension 2 in assignment: 546N-H. Setting residue name<br>&gt; &gt;&gt;&gt; to None.<br>&gt; &gt;&gt;&gt; <br>&gt; &gt;&gt;&gt; Traceback (most recent call last):<br>&gt; &gt;&gt;&gt; <br>&gt; &gt;&gt;&gt;  File "/home/mkc9/Programs/RELAX/relax-3.1.1/gui/wizards/wiz_objects.py",<br>&gt; &gt;&gt;&gt; line 161, in _apply<br>&gt; &gt;&gt;&gt; <br>&gt; &gt;&gt;&gt;    self.exec_status = self.on_execute()<br>&gt; &gt;&gt;&gt; <br>&gt; &gt;&gt;&gt;  File "/home/mkc9/Programs/RELAX/relax-3.1.1/gui/uf_objects.py", line<br>&gt; &gt;&gt;&gt; 883, in on_execute<br>&gt; &gt;&gt;&gt; <br>&gt; &gt;&gt;&gt;    return_status = self.execute(self.name, **kargs)<br>&gt; &gt;&gt;&gt; <br>&gt; &gt;&gt;&gt;  File "/home/mkc9/Programs/RELAX/relax-3.1.1/gui/uf_objects.py", line<br>&gt; &gt;&gt;&gt; 805, in execute<br>&gt; &gt;&gt;&gt; <br>&gt; &gt;&gt;&gt;    return_status = interpreter.apply(uf, *args, **kwds)<br>&gt; &gt;&gt;&gt; <br>&gt; &gt;&gt;&gt;  File "/home/mkc9/Programs/RELAX/relax-3.1.1/gui/interpreter.py", line<br>&gt; &gt;&gt;&gt; 109, in apply<br>&gt; &gt;&gt;&gt; <br>&gt; &gt;&gt;&gt;    apply(fn, args, kwds)<br>&gt; &gt;&gt;&gt; <br>&gt; &gt;&gt;&gt;  File "/home/mkc9/Programs/RELAX/relax-3.1.1/pipe_control/spectrum.py",<br>&gt; &gt;&gt;&gt; line 530, in read<br>&gt; &gt;&gt;&gt; <br>&gt; &gt;&gt;&gt;    peak_list = read_peak_list(file=file, dir=dir, int_col=int_col,<br>&gt; &gt;&gt;&gt; spin_id_col=spin_id_col, mol_name_col=mol_name_col, res_num_col=res_num_col,<br>&gt; &gt;&gt;&gt; res_name_col=res_name_col, spin_num_col=spin_num_col,<br>&gt; &gt;&gt;&gt; spin_name_col=spin_name_col, sep=sep, spin_id=spin_id)<br>&gt; &gt;&gt;&gt; <br>&gt; &gt;&gt;&gt;  File "/home/mkc9/Programs/RELAX/relax-3.1.1/lib/spectrum/peak_list.py",<br>&gt; &gt;&gt;&gt; line 208, in read_peak_list<br>&gt; &gt;&gt;&gt; <br>&gt; &gt;&gt;&gt;    sparky.read_list(peak_list=peak_list, file_data=file_data)<br>&gt; &gt;&gt;&gt; <br>&gt; &gt;&gt;&gt;  File "/home/mkc9/Programs/RELAX/relax-3.1.1/lib/spectrum/sparky.py",<br>&gt; &gt;&gt;&gt; line 203, in read_list<br>&gt; &gt;&gt;&gt; <br>&gt; &gt;&gt;&gt;    intensity = float(line[int_col])<br>&gt; &gt;&gt;&gt; <br>&gt; &gt;&gt;&gt; IndexError: list index out of range<br>&gt; &gt;&gt;&gt; <br>&gt; &gt;&gt;&gt; -----<br>&gt; &gt;&gt;&gt; <br>&gt; &gt;&gt;&gt; <br>&gt; &gt;&gt;&gt; <br>&gt; &gt;&gt;&gt; Since I already made sequence &amp; spin system with correct residue number, I<br>&gt; &gt;&gt;&gt; expected the residue number in Sparky file should be enough.<br>&gt; &gt;&gt;&gt; <br>&gt; &gt;&gt;&gt; <br>&gt; &gt;&gt;&gt; <br>&gt; &gt;&gt;&gt; So,my questions are:<br>&gt; &gt;&gt;&gt; <br>&gt; &gt;&gt;&gt; <br>&gt; &gt;&gt;&gt; <br>&gt; &gt;&gt;&gt; 1. the sparky file format for relax should be made as written in the<br>&gt; &gt;&gt;&gt; manual?<br>&gt; &gt;&gt;&gt; <br>&gt; &gt;&gt;&gt; <br>&gt; &gt;&gt;&gt; <br>&gt; &gt;&gt;&gt; 2. Can relax recognize FASTA sequence and automatically generate Spin<br>&gt; &gt;&gt;&gt; system?<br>&gt; &gt;&gt;&gt; <br>&gt; &gt;&gt;&gt; <br>&gt; &gt;&gt;&gt; <br>&gt; &gt;&gt;&gt; Thanks and Happy Holiday!<br>&gt; &gt;&gt;&gt; <br>&gt; &gt;&gt;&gt; <br>&gt; &gt;&gt;&gt; <br>&gt; &gt;&gt;&gt; Min-Kyu<br>&gt; &gt;&gt;&gt; <br>&gt; &gt;&gt;&gt; <br>&gt; &gt;&gt;&gt; <br>&gt; &gt;&gt;&gt; <br>&gt; &gt;&gt;&gt; _______________________________________________<br>&gt; &gt;&gt;&gt; relax (http://www.nmr-relax.com)<br>&gt; &gt;&gt;&gt; <br>&gt; &gt;&gt;&gt; This is the relax-users mailing list<br>&gt; &gt;&gt;&gt; relax-users@xxxxxxx<br>&gt; &gt;&gt;&gt; <br>&gt; &gt;&gt;&gt; To unsubscribe from this list, get a password<br>&gt; &gt;&gt;&gt; reminder, or change your subscription options,<br>&gt; &gt;&gt;&gt; visit the list information page at<br>&gt; &gt;&gt;&gt; https://mail.gna.org/listinfo/relax-users<br>&gt; &gt;&gt; <br>&gt; &gt;&gt; <br>&gt; &gt;&gt; _______________________________________________<br>&gt; &gt;&gt; relax (http://www.nmr-relax.com)<br>&gt; &gt;&gt; <br>&gt; &gt;&gt; This is the relax-users mailing list<br>&gt; &gt;&gt; relax-users@xxxxxxx<br>&gt; &gt;&gt; <br>&gt; &gt;&gt; To unsubscribe from this list, get a password<br>&gt; &gt;&gt; reminder, or change your subscription options,<br>&gt; &gt;&gt; visit the list information page at<br>&gt; &gt;&gt; https://mail.gna.org/listinfo/relax-users<br>&gt; &gt;&gt; <br></div></div> 		 	   		  </div>
</td></tr></table>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00003" href="msg00003.html">Peak list reading</a></strong>
<ul><li><em>From:</em> Min-Kyu Cho</li></ul></li>
<li><strong><a name="00004" href="msg00004.html">Re: Peak list reading</a></strong>
<ul><li><em>From:</em> Troels Emtekær Linnet</li></ul></li>
<li><strong><a name="00005" href="msg00005.html">Re: Peak list reading</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00006" href="msg00006.html">Re: Peak list reading</a></strong>
<ul><li><em>From:</em> MK Cho</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer">You are on the <a href="http://gna.org">Gna!</a> mail server.</div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Tue Dec 24 09:20:06 2013</div>  
</body>
</html>
