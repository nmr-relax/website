<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: [bug #14182] System tests failures depend on the actual machine -->
<!--X-From-R13: Eéonfgvra [beva <fronfgvra.zbeva.1Nhyniny.pn> -->
<!--X-Date: Thu, 03 Sep 2009 18:47:22 +0200 -->
<!--X-Message-Id: 4A9FF30F.30608@ulaval.ca -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 20090824&#45;151727.sv7147.17700@gna.org -->
<!--X-Reference: 20090902&#45;083901.sv2782.32016@gna.org -->
<!--X-Reference: 4A9E5785.3050708@ulaval.ca -->
<!--X-Reference: 7f080ed10909020515t463db596s2832a6ac36722f39@mail.gmail.com -->
<!--X-Reference: 4A9E9FE7.5010403@ulaval.ca -->
<!--X-Reference: 7f080ed10909021054u2e38e071h1aa6c21d27684fbb@mail.gmail.com -->
<!--X-Reference: 4A9EF832.6000904@ulaval.ca -->
<!--X-Reference: 7f080ed10909030237j6940ac26t245e5697d5da9632@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [bug #14182] System tests failures depend on the actual machine -- September 03, 2009 - 18:47</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: [bug #14182] System tests failures depend on the actual machine</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00002" class="tabs">Index by Date</a> | <a href="threads.html#00002" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00001.html">Date Prev</a>] [<a href="msg00003.html">Date Next</a>] [<a href="msg00001.html">Thread Prev</a>] [<a href="msg00003.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Thu, 03 Sep 2009 12:47:11 -0400</li>
<li class="menuitem">
<em>Cc</em>: Edward d Auvergne &lt;NO-REPLY.INVALID-ADDRESS@xxxxxxx&gt;, relax-devel@xxxxxxx</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00002.html">4A9FF30F.30608@ulaval.ca</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;20090824-151727.sv7147.17700@xxxxxxx&gt;		&lt;20090902-083901.sv2782.32016@xxxxxxx&gt;	&lt;4A9E5785.3050708@xxxxxxxxx&gt;		&lt;7f080ed10909020515t463db596s2832a6ac36722f39@xxxxxxxxxxxxxx&gt;		&lt;4A9E9FE7.5010403@xxxxxxxxx&gt;		&lt;7f080ed10909021054u2e38e071h1aa6c21d27684fbb@xxxxxxxxxxxxxx&gt;		&lt;4A9EF832.6000904@xxxxxxxxx&gt;	&lt;7f080ed10909030237j6940ac26t245e5697d5da9632@xxxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>User-agent</em>: Thunderbird 2.0.0.23 (X11/20090827)</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Sébastien Morin</strong> on September 03, 2009 - 18:47:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Hi Ed,

I've just tried what you proposed and observed something quite strange...

Here are the results:


</pre><blockquote class="blockquote"><pre style="margin: 0em;">./relax scripts/optimisation_testing.py &gt; /dev/null
</pre></blockquote><pre style="margin: 0em;">  (stats from my laptop, different trials, see below)
    iter      161   147   151
    f_count   765   620   591
    g_count   168   152   158

</pre><blockquote class="blockquote"><pre style="margin: 0em;">./relax -s
</pre></blockquote><pre style="margin: 0em;">  (stats from my laptop, different trials, see below)
    iter      146   159   160   159  
    f_count   708   721   649   673  
    g_count   152   166   167   166  


Problem 1:
The results should be the same in both situations, right ?

Problem 2:
The results should not vary when the test is done multiple times, right ?


I have tested different things to find out why the tests give rise to
different results as a function of time...

</pre><blockquote class="blockquote"><pre style="margin: 0em;">./relax scripts/optimisation_testing.py &gt; /dev/null
</pre></blockquote><pre style="margin: 0em;">    If you modify the file &quot;test_suite/system_tests/__init__.py&quot;, then
the result will be different. By modifying, I mean just comment a few
lines in the run() function. (I usually do that when I want to speed up
the process of testing a specific issue.) Maybe this behavior is related
to random seed based on the code files...

</pre><blockquote class="blockquote"><pre style="margin: 0em;">./relax -s
</pre></blockquote><pre style="margin: 0em;">    This one varies as a function of time without any change. Just doing
the test several times in a row will have it varying... Maybe this
behavior is related to random seed based on the date and time...


Any idea ?

If you want, Ed, I could create you an account on one of these
strange-behaving computers...


Regards,


Séb




Edward d'Auvergne wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi,

I've now written a script so that you can fix this.  Try running:

./relax scripts/optimisation_testing.py &gt; /dev/null

This will give you all the info you need, formatted ready for copying
and pasting into the correct file.  This is currently only
'test_suite/system_tests/model_free.py'.  Just paste the pre-formatted
python comment into the correct test, and add the different values to
the list of values checked.

Cheers,

Edward


2009/9/3 Sébastien Morin &lt;sebastien.morin.1@xxxxxxxxx&gt;:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi Ed,

I just checked my original mail
(<a  rel="nofollow" href="/mail.gna.org/public/relax-devel/2009-05/msg00003.html">https://mail.gna.org/public/relax-devel/2009-05/msg00003.html</a>).


For the failure &quot;FAIL: Constrained BFGS opt, backtracking line search
{S2=0.970, te=2048, Rex=0.149}&quot;, the counts were initially as follows:
   f_count   386
   g_count   386
and are now:
   f_count   743   694   761
   g_count   168   172   164


For the failure &quot;FAIL: Constrained BFGS opt, More and Thuente line
search {S2=0.970, te=2048, Rex=0.149}&quot;, the counts were initially as
follows:
   f_count   722
   g_count   164
and are now:
   f_count   375   322   385
   g_count   375   322   385


The different values given for the &quot;just-measured&quot; parameters account
for the 3 different computers I have access to that give rise to these
two annoying failures...

I wounder if the names of the tests in the original mail were not mixed,
as numbers just measured in the second test seem closer to those
originally posted in the first test, and vice versa...

Anyway, the problem is that there are variations between the different
machines. Variations are also present for the other parameters (s2, te,
rex, chi2, iter).

Regards,


Séb  :)



Edward d'Auvergne wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi,

Could you check and see if the numbers are exactly the same as in your
original email 
(<a  rel="nofollow" href="/mail.gna.org/public/relax-devel/2009-05/msg00003.html">https://mail.gna.org/public/relax-devel/2009-05/msg00003.html</a>)?
 Specifically look at f_count and g_count.

Cheers,

Edward


2009/9/2 Sébastien Morin &lt;sebastien.morin.1@xxxxxxxxx&gt;:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi Ed,

I updated my svn copies to r9432 and checked if the problem was still
present.

Unfortunately, it is still present...

Regards,


Séb



Edward d'Auvergne wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi,

Ah, yes, there is a reason.  I went through and fixed a series of
these optimisation difference issues - in my local svn copy.  I
collected these all together and committed them as one after I had
shut the bugs.  This was a few minutes ago at r9426.  If you update
and test now, it should work.

Cheers,

Edward



2009/9/2 Sébastien Morin &lt;sebastien.morin.1@xxxxxxxxx&gt;:

</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi Ed,

I just tested the for the presence of this bug (1.3 repository, r9425)
and it seems it is still there...

Is there a reason why it was closed ?
From the data I have, I guess this bug report should be re-opened.

Maybe I could try to give more details to help debugging...


Séb  :)



Edward d Auvergne wrote:

</pre><blockquote class="blockquote"><pre style="margin: 0em;">Update of bug #14182 (project relax):

                  Status:               Confirmed =&gt; Fixed
             Assigned to:                    None =&gt; bugman
             Open/Closed:                    Open =&gt; Closed


    _______________________________________________________

Reply to this item at:

  &lt;<a  rel="nofollow" href="http://gna.org/bugs/?14182">http://gna.org/bugs/?14182</a>&gt;

_______________________________________________
  Message sent via/by Gna!
  <a  rel="nofollow" href="http://gna.org/">http://gna.org/</a>




</pre></blockquote><pre style="margin: 0em;">--
Sébastien Morin
PhD Student
S. Gagné NMR Laboratory
Université Laval &amp; PROTEO
Québec, Canada



</pre></blockquote></blockquote><pre style="margin: 0em;">--
Sébastien Morin
PhD Student
S. Gagné NMR Laboratory
Université Laval &amp; PROTEO
Québec, Canada


</pre></blockquote></blockquote><pre style="margin: 0em;">

--
Sébastien Morin
PhD Student
S. Gagné NMR Laboratory
Université Laval &amp; PROTEO
Québec, Canad
</pre></blockquote></blockquote><pre style="margin: 0em;">


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00003" href="msg00003.html">Re: [bug #14182] System tests failures depend on the actual machine</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00000" href="msg00000.html">Re: [bug #14182] System tests failures depend on the actual machine</a></strong>
<ul><li><em>From:</em> Sébastien Morin</li></ul></li>
<li><strong><a name="00001" href="msg00001.html">Re: [bug #14182] System tests failures depend on the actual machine</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Thu Sep 03 19:01:19 2009</div>  
</body>
</html>
