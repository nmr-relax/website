<!-- MHonArc v2.6.16 -->
<!--X-Subject: r16101 &#45; in /branches/uf_redesign: prompt/ user_functions/ -->
<!--X-From-R13: rqjneqNaze&#45;erynk.pbz -->
<!--X-Date: Tue, 08 May 2012 15:48:28 +0200 -->
<!--X-Message-Id: E1SRkmC&#45;0002bz&#45;UZ@subversion.gna.org -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>r16101 - in /branches/uf_redesign: prompt/ user_functions/ -- May 08, 2012 - 15:48</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />r16101 - in /branches/uf_redesign: prompt/ user_functions/</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00238" class="tabs">Index by Date</a> | <a href="threads.html#00238" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00237.html">Date Prev</a>] [<a href="msg00239.html">Date Next</a>] [<a href="msg00237.html">Thread Prev</a>] [<a href="msg00239.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: relax-commits@xxxxxxx</li>
<li class="menuitem">
<em>Date</em>: Tue, 08 May 2012 13:48:28 -0000</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00238.html">E1SRkmC-0002bz-UZ@subversion.gna.org</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>edward</strong> on May 08, 2012 - 15:48:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Author: bugman
Date: Tue May  8 15:48:28 2012
New Revision: 16101

URL: <a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax?rev=16101&amp;view=rev">http://svn.gna.org/viewcvs/relax?rev=16101&amp;view=rev</a>
Log:
Converted the eliminate user function to the auto-generation design.


Added:
    branches/uf_redesign/user_functions/eliminate.py
      - copied, changed from r16097, branches/uf_redesign/prompt/eliminate.py
Removed:
    branches/uf_redesign/prompt/eliminate.py
Modified:
    branches/uf_redesign/prompt/__init__.py
    branches/uf_redesign/prompt/interpreter.py
    branches/uf_redesign/user_functions/__init__.py

Modified: branches/uf_redesign/prompt/__init__.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/uf_redesign/prompt/__init__.py?rev=16101&amp;r1=16100&amp;r2=16101&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/uf_redesign/prompt/__init__.py?rev=16101&amp;r1=16100&amp;r2=16101&amp;view=diff</a>
==============================================================================
--- branches/uf_redesign/prompt/__init__.py (original)
+++ branches/uf_redesign/prompt/__init__.py Tue May  8 15:48:28 2012
@@ -24,7 +24,6 @@
 __all__ = ['base_class',
            'command',
            'doc_string',
-           'eliminate',
            'fix',
            'frame_order',
            'frq',

Removed: branches/uf_redesign/prompt/eliminate.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/uf_redesign/prompt/eliminate.py?rev=16100&amp;view=auto">http://svn.gna.org/viewcvs/relax/branches/uf_redesign/prompt/eliminate.py?rev=16100&amp;view=auto</a>
==============================================================================
--- branches/uf_redesign/prompt/eliminate.py (original)
+++ branches/uf_redesign/prompt/eliminate.py (removed)
@@ -1,74 +1,0 @@
-###############################################################################
-#                                                                            
 #
-# Copyright (C) 2003-2012 Edward d'Auvergne                                  
 #
-#                                                                            
 #
-# This file is part of the program relax.                                    
 #
-#                                                                            
 #
-# relax is free software; you can redistribute it and/or modify              
 #
-# it under the terms of the GNU General Public License as published by       
 #
-# the Free Software Foundation; either version 2 of the License, or          
 #
-# (at your option) any later version.                                        
 #
-#                                                                            
 #
-# relax is distributed in the hope that it will be useful,                   
 #
-# but WITHOUT ANY WARRANTY; without even the implied warranty of             
 #
-# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the              
 #
-# GNU General Public License for more details.                               
 #
-#                                                                            
 #
-# You should have received a copy of the GNU General Public License          
 #
-# along with relax; if not, write to the Free Software                       
 #
-# Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA  
 #
-#                                                                            
 #
-###############################################################################
-
-# Module docstring.
-&quot;&quot;&quot;Module containing the 'eliminate' user function for removing failed 
models.&quot;&quot;&quot;
-__docformat__ = 'plaintext'
-
-# relax module imports.
-from base_class import _build_doc
-import arg_check
-from generic_fns import eliminate
-from relax_errors import RelaxFunctionError, RelaxListStrError, 
RelaxNoneStrListError, RelaxNoneTupleError
-from specific_fns.model_free import Model_free
-from status import Status; status = Status()
-
-
-class Eliminate:
-    &quot;&quot;&quot;Class containing the function for model elimination.&quot;&quot;&quot;
-
-    def eliminate(self, function=None, args=None):
-        # Function intro text.
-        if status.prompt_intro:
-            text = status.ps3 + &quot;eliminate(&quot;
-            text = text + &quot;function=&quot; + repr(function)
-            text = text + &quot;, args=&quot; + repr(args) + &quot;)&quot;
-            print(text)
-
-        # The argument checks.
-        arg_check.is_func(function, 'function', can_be_none=True)
-        if function:
-            arg_check.is_tuple(args, 'args')
-
-        # Execute the functional code.
-        eliminate.eliminate(function=function, args=args)
-
-    # The function doc info.
-    eliminate._doc_title = &quot;Elimination or rejection of models.&quot;
-    eliminate._doc_title_short = &quot;Model elimination.&quot;
-    eliminate._doc_args = [
-        [&quot;function&quot;, &quot;A user supplied function for model elimination.&quot;],
-        [&quot;args&quot;, &quot;A tuple of arguments for model elimination.&quot;]
-    ]
-    eliminate._doc_desc = &quot;&quot;&quot;
-        This is used for model validation to eliminate or reject models 
prior to model selection.  Model validation is a part of mathematical 
modelling whereby models are either accepted or rejected.
-
-        Empirical rules are used for model rejection and are listed below.  
However these can be overridden by supplying a function in the prompt and 
scripting modes.  The function should accept five arguments, a string 
defining a certain parameter, the value of the parameter, the minimisation 
instance (ie the residue index if the model is residue specific), and the 
function arguments.  If the model is rejected, the function should return 
True, otherwise it should return False.  The function will be executed 
multiple times, once for each parameter of the model.
-
-        The 'args' keyword argument should be a tuple, a list enclosed in 
round brackets, and will be passed to the user supplied function or the 
inbuilt function.  For a description of the arguments accepted by the inbuilt 
functions, see below.
-
-        Once a model is rejected, the select flag corresponding to that 
model will be set to False so that model selection, or any other function, 
will then skip the model.
-        &quot;&quot;&quot;
-    eliminate._doc_additional = []
-    for i in range(len(Model_free.eliminate_doc)):
-        eliminate._doc_additional.append(Model_free.eliminate_doc[i])
-    _build_doc(eliminate)

Modified: branches/uf_redesign/prompt/interpreter.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/uf_redesign/prompt/interpreter.py?rev=16101&amp;r1=16100&amp;r2=16101&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/uf_redesign/prompt/interpreter.py?rev=16101&amp;r1=16100&amp;r2=16101&amp;view=diff</a>
==============================================================================
--- branches/uf_redesign/prompt/interpreter.py (original)
+++ branches/uf_redesign/prompt/interpreter.py Tue May  8 15:48:28 2012
@@ -55,7 +55,6 @@
 from status import Status; status = Status()
 
 # User functions.
-from eliminate import Eliminate
 from fix import Fix
 from gpl import GPL
 from reset import Reset
@@ -191,14 +190,12 @@
         objects['gpl'] = objects['GPL'] = GPL()
 
         # Initialise the user functions (those not in user function classes)
-        eliminate = Eliminate()
         fix = Fix()
         reset = Reset()
         sys_info = Sys_info()
         temp = Temp()
 
         # Place the user functions in the local namespace.
-        objects['eliminate'] = eliminate.eliminate
         objects['fix'] = fix.fix
         objects['reset'] = reset.reset
         objects['sys_info'] = sys_info.sys_info

Modified: branches/uf_redesign/user_functions/__init__.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/uf_redesign/user_functions/__init__.py?rev=16101&amp;r1=16100&amp;r2=16101&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/uf_redesign/user_functions/__init__.py?rev=16101&amp;r1=16100&amp;r2=16101&amp;view=diff</a>
==============================================================================
--- branches/uf_redesign/user_functions/__init__.py (original)
+++ branches/uf_redesign/user_functions/__init__.py Tue May  8 15:48:28 2012
@@ -43,6 +43,7 @@
     'deselect',
     'diffusion_tensor',
     'dx',
+    'eliminate',
     'minimisation',
     'model_selection',
     'molmol',
@@ -64,6 +65,7 @@
 import user_functions.deselect
 import user_functions.diffusion_tensor
 import user_functions.dx
+import user_functions.eliminate
 import user_functions.minimisation
 import user_functions.model_selection
 import user_functions.molmol

Copied: branches/uf_redesign/user_functions/eliminate.py (from r16097, 
branches/uf_redesign/prompt/eliminate.py)
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/uf_redesign/user_functions/eliminate.py?p2=branches/uf_redesign/user_functions/eliminate.py&amp;p1=branches/uf_redesign/prompt/eliminate.py&amp;r1=16097&amp;r2=16101&amp;rev=16101&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/uf_redesign/user_functions/eliminate.py?p2=branches/uf_redesign/user_functions/eliminate.py&amp;p1=branches/uf_redesign/prompt/eliminate.py&amp;r1=16097&amp;r2=16101&amp;rev=16101&amp;view=diff</a>
==============================================================================
--- branches/uf_redesign/prompt/eliminate.py (original)
+++ branches/uf_redesign/user_functions/eliminate.py Tue May  8 15:48:28 2012
@@ -25,50 +25,46 @@
 __docformat__ = 'plaintext'
 
 # relax module imports.
-from base_class import _build_doc
-import arg_check
 from generic_fns import eliminate
-from relax_errors import RelaxFunctionError, RelaxListStrError, 
RelaxNoneStrListError, RelaxNoneTupleError
+from graphics import WIZARD_IMAGE_PATH
 from specific_fns.model_free import Model_free
-from status import Status; status = Status()
+from user_functions.data import Uf_info; uf_info = Uf_info()
 
 
-class Eliminate:
-    &quot;&quot;&quot;Class containing the function for model elimination.&quot;&quot;&quot;
+# The eliminate user function.
+uf = uf_info.add_uf('eliminate')
+uf.title = &quot;Elimination or rejection of models.&quot;
+uf.title_short = &quot;Model elimination.&quot;
+uf.display = True
+uf.add_keyarg(
+    name = &quot;function&quot;,
+    py_type = &quot;func&quot;,
+    arg_type = &quot;func&quot;,
+    desc_short = &quot;function&quot;,
+    desc = &quot;An optional user supplied function for model elimination.&quot;,
+    can_be_none = True
+)
+uf.add_keyarg(
+    name = &quot;args&quot;,
+    py_type = &quot;tuple&quot;,
+    arg_type = &quot;func args&quot;,
+    desc_short = &quot;function arguments&quot;,
+    desc = &quot;A tuple of arguments used by the optional function for model 
elimination.&quot;,
+    can_be_none = True
+)
+uf.desc = &quot;&quot;&quot;
+This is used for model validation to eliminate or reject models prior to 
model selection.  Model validation is a part of mathematical modelling 
whereby models are either accepted or rejected.
 
-    def eliminate(self, function=None, args=None):
-        # Function intro text.
-        if status.prompt_intro:
-            text = status.ps3 + &quot;eliminate(&quot;
-            text = text + &quot;function=&quot; + repr(function)
-            text = text + &quot;, args=&quot; + repr(args) + &quot;)&quot;
-            print(text)
+Empirical rules are used for model rejection and are listed below.  However 
these can be overridden by supplying a function in the prompt and scripting 
modes.  The function should accept five arguments, a string defining a 
certain parameter, the value of the parameter, the minimisation instance (ie 
the residue index if the model is residue specific), and the function 
arguments.  If the model is rejected, the function should return True, 
otherwise it should return False.  The function will be executed multiple 
times, once for each parameter of the model.
 
-        # The argument checks.
-        arg_check.is_func(function, 'function', can_be_none=True)
-        if function:
-            arg_check.is_tuple(args, 'args')
+The 'args' keyword argument should be a tuple, a list enclosed in round 
brackets, and will be passed to the user supplied function or the inbuilt 
function.  For a description of the arguments accepted by the inbuilt 
functions, see below.
 
-        # Execute the functional code.
-        eliminate.eliminate(function=function, args=args)
-
-    # The function doc info.
-    eliminate._doc_title = &quot;Elimination or rejection of models.&quot;
-    eliminate._doc_title_short = &quot;Model elimination.&quot;
-    eliminate._doc_args = [
-        [&quot;function&quot;, &quot;A user supplied function for model elimination.&quot;],
-        [&quot;args&quot;, &quot;A tuple of arguments for model elimination.&quot;]
-    ]
-    eliminate._doc_desc = &quot;&quot;&quot;
-        This is used for model validation to eliminate or reject models 
prior to model selection.  Model validation is a part of mathematical 
modelling whereby models are either accepted or rejected.
-
-        Empirical rules are used for model rejection and are listed below.  
However these can be overridden by supplying a function in the prompt and 
scripting modes.  The function should accept five arguments, a string 
defining a certain parameter, the value of the parameter, the minimisation 
instance (ie the residue index if the model is residue specific), and the 
function arguments.  If the model is rejected, the function should return 
True, otherwise it should return False.  The function will be executed 
multiple times, once for each parameter of the model.
-
-        The 'args' keyword argument should be a tuple, a list enclosed in 
round brackets, and will be passed to the user supplied function or the 
inbuilt function.  For a description of the arguments accepted by the inbuilt 
functions, see below.
-
-        Once a model is rejected, the select flag corresponding to that 
model will be set to False so that model selection, or any other function, 
will then skip the model.
-        &quot;&quot;&quot;
-    eliminate._doc_additional = []
-    for i in range(len(Model_free.eliminate_doc)):
-        eliminate._doc_additional.append(Model_free.eliminate_doc[i])
-    _build_doc(eliminate)
+Once a model is rejected, the select flag corresponding to that model will 
be set to False so that model selection, or any other function, will then 
skip the model.
+&quot;&quot;&quot;
+uf.additional = []
+uf.additional += Model_free.eliminate_doc
+uf.backend = eliminate.eliminate
+uf.menu_text = &quot;&amp;eliminate&quot;
+uf.wizard_height_desc = 650
+uf.wizard_size = (1000, 800)
+uf.wizard_apply_button = False



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Tue May 08 16:00:02 2012</div>  
</body>
</html>
