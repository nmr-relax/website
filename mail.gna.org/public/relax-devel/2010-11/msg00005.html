<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: -->
<!--X-From-R13: "Re. Yynhf&#45;Brgre @rvqvt" <crgre.arvqvtNoehxre&#45;ovbfcva.qr> -->
<!--X-Date: Fri, 19 Nov 2010 10:40:45 +0100 -->
<!--X-Message-Id: 4CE64610.7090706@bruker&#45;biospin.de -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: C499CEAA2FE47E4F8E5C154780A4767301269353A4@exch8.ads.bruker.de -->
<!--X-Reference: AANLkTi=j05Y_&#45;YWGrqhX_+qVmjtaP6tf_2+FKCN2hkwU@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: -- November 19, 2010 - 10:40</title>
<link rel="stylesheet" type="text/css" href="/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="https://gna.org/images/gna.theme/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re:</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00005" class="tabs">Index by Date</a> | <a href="threads.html#00005" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00004.html">Date Prev</a>] [<a href="msg00006.html">Date Next</a>] [<a href="msg00004.html">Thread Prev</a>] [<a href="msg00007.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Fri, 19 Nov 2010 10:40:32 +0100</li>
<li class="menuitem">
<em>Cc</em>: &quot;relax-devel@xxxxxxx&quot; &lt;relax-devel@xxxxxxx&gt;,	Neidig Klaus-Peter &lt;Klaus-Peter.Neidig@xxxxxxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00005.html">4CE64610.7090706@bruker-biospin.de</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;C499CEAA2FE47E4F8E5C154780A4767301269353A4@xxxxxxxxxxxxxxxxxxx&gt;	&lt;AANLkTi=j05Y_-YWGrqhX_+qVmjtaP6tf_2+FKCN2hkwU@xxxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>User-agent</em>: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US;	rv:1.9.2.12) Gecko/20101027 Thunderbird/3.1.6</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Dr. Klaus-Peter Neidig</strong> on November 19, 2010 - 10:40:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<address>Title: <strong>E-Mail Signatur Bruker BioSpin Rheinstetten V2.00</strong></address>
<table width="100%"><tr><td bgcolor="#ffffff" style="background-color: #ffffff; color: #000000; "><font color="#000000">

  
  
    Dear Edward,<br>
    <br>
    after coming back from England, let me provide some comments.<br>
    <br>
    Some of the literature use the words error and uncertainty <span
      style="visibility: visible;" id="main"><span style="visibility:
        visible;" id="search">interchangeably</span></span>.<br>
    The quantity sigma used in least squares fitting would be the square
    of<br>
    error or uncertainty.<br>
    <br>
    The pdc output refers to error, so&nbsp;&nbsp; error_R1 = error_T1/T1<br>
    <br>
    Where do the errors come from ? The source of the errors is the
    spectrum.<br>
    Each data point has an error. Commonly this error is derived from
    signal-to-noise,<br>
    usually obtained from signal free regions. In most cases the
    standard deviation<br>
    is calculated from such regions then multipled with a factor. The
    PDC uses<br>
    multiple such regions, takes the one with the lowest sdev and
    multiples it by 2.0.<br>
    There is no unqiue definition of this factor. When used as a peak
    picking<br>
    threshold we often use 3.5 * sdev. The noise is calculated for each
    plane of the pseudo<br>
    3D separately.<br>
    But this would not account for systematic errors. Therefore it is
    advised to<br>
    also repeat experiments and check the variation of data points from
    spectrum<br>
    to spectrum. Unfortunately it is up to the NMR user to do this or
    not and in most<br>
    cases we are happy to see1-3 mixing times repeated at least once.
    That is not <br>
    enough to calculate proper errors, therefore we just take the spread
    (max difference)<br>
    as an estimate and apply it to all planes. <br>
    <br>
    Next the user has the freedom to calculate the peak integrals. We
    offer: just peak<br>
    intensity, peak shape integral, peak area integral and peak fit.
    They all have their<br>
    disadvantages in many cases the peak intensity is not even the
    worst.<br>
    The error estimation also depend on the chosen method. In case of
    shape<br>
    and area integral the integral error goes down with the number of
    integrated<br>
    data points since at least random errors partially cancel out. In
    case of peak fit<br>
    we take the error as coming out of Levenberg Marquardt, internally
    based on<br>
    covariance analysis. Since the number of data points in pseudo 3D
    spectra<br>
    is small per peak the 2D peak fit usually results in large errors.
    Also, the peak fitting<br>
    assumes line shapes as gaussian, lorentizian or mixtures of both but
    the actual peak <br>
    shape often differs from that.<br>
    <br>
    As it comes to relaxation parameter fitting we supply the peak
    integral errors to<br>
    Levenberg-Marquardt and get fitted parameters and their errors back,
    again based<br>
    on covariance analysis. Alternatively the user may run MC
    simulations, usually 1000.<br>
    The input variation of the integrals comes from a gaussian random
    generator, the<br>
    width of the gaussian distribution for each integral is taken
    identical to the estimated<br>
    error of that integral. Literature says that the error then obtained
    from MC should be identical<br>
    to the error obtained from LM. I checked this by eye, they are at
    least similar.<br>
    All errors, regardless from LM or MC are finally multiplied with a
    factor obtained from<br>
    a Student T distribution at given confidence level and degrees of
    freedom.<br>
    The number we get at the end agree with what we get from Matlab
    which has become<br>
    an internal standard for us at Bruker.<br>
    <br>
    As it comes to model free modelling the errors obtained so far are
    taken into account.<br>
    But there is heavy criticism from some of the experts. They say for
    example that the errors<br>
    tend to be too small, especially the NOE error which is only based
    on the ratio of 2 numbers,<br>
    whereas T1 and T2 errors are based fitting of 10-20 input values.
    Therefore in the PDC we<br>
    allow tht user override the determined errors by default errors e.g.
    2% for NOE and 1% for T1<br>
    and T2. They also say that the modelling output should contain the
    back calculated T1, T2<br>
    and NOE and should get markers if T1 and T2 are well reproduced
    regardless what NOE<br>
    is doing. I don't want to comment on this but I have implemented it
    in the PDC.<br>
    <br>
    During the curve fitting we refer to T1, T2 for no deeper reason.
    The older Bruker software<br>
    tools did it and a module in TopSpin is for example called the T1/T2
    module. Today I'm<br>
    only a developer (in former times I could define projects by myself)
    and other people officially<br>
    tell me what to do. That is the only reason for using T1, T2. As
    soon as it goes beyond the<br>
    relaxation curve fitting everything else internally continues with
    R1, R2, most of the literature<br>
    presents the formulas with R1, R2 and I didn't want to rewrite all
    these and introduce mistakes.<br>
    Technically, it would be no problem to present everything in terms
    of R1, R2 but now several<br>
    people already use the software an nobody complained. Perhaps with a
    future version I<br>
    should just allow the user to switch between the one or other
    representation. I will discuss this with<br>
    some people here.<br>
    <br>
    I think everybody here understands that Bruker is not a research
    institution and does not<br>
    have to ressources and knowledge to do the modelling on a level you
    do. In my talks I<br>
    advertised that our PDC allows a very convenient data analysis
    especially if the Bruker<br>
    release pulse programs (written by Wolfgang Bermel) are used. With
    our old T1/T2 module<br>
    in TopSpin we had a big problem. It was so bad that many people just
    used nmrPipe, Sparky,<br>
    ccpn or anything else even with having the need to a lot of manual
    work. I found it convenient<br>
    to furthermore offer some of the diffusion tensor and modelling
    stuff to be a bit more complete. <br>
    I'm absolute happy if I can say however that there is relax
    available which is much more advanced<br>
    and can read our output.<br>
    What disappoints me a bit at the moment is the behaviour of the
    users (independent of the software<br>
    they use). Typically, they say, it is good to have all the modelling
    but what can we do with it ? The<br>
    overall dynamical features of the molecule are quite obvious already
    from looking at the NOE, <br>
    T1/T2 or reduced spectral densities. Many people just use relaxation
    data to check if there is<br>
    aggregation.<br>
    Your customer contacts should be much better than mine, what is you
    experience ? <br>
    <br>
    Just to indicate the future resources for the PDC: Until ENC 2011 I
    have permission to use<br>
    50% of my time to add more features, e.g. allow user defined
    spectral density functions and<br>
    use multiple fields for modeling. But I already got a more general
    project, it will be called<br>
    Dynamics Center that must cover all kinds of dynamics, that includes
    diffusion, kinetics and<br>
    some solid state stuff like REDOR experiments. Applications will
    include smaller molecules.<br>
    <br>
    Best regards,<br>
    Peter<br>
    <br>
    <br>
    <br>
    On 11/16/2010 7:10 PM, Edward d'Auvergne wrote:
    <blockquote
      cite=""
      type="cite">
      <pre wrap="">Dear Peter,

Thank you for posting this info to the relax mailing lists.  It is
much appreciated.  I hadn't thought too much about this, but this is
as you say: an error propagation through a ratio.  The same occurs
within the steady-state NOE error calculation.  As y=1/B and errA=0,
we could simply take the PDC file data and convert the error as:

sigma_R1 = sigma_T1 / T1^2.

This would be a 100% exact error calculation.  Therefore within relax,
we will only need to read the final relaxation data from the PDC files
and nothing about the peak intensities.  Reading additional
information from the PDC files could be added later, if someone needs
that.  One thing that would be very useful would be to have higher
precision values and errors in the PDC files.  5 or more significant
figures verses the current 2 or 3 would be of great benefit for
downstream analyses.  For a plot this is not necessary but for high
precision and highly non-linear analysis such as model-free (and SRLS
and spectral density mapping), this introduces significant propagating
truncation errors.  It would be good to avoid this issue.

An additional question is about the error calculation within the
Protein Dynamics Centre.  For model-free analysis, the errors are just
as important or maybe even more important than the data itself.  So it
is very important to know that the errors input into relax are of high
quality.  Ideally the R1 and R2 relaxation rate errors input into
relax would be from the gold standard of error propagation - Monte
Carlo simulations.  Is this what the PDC uses, or is the less accurate
jackknife technique used, or the even lowest accuracy covariance
matrix estimate?  And how are replicated spectra used in the PDC?  For
example, if only a few time points are duplicated, if all time points
are duplicated, if all time points are triplicated (I've seen this
done before), or if no time points are duplicated.  How does the PDC
handle each situation and how are the errors calculated?  relax
handles these all differently, and this is fully documented at
<a rel="nofollow" class="moz-txt-link-freetext" href="http://www.nmr-relax.com/api/1.3/prompt.spectrum.Spectrum-class.html#error_analysis">http://www.nmr-relax.com/api/1.3/prompt.spectrum.Spectrum-class.html#error_analysis</a>.
 Also, does the PDC use peak heights or peak volumes to measure signal
intensities?

Sorry for all the questions, but I have one more.  All of the
fundamental NMR theories work in rates (model-free, SRLS, relaxation
dispersion, spectral density mapping, Abragam's relaxation equations
and their derivation, etc.), and most of the NMR dynamics software
accepts rates and their errors and not times.  The BMRB database now
will also accept rates in their new version 3.1 NMR-STAR definition
within the Auto_relaxation saveframe.  Also most people in the
dynamics field publish R1 and R2 plots, while T1 and T2 plots are much
rarer (unless you go back to the 80's).  If all Bruker users start to
publish Tx plots while most of the rest publish Rx plots, comparisons
between different molecular systems will be complicated.  So is there
a specific reason the PDC outputs in relaxation times rather than in
rates?

Cheers,

Edward



On 16 November 2010 06:52, Neidig Klaus-Peter
<a rel="nofollow" class="moz-txt-link-rfc2396E" href="mailto:Klaus-Peter.Neidig@xxxxxxxxxxxxxxxxx">&lt;Klaus-Peter.Neidig@xxxxxxxxxxxxxxxxx&gt;</a> wrote:
</pre>
      <blockquote type="cite">
        <pre wrap="">Dear all, Dear Michael &amp; Edward,

I'm currently on the way to England, thus only a short note:

The error or an inverse is a special case of the error of a ratio. A search for "error propagation" in the internet yields
hundreds of hits. There are also some discussions about correlation bewtween involved quantities.

If y=A/B with given errors of A and B then the absolute error of y is y * sqrt [(errA/errB)^2 + (errB/B)^2]

If A=1 you get error of y is y*errB/B, since the error of a constant is 0.

I compared the results with the errors I got from Marquardt if I fit a* exp(-Rt) instead of a* exp(-t/T) by eye up to
a number of digits.

I hope, I did it right.

Best regards,
Peter
_______________________________________________
relax (<a rel="nofollow" class="moz-txt-link-freetext" href="http://nmr-relax.com">http://nmr-relax.com</a>)

This is the relax-devel mailing list
<a rel="nofollow" class="moz-txt-link-abbreviated" href="mailto:relax-devel@xxxxxxx">relax-devel@xxxxxxx</a>

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a rel="nofollow" class="moz-txt-link-freetext" href="https://mail.gna.org/listinfo/relax-devel">https://mail.gna.org/listinfo/relax-devel</a>

</pre>
      </blockquote>
      <pre wrap="">.

</pre>
    </blockquote>
    <br>
    <div class="moz-signature">-- <br>
      
      <div style="margin-right: 10pt;" align="justify"><span
          style="font-size: 10pt; color: rgb(0, 0, 0); font-family:
          Arial;"><strong>Bruker
          </strong></span><span style="font-size: 10pt; font-family:
          Arial;"><strong><font color="#0071bc">BioSpin</font></strong></span></div>
      <div style="margin-right: 10pt;" align="justify">
        <hr width="600" align="left" color="#0071bc" noshade="noshade"
          size="6">
      </div>
      <div style="margin-right: 10pt;" align="justify">
        <table width="600" border="0" cellpadding="0" cellspacing="0">
          <tbody>
            <tr align="left">
              <td colspan="3" valign="top" height="40">
                <p><span style="font-size: 8pt; color: rgb(0, 0, 0);
                    font-family: Arial;"><strong>Dr. Klaus-Peter Neidig<br>
                    </strong>Head of Analysis Group<br>
                    NMR Software Development</span></p>
              </td>
            </tr>
            <tr align="left">
              <td valign="top" width="150"><span style="font-size: 8pt;
                  color: rgb(0, 0, 0); font-family: Arial;">Bruker
                  BioSpin GmbH <br>
                  Silberstreifen 4<br>
                  76287 Rheinstetten </span><span style="font-size:
                  8pt; color: rgb(0, 0, 0); font-family: Arial;"><br>
                  Germany</span></td>
              <td valign="top" width="180"><span style="font-size: 8pt;
                  color: rgb(0, 0, 0); font-family: Arial;"><span>&nbsp;</span>Phone:
                  +49 721 5161-6447<br>
                  <span>&nbsp;</span>Fax: &nbsp; &nbsp; +49 721 5161-6480<br>
                  <br>
                </span></td>
              <td valign="top" width="270">
                <div align="left"><span style="font-size: 8pt; color:
                    rgb(0, 0, 0); font-family: Arial;"><span>&nbsp;</span> </span><span
                    style="font-size: 8pt; font-family: Arial;"><a rel="nofollow"
                      href="mailto:peter.neidig@xxxxxxxxxxxxxxxxx"
                      style="color: rgb(0, 113, 188);">peter.neidig@xxxxxxxxxxxxxxxxx</a></span><span
                    style="font-size: 8pt; color: rgb(0, 0, 0);
                    font-family: Arial;"><br>
                    <span>&nbsp; </span><a rel="nofollow"
                      href="http://www.bruker-biospin.com/"
                      style="color: rgb(0, 113, 188);">www.bruker-biospin.com</a></span></div>
              </td>
            </tr>
            <tr>
              <td colspan="3" valign="top" align="left">
                <div style="margin-right: 0pt;" align="justify">
                  <hr width="600" align="left" color="#cccccc"
                    noshade="noshade" size="1">
                  <div align="justify"><span style="font-size: 7pt;
                      color: rgb(0, 0, 0); font-family: Arial;">Bruker
                      BioSpin GmbH: Sitz der Gesellschaft/Registered
                      Office: Rheinstetten, HRB 102368 Amtsgericht
                      Mannheim<br>
                      Gesch&auml;ftsf&uuml;hrer/Managing Directors: Joerg Laukien,
                      Dr. Bernd Gewiese, Dr. Dieter Schmalbein, Dr.
                      Gerhard Roth<br>
                      <br>
                      <em>Diese E-Mail und alle Anlagen k&ouml;nnen Betriebs-
                        oder Gesch&auml;ftsgeheimnisse, oder sonstige
                        vertrauliche Informationen enthalten. Sollten
                        Sie diese E-Mail irrt&uuml;mlich erhalten haben, ist
                        Ihnen eine Kenntnisnahme des Inhalts, eine
                        Vervielf&auml;ltigung oder Weitergabe der E-Mail und
                        aller Anlagen ausdr&uuml;cklich untersagt. Bitte
                        benachrichtigen Sie den Absender und
                        l&ouml;schen/vernichten Sie die empfangene E-Mail und
                        alle Anlagen.<br>
                        Vielen Dank. </em><br>
                      <br>
                      <em>This message and any attachments may contain
                        trade secrets or privileged, undisclosed or
                        otherwise confidential information. If you have
                        received this e-mail in error, you are hereby
                        notified that any review, copying or
                        distribution of it and its attachments is
                        strictly prohibited. Please inform the sender
                        immediately and delete/destroy the original
                        message and any copies.<br>
                        Thank you.<br>
                      </em><br>
                    </span></div>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  

</font></td></tr></table>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00007" href="msg00007.html">Re:</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00003" href="msg00003.html">[no subject]</a></strong>
<ul><li><em>From:</em> Neidig Klaus-Peter</li></ul></li>
<li><strong><a name="00004" href="msg00004.html">Re:</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer">You are on the <a href="http://gna.org">Gna!</a> mail server.</div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Mon Nov 22 16:00:16 2010</div>  
</body>
</html>
