<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [task #7858] Make it possible to submit CPMG experiments for BMRB -->
<!--X-From-R13: Syqba Gyevpu &#60;ryhNozeo.jvfp.rqh> -->
<!--X-Date: Mon, 06 Oct 2014 17:03:53 +0200 -->
<!--X-Message-Id: 5432AF38.9020306@bmrb.wisc.edu -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 20141003&#45;134031.sv20529.45970@gna.org -->
<!--X-Reference: 20141003&#45;163141.sv20529.72941@gna.org -->
<!--X-Reference: CAED9pY8JG43KT0+waw4kL_76J_52KW3J15VEQBRePM0Hp5iN6A@mail.gmail.com -->
<!--X-Reference: 543294C3.7020805@bmrb.wisc.edu -->
<!--X-Reference: CAED9pY_vqJoJ66cBxKL0WRwWzB1cOFSCtbG2D6LHTc7MGQQShA@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [task #7858] Make it possible to submit CPMG experiments for BMRB -- October 06, 2014 - 17:03</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: [task #7858] Make it possible to submit CPMG experiments for BMRB</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00030" class="tabs">Index by Date</a> | <a href="threads.html#00030" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00029.html">Date Prev</a>] [<a href="msg00031.html">Date Next</a>] [<a href="msg00029.html">Thread Prev</a>] [<a href="msg00046.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Mon, 06 Oct 2014 10:03:20 -0500</li>
<li class="menuitem">
<em>Cc</em>: Jurgen Doreleijers &lt;jurgenfd@xxxxxxxxx&gt;, Kaare Teilum &lt;kaare.teilum@xxxxxxxxx&gt;, &quot;relax-devel@xxxxxxx&quot; &lt;relax-devel@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00030.html">5432AF38.9020306@bmrb.wisc.edu</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;<a href="msg00001.html">20141003-134031.sv20529.45970@gna.org</a>&gt; &lt;<a href="msg00002.html">20141003-163141.sv20529.72941@gna.org</a>&gt; &lt;<a href="msg00010.html">CAED9pY8JG43KT0+waw4kL_76J_52KW3J15VEQBRePM0Hp5iN6A@mail.gmail.com</a>&gt; &lt;<a href="msg00020.html">543294C3.7020805@bmrb.wisc.edu</a>&gt; &lt;<a href="msg00029.html">CAED9pY_vqJoJ66cBxKL0WRwWzB1cOFSCtbG2D6LHTc7MGQQShA@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>User-agent</em>: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.9; rv:24.0) Gecko/20100101 Thunderbird/24.6.0</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Eldon Ulrich</strong> on October 06, 2014 - 17:03:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">
Hi,

</pre><tt>Thank you for all of this information. I am currently at the PDBe in a 
</tt><tt>workshop and then will be on vacation for a week. But, will take a look 
</tt><tt>at this when I return to Madison. I have been expecting to create a 
</tt><tt>number of saveframes (objects) to capture the full information.
</tt><pre style="margin: 0em;">

Thanks,
Eldon

On 10/6/14, 9:49 AM, Edward d'Auvergne wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">
Hi Eldon,

For your own information, as this may not be considered for a while,
or even ever, Troels has added a lot of data published by Kaare into
the relax sources at
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/trunk/test_suite/shared_data/dispersion/">http://svn.gna.org/viewcvs/relax/trunk/test_suite/shared_data/dispersion/</a>
in the directories including *KTeilum*.  This is generally the input
relaxation data though you will find a few directories with saved
relax results files, for example in KTeilum_FMPoulsen_MAkke_2006/.
Other resources which may be of interest include the different
dispersion models and all their parameters:

<a  rel="nofollow" href="http://www.nmr-relax.com/manual/Dispersion_model_summary.html">http://www.nmr-relax.com/manual/Dispersion_model_summary.html</a>

The analysis protocols used, for example the automated analysis in relax:

<a  rel="nofollow" href="http://www.nmr-relax.com/manual/relaxation_dispersion_auto_analysis.html">http://www.nmr-relax.com/manual/relaxation_dispersion_auto_analysis.html</a>

The dispersion curve insignificance concept which would somehow have
to be included in the deposition:

<a  rel="nofollow" href="http://www.nmr-relax.com/manual/Dispersion_curve_insignificance.html">http://www.nmr-relax.com/manual/Dispersion_curve_insignificance.html</a>

The essential concept of clustering of spin systems:

<a  rel="nofollow" href="http://www.nmr-relax.com/manual/clustered_relaxation_dispersion_analysis.html">http://www.nmr-relax.com/manual/clustered_relaxation_dispersion_analysis.html</a>

The different software for dispersion:

<a  rel="nofollow" href="http://www.nmr-relax.com/manual/Comparison_dispersion_analysis_software.html">http://www.nmr-relax.com/manual/Comparison_dispersion_analysis_software.html</a>

There is also a few additional details required, for example the
correction for the R1rho data so that the correct ground state
chemical shift and offset are used - something which is not yet
implemented in relax.  Some more are listed in the relax to do list at
<a  rel="nofollow" href="http://www.nmr-relax.com/manual/do_dispersion_features_yet_be_implemented.html">http://www.nmr-relax.com/manual/do_dispersion_features_yet_be_implemented.html</a>.

These are all from the relax manual, the PDF version of which is of
much higher quality (<a  rel="nofollow" href="http://download.gna.org/relax/manual/relax.pdf">http://download.gna.org/relax/manual/relax.pdf</a>).
Also, if you have a look at
<a  rel="nofollow" href="http://www.nmr-relax.com/api/3.3/target_functions.relax_disp.Dispersion-class.html#__init__">http://www.nmr-relax.com/api/3.3/target_functions.relax_disp.Dispersion-class.html#__init__</a>,
you will see that the relaxation data used for dispersion is
characterised by the following properties:

     Ei: The index for each experiment type.
     Si: The index for each spin of the spin cluster.
     Mi: The index for each magnetic field strength.
     Oi: The index for each spin-lock offset. In the case of CPMG-type
data, this index is currently always zero.
     Di: The index for each dispersion point (either the spin-lock
field strength or the nu_CPMG frequency).
     Ti: The index for each time point. This is currently unused but
might change in the future.

So you could see that multiple saveframes will be required for each
relaxation data set which is characterised by at least the experiment
type, magnetic field strength, spin-look or hard pulse offset, and
dispersion point (spin-lock field or CPMG frequency).  This part
should be relatively easy to implement with the current NMR-STAR 3.1
format (<a  rel="nofollow" href="http://www.bmrb.wisc.edu/dictionary/">http://www.bmrb.wisc.edu/dictionary/</a>).  But the dispersion
models and parameters will probably require a new saveframe to be
designed and implemented in both the BMRB and in relax/bmrblib.

The ADIT-NMR backend at <a  rel="nofollow" href="http://deposit.bmrb.wisc.edu/bmrb-adit/">http://deposit.bmrb.wisc.edu/bmrb-adit/</a> would
probably also need some changes, as I know that many of the details in
the current model-free NMR-STAR formatted files created by relax are
not accepted by the system any more.  For example the NMR-STAR
formatted test file at
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/trunk/test_suite/shared_data/model_free/OMP/bmrb.star?view=log">http://svn.gna.org/viewcvs/relax/trunk/test_suite/shared_data/model_free/OMP/bmrb.star?view=log</a>
or 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/*checkout*/relax/trunk/test_suite/shared_data/model_free/OMP/bmrb.star">http://svn.gna.org/viewcvs/*checkout*/relax/trunk/test_suite/shared_data/model_free/OMP/bmrb.star</a>.
It seems as if the system does not accept a fully formatted NMR-STAR
file as valid input any more.

Regards,

Edward


On 6 October 2014 15:10, Eldon Ulrich &lt;elu@xxxxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">
Hi,

At BMRB, we would be very interested in working on modeling and archiving
the relaxation dispersion data. We can archive the data without the modeling
initially. We would really like to have the data deposited. If anyone would
be willing to send us examples of the data, we can begin the modeling
process.

Best,
Eldon


On 10/6/14, 7:08 AM, Edward d'Auvergne wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">

Hi Troels,

The support for handling relaxation dispersion data for BMRB
deposition has been a long running issue.  I have included Eldon
Ulrich from the BMRB in the CC list as he would be the person to
discuss this with (note this is the relax-devel public mailing list
which is permanently archived).  Since discussions at the ENC
conference in 2009, Eldon and I have jointly developed both the
support in relax and the required NMR-STAR saveframes and tags for
fully and properly supporting the deposition and reading of model-free
data.  This includes the base relaxation data and its metadata, all
parameters used such as CSA and dipolar coupling information, the
diffusion tensor, and the internal model-free motions (as well as
citations, the molecular assembly, experimental details, etc).  See

<a  rel="nofollow" href="http://www.nmr-relax.com/api/3.3/specific_analyses.model_free.api.Model_free-class.html#bmrb_write">http://www.nmr-relax.com/api/3.3/specific_analyses.model_free.api.Model_free-class.html#bmrb_write</a>
and
<a  rel="nofollow" href="http://www.nmr-relax.com/api/3.3/specific_analyses.model_free.api-pysrc.html#Model_free.bmrb_write">http://www.nmr-relax.com/api/3.3/specific_analyses.model_free.api-pysrc.html#Model_free.bmrb_write</a>.

As for relaxation dispersion data, I think I have discussed this with
Eldon in person (and possibly also with Art Palmer).  But the
relaxation dispersion analysis in relax was at the time not in a
useful state, unlike today where relax is now probably faster and more
comprehensive than all other dispersion software out there.  I do not
know the current state of the BMRB database with respect to relaxation
dispersion data, but Eldon should be able to help.  If the support is
not currently there, then we would need to follow the same development
path as with the model-free analysis.  This would involve joint
discussions with Eldon about what NMR-STAR saveframes and tags need to
be developed to support the data.  These would then have to be added
to the BMRB.  And we would need to extend both relax and the bmrblib
library (<a  rel="nofollow" href="https://gna.org/projects/bmrblib/">https://gna.org/projects/bmrblib/</a>), which used to be part of
relax and which uses Jurgen Doreleijers' Pystarlib library
(<a  rel="nofollow" href="https://code.google.com/p/pystarlib/">https://code.google.com/p/pystarlib/</a>).  The STAR format is relatively
simple (<a  rel="nofollow" href="http://www.bmrb.wisc.edu/formats.html">http://www.bmrb.wisc.edu/formats.html</a>) but Jurgen's library
handles that part for you.  Troels, your coding skill are now so
advanced that you should have no problem adding this support to the
relaxation dispersion analysis in relax and to also extend the brmblib
which is really also a part of relax.  It would only be a couple of
weeks to a month to develop.  The hardest part may be to discuss and
have all the required tags added to the BMRB itself.

However for you Troels, I would recommend that you consider this for a
later project, as I know you have some other important deadlines to
meet first.  I believe there is strong interest on the side of the
BMRB to have this type of data deposited, and with relax we have the
best starting point for this.  Kaare Teilum has a lot of high quality
CPMG and R1rho data which could form the basis of the initial BMRB
depositions.  From Kaare's point of view, I don't know how beneficial
this would be.  Anyway, you should discuss this with your supervisor
Kaare and determine if this short project is worth your time, after
your other deadlines have been met.

Regards,

Edward


On 3 October 2014 18:31, Troels E. Linnet
&lt;NO-REPLY.INVALID-ADDRESS@xxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">

Update of task #7858 (project relax):

                    Status:             In Progress =&gt; Gone walkabout

      _______________________________________________________

Follow-up Comment #6:

This feature will not be implemented, as it requires a large re-write of
data
structures.

To implement the funvtion, it would require a re-write of the relax_data
bmrb_write(star) function, and proper handling of cdp.ri_ids.
It was also not readily possible to find examples of submitted CPMG data
in
the BMRB database.
This makes it hard to develop, and even ensure that BMRB would accept the
format.


      _______________________________________________________

Reply to this item at:

    &lt;<a  rel="nofollow" href="http://gna.org/task/?7858">http://gna.org/task/?7858</a>&gt;

_______________________________________________
    Message sent via/by Gna!
    <a  rel="nofollow" href="http://gna.org/">http://gna.org/</a>


_______________________________________________
relax (<a  rel="nofollow" href="http://www.nmr-relax.com">http://www.nmr-relax.com</a>)

This is the relax-devel mailing list
relax-devel@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="http://www.nmr-relax.com/mail.gna.org/listinfo/relax-devel">https://mail.gna.org/listinfo/relax-devel</a>
</pre></blockquote></blockquote></blockquote></blockquote><pre style="margin: 0em;">


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00001" href="msg00001.html">[task #7858] Make it possible to submit CPMG experiments for BMRB</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
<li><strong><a name="00002" href="msg00002.html">[task #7858] Make it possible to submit CPMG experiments for BMRB</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
<li><strong><a name="00010" href="msg00010.html">Re: [task #7858] Make it possible to submit CPMG experiments for BMRB</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00020" href="msg00020.html">Re: [task #7858] Make it possible to submit CPMG experiments for BMRB</a></strong>
<ul><li><em>From:</em> Eldon Ulrich</li></ul></li>
<li><strong><a name="00029" href="msg00029.html">Re: [task #7858] Make it possible to submit CPMG experiments for BMRB</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Thu Oct 09 09:00:44 2014</div>  
</body>
</html>
