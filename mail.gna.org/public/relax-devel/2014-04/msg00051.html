<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [bug #21959] cpmg_analysis -->
<!--X-From-R13: "Sqjneq q'Ohiretar" &#60;rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Wed, 23 Apr 2014 15:25:12 +0200 -->
<!--X-Message-Id: CAED9pY8twOt7bCd&#45;mTRhoZhTGay5n=teQK30CVPx2X=Y6kJc9A@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 20140423&#45;094315.sv0.89349@gna.org -->
<!--X-Reference: CAED9pY86kNSW_yr5uH_0bJ9YRXAbW+2uEzrPEra&#45;8sdHfPwUoA@mail.gmail.com -->
<!--X-Reference: 20140423144708.30545sihpmcyeong@webmail.tu&#45;berlin.de -->
<!--X-Reference: CAED9pY&#45;DjpPzmwht=RyNAm6Ej04DUCZKSNj4kFbnpGcxr0YYiQ@mail.gmail.com -->
<!--X-Reference: CAED9pY_megj4jo6Eyui&#45;M99RGotQ1Lnk7rsoYRNMz2ayh3VfsQ@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [bug #21959] cpmg_analysis -- April 23, 2014 - 15:25</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: [bug #21959] cpmg_analysis</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00051" class="tabs">Index by Date</a> | <a href="threads.html#00051" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00050.html">Date Prev</a>] [<a href="msg00052.html">Date Next</a>] [<a href="msg00050.html">Thread Prev</a>] [<a href="msg00055.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: &quot;mengjun.xue@xxxxxxxxxxxxxxxxxxxx&quot; &lt;mengjun.xue@xxxxxxxxxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Wed, 23 Apr 2014 15:24:23 +0200</li>
<li class="menuitem">
<em>Cc</em>: anonymous &lt;NO-REPLY.INVALID-ADDRESS@xxxxxxx&gt;, &quot;relax-devel@xxxxxxx&quot; &lt;relax-devel@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113; h=mime-version:sender:in-reply-to:references:date:message-id:subject :from:to:cc:content-type; bh=y2PqOVDKAvzDZHfoDTvnBRQrifeRyKACpw4FbaakfAA=; b=wlqI/FyAudtJ11uzHit616KLLw8FZ3rLZEukhqLe7ZF328Vv65q0ufhxoA3dbd1/K6 oUy3YVs+SO4swP8xjHZ3Z7SqVDVAvipmazQ+PeNDK8obasYkg59rgQ+anLe9bmO8/ljx /TEcRCSx/3kP+VfRw5a/Q1/XyiMszNdIVDBnraLaQ1D3QJ5zyG7BVjeIReXoiM0UokLX pT/BjPZvFGUy9dHjTvL8i2X4ecEt6zaZFJGa0G320qT/bxvkXclrAoF3DcIK5Nbhy3LU VG8HwQGd4bca4bpVr8AUbwBhfyaFrGFVUsOoGAqTGKGGtWmyHyryQwKjdht8rM/8UaiY r+0g==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;CAED9pY8twOt7bCd-mTRhoZhTGay5n=teQK30CVPx2X=Y6kJc9A@mail.gmail.com&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;<a href="msg00037.html">20140423-094315.sv0.89349@gna.org</a>&gt; &lt;<a href="msg00042.html">CAED9pY86kNSW_yr5uH_0bJ9YRXAbW+2uEzrPEra-8sdHfPwUoA@mail.gmail.com</a>&gt; &lt;<a href="msg00048.html">20140423144708.30545sihpmcyeong@webmail.tu-berlin.de</a>&gt; &lt;CAED9pY-DjpPzmwht=RyNAm6Ej04DUCZKSNj4kFbnpGcxr0YYiQ@mail.gmail.com&gt; &lt;<a href="msg00050.html">CAED9pY_megj4jo6Eyui-M99RGotQ1Lnk7rsoYRNMz2ayh3VfsQ@mail.gmail.com</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on April 23, 2014 - 15:25:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Hi Mengjun,

Could you also run the script in debugging mode - with the &quot;--debug&quot;
command line option and create a new log file?  The debugging option
might point to the problem.  I have also seen such strangeness
sometimes just before a fatal hard disk failure occurs - but I hope
that is not your problem.

Cheers,

Edward



On 23 April 2014 15:13, Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi Mengjun,

I also just checked the contents of the officially released relax
3.1.7 MS Windows distribution zip file.  The reference.in_sparky file
is in that directory.  Note that 'fake_sequence.in' is not in that
directory - it is in the parent
&quot;test_suite/shared_data/dispersion/Hansen/&quot; directory.  And that
'500_reference.in' is used as the spectrum ID and is not a file.

Regards,

Edward



On 23 April 2014 15:03, Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi,

Could you list the entire contents of the '500_MHz' folder?  I must
absolutely contain that file!  You can do this by running &quot;dir &gt; log&quot;
and opening the 'log' text file.  I have done this on a virtual
machine and see:

    Directory: 
C:\Users\edward\relax\tags\3.1.7\test_suite\shared_data\dispersion\Hansen\500_MHz


Mode                LastWriteTime     Length Name
----                -------------     ------ ----
-a---        17/03/2014   3:11 PM       2038 1000.in
-a---        17/03/2014   3:11 PM       3143 1000.in_sparky
-a---        17/03/2014   3:11 PM        188 1000.in_trunc
-a---        17/03/2014   3:11 PM       2038 133.33.in
-a---        17/03/2014   3:11 PM       2038 133.33.in.bis
-a---        17/03/2014   3:11 PM       3141 133.33.in.bis_sparky
-a---        17/03/2014   3:11 PM        186 133.33.in.bis_trunc
-a---        17/03/2014   3:11 PM       3141 133.33.in_sparky
-a---        17/03/2014   3:11 PM        186 133.33.in_trunc
-a---        17/03/2014   3:11 PM       2038 200.in
-a---        17/03/2014   3:11 PM       3141 200.in_sparky
-a---        17/03/2014   3:11 PM        186 200.in_trunc
-a---        17/03/2014   3:11 PM       2038 266.67.in
-a---        17/03/2014   3:11 PM       3141 266.67.in_sparky
-a---        17/03/2014   3:11 PM        186 266.67.in_trunc
-a---        17/03/2014   3:11 PM       2038 333.33.in
-a---        17/03/2014   3:11 PM       3141 333.33.in_sparky
-a---        17/03/2014   3:11 PM        186 333.33.in_trunc
-a---        17/03/2014   3:11 PM       2038 400.in
-a---        17/03/2014   3:11 PM       3141 400.in_sparky
-a---        17/03/2014   3:11 PM        186 400.in_trunc
-a---        17/03/2014   3:11 PM       2038 466.67.in
-a---        17/03/2014   3:11 PM       3141 466.67.in_sparky
-a---        17/03/2014   3:11 PM        186 466.67.in_trunc
-a---        17/03/2014   3:11 PM       2038 533.33.in
-a---        17/03/2014   3:11 PM       2038 533.33.in.bis
-a---        17/03/2014   3:11 PM       3141 533.33.in.bis_sparky
-a---        17/03/2014   3:11 PM        186 533.33.in.bis_trunc
-a---        17/03/2014   3:11 PM       3141 533.33.in_sparky
-a---        17/03/2014   3:11 PM        186 533.33.in_trunc
-a---        17/03/2014   3:11 PM       2038 600.in
-a---        17/03/2014   3:11 PM       3141 600.in_sparky
-a---        17/03/2014   3:11 PM        186 600.in_trunc
-a---        17/03/2014   3:11 PM       2038 66.667.in
-a---        17/03/2014   3:11 PM       3141 66.667.in_sparky
-a---        17/03/2014   3:11 PM        186 66.667.in_trunc
-a---        17/03/2014   3:11 PM       2038 666.67.in
-a---        17/03/2014   3:11 PM       3141 666.67.in_sparky
-a---        17/03/2014   3:11 PM        186 666.67.in_trunc
-a---        17/03/2014   3:11 PM       2038 733.33.in
-a---        17/03/2014   3:11 PM       3141 733.33.in_sparky
-a---        17/03/2014   3:11 PM        186 733.33.in_trunc
-a---        17/03/2014   3:11 PM       2038 800.in
-a---        17/03/2014   3:11 PM       3141 800.in_sparky
-a---        17/03/2014   3:11 PM        186 800.in_trunc
-a---        17/03/2014   3:11 PM       2038 866.67.in
-a---        17/03/2014   3:11 PM       3141 866.67.in_sparky
-a---        17/03/2014   3:11 PM        186 866.67.in_trunc
-a---        17/03/2014   3:11 PM       2038 933.33.in
-a---        17/03/2014   3:11 PM       2038 933.33.in.bis
-a---        17/03/2014   3:11 PM       3141 933.33.in.bis_sparky
-a---        17/03/2014   3:11 PM        186 933.33.in.bis_trunc
-a---        17/03/2014   3:11 PM       3141 933.33.in_sparky
-a---        17/03/2014   3:11 PM        186 933.33.in_trunc
-a---        23/04/2014   2:00 PM      13766 log
-a---        17/03/2014   3:11 PM       2038 reference.in
-a---        17/03/2014   3:11 PM       3141 reference.in_sparky
-a---        17/03/2014   3:11 PM        186 reference.in_trunc
-a---        17/03/2014   3:11 PM         20 unresolved

You must see the same files!  If not, could you check your relax
installation file to see if it is complete?  There are a number of
md5sum programs which can be downloaded and installed for Windows, and
then you can check that the relax distribution archive you have used
is correct.  Maybe your download was interrupted and the zip file only
extracted a portion of all of the relax files.

Regards,

Edward



On 23 April 2014 14:47,  &lt;mengjun.xue@xxxxxxxxxxxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi Edward,

Thank you so much for the detailed information about setting data path, as
you suggested I have set data path in cpmg_analysis.py to:

DATA_PATH = 'C:\Program
files\Relax-3.1.7\\test_suite\shared_data\dispersion\Hansen' or

DATA_PATH = 'C:\Program
files\Relax-3.1.7\test_suite\shared_data\dispersion\Hansen'

and copy cpmg_analysis.py to the base relax directory, and then run the
cpmg_analysis.py under cmd, C:\program files\relax-3.1.7\relax
cpmg_analysis.py, still there are errors:

spectrum.read_intensities(file='500_MHz\\reference.in_sparky',
dir='C:\\Program
files\\Relax-3.1.7\\test_suite\\shared_data\\dispersion\\Hansen',
spectrum_id='500_reference.in', dim=1, int_method='height', int_col=None,
spin_id_col=None, mol_name_col=None, res_num_col=None, res_name_col=None,
spin_num_col=None, spin_name_col=None, sep=None, spin_id=None, 
ncproc=None)

RelaxError: The sequence data does not exist.

relax&gt; spectrum.read_intensities(file='500_MHz\\reference.in_sparky',
dir='C:\\Program
files\\Relax-3.1.7\test_suite\\shared_data\\dispersion\\Hansen',
spectrum_id='500_reference.in', dim=1, int_method='height', int_col=None,
spin_id_col=None, mol_name_col=None, res_num_col=None, res_name_col=None,
spin_num_col=None, spin_name_col=None, sep=None, spin_id=None, 
ncproc=None)

RelaxError: The sequence data does not exist.


In the folder of '500_MHz', I can not find reference.in_sparky and
500_reference.in, I can find the sequence file 'fake_sequence.in'.


Thank you.

Best regards,

Mengjun




Quoting Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt;:

</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi Mengjun,

This is a simple case of handling file system paths and directories
correctly and understanding what the current directory is.  When you
run a relax script, the current working directory (CWD) will be set to
the directory that contains the script.  As you copied the script into
the base relax directory, the base directory will be the CWD.

If you have a look at the DATA_PATH variable, that is what is called a
relative path.  There is no root directory at the start ('C:\' in
Windows, &quot;/&quot; in Linux and Macs) so it is not an absolute path.  A
relative path will then be relative to the CWD.  That means that
DATA_PATH is added to CWD.  So if CWD is &quot;C:\Program files\relax&quot; and
DATA_PATH is &quot;..\..\test_suite\shared_data\dispersion\Hansen&quot;, then
the absolute path used to find the file will be &quot;C:\Program
files\relax\..\..\test_suite\shared_data\dispersion\Hansen&quot;.

Now, the '..' directory has a special meaning - it is the parent
directory.  This is the same on Windows, Linux and Mac.  It is present
in the absolute path twice.  So the absolute path says to first walk
into the &quot;Program files&quot; directory (&quot;C:\Program files&quot;), then into the
&quot;relax&quot; directory (&quot;C:\Program files\relax&quot;), then back up into the
parent directory (which is &quot;C:\Program files&quot;), and once more back up
into the parent directory.  So you will now be at &quot;C:\&quot;.  Therefore
the absolute path collapses to
&quot;C:\test_suite\shared_data\dispersion\Hansen&quot;, which is a directory
that most like does not exist on your system.

So to get the script to run, you need to take all of this into account
and change DATA_PATH to be relative to the directory the script is in,
or change DATA_PATH to be the absolute path.  I hope this explains the
issue.

Regards,

Edward




On 23 April 2014 11:43, anonymous &lt;NO-REPLY.INVALID-ADDRESS@xxxxxxx&gt;
wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">

URL:
  &lt;<a  rel="nofollow" href="http://gna.org/bugs/?21959">http://gna.org/bugs/?21959</a>&gt;

                 Summary: cpmg_analysis
                 Project: relax
            Submitted by: None
            Submitted on: Wed 23 Apr 2014 09:43:15 AM UTC
                Category: relax sample scripts
Specific analysis category: None
                Priority: 5 - Normal
                Severity: 3 - Normal
                  Status: None
             Assigned to: None
         Originator Name:
        Originator Email: mengjun.xue@xxxxxxxxxxxxxxxxxxxx
             Open/Closed: Open
                 Release: 3.1.7
         Discussion Lock: Any
        Operating System: 32-bit MS Windows

    _______________________________________________________

Details:

Dear Edward and Troels,

Thank you so much for your response. I have tried the script again as 
you
suggested, but it does not work on my computer, I have attached the log
file.

log_cpmg_analysis_04222014: I set the DATA_PATH =
'..\..\test_suite\shared_data\dispersion\Hansen' in cpmg_analysis.py,  I
copy
the cpmg_analysis.py to the base relax directory, and then run the
cpmg_analysis.py under cmd,C:\program files\relax-3.1.7\relax
cpmg_analysis.py

log_cpmg_analysis_04232014a: I set the DATA_PATH =
'..\\..\\test_suite\\shared_data\\dispersion\\Hansen' in
cpmg_analysis.py,  I
copy the cpmg_analysis.py to the base relax directory, and then run the
cpmg_analysis.py under cmd, C:\program files\relax-3.1.7\relax
cpmg_analysis.py

log_cpmg_analysis_04232014b: I set the DATA_PATH =
'..\..\test_suite\shared_data\dispersion\Hansen' in cpmg_analysis.py, 
and
run
the cpmg_analysis.py under cmd, C:\program files\relax-3.1.7\relax
sample_scripts\relax_disp\cpmg_analysis.py

Thank you.

Best regards,

Mengjun


Hi,

There's no need to separate them now.  I've fixed both in relax.  For
the error you see now, if I run:

$ ./relax sample_scripts/relax_disp/cpmg_analysis.py

from the base relax directory, then it will find the data in the test
suite directories and perform the test analysis.  Also in the Windows
PowerShell:
.\relax sample_scripts\relax_disp\cpmg_analysis.py
Both work for me.  But Troels' response
(<a  rel="nofollow" href="http://thread.gmane.org/gmane.science.nmr.relax.devel/5296/focus=5326">http://thread.gmane.org/gmane.science.nmr.relax.devel/5296/focus=5326</a>)
is exactly correct.  The '\t' is the Python tab character, so the
missing '\' will really cause problems.  Python gets around such
problems by using the os.sep and os.pardir variables, as I have used
in the updated scripts

(<a  rel="nofollow" href="http://svn.gna.org/viewcvs/*checkout*/relax/trunk/sample_scripts/relax_disp/cpmg_analysis.py?content-type=text%2Fplain">http://svn.gna.org/viewcvs/*checkout*/relax/trunk/sample_scripts/relax_disp/cpmg_analysis.py?content-type=text%2Fplain</a>).

Regards,

Edward


Hi Mengjun.

There is missing a \
.\\..\test_suite

should be
.\\..\\test_suite

2014-04-23 10:23 GMT+02:00 &lt;mengjun.xue@xxxxxxxxxxxxxxxxxxxx&gt;:
Hi Edward,

Thank you very much for your suggestions. Should I separate the the
questions
about test suite and cmpg_analysis.py and resubmit them ? For the
cpmy_analysis.py, I have change it to
'..\..\test_suite\shared_data\dispersion\Hansen' as your suggestion, and
try
to run the script again, but there are following relaxerror,

relax&gt; spectrum.read_intensities(file='500_MHz\\reference.in_sparky',
dir='..\\..\test_suite\\shared_data\\dispersion\\Hansen',
spectrum_id='500_reference.in', dim=1, int_method='height', 
int_col=None,
spin_id_col=None, mol_name_col=None, res_num_col=None, 
res_name_col=None,
spin_num_col=None, spin_name_col=None, sep=None, spin_id=None,
ncproc=None)
RelaxError: The sequence data does not exist.

Thank you.

Best regards,

Mengjun




    _______________________________________________________

File Attachments:


-------------------------------------------------------
Date: Wed 23 Apr 2014 09:43:15 AM UTC  Name: log_cpmg_analyis_04232014
Size:
11kB   By: None

&lt;<a  rel="nofollow" href="http://gna.org/bugs/download.php?file_id=20565">http://gna.org/bugs/download.php?file_id=20565</a>&gt;
-------------------------------------------------------
Date: Wed 23 Apr 2014 09:43:15 AM UTC  Name: log_cpmg_analysis_04232014a
Size: 11kB   By: None

&lt;<a  rel="nofollow" href="http://gna.org/bugs/download.php?file_id=20566">http://gna.org/bugs/download.php?file_id=20566</a>&gt;
-------------------------------------------------------
Date: Wed 23 Apr 2014 09:43:15 AM UTC  Name: log_cpmg_analysis_04232014b
Size: 11kB   By: None

&lt;<a  rel="nofollow" href="http://gna.org/bugs/download.php?file_id=20567">http://gna.org/bugs/download.php?file_id=20567</a>&gt;

    _______________________________________________________

Reply to this item at:

  &lt;<a  rel="nofollow" href="http://gna.org/bugs/?21959">http://gna.org/bugs/?21959</a>&gt;

_______________________________________________
  Message sent via/by Gna!
  <a  rel="nofollow" href="http://gna.org/">http://gna.org/</a>


_______________________________________________
relax (<a  rel="nofollow" href="http://www.nmr-relax.com">http://www.nmr-relax.com</a>)

This is the relax-devel mailing list
relax-devel@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="https://mail.gna.org/listinfo/relax-devel">https://mail.gna.org/listinfo/relax-devel</a>
</pre></blockquote><pre style="margin: 0em;">



</pre></blockquote><pre style="margin: 0em;">



</pre></blockquote></blockquote></blockquote><pre style="margin: 0em;">


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00055" href="msg00055.html">Re: [bug #21959] cpmg_analysis</a></strong>
<ul><li><em>From:</em> mengjun . xue</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00037" href="msg00037.html">[bug #21959] cpmg_analysis</a></strong>
<ul><li><em>From:</em> anonymous</li></ul></li>
<li><strong><a name="00042" href="msg00042.html">Re: [bug #21959] cpmg_analysis</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00048" href="msg00048.html">Re: [bug #21959] cpmg_analysis</a></strong>
<ul><li><em>From:</em> mengjun . xue</li></ul></li>
<li><strong><a name="00049" href="msg00049.html">Re: [bug #21959] cpmg_analysis</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00050" href="msg00050.html">Re: [bug #21959] cpmg_analysis</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Wed Apr 23 16:00:27 2014</div>  
</body>
</html>
