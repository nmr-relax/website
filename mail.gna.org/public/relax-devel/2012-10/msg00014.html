<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: relax 2.1.2 build error on darwin -->
<!--X-From-R13: Xnpx Vbjnegu <ubjneguNoebzb.zrq.hp.rqh> -->
<!--X-Date: Fri, 19 Oct 2012 21:29:40 +0200 -->
<!--X-Message-Id: 20121019192909.GA28559@bromo.med.uc.edu -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 20121019140023.GA26861@bromo.med.uc.edu -->
<!--X-Reference: CAED9pY_RnPr&#45;Swv2&#45;eBDhF4yfDqXnK9=C+O1uqD8&#45;MHCnjxPdw@mail.gmail.com -->
<!--X-Reference: 20121019151312.GA27182@bromo.med.uc.edu -->
<!--X-Reference: CAED9pY8RRFKNM6wOWTLwzmxi6ccO0iFoN3O1A+K=7rvQeuPbSA@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: relax 2.1.2 build error on darwin -- October 19, 2012 - 21:29</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: relax 2.1.2 build error on darwin</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00014" class="tabs">Index by Date</a> | <a href="threads.html#00014" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00010.html">Date Prev</a>] [<a href="msg00011.html">Date Next</a>] [<a href="msg00010.html">Thread Prev</a>] [<a href="msg00011.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: &quot;Edward d'Auvergne&quot; &lt;edward@xxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Fri, 19 Oct 2012 15:29:09 -0400</li>
<li class="menuitem">
<em>Cc</em>: relax-devel@xxxxxxx</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00014.html">20121019192909.GA28559@bromo.med.uc.edu</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;20121019140023.GA26861@xxxxxxxxxxxxxxxx&gt;	&lt;CAED9pY_RnPr-Swv2-eBDhF4yfDqXnK9=C+O1uqD8-MHCnjxPdw@xxxxxxxxxxxxxx&gt;	&lt;20121019151312.GA27182@xxxxxxxxxxxxxxxx&gt;	&lt;CAED9pY8RRFKNM6wOWTLwzmxi6ccO0iFoN3O1A+K=7rvQeuPbSA@xxxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>User-agent</em>: Mutt/1.5.18 (2008-05-17)</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Jack Howarth</strong> on October 19, 2012 - 21:29:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">On Fri, Oct 19, 2012 at 05:27:25PM +0200, Edward d'Auvergne wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi,

This is now another problem which I haven't encountered because none
of my test systems (Mac OS X 10.6 and 10.7, MS Windows 2000 and 7, and
GNU/Linux (with Python 2.3, 2.4, 2.5, 2.6, 2.7, 3.1, 3.2, and 3.3))
have the Scientific Python module installed anymore.  I'll have to
play with this on the weekend.  This new issue is the VMD interfacing
via Scientific Python.  I would suggest changing the Scientific Python
VMD section from the dep_check.py file.  I.e. on line 160 from:

&quot;except ImportError:&quot;

to:

&quot;except:&quot;

as a work around.  I might have to report this as a numpy bug - from
all the reports I can now clearly see that that is where the broken
code is - but also have relax work around it.  I hope you don't see
any other problems.

Cheers,

Edward
</pre></blockquote><pre style="margin: 0em;">

Edward,
   Thanks, that additional change was sufficient, with the other two patches, 
to allow relax 2.1.2 to build
under fink. I'll just add those to the relax-py.patch for now and use the 
existing relax 2.1.2 tarball.
         Jack

</pre><blockquote class="blockquote"><pre style="margin: 0em;">




On 19 October 2012 17:13, Jack Howarth &lt;howarth@xxxxxxxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">On Fri, Oct 19, 2012 at 04:54:21PM +0200, Edward d'Auvergne wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi Jack,

I noticed this one too late.  It is a very, very strange error!  The
problem is scipy:  it's a bit of a wild mix of crazy code which tends
to do a lot of weird low level things to Python.  In this case, I
traced the problem back to a change which only affected the import of
the ctypes Python module.  I really don't know how slightly changing a
ctypes import statement would trigger a bug in scipy - that is
bizarre.  I fixed it after branching relax 2.1.2 at:

<a  rel="nofollow" href="http://article.gmane.org/gmane.science.nmr.relax.scm/15667">http://article.gmane.org/gmane.science.nmr.relax.scm/15667</a>
<a  rel="nofollow" href="http://article.gmane.org/gmane.science.nmr.relax.scm/15668">http://article.gmane.org/gmane.science.nmr.relax.scm/15668</a>

There are two options, the change at r17912
(<a  rel="nofollow" href="http://article.gmane.org/gmane.science.nmr.relax.scm/15668">http://article.gmane.org/gmane.science.nmr.relax.scm/15668</a>) should be
sufficient and could be ported to the 2.1.2 code.  Or I could release
2.1.3 with just this change and only release the source tar.bz2 file
for fink.  Which option is easiest for you?

Cheers,

Edward
</pre></blockquote><pre style="margin: 0em;">

Edward,
    Neither <a  rel="nofollow" href="http://article.gmane.org/gmane.science.nmr.relax.scm/15668">http://article.gmane.org/gmane.science.nmr.relax.scm/15668</a> or
it in combination with 
<a  rel="nofollow" href="http://article.gmane.org/gmane.science.nmr.relax.scm/15667">http://article.gmane.org/gmane.science.nmr.relax.scm/15667</a>
appear to be sufficient to eliminate the error here...

/sw/bin/python2.7 /sw/bin/scons
scons: Reading SConscript files ...
AttributeError: 'builtin_function_or_method' object has no attribute 
'dispatch':
  File &quot;/sw/src/fink.build/relax-py27-2.1.2-1/relax-2.1.2/SConstruct&quot;, 
line 37:
    from scons.distrib import package, gpg_sign
  File 
&quot;/sw/src/fink.build/relax-py27-2.1.2-1/relax-2.1.2/scons/distrib.py&quot;, 
line 32:
    from version import version
  File &quot;/sw/src/fink.build/relax-py27-2.1.2-1/relax-2.1.2/version.py&quot;, 
line 26:
    import dep_check
  File &quot;/sw/src/fink.build/relax-py27-2.1.2-1/relax-2.1.2/dep_check.py&quot;, 
line 157:
    from Scientific.Visualization import VMD    # This requires Numeric 
to be installed (at least in Scientific 2.7.8).
  File &quot;/sw/lib/python2.7/site-packages/Scientific/Visualization/VMD.py&quot;, 
line 40:
    from Scientific.Geometry import Transformation, Vector, ex, ey, ez
  File &quot;/sw/lib/python2.7/site-packages/Scientific/Geometry/__init__.py&quot;, 
line 25:
    import Scientific_vector
  File &quot;Scientific_vector.pyx&quot;, line 13:
    None
  File &quot;/sw/lib/python2.7/site-packages/Scientific/N.py&quot;, line 15:
    from numpy.oldnumeric import *
  File &quot;/sw/lib/python2.7/site-packages/numpy/oldnumeric/__init__.py&quot;, 
line 14:
    from compat import *
  File &quot;/sw/lib/python2.7/site-packages/numpy/oldnumeric/compat.py&quot;, line 
106:
    class Unpickler(pickle.Unpickler):
  File &quot;/sw/lib/python2.7/site-packages/numpy/oldnumeric/compat.py&quot;, line 
110:
    dispatch = copy.copy(pickle.Unpickler.dispatch)

       Jack
</pre><blockquote class="blockquote"><pre style="margin: 0em;">



On 19 October 2012 16:00, Jack Howarth &lt;howarth@xxxxxxxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Edward,
   While trying to update the current fink relax-py packaging to the 
new 2.1.2 release.
I ran into a build failure of the form...

/sw/bin/python2.7 /sw/bin/scons
scons: Reading SConscript files ...
AttributeError: 'builtin_function_or_method' object has no attribute 
'dispatch':
  File &quot;/sw/src/fink.build/relax-py27-2.1.2-1/relax-2.1.2/SConstruct&quot;, 
line 37:
    from scons.distrib import package, gpg_sign
  File 
&quot;/sw/src/fink.build/relax-py27-2.1.2-1/relax-2.1.2/scons/distrib.py&quot;, 
line 32:
    from version import version
  File &quot;/sw/src/fink.build/relax-py27-2.1.2-1/relax-2.1.2/version.py&quot;, 
line 26:
    import dep_check
  File 
&quot;/sw/src/fink.build/relax-py27-2.1.2-1/relax-2.1.2/dep_check.py&quot;, line 
143:
    import scipy
  File &quot;/sw/lib/python2.7/site-packages/scipy/__init__.py&quot;, line 85:
    from numpy import oldnumeric
  File &quot;/sw/lib/python2.7/site-packages/numpy/oldnumeric/__init__.py&quot;, 
line 14:
    from compat import *
  File &quot;/sw/lib/python2.7/site-packages/numpy/oldnumeric/compat.py&quot;, 
line 106:
    class Unpickler(pickle.Unpickler):
  File &quot;/sw/lib/python2.7/site-packages/numpy/oldnumeric/compat.py&quot;, 
line 110:
    dispatch = copy.copy(pickle.Unpickler.dispatch)

This failure didn't occur with the relax 2.1.0 or 2.1.1 releases. 
Interestingly this
error looks like the one described in the thread...

<a  rel="nofollow" href="http://scons.tigris.org/ds/viewMessage.do?dsForumId=1272&amp;dsMessageId=2695657">http://scons.tigris.org/ds/viewMessage.do?dsForumId=1272&amp;dsMessageId=2695657</a>

       Jack
</pre></blockquote></blockquote></blockquote></blockquote><pre style="margin: 0em;">


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00011" href="msg00011.html">Re: relax 2.1.2 build error on darwin</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00012" href="msg00012.html">relax 2.1.2 build error on darwin</a></strong>
<ul><li><em>From:</em> Jack Howarth</li></ul></li>
<li><strong><a name="00009" href="msg00009.html">Re: relax 2.1.2 build error on darwin</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00013" href="msg00013.html">Re: relax 2.1.2 build error on darwin</a></strong>
<ul><li><em>From:</em> Jack Howarth</li></ul></li>
<li><strong><a name="00010" href="msg00010.html">Re: relax 2.1.2 build error on darwin</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Sat Oct 20 13:00:10 2012</div>  
</body>
</html>
