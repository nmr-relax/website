<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: r26977 &#45; /trunk/test_suite/system_tests/spectrum.py -->
<!--X-From-R13: Febryf Szgrxæe Zvaarg &#60;gyvaargNaze&#45;erynk.pbz> -->
<!--X-Date: Sat, 06 Dec 2014 18:56:12 +0100 -->
<!--X-Message-Id: CA+CBx2P_eKbTxrKBLTnv_pfkjcFkc=829gDxTS8eG4ozeK3qBw@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: E1XxGD4&#45;0006Ut&#45;U4@subversion.gna.org -->
<!--X-Reference: CAED9pY9aE&#45;TGeF9Vavt=jckX8M3+FzzNB4Sn=2C27B9=4o&#45;&#45;zg@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: r26977 - /trunk/test_suite/system_tests/spectrum.py -- December 06, 2014 - 18:56</title>
<link rel="stylesheet" type="text/css" href="/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="https://gna.org/images/gna.theme/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: r26977 - /trunk/test_suite/system_tests/spectrum.py</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00030" class="tabs">Index by Date</a> | <a href="threads.html#00030" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00029.html">Date Prev</a>] [<a href="msg00031.html">Date Next</a>] [<a href="msg00028.html">Thread Prev</a>] [<a href="msg00029.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: &quot;Edward d'Auvergne&quot; &lt;edward@xxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Sat, 6 Dec 2014 18:55:21 +0100</li>
<li class="menuitem">
<em>Cc</em>: &quot;relax-devel@xxxxxxx&quot; &lt;relax-devel@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113; h=mime-version:sender:in-reply-to:references:from:date:message-id :subject:to:cc:content-type; bh=wTQ6rOWZBv+M58nG9PJJBIQGjqsdU6b8D11lZi7fnXA=; b=Syjf61bgRo0PPHm9qJKaJOwvVHkffUd1WC1k40Ya8CqjGqLxJTdJl3J5ZEstpqv957 rOc7F+YaKpqGcQ6YvtzlltsRtqRVjcl5wqOCxriTYf7zdjt5SUGRLbIWheZfQAkcsnNN uIUdqCqrbzADFhPPgK4nDEgOfujag/ngXxCcHu9pbS+TD3nmkjNW8SXDRJ1jtqRLR7Sv t0wPL7gN1vy8vrI4Iwep/JKpgZpTA+su9cCy1Zd7cVoOIv0FkWNCs1ztkjOvNVe8VOJQ fJJo7f/j2w6XLHVyzpKzabJJ+vgK0AlNZEZCoIE+JtUTrNso2jRc29j7315GS7ScetsY WPvw==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;CA+CBx2P_eKbTxrKBLTnv_pfkjcFkc=829gDxTS8eG4ozeK3qBw@mail.gmail.com&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;E1XxGD4-0006Ut-U4@subversion.gna.org&gt; &lt;CAED9pY9aE-TGeF9Vavt=jckX8M3+FzzNB4Sn=2C27B9=4o--zg@mail.gmail.com&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Troels Emtekær Linnet</strong> on December 06, 2014 - 18:56:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Hi Edward.

The code is not run, since plotting is set to False.

Best
Troels

2014-12-06 17:15 GMT+01:00 Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt;:

</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi Troels,

You should here store the outfile as self.tmpfile or ds.tmpfile so
that the base class TearDown method removes the file at the end.  You
also will have to remove the delete argument:

[edward@localhost ~]$ python2.5
Python 2.5.6 (r256, Dec  4 2014, 15:01:21)
[GCC 4.8.2] on linux3
Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.
</pre><blockquote class="blockquote"><blockquote class="blockquote"><blockquote class="blockquote"><pre style="margin: 0em;">from tempfile import mkdtemp, NamedTemporaryFile
outfile= NamedTemporaryFile(delete=False).name
</pre></blockquote></blockquote></blockquote><pre style="margin: 0em;">Traceback (most recent call last):
  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
TypeError: NamedTemporaryFile() got an unexpected keyword argument 'delete'
</pre><blockquote class="blockquote"><blockquote class="blockquote"><blockquote class="blockquote"><pre style="margin: 0em;">

</pre></blockquote></blockquote></blockquote><pre style="margin: 0em;">

Cheers,

Edward


On 6 December 2014 at 15:19,  &lt;tlinnet@xxxxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Author: tlinnet
Date: Sat Dec  6 15:19:46 2014
New Revision: 26977

URL: <a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax?rev=26977&amp;view=rev">http://svn.gna.org/viewcvs/relax?rev=26977&amp;view=rev</a>
Log:
Added systemtest Spectrum.test_grace_sn_ratio to help implement plotting
</pre></blockquote><pre style="margin: 0em;">the signaÃl to noise ratio per residue.
</pre><blockquote class="blockquote"><pre style="margin: 0em;">

Modified:
    trunk/test_suite/system_tests/spectrum.py

Modified: trunk/test_suite/system_tests/spectrum.py
URL:
</pre></blockquote><pre style="margin: 0em;"><a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/trunk/test_suite/system_tests/spectrum.py?rev=26977&amp;r1=26976&amp;r2=26977&amp;view=diff">http://svn.gna.org/viewcvs/relax/trunk/test_suite/system_tests/spectrum.py?rev=26977&amp;r1=26976&amp;r2=26977&amp;view=diff</a>
</pre><blockquote class="blockquote"><pre style="margin: 0em;">

</pre></blockquote><pre style="margin: 0em;">==============================================================================
</pre><blockquote class="blockquote"><pre style="margin: 0em;">--- trunk/test_suite/system_tests/spectrum.py   (original)
+++ trunk/test_suite/system_tests/spectrum.py   Sat Dec  6 15:19:46 2014
@@ -194,3 +194,32 @@
         # View the plotting.
         if show_grace:
             self.interpreter.grace.view(file=outfile, dir=filedir,
</pre></blockquote><pre style="margin: 0em;">grace_exe='xmgrace')
</pre><blockquote class="blockquote"><pre style="margin: 0em;">+
+
+    def test_grace_sn_ratio(self):
+        &quot;&quot;&quot;Test grace plotting function for plotting the signal to
</pre></blockquote><pre style="margin: 0em;">noise ratio per residue.
</pre><blockquote class="blockquote"><pre style="margin: 0em;">+        &quot;&quot;&quot;
+
+        # Setup data.
+        self.setup_signal_noise_ratio()
+
+        # Calculate the signal to noise ratio calculation.
+        self.interpreter.spectrum.sn_ratio()
+
+        # Deselect spin with negative intensity.
+        self.interpreter.deselect.spin(spin_id=':4@N', boolean='AND',
</pre></blockquote><pre style="margin: 0em;">change_all=False)
</pre><blockquote class="blockquote"><pre style="margin: 0em;">+
+        # Test show grace. If showing, the temporary directory created,
</pre></blockquote><pre style="margin: 0em;">should not be deleted.
</pre><blockquote class="blockquote"><pre style="margin: 0em;">+        show_grace = False
+        if show_grace:
+            outfile= NamedTemporaryFile(delete=False).name
+            filedir = dirname(outfile)
+        else:
+            filedir = self.tmpdir
+        outfile = 'int_sn.agr'
+
+        self.interpreter.grace.write(x_data_type='res_num',
</pre></blockquote><pre style="margin: 0em;">y_data_type='sn_ratio', file=outfile, dir=filedir, force=True)
</pre><blockquote class="blockquote"><pre style="margin: 0em;">+
+        # View the plotting.
+        if show_grace:
+            self.interpreter.grace.view(file=outfile, dir=filedir,
</pre></blockquote><pre style="margin: 0em;">grace_exe='xmgrace')
</pre><blockquote class="blockquote"><pre style="margin: 0em;">


_______________________________________________
relax (<a  rel="nofollow" href="http://www.nmr-relax.com">http://www.nmr-relax.com</a>)

This is the relax-commits mailing list
relax-commits@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="https://mail.gna.org/listinfo/relax-commits">https://mail.gna.org/listinfo/relax-commits</a>
</pre></blockquote><pre style="margin: 0em;">

_______________________________________________
relax (<a  rel="nofollow" href="http://www.nmr-relax.com">http://www.nmr-relax.com</a>)

This is the relax-devel mailing list
relax-devel@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="https://mail.gna.org/listinfo/relax-devel">https://mail.gna.org/listinfo/relax-devel</a>

</pre></blockquote><pre style="margin: 0em;">

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00028" href="msg00028.html">Re: r26977 - /trunk/test_suite/system_tests/spectrum.py</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer">You are on the <a href="http://gna.org">Gna!</a> mail server.</div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Sun Dec 07 16:40:09 2014</div>  
</body>
</html>
