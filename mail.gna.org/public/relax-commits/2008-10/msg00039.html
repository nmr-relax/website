<!-- MHonArc v2.6.16 -->
<!--X-Subject: r7510 &#45; in /1.3/test_suite: shared_data/structures/ system_tests/ -->
<!--X-From-R13: rqjneqNaze&#45;erynk.pbz -->
<!--X-Date: Sun, 05 Oct 2008 13:04:19 +0200 -->
<!--X-Message-Id: E1KmRPP&#45;0006JQ&#45;Kh@subversion.gna.org -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>r7510 - in /1.3/test_suite: shared_data/structures/ system_tests/ -- October 05, 2008 - 13:04</title>
<link rel="stylesheet" type="text/css" href="/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="https://gna.org/images/gna.theme/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />r7510 - in /1.3/test_suite: shared_data/structures/ system_tests/</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00039" class="tabs">Index by Date</a> | <a href="threads.html#00039" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00038.html">Date Prev</a>] [<a href="msg00040.html">Date Next</a>] [<a href="msg00038.html">Thread Prev</a>] [<a href="msg00040.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: relax-commits@xxxxxxx</li>
<li class="menuitem">
<em>Date</em>: Sun, 05 Oct 2008 11:04:19 -0000</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00039.html">E1KmRPP-0006JQ-Kh@subversion.gna.org</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>edward</strong> on October 05, 2008 - 13:04:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Author: bugman
Date: Sun Oct  5 13:04:19 2008
New Revision: 7510

URL: <a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax?rev=7510&amp;view=rev">http://svn.gna.org/viewcvs/relax?rev=7510&amp;view=rev</a>
Log:
Created the new test_load_scientific_results() system test.

This test checks the loading of a PDB file using the Scientific python PDB 
internal object when
reading a results file.  The test_load_results() system test has been renamed 
to
test_load_internal_results().


Added:
    1.3/test_suite/shared_data/structures/generate_str_scientific_results.py
      - copied, changed from r7509, 
1.3/test_suite/shared_data/structures/generate_str_internal_results.py
    1.3/test_suite/shared_data/structures/str_scientific.bz2   (with props)
Modified:
    1.3/test_suite/shared_data/structures/generate_str_internal_results.py
    1.3/test_suite/system_tests/structure.py

Modified: 
1.3/test_suite/shared_data/structures/generate_str_internal_results.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/1.3/test_suite/shared_data/structures/generate_str_internal_results.py?rev=7510&amp;r1=7509&amp;r2=7510&amp;view=diff">http://svn.gna.org/viewcvs/relax/1.3/test_suite/shared_data/structures/generate_str_internal_results.py?rev=7510&amp;r1=7509&amp;r2=7510&amp;view=diff</a>
==============================================================================
--- 1.3/test_suite/shared_data/structures/generate_str_internal_results.py 
(original)
+++ 1.3/test_suite/shared_data/structures/generate_str_internal_results.py 
Sun Oct  5 13:04:19 2008
@@ -1,4 +1,4 @@
 import sys
 pipe.create('str', 'mf')
 structure.read_pdb(file='Ap4Aase_res1-12.pdb', parser='internal')
-results.write('str', dir=None, force=True)
+results.write('str_internal', dir=None, force=True)

Copied: 
1.3/test_suite/shared_data/structures/generate_str_scientific_results.py 
(from r7509, 
1.3/test_suite/shared_data/structures/generate_str_internal_results.py)
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/1.3/test_suite/shared_data/structures/generate_str_scientific_results.py?p2=1.3/test_suite/shared_data/structures/generate_str_scientific_results.py&amp;p1=1.3/test_suite/shared_data/structures/generate_str_internal_results.py&amp;r1=7509&amp;r2=7510&amp;rev=7510&amp;view=diff">http://svn.gna.org/viewcvs/relax/1.3/test_suite/shared_data/structures/generate_str_scientific_results.py?p2=1.3/test_suite/shared_data/structures/generate_str_scientific_results.py&amp;p1=1.3/test_suite/shared_data/structures/generate_str_internal_results.py&amp;r1=7509&amp;r2=7510&amp;rev=7510&amp;view=diff</a>
==============================================================================
--- 1.3/test_suite/shared_data/structures/generate_str_internal_results.py 
(original)
+++ 1.3/test_suite/shared_data/structures/generate_str_scientific_results.py 
Sun Oct  5 13:04:19 2008
@@ -1,4 +1,4 @@
 import sys
 pipe.create('str', 'mf')
-structure.read_pdb(file='Ap4Aase_res1-12.pdb', parser='internal')
-results.write('str', dir=None, force=True)
+structure.read_pdb(file='Ap4Aase_res1-12.pdb', parser='scientific')
+results.write('str_scientific', dir=None, force=True)

Added: 1.3/test_suite/shared_data/structures/str_scientific.bz2
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/1.3/test_suite/shared_data/structures/str_scientific.bz2?rev=7510&amp;view=auto">http://svn.gna.org/viewcvs/relax/1.3/test_suite/shared_data/structures/str_scientific.bz2?rev=7510&amp;view=auto</a>
==============================================================================
Binary file - no diff available.

Propchange: 1.3/test_suite/shared_data/structures/str_scientific.bz2
------------------------------------------------------------------------------
    svn:mime-type = application/octet-stream

Modified: 1.3/test_suite/system_tests/structure.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/1.3/test_suite/system_tests/structure.py?rev=7510&amp;r1=7509&amp;r2=7510&amp;view=diff">http://svn.gna.org/viewcvs/relax/1.3/test_suite/system_tests/structure.py?rev=7510&amp;r1=7509&amp;r2=7510&amp;view=diff</a>
==============================================================================
--- 1.3/test_suite/system_tests/structure.py (original)
+++ 1.3/test_suite/system_tests/structure.py Sun Oct  5 13:04:19 2008
@@ -45,8 +45,8 @@
         ds.__reset__()
 
 
-    def test_load_results(self):
-        &quot;&quot;&quot;Load the PDB file using the information in a results file.&quot;&quot;&quot;
+    def test_load_internal_results(self):
+        &quot;&quot;&quot;Load the PDB file using the information in a results file (using 
the internal structural object).&quot;&quot;&quot;
 
         # Path of the files.
         path = sys.path[-1] + '/test_suite/shared_data/structures'
@@ -91,3 +91,51 @@
             self.assertEqual(str.x[i], x[i])
             self.assertEqual(str.y[i], y[i])
             self.assertEqual(str.z[i], z[i])
+
+
+    def test_load_scientific_results(self):
+        &quot;&quot;&quot;Load the PDB file using the information in a results file (using 
the Scientific python structural object).&quot;&quot;&quot;
+
+        # Path of the files.
+        path = sys.path[-1] + '/test_suite/shared_data/structures'
+
+        # Read the results file.
+        self.relax.interpreter._Results.read(file='str_scientific', dir=path)
+
+        # Alias the current data pipe.
+        cdp = pipes.get_pipe()
+
+        # Test the structure metadata.
+        self.assert_(hasattr(cdp, 'structure'))
+        self.assertEqual(cdp.structure.file, ['Ap4Aase_res1-12.pdb'])
+        self.assertEqual(cdp.structure.path, [''])
+        self.assert_(hasattr(cdp.structure, 'structural_data'))
+        self.assert_(len(cdp.structure.structural_data))
+
+        # The real atomic data.
+        atom_name = ['N', 'CA', '1HA', '2HA', 'C', 'O', '1HT', '2HT', '3HT', 
'N', 'CD', 'CA', 'HA', 'CB', '1HB', '2HB', 'CG', '1HG', '2HG', '1HD', '2HD', 
'C', 'O', 'N', 'H', 'CA', 'HA', 'CB', '1HB', '2HB', 'CG', 'HG', 'CD1', 
'1HD1', '2HD1', '3HD1', 'CD2', '1HD2', '2HD2', '3HD2', 'C', 'O', 'N', 'H', 
'CA', '1HA', '2HA', 'C', 'O', 'N', 'H', 'CA', 'HA', 'CB', '1HB', '2HB', 'OG', 
'HG', 'C', 'O', 'N', 'H', 'CA', 'HA', 'CB', '1HB', '2HB', 'CG', '1HG', '2HG', 
'SD', 'CE', '1HE', '2HE', '3HE', 'C', 'O', 'N', 'H', 'CA', 'HA', 'CB', '1HB', 
'2HB', 'CG', 'OD1', 'OD2', 'C', 'O', 'N', 'H', 'CA', 'HA', 'CB', '1HB', 
'2HB', 'OG', 'HG', 'C', 'O', 'N', 'CD', 'CA', 'HA', 'CB', '1HB', '2HB', 'CG', 
'1HG', '2HG', '1HD', '2HD', 'C', 'O', 'N', 'CD', 'CA', 'HA', 'CB', '1HB', 
'2HB', 'CG', '1HG', '2HG', '1HD', '2HD', 'C', 'O', 'N', 'H', 'CA', 'HA', 
'CB', '1HB', '2HB', 'CG', '1HG', '2HG', 'CD', 'OE1', 'OE2', 'C', 'O', 'N', 
'H', 'CA', '1HA', '2HA', 'C', 'O']
+        bonded = [[]]*174
+        chain_id = [None]*174
+        element = ['N', 'C', 'H', 'H', 'C', 'O', 'H', 'H', 'H', 'N', 'C', 
'C', 'H', 'C', 'H', 'H', 'C', 'H', 'H', 'H', 'H', 'C', 'O', 'N', 'H', 'C', 
'H', 'C', 'H', 'H', 'C', 'H', 'C', 'H', 'H', 'H', 'C', 'H', 'H', 'H', 'C', 
'O', 'N', 'H', 'C', 'H', 'H', 'C', 'O', 'N', 'H', 'C', 'H', 'C', 'H', 'H', 
'O', 'H', 'C', 'O', 'N', 'H', 'C', 'H', 'C', 'H', 'H', 'C', 'H', 'H', 'S', 
'C', 'H', 'H', 'H', 'C', 'O', 'N', 'H', 'C', 'H', 'C', 'H', 'H', 'C', 'O', 
'O', 'C', 'O', 'N', 'H', 'C', 'H', 'C', 'H', 'H', 'O', 'H', 'C', 'O', 'N', 
'C', 'C', 'H', 'C', 'H', 'H', 'C', 'H', 'H', 'H', 'H', 'C', 'O', 'N', 'C', 
'C', 'H', 'C', 'H', 'H', 'C', 'H', 'H', 'H', 'H', 'C', 'O', 'N', 'H', 'C', 
'H', 'C', 'H', 'H', 'C', 'H', 'H', 'C', 'O', 'O', 'C', 'O', 'N', 'H', 'C', 
'H', 'H', 'C', 'O']
+        pdb_record = ['ATOM']*174
+        res_name = ['GLY', 'GLY', 'GLY', 'GLY', 'GLY', 'GLY', 'GLY', 'GLY', 
'GLY', 'PRO', 'PRO', 'PRO', 'PRO', 'PRO', 'PRO', 'PRO', 'PRO', 'PRO', 'PRO', 
'PRO', 'PRO', 'PRO', 'PRO', 'LEU', 'LEU', 'LEU', 'LEU', 'LEU', 'LEU', 'LEU', 
'LEU', 'LEU', 'LEU', 'LEU', 'LEU', 'LEU', 'LEU', 'LEU', 'LEU', 'LEU', 'LEU', 
'LEU', 'GLY', 'GLY', 'GLY', 'GLY', 'GLY', 'GLY', 'GLY', 'SER', 'SER', 'SER', 
'SER', 'SER', 'SER', 'SER', 'SER', 'SER', 'SER', 'SER', 'MET', 'MET', 'MET', 
'MET', 'MET', 'MET', 'MET', 'MET', 'MET', 'MET', 'MET', 'MET', 'MET', 'MET', 
'MET', 'MET', 'MET', 'ASP', 'ASP', 'ASP', 'ASP', 'ASP', 'ASP', 'ASP', 'ASP', 
'ASP', 'ASP', 'ASP', 'ASP', 'SER', 'SER', 'SER', 'SER', 'SER', 'SER', 'SER', 
'SER', 'SER', 'SER', 'SER', 'PRO', 'PRO', 'PRO', 'PRO', 'PRO', 'PRO', 'PRO', 
'PRO', 'PRO', 'PRO', 'PRO', 'PRO', 'PRO', 'PRO', 'PRO', 'PRO', 'PRO', 'PRO', 
'PRO', 'PRO', 'PRO', 'PRO', 'PRO', 'PRO', 'PRO', 'PRO', 'PRO', 'PRO', 'GLU', 
'GLU', 'GLU', 'GLU', 'GLU', 'GLU', 'GLU', 'GLU', 'GLU', 'GLU', 'GLU', 'GLU', 
'GLU', 'GLU', 'GLU', 'GLY', 'GLY', 'GLY', 'GLY', 'GLY', 'GLY', 'GLY']
+        res_num = [1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 
2, 2, 2, 2, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 4, 4, 4, 
4, 4, 4, 4, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 
6, 6, 6, 6, 6, 6, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 8, 8, 8, 8, 8, 8, 8, 8, 
8, 8, 8, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 10, 10, 10, 10, 10, 10, 
10, 10, 10, 10, 10, 10, 10, 10, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 
11, 11, 11, 11, 12, 12, 12, 12, 12, 12, 12]
+        seg_id = [None]*174
+        x = [8.442, 7.469, 8.013, 6.825, 6.610, 6.827, 9.398, 8.180, 8.448, 
5.613, 5.281, 4.714, 5.222, 3.646, 3.332, 2.800, 4.319, 4.853, 3.587, 6.162, 
4.805, 4.075, 3.593, 4.074, 4.475, 3.498, 3.572, 2.025, 1.965, 1.609, 1.176, 
1.823, 0.176, 0.096, 0.509, -0.789, 0.474, 0.809, -0.595, 0.707, 4.264, 
4.364, 4.809, 4.697, 5.561, 6.220, 6.156, 4.659, 4.746, 3.786, 3.770, 2.851, 
2.368, 1.785, 1.177, 1.165, 2.360, 1.690, 3.546, 3.804, 3.814, 3.563, 4.442, 
4.984, 5.411, 6.192, 4.872, 6.068, 6.868, 5.332, 6.747, 6.155, 5.409, 6.977, 
5.721, 3.369, 2.255, 3.703, 4.604, 2.753, 1.851, 3.329, 4.182, 3.644, 2.319, 
1.992, 1.854, 2.419, 1.251, 3.451, 4.359, 3.267, 2.246, 4.223, 4.054, 4.040, 
5.573, 6.142, 3.488, 4.276, 2.795, 1.828, 2.929, 2.810, 1.772, 0.912, 2.067, 
1.505, 0.464, 2.138, 0.938, 2.273, 4.268, 4.585, 5.076, 4.776, 6.392, 6.925, 
7.120, 7.968, 7.464, 6.130, 6.384, 6.135, 4.210, 4.246, 6.325, 5.263, 7.477, 
8.281, 7.587, 7.039, 9.047, 9.133, 9.654, 9.590, 10.670, 9.215, 9.190, 
10.055, 8.012, 7.007, 7.361, 6.144, 5.925, 5.555, 6.329, 4.814, 4.894, 4.761]
+        y = [10.188, 9.889, 9.712, 10.745, 8.674, 7.991, 10.291, 11.073, 
9.416, 8.385, 9.152, 7.243, 6.302, 7.443, 6.483, 7.963, 8.253, 7.605, 8.842, 
9.327, 10.088, 7.251, 8.285, 6.099, 5.309, 5.986, 4.953, 6.396, 7.471, 6.106, 
5.775, 5.225, 4.796, 4.954, 3.787, 4.949, 6.853, 7.828, 6.775, 6.720, 6.853, 
8.068, 6.222, 5.251, 6.956, 6.273, 7.706, 7.634, 8.841, 6.847, 5.889, 7.360, 
6.511, 8.230, 7.620, 8.669, 9.269, 9.652, 8.174, 9.362, 7.546, 6.604, 8.253, 
9.095, 7.354, 7.976, 6.886, 6.258, 5.824, 5.499, 6.846, 5.570, 5.985, 5.190, 
4.766, 8.771, 8.245, 9.789, 10.161, 10.351, 10.605, 11.610, 11.341, 12.287, 
12.322, 11.787, 13.410, 9.322, 9.015, 8.776, 9.052, 7.758, 7.826, 7.990, 
8.977, 7.248, 7.894, 8.285, 6.370, 6.214, 5.342, 5.431, 3.973, 3.943, 3.230, 
3.234, 2.212, 3.991, 3.892, 3.624, 5.960, 5.908, 3.339, 3.179, 2.980, 3.150, 
2.375, 2.876, 2.616, 3.262, 1.675, 3.264, 4.305, 2.758, 4.055, 2.299, 0.876, 
0.258, 0.312, 0.871, -1.106, -1.253, -1.489, -2.564, -1.049, -1.041, -1.011, 
-0.052, -1.970, -2.740, -1.931, -2.037, -1.962, -2.949, -2.983, -3.917, 
-4.588, -4.488, -3.289, -3.932]
+        z = [6.302, 7.391, 8.306, 7.526, 7.089, 6.087, 6.697, 5.822, 5.604, 
7.943, 9.155, 7.752, 7.908, 8.829, 9.212, 8.407, 9.880, 10.560, 10.415, 
9.754, 8.900, 6.374, 5.909, 5.719, 6.139, 4.391, 4.081, 4.415, 4.326, 5.367, 
3.307, 2.640, 3.889, 4.956, 3.700, 3.430, 2.493, 2.814, 2.633, 1.449, 3.403, 
3.572, 2.369, 2.281, 1.371, 0.855, 1.868, 0.359, 0.149, -0.269, -0.055, 
-1.268, -1.726, -0.608, 0.037, -1.377, 0.162, 0.731, -2.354, -2.175, -3.496, 
-3.603, -4.606, -4.199, -5.387, -5.803, -6.196, -4.563, -5.146, -4.350, 
-3.001, -1.895, -1.241, -1.307, -2.472, -5.551, -5.582, -6.328, -6.269, 
-7.274, -6.735, -7.913, -8.518, -7.133, -8.791, -9.871, -8.395, -8.346, 
-8.584, -8.977, -8.732, -10.002, -10.355, -11.174, -11.584, -11.936, -10.759, 
-11.425, -9.403, -8.469, -9.921, -11.030, -9.410, -8.336, -10.080, -9.428, 
-10.291, -11.333, -11.606, -12.128, -10.723, -11.893, -9.781, -10.959, 
-8.768, -7.344, -8.971, -9.765, -7.642, -7.816, -7.251, -6.715, -6.584, 
-5.765, -7.175, -6.955, -9.288, -9.222, -9.654, -9.696, -10.009, -10.928, 
-10.249, -10.194, -9.475, -11.596, -11.540, -11.813, -12.724, -13.193, 
-13.137, -8.947, -7.774, -9.383, -10.338, -8.477, -8.138, -9.017, -7.265, 
-6.226]
+
+        # Test the atomic data.
+        str = cdp.structure.structural_data[0]
+        for i in xrange(len(str.atom_name)):
+            self.assertEqual(str.atom_name[i], atom_name[i])
+            self.assertEqual(str.bonded[i], bonded[i])
+            self.assertEqual(str.chain_id[i], chain_id[i])
+            self.assertEqual(str.element[i], element[i])
+            self.assertEqual(str.pdb_record[i], pdb_record[i])
+            self.assertEqual(str.res_name[i], res_name[i])
+            self.assertEqual(str.res_num[i], res_num[i])
+            self.assertEqual(str.seg_id[i], seg_id[i])
+            self.assertEqual(str.x[i], x[i])
+            self.assertEqual(str.y[i], y[i])
+            self.assertEqual(str.z[i], z[i])



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer">You are on the <a href="http://gna.org">Gna!</a> mail server.</div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Sun Oct 05 13:40:02 2008</div>  
</body>
</html>
