<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: R1rho RD analysis -->
<!--X-From-R13: "Sqjneq q'Ohiretar" &#60;rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Thu, 22 May 2014 17:03:47 +0200 -->
<!--X-Message-Id: CAED9pY&#45;JoCffENebpEy3zPXg=dfcobrULSW&#45;SWEaGrN9nhggVg@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: mailman.0.1400242739.20441.relax&#45;users@gna.org -->
<!--X-Reference: 537A143C.3020901@ibs.fr -->
<!--X-Reference: CAED9pY8GmeRj=HfGGb9x0Gk00bn1vBQYfYsUFDTzRmgyY7B_VA@mail.gmail.com -->
<!--X-Reference: 537E0B05.3060000@ibs.fr -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: R1rho RD analysis -- May 22, 2014 - 17:03</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: R1rho RD analysis</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00014" class="tabs">Index by Date</a> | <a href="threads.html#00014" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00013.html">Date Prev</a>] [<a href="msg00015.html">Date Next</a>] [<a href="msg00013.html">Thread Prev</a>] [<a href="msg00023.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: pma &lt;Peixiang.Ma@xxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Thu, 22 May 2014 17:02:56 +0200</li>
<li class="menuitem">
<em>Cc</em>: &quot;relax-users@xxxxxxx&quot; &lt;relax-users@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113; h=mime-version:sender:in-reply-to:references:date:message-id:subject :from:to:cc:content-type; bh=r23gK03Mt4n8BYo3UeWPIihW+lBeYsb4FZ6kqIeAj8k=; b=an9tntQojlQJG9ocpQSSqS7921kFHvDmYQxgZI/i8+lHYIA2flJzgSlyVXZkWk4Uqo yGmjmBhwNlxKxM+hH2SefQqRlZrK4iwyUh5CWZY8hEYogXIBoi07uxhl02PQOV4LhQbo bFkdrL2Pvb2csyu1Np/TMu4/6HMLfFJDFIScQeeQu9jeow9RKp64KxrQvOxWyydzRqC4 O6cTS5H/0onAFhc+xTzNGg2gR/VtwI4l8wIIDGC9eP/vgZDujbdK59E6M2JcUoa/CC5r g3sZvNFWP+1xuiQC6Iubrd9tBMFtkjQ4fASLZkd0q4KU9VJkcbzzefQ32oGPXh2hVuMS FVJA==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;CAED9pY-JoCffENebpEy3zPXg=dfcobrULSW-SWEaGrN9nhggVg@mail.gmail.com&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;mailman.0.1400242739.20441.relax-users@gna.org&gt; &lt;<a href="msg00011.html">537A143C.3020901@ibs.fr</a>&gt; &lt;CAED9pY8GmeRj=HfGGb9x0Gk00bn1vBQYfYsUFDTzRmgyY7B_VA@mail.gmail.com&gt; &lt;<a href="msg00013.html">537E0B05.3060000@ibs.fr</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on May 22, 2014 - 17:03:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Hi Peixiang,

You should find the answers to most of your questions in the relax
manual.  Please see below:


</pre><blockquote class="blockquote"><pre style="margin: 0em;">Thanks for you reply. I used the script mode in linux.

I tried with 'r1rho_on_res_m61.py', but I think in the script it has a
mistake.
in line27 ds.fixed = True, I think it should be False, because this
experiment has different time period, they do not need the ref. I changed to
False, the M61 model still give right result.
</pre></blockquote><pre style="margin: 0em;">

Anything starting with 'ds' in the test suite scripts can be ignored.
These are internal data structures used to share scripts between
different tests in the test suite - they are not to be used by normal
users.  You should be very careful with the scripts in
test_suite/system_tests/scripts/, as these can be full of such
developer-only code.  If these are tripping you up and the
sample_scripts are not sufficient, you might prefer to use the
graphical user interface (GUI).  This makes the dispersion analysis
very simple.


</pre><blockquote class="blockquote"><pre style="margin: 0em;">But I still have some other questions.

1. How did you declare replicates in such Variable relaxation period
experiments? I saw in the example r1rho_on_res_m61.py, you read all the data
into a big Matrix data and did not declare the replicate. But for the fixed
time period you declare by the spectrum ID. Did you have a solution for
this?
</pre></blockquote><pre style="margin: 0em;">

relax is fully flexible.  You simply use the spectrum.replicated user
function - then relax will take care of the rest.  See the manual
(<a  rel="nofollow" href="/manual/Dispersion_script_mode_loading_data.html">http://www.nmr-relax.com/manual/Dispersion_script_mode_loading_data.html</a>
and <a  rel="nofollow" href="/manual/Dispersion_GUI_mode_loading_data.html">http://www.nmr-relax.com/manual/Dispersion_GUI_mode_loading_data.html</a>).
 Please note that you really must upgrade to the recently release
relax 3.2.0 as it fixes a severe bug in the replicated spectra error
analysis for the relaxation dispersion analysis in relax:

<a  rel="nofollow" href="/download.html">http://www.nmr-relax.com/download.html</a>,
<a  rel="nofollow" href="/mail.gna.org/public/relax-announce/2014-05/msg00000.html">https://mail.gna.org/public/relax-announce/2014-05/msg00000.html</a>,
<a  rel="nofollow" href="https://freecode.com/projects/nmr-relax/releases/363882">https://freecode.com/projects/nmr-relax/releases/363882</a>,
<a  rel="nofollow" href="https://gna.org/forum/forum.php?forum_id=2461">https://gna.org/forum/forum.php?forum_id=2461</a>.

I can see that you are not signed up for the relax-announce mailing
list, so you probably missed the announcement.  It is worth signing up
to this list at <a  rel="nofollow" href="/mail.gna.org/listinfo/relax-announce/">https://mail.gna.org/listinfo/relax-announce/</a>.  This
email list receives around 10 emails per year, so it is a very low
traffic list.


</pre><blockquote class="blockquote"><pre style="margin: 0em;">2.  I want to test NS R1rho 2-site, so I simply add it into the MODELS in
'r1rho_on_res_m61.py'. It seems does not work.
first, they give the warning when it comes to NS R1rho 2-site, (grid_inc =8
)
------------------------------------------------------------------------------------------------------------------------------
Searching through 32768 grid nodes.
lib/dispersion/ns_r1rho_2site.py:118: RuntimeWarning: divide by zero
encountered in double_scalars
  theta = atan(spin_lock_fields[i]/dA)
lib/dispersion/ns_r1rho_2site.py:132: RuntimeWarning: invalid value
encountered in double_scalars
  back_calc[i]= -inv_relax_time * log(MA)
-----------------------------------------------------------------------------------------------------------------------------
</pre></blockquote><pre style="margin: 0em;">

We are working on removing these warnings at the moment.  It is safe
to ignore them.


</pre><blockquote class="blockquote"><pre style="margin: 0em;">I think the grid search is too heavy for the NS model, do you have a
solution to constrain it?
</pre></blockquote><pre style="margin: 0em;">

A grid_inc of 8 will be very much insufficient!  For any NMR theory.
I suggest you use the dispersion auto-analysis I have developed and
talked about in the publication
(<a  rel="nofollow" href="http://dx.doi.org/10.1093/bioinformatics/btu166">http://dx.doi.org/10.1093/bioinformatics/btu166</a>).  The trick with the
auto-analysis is to use the result of the analytic model as the
starting point for optimisation of the numeric model, so that the grid
search is bypassed.  This is described in the paper and extensively in
the relax manual.  In the auto-analysis, for the numeric R1rho model,
Art Palmer's analytic model MP05 (<a  rel="nofollow" href="http://wiki.nmr-relax.com/MP05">http://wiki.nmr-relax.com/MP05</a>) is
used.


</pre><blockquote class="blockquote"><pre style="margin: 0em;">Or for example, if I want to limit grid search only for kex and pA, but not
for others, how can I declare that?
</pre></blockquote><pre style="margin: 0em;">

I'm not sure what you mean.  Do you mean only perform a grid search
over certain parameters and not others?  Such tricks should only be
used if you have extensive knowledge of the relaxation dispersion
phenomenon and you know exactly what the consequences of this will be.
 If so, you will know what the user function
relax_disp.set_grid_r20_from_min_r2eff that Troels Linnet added to
relax can do for you.


</pre><blockquote class="blockquote"><pre style="margin: 0em;">For RuntimeWarning: divide by zero encountered in double_scalars, do you
have suggestions for this?
</pre></blockquote><pre style="margin: 0em;">

Ignore them.


</pre><blockquote class="blockquote"><pre style="margin: 0em;">The final results for 'NS R1rho 2-site' did not fit at all, so the data for
M61 can only be fit with M61 model but not other models?
</pre></blockquote><pre style="margin: 0em;">

The M61 model, according to the relax manual
(<a  rel="nofollow" href="/manual/M61_2_site_fast_exchange_R1_model.html">http://www.nmr-relax.com/manual/M61_2_site_fast_exchange_R1_model.html</a>),
is for on-resonance data.  The 'NS R1rho 2-site' is for off-resonance
data.  That will probably explain what you see.  I hope these
explanations help.  You should look at the relaxation dispersion
chapter of the relax manual though, as some of your questions are
extensively covered in there.

Regards,

Edward


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00023" href="msg00023.html">Re: R1rho RD analysis</a></strong>
<ul><li><em>From:</em> pma</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00011" href="msg00011.html">R1rho RD analysis</a></strong>
<ul><li><em>From:</em> pma</li></ul></li>
<li><strong><a name="00012" href="msg00012.html">Re: R1rho RD analysis</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00013" href="msg00013.html">Re: R1rho RD analysis</a></strong>
<ul><li><em>From:</em> pma</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Wed May 28 11:00:13 2014</div>  
</body>
</html>
