<!-- MHonArc v2.6.10 -->
<!--X-Subject: Re: r3080 &#45; /1.3/test_suite/unit_tests/unit_test_runner.py -->
<!--X-From-R13: "Sqjneq q'Ohiretar" <rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Wed, 07 Mar 2007 08:36:54 +0100 -->
<!--X-Message-Id: 7f080ed10703062336i6e3323edx7e1f2bc7eada53bd@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: E1HO9rU&#45;0004g2&#45;14@subversion.gna.org -->
<!--X-Reference: 45EBEA6A.7030809@bmb.leeds.ac.uk -->
<!--X-Reference: 7f080ed10703052357i7fc20379n835048c0cc3c84c1@mail.gmail.com -->
<!--X-Reference: 45ED2A08.6090207@bmb.leeds.ac.uk -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: r3080 - /1.3/test_suite/unit_tests/unit_test_runner.py -- March 07, 2007 - 08:36</title>
<link rel="stylesheet" type="text/css" href="/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="https://gna.org/images/gna.theme/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: r3080 - /1.3/test_suite/unit_tests/unit_test_runner.py</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00011" class="tabs">Index by Date</a> | <a href="threads.html#00011" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00010.html">Date Prev</a>] [<a href="msg00012.html">Date Next</a>] [<a href="msg00022.html">Thread Prev</a>] [<a href="msg00019.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: &quot;Gary S. Thompson&quot; &lt;garyt@xxxxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Wed, 7 Mar 2007 18:36:09 +1100</li>
<li class="menuitem">
<em>Cc</em>: relax-devel@xxxxxxx</li>
<li class="menuitem">
<em>Dkim-signature</em>: a=rsa-sha1; c=relaxed/relaxed; d=gmail.com; s=beta;	h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:cc:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;	b=SiYZxUw7IOojOUH8HDVa671WyiDQCl1EkFOiDtsR9j0KQf19Tw9zoYgqhUBDgCsyAI9wVyAVM99Df0PuZ8rCtk3jNNNkspCZhnafVErfKhZgVhAcPG2sEeDMXvzDbx/Wk89qXrqHC2pLBu0b8Em+Xl5L8Bw8zZVWitcEt+n4Z6A=</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00011.html">7f080ed10703062336i6e3323edx7e1f2bc7eada53bd@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;E1HO9rU-0004g2-14@subversion.gna.org&gt;	&lt;<a href="msg00004.html">45EBEA6A.7030809@bmb.leeds.ac.uk</a>&gt;	&lt;<a href="msg00005.html">7f080ed10703052357i7fc20379n835048c0cc3c84c1@mail.gmail.com</a>&gt;	&lt;<a href="msg00008.html">45ED2A08.6090207@bmb.leeds.ac.uk</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on March 07, 2007 - 08:36:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<tt>On 3/6/07, Gary S. Thompson &lt;garyt@xxxxxxxxxxxxxxx&gt; wrote:
</tt><blockquote class="blockquote"><pre style="margin: 0em;">Edward d'Auvergne wrote:</pre><br>
<pre style="margin: 0em;">&gt; The function arguments are definitely clearly described.</pre><br>
<pre style="margin: 0em;"><br>oh good!</pre><br>
<pre style="margin: 0em;">&gt; Do you think
&gt; that the arguments of the command line usage of 'unit_test_runner.py'
&gt; should be sent in as the argument 'test_module' or the argument
&gt; 'root_path'?  Is 'test_module' supposed to be a file name or module
&gt; name (eg. 'data/test_diff_tensor.py' vs 'data.test_diff_tensor')?</pre><br>
<tt><br>oh bad! obviously not quite well enough defined... a module name
</tt></blockquote><pre style="margin: 0em;"><br>My confusion lies in the fact that I was expecting that I could supply
a file name (i.e. having access to the all important shell tab
completion abilities) but the documentation says module names - which
don't have the tab completion ability.  For the class this doesn't
matter but for the stand alone operation of 'unit_test_runner.py',
typing the module names in full rather than tab completing to the file
name could be a source of severe wrist pain :(</pre><br>
<br>
<blockquote class="blockquote"><pre style="margin: 0em;">&gt; For the argument 'rootSystemDirectory', could this not be changed to a
&gt; single string?  The second array element, the relative path, could
&gt; easily be determined by a function which converts all directories in
&gt; the first element to '..' (well actually 'os.pardir' to be
&gt; cross-platform compatible).  Oh, I just noticed but the directory
&gt; separators should be made OS independent and portable by using the
&gt; 'sep' variable from the 'os' module.  It may be possible to also write
&gt; a function which determines these directories automatically, removing
&gt; the need for the argument (eg. walking up directories from os.getcwd()
&gt; until an executable file 'relax' is found).   Would it be possible to
&gt; determine the values of the 'root_unit_test_directory' argument
&gt; automatically as well?</pre><br>
<pre style="margin: 0em;"><br>There are a few things here</pre><br>
<pre style="margin: 0em;">1. yes I should be using os.pardir() and I have bee trying to use
os.sep, if it is missing its an oversight
</pre></blockquote><pre style="margin: 0em;"><br>These things will sort themselves out when people run the relax tests
on non-Posix systems.  After making relax cross platform compatible I
now try to remember to never use directory paths as plain strings.</pre><br>
<br>
<blockquote class="blockquote"><pre style="margin: 0em;">2. both the unit test funtion and the system directoy function pass into
a general directory searcher
  so the second argument is needed
</pre></blockquote><pre style="margin: 0em;"><br>I suppose the generality could be useful for the future integration of
the system/function tests into the framework.  If this is the idea (?)
removal of 'unit' from the documentation, variables, methods,
functions, and classes might be an idea.</pre><br>
<br>
<blockquote class="blockquote"><pre style="margin: 0em;">3. I could look for an executable relax file but I feel makes me more
dystem dependant than looking for a directory structure
</pre></blockquote><pre style="margin: 0em;"><br>A hard coded directory structure pattern, throwing a RelaxError if
there is no match to handle directory structure changes, could be the
most flexible solution simplifying the work required by the user of
the Run_unit_tests class.  It's not essential though but would make
the use of the class instance easier to understand (without looking at
the code).</pre><br>
<br>
<blockquote class="blockquote"><pre style="margin: 0em;">&gt; One last thing is do we need the 'test_pattern' argument?  I think we
&gt; should enforce that unit test files must always start with 'test_' and
&gt; end in '.py'.  Can you see exceptions to this rule requiring the
&gt; argument?</pre><br>
<pre style="margin: 0em;"><br>I don't in general see any exceptions to this rule , but I designed the
setup to be general again. I guess the search string could be come an
inrenal constant
</pre></blockquote><pre style="margin: 0em;"><br>If it were a non-private constant of the module, then the user of the
module could change it if desired.  I'm just thinking of ways of
simplifying the class usage, hence simplifying its description.  These
ideas have no operational effects so don't worry about it if you
prefer the flexibility.</pre><br>
<br>
<blockquote class="blockquote"><pre style="margin: 0em;">&gt; Also do you think that we should have a single unit test
&gt; file per relax module?  I can see value in not enforcing this rule.
&gt; For example the 'specific_fns.model_free' module contains a very large
&gt; number of class methods.  This could be better served by a directory
&gt; such as 'test_suite/unit_tests/specific_fns/model_free/' and allowing
&gt; that directory to have a separate unit test model per class methods
&gt; (each containing numerous tests of that one method).  As each relax
&gt; function or method will require numerous tests for proper functioning,
&gt; proper throwing of RelaxErrors, etc, the unit test modules could
&gt; become quite large and unwieldy, especially if the self.setUp and
&gt; self.tearDown() methods need to be different for different
&gt; functions/methods.
&gt;
It would be ideal to have one file per because then we can check for
basic coverage and overlooked unit tests. However there is nothing to
stop you adding imports to auxiliary classes to carry out the individual
tests....
</pre></blockquote><pre style="margin: 0em;"><br>See my post in response to Chris' response to your post that I'm now
responding to - if that makes sense!  Otherwise:
<a  href="https://mail.gna.org/public/relax-devel/2007-03/msg00010.html">https://mail.gna.org/public/relax-devel/2007-03/msg00010.html</a>
(Message-id: 
&lt;1173248473.29411.21.camel@xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&gt;).</pre><br>
<pre style="margin: 0em;">Cheers,</pre><br>
<pre style="margin: 0em;">Edward</pre><br>
<br>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00019" href="msg00019.html">Re: r3080 - /1.3/test_suite/unit_tests/unit_test_runner.py</a></strong>
<ul><li><em>From:</em> Gary S. Thompson</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00004" href="msg00004.html">Re: r3080 - /1.3/test_suite/unit_tests/unit_test_runner.py</a></strong>
<ul><li><em>From:</em> Gary S. Thompson</li></ul></li>
<li><strong><a name="00005" href="msg00005.html">Re: r3080 - /1.3/test_suite/unit_tests/unit_test_runner.py</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00008" href="msg00008.html">Re: r3080 - /1.3/test_suite/unit_tests/unit_test_runner.py</a></strong>
<ul><li><em>From:</em> Gary S. Thompson</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer">You are on the <a href="http://gna.org">Gna!</a> mail server.</div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Thu Mar 08 10:20:26 2007</div>  
</body>
</html>
