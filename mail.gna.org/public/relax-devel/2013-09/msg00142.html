<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: [sr #3078] Parse spin.model names to the value.write user	function. -->
<!--X-From-R13: "Sqjneq q'Ohiretar" <rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Wed, 11 Sep 2013 09:46:40 +0200 -->
<!--X-Message-Id: CAED9pY_X0PVwdDMaitoff7yJWbYQEz&#45;3zh2PO2O5ShbpwxNtwg@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 20130910&#45;135824.sv20529.32975@gna.org -->
<!--X-Reference: 20130910&#45;142256.sv20529.84341@gna.org -->
<!--X-Reference: 20130910&#45;142947.sv20529.89953@gna.org -->
<!--X-Reference: 20130911&#45;070859.sv20529.91200@gna.org -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [sr #3078] Parse spin.model names to the value.write user	function. -- September 11, 2013 - 09:46</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: [sr #3078] Parse spin.model names to the value.write user	function.</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00142" class="tabs">Index by Date</a> | <a href="threads.html#00142" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00141.html">Date Prev</a>] [<a href="msg00143.html">Date Next</a>] [<a href="msg00141.html">Thread Prev</a>] [<a href="msg00133.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: &quot;Troels E. Linnet&quot; &lt;NO-REPLY.INVALID-ADDRESS@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Wed, 11 Sep 2013 09:46:08 +0200</li>
<li class="menuitem">
<em>Cc</em>: &quot;relax-devel@xxxxxxx&quot; &lt;relax-devel@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;	h=mime-version:sender:in-reply-to:references:date:message-id:subject	:from:to:cc:content-type;	bh=FVYeQty+BoKs5zxjDT/3nDswFu8G+arRvOxDVqZlcfk=;	b=ENGalNJJfaBq9AR8JWeU0PwV0Bk3gVby0dU2+FoUIo+ks77uDgPFGg6nfyl1c1jyzz	TjHVLwIYvEffd1K7taOyXPckyNkdEoGPK+0w5QPaNuKeu6fBpHVXbLGDn5CBpIEu4yB/	MFrhTAhPWr/k1/Yw/edWawwcwl1jzsOCa1p/3TlHO+6w8MOU8SCDimf4UlJEv+o2D9Vv	zdHabkcXUOG3EckfITOJd2mBXSjBn6fFvRkGkscgTgjWk3+sQVUoGLXFW+305XeTTqPq	RmsXLLUp/8r8wWWyQFaBl5LwbN9A5bMBD4tS40FwFbQhjbnNqWxpxWBZP6DsjpG8p944	s99w==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00142.html">CAED9pY_X0PVwdDMaitoff7yJWbYQEz-3zh2PO2O5ShbpwxNtwg@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;20130910-135824.sv20529.32975@xxxxxxx&gt;	&lt;20130910-142256.sv20529.84341@xxxxxxx&gt;	&lt;20130910-142947.sv20529.89953@xxxxxxx&gt;	&lt;20130911-070859.sv20529.91200@xxxxxxx&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on September 11, 2013 - 09:46:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Hi,

Of course, this is a useful feature.  I would recommend implementing
this for the trunk though, as this is not specific to the relaxation
dispersion branch.  I'm wondering if we should create a short lived
branch for this, just to keep the trunk functional during the
development/fixing.  Actually, that might be best.  I have now created
the 'value_write_fixes' branch for you to work on.  You should
familiarise yourself with branching and branch management in an svn
repository - the branches section of the development chapter of the
relax manual would be useful for this.

For the test I would recommend loading a file such as
test_suite/shared_data/model_free/OMP/final_results_trunc_1.3_v2.bz2.
These are model-free results but, if the value.write user function is
fixed for this, it will be fixed for the dispersion analysis too.  You
could then use:

data_list = ['select', 'model', 'params', 's2', 's2f', 's2s', 'te',
'tf', 'ts', 'Rex']
self.interpreter.value.write(param=data_list, file=self.tmpfile,
dir=None, force=True)

This should test out all different types - booleans, strings, lists,
and floats.  It should be quite comprehensive, and it should almost
mimic the old relax state files (see
test_suite/shared_data/model_free/OMP/final_results_trunc_1.2.bz2).

Looking at the value.write backend more closely, I can see that many,
many features have been lost.  It is really a pity there was no system
test written for it!!  For example the headings are now 'value' and
'error' for the parameter.  This needs to be changed as there is no
error for certain data, and it would make little sense to have 10
columns with the title 'value'!  Other useful features would be to
have the 'sim_index' argument added, so that data for individual
simulations could be output:

self.interpreter.value.write(param=data_list, sim_index=1,
file=self.tmpfile, dir=None, force=True)

Fortunately the bc argument is still there, though I don't know how
functional it is.  That would require a separate system test as the
OMP model-free results file contains no back-calculated data.  The
value.write user function used to have the flexibility of the
value.set function.  However the test suite only checks value.set.  So
value.set remains highly flexible while value.write has become a
rigid, inflexible mess.

Regards,

Edward



On 11 September 2013 09:08, Troels E. Linnet
&lt;NO-REPLY.INVALID-ADDRESS@xxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Follow-up Comment #3, sr #3078 (project relax):

Hi Edward. Could this system test be implemented.

It will help solve the bug:
-------
It seems value.write does not accept list of model parameters.

self.interpreter.value.write(param=['model','kex'], file=self.tmpfile,
dir=None, force=True)

It expects a string as input.

Ref:
<a  rel="nofollow" href="http://article.gmane.org/gmane.science.nmr.relax.devel/4605">http://article.gmane.org/gmane.science.nmr.relax.devel/4605</a>



    _______________________________________________________

Reply to this item at:

  &lt;<a  rel="nofollow" href="http://gna.org/support/?3078">http://gna.org/support/?3078</a>&gt;

_______________________________________________
  Message sent via/by Gna!
  <a  rel="nofollow" href="http://gna.org/">http://gna.org/</a>


_______________________________________________
relax (<a  rel="nofollow" href="http://www.nmr-relax.com">http://www.nmr-relax.com</a>)

This is the relax-devel mailing list
relax-devel@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="http://www.nmr-relax.com/mail.gna.org/listinfo/relax-devel">https://mail.gna.org/listinfo/relax-devel</a>
</pre></blockquote><pre style="margin: 0em;">


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00126" href="msg00126.html">[sr #3078] Parse spin.model names to the value.write user function.</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
<li><strong><a name="00131" href="msg00131.html">[sr #3078] Parse spin.model names to the value.write user function.</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
<li><strong><a name="00132" href="msg00132.html">[sr #3078] Parse spin.model names to the value.write user function.</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
<li><strong><a name="00141" href="msg00141.html">[sr #3078] Parse spin.model names to the value.write user function.</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Wed Sep 11 10:00:06 2013</div>  
</body>
</html>
