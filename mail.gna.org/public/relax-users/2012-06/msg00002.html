<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: SH3, model&#45;free failed (relax GUI) -->
<!--X-From-R13: [negva Pnyynfpux <onyynfpuxNszc&#45;oreyva.qr> -->
<!--X-Date: Tue, 05 Jun 2012 13:35:27 +0200 -->
<!--X-Message-Id: 323D4DB3&#45;C190&#45;4C7F&#45;9A0D&#45;56DC9A352995@fmp&#45;berlin.de -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 533CDA92&#45;36FE&#45;4E36&#45;8925&#45;7536EFF2608E@fmp&#45;berlin.de -->
<!--X-Reference: CAED9pY8Pr=_iqTh_DEU6415Az+_kZ6qTp=3MSbzma_d3k9Bs2Q@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: SH3, model-free failed (relax GUI) -- June 05, 2012 - 13:35</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: SH3, model-free failed (relax GUI)</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00002" class="tabs">Index by Date</a> | <a href="threads.html#00002" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00001.html">Date Prev</a>] [<a href="msg00003.html">Date Next</a>] [<a href="msg00001.html">Thread Prev</a>] [<a href="msg00003.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: &quot;Edward d'Auvergne&quot; &lt;edward@xxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Tue, 5 Jun 2012 13:35:21 +0200</li>
<li class="menuitem">
<em>Cc</em>: relax-users@xxxxxxx</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00002.html">323D4DB3-C190-4C7F-9A0D-56DC9A352995@fmp-berlin.de</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;533CDA92-36FE-4E36-8925-7536EFF2608E@xxxxxxxxxxxxx&gt;	&lt;CAED9pY8Pr=_iqTh_DEU6415Az+_kZ6qTp=3MSbzma_d3k9Bs2Q@xxxxxxxxxxxxxx&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Martin Ballaschk</strong> on June 05, 2012 - 13:35:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Hi Edward,

thank you for the reply. I will file a bug report soon.

I'll answer below:

On 05.06.2012, at 11:41, Edward d'Auvergne wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Do you have information about which version of relax you are using?
</pre></blockquote><pre style="margin: 0em;">

It's 1.3.16 â€“ newly downloaded from the main page.

</pre><blockquote class="blockquote"><pre style="margin: 0em;">[...]
Note that this RelaxFault is not much of an issue.  You can see the
exact failure point by looking into the
auto_analyses/dauvergne_protocol.py file.
</pre></blockquote><pre style="margin: 0em;">

The &quot;relax controller&quot; also showed me the point of failure. I copied the last 
100.000 lines of messages into this file: 
<a  rel="nofollow" href="https://www.dropbox.com/sh/ijah1ll37o9xmsy/le6rGRguU5/mf_firstrun_log.txt">https://www.dropbox.com/sh/ijah1ll37o9xmsy/le6rGRguU5/mf_firstrun_log.txt</a>

That's the last lines:

relax&gt; pymol.macro_write(data_type='amp_fast', style='classic', 
colour_start=None, colour_end=None, colour_list=None, file=None, 
dir='/faust/TENSOR/sh3_EdA/final/pymol', force=True)
Exception raised in thread.

Traceback (most recent call last):
  File &quot;/usr/local/relax/gui/analyses/execute.py&quot;, line 88, in run
    self.run_analysis()
  File &quot;/usr/local/relax/gui/analyses/auto_model_free.py&quot;, line 765, in 
run_analysis
    dauvergne_protocol.dAuvergne_protocol(pipe_name=self.data.pipe_name, 
results_dir=self.data.save_dir, diff_model=self.data.global_models, 
mf_models=self.data.mf_models, local_tm_models=self.data.local_tm_models, 
grid_inc=self.data.inc, diff_tensor_grid_inc=self.data.diff_tensor_grid_inc, 
mc_sim_num=self.data.mc_sim_num, max_iter=self.data.max_iter, 
conv_loop=self.data.conv_loop)
  File &quot;/usr/local/relax/auto_analyses/dauvergne_protocol.py&quot;, line 223, in 
__init__
    self.execute()
  File &quot;/usr/local/relax/auto_analyses/dauvergne_protocol.py&quot;, line 710, in 
execute
    self.write_results()
  File &quot;/usr/local/relax/auto_analyses/dauvergne_protocol.py&quot;, line 858, in 
write_results
    self.interpreter.pymol.macro_write(data_type='amp_fast',  dir=dir, 
force=True)
  File &quot;/usr/local/relax/prompt/pymol_control.py&quot;, line 266, in macro_write
    pymol_control.macro_write(data_type=data_type, style=style, 
colour_start=colour_start, colour_end=colour_end, colour_list=colour_list, 
file=file, dir=dir, force=force)
  File &quot;/usr/local/relax/generic_fns/pymol_control.py&quot;, line 458, in 
macro_write
    commands = create_macro(data_type=data_type, style=style, 
colour_start=colour_start, colour_end=colour_end, colour_list=colour_list)
  File &quot;/usr/local/relax/generic_fns/pymol_control.py&quot;, line 352, in 
create_macro
    commands = macro(data_type, style, colour_start, colour_end, colour_list)
  File &quot;/usr/local/relax/specific_fns/model_free/macro_base.py&quot;, line 551, in 
create_macro
    self.classic_style(data_type, colour_start, colour_end, colour_list, 
spin_id)
  File &quot;/usr/local/relax/specific_fns/model_free/macro_base.py&quot;, line 242, in 
classic_style
    raise RelaxFault

Storing the relax state in the file 'relax_state_20120602_135951.bz2'.

RelaxFault: RelaxError: Impossible to be here, please re-run relax with the 
'--debug' flag and summit a bug report at <a  rel="nofollow" href="https://gna.org/projects/relax/">https://gna.org/projects/relax/</a>.


</pre><blockquote class="blockquote"><pre style="margin: 0em;">[...]  This means that you have the results for
the completed analysis sitting on your computer!
</pre></blockquote><pre style="margin: 0em;">

Yes, you're right. I can see the the final result files in the respective 
directories (&quot;./final&quot;). Unfortunately, something is still wrong, and I 
suspect it's my data. 

relax obviously went for the ellipsoid model, but during the runs, most of 
the spin systems got eliminated. That means, for most of the parameters I 
don't have any values (see 
<a  rel="nofollow" href="https://www.dropbox.com/sh/ijah1ll37o9xmsy/UgQuNzBSwl/final">https://www.dropbox.com/sh/ijah1ll37o9xmsy/UgQuNzBSwl/final</a> ).

I don't really understand what exactly is tested against what when relax 
tells me e.g.:

Data pipe 'm5':  The ts value of 8.5026e-10 is greater than 6.377e-10, 
eliminating spin system '#1aey-NMR_mol1:30&amp;:ILE@410&amp;@N'.

I'm sure that's described somewhere in the manual or the thesis, but I 
couldn't find it.

***

So what can I do about this. The obviuos thing is to validate my data (again) 
and finally do the temperature calibration at the 750 machine. Isn't it odd 
that the R1, R2 methanol calibrations we did showed no differences in ppm, 
regardless of the duration of the R2 measurements? 

Is maybe the peak maximum searching in CCPN introducing systematic error by 
picking positive noise on top of the peaks? 

The NOE error calculation in CCPN is somewhat opaque and is based on getting 
the spectrum noise. Could a under / overestimation of the NOE errors lead to 
such a massive elimination of spin models?

I don't really know where to start looking for errors. 

Cheers
Martin





</pre><blockquote class="blockquote"><pre style="margin: 0em;">On 5 June 2012 11:00, Martin Ballaschk &lt;ballaschk@xxxxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">

Hello Edward, hello relax-users,

for five days relax calculated mf models for SH3 and then something went 
wrong. It stopped with

</pre><blockquote class="blockquote"><pre style="margin: 0em;">RelaxFault: RelaxError: Impossible to be here, please re-run relax with 
the '--debug' flag and summit a bug report at 
<a  rel="nofollow" href="https://gna.org/projects/relax/">https://gna.org/projects/relax/</a>
</pre></blockquote><pre style="margin: 0em;">

A look at the relax messages tells me that almost all spin got eleminated. 
The &quot;debugging run&quot; is still running.

I will try to give a detailed description of what we've done to collect 
the input data and maybe you can give me a hint what may be a problem; if 
it's something with the sample, the measuring setup or the processing 
workflow.

====

1.) Protein / sample

* SH3 from chicken alpha-spectrin, 62 residues (1AEY.pdb)
* 2H/13C/15N and metyhl-group labeled
* concentration: ~ .5 mM
* our &quot;all-purpose model protein&quot; for testing new stuff


2.) Data collection

* two fields: 600 MHz &amp; 750 MHz (Bruker spectrometers with cryo probes)
* 600 machine:
 <a  rel="nofollow" href="http://www.fmp-berlin.de/schmieder/nmr_facility/av600sel.htm">http://www.fmp-berlin.de/schmieder/nmr_facility/av600sel.htm</a>
* 750 machine:
 <a  rel="nofollow" href="http://www.fmp-berlin.de/schmieder/nmr_facility/av750.htm">http://www.fmp-berlin.de/schmieder/nmr_facility/av750.htm</a>
* temperature: 300.1 K
  o comparison between between T1 and T2 temperatures /w methanol
    gave *no* differences in temperature at the 600 MHz machine (!)
  o 750 MHz spectrometer needs still to be tested though
  o temperature differences in HetNOE also need to be tested
* single-scan interleaved recording was performed for T1, T2 and HetNOE 
measurements
* T1: delays between 12 and 1500 ms, 8 data points, 4 of them replicated
* T2: delays between 17 and 217 ms, 8 data points, 4 of them replicated


3.) Data processing

* processing of all spectra: Bruker TOPSPIN 3.1
* peak picking with CCPN 2.2.1:
 o T1, T2 (pseudo-3D) picked with â€žFollow intensity changesâ€œ function
 o HetNOE (2D planes) picked with â€žHeteronuclear NOEâ€œ function
* T1, T2 analysed with relax' fitting function
* consisteny testing performed with Sebastien Morins script
 (although I'm not sure about the interpretation of the results,
 also: the molecule is very small and tau_m &lt; 5ns)


4.) Model-free analysis within relax GUI

* imported all relaxation data as described
* CSA, bond length values: default values taken
* unit vectors from 1AEY.pdb (averaged in relax)


All the relax data of this run including the results files and consistency 
testing plots have been made publicly available:
<a  rel="nofollow" href="https://www.dropbox.com/sh/ijah1ll37o9xmsy/OybJrGT13e">https://www.dropbox.com/sh/ijah1ll37o9xmsy/OybJrGT13e</a>


I would be very grateful if you could have a look at the data and tell me: 
is it me or is it a bug?

Cheers
Martin
</pre></blockquote></blockquote><pre style="margin: 0em;">



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00003" href="msg00003.html">Re: SH3, model-free failed (relax GUI)</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00000" href="msg00000.html">SH3, model-free failed (relax GUI)</a></strong>
<ul><li><em>From:</em> Martin Ballaschk</li></ul></li>
<li><strong><a name="00001" href="msg00001.html">Re: SH3, model-free failed (relax GUI)</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Tue Jun 05 14:40:06 2012</div>  
</body>
</html>
