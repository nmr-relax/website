<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: [bug #20674] UnboundLocalError in consistency_tests.py -->
<!--X-From-R13: "Sqjneq q'Ohiretar" <rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Thu, 04 Apr 2013 17:11:53 +0200 -->
<!--X-Message-Id: CAED9pY8zcu0LAPjcocG5xN=&#45;H4mZ0d5nqUwjKyqJ0pmB7BQnNA@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 20130328&#45;153752.sv0.83575@gna.org -->
<!--X-Reference: 20130328&#45;153921.sv0.90317@gna.org -->
<!--X-Reference: CAED9pY&#45;Q+&#45;rjWydtD4qmd+HwJorED84tXv_hfMuu=fYxwnzMYQ@mail.gmail.com -->
<!--X-Reference: CAED9pY984Q51_r0CA8cffe+ppz2S&#45;ffDCU__HTP=sxgXHnLXoQ@mail.gmail.com -->
<!--X-Reference: 515C8D37.7020606@gmail.com -->
<!--X-Reference: 20130404164847.12132uee6g8te5zj@webmail.tu&#45;berlin.de -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [bug #20674] UnboundLocalError in consistency_tests.py -- April 04, 2013 - 17:11</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: [bug #20674] UnboundLocalError in consistency_tests.py</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00019" class="tabs">Index by Date</a> | <a href="threads.html#00019" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00018.html">Date Prev</a>] [<a href="msg00020.html">Date Next</a>] [<a href="msg00018.html">Thread Prev</a>] [<a href="msg00020.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: &quot;mengjun.xue@xxxxxxxxxxxxxxxxxxxx&quot; &lt;mengjun.xue@xxxxxxxxxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Thu, 4 Apr 2013 17:11:20 +0200</li>
<li class="menuitem">
<em>Cc</em>: &quot;relax-devel@xxxxxxx&quot; &lt;relax-devel@xxxxxxx&gt;,	Sébastien Morin &lt;sebastianomorino@xxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;	h=mime-version:x-received:sender:in-reply-to:references:date	:x-google-sender-auth:message-id:subject:from:to:cc:content-type	:content-transfer-encoding;	bh=1QJSKvFDNUlADgNM4WDCYecC7NS2fEPmAFDsElhUC/s=;	b=R4/Sq/C/f/Ht/MD7eGEQl1jS4yC1lzQKj4UHqE+JvJBkqn5t9z0DdtJQvn5UAdfA+J	PMH5tNpWaoID+Sbvns9dmtpWY5reS2w8Plf4wHoFocr5Z0AizfyL5cUjVVU/ufVXS9ik	GSWmm7m6KT0xTQRUNrOFI0UVxMfl9ewalJH3iF9LnHbnY02cJRbQtXeoEturiwbOiS6W	3Mm6ryU8R8gXkTcfWLm1tKODa8uCuMzeJrflSG+6nupyrte3Uec6qOr7bCmdMdkvIsXv	R+4It/wd8tA3xS8/qwLHVpMmX7H/VFaeKlhnfN4P/OYkP7KOoqtEY0LiHfzj3lIDS/oZ	2ZJQ==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00019.html">CAED9pY8zcu0LAPjcocG5xN=-H4mZ0d5nqUwjKyqJ0pmB7BQnNA@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;20130328-153752.sv0.83575@xxxxxxx&gt;	&lt;20130328-153921.sv0.90317@xxxxxxx&gt;	&lt;CAED9pY-Q+-rjWydtD4qmd+HwJorED84tXv_hfMuu=fYxwnzMYQ@xxxxxxxxxxxxxx&gt;	&lt;CAED9pY984Q51_r0CA8cffe+ppz2S-ffDCU__HTP=sxgXHnLXoQ@xxxxxxxxxxxxxx&gt;	&lt;515C8D37.7020606@xxxxxxxxx&gt;	&lt;20130404164847.12132uee6g8te5zj@xxxxxxxxxxxxxxxxxxxx&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on April 04, 2013 - 17:11:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Hi Mengjun,

All of your questions are answered by the literature behind this
analysis.  There are three key references as stated in chapter 2 of
the relax manual:

- Fushman, D., Tjandra, N., and Cowburn, D. (1999). An approach to
direct determination of protein dynamics from 15N NMR relaxation at
multiple fields, independent of variable 15N chemical shift anisotropy
and chemical exchange contributions. J. Am. Chem. Soc., 121(37),
8577–8582. (10.1021/ja9904991)

- Farrow, N. A., Zhang, O. W., Szabo, A., Torchia, D. A., and Kay, L.
E. (1995). Spectral density-function mapping using N-15 relaxation
data exclusively. J. Biomol. NMR, 6(2), 153–162. (10.1007/bf00211779)

- Fushman, D., Tjandra, N., and Cowburn, D. (1998). Direct measurement
of 15N chemical shift anisotropy in solution. J. Am. Chem. Soc.,
120(42), 10947–10952. (10.1021/ja981686m)

After reading these you should understand what is happening and why tc
is very important (you really should read the base literature for any
analysis you perform).  I am assuming you have read Sebastien's paper,
if not then you must follow the link
<a  rel="nofollow" href="http://dx.doi.org/10.1007/s10858-009-9381-4">http://dx.doi.org/10.1007/s10858-009-9381-4</a>.  And the value of 15.7 is
the angle you seek.  If you want to change this angle, then be sure
that you fully understand all of the contents of the 4 above
referenced papers.

Regards,

Edward


On 4 April 2013 16:48,  &lt;mengjun.xue@xxxxxxxxxxxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi,

Thank you very much for your email. One question about the
consistency_tests.py file, when using consistency_tests.py to extract J (0)
from one field strength data R1/R2/NOE, following parameter is needed to
set:

# Set the angle between the 15N-1H vector and the principal axis of the 15N
chemical shift tensor
value.set(val=15.7, param='orientation')

# Set the approximate correlation time.
value.set(val=13 * 1e-9, param='tc')

When using consistency_tests.py, how to set the angle between the 15N-1H
vector and the principal axis of the 15N chemical shift tensor ? perhaps,
val=15.7 ? And the correlation time is also needed to set, I am confused
about setting the global correlation time before a complete model free
analysis since the global correlation time can be extracted after the
complete model free analysis.

However, in jw_mapping.py, which can also be used to exctract J (0), no such
parameter is needed to set ?


Thank you.

With best regards,

Mengjun






Quoting Sébastien Morin &lt;sebastianomorino@xxxxxxxxx&gt;:

</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi,

Indeed, as Edward pointed, the consistency testing procedure involves two
steps, the first one being to load data from each magnetic field separately
and calculating the J(0) (or F_R2 or F_eta) values for each spin. The 
second
step, performed outside relax, is the comparison of the calculated values 
at
two magnetic fields (e.g. using correlation plots).

It is important that data (all of R1, R2, and NOE) from a single magnetic
field are loaded in order to calculate the J(0) (or F_R2 or F_eta) values.

In the best of world, someone could implement the calculation of the J(0)
(or F_R2 or F_eta) values at different fields and subsequent plotting and
consistency assessment all within relax and in a single step. That would be
a real enhancement compared to the current situation...  :)

I hope this helps.

Best,


Sébastien


On 13-03-28 8:07 PM, Edward d'Auvergne wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">

Hi again,

I was wondering if you have read the consistency testing part of the
relax manual written by Sebastien Morin (the person who implemented
this analysis).  Specifically this section:


<a  rel="nofollow" href="http://www.nmr-relax.com/manual/Consistency_testing_script_mode_relaxation_data_lo.html">http://www.nmr-relax.com/manual/Consistency_testing_script_mode_relaxation_data_lo.html</a>

Note the text, &quot;For this analysis, only data for a single field
strength can be loaded&quot;.  This may possibly be the source of some of
your problems.

Regards,

Edward



On 28 March 2013 20:02, Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">

Hi Mengjun,

Could you also attach the PDB file?  I need it to be able to run the
script and replicate the problem.

Cheers,

Edward



On 28 March 2013 16:39, anonymous &lt;NO-REPLY.INVALID-ADDRESS@xxxxxxx&gt;
wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">

Additional Item Attachment, bug #20674 (project relax):

File name: T1 dhp 700.txt                 Size:74 KB
File name: T2 dhp 500.txt                 Size:67 KB
File name: T2 dhp 700.txt                 Size:68 KB
File name: logconsistency                 Size:371 KB


    _______________________________________________________

Reply to this item at:

  &lt;<a  rel="nofollow" href="http://gna.org/bugs/?20674">http://gna.org/bugs/?20674</a>&gt;

_______________________________________________
  Message sent via/by Gna!
  <a  rel="nofollow" href="http://gna.org/">http://gna.org/</a>


_______________________________________________
relax (<a  rel="nofollow" href="http://www.nmr-relax.com">http://www.nmr-relax.com</a>)

This is the relax-devel mailing list
relax-devel@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="http://www.nmr-relax.com/mail.gna.org/listinfo/relax-devel">https://mail.gna.org/listinfo/relax-devel</a>
</pre></blockquote></blockquote><pre style="margin: 0em;">


</pre></blockquote><pre style="margin: 0em;">

--
Sébastien Morin, Ph.D.
1183 Bursins, Switzerland
---- sebastianomorino AT gmail.com ----



</pre></blockquote><pre style="margin: 0em;">




_______________________________________________
relax (<a  rel="nofollow" href="http://www.nmr-relax.com">http://www.nmr-relax.com</a>)

This is the relax-devel mailing list
relax-devel@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="http://www.nmr-relax.com/mail.gna.org/listinfo/relax-devel">https://mail.gna.org/listinfo/relax-devel</a>
</pre></blockquote><pre style="margin: 0em;">


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00020" href="msg00020.html">Re: [bug #20674] UnboundLocalError in consistency_tests.py</a></strong>
<ul><li><em>From:</em> mengjun . xue</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00016" href="msg00016.html">Re: [bug #20674] UnboundLocalError in consistency_tests.py</a></strong>
<ul><li><em>From:</em> Sébastien Morin</li></ul></li>
<li><strong><a name="00018" href="msg00018.html">Re: [bug #20674] UnboundLocalError in consistency_tests.py</a></strong>
<ul><li><em>From:</em> mengjun . xue</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Thu Apr 04 19:20:07 2013</div>  
</body>
</html>
