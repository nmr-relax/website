<!-- MHonArc v2.6.10 -->
<!--X-Subject: Re: r2768 &#45; /1.2/float.py -->
<!--X-From-R13: "Sqjneq q'Ohiretar" <rqjneq.qnhiretarNtznvy.pbz> -->
<!--X-Date: Wed, 08 Nov 2006 17:24:34 +0100 -->
<!--X-Message-Id: 7f080ed10611080824w6b474f7n2920301ae4a644dc@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: E1GhaCZ&#45;0002AR&#45;3q@subversion.gna.org -->
<!--X-Reference: 7f080ed10611072340n36309eaan74e420cf4742903b@mail.gmail.com -->
<!--X-Reference: 481156b20611080801s3b70f2b0q2a02d550fd81089b@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: r2768 - /1.2/float.py -- November 08, 2006 - 17:24</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: r2768 - /1.2/float.py</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00096" class="tabs">Index by Date</a> | <a href="threads.html#00096" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00095.html">Date Prev</a>] [<a href="msg00097.html">Date Next</a>] [<a href="msg00093.html">Thread Prev</a>] [<a href="msg00100.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: &quot;Alexandar Hansen&quot; &lt;viochemist@xxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Thu, 9 Nov 2006 03:24:28 +1100</li>
<li class="menuitem">
<em>Cc</em>: relax-devel@xxxxxxx</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00096.html">7f080ed10611080824w6b474f7n2920301ae4a644dc@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;E1GhaCZ-0002AR-3q@subversion.gna.org&gt;	&lt;<a href="msg00084.html">7f080ed10611072340n36309eaan74e420cf4742903b@mail.gmail.com</a>&gt;	&lt;<a href="msg00093.html">481156b20611080801s3b70f2b0q2a02d550fd81089b@mail.gmail.com</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on November 08, 2006 - 17:24:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Great.  Thank you Gary and Alex for helping to sort out this issue so
quickly!  I'll try to release version 1.2.9 tomorrow.  If you could
Alex, there's one more test I'll describe below which would be useful.</pre><br>
<pre style="margin: 0em;">As for the updating issue, this is known as a conflict.  They usually
occur when the code you are modifying is modified in the repository by
someone else.  In this case however, you are essentially applying the
change twice to the same piece of code (hence subversion freaked out).
These are pretty easy to fix up though.  First type 'svn st' to see
the status of your code (typing 'scons clean' first will make you life
easier).  You'll see a number of additional files which are all the
different versions of the conflicting file (yours, the repositories,
etc.).  Then you modify the file to resolve the conflict by removing
the '&gt;&gt;&gt;&gt;&gt;&gt;&gt; ', '=======', '&lt;&lt;&lt;&lt;&lt;&lt;&lt;' lines and making sure that the
code in the middle is correctly merged.  The final thing is to tell
subversion that the issue is resolved.  In this case you type 'svn
resolved float.py'.  Then type 'svn st' to see the status.</pre><br>
<pre style="margin: 0em;">If the final status ('svn st') has a big 'M' infront of 'float.py',
then the code will not be exactly what is in the repository.  If you
type 'svn revert float.py' followed by 'svn up', you'll have the
correct copy of the code.  The 'svn revert' command will undo all your
changes.  Alex, would you be able to, after fixing up your code, rerun
the test and see if it still works?</pre><br>
<pre style="margin: 0em;">Thanks,</pre><br>
<pre style="margin: 0em;">Edward</pre><br>
<pre style="margin: 0em;"><br></pre><br>
<pre style="margin: 0em;"><br></pre><br>
<tt>On 11/9/06, Alexandar Hansen &lt;viochemist@xxxxxxxxx&gt; wrote:
</tt><blockquote class="blockquote"><pre style="margin: 0em;">I copy-pasted Gary's code yesterday and it worked fine.  One word of warning
(and probably everyone already knows this) but when I svn up-ed to check the
real code, it surrounded the code I copied to float.py with:</pre><br>
<pre style="margin: 0em;"> &gt;&gt;&gt;&gt;&gt;&gt;&gt; .mine</pre><br>
<pre style="margin: 0em;">[the copied code]</pre><br>
<pre style="margin: 0em;">=============</pre><br>
<pre style="margin: 0em;">then it placed the new code, containing the line:</pre><br>
<pre style="margin: 0em;">&gt;&gt;&gt;&gt;&gt;&gt;&gt; .r2774</pre><br>
<pre style="margin: 0em;">Without deleting these lines, I get a &quot;Invalid syntax&quot; errors.  Once I
deleted them all, it worked fine.</pre><br>
<pre style="margin: 0em;">Alex</pre><br>
<pre style="margin: 0em;"><br>On 11/8/06, Edward d'Auvergne &lt;edward.dauvergne@xxxxxxxxx&gt; wrote:
&gt;
&gt; Thank you Gary for the quick response and fix to bug #7641
&gt; (<a  href="http://gna.org/bugs/?7641">http://gna.org/bugs/?7641</a>).  Alex, now that Gary has ported the fix
&gt; from the 1.2 line into 1.3 line (as well as the 'test_suite' branch),
&gt; would you be able to confirm that the bug has been resolved?  There
&gt; should no longer be a RelaxError about an infinite chi-squared value
&gt; on your data when running the 1.3 line repository code.  Once
&gt; confirmed, I'll release relax 1.2.9.
&gt;
&gt; Thanks,
&gt;
&gt; Edward
&gt;
&gt;
&gt;
&gt; On 11/8/06, garyt@xxxxxxxxxxxxxxx &lt;garyt@xxxxxxxxxxxxxxx&gt; wrote:
&gt; &gt; Author: varioustoxins
&gt; &gt; Date: Wed Nov  8 00:17:53 2006
&gt; &gt; New Revision: 2768
&gt; &gt;
&gt; &gt; URL: <a  href="http://svn.gna.org/viewcvs/relax?rev=2768&amp;view=rev">http://svn.gna.org/viewcvs/relax?rev=2768&amp;view=rev</a>
&gt; &gt; Log:
&gt; &gt; fixed bug 7641 Infinite Chi2 warning
&gt; &gt;
&gt; &gt; bug #7641 <a  href="http://gna.org/bugs/?7641">http://gna.org/bugs/?7641</a>
&gt; &gt;
<a  href="https://mail.gna.org/public/relax-devel/2006-11/msg00078.html">https://mail.gna.org/public/relax-devel/2006-11/msg00078.html</a>
&gt; &gt;
&gt; &gt; Modified:
&gt; &gt;     1.2/float.py
&gt; &gt;
&gt; &gt; Modified: 1.2/float.py
&gt; &gt; URL:
<a  href="http://svn.gna.org/viewcvs/relax/1.2/float.py?rev=2768&amp;r1=2767&amp;r2=2768&amp;view=diff">http://svn.gna.org/viewcvs/relax/1.2/float.py?rev=2768&amp;r1=2767&amp;r2=2768&amp;view=diff</a>
&gt; &gt;
==============================================================================
&gt; &gt; --- 1.2/float.py (original)
&gt; &gt; +++ 1.2/float.py Wed Nov  8 00:17:53 2006
&gt; &gt; @@ -154,7 +154,7 @@
&gt; &gt;      if isFinite(float):
&gt; &gt;           # check and store is positive
&gt; &gt;           positive = isPositive(float)
&gt; &gt; -         if isZero():
&gt; &gt; +         if isZero(float):
&gt; &gt;              if positive:
&gt; &gt;                  result = CLASS_POS_ZERO
&gt; &gt;              else:
&gt; &gt; @@ -178,7 +178,7 @@
&gt; &gt;              result  = CLASS_POS_INF
&gt; &gt;          elif isNegInf(float):
&gt; &gt;              result  = CLASS_NEG_INF
&gt; &gt; -
&gt; &gt; +    return result
&gt; &gt;
&gt; &gt;
&gt; &gt;  def packBytesAsPyFloat(bytes):
&gt; &gt; @@ -612,16 +612,19 @@
&gt; &gt;      # if exponent is not all ones this can't be a Inf
&gt; &gt;      if not isExpAllOnes(obj):
&gt; &gt;          result =  False
&gt; &gt; -
&gt; &gt; -    # get the mantissa as a byte array properly masked
&gt; &gt; -    manBytes = getMantissaBytes(obj)
&gt; &gt; -
&gt; &gt; -    for byte in manBytes:
&gt; &gt; -        #check if any of the unmasked mantissa bytes are zero
&gt; &gt; -        # to be a NaN the mantissa must be zero
&gt; &gt; -        if byte &gt; 0:
&gt; &gt; -            return False
&gt; &gt; -    return True
&gt; &gt; +    else:
&gt; &gt; +        # get the mantissa as a byte array properly masked
&gt; &gt; +        manBytes = getMantissaBytes(obj)
&gt; &gt; +
&gt; &gt; +        for byte in manBytes:
&gt; &gt; +            #check if any of the unmasked mantissa bytes are zero
&gt; &gt; +            # to be a NaN the mantissa must be zero
&gt; &gt; +            if byte &gt; 0:
&gt; &gt; +                result = False
&gt; &gt; +                break
&gt; &gt; +            result = True
&gt; &gt; +
&gt; &gt; +    return result
&gt; &gt;
&gt; &gt;  def isPosInf(obj):
&gt; &gt;      ''' check to see if a python float is positive infinity
&gt; &gt;
&gt; &gt;
&gt; &gt; _______________________________________________
&gt; &gt; relax (<a  href="http://nmr-relax.com">http://nmr-relax.com</a>)
&gt; &gt;
&gt; &gt; This is the relax-commits mailing list
&gt; &gt; relax-commits@xxxxxxx
&gt; &gt;
&gt; &gt; To unsubscribe from this list, get a password
&gt; &gt; reminder, or change your subscription options,
&gt; &gt; visit the list information page at
&gt; &gt; <a  href="https://mail.gna.org/listinfo/relax-commits">https://mail.gna.org/listinfo/relax-commits</a>
&gt; &gt;
&gt;
&gt; _______________________________________________
&gt; relax (<a  href="http://nmr-relax.com">http://nmr-relax.com</a>)
&gt;
&gt; This is the relax-devel mailing list
&gt; relax-devel@xxxxxxx
&gt;
&gt; To unsubscribe from this list, get a password
&gt; reminder, or change your subscription options,
&gt; visit the list information page at
&gt; <a  href="https://mail.gna.org/listinfo/relax-devel">https://mail.gna.org/listinfo/relax-devel</a>
&gt;</pre><br>
<br>
</blockquote><pre style="margin: 0em;"><br></pre><br>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00100" href="msg00100.html">Re: r2768 - /1.2/float.py</a></strong>
<ul><li><em>From:</em> Alexandar Hansen</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00084" href="msg00084.html">Re: r2768 - /1.2/float.py</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00093" href="msg00093.html">Re: r2768 - /1.2/float.py</a></strong>
<ul><li><em>From:</em> Alexandar Hansen</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Wed Nov 08 17:40:16 2006</div>  
</body>
</html>
