<?xml version="1.0" encoding="ascii"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>maths_fns.rotation_matrix</title>
  <link rel="stylesheet" href="epydoc.css" type="text/css" />
  <script type="text/javascript" src="epydoc.js"></script>
</head>

<body bgcolor="white" text="black" link="blue" vlink="#204080"
      alink="#204080">
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            ><a class="navbar" target="_top" href="http://nmr-relax.com">relax</a></th>
          </tr></table></th>
  </tr>
</table>
<table width="100%" cellpadding="0" cellspacing="0">
  <tr valign="top">
    <td width="100%">
      <span class="breadcrumbs">
        <a href="maths_fns-module.html">Package&nbsp;maths_fns</a> ::
        Module&nbsp;rotation_matrix
      </span>
    </td>
    <td>
      <table cellpadding="0" cellspacing="0">
        <!-- hide/show private -->
        <tr><td align="right"><span class="options">[<a href="javascript:void(0);" class="privatelink"
    onclick="toggle_private();">hide&nbsp;private</a>]</span></td></tr>
        <tr><td align="right"><span class="options"
            >[<a href="frames.html" target="_top">frames</a
            >]&nbsp;|&nbsp;<a href="maths_fns.rotation_matrix-module.html"
            target="_top">no&nbsp;frames</a>]</span></td></tr>
      </table>
    </td>
  </tr>
</table>
<!-- ==================== MODULE DESCRIPTION ==================== -->
<h1 class="epydoc">Module rotation_matrix</h1><p class="nomargin-top"><span class="codelink"><a href="maths_fns.rotation_matrix-pysrc.html">source&nbsp;code</a></span></p>
<!-- ==================== FUNCTIONS ==================== -->
<a name="section-Functions"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Functions</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-Functions"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="maths_fns.rotation_matrix-module.html#R_2vect" class="summary-sig-name">R_2vect</a>(<span class="summary-sig-arg">R</span>,
        <span class="summary-sig-arg">vector_orig</span>,
        <span class="summary-sig-arg">vector_fin</span>)</span><br />
      Calculate the rotation matrix required to rotate from one vector to another.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="maths_fns.rotation_matrix-pysrc.html#R_2vect">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="maths_fns.rotation_matrix-module.html#R_euler_zyz" class="summary-sig-name">R_euler_zyz</a>(<span class="summary-sig-arg">matrix</span>,
        <span class="summary-sig-arg">alpha</span>,
        <span class="summary-sig-arg">beta</span>,
        <span class="summary-sig-arg">gamma</span>)</span><br />
      Function for calculating the z-y-z Euler angle convention rotation matrix.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="maths_fns.rotation_matrix-pysrc.html#R_euler_zyz">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
</table>
<p class="indent-wrapped-lines"><b>Imports:</b>
  <span title="numpy.cross">cross</span>,
  <span title="numpy.dot">dot</span>,
  <span title="numpy.linalg.norm">norm</span>,
  <span title="math.acos">acos</span>,
  <span title="math.cos">cos</span>,
  <span title="math.sin">sin</span>
</p><br />
<!-- ==================== FUNCTION DETAILS ==================== -->
<a name="section-FunctionDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Function Details</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-FunctionDetails"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
</table>
<a name="R_2vect"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">R_2vect</span>(<span class="sig-arg">R</span>,
        <span class="sig-arg">vector_orig</span>,
        <span class="sig-arg">vector_fin</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="maths_fns.rotation_matrix-pysrc.html#R_2vect">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">
Calculate the rotation matrix required to rotate from one vector to another.

For the rotation of one vector to another, there are an infinit series of rotation matrices
possible.  Due to axially symmetry, the rotation axis can be any vector lying in the symmetry
plane between the two vectors.  Hence the axis-angle convention will be used to construct the
matrix with the rotation axis defined as the cross product of the two vectors.  The rotation
angle is the arccosine of the dot product of the two unit vectors.

Given a unit vector parallel to the rotation axis, w = [x, y, z] and the rotation angle a,
the rotation matrix R is:

          |  1 + (1-cos(a))*(x*x-1)   -z*sin(a)+(1-cos(a))*x*y   y*sin(a)+(1-cos(a))*x*z |
    R  =  |  z*sin(a)+(1-cos(a))*x*y   1 + (1-cos(a))*(y*y-1)   -x*sin(a)+(1-cos(a))*y*z |
          | -y*sin(a)+(1-cos(a))*x*z   x*sin(a)+(1-cos(a))*y*z   1 + (1-cos(a))*(z*z-1)  |

@param R:           The 3x3 rotation matrix to update.
@type R:            3x3 numpy array
@param vector_orig: The unrotated vector defined in the reference frame.
@type vector_orig:  numpy array, len 3
@param vector_fin:  The rotated vector defined in the reference frame.
@type vector_fin:   numpy array, len 3

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="R_euler_zyz"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">R_euler_zyz</span>(<span class="sig-arg">matrix</span>,
        <span class="sig-arg">alpha</span>,
        <span class="sig-arg">beta</span>,
        <span class="sig-arg">gamma</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="maths_fns.rotation_matrix-pysrc.html#R_euler_zyz">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">
Function for calculating the z-y-z Euler angle convention rotation matrix.

Unit vectors
============

The unit mux vector is

            | -sin(alpha) * sin(gamma) + cos(alpha) * cos(beta) * cos(gamma) |
    mux  =  | -sin(alpha) * cos(gamma) - cos(alpha) * cos(beta) * sin(gamma) |.
            |                    cos(alpha) * sin(beta)                      |

The unit muy vector is

            | cos(alpha) * sin(gamma) + sin(alpha) * cos(beta) * cos(gamma) |
    muy  =  | cos(alpha) * cos(gamma) - sin(alpha) * cos(beta) * sin(gamma) |.
            |                   sin(alpha) * sin(beta)                      |

The unit muz vector is

            | -sin(beta) * cos(gamma) |
    muz  =  |  sin(beta) * sin(gamma) |.
            |        cos(beta)        |

Rotation matrix
===============

The rotation matrix is defined as the vector of unit vectors

    R = [mux, muy, muz].


@param matrix:  The 3x3 rotation matrix to update.
@type matrix:   3x3 numpy array
@param alpha:   The alpha Euler angle in rad.
@type alpha:    float
@param beta:    The beta Euler angle in rad.
@type beta:     float
@param gamma:   The gamma Euler angle in rad.
@type gamma:    float

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<br />
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            ><a class="navbar" target="_top" href="http://nmr-relax.com">relax</a></th>
          </tr></table></th>
  </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%%">
  <tr>
    <td align="left" class="footer">
    Generated by Epydoc 3.0.1 on Mon Sep 29 14:11:10 2008
    </td>
    <td align="right" class="footer">
      <a target="mainFrame" href="http://epydoc.sourceforge.net"
        >http://epydoc.sourceforge.net</a>
    </td>
  </tr>
</table>

<script type="text/javascript">
  <!--
  // Private objects are initially displayed (because if
  // javascript is turned off then we want them to be
  // visible); but by default, we want to hide them.  So hide
  // them unless we have a cookie that says to show them.
  checkCookie();
  // -->
</script>
</body>
</html>
