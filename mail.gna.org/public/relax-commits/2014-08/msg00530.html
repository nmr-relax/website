<!-- MHonArc v2.6.18 -->
<!--X-Subject: r25396 &#45; /trunk/test_suite/system_tests/relax_disp.py -->
<!--X-From-R13: gyvaargNaze&#45;erynk.pbz -->
<!--X-Date: Thu, 28 Aug 2014 17:32:02 +0200 -->
<!--X-Message-Id: E1XN1g9&#45;0007Je&#45;Tz@subversion.gna.org -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>r25396 - /trunk/test_suite/system_tests/relax_disp.py -- August 28, 2014 - 17:32</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />r25396 - /trunk/test_suite/system_tests/relax_disp.py</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00530" class="tabs">Index by Date</a> | <a href="threads.html#00530" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00529.html">Date Prev</a>] [<a href="msg00531.html">Date Next</a>] [<a href="msg00529.html">Thread Prev</a>] [<a href="msg00531.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: relax-commits@xxxxxxx</li>
<li class="menuitem">
<em>Date</em>: Thu, 28 Aug 2014 15:32:01 -0000</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00530.html">E1XN1g9-0007Je-Tz@subversion.gna.org</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>tlinnet</strong> on August 28, 2014 - 17:32:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Author: tlinnet
Date: Thu Aug 28 17:32:01 2014
New Revision: 25396

URL: <a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax?rev=25396&amp;view=rev">http://svn.gna.org/viewcvs/relax?rev=25396&amp;view=rev</a>
Log:
Modified systemtest Relax_disp.verify_estimate_r2eff_err_compare_mc, to try 
the difference between the Jacobian.

The results are:

Printing the estimated R2eff error as function of estimation from Co-variance 
and number of Monte-Carlo simulations.
      -2 0.069 0.081 0.085 0.092 0.085 0.074 0.083 0.069 0.066 0.074 0.025 
0.035 0.018 0.016 sum= 0.874
      -1 0.052 0.023 0.034 0.021 0.020 0.041 0.030 0.028 0.011 0.163 0.048 
0.012 0.009 0.010 sum= 0.502
       0 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 
0.000 0.000 0.000 sum= 0.000
      10 0.044 0.043 0.044 0.049 0.053 0.027 0.048 0.043 0.032 0.038 0.016 
0.014 0.013 0.009 sum= 0.473
      20 0.038 0.044 0.051 0.050 0.049 0.040 0.046 0.035 0.037 0.034 0.015 
0.020 0.009 0.008 sum= 0.475
      30 0.029 0.050 0.050 0.054 0.041 0.040 0.030 0.041 0.024 0.038 0.015 
0.012 0.009 0.008 sum= 0.441
      40 0.031 0.041 0.043 0.044 0.046 0.039 0.040 0.036 0.032 0.036 0.014 
0.020 0.008 0.009 sum= 0.439

  0.9 ++------+------+-------+-------+------+-------+-------+------+------++
      +    A  +      +       + R2eff error as function of MC number+**A*** +
  0.8 ++   *                                                              ++
      |    *                                                               |
  0.7 ++   *                                                              ++
      |     *                                                              |
  0.6 ++    *                                                             ++
      |     *                                                              |
  0.5 ++    A                                                             ++
      |     *                A**************A***************               |
      |     *              **                               A**************A
  0.4 ++     *            *                                               ++
      |      *          **                                                 |
  0.3 ++     *         *                                                  ++
      |      *       **                                                    |
  0.2 ++     *      *                                                     ++
      |      *    **                                                       |
  0.1 ++      *  *                                                        ++
      +       ***    +       +       +      +       +       +      +       +
    0 ++------A------+-------+-------+------+-------+-------+------+------++
     -5       0      5       10      15     20      25      30     35      40

task #7822(<a  rel="nofollow" href="https://web.archive.org/web/https://gna.org/task/index.php?7822">https://gna.org/task/index.php?7822</a>): Implement user function to 
estimate R2eff and associated errors for exponential curve fitting.

Modified:
    trunk/test_suite/system_tests/relax_disp.py

Modified: trunk/test_suite/system_tests/relax_disp.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/trunk/test_suite/system_tests/relax_disp.py?rev=25396&amp;r1=25395&amp;r2=25396&amp;view=diff">http://svn.gna.org/viewcvs/relax/trunk/test_suite/system_tests/relax_disp.py?rev=25396&amp;r1=25395&amp;r2=25396&amp;view=diff</a>
==============================================================================
--- trunk/test_suite/system_tests/relax_disp.py (original)
+++ trunk/test_suite/system_tests/relax_disp.py Thu Aug 28 17:32:01 2014
@@ -7635,7 +7635,7 @@
         my_dic = {}
         param_key_list = []
         est_keys = []
-        est_key = '-1'
+        est_key = '-2'
         est_keys.append(est_key)
         spin_id_list = []
 
@@ -7674,8 +7674,38 @@
                     my_dic[spin_id][est_key][param_key][err_attr] = 
get_err_attr
 
 
+        # Estimate R2eff errors from Chi2 Jacobian.
+        self.interpreter.relax_disp.r2eff_err_estimate(chi2_jacobian=True)
+
+        est_key = '-1'
+        est_keys.append(est_key)
+
+        # Collect data.
+        for cur_spin, mol_name, resi, resn, spin_id in 
spin_loop(full_info=True, return_id=True, skip_desel=True):
+            # Add key for estimate.
+            my_dic[spin_id][est_key] = {}
+
+            for exp_type, frq, offset, point, ei, mi, oi, di in 
loop_exp_frq_offset_point(return_indices=True):
+                # Generate the param_key.
+                param_key = return_param_key_from_data(exp_type=exp_type, 
frq=frq, offset=offset, point=point)
+
+                # Add key to dic.
+                my_dic[spin_id][est_key][param_key] = {}
+
+                # Get the value.
+                # Loop over err attributes.
+                for err_attr in err_attr_list:
+                    if hasattr(cur_spin, err_attr):
+                        get_err_attr = getattr(cur_spin, err_attr)[param_key]
+                    else:
+                        get_err_attr = 0.0
+
+                    # Save to dic.
+                    my_dic[spin_id][est_key][param_key][err_attr] = 
get_err_attr
+
+
         # Make Carlo Simulations number
-        mc_number_list = range(0, 500, 50)
+        mc_number_list = range(0, 50, 10)
 
         sim_attr_list = ['chi2_sim', 'f_count_sim', 'g_count_sim', 
'h_count_sim', 'i0_sim', 'iter_sim', 'peak_intensity_sim', 'r2eff_sim', 
'select_sim', 'warning_sim']
 



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Thu Aug 28 17:40:02 2014</div>  
</body>
</html>
