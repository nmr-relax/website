<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: first time doing model free -->
<!--X-From-R13: "Sqjneq q'Ohiretar" <rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Fri, 11 May 2012 10:15:53 +0200 -->
<!--X-Message-Id: CAED9pY&#45;9A7Vvo1xzbb8kPge_gYEvBY&#45;&#45;zHAEj=6TX8uETvk&#45;jA@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 4FAB01E2.2030909@uhnresearch.ca -->
<!--X-Reference: CAED9pY&#45;gtfP__28VpkKgGgRVPAST0S0_Q+Hi94Zre0N=NfVLWg@mail.gmail.com -->
<!--X-Reference: CAED9pY9K3SL2F5jZjnivy7oapRuFBQ2cv8&#45;qePWASpUaiWHrmQ@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: first time doing model free -- May 11, 2012 - 10:15</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: first time doing model free</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00009" class="tabs">Index by Date</a> | <a href="threads.html#00009" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00008.html">Date Prev</a>] [<a href="msg00010.html">Date Next</a>] [<a href="msg00007.html">Thread Prev</a>] [<a href="msg00005.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Fernando Amador &lt;Fernando.Amador@xxxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Fri, 11 May 2012 10:15:21 +0200</li>
<li class="menuitem">
<em>Cc</em>: relax-users@xxxxxxx</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;	h=mime-version:sender:in-reply-to:references:date	:x-google-sender-auth:message-id:subject:from:to:cc:content-type	:content-transfer-encoding;	bh=H1llHsgiuXJVGlkdi9jfZiqSNGpvlKddVqXsHj2z4fU=;	b=GbteZEncxnMQJSv7kdsWwEpiKPvu9jzyVohQ6ojZQ5x2dL6/kOiEdC9lJZhfJYUJLO	usj/jdg0xBn4Fgc2lvYaQYBJ0Vq6qJRiP0Yl43Xib6JEJaKDf2880wwTFF2AarKTKjkl	BoWKrr0Y1rEl4NXy+JzHwBExLSafLZIh1m0tpgGSBenia7pshSKV/ISy53PRNj4wuZ8P	38HJn0o0vHx4bfiZ4YDfA/H9MzdPA1dlweBBm7/15AFDfUTC9fyTZpga7LHxbjObcFap	msoidktiGTuXRx06nL33YV/FbxwmZhCdTW3r55fGcYXzsTx3HB7jlHmLa5a3t8U3+Q6Q	djwA==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00009.html">CAED9pY-9A7Vvo1xzbb8kPge_gYEvBY--zHAEj=6TX8uETvk-jA@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;4FAB01E2.2030909@xxxxxxxxxxxxxx&gt;	&lt;CAED9pY-gtfP__28VpkKgGgRVPAST0S0_Q+Hi94Zre0N=NfVLWg@xxxxxxxxxxxxxx&gt;	&lt;CAED9pY9K3SL2F5jZjnivy7oapRuFBQ2cv8-qePWASpUaiWHrmQ@xxxxxxxxxxxxxx&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on May 11, 2012 - 10:15:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Hi,

I just realised another problem - the changes to the relax manual
which complete the model-free chapter have not been released yet.  It
is located in the main 1.3 line in the relax subversion repository.  I
will hopefully release relax version 1.3.16 soon so that you can have
access to this information.

Regards,

Edward


On 11 May 2012 09:39, Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi Fernando,

Sorry, I forgot to directly answer your question.  You can use relax
to analyse single field strength data.  relax will not only do
everything that Modelfree4, Dasha, and Tensor2 will do, but a lot
more.  Note that these other programs have not been developed since
the turn of the millennium, they are now quite old, and you will still
need to read all of details in my previous mail to understand how to
use these older programs iteratively to implement a full analysis.

Regards,

Edward



On 11 May 2012 09:34, Edward d'Auvergne &lt;edward.dauvergne@xxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi Fernando,

Welcome to the relax mailing lists!  Before I get into the error you
have encountered, I have noticed that the analysis you have performed
is far from complete.  I will first detail the long list of things you
will need to do to reimplement a full analysis using single field
strength data, and all of the reading and learning you will have to do
to be capable and competent enough to know when things go wrong in the
analysis, and then you might see that measuring data at a second field
strength will actually be simpler for you ;)  In any case, to have a
good understanding of the concepts, implementation and pitfalls of a
model-free analysis, you will be required to do a lot of reading (see
<a  rel="nofollow" href="http://www.nmr-relax.com/refs.html">http://www.nmr-relax.com/refs.html</a> for a few references, with links).
You will know you are doing the right thing when your full set of
calculations takes 1-2 weeks to complete!

Firstly, I would recommend you read my previous responses to questions
relating to single field strength data, and look the other messages in
those threads.  You will find these discussions quite informative and
highly detailed:

- Shantanu Bhattacharyya:
<a  rel="nofollow" href="http://www.mail-archive.com/relax-users@xxxxxxx/msg00940.html">http://www.mail-archive.com/relax-users@xxxxxxx/msg00940.html</a>
- Dhanasekaran Muthu:
<a  rel="nofollow" href="http://www.mail-archive.com/relax-users@xxxxxxx/msg01005.html">http://www.mail-archive.com/relax-users@xxxxxxx/msg01005.html</a>
- Aldino Viegas:  
<a  rel="nofollow" href="http://www.mail-archive.com/relax-users@xxxxxxx/msg00981.html">http://www.mail-archive.com/relax-users@xxxxxxx/msg00981.html</a>
- Pierre-Yves Savard:
<a  rel="nofollow" href="http://www.mail-archive.com/relax-users@xxxxxxx/msg00584.html">http://www.mail-archive.com/relax-users@xxxxxxx/msg00584.html</a>
- Keith Constantine:
<a  rel="nofollow" href="http://www.mail-archive.com/relax-users@xxxxxxx/msg00379.html">http://www.mail-archive.com/relax-users@xxxxxxx/msg00379.html</a>
- Clare-Louise Evans:
<a  rel="nofollow" href="http://www.mail-archive.com/relax-users@xxxxxxx/msg00196.html">http://www.mail-archive.com/relax-users@xxxxxxx/msg00196.html</a>
- Hongyan Li:  
<a  rel="nofollow" href="http://www.mail-archive.com/relax-devel@xxxxxxx/msg00644.html">http://www.mail-archive.com/relax-devel@xxxxxxx/msg00644.html</a>
- Vitaly Vostrikov:
<a  rel="nofollow" href="http://www.mail-archive.com/relax-users@xxxxxxx/msg01002.html">http://www.mail-archive.com/relax-users@xxxxxxx/msg01002.html</a>


I think that covers it.  There might be a little bit of irrelevant
information in there for you, but most of it will be exactly what you
need.  For information about the implementation that you will need to
self-assemble for single field strength data, see:

- Maddy Strickland:
<a  rel="nofollow" href="http://www.mail-archive.com/relax-users@xxxxxxx/msg00772.html">http://www.mail-archive.com/relax-users@xxxxxxx/msg00772.html</a>


As for using single field strength data, you will need to reimplement
a full analysis protocol.  With the model-free.py sample script, you
have only optimised the model-free parameters for a single model for
all spin systems in your system.  However this is far from complete.
You will need to optimise for all model-free models (m0 to m5,
<a  rel="nofollow" href="http://www.nmr-relax.com/manual/model_free_models.html">http://www.nmr-relax.com/manual/model_free_models.html</a>).  This is done
by the mf_multimodel.py sample script.  After this you will need to
perform model elimination, then model selection using AIC, and then
optimise the global diffusion tensor.  This this needs to be done
iteratively, and this can take up to 15 iterations, see:

d'Auvergne, E. J. and Gooley, P. R. (2008). Optimisation of NMR
dynamic models I. Minimisation algorithms and their performance within
the model-free and Brownian rotational diffusion spaces. J. Biomol.
NMR, 40(2), 107-119. (<a  rel="nofollow" href="http://dx.doi.org/10.1007/s10858-007-9214-2">http://dx.doi.org/10.1007/s10858-007-9214-2</a>).


You will then have to do this separately for all diffusion tensors
(spherical, prolate spheroid, oblate spheroid, and ellipsoid).  Note
that you will have the problem of the initial diffusion tensor
estimate, and you will need to know how and when this fails:

d'Auvergne E. J., Gooley P. R. (2007). Set theory formulation of the
model-free problem and the diffusion seeded model-free paradigm. Mol.
Biosyst., 3(7), 483-494. (<a  rel="nofollow" href="http://dx.doi.org/10.1039/b702202f">http://dx.doi.org/10.1039/b702202f</a>)

d'Auvergne, E. J. and Gooley, P. R. (2008). Optimisation of NMR
dynamic models II. A new methodology for the dual optimisation of the
model-free parameters and the Brownian rotational diffusion tensor. J.
Biomol. NMR, 40(2), 121-133.
(<a  rel="nofollow" href="http://dx.doi.org/10.1007/s10858-007-9213-3">http://dx.doi.org/10.1007/s10858-007-9213-3</a>)


Another good reference which contains everything you'll ever need is
my PhD thesis:

d'Auvergne, E. J. (2006). Protein dynamics: a study of the model-free
analysis of NMR relaxation data. Ph.D. thesis, Biochemistry and
Molecular Biology, University of Melbourne. (abstract -
<a  rel="nofollow" href="http://eprints.infodiv.unimelb.edu.au/archive/00002799/">http://eprints.infodiv.unimelb.edu.au/archive/00002799/</a>, PDF -
<a  rel="nofollow" href="http://eprints.infodiv.unimelb.edu.au/archive/00002799/01/thesis.pdf">http://eprints.infodiv.unimelb.edu.au/archive/00002799/01/thesis.pdf</a>,
and my book form -
<a  rel="nofollow" href="http://www.amazon.com/Protein-Dynamics-Model-free-Analysis-Relaxation/dp/3639057627">http://www.amazon.com/Protein-Dynamics-Model-free-Analysis-Relaxation/dp/3639057627</a>)


For implementing a single field strength analysis, i.e. reverting back
to how analyses were performed and published almost 2 decades ago, I
would recommend a recent copy of the relax user manual
(<a  rel="nofollow" href="http://www.nmr-relax.com/manual/index.html">http://www.nmr-relax.com/manual/index.html</a>) where I have completed
the model-free analysis chapter
(<a  rel="nofollow" href="http://www.nmr-relax.com/manual/Model_free_analysis.html">http://www.nmr-relax.com/manual/Model_free_analysis.html</a>).  The
section titled 'The diffusion seeded paradigm' has a figure which
details the iterative implementation that you will have to write into
a script.  There are full details about this in my PhD thesis if this
is not enough.

I would also recommend you be very careful with temperature control
and you look at Sebastien Morin's relaxation data consistency testing
built into relax.  If you do not have temperature control (either via
single scan interleaving or off-field temperature compensation pulses
at the start, or both together) as well as per-experiment temperature
calibration (running a shorted experiment on a MeOH or equivalent
sample and seeing what the chemical shift and hence temperature is
during an experiment), then with single field strength data you will
fall into all of the traps of artificial nanosecond and millisecond
motions.

So maybe after reading about all of this, collecting data at a second
field strength would really be easier ;)

Regards,

Edward


P. S.  The error you encountered is because the calculation you ran
was not a full analysis - rather only a very tiny shard of a massive
analysis.  The extraction script from Michael Bieri will only operate
on the final results of a full analysis.  But note that it too
requires an analysis using data at minimally two field strengths.



On 10 May 2012 01:46, Fernando Amador &lt;Fernando.Amador@xxxxxxxxxxxxxx&gt; 
wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi,

I wanted to use relax to do some model-free analysis, unfortunately I do 
not
have data from multiple fields.  Can I still use relax for model free
analysis?  In most of the scripts I read it says data from multiple fields
is required and the gui version won't even let me run the script without
data from multiple fields.  I figured I would still give it a shot so I
generated R1, R2 and steady state NOE output files using the relax gui and
then modified the model-free.py script by commenting out the lines for the
second field strength.  The script runs without problems from the prompt 
and
it generates a results.bz2 file.  I tried to run the
final_data_extraction.py script but I get this error

relax&gt; pipe.create(pipe_name='Data_extraction', pipe_type='mf')
relax&gt; results.read(file='results', dir=None)
Opening the file 'results.bz2' for reading.
Traceback (most recent call last):
File &quot;/sw/bin/relax&quot;, line 381, in &lt;module&gt;
Relax()
File &quot;/sw/bin/relax&quot;, line 117, in __init__
self.interpreter.run(self.script_file)
File &quot;/sw/lib/relax-py27/prompt/interpreter.py&quot;, line 294, in run
return run_script(intro=self.__intro_string, local=locals(),
script_file=script_file, quit=self.__quit_flag,
show_script=self.__show_script, 
raise_relax_error=self.__raise_relax_error)
File &quot;/sw/lib/relax-py27/prompt/interpreter.py&quot;, line 597, in run_script
return console.interact(intro, local, script_file, quit,
show_script=show_script, raise_relax_error=raise_relax_error)
File &quot;/sw/lib/relax-py27/prompt/interpreter.py&quot;, line 483, in
interact_script
exec_script(script_file, local)
File &quot;/sw/lib/relax-py27/prompt/interpreter.py&quot;, line 376, in exec_script
runpy.run_module(module, globals)
File &quot;/sw/lib/python2.7/runpy.py&quot;, line 180, in run_module
fname, loader, pkg_name)
File &quot;/sw/lib/python2.7/runpy.py&quot;, line 72, in _run_code
exec code in run_globals
File &quot;/Users/Joe/NMR/relax/m4/final_data_extraction.py&quot;, line 36, in
&lt;module&gt;
spin_no = spin_id[spin_id.index(':')+1:spin_id.index('&amp;')]
ValueError: substring not found

I don't know if my initial model-free.py script worked.  If it did, I 
would
like to look at the data.  If relax can't analyze single field data, are
there any other programs that you would recommend.  Any help would be
appreciated.


Thanks,

Fernando


_______________________________________________
relax (<a  rel="nofollow" href="http://www.nmr-relax.com">http://www.nmr-relax.com</a>)

This is the relax-users mailing list
relax-users@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="http://www.nmr-relax.com/mail.gna.org/listinfo/relax-users">https://mail.gna.org/listinfo/relax-users</a>
</pre></blockquote></blockquote></blockquote><pre style="margin: 0em;">


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00004" href="msg00004.html">first time doing model free</a></strong>
<ul><li><em>From:</em> Fernando Amador</li></ul></li>
<li><strong><a name="00006" href="msg00006.html">Re: first time doing model free</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00007" href="msg00007.html">Re: first time doing model free</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Fri May 11 20:00:06 2012</div>  
</body>
</html>
