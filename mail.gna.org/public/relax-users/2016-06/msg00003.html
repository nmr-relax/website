<!-- MHonArc v2.6.19+ -->
<!--X-Subject: Re: missing data in relaxation dispersion -->
<!--X-From-R13: "Sqjneq q'Ohiretar" &#60;rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Mon, 06 Jun 2016 13:13:49 +0200 -->
<!--X-Message-Id: CAED9pY_jmo9jfoae&#45;C+WC88sOTucUTUCheAdmFZrkUWp_8UjPw@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 20160422121850.GA16687@ncbr.ncbr.muni.cz -->
<!--X-Reference: CAED9pY8ejRFU4rhMgzdi6&#45;N_9WO+4B83n4B_xy4Z53+1Ak&#45;aJQ@mail.gmail.com -->
<!--X-Reference: 571A70D7.7030307@ncbr.muni.cz -->
<!--X-Reference: CAED9pY8tj_4au0y5yTewFtG6VMEEq_267tiW0dtwDoVnvb&#45;p5g@mail.gmail.com -->
<!--X-Reference: 20160429095833.GA13945@ncbr.ncbr.muni.cz -->
<!--X-Reference: CAED9pY&#45;P4=06f3JN_T7B3N3P65Y_a7xmZqiwyf8WxgXCVKtZ9g@mail.gmail.com -->
<!--X-Reference: CAED9pY_GuWfLQ_ho0eEYUhYF2YsQRvT9NgKRT8dNzRdLiUdHwA@mail.gmail.com -->
<!--X-Reference: CAED9pY&#45;XZrCQMP5ExaBWg745PhG3SqC4bHSY+Lzh=csWL6_iTg@mail.gmail.com -->
<!--X-Reference: 20160606103708.GA24306@ncbr.ncbr.muni.cz -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: missing data in relaxation dispersion -- June 06, 2016 - 13:13</title>
<link rel="stylesheet" type="text/css" href="/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="https://gna.org/images/gna.theme/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: missing data in relaxation dispersion</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00003" class="tabs">Index by Date</a> | <a href="threads.html#00003" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00004.html">Date Prev</a>] [<a href="msg00005.html">Date Next</a>] [<a href="msg00004.html">Thread Prev</a>] [<a href="msg00005.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Petr Padrta &lt;padrta@xxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Mon, 6 Jun 2016 13:13:17 +0200</li>
<li class="menuitem">
<em>Cc</em>: &quot;relax-users@xxxxxxx&quot; &lt;relax-users@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113; h=mime-version:sender:in-reply-to:references:from:date:message-id :subject:to:cc; bh=XjsSW9lhI2IJhxivMjMf+pZUbPujen/kTb2R4vf3dmE=; b=atlD4ZDd2oUzcuZ6KTri25yTUDmhuWXPnpqBZ91Gb8eh16mJuSDQ0PRVMp2eDyqTu/ RNi5cBi/0iDDb77GKU7rPG/C8Lwo2d61vonSm7nsGsD9z16zS0yPTyXIhWsmckbTBTgG XjT3DZPW34lFFEeSCO0P9Ix+kMwtJbApWc3/ejJlrHspQ9aMOTf5wVxQdzykrYelVcdT oEpEQY5SjV6EVZKfEzgg5hU+p92QVBdSbIBK7P4vmYvI2fECc0obKyCkWRisS6d4xqfT nb5dK0ZcqPfA80EH2nYu+14kpSmrUmatsUuo/hC2ffSZYdBNU2prRqzFiatoVrjPv7Qw ZxPg==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00003.html">CAED9pY_jmo9jfoae-C+WC88sOTucUTUCheAdmFZrkUWp_8UjPw@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;20160422121850.GA16687@ncbr.ncbr.muni.cz&gt; &lt;CAED9pY8ejRFU4rhMgzdi6-N_9WO+4B83n4B_xy4Z53+1Ak-aJQ@mail.gmail.com&gt; &lt;571A70D7.7030307@ncbr.muni.cz&gt; &lt;CAED9pY8tj_4au0y5yTewFtG6VMEEq_267tiW0dtwDoVnvb-p5g@mail.gmail.com&gt; &lt;20160429095833.GA13945@ncbr.ncbr.muni.cz&gt; &lt;CAED9pY-P4=06f3JN_T7B3N3P65Y_a7xmZqiwyf8WxgXCVKtZ9g@mail.gmail.com&gt; &lt;<a href="msg00001.html">CAED9pY_GuWfLQ_ho0eEYUhYF2YsQRvT9NgKRT8dNzRdLiUdHwA@mail.gmail.com</a>&gt; &lt;CAED9pY-XZrCQMP5ExaBWg745PhG3SqC4bHSY+Lzh=csWL6_iTg@mail.gmail.com&gt; &lt;<a href="msg00004.html">20160606103708.GA24306@ncbr.ncbr.muni.cz</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on June 06, 2016 - 13:13:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">On 6 June 2016 at 12:37, Petr Padrta &lt;padrta@xxxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">On Fri, Jun 03, 2016 at 04:43:18PM +0200, Edward d'Auvergne wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">On 3 June 2016 at 12:08, Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi Petr,

For the new bug report at <a  rel="nofollow" href="https://gna.org/bugs/?24675">https://gna.org/bugs/?24675</a>, now looking at
the results I can see that this is actually quite a deliberate
feature.  For reference, I will attach the plots for residues 133 and
134 for the CR2 model as a PDF file to that bug report
(disp_CKIRD_133_N.pdf and disp_CKIRD_134_N.pdf).  For residue 133,
there the blue line can be seen to be the dispersion curve predicted
for the missing 600 MHz data.  For 134, the green line is the
predicted dispersion curve for the 950 MHz data.

The R20 values come from the fitting of the single field strength data
points, and this value is independent of field strength.  So the
predicted curves are perfectly correct - they are exactly where they
are supposed to be.  Assuming the model to be correct, the predicted
curves are what the real data should look like.  So the curves without
measured data are actually quite powerful tools for investigating why
the data is missing.  They are also useful for investigating how well
the model fits to single field strength data.  It is also quite easy
in Grace to double click on the curve and hide it, if desired.
Therefore I think I'll leave the plotting code as it is.
</pre></blockquote><pre style="margin: 0em;">

Hi Petr,

Sorry, the R20 values are field strength dependent, but both are fit
during the optimisation of the dispersion models with missing data.
This is problematic as one parameter is undefined - the R20 for the
missing field - and this interferes with optimisation algorithms.  The
undefined R20 value can float around to any value, and this breaks the
rules that most algorithms absolutely rely on.  Hence the solution
found is unlikely to be the minimum in the optimisation space.  I
would therefore suggest deselecting these spins for now, as the
results are nonsensical.  It might take me a while to update each part
of relax to detect the missing data for one entire field strength from
the N fields, and drop back to N-1 fields.  This bug might take a
while to fix!  I might have to spend a few days working on that one
next week.

Regards,

Edward
</pre></blockquote><pre style="margin: 0em;">

Hello Edward,

Hey, that would be nice if R20 were really independent of B0 ;-)

Well, the undefined R20 can float to any value but within the bounds 
(0-200) so
at least some algorithms should be able to tackle that, Nelder-Mead very
probably amongst them. This seems to be corroborated also by real data. I.e.
when analysing our complete data, (so far) I'm getting sensible results,
comparable to calculating separate residues, of course not counting the R20s
for missing B0s, which sometimes float to 0, at other times go to 200. 
That's
why I suggested in my bugreports and mails that for the case of leaving all
R20s in, it is probably better to force them to 0. Of course it's even 
better
to remove missing R20s completely but I expected that to be much more 
effort.
</pre></blockquote><pre style="margin: 0em;">

Hi,

The Nelder-Mead simplex tends to have severe problems along these
undefined regions (which in this model is across the entire
optimisation space).  The simplex algorithm can get quite confused.
If the global minimum is found, then that is pure luck, as reasonable
convergence properties of this algorithm are only guaranteed in a
continuous and smooth space.  What relax should do is dynamically fall
back to N-1 fields for spin systems missing a single whole field of
data.  But currently the number of fields is defined at the global
whole-system level.  Most of relax can already currently handle this
dynamic algorithm, it is just the packing and unpacking of data for
optimisation that would need to be rewritten.  Until that is done, I
would suggest avoiding those data points, or perform a separate single
field strength analysis on them.  You may find the same result, but I
would not trust relax for these data points yet.

Regards,

Edward


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00001" href="msg00001.html">Re: missing data in relaxation dispersion</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00002" href="msg00002.html">Re: missing data in relaxation dispersion</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00004" href="msg00004.html">Re: missing data in relaxation dispersion</a></strong>
<ul><li><em>From:</em> Petr Padrta</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer">You are on the <a href="http://gna.org">Gna!</a> mail server.</div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Sat Jun 25 20:00:04 2016</div>  
</body>
</html>
