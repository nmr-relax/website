<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: The need for speeding things up in dispersion analysis -->
<!--X-From-R13: "Sqjneq q'Ohiretar" &#60;rqjneq.qnhiretarNtznvy.pbz> -->
<!--X-Date: Thu, 27 Mar 2014 19:15:26 +0100 -->
<!--X-Message-Id: CAED9pY8xaFLexQgCe4ndiA6w=qYvKCcG58&#45;JFTbK8qxXAX_ZXQ@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: CA+CBx2OA6z7ZYvuO=p5q=r&#45;S5Yo4ynNw9po0FjWF86pw446xKw@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: The need for speeding things up in dispersion analysis -- March 27, 2014 - 19:15</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: The need for speeding things up in dispersion analysis</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00071" class="tabs">Index by Date</a> | <a href="threads.html#00071" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00070.html">Date Prev</a>] [Date Next] [<a href="msg00070.html">Thread Prev</a>] [Thread Next]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Thu, 27 Mar 2014 19:14:59 +0100</li>
<li class="menuitem">
<em>Cc</em>: &quot;relax-users@xxxxxxx&quot; &lt;relax-users@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113; h=mime-version:in-reply-to:references:date:message-id:subject:from:to :cc:content-type:content-transfer-encoding; bh=MgMfEl/enQ0ebiPVEGKz+DIQZuCAJ3Q3VkIGvQKKo0s=; b=NUoZHqsdKoat4xSI58Y1nh4X/wSMwm1VVrei+wHeyO0cwDKHrlVPI7toni81trUYx9 PirpzN0adK7fdrmaPYZ6M+bAcldaspGuBt57MVvvsjgibPvczCQceQ55XlCixLpBDpN6 Txft8qdneBTGPthgfmlZ+EbvCPe7FIiGnWcrBZ7sznG1SnNU3MmT0TmDPfehUUnwgp6f U8KdX8KSQVqsqqYUIj+X9M10u7iwD6dH5kDeKX5dRif7Ox6KMXqXefRZTRhEYlDGLgHs QRUF7eZ0vVWRwwh5uqwdi+0JnhRFyfX2M4M0KOC/Uoil0/pcyz8id1VVTP4PiX3hw6Ak WIQg==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;CAED9pY8xaFLexQgCe4ndiA6w=qYvKCcG58-JFTbK8qxXAX_ZXQ@mail.gmail.com&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;CA+CBx2OA6z7ZYvuO=p5q=r-S5Yo4ynNw9po0FjWF86pw446xKw@mail.gmail.com&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on March 27, 2014 - 19:15:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Hi Troels,

For your analysis, are you using the dispersion auto-analysis?  You
should avoid this and write a custom script for speed.  As for the
optimisation accuracy, for your problem it could be dangerous to
decrease this.  The reason is because you are starting at the correct
values and looking if this changes.  But if you change the
optimisation settings, you may not be able to optimise away from the
correct values to the incorrect values you are most interested in.
You should also really think if you should be using spin clustering,
as that will be a major reason for the long computation times.  And
for your problem, it might hide interesting results.

I would also consider removing the Monte Carlo simulations, unless you
wish to study the variation in the errors as well.  But 50 simulations
is no where near enough for that anyway, so you should either increase
this to 500-2000 or decrease it to 0.  50 MC simulations gives very
noisy errors - the error in the error is huge.

Regards,

Edward






On 27 March 2014 17:42, Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Dear Edward.

I am working on a systematic investigations of dynamic parameters for 
hundreds
of datasets.

For one example, a CPMG analysis is setup for:
17 variations of tau_cpmg
The number of MC simulations is 50.
82 spins which are all clustered.

There is no grid search, and only TSMFK01 is used.
I do one grid search in the start, minimise this, copy over the
parameters and take median, make a clustering analysis, and then
repeat the last step 60 times.
This would again would be needed to repeat 5-8 times for other
datasets with variations.
And then for other proteins. (Sigh..)

I have setup relax to use 20 processors on our server, and a
dispersion analysis takes
between 2-6 Hours.

That is a reasonable timeframe for an normal analysis of this type.

But I have to squeeze hundreds of these analysis through relax, to get
variation of the dynamic parameters.

Our old Igor Pro scripts, could do a global fitting in 10 minutes.
That does not include MC simulations.

But I wonder if I could speed up relax by changing function tolerance
and maximum number of iterations:
minimise(min_algor='simplex', line_search=None, hessian_mod=None,
hessian_type=None, func_tol=OPT_FUNC_TOL, grad_tol=None,
max_iter=OPT_MAX_ITERATIONS, constraints=True, scaling=True,
verbosity=1)

where standard values of:
OPT_FUNC_TOL = 1e-25
OPT_MAX_ITERATIONS = 10000000

Could you advise if this strategy is possible?

What I hope for, is that an analysis come down to 10-20 minutes?
Maybe I could cut away the MC simulations, since I am mostly
interested in the fitted dynamic parameters, and not so much about
their error?

Thank you in advance!

Best
Troels

_______________________________________________
relax (<a  rel="nofollow" href="http://www.nmr-relax.com">http://www.nmr-relax.com</a>)

This is the relax-users mailing list
relax-users@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="http://www.nmr-relax.com/mail.gna.org/listinfo/relax-users">https://mail.gna.org/listinfo/relax-users</a>
</pre></blockquote><pre style="margin: 0em;">


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00069" href="msg00069.html">The need for speeding things up in dispersion analysis</a></strong>
<ul><li><em>From:</em> Troels Emtekær Linnet</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Thu Mar 27 19:20:13 2014</div>  
</body>
</html>
