<!-- MHonArc v2.6.19+ -->
<!--X-Subject: Re: back calculation of relaxation data -->
<!--X-From-R13: "Sqjneq q'Ohiretar" &#60;rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Thu, 05 Nov 2015 15:54:02 +0100 -->
<!--X-Message-Id: CAED9pY8km_w=6V94AEcsYHF1Dv3Kz99Mkpu8kEB0HXQ9crhZFQ@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 563B5418.8000002@fz&#45;juelich.de -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: back calculation of relaxation data -- November 05, 2015 - 15:54</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: back calculation of relaxation data</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00001" class="tabs">Index by Date</a> | <a href="threads.html#00001" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00000.html">Date Prev</a>] [<a href="msg00002.html">Date Next</a>] [<a href="msg00000.html">Thread Prev</a>] [<a href="msg00002.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Christina Möller &lt;c.moeller@xxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Thu, 5 Nov 2015 15:53:31 +0100</li>
<li class="menuitem">
<em>Cc</em>: &quot;relax-users@xxxxxxx&quot; &lt;relax-users@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113; h=mime-version:sender:in-reply-to:references:date:message-id:subject :from:to:cc:content-type:content-transfer-encoding; bh=2EYI4F68rlOObLRhnlztc8So2arOnlHIdszadqEtaKI=; b=YGVwGm6OanvrEVjwf48y6DGxaV8oE9nlwzevSkSxaeyt5bJjOQkyDCnFOxMOMZdwLf Cjgu7sJmFyUVMdGMqYQByimP7X0lGttRXYjgPhqCtX+lyKLQ6G3Z0cZfKh04X6luBB4G xHk14ztIjgDxXugN5qsZPLeNKH5z2+RQgT34aZH7V61BomADtWImSvrbfIKXR8gA/OMj tX4tNui67jkrbDPPUXk/yY6YchZqVRTZT6dSCLc6HrYZH7tgCGy5SIIFhhKIzy+LQh/O 5Z3dHkTBzZsOqU2Ukp4MS2ybU/HsOVyI4SVKuYry7CKUgjq9ppiEHafC5LHRa4Dae1Lp VNbA==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;CAED9pY8km_w=6V94AEcsYHF1Dv3Kz99Mkpu8kEB0HXQ9crhZFQ@mail.gmail.com&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;<a href="msg00000.html">563B5418.8000002@fz-juelich.de</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on November 05, 2015 - 15:54:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Hi Christina,

Please see below:

On 5 November 2015 at 14:05, Christina Möller &lt;c.moeller@xxxxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Dear Edward and relax-users,

I am sorry to ask you again for some advice to back calculate the relaxation
data from the model parameter values. Here is what I tried so far:
For the back calculation I loaded the final results determined by the
automated analysis using the dauvergne_protocol.py into the relax gui. Then
I selected the back_calc tool from user functions -&gt; relax_data.
After starting the back calculation without any entry
relax&gt; relax_data.back_calc(ri_id=None, ri_type=None, frq=None)
I get the following error message:
RelaxWarning: comparison to `None` will result in an elementwise object
comparison in the future.
</pre></blockquote><pre style="margin: 0em;">

This is a warning produced by more recent versions of the numpy Python
package.  It is harmless message about changes which will occur in
numpy, and it is safe to ignore.  Note that I have fixed this in the
source code repository and the fix will appear in the future when I
release relax 4.0.1 (it is not present in relax 4.0.0 at
<a  rel="nofollow" href="http://wiki.nmr-relax.com/Relax_4.0.0">http://wiki.nmr-relax.com/Relax_4.0.0</a> ).  This was first reported at:

    [relax-users] RelaxWarning: comparison to `None` will result in an
elementwise object comparison in the future (
<a  rel="nofollow" href="http://thread.gmane.org/gmane.science.nmr.relax.user/1839">http://thread.gmane.org/gmane.science.nmr.relax.user/1839</a> ).

And the solution at:

    [relax-users] Re: RelaxWarning: comparison to `None` will result
in an elementwise object comparison in the future (
<a  rel="nofollow" href="http://thread.gmane.org/gmane.science.nmr.relax.user/1844">http://thread.gmane.org/gmane.science.nmr.relax.user/1844</a> ).


</pre><blockquote class="blockquote"><pre style="margin: 0em;">If I put the frequency in
relax&gt; relax_data.back_calc(ri_id=None, ri_type=None, frq=599468076.0)
I get another error message
Traceback (most recent call last):
 File
&quot;/opt/scisoft64/usr/lib/python2.7/site-packages/relax/gui/interpreter.py&quot;,
line 306, in run
   fn(*args, **kwds)
 File
&quot;/opt/scisoft64/usr/lib/python2.7/site-packages/relax/pipe_control/relax_data.py&quot;,
line 132, in back_calc
   spin.ri_data_bc[ri_id] = api.back_calc_ri(spin_index=spin_index,
ri_id=ri_id, ri_type=ri_types[ri_id], frq=frqs[ri_id])
KeyError: 'R1_600'

Can you give me a hint what I am doing wrong?
</pre></blockquote><pre style="margin: 0em;">

I would suggest using the sample_scripts/model_free/generate_ri.py
sample script.  The relax_data.back_calc user function requires that
the relaxation data ID, the relaxation type, and frequency arguments
be supplied to correctly calculate the desired data (see
<a  rel="nofollow" href="http://www.nmr-relax.com/manual/relax_data_back_calc.html">http://www.nmr-relax.com/manual/relax_data_back_calc.html</a> ).  Without
this information, relax cannot determine what you would like to do.
Using the sample script would be the easiest option.


</pre><blockquote class="blockquote"><pre style="margin: 0em;">I know that the relaxation data can also be back calculated using the
equations 7.3a - 7.8 in the relax manual (PDF), although it is not that
trivial for an ellipsoid model because I need to determine the weights. Is
there a reason why you define c=1/3(ωH*∆σ)^2 (eq. 7.5) instead of
c=2/15(ωN*∆σ)^2 like it can be found in literature?
</pre></blockquote><pre style="margin: 0em;">

These two factors come from using CGS vs. SI units.  I have mentioned
this issue before (see
<a  rel="nofollow" href="http://thread.gmane.org/gmane.science.nmr.relax.devel/1023/focus=1034">http://thread.gmane.org/gmane.science.nmr.relax.devel/1023/focus=1034</a>
).  I have also started a stub wiki article to help explain these
differences - <a  rel="nofollow" href="http://wiki.nmr-relax.com/CGS_versus_SI">http://wiki.nmr-relax.com/CGS_versus_SI</a> . In SI units
the correct unit (squared) is (ω·∆σ)^2 / 3, and SI units are used
throughout relax.  This has made some parts of relax more difficult to
implement as there are many equations in the literature in CGS units,
and the authors will often not identify this older system.  Some
stubborn people just prefer the magnetic constant to be 1 rather than
µ0/(4π), and will not shift from the CGS metric system to the SI
metric system.

Regards,

Edward


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00004" href="msg00004.html">Re: back calculation of relaxation data</a></strong>
<ul><li><em>From:</em> Christina Möller</li></ul></li>
<li><strong><a name="00002" href="msg00002.html">Re: back calculation of relaxation data</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00000" href="msg00000.html">back calculation of relaxation data</a></strong>
<ul><li><em>From:</em> Christina Möller</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Fri Nov 13 12:20:23 2015</div>  
</body>
</html>
