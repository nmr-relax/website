<!-- MHonArc v2.6.10 -->
<!--X-Subject: Re: how to parallelise monte carlo and grid searches -->
<!--X-From-R13: "Sqjneq q'Ohiretar" <rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Fri, 30 Mar 2007 11:29:16 +0200 -->
<!--X-Message-Id: 7f080ed10703300228r58aac331vd1fa97b2450c7698@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: E1HWrC8&#45;0002Jl&#45;Ii@subversion.gna.org -->
<!--X-Reference: 7f080ed10703290839g1afb16c7k476b60bca781dca4@mail.gmail.com -->
<!--X-Reference: 460BE559.7010901@bmb.leeds.ac.uk -->
<!--X-Reference: f001463a0703291023l6145b88cs4ab84784c66524ab@mail.gmail.com -->
<!--X-Reference: 7f080ed10703291905m2e42d023m7ae0054fc60cf207@mail.gmail.com -->
<!--X-Reference: 460CB741.5010103@bmb.leeds.ac.uk -->
<!--X-Reference: 7f080ed10703300018n52df35d2lc5b9021bdb98d57@mail.gmail.com -->
<!--X-Reference: 460CBD20.2070007@bmb.leeds.ac.uk -->
<!--X-Reference: 7f080ed10703300102s6d883521kd64813e5c75a292a@mail.gmail.com -->
<!--X-Reference: 460CC592.4070903@bmb.leeds.ac.uk -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: how to parallelise monte carlo and grid searches -- March 30, 2007 - 11:29</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: how to parallelise monte carlo and grid searches</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00025" class="tabs">Index by Date</a> | <a href="threads.html#00025" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00024.html">Date Prev</a>] [<a href="msg00026.html">Date Next</a>] [<a href="msg00024.html">Thread Prev</a>] [<a href="msg00029.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: &quot;Gary S. Thompson&quot; &lt;garyt@xxxxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Fri, 30 Mar 2007 19:28:35 +1000</li>
<li class="menuitem">
<em>Cc</em>: relax-devel@xxxxxxx</li>
<li class="menuitem">
<em>Dkim-signature</em>: a=rsa-sha1; c=relaxed/relaxed; d=gmail.com; s=beta;	h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:cc:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;	b=AFifGDcRRfevE/GiiAPYF9LrjMv6/pmnNhOmrkDhzfF08sE9jkoj4P3hxcIo/Rg5qhxSiaA6PJuKc5k24uqENQAbg1b6hWwWMwlLd6jVYDPK0J+C9XEj9tuGC/+YRYR7jB1u5jki6zJQL+IRwrEt2JbZcJBWk27Cx+Ufg/1OkxY=</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00025.html">7f080ed10703300228r58aac331vd1fa97b2450c7698@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;E1HWrC8-0002Jl-Ii@subversion.gna.org&gt;	&lt;<a href="msg00005.html">7f080ed10703290839g1afb16c7k476b60bca781dca4@mail.gmail.com</a>&gt;	&lt;<a href="msg00008.html">460BE559.7010901@bmb.leeds.ac.uk</a>&gt;	&lt;<a href="msg00009.html">f001463a0703291023l6145b88cs4ab84784c66524ab@mail.gmail.com</a>&gt;	&lt;<a href="msg00011.html">7f080ed10703291905m2e42d023m7ae0054fc60cf207@mail.gmail.com</a>&gt;	&lt;<a href="msg00014.html">460CB741.5010103@bmb.leeds.ac.uk</a>&gt;	&lt;<a href="msg00017.html">7f080ed10703300018n52df35d2lc5b9021bdb98d57@mail.gmail.com</a>&gt;	&lt;<a href="msg00019.html">460CBD20.2070007@bmb.leeds.ac.uk</a>&gt;	&lt;<a href="msg00023.html">7f080ed10703300102s6d883521kd64813e5c75a292a@mail.gmail.com</a>&gt;	&lt;<a href="msg00024.html">460CC592.4070903@bmb.leeds.ac.uk</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on March 30, 2007 - 11:29:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">For the parallelisation of the Monte Carlo simulations, I would target
the minimise() function again.  I'll get to the grid search in a
second post.  The grid computing code that I wrote targeted the file
'generic_fns/minimise.py'.  You can see this code executed in the
minimise() method of the Minimise class and in the two threading
classes at the end of the module.  This could be a good place to
target the parallelisation because that minimise() function is where
the looping over the MC sims occurs.  If this is the target, then
there is the question of whether the main loop of the model-free
minimise() function should also be parallelised.  Obviously the slave
nodes can't act as a parent node sending out calculations to other
nodes.  Therefore if the generic minimise() function is targeted, the
specific minimise() function would need to operate in single processor
mode.  Unfortunately there will need to be a lot of data transmitted -
essentially one entire data pipe in the relax data storage object will
need to be pickled and transmitted to all nodes.  That is unless the
specific simulation data is pulled out each time and treated as normal
non-simulation data.</pre><br>
<pre style="margin: 0em;">Alternatively, the looping over simulations could be brought into the
specific model-free code.  This will require greater changes to the
original relax code base.  In this option, again it should be decided
if individual optimisation instances should be parallelised together
with the simulations.  My opinion is that communication overhead would
be significantly decreased by parallelising only the simulation loop.
The reason for this is that for an individual optimisation, the
simulation parameter vector starts very close to the minimum and hence
optimisation is orders of magnitude quicker for that problem (and
there is no grid search).  So in this case, I would guess that the
speed limitation of the parallelisation of simulations + optimisations
will be almost all due to inter-node communications.</pre><br>
<pre style="margin: 0em;">Cheers,</pre><br>
<pre style="margin: 0em;">Edward</pre><br>
<tt><br>On 3/30/07, Gary S. Thompson &lt;garyt@xxxxxxxxxxxxxxx&gt; wrote:
</tt><blockquote class="blockquote"><pre style="margin: 0em;">Do you have any thoughts on the question of how to parallelise grid
searches and monte
carlo runs and where to dig into the code base?</pre><br>
<pre style="margin: 0em;"><br>regards
gary</pre><br>
<pre style="margin: 0em;">note I have already realise one wrinkle about paralleliseing the
montecarlo runs. We need to have consistent (!) use of random numbers on
the various processors. Therefore  am going to create a command in
processor that will create and resturn a block of random numbers (I
guess we also need to think about what distributions we need as well)</pre><br>
<pre style="margin: 0em;"><br></pre><br>
<pre style="margin: 0em;">regards
gary</pre><br>
<pre style="margin: 0em;">--
-------------------------------------------------------------------
Dr Gary Thompson
Astbury Centre for Structural Molecular Biology,
University of Leeds, Astbury Building,
Leeds, LS2 9JT, West-Yorkshire, UK             Tel. +44-113-3433024
email: garyt@xxxxxxxxxxxxxxx                   Fax  +44-113-2331407
-------------------------------------------------------------------</pre><br>
<pre style="margin: 0em;"><br></pre><br>
</blockquote><pre style="margin: 0em;"><br></pre><br>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00005" href="msg00005.html">Re: r3243 - in /branches/multi_processor: ./ multi/ prompt/	specific_fns/</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00008" href="msg00008.html">Re: r3243 - in /branches/multi_processor: ./ multi/ prompt/	specific_fns/</a></strong>
<ul><li><em>From:</em> Gary S. Thompson</li></ul></li>
<li><strong><a name="00009" href="msg00009.html">Re: r3243 - in /branches/multi_processor: ./ multi/ prompt/	specific_fns/</a></strong>
<ul><li><em>From:</em> gary thompson</li></ul></li>
<li><strong><a name="00011" href="msg00011.html">Re: r3243 - in /branches/multi_processor: ./ multi/ prompt/	specific_fns/</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00014" href="msg00014.html">Re: r3243 - in /branches/multi_processor: ./ multi/ prompt/	specific_fns/</a></strong>
<ul><li><em>From:</em> Gary S. Thompson</li></ul></li>
<li><strong><a name="00017" href="msg00017.html">Re: r3243 - in /branches/multi_processor: ./ multi/ prompt/	specific_fns/</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00019" href="msg00019.html">Re: r3243 - in /branches/multi_processor: ./ multi/ prompt/	specific_fns/</a></strong>
<ul><li><em>From:</em> Gary S. Thompson</li></ul></li>
<li><strong><a name="00023" href="msg00023.html">Re: r3243 - in /branches/multi_processor: ./ multi/ prompt/	specific_fns/</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00024" href="msg00024.html">how to parallelise monte carlo and grid searches</a></strong>
<ul><li><em>From:</em> Gary S. Thompson</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Sun Apr 01 00:05:53 2007</div>  
</body>
</html>
