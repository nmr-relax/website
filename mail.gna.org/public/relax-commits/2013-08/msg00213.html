<!-- MHonArc v2.6.16 -->
<!--X-Subject: r20696 &#45;	/branches/relax_disp/test_suite/shared_data/dispersion/r1rho_off_res_tp02/ -->
<!--X-From-R13: rqjneqNaze&#45;erynk.pbz -->
<!--X-Date: Tue, 27 Aug 2013 12:27:06 +0200 -->
<!--X-Message-Id: E1VEGUM&#45;0005Fe&#45;Qe@subversion.gna.org -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>r20696 -	/branches/relax_disp/test_suite/shared_data/dispersion/r1rho_off_res_tp02/ -- August 27, 2013 - 12:27</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />r20696 -	/branches/relax_disp/test_suite/shared_data/dispersion/r1rho_off_res_tp02/</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00213" class="tabs">Index by Date</a> | <a href="threads.html#00213" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00212.html">Date Prev</a>] [<a href="msg00214.html">Date Next</a>] [<a href="msg00212.html">Thread Prev</a>] [<a href="msg00214.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: relax-commits@xxxxxxx</li>
<li class="menuitem">
<em>Date</em>: Tue, 27 Aug 2013 10:27:06 -0000</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00213.html">E1VEGUM-0005Fe-Qe@subversion.gna.org</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>edward</strong> on August 27, 2013 - 12:27:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Author: bugman
Date: Tue Aug 27 12:27:06 2013
New Revision: 20696

URL: <a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax?rev=20696&amp;view=rev">http://svn.gna.org/viewcvs/relax?rev=20696&amp;view=rev</a>
Log:
The TP02 model R1rho off-resonance test data creation script now creates 
files of the R1 relaxation data.

These files are needed for the system tests, as R1 data needs to be read.


Added:
    
branches/relax_disp/test_suite/shared_data/dispersion/r1rho_off_res_tp02/R1_500MHz.out
    
branches/relax_disp/test_suite/shared_data/dispersion/r1rho_off_res_tp02/R1_800MHz.out
Modified:
    
branches/relax_disp/test_suite/shared_data/dispersion/r1rho_off_res_tp02/generate.log
    
branches/relax_disp/test_suite/shared_data/dispersion/r1rho_off_res_tp02/generate.py

Added: 
branches/relax_disp/test_suite/shared_data/dispersion/r1rho_off_res_tp02/R1_500MHz.out
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/relax_disp/test_suite/shared_data/dispersion/r1rho_off_res_tp02/R1_500MHz.out?rev=20696&amp;view=auto">http://svn.gna.org/viewcvs/relax/branches/relax_disp/test_suite/shared_data/dispersion/r1rho_off_res_tp02/R1_500MHz.out?rev=20696&amp;view=auto</a>
==============================================================================
--- 
branches/relax_disp/test_suite/shared_data/dispersion/r1rho_off_res_tp02/R1_500MHz.out
 (added)
+++ 
branches/relax_disp/test_suite/shared_data/dispersion/r1rho_off_res_tp02/R1_500MHz.out
 Tue Aug 27 12:27:06 2013
@@ -1,0 +1,3 @@
+# mol_name    res_num    res_name    spin_num    spin_name    value          
         error                   
+None          1          Trp         None        N                           
    1                     0.1    
+None          2          Lys         None        N                           
  1.1                     0.1    

Added: 
branches/relax_disp/test_suite/shared_data/dispersion/r1rho_off_res_tp02/R1_800MHz.out
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/relax_disp/test_suite/shared_data/dispersion/r1rho_off_res_tp02/R1_800MHz.out?rev=20696&amp;view=auto">http://svn.gna.org/viewcvs/relax/branches/relax_disp/test_suite/shared_data/dispersion/r1rho_off_res_tp02/R1_800MHz.out?rev=20696&amp;view=auto</a>
==============================================================================
--- 
branches/relax_disp/test_suite/shared_data/dispersion/r1rho_off_res_tp02/R1_800MHz.out
 (added)
+++ 
branches/relax_disp/test_suite/shared_data/dispersion/r1rho_off_res_tp02/R1_800MHz.out
 Tue Aug 27 12:27:06 2013
@@ -1,0 +1,3 @@
+# mol_name    res_num    res_name    spin_num    spin_name    value          
         error                   
+None          1          Trp         None        N                           
  1.2                     0.1    
+None          2          Lys         None        N                           
  1.3                     0.1    

Modified: 
branches/relax_disp/test_suite/shared_data/dispersion/r1rho_off_res_tp02/generate.log
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/relax_disp/test_suite/shared_data/dispersion/r1rho_off_res_tp02/generate.log?rev=20696&amp;r1=20695&amp;r2=20696&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/relax_disp/test_suite/shared_data/dispersion/r1rho_off_res_tp02/generate.log?rev=20696&amp;r1=20695&amp;r2=20696&amp;view=diff</a>
==============================================================================
--- 
branches/relax_disp/test_suite/shared_data/dispersion/r1rho_off_res_tp02/generate.log
 (original)
+++ 
branches/relax_disp/test_suite/shared_data/dispersion/r1rho_off_res_tp02/generate.log
 Tue Aug 27 12:27:06 2013
@@ -1,7 +1,7 @@
 
 
 
-                                  relax repository checkout r20641
+                                  relax repository checkout r20695
                      
svn+ssh://bugman@xxxxxxxxxxx/svn/relax/branches/relax_disp
 
                               Molecular dynamics by NMR data analysis
@@ -40,7 +40,7 @@
 from numpy import array, float64
 
 # relax module imports.
-from lib.software.sparky import write_list
+from lib.spectrum.sparky import write_list
 
 
 # Setup for 2 spin systems.
@@ -50,6 +50,7 @@
 spin_lock_offset = 110.0    # The spin-lock frequency in ppm.
 r1rho_prime = array([[10.0, 15.0], [12.0, 18.0]], float64)  # The R1rho' 
value per spin and per field.
 r1 = array([[1.0, 1.2], [1.1, 1.3]], float64)    # The R1 value per spin and 
per field.
+r1_err = 0.1
 pA = 0.7654321
 kex = 1234.56789
 delta_omega = array([7.0, 9.0], float64)    # The chemical shift difference 
in ppm.
@@ -73,6 +74,18 @@
     frq = 2.0 * pi * frqs[frq_index]
     dw = delta_omega * frq
     omega_rf = spin_lock_offset * frq
+
+    # Set up the data for the R1 file.
+    label = 'R1_%s' % frq_label[frq_index]
+    pipe.create(label, 'mf')
+    cdp.ri_ids = ['r1']
+    for i in range(len(res_names)):
+        spin.create(res_name=res_names[i], res_num=res_nums[i], 
spin_name=atom1_names[i])
+        cdp.mol[0].res[i].spin[0].ri_data = {}
+        cdp.mol[0].res[i].spin[0].ri_data_err = {}
+        cdp.mol[0].res[i].spin[0].ri_data['r1'] = r1[i, frq_index]
+        cdp.mol[0].res[i].spin[0].ri_data_err['r1'] = r1_err
+    relax_data.write(ri_id='r1', file='%s.out'%label, force=True)
 
     # Frequency dependent parameters.
     omega_a = w1 - 0.5*dw
@@ -103,10 +116,10 @@
                 # The rate.
                 nomen = pA * pB * dw[spin_index]**2 * kex
                 denom = omega_aeff2[spin_index] * omega_beff2[spin_index] / 
omega_eff2[spin_index] + kex**2
-                rx = r1[spin_index][frq_index] * cos_theta2 + sin_theta2 * 
(r1rho_prime[spin_index][frq_index] + nomen / denom)
+                rx = r1[spin_index, frq_index] * cos_theta2 + sin_theta2 * 
(r1rho_prime[spin_index, frq_index] + nomen / denom)
     
                 # The peak intensity.
-                intensities.append(i0[spin_index][frq_index] * 
exp(-rx*times[time_index]))
+                intensities.append(i0[spin_index, frq_index] * 
exp(-rx*times[time_index]))
 
             # Create a Sparky .list file.
             if time_index == 0 and spin_lock_index == 0:
@@ -118,6 +131,15 @@
             if name:
                 write_list(file_prefix=name, dir=None, res_names=res_names, 
res_nums=res_nums, atom1_names=atom1_names, atom2_names=atom2_names, w1=w1, 
w2=w2, data_height=intensities)
 
----------------------------------------------------------------------------------------------------
+
+relax&gt; pipe.create(pipe_name='R1_500MHz', pipe_type='mf', bundle=None)
+
+relax&gt; spin.create(spin_name='N', spin_num=None, res_name='Trp', res_num=1, 
mol_name=None)
+
+relax&gt; spin.create(spin_name='N', spin_num=None, res_name='Lys', res_num=2, 
mol_name=None)
+
+relax&gt; relax_data.write(ri_id='r1', file='R1_500MHz.out', dir=None, 
bc=False, force=True)
+Opening the file 'R1_500MHz.out' for writing.
 Creating the Sparky list file.
 Opening the file 'ref_500MHz.list' for writing.
 Creating the Sparky list file.
@@ -142,6 +164,15 @@
 Opening the file 'nu_5500.0_500MHz.list' for writing.
 Creating the Sparky list file.
 Opening the file 'nu_6000.0_500MHz.list' for writing.
+
+relax&gt; pipe.create(pipe_name='R1_800MHz', pipe_type='mf', bundle=None)
+
+relax&gt; spin.create(spin_name='N', spin_num=None, res_name='Trp', res_num=1, 
mol_name=None)
+
+relax&gt; spin.create(spin_name='N', spin_num=None, res_name='Lys', res_num=2, 
mol_name=None)
+
+relax&gt; relax_data.write(ri_id='r1', file='R1_800MHz.out', dir=None, 
bc=False, force=True)
+Opening the file 'R1_800MHz.out' for writing.
 Creating the Sparky list file.
 Opening the file 'ref_800MHz.list' for writing.
 Creating the Sparky list file.

Modified: 
branches/relax_disp/test_suite/shared_data/dispersion/r1rho_off_res_tp02/generate.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/relax_disp/test_suite/shared_data/dispersion/r1rho_off_res_tp02/generate.py?rev=20696&amp;r1=20695&amp;r2=20696&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/relax_disp/test_suite/shared_data/dispersion/r1rho_off_res_tp02/generate.py?rev=20696&amp;r1=20695&amp;r2=20696&amp;view=diff</a>
==============================================================================
--- 
branches/relax_disp/test_suite/shared_data/dispersion/r1rho_off_res_tp02/generate.py
 (original)
+++ 
branches/relax_disp/test_suite/shared_data/dispersion/r1rho_off_res_tp02/generate.py
 Tue Aug 27 12:27:06 2013
@@ -18,7 +18,7 @@
 from numpy import array, float64
 
 # relax module imports.
-from lib.software.sparky import write_list
+from lib.spectrum.sparky import write_list
 
 
 # Setup for 2 spin systems.
@@ -28,6 +28,7 @@
 spin_lock_offset = 110.0    # The spin-lock frequency in ppm.
 r1rho_prime = array([[10.0, 15.0], [12.0, 18.0]], float64)  # The R1rho' 
value per spin and per field.
 r1 = array([[1.0, 1.2], [1.1, 1.3]], float64)    # The R1 value per spin and 
per field.
+r1_err = 0.1
 pA = 0.7654321
 kex = 1234.56789
 delta_omega = array([7.0, 9.0], float64)    # The chemical shift difference 
in ppm.
@@ -51,6 +52,18 @@
     frq = 2.0 * pi * frqs[frq_index]
     dw = delta_omega * frq
     omega_rf = spin_lock_offset * frq
+
+    # Set up the data for the R1 file.
+    label = 'R1_%s' % frq_label[frq_index]
+    pipe.create(label, 'mf')
+    cdp.ri_ids = ['r1']
+    for i in range(len(res_names)):
+        spin.create(res_name=res_names[i], res_num=res_nums[i], 
spin_name=atom1_names[i])
+        cdp.mol[0].res[i].spin[0].ri_data = {}
+        cdp.mol[0].res[i].spin[0].ri_data_err = {}
+        cdp.mol[0].res[i].spin[0].ri_data['r1'] = r1[i, frq_index]
+        cdp.mol[0].res[i].spin[0].ri_data_err['r1'] = r1_err
+    relax_data.write(ri_id='r1', file='%s.out'%label, force=True)
 
     # Frequency dependent parameters.
     omega_a = w1 - 0.5*dw
@@ -81,10 +94,10 @@
                 # The rate.
                 nomen = pA * pB * dw[spin_index]**2 * kex
                 denom = omega_aeff2[spin_index] * omega_beff2[spin_index] / 
omega_eff2[spin_index] + kex**2
-                rx = r1[spin_index][frq_index] * cos_theta2 + sin_theta2 * 
(r1rho_prime[spin_index][frq_index] + nomen / denom)
+                rx = r1[spin_index, frq_index] * cos_theta2 + sin_theta2 * 
(r1rho_prime[spin_index, frq_index] + nomen / denom)
     
                 # The peak intensity.
-                intensities.append(i0[spin_index][frq_index] * 
exp(-rx*times[time_index]))
+                intensities.append(i0[spin_index, frq_index] * 
exp(-rx*times[time_index]))
 
             # Create a Sparky .list file.
             if time_index == 0 and spin_lock_index == 0:



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Tue Aug 27 13:00:02 2013</div>  
</body>
</html>
