<!-- MHonArc v2.6.18 -->
<!--X-Subject: r23670 &#45; /branches/frame_order_cleanup/test_suite/shared_data/frame_order/cam/pseudo_ellipse2/ -->
<!--X-From-R13: rqjneqNaze&#45;erynk.pbz -->
<!--X-Date: Fri, 06 Jun 2014 08:38:27 +0200 -->
<!--X-Message-Id: E1WsnnG&#45;0002mJ&#45;N7@subversion.gna.org -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>r23670 - /branches/frame_order_cleanup/test_suite/shared_data/frame_order/cam/pseudo_ellipse2/ -- June 06, 2014 - 08:38</title>
<link rel="stylesheet" type="text/css" href="/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="https://gna.org/images/gna.theme/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />r23670 - /branches/frame_order_cleanup/test_suite/shared_data/frame_order/cam/pseudo_ellipse2/</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00057" class="tabs">Index by Date</a> | <a href="threads.html#00057" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00056.html">Date Prev</a>] [<a href="msg00058.html">Date Next</a>] [<a href="msg00056.html">Thread Prev</a>] [<a href="msg00058.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: relax-commits@xxxxxxx</li>
<li class="menuitem">
<em>Date</em>: Fri, 06 Jun 2014 06:38:26 -0000</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00057.html">E1WsnnG-0002mJ-N7@subversion.gna.org</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>edward</strong> on June 06, 2014 - 08:38:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Author: bugman
Date: Fri Jun  6 08:38:25 2014
New Revision: 23670

URL: <a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax?rev=23670&amp;view=rev">http://svn.gna.org/viewcvs/relax?rev=23670&amp;view=rev</a>
Log:
Expanded the 2nd CaM pseudo-ellipse test data frame_order.py optimisation 
script.

The optimisation is now implemented as in the auto-analysis, with an 
iterative increase in accuracy
of the quasi-random numerical integration together with an decrease of the 
function tolerance cutoff
for optimisation.  The accuracy of the initial chi-squared calculation is now 
much higher.  And the
accuracy of the initial grid search and the Monte Carlo simulations is now 
much lower.

The results of the new optimisation have been added to the repository.


Added:
    
branches/frame_order_cleanup/test_suite/shared_data/frame_order/cam/pseudo_ellipse2/ave_pos.pdb.gz
   (with props)
    
branches/frame_order_cleanup/test_suite/shared_data/frame_order/cam/pseudo_ellipse2/ave_pos_fixed_piv.pdb.gz
   (with props)
    
branches/frame_order_cleanup/test_suite/shared_data/frame_order/cam/pseudo_ellipse2/ave_pos_true.pdb.gz
   (with props)
    
branches/frame_order_cleanup/test_suite/shared_data/frame_order/cam/pseudo_ellipse2/frame_order.pdb.gz
   (with props)
    
branches/frame_order_cleanup/test_suite/shared_data/frame_order/cam/pseudo_ellipse2/frame_order_fixed_piv.pdb.gz
   (with props)
    
branches/frame_order_cleanup/test_suite/shared_data/frame_order/cam/pseudo_ellipse2/frame_order_true.pdb.gz
   (with props)
Modified:
    
branches/frame_order_cleanup/test_suite/shared_data/frame_order/cam/pseudo_ellipse2/frame_order.bz2
    
branches/frame_order_cleanup/test_suite/shared_data/frame_order/cam/pseudo_ellipse2/frame_order.log.bz2
    
branches/frame_order_cleanup/test_suite/shared_data/frame_order/cam/pseudo_ellipse2/frame_order.py

Added: 
branches/frame_order_cleanup/test_suite/shared_data/frame_order/cam/pseudo_ellipse2/ave_pos.pdb.gz
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/frame_order_cleanup/test_suite/shared_data/frame_order/cam/pseudo_ellipse2/ave_pos.pdb.gz?rev=23670&amp;view=auto">http://svn.gna.org/viewcvs/relax/branches/frame_order_cleanup/test_suite/shared_data/frame_order/cam/pseudo_ellipse2/ave_pos.pdb.gz?rev=23670&amp;view=auto</a>
==============================================================================
Binary file - no diff available.

Propchange: 
branches/frame_order_cleanup/test_suite/shared_data/frame_order/cam/pseudo_ellipse2/ave_pos.pdb.gz
------------------------------------------------------------------------------
    svn:mime-type = application/octet-stream

Added: 
branches/frame_order_cleanup/test_suite/shared_data/frame_order/cam/pseudo_ellipse2/ave_pos_fixed_piv.pdb.gz
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/frame_order_cleanup/test_suite/shared_data/frame_order/cam/pseudo_ellipse2/ave_pos_fixed_piv.pdb.gz?rev=23670&amp;view=auto">http://svn.gna.org/viewcvs/relax/branches/frame_order_cleanup/test_suite/shared_data/frame_order/cam/pseudo_ellipse2/ave_pos_fixed_piv.pdb.gz?rev=23670&amp;view=auto</a>
==============================================================================
Binary file - no diff available.

Propchange: 
branches/frame_order_cleanup/test_suite/shared_data/frame_order/cam/pseudo_ellipse2/ave_pos_fixed_piv.pdb.gz
------------------------------------------------------------------------------
    svn:mime-type = application/octet-stream

Added: 
branches/frame_order_cleanup/test_suite/shared_data/frame_order/cam/pseudo_ellipse2/ave_pos_true.pdb.gz
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/frame_order_cleanup/test_suite/shared_data/frame_order/cam/pseudo_ellipse2/ave_pos_true.pdb.gz?rev=23670&amp;view=auto">http://svn.gna.org/viewcvs/relax/branches/frame_order_cleanup/test_suite/shared_data/frame_order/cam/pseudo_ellipse2/ave_pos_true.pdb.gz?rev=23670&amp;view=auto</a>
==============================================================================
Binary file - no diff available.

Propchange: 
branches/frame_order_cleanup/test_suite/shared_data/frame_order/cam/pseudo_ellipse2/ave_pos_true.pdb.gz
------------------------------------------------------------------------------
    svn:mime-type = application/octet-stream

Modified: 
branches/frame_order_cleanup/test_suite/shared_data/frame_order/cam/pseudo_ellipse2/frame_order.bz2
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/frame_order_cleanup/test_suite/shared_data/frame_order/cam/pseudo_ellipse2/frame_order.bz2?rev=23670&amp;r1=23669&amp;r2=23670&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/frame_order_cleanup/test_suite/shared_data/frame_order/cam/pseudo_ellipse2/frame_order.bz2?rev=23670&amp;r1=23669&amp;r2=23670&amp;view=diff</a>
==============================================================================
Binary files - no diff available.

Modified: 
branches/frame_order_cleanup/test_suite/shared_data/frame_order/cam/pseudo_ellipse2/frame_order.log.bz2
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/frame_order_cleanup/test_suite/shared_data/frame_order/cam/pseudo_ellipse2/frame_order.log.bz2?rev=23670&amp;r1=23669&amp;r2=23670&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/frame_order_cleanup/test_suite/shared_data/frame_order/cam/pseudo_ellipse2/frame_order.log.bz2?rev=23670&amp;r1=23669&amp;r2=23670&amp;view=diff</a>
==============================================================================
Binary files - no diff available.

Added: 
branches/frame_order_cleanup/test_suite/shared_data/frame_order/cam/pseudo_ellipse2/frame_order.pdb.gz
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/frame_order_cleanup/test_suite/shared_data/frame_order/cam/pseudo_ellipse2/frame_order.pdb.gz?rev=23670&amp;view=auto">http://svn.gna.org/viewcvs/relax/branches/frame_order_cleanup/test_suite/shared_data/frame_order/cam/pseudo_ellipse2/frame_order.pdb.gz?rev=23670&amp;view=auto</a>
==============================================================================
Binary file - no diff available.

Propchange: 
branches/frame_order_cleanup/test_suite/shared_data/frame_order/cam/pseudo_ellipse2/frame_order.pdb.gz
------------------------------------------------------------------------------
    svn:mime-type = application/octet-stream

Modified: 
branches/frame_order_cleanup/test_suite/shared_data/frame_order/cam/pseudo_ellipse2/frame_order.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/frame_order_cleanup/test_suite/shared_data/frame_order/cam/pseudo_ellipse2/frame_order.py?rev=23670&amp;r1=23669&amp;r2=23670&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/frame_order_cleanup/test_suite/shared_data/frame_order/cam/pseudo_ellipse2/frame_order.py?rev=23670&amp;r1=23669&amp;r2=23670&amp;view=diff</a>
==============================================================================
--- 
branches/frame_order_cleanup/test_suite/shared_data/frame_order/cam/pseudo_ellipse2/frame_order.py
  (original)
+++ 
branches/frame_order_cleanup/test_suite/shared_data/frame_order/cam/pseudo_ellipse2/frame_order.py
  Fri Jun  6 08:38:25 2014
@@ -80,10 +80,8 @@
 # Set the paramagnetic centre.
 paramag.centre(pos=[35.934, 12.194, -4.206])
 
-# The optimisation settings.
-frame_order.num_int_pts(num=5000)
-
-# Check the minimum.
+# Check the minimum (at a very high quality to check that the chi-squared 
value is zero).
+frame_order.num_int_pts(num=100000)
 value.set(param='ave_pos_x', val=AVE_POS_X)
 value.set(param='ave_pos_y', val=AVE_POS_Y)
 value.set(param='ave_pos_z', val=AVE_POS_Z)
@@ -101,22 +99,34 @@
 # Create the PDB representation of the true state.
 frame_order.pdb_model(ave_pos_file='ave_pos_true.pdb.gz', 
rep_file='frame_order_true.pdb.gz', dist_file=None, force=True)
 
-# Optimise.
-#grid_search(inc=5)
-minimise('simplex')
+# Grid search (low quality for speed).
+frame_order.num_int_pts(num=100)
+grid_search(inc=[None, None, None, None, None, None, 7, 7, 7, 7, 7, 7])
+
+# Iterative optimisation with increasing precision.
+num_int_pts = [100, 1000, 10000, 50000]
+func_tol = [1e-2, 1e-3, 5e-3, 1e-4]
+for i in range(len(num_int_pts)):
+    frame_order.num_int_pts(num=num_int_pts[i])
+    minimise('simplex', func_tol=func_tol[i])
 
 # Store the result.
 frame_order.pdb_model(ave_pos_file='ave_pos_fixed_piv.pdb.gz', 
rep_file='frame_order_fixed_piv.pdb.gz', dist_file=None, force=True)
 
-# Optimise the pivot and model.
+# Optimise the pivot and model, again iterating with increasing precision.
 frame_order.pivot(pivot, fix=False)
-minimise('simplex')
+num_int_pts = [100, 1000, 10000, 50000]
+func_tol = [1e-2, 1e-3, 5e-3, 1e-4]
+for i in range(len(num_int_pts)):
+    frame_order.num_int_pts(num=num_int_pts[i])
+    minimise('simplex', func_tol=func_tol[i])
 
-# Test Monte Carlo simulations.
+# Test Monte Carlo simulations (at low quality for speed).
+frame_order.num_int_pts(num=100)
 monte_carlo.setup(number=5)
 monte_carlo.create_data()
 monte_carlo.initial_values()
-minimise('simplex')
+minimise('simplex', func_tol=1e-2)
 eliminate()
 monte_carlo.error_analysis()
 

Added: 
branches/frame_order_cleanup/test_suite/shared_data/frame_order/cam/pseudo_ellipse2/frame_order_fixed_piv.pdb.gz
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/frame_order_cleanup/test_suite/shared_data/frame_order/cam/pseudo_ellipse2/frame_order_fixed_piv.pdb.gz?rev=23670&amp;view=auto">http://svn.gna.org/viewcvs/relax/branches/frame_order_cleanup/test_suite/shared_data/frame_order/cam/pseudo_ellipse2/frame_order_fixed_piv.pdb.gz?rev=23670&amp;view=auto</a>
==============================================================================
Binary file - no diff available.

Propchange: 
branches/frame_order_cleanup/test_suite/shared_data/frame_order/cam/pseudo_ellipse2/frame_order_fixed_piv.pdb.gz
------------------------------------------------------------------------------
    svn:mime-type = application/octet-stream

Added: 
branches/frame_order_cleanup/test_suite/shared_data/frame_order/cam/pseudo_ellipse2/frame_order_true.pdb.gz
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/frame_order_cleanup/test_suite/shared_data/frame_order/cam/pseudo_ellipse2/frame_order_true.pdb.gz?rev=23670&amp;view=auto">http://svn.gna.org/viewcvs/relax/branches/frame_order_cleanup/test_suite/shared_data/frame_order/cam/pseudo_ellipse2/frame_order_true.pdb.gz?rev=23670&amp;view=auto</a>
==============================================================================
Binary file - no diff available.

Propchange: 
branches/frame_order_cleanup/test_suite/shared_data/frame_order/cam/pseudo_ellipse2/frame_order_true.pdb.gz
------------------------------------------------------------------------------
    svn:mime-type = application/octet-stream



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer">You are on the <a href="http://gna.org">Gna!</a> mail server.</div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Fri Jun 06 08:40:02 2014</div>  
</body>
</html>
