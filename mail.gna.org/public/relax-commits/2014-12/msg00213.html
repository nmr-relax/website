<!-- MHonArc v2.6.18 -->
<!--X-Subject: r27090 &#45; /trunk/user_functions/structure.py -->
<!--X-From-R13: rqjneqNaze&#45;erynk.pbz -->
<!--X-Date: Thu, 11 Dec 2014 13:40:41 +0100 -->
<!--X-Message-Id: E1Xz32v&#45;0000W8&#45;Ip@subversion.gna.org -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>r27090 - /trunk/user_functions/structure.py -- December 11, 2014 - 13:40</title>
<link rel="stylesheet" type="text/css" href="/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="https://gna.org/images/gna.theme/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />r27090 - /trunk/user_functions/structure.py</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00213" class="tabs">Index by Date</a> | <a href="threads.html#00213" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00212.html">Date Prev</a>] [<a href="msg00214.html">Date Next</a>] [<a href="msg00212.html">Thread Prev</a>] [<a href="msg00214.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: relax-commits@xxxxxxx</li>
<li class="menuitem">
<em>Date</em>: Thu, 11 Dec 2014 12:40:41 -0000</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00213.html">E1Xz32v-0000W8-Ip@subversion.gna.org</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>edward</strong> on December 11, 2014 - 13:40:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Author: bugman
Date: Thu Dec 11 13:40:41 2014
New Revision: 27090

URL: <a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax?rev=27090&amp;view=rev">http://svn.gna.org/viewcvs/relax?rev=27090&amp;view=rev</a>
Log:
Refactored the descriptions of a number of structure user functions.

This includes the structure.align, structure.displacement, 
structure.find_pivot, structure.rmsd and
structure.superimpose user functions.  The paragraph_multi_struct and 
paragraph_atom_id module
strings have been created and are shared as two paragraphs for each of these 
user function
descriptions.  This standardises the pipe/model/molecule/atom_id 
descriptions.  The user function
wizard page sizes have been updated for these changes.


Modified:
    trunk/user_functions/structure.py

Modified: trunk/user_functions/structure.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/trunk/user_functions/structure.py?rev=27090&amp;r1=27089&amp;r2=27090&amp;view=diff">http://svn.gna.org/viewcvs/relax/trunk/user_functions/structure.py?rev=27090&amp;r1=27089&amp;r2=27090&amp;view=diff</a>
==============================================================================
--- trunk/user_functions/structure.py   (original)
+++ trunk/user_functions/structure.py   Thu Dec 11 13:40:41 2014
@@ -43,6 +43,11 @@
 from user_functions.wildcards import WILDCARD_STRUCT_GAUSSIAN_ALL, 
WILDCARD_STRUCT_PDB_ALL, WILDCARD_STRUCT_XYZ_ALL
 
 
+# Text for the multi-structure paragraph.
+paragraph_multi_struct = &quot;Support for multiple structures is provided by the 
data pipes, model numbers and molecule names arguments.  Each data pipe, 
model and molecule combination will be treated as a separate structure.  As 
only atomic coordinates with the same residue name and number and atom name 
will be assembled, structures with slightly different atomic structures can 
be compared.  If the list of models is not supplied, then all models of all 
data pipes will be used.  If the optional molecules list is supplied, each 
molecule in the list will be considered as a separate structure for 
comparison between each other.&quot;
+paragraph_atom_id = &quot;The atom ID string, which uses the same notation as the 
spin ID, can be used to restrict the coordinates compared to a subset of 
molecules, residues, or atoms.  For example to only use backbone heavy atoms 
in a protein, set the atom ID to '@N,C,CA,O', assuming those are the names of 
the atoms in the 3D structural file.&quot;
+
+
 # The user function class.
 uf_class = uf_info.add_class('structure')
 uf_class.title = &quot;Class containing the structural related functions.&quot;
@@ -221,9 +226,9 @@
 uf.desc[-1].add_paragraph(&quot;This allows a set of related structures to be 
superimposed to each other.  The current algorithm will only use atoms with 
the same residue name and number and atom name in the superimposition, hence 
this is not a true sequence alignment.  Just as with the 
structure.superimpose user function two methods are currently supported:&quot;)
 uf.desc[-1].add_item_list_element(&quot;'fit to mean'&quot;, &quot;All models are fit to 
the mean structure.  This is the default and most accurate method for an 
ensemble description.  It is an iterative method which first calculates a 
mean structure and then fits each model to the mean structure using the 
Kabsch algorithm.  This is repeated until convergence.&quot;)
 uf.desc[-1].add_item_list_element(&quot;'fit to first'&quot;, &quot;This is quicker but is 
not as accurate for an ensemble description.  The Kabsch algorithm is used to 
rotate and translate each model to be superimposed onto the first model of 
the first data pipe.&quot;)
-uf.desc[-1].add_paragraph(&quot;If the list of models is not supplied, then all 
models of all data pipes will be superimposed.&quot;)
-uf.desc[-1].add_paragraph(&quot;The atom ID, which uses the same notation as the 
spin ID strings, can be used to restrict the superimpose calculation to 
certain molecules, residues, or atoms.  For example to only superimpose 
backbone heavy atoms in a protein, use the atom ID of '@N,C,CA,O', assuming 
those are the names of the atoms from the structural file.&quot;)
 uf.desc[-1].add_paragraph(&quot;By supplying the position of the centroid, an 
alternative position than the standard rigid body centre is used as the focal 
point of the superimposition.  The allows, for example, the superimposition 
about a pivot point.&quot;)
+uf.desc[-1].add_paragraph(paragraph_multi_struct)
+uf.desc[-1].add_paragraph(paragraph_atom_id)
 # Prompt examples.
 uf.desc.append(Desc_container(&quot;Prompt examples&quot;))
 uf.desc[-1].add_paragraph(&quot;To superimpose all sets of models, exactly as in 
the structure.superimpose user function, type one of:&quot;)
@@ -240,7 +245,7 @@
 uf.backend = pipe_control.structure.main.align
 uf.menu_text = &quot;&amp;align&quot;
 uf.wizard_apply_button = False
-uf.wizard_height_desc = 450
+uf.wizard_height_desc = 400
 uf.wizard_size = (1000, 750)
 uf.wizard_image = WIZARD_IMAGE_PATH + 'structure' + sep + '2JK4.png'
 
@@ -641,17 +646,17 @@
 # Description.
 uf.desc.append(Desc_container())
 uf.desc[-1].add_paragraph(&quot;This user function allows the rotational and 
translational displacement between different models or molecules to be 
calculated.  The information will be printed out in various formats and held 
in the relax data store.  This is directional, so there is a starting and 
ending position for each displacement.  Therefore the displacements in all 
directions between all models and molecules will be calculated.&quot;)
-uf.desc[-1].add_paragraph(&quot;The atom ID, which uses the same notation as the 
spin ID strings, can be used to restrict the displacement calculation to 
certain molecules, residues, or atoms.  This is useful if studying domain 
motions, secondary structure rearrangements, amino acid side chain rotations, 
etc.&quot;)
 uf.desc[-1].add_paragraph(&quot;By supplying the position of the centroid, an 
alternative position than the standard rigid body centre is used as the focal 
point of the motion.  The allows, for example, a pivot of a rotational domain 
motion to be specified.  This is not a formally correct algorithm, all 
translations will be zero, but does give an indication to the amplitude of 
the pivoting angle.&quot;)
-uf.desc[-1].add_paragraph(&quot;If the optional molecules list is supplied, then 
the displacements will be calculated between the molecules in the list rather 
than the models.  Therefore no models are allowed to be present in the 
current data pipe.&quot;)
+uf.desc[-1].add_paragraph(paragraph_multi_struct)
+uf.desc[-1].add_paragraph(paragraph_atom_id)
 # Prompt examples.
 uf.desc.append(Desc_container(&quot;Prompt examples&quot;))
 uf.desc[-1].add_paragraph(&quot;To determine the rotational and translational 
displacements between all sets of models, type:&quot;)
 uf.desc[-1].add_prompt(&quot;relax&gt; structure.displacement()&quot;)
 uf.backend = pipe_control.structure.main.displacement
 uf.menu_text = &quot;displace&amp;ment&quot;
-uf.wizard_height_desc = 400
-uf.wizard_size = (900, 700)
+uf.wizard_height_desc = 450
+uf.wizard_size = (1000, 750)
 uf.wizard_image = WIZARD_IMAGE_PATH + 'structure' + sep + '2JK4.png'
 
 
@@ -713,13 +718,13 @@
 # Description.
 uf.desc.append(Desc_container())
 uf.desc[-1].add_paragraph(&quot;This is used to find pivot point of motion 
between a set of structural models.  If the list of models is not supplied, 
then all models will be used.&quot;)
-uf.desc[-1].add_paragraph(&quot;The atom ID, which uses the same notation as the 
spin ID strings, can be used to restrict the search to certain molecules, 
residues, or atoms.  For example to only use backbone heavy atoms in a 
protein, use the atom ID of '@N,C,CA,O', assuming those are the names of the 
atoms from the structural file.&quot;)
 uf.desc[-1].add_paragraph(&quot;By supplying the position of the centroid, an 
alternative position than the standard rigid body centre is used as the focal 
point of the superimposition.  The allows, for example, the superimposition 
about a pivot point.&quot;)
-uf.desc[-1].add_paragraph(&quot;If the optional molecules list is supplied, then 
the optimisation will be performed on molecules in the list rather than the 
models.  Therefore no models are allowed to be present in the current data 
pipe.&quot;)
+uf.desc[-1].add_paragraph(paragraph_multi_struct)
+uf.desc[-1].add_paragraph(paragraph_atom_id)
 uf.backend = pipe_control.structure.main.find_pivot
 uf.menu_text = &quot;&amp;find_pivot&quot;
-uf.wizard_height_desc = 400
-uf.wizard_size = (900, 700)
+uf.wizard_height_desc = 450
+uf.wizard_size = (1000, 750)
 uf.wizard_apply_button = False
 uf.wizard_image = WIZARD_IMAGE_PATH + 'structure' + sep + '2JK4.png'
 
@@ -1087,15 +1092,16 @@
 # Description.
 uf.desc.append(Desc_container())
 uf.desc[-1].add_paragraph(&quot;This allows the root mean squared deviation 
(RMSD) between all models to be calculated.&quot;)
-uf.desc[-1].add_paragraph(&quot;The atom ID, which uses the same notation as the 
spin ID strings, can be used to restrict the RMSD calculation to certain 
molecules, residues, or atoms.&quot;)
-uf.desc[-1].add_paragraph(&quot;If the optional molecules list is supplied, then 
the RMSD calculation will be between the molecules in the list.&quot;)
+uf.desc[-1].add_paragraph(paragraph_multi_struct)
+uf.desc[-1].add_paragraph(paragraph_atom_id)
 # Prompt examples.
 uf.desc.append(Desc_container(&quot;Prompt examples&quot;))
 uf.desc[-1].add_paragraph(&quot;To determine the RMSD of all models in the 
current data pipe, simply type:&quot;)
 uf.desc[-1].add_prompt(&quot;relax&gt; structure.rmsd()&quot;)
 uf.backend = pipe_control.structure.main.rmsd
 uf.menu_text = &quot;&amp;rmsd&quot;
-uf.wizard_size = (800, 600)
+uf.wizard_height_desc = 400
+uf.wizard_size = (900, 700)
 uf.wizard_image = WIZARD_IMAGE_PATH + 'structure' + sep + '2JK4.png'
 
 
@@ -1194,7 +1200,7 @@
 uf.desc[-1].add_item_list_element(&quot;'fit to mean'&quot;, &quot;All models are fit to 
the mean structure.  This is the default and most accurate method for an 
ensemble description.  It is an iterative method which first calculates a 
mean structure and then fits each model to the mean structure using the 
Kabsch algorithm.  This is repeated until convergence.&quot;)
 uf.desc[-1].add_item_list_element(&quot;'fit to first'&quot;, &quot;This is quicker but is 
not as accurate for an ensemble description.  The Kabsch algorithm is used to 
rotate and translate each model to be superimposed onto the first model.&quot;)
 uf.desc[-1].add_paragraph(&quot;If the list of models is not supplied, then all 
models will be superimposed.&quot;)
-uf.desc[-1].add_paragraph(&quot;The atom ID, which uses the same notation as the 
spin ID strings, can be used to restrict the superimpose calculation to 
certain molecules, residues, or atoms.  For example to only superimpose 
backbone heavy atoms in a protein, use the atom ID of '@N,C,CA,O', assuming 
those are the names of the atoms from the structural file.&quot;)
+uf.desc[-1].add_paragraph(paragraph_atom_id)
 uf.desc[-1].add_paragraph(&quot;By supplying the position of the centroid, an 
alternative position than the standard rigid body centre is used as the focal 
point of the superimposition.  The allows, for example, the superimposition 
about a pivot point.&quot;)
 # Prompt examples.
 uf.desc.append(Desc_container(&quot;Prompt examples&quot;))



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer">You are on the <a href="http://gna.org">Gna!</a> mail server.</div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Thu Dec 11 16:20:02 2014</div>  
</body>
</html>
