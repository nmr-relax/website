<!-- MHonArc v2.6.19+ -->
<!--X-Subject: Re: Troubleshooting model&#45;free analysis -->
<!--X-From-R13: "Sqjneq q'Ohiretar" &#60;rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Mon, 08 Aug 2016 17:09:33 +0200 -->
<!--X-Message-Id: CAED9pY_oA2j0VAinpXzzxTYOLbodMMm&#45;WXMa2LomQHm6n5JdWQ@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: CALgM0gVTPnEHPdsG&#45;csPmEfUpxA4A_trO&#45;1sXyPqBZKOtJPiKA@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: Troubleshooting model-free analysis -- August 08, 2016 - 17:09</title>
<link rel="stylesheet" type="text/css" href="/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="https://gna.org/images/gna.theme/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: Troubleshooting model-free analysis</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00005" class="tabs">Index by Date</a> | <a href="threads.html#00005" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00004.html">Date Prev</a>] [<a href="msg00006.html">Date Next</a>] [<a href="msg00004.html">Thread Prev</a>] [<a href="msg00007.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: &quot;Mahdi, Sam&quot; &lt;sam.mahdi.846@xxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Mon, 8 Aug 2016 17:09:03 +0200</li>
<li class="menuitem">
<em>Cc</em>: &quot;relax-users@xxxxxxx&quot; &lt;relax-users@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113; h=mime-version:sender:in-reply-to:references:from:date:message-id :subject:to:cc; bh=eFWDl77p124WNZCl9d/XPpcMomug46fK1GLRv2on7Z4=; b=kvdfW+wEaUPua9PM391/9N1HJEL+4hC6w9JdF5jn3fYH/fCSrBnqWTbemBOw+zqfJ/ NFxtpCFZiGxlHk2j7heEw5jiPsoJxT2QNntjtXVOPYYTA8WLD//T4cT0mWPNjFY3Xu0M F71D+8py0FFaHnkZHUfZoeTjcTECjR6igRmOdSgezJsH/ep+TfWwYCyg3rhjVdZCK9uY AMaReXCJx3pFXQXCrQxtARkRB/sVlQXMhgqpsNzyNdm5lln+3ebqVz4rDYgBFvq342xE T9sNOwDSroDKJ/2OxmoLiL8fk5oK9jVIMhVJgw+0FHLV9MJVy9h1slI1pxtct5AwTh6K d1Zw==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00005.html">CAED9pY_oA2j0VAinpXzzxTYOLbodMMm-WXMa2LomQHm6n5JdWQ@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;CALgM0gVTPnEHPdsG-csPmEfUpxA4A_trO-1sXyPqBZKOtJPiKA@mail.gmail.com&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on August 08, 2016 - 17:09:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Hi Sam,

Welcome to the relax mailing lists.  Sorry for the late reply, I've
been quite busy for the last two months.  Please see below:

On 2 July 2016 at 02:41, Mahdi, Sam &lt;sam.mahdi.846@xxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">I had 2 questions regarding the relax model-free analysis.
1: When uploading a pdb file for the spin system, is there a certain way to
have some residues spins ignored?
</pre></blockquote><pre style="margin: 0em;">

I guess you mean reading the spin system from a PDB file.  You can do
this when running the structure.load_spins user function via the
spin_id parameter:

    <a  rel="nofollow" href="http://www.nmr-relax.com/manual/structure_load_spins.html">http://www.nmr-relax.com/manual/structure_load_spins.html</a>

Or you can do this afterwards, either using the deselect.spin or
spin.delete user functions:

    <a  rel="nofollow" href="http://www.nmr-relax.com/manual/deselect_spin.html">http://www.nmr-relax.com/manual/deselect_spin.html</a>
    <a  rel="nofollow" href="http://www.nmr-relax.com/manual/spin_delete.html">http://www.nmr-relax.com/manual/spin_delete.html</a>

</pre><blockquote class="blockquote"><pre style="margin: 0em;">i.e. give it a certain range. E.g. The
structural data for the pdb file I want uses an extra linker at the
C-terminus of my protein that is about 7 residues long. The relaxation data
I have however is for the protein without those 7 extra residues (thus
residue 7 for the pdb file is residue 1 for my relaxation data). Is there a
way I can get the relax program to ignore the first 7 residues?
</pre></blockquote><pre style="margin: 0em;">

If this is a model-free analysis, the residues without data will be
automatically deselected prior to optimisation (you'll see this in the
logs).

</pre><blockquote class="blockquote"><pre style="margin: 0em;">I tried
typing in the range I wanted (residue 8 to residue 133 inputed as [8-133])
in the molecule number to read option, but when I did that, it gave me this
error RelaxError: No PDB file has been loaded. When I removed the range, it
uploaded the file but with all the residues, including the linker I didn't
want.
</pre></blockquote><pre style="margin: 0em;">

Ah, I think you might be confusing the loading of a structural file
and the creation of NMR-active spin systems.   All atoms of the
structural file will be loaded into relax, but none of these atoms
will be set a spin systems.  You then have to use the
structure.load_spins user function to pick our the NH atoms pairs of
interest.


</pre><blockquote class="blockquote"><pre style="margin: 0em;">2: The relaxation data I have is for the backbone (NH), thus the values I
have for the backbone are for that bond. The pdb file I uploaded has both
of their spins. The relaxation data I have is one value for each residue
(for the NH bond). So I assumed that value is the same for both the
Nitrogen and Hydrogen spin of that residue. E.g. If residue 3 has a R1
value of 1.03, I assume the nitrogen spin and hydrogen spin both have an R1
value of 1.03.
</pre></blockquote><pre style="margin: 0em;">

This is not correct.  The proton relaxation values will be very
different.  Note that almost no one collects this data as the proton
spin cannot be considered as isolated.  Therefore the normal
assumptions for a model-free analysis of an isolated two spin system
do no hold.  E.g. spin diffusion is an important effect in protons.
This is also why carbon relaxation and model-free analyses are only
performed at natural abundance, to ensure that the system is isolated.

</pre><blockquote class="blockquote"><pre style="margin: 0em;">When I upload the relaxation data with the Nitrogen @N spin
id string it works fine, each residue has the proper value. However, the
value for the hydrogen is 0 for each residue.  I tried to create a new data
set, this time with the spin id string for Hydrogen using the same R1 file
I had used for the nitrogen, but when I did this I was given this error:
RelaxWarning: The sequence data in the line ['Residue', 'R1', 'Error'] is
invalid, the residue number data 'Residue' is invalid.
RelaxWarning: The sequence data in the line ['0', '0'] is invalid, the
error data is missing.
RelaxWarning: The sequence data in the line ['0', '0'] is invalid, the
error data is missing.
RelaxWarning: The sequence data in the line ['0', '0'] is invalid, the
error data is missing.
RelaxWarning: The sequence data in the line ['0', '0'] is invalid, the
error data is missing.
RelaxWarning: The sequence data in the line ['0', '0'] is invalid, the
error data is missing.
Traceback (most recent call last):
  File &quot;/usr/local/Relax/relax-2.2.5/gui/wizard.py&quot;, line 163, in _apply
    self.exec_status = self.on_execute()
  File &quot;/usr/local/Relax/relax-2.2.5/gui/uf_objects.py&quot;, line 867, in
on_execute
    return_status = self.execute(self.name, **kargs)
  File &quot;/usr/local/Relax/relax-2.2.5/gui/uf_objects.py&quot;, line 797, in
execute
    return_status = interpreter.apply(uf, *args, **kwds)
  File &quot;/usr/local/Relax/relax-2.2.5/gui/interpreter.py&quot;, line 112, in apply
    apply(fn, args, kwds)
  File &quot;/usr/local/Relax/relax-2.2.5/generic_fns/relax_data.py&quot;, line 1033,
in read
    pack_data(ri_id, ri_type, frq, values, errors, mol_names=mol_names,
res_nums=res_nums, res_names=res_names, spin_nums=spin_nums,
spin_names=spin_names, spin_id=spin_id)
  File &quot;/usr/local/Relax/relax-2.2.5/generic_fns/relax_data.py&quot;, line 870,
in pack_data
    new_id = new_ids[0]
IndexError: list index out of range
</pre></blockquote><pre style="margin: 0em;">

You should simply not load any data for the proton.  Then the analysis
will deselect those H spins prior to optimisation, if they haven't
already been deselected.


</pre><blockquote class="blockquote"><pre style="margin: 0em;">I don't know why it states the sequence data in the ling [0,0] is invalid
with missing error data. It is the same file I used for the nitrogen and
that worked fine. If I do not upload a hydrogen file, naturally when relax
is run, I will recieve an error stating that every single hydrogen spin has
been deselected due to the absence of data, and then it'll stop the
simulations.
</pre></blockquote><pre style="margin: 0em;">

That will be the warning, not error, that you should see.  All protons
should be deselected.


</pre><blockquote class="blockquote"><pre style="margin: 0em;">Extra info:
 this is how the script looks when I upload it with the NItrogen Id string
elax&gt; relax_data.display(ri_id='R1_NMRFAM')
# mol_name    res_num    res_name    spin_num    spin_name
value                   error
hRGS7         1          GLY         1
N                               0                       0
hRGS7         2          SER         8
N                               0                       0
hRGS7         2          SER         14          H
None                    None
hRGS7         3          SER         19
N                               0                       0
hRGS7         3          SER         25          H
None                    None
hRGS7         4          GLY         30
N                               0                       0
hRGS7         4          GLY         34          H
None                    None
hRGS7         5          SER         37
N                            1.15                    0.03
hRGS7         5          SER         43          H
None                    None
hRGS7         6          SER         48
N                           0.832                   0.011
hRGS7         6          SER         54          H
None                    None
hRGS7         7          GLY         59
N                            1.07                    0.05
hRGS7         7          GLY         63          H
None                    None
hRGS7         8          SER         66
N                            0.78                    0.17
hRGS7         8          SER         72          H
None                    None
hRGS7         9          GLN         77
N                               0                       0
hRGS7         9          GLN         86          H
None                    None
hRGS7         10         GLN         94
N                               0                       0
hRGS7         10         GLN         103         H
None                    None
hRGS7         11         ARG         111
N                               0                       0
hRGS7         11         ARG         122         H
None                    None
hRGS7         12         VAL         135
N                            1.26                    0.03
hRGS7         12         VAL         142         H
None                    None
hRGS7         13         LYS         151
N                           0.899                   0.023
hRGS7         13         LYS         160         H
None                    None
hRGS7         14         ARG         173
N                           0.854                   0.009
hRGS7         14         ARG         184         H
None                    None
hRGS7         15         TRP         197
N                            0.99                    0.04
hRGS7         15         TRP         211         H
None                    None
hRGS7         16         GLY         221
N                               0                       0
hRGS7         16         GLY         225         H
None                    None
hRGS7         17         PHE         228
N                           0.894                   0.016
hRGS7         17         PHE         239         H
None                    None
hRGS7         18         GLY         248
N                           0.874                   0.014
hRGS7         18         GLY         252         H
None                    None
hRGS7         19         MET         255
N                               0                       0
hRGS7         19         MET         263         H
None                    None
hRGS7         20         ASP         272
N                               0                       0
hRGS7         20         ASP         280         H
None                    None
hRGS7         21         GLU         284
N                               0                       0
hRGS7         21         GLU         293         H
None                    None
hRGS7         22         ALA         299
N                           0.939                   0.022

As you can see, the hydrogen values it states none, while giving the
relaxation value to the nitrogen.
</pre></blockquote><pre style="margin: 0em;">

You should simply not set the proton relaxation data, and allow relax
to produce RelaxWarnings when the protons are deselected.  You simply
need the proton information to set up the correct relaxation mechanism
for the nitrogen, and to indicate that this is an isolated two spin
system.  I hope this helps.

Regards,

Edward


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer">You are on the <a href="http://gna.org">Gna!</a> mail server.</div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Mon Aug 08 21:20:06 2016</div>  
</body>
</html>
