<!-- MHonArc v2.6.18 -->
<!--X-Subject: r23478 &#45; /trunk/lib/structure/geometric.py -->
<!--X-From-R13: rqjneqNaze&#45;erynk.pbz -->
<!--X-Date: Tue, 27 May 2014 17:21:54 +0200 -->
<!--X-Message-Id: E1WpJCM&#45;0003YC&#45;3P@subversion.gna.org -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>r23478 - /trunk/lib/structure/geometric.py -- May 27, 2014 - 17:21</title>
<link rel="stylesheet" type="text/css" href="/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="https://gna.org/images/gna.theme/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />r23478 - /trunk/lib/structure/geometric.py</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00581" class="tabs">Index by Date</a> | <a href="threads.html#00581" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00580.html">Date Prev</a>] [<a href="msg00582.html">Date Next</a>] [<a href="msg00580.html">Thread Prev</a>] [<a href="msg00582.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: relax-commits@xxxxxxx</li>
<li class="menuitem">
<em>Date</em>: Tue, 27 May 2014 15:21:54 -0000</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00581.html">E1WpJCM-0003YC-3P@subversion.gna.org</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>edward</strong> on May 27, 2014 - 17:21:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Author: bugman
Date: Tue May 27 17:21:53 2014
New Revision: 23478

URL: <a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax?rev=23478&amp;view=rev">http://svn.gna.org/viewcvs/relax?rev=23478&amp;view=rev</a>
Log:
Fix for the lib.structure.geometric.generate_vector_residues() function.

The atom numbers are no longer read from the internal structural object, as 
these are not reliable.
If another geometric representation exists in the object, then the atom 
numbers could be None.  Or
loading structures from multiple PDB files can cause the numbering to be 
repeated or out of order.


Modified:
    trunk/lib/structure/geometric.py

Modified: trunk/lib/structure/geometric.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/trunk/lib/structure/geometric.py?rev=23478&amp;r1=23477&amp;r2=23478&amp;view=diff">http://svn.gna.org/viewcvs/relax/trunk/lib/structure/geometric.py?rev=23478&amp;r1=23477&amp;r2=23478&amp;view=diff</a>
==============================================================================
--- trunk/lib/structure/geometric.py    (original)
+++ trunk/lib/structure/geometric.py    Tue May 27 17:21:53 2014
@@ -200,9 +200,9 @@
     &quot;&quot;&quot;
 
     # The atom numbers (and indices).
-    origin_num = mol.atom_num[-1]+1
-    atom_num = mol.atom_num[-1]+2
-    atom_neg_num = mol.atom_num[-1]+3
+    origin_num = len(mol.atom_num)+1
+    atom_num = len(mol.atom_num)+2
+    atom_neg_num = len(mol.atom_num)+3
 
     # The origin atom.
     mol.atom_add(pdb_record='HETATM', atom_num=origin_num, atom_name='R', 
res_name=res_name_vect, chain_id=chain_id, res_num=res_num, pos=origin, 
segment_id=None, element='C')



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer">You are on the <a href="http://gna.org">Gna!</a> mail server.</div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Tue May 27 17:40:03 2014</div>  
</body>
</html>
