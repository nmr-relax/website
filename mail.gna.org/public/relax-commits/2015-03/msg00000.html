<!-- MHonArc v2.6.18 -->
<!--X-Subject: r27722 &#45; /trunk/pipe_control/structure/main.py -->
<!--X-From-R13: rqjneqNaze&#45;erynk.pbz -->
<!--X-Date: Mon, 02 Mar 2015 11:58:43 +0100 -->
<!--X-Message-Id: E1YSO3f&#45;0003hh&#45;PQ@subversion.gna.org -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>r27722 - /trunk/pipe_control/structure/main.py -- March 02, 2015 - 11:58</title>
<link rel="stylesheet" type="text/css" href="/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="https://gna.org/images/gna.theme/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />r27722 - /trunk/pipe_control/structure/main.py</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00000" class="tabs">Index by Date</a> | <a href="threads.html#00000" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[Date Prev] [<a href="msg00001.html">Date Next</a>] [Thread Prev] [<a href="msg00001.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: relax-commits@xxxxxxx</li>
<li class="menuitem">
<em>Date</em>: Mon, 02 Mar 2015 10:58:43 -0000</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00000.html">E1YSO3f-0003hh-PQ@subversion.gna.org</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>edward</strong> on March 02, 2015 - 11:58:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Author: bugman
Date: Mon Mar  2 11:58:42 2015
New Revision: 27722

URL: <a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax?rev=27722&amp;view=rev">http://svn.gna.org/viewcvs/relax?rev=27722&amp;view=rev</a>
Log:
Improvement for the structure.mean user function.

This can now be used to store an averaged structure in an empty data pipe.  
Previously structural
data needed to be present in the current data pipe for the user function to 
work.


Modified:
    trunk/pipe_control/structure/main.py

Modified: trunk/pipe_control/structure/main.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/trunk/pipe_control/structure/main.py?rev=27722&amp;r1=27721&amp;r2=27722&amp;view=diff">http://svn.gna.org/viewcvs/relax/trunk/pipe_control/structure/main.py?rev=27722&amp;r1=27721&amp;r2=27722&amp;view=diff</a>
==============================================================================
--- trunk/pipe_control/structure/main.py        (original)
+++ trunk/pipe_control/structure/main.py        Mon Mar  2 11:58:42 2015
@@ -396,6 +396,10 @@
 
     # Calculate the mean structure.
     struct = mean(coord, axis=0)
+
+    # Place the structural object into the relax data store if needed.
+    if not hasattr(cdp, 'structure'):
+        cdp.structure = Internal()
 
     # Store the data.
     cdp.structure.add_coordinates(coord=struct, mol_names=mol_names, 
res_names=res_names, res_nums=res_nums, atom_names=atom_names, 
elements=elements, set_mol_name=set_mol_name, set_model_num=set_model_num)



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer">You are on the <a href="http://gna.org">Gna!</a> mail server.</div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Mon Mar 02 15:40:01 2015</div>  
</body>
</html>
