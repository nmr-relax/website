<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: [bug #20916] Suggestion for python script for PNG/EPS/SVG	conversion of grace files -->
<!--X-From-R13: "Sqjneq q'Ohiretar" <rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Tue, 18 Jun 2013 13:21:31 +0200 -->
<!--X-Message-Id: CAED9pY_OfVAwu+N_rX1bn9YhGozPsx_rMjWo=i1zK4ynMSQFhg@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 20130617&#45;145302.sv20529.56529@gna.org -->
<!--X-Reference: 20130618&#45;094342.sv20529.71360@gna.org -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [bug #20916] Suggestion for python script for PNG/EPS/SVG	conversion of grace files -- June 18, 2013 - 13:21</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: [bug #20916] Suggestion for python script for PNG/EPS/SVG	conversion of grace files</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00073" class="tabs">Index by Date</a> | <a href="threads.html#00073" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00072.html">Date Prev</a>] [<a href="msg00074.html">Date Next</a>] [<a href="msg00071.html">Thread Prev</a>] [<a href="msg00078.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Troels Emtek√¶r Linnet &lt;tlinnet@xxxxxxxxx&gt;, 	&quot;relax-devel@xxxxxxx&quot; &lt;relax-devel@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Tue, 18 Jun 2013 13:21:00 +0200</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;	h=mime-version:sender:in-reply-to:references:date	:x-google-sender-auth:message-id:subject:from:to:content-type;	bh=xZLYhYELAHjTriWsouoDo/LT9gB5aAUUGjnNsRqskcA=;	b=JKTd94EgOxC84WO95V6xTGbKfRYcUlvikvnqQdgZC8lqYH7gpgsHn8nOb8ytO0cFNr	dekWlDo+bZe4pxwEUR0OPEd0aaLb4KMMtS7GqTKN5Y8feIr54SVe+/HGVYtiTK0FlMyO	+4tCue1GqQ6uvuUqlscJyZLUNUatJsPsunjNhoOXiUJUa2DotwPzfEw8rWI3NIL118aE	RpeOvT0yxDr99WhDjE7jPf6KjdYL3TcFXNFeLzFhBhSbU3TrEljpgz5JO3srLm2573ym	1lnTRWIr2PbaqJh4L2Ytl4Us4LYFLmVrsBnRchYO84klVufKRKoQcNBy0fqfwuJzhXFT	Paig==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00073.html">CAED9pY_OfVAwu+N_rX1bn9YhGozPsx_rMjWo=i1zK4ynMSQFhg@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;20130617-145302.sv20529.56529@xxxxxxx&gt;	&lt;20130618-094342.sv20529.71360@xxxxxxx&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on June 18, 2013 - 13:21:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Hi,

I have a few points for improving the patch:

- As part of the coding convention, there should be two blank lines
before a function.  This is simply for easier navigation of the Python
code.  This can be seen when running the
'devel_scripts/code_validator' script on the lib/software/grace.py
file.

- I would suggest maybe the name
lib.software.grace.script_grace2images() to be a bit more clear that a
script is produced.

- For the Epydoc formatted docstring, you need the '@keyword file:
....' line as well.  This can be tested when running 'scons
api_manual_html' with epydoc installed.  Without this the API
documentation compilation for <a  rel="nofollow" href="http://www.nmr-relax.com/api/2.2/">http://www.nmr-relax.com/api/2.2/</a> fails
for that file.

- For the text hack, you can use the triple quote convention for the
whole script.  This will make things much, much cleaner.  You can then
use as many ' and &quot; characters as you like.  See
<a  rel="nofollow" href="http://docs.python.org/release/1.4/tut/node70.html">http://docs.python.org/release/1.4/tut/node70.html</a>.  Or, even better,
you can copy how it was done in the lib/software/opendx/files.py file,
using \&quot; to use &quot; within a string.

- Small spelling correction of 'Successful' in the
lib.software.grace.write_grace2images() docstring.

Apart from these minor things, the code looks good.

Cheers,

Edward


On 18 June 2013 11:43, Troels E. Linnet
&lt;NO-REPLY.INVALID-ADDRESS@xxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Follow-up Comment #1, bug #20916 (project relax):

Fix for bug #20916, (<a  rel="nofollow" href="https://gna.org/bugs/?20916">https://gna.org/bugs/?20916</a>) - Suggestion for python
script for PNG/EPS/SVG conversion of grace files

Troels Linnet provided this patch, and was discovered during work on a 
Windows
7 system: telinnet _aaattt_ bio_dot_ku_dot _dk

This patch will provide a grace2images.py file in each folder where a call 
to
specific_analyses/relax_disp/disp_data.py is called.

It is called in: def plot_disp_curves(dir=None, force=None):
and call the function: lib.software.grace.write_grace2images()

The conversion script can be executed in linux and windows, if the PATH to
xmgrace has been specified. It will look in a folder for grace files of 
ending
*.agr and by default convert to PNG.

One can also convert to EPS and SVG. Propably more options could be added, 
as
PDF. The conversion depends on xmgrace compilation, and so PNG conversion is
for fast inspection of graphs in folder, and EPS for further external
conversion to PDF etc.

The patch, the output file, and small script to test is attached.

I miss to make the file executable in relax, so the script can be executed
directly in linux.

(file #18105, file #18106, file #18107)
    _______________________________________________________

Additional Item Attachment:

File name: patch                          Size:6 KB
File name: grace2images.py                Size:3 KB
File name: test_convert.py                Size:0 KB


    _______________________________________________________

Reply to this item at:

  &lt;<a  rel="nofollow" href="http://gna.org/bugs/?20916">http://gna.org/bugs/?20916</a>&gt;

_______________________________________________
  Message sent via/by Gna!
  <a  rel="nofollow" href="http://gna.org/">http://gna.org/</a>


_______________________________________________
relax (<a  rel="nofollow" href="http://www.nmr-relax.com">http://www.nmr-relax.com</a>)

This is the relax-devel mailing list
relax-devel@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="https://mail.gna.org/listinfo/relax-devel">https://mail.gna.org/listinfo/relax-devel</a>
</pre></blockquote><pre style="margin: 0em;">


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00062" href="msg00062.html">[bug #20916] Suggestion for python script for PNG/EPS/SVG conversion	of grace files</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
<li><strong><a name="00071" href="msg00071.html">[bug #20916] Suggestion for python script for PNG/EPS/SVG conversion	of grace files</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Tue Jun 18 14:40:09 2013</div>  
</body>
</html>
