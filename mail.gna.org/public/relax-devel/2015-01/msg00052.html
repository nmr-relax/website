<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: r27219 &#45; /trunk/specific_analyses/relax_disp/api.py -->
<!--X-From-R13: "Sqjneq q'Ohiretar" &#60;rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Mon, 19 Jan 2015 10:37:42 +0100 -->
<!--X-Message-Id: CAED9pY9WFUUogObaN7q6_zdh9mfP+M81zmEPy8Jqwj53_w0rnw@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: E1YCWBd&#45;0006VL&#45;3o@subversion.gna.org -->
<!--X-Reference: CAED9pY9XKg0MhmbSdm&#45;v3e0GoT2pNe5nY7Peiak9QfBykHogAQ@mail.gmail.com -->
<!--X-Reference: CA+CBx2PASeJrxELqAfOunHyKgnvOMM8siEFwvio_Ls_s4CC1uA@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: r27219 - /trunk/specific_analyses/relax_disp/api.py -- January 19, 2015 - 10:37</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: r27219 - /trunk/specific_analyses/relax_disp/api.py</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00052" class="tabs">Index by Date</a> | <a href="threads.html#00052" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00051.html">Date Prev</a>] [<a href="msg00053.html">Date Next</a>] [<a href="msg00050.html">Thread Prev</a>] [Thread Next]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Mon, 19 Jan 2015 10:37:18 +0100</li>
<li class="menuitem">
<em>Cc</em>: &quot;relax-devel@xxxxxxx&quot; &lt;relax-devel@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113; h=mime-version:sender:in-reply-to:references:date:message-id:subject :from:to:cc:content-type:content-transfer-encoding; bh=GPpznRQXWF2vNXS2WCPT0ytVBcnOdCjR8ysumGgfyHQ=; b=TJ9NuaLLiPcO9rjNxnmNKa/aQFIegjue94jXP7PzwkDkgpEz6JEUTOdvkbz6FNUUTV XZhtgnml6roqgvzmqubspPd3vDpHvxieD2NfBDZPkSf2qFvwQl7I4m2Bu41cr6oXVVXz 8ooSKB3+NyaKb4lB0EWoFoR37JfIh2MyPrxVUCTIXKjgJ9tr/12nlu/FYCNXospf/c5i 8O4GrSRHqP5hrS8ca/CfWsq3aY8MJyNpViP28TcbT2q07P0Sw0aqqX8ilb5y/Dlrs8+t PN85B76euVJChGYKrAdCYL94g8a4FDclJufstJJWOgL8cR+x+xRLLpcyt1rmyNkp3XNz ubEA==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00052.html">CAED9pY9WFUUogObaN7q6_zdh9mfP+M81zmEPy8Jqwj53_w0rnw@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;E1YCWBd-0006VL-3o@subversion.gna.org&gt; &lt;<a href="msg00047.html">CAED9pY9XKg0MhmbSdm-v3e0GoT2pNe5nY7Peiak9QfBykHogAQ@mail.gmail.com</a>&gt; &lt;<a href="msg00050.html">CA+CBx2PASeJrxELqAfOunHyKgnvOMM8siEFwvio_Ls_s4CC1uA@mail.gmail.com</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on January 19, 2015 - 10:37:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Hi,

That works, just use RelaxImplementError as in the base API.  That
would be the safest.  An implementation for the R2eff model is
unnecessary.

Regards,

Edward



On 19 January 2015 at 10:31, Troels Emtekær Linnet
&lt;tlinnet@xxxxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi Edward.

I was wondering to throw an error, if the R2eff model is used with this.

Best
Troels

2015-01-19 10:17 GMT+01:00 Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt;:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">

Hi Troels,

This still has the same problems with the R2eff model as mentioned at
<a  rel="nofollow" href="http://thread.gmane.org/gmane.science.nmr.relax.scm/24963/focus=7490">http://thread.gmane.org/gmane.science.nmr.relax.scm/24963/focus=7490</a>.

Regards,

Edward



On 17 January 2015 at 17:25,  &lt;tlinnet@xxxxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Author: tlinnet
Date: Sat Jan 17 17:25:20 2015
New Revision: 27219

URL: <a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax?rev=27219&amp;view=rev">http://svn.gna.org/viewcvs/relax?rev=27219&amp;view=rev</a>
Log:
Added API function in relaxation dispersion to return error structure
from the reduced chi2 distribution.

Task #7882 (<a  rel="nofollow" href="https://web.archive.org/web/https://gna.org/task/?7882">https://gna.org/task/?7882</a>): Implement Monte-Carlo
simulation, where errors are generated with width of standard deviation 
or
residuals.): Implement Monte-Carlo simulation, where errors are generated
with width of standard deviation or residuals.

Modified:
    trunk/specific_analyses/relax_disp/api.py

Modified: trunk/specific_analyses/relax_disp/api.py
URL:
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/trunk/specific_analyses/relax_disp/api.py?rev=27219&amp;r1=27218&amp;r2=27219&amp;view=diff">http://svn.gna.org/viewcvs/relax/trunk/specific_analyses/relax_disp/api.py?rev=27219&amp;r1=27218&amp;r2=27219&amp;view=diff</a>

==============================================================================
--- trunk/specific_analyses/relax_disp/api.py   (original)
+++ trunk/specific_analyses/relax_disp/api.py   Sat Jan 17 17:25:20 2015
@@ -27,7 +27,7 @@
 # Python module imports.
 import bmrblib
 from copy import deepcopy
-from numpy import int32, zeros
+from numpy import int32, sqrt, zeros
 from re import match, search
 import string
 import sys
@@ -1035,6 +1035,44 @@

         # Return the error list.
         return errors
+
+
+    def return_error_red_chi2(self, data_id=None):
+        &quot;&quot;&quot;Return the standard deviation data structure, where standard
deviation is from the overall gauss distribution described by the 
STD_fit of
the goodness of fit, where STD_fit = sqrt(chi2/(N-p))
+
+        @param data_id: The tuple of the spin container and the
exponential curve identifying key, as yielded by the base_data_loop()
generator method.
+        @type data_id:  SpinContainer instance and float
+        @return:        The standard deviation data structure.
+        @rtype:         list of float
+        &quot;&quot;&quot;
+
+        # Get the errors structure as above.
+        errors = self.return_error(data_id=data_id)
+
+        # Unpack the data.
+        spin, spin_id = data_id
+
+        # Loop over the spin groupings for the model.
+        for spin_ids in self.model_loop():
+            # If the spin of interest is in the returned spin cluster.
+            if spin_id in spin_ids:
+                # Get the statistics
+                k, n, chi2 = self.model_statistics(model_info=spin_ids)
+
+                # Calculate degrees of freedom.
+                dof = n - k
+
+                # Calculate reduced chi2, or named as the variance of
the squared residuals.
+                red_chi2 = chi2 / float(dof)
+
+                # Calculated the standard deviation.
+                std_red_chi2 = sqrt(red_chi2)
+
+                # Replace values with the stored value.
+                for id in errors:
+                    errors[id] = std_red_chi2
+
+                return errors


     def return_value(self, spin, param, sim=None, bc=False):


_______________________________________________
relax (<a  rel="nofollow" href="/">http://www.nmr-relax.com</a>)

This is the relax-commits mailing list
relax-commits@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="/mail.gna.org/listinfo/relax-commits">https://mail.gna.org/listinfo/relax-commits</a>
</pre></blockquote><pre style="margin: 0em;">

_______________________________________________
relax (<a  rel="nofollow" href="/">http://www.nmr-relax.com</a>)

This is the relax-devel mailing list
relax-devel@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="/mail.gna.org/listinfo/relax-devel">https://mail.gna.org/listinfo/relax-devel</a>
</pre></blockquote><pre style="margin: 0em;">


</pre></blockquote><pre style="margin: 0em;">


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00047" href="msg00047.html">Re: r27219 - /trunk/specific_analyses/relax_disp/api.py</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00050" href="msg00050.html">Re: r27219 - /trunk/specific_analyses/relax_disp/api.py</a></strong>
<ul><li><em>From:</em> Troels Emtekær Linnet</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Mon Jan 19 11:00:12 2015</div>  
</body>
</html>
