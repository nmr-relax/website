<!-- MHonArc v2.6.16 -->
<!--X-Subject: r11965 &#45; /branches/bieri_gui/auto_analyses/dauvergne_protocol.py -->
<!--X-From-R13: rqjneqNaze&#45;erynk.pbz -->
<!--X-Date: Mon, 27 Dec 2010 13:05:10 +0100 -->
<!--X-Message-Id: E1PXBp8&#45;0002Wh&#45;HC@subversion.gna.org -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>r11965 - /branches/bieri_gui/auto_analyses/dauvergne_protocol.py -- December 27, 2010 - 13:05</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />r11965 - /branches/bieri_gui/auto_analyses/dauvergne_protocol.py</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00265" class="tabs">Index by Date</a> | <a href="threads.html#00265" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00264.html">Date Prev</a>] [<a href="msg00266.html">Date Next</a>] [<a href="msg00264.html">Thread Prev</a>] [<a href="msg00266.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: relax-commits@xxxxxxx</li>
<li class="menuitem">
<em>Date</em>: Mon, 27 Dec 2010 12:05:10 -0000</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00265.html">E1PXBp8-0002Wh-HC@subversion.gna.org</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>edward</strong> on December 27, 2010 - 13:05:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Author: bugman
Date: Mon Dec 27 13:05:10 2010
New Revision: 11965

URL: <a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax?rev=11965&amp;view=rev">http://svn.gna.org/viewcvs/relax?rev=11965&amp;view=rev</a>
Log:
The dauvergne_protocol module docstring is now being created by 
doc_builder.to_docstring().

The original docstring has been converted into a list of lists data structure.


Modified:
    branches/bieri_gui/auto_analyses/dauvergne_protocol.py

Modified: branches/bieri_gui/auto_analyses/dauvergne_protocol.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/bieri_gui/auto_analyses/dauvergne_protocol.py?rev=11965&amp;r1=11964&amp;r2=11965&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/bieri_gui/auto_analyses/dauvergne_protocol.py?rev=11965&amp;r1=11964&amp;r2=11965&amp;view=diff</a>
==============================================================================
--- branches/bieri_gui/auto_analyses/dauvergne_protocol.py (original)
+++ branches/bieri_gui/auto_analyses/dauvergne_protocol.py Mon Dec 27 
13:05:10 2010
@@ -20,132 +20,15 @@
 #                                                                            
 #
 
###############################################################################
 
-&quot;&quot;&quot;Script for black-box model-free analysis.
-
-This script is designed for those who appreciate black-boxes or those who 
appreciate complex code.  Importantly data at multiple magnetic field 
strengths is essential for this analysis.  The script will need to be heavily 
tailored to the molecule in question by changing the variables just below 
this documentation.  If you would like to change how model-free analysis is 
performed, the code in the class Main can be changed as needed.  For a 
description of object-oriented coding in python using classes, 
functions/methods, self, etc., see the python tutorial.
-
-If you have obtained this script without the program relax, please visit 
<a  rel="nofollow" href="http://nmr-relax.com">http://nmr-relax.com</a>.
-
-
-References
-==========
-
-The model-free optimisation methodology herein is that of:
-
-    - d'Auvergne, E. J. and Gooley, P. R. (2008b). Optimisation of NMR 
dynamic models II. A new methodology for the dual optimisation of the 
model-free parameters and the Brownian rotational diffusion tensor. J. 
Biomol. NMR, 40(2), 121-133
-
-Other references for features of this script include model-free model 
selection using Akaike's Information Criterion:
-
-    - d'Auvergne, E. J. and Gooley, P. R. (2003). The use of model selection 
in the model-free analysis of protein dynamics. J. Biomol. NMR, 25(1), 25-39.
-
-The elimination of failed model-free models and Monte Carlo simulations:
-
-    - d'Auvergne, E. J. and Gooley, P. R. (2006). Model-free model 
elimination: A new step in the model-free dynamic analysis of NMR relaxation 
data. J. Biomol. NMR, 35(2), 117-135.
-
-Significant model-free optimisation improvements:
-
-    - d'Auvergne, E. J. and Gooley, P. R. (2008a). Optimisation of NMR 
dynamic models I. Minimisation algorithms and their performance within the 
model-free and Brownian rotational diffusion spaces. J. Biomol. NMR, 40(2), 
107-109.
-
-Rather than searching for the lowest chi-squared value, this script searches 
for the model with the lowest AIC criterion.  This complex multi-universe, 
multi-dimensional search is formulated using set theory as the universal 
solution:
-
-    - d'Auvergne, E. J. and Gooley, P. R. (2007). Set theory formulation of 
the model-free problem and the diffusion seeded model-free paradigm. 3(7), 
483-494.
-
-The basic three references for the original and extended model-free theories 
are:
-
-    - Lipari, G. and Szabo, A. (1982a). Model-free approach to the 
interpretation of nuclear magnetic-resonance relaxation in macromolecules I. 
Theory and range of validity. J. Am. Chem. Soc., 104(17), 4546-4559.
-
-    - Lipari, G. and Szabo, A. (1982b). Model-free approach to the 
interpretation of nuclear magnetic-resonance relaxation in macromolecules II. 
Analysis of experimental results. J. Am. Chem. Soc., 104(17), 4559-4570.
-
-    - Clore, G. M., Szabo, A., Bax, A., Kay, L. E., Driscoll, P. C., and 
Gronenborn, A.M. (1990). Deviations from the simple 2-parameter model-free 
approach to the interpretation of N-15 nuclear magnetic-relaxation of 
proteins. J. Am. Chem. Soc., 112(12), 4989-4991.
-
-
-How to use this script
-======================
-
-The value of the variable diff_model will determine the behaviour of this 
script.  The five diffusion models used in this script are:
-
-    - Model I   (MI)   - Local tm.
-    - Model II  (MII)  - Sphere.
-    - Model III (MIII) - Prolate spheroid.
-    - Model IV  (MIV)  - Oblate spheroid.
-    - Model V   (MV)   - Ellipsoid.
-
-Model I must be optimised prior to any of the other diffusion models, while 
the Models II to V can be optimised in any order.  To select the various 
models, set the variable diff_model to the following strings:
-
-    - MI   - 'local_tm'
-    - MII  - 'sphere'
-    - MIII - 'prolate'
-    - MIV  - 'oblate'
-    - MV   - 'ellipsoid'
-
-This approach has the advantage of eliminating the need for an initial 
estimate of a global diffusion tensor and removing all the problems 
associated with the initial estimate.
-
-It is important that the number of parameters in a model does not exceed the 
number of relaxation data sets for that spin.  If this is the case, the list 
of models in the mf_models and local_tm_models variables will need to be 
trimmed.
-
-
-Model I - Local tm
-------------------
-
-This will optimise the diffusion model whereby all spin of the molecule have 
a local tm value, i.e. there is no global diffusion tensor.  This model needs 
to be optimised prior to optimising any of the other diffusion models.  Each 
spin is fitted to the multiple model-free models separately, where the 
parameter tm is included in each model.
-
-AIC model selection is used to select the models for each spin.
-
-
-Model II - Sphere
------------------
-
-This will optimise the isotropic diffusion model.  Multiple steps are 
required, an initial optimisation of the diffusion tensor, followed by a 
repetitive optimisation until convergence of the diffusion tensor.  Each of 
these steps requires this script to be rerun. For the initial optimisation, 
which will be placed in the directory './sphere/init/', the following steps 
are used:
-
-The model-free models and parameter values for each spin are set to those of 
diffusion model MI.
-
-The local tm parameter is removed from the models.
-
-The model-free parameters are fixed and a global spherical diffusion tensor 
is minimised.
-
-
-For the repetitive optimisation, each minimisation is named from 'round_1' 
onwards.  The initial 'round_1' optimisation will extract the diffusion 
tensor from the results file in './sphere/init/', and the results will be 
placed in the directory './sphere/round_1/'.  Each successive round will take 
the diffusion tensor from the previous round.  The following steps are used:
-
-The global diffusion tensor is fixed and the multiple model-free models are 
fitted to each spin.
-
-AIC model selection is used to select the models for each spin.
-
-All model-free and diffusion parameters are allowed to vary and a global 
optimisation of all parameters is carried out.
-
-
-Model III - Prolate spheroid
-----------------------------
-
-The methods used are identical to those of diffusion model MII, except that 
an axially symmetric diffusion tensor with Da &gt;= 0 is used.  The base 
directory containing all the results is './prolate/'.
-
-
-Model IV - Oblate spheroid
---------------------------
-
-The methods used are identical to those of diffusion model MII, except that 
an axially symmetric diffusion tensor with Da &lt;= 0 is used.  The base 
directory containing all the results is './oblate/'.
-
-
-Model V - Ellipsoid
--------------------
-
-The methods used are identical to those of diffusion model MII, except that 
a fully anisotropic diffusion tensor is used (also known as rhombic or 
asymmetric diffusion).  The base directory is './ellipsoid/'.
-
-
-
-Final run
----------
-
-Once all the diffusion models have converged, the final run can be executed. 
 This is done by setting the variable diff_model to 'final'.  This consists 
of two steps, diffusion tensor model selection, and Monte Carlo simulations.  
Firstly AIC model selection is used to select between the diffusion tensor 
models.  Monte Carlo simulations are then run solely on this selected 
diffusion model.  Minimisation of the model is bypassed as it is assumed that 
the model is already fully optimised (if this is not the case the final run 
is not yet appropriate).
-
-The final black-box model-free results will be placed in the file 
'final/results'.
-&quot;&quot;&quot;
-
 # Python module imports.
 from os import getcwd, listdir, sep
 from re import search
 from string import lower
 
 # relax module imports.
+from doc_builder import LIST, PARAGRAPH, SECTION, SUBSECTION, TITLE, 
to_docstring
 from float import floatAsByteArray
+from info import Info_box; info = Info_box()
 from generic_fns.mol_res_spin import generate_spin_id, spin_index_loop, 
spin_loop
 from generic_fns import pipes
 from generic_fns import selection
@@ -153,6 +36,68 @@
 from relax_errors import RelaxError
 from relax_io import DummyFileObject
 from status import Status
+
+
+doc = [
+        [TITLE, &quot;Script for black-box model-free analysis.&quot;],
+        [PARAGRAPH, &quot;This script is designed for those who appreciate 
black-boxes or those who appreciate complex code.  Importantly data at 
multiple magnetic field strengths is essential for this analysis.  The script 
will need to be heavily tailored to the molecule in question by changing the 
variables just below this documentation.  If you would like to change how 
model-free analysis is performed, the code in the class Main can be changed 
as needed.  For a description of object-oriented coding in python using 
classes, functions/methods, self, etc., see the python tutorial.&quot;],
+        [PARAGRAPH, &quot;If you have obtained this script without the program 
relax, please visit <a  rel="nofollow" href="http://nmr-relax.com.&quot">http://nmr-relax.com.&quot</a>;],
+        [SECTION, &quot;References&quot;],
+        [PARAGRAPH, &quot;The model-free optimisation methodology herein is that 
of:&quot;],
+        [LIST, info.bib['dAuvergneGooley08b'].cite_short()],
+        [PARAGRAPH, &quot;Other references for features of this script include 
model-free model selection using Akaike's Information Criterion:&quot;],
+        [LIST, info.bib['dAuvergneGooley03'].cite_short()],
+        [PARAGRAPH, &quot;The elimination of failed model-free models and Monte 
Carlo simulations:&quot;],
+        [LIST, info.bib['dAuvergneGooley06'].cite_short()],
+        [PARAGRAPH, &quot;Significant model-free optimisation improvements:&quot;],
+        [LIST, info.bib['dAuvergneGooley08a'].cite_short()],
+        [PARAGRAPH, &quot;Rather than searching for the lowest chi-squared value, 
this script searches for the model with the lowest AIC criterion.  This 
complex multi-universe, multi-dimensional search is formulated using set 
theory as the universal solution:&quot;],
+        [LIST, info.bib['dAuvergneGooley07'].cite_short()],
+        [PARAGRAPH, &quot;The basic three references for the original and 
extended model-free theories are:&quot;],
+        [LIST, info.bib['LipariSzabo82a'].cite_short()],
+        [LIST, info.bib['LipariSzabo82b'].cite_short()],
+        [LIST, info.bib['Clore90'].cite_short()],
+        [SECTION, &quot;How to use this script&quot;],
+        [PARAGRAPH, &quot;The value of the variable diff_model will determine the 
behaviour of this script.  The five diffusion models used in this script 
are:&quot;],
+        [LIST, &quot;Model I   (MI)   - Local tm.&quot;],
+        [LIST, &quot;Model II  (MII)  - Sphere.&quot;],
+        [LIST, &quot;Model III (MIII) - Prolate spheroid.&quot;],
+        [LIST, &quot;Model IV  (MIV)  - Oblate spheroid.&quot;],
+        [LIST, &quot;Model V   (MV)   - Ellipsoid.&quot;],
+        [PARAGRAPH, &quot;Model I must be optimised prior to any of the other 
diffusion models, while the Models II to V can be optimised in any order.  To 
select the various models, set the variable diff_model to the following 
strings:&quot;],
+        [LIST, &quot;MI   - 'local_tm'&quot;],
+        [LIST, &quot;MII  - 'sphere'&quot;],
+        [LIST, &quot;MIII - 'prolate'&quot;],
+        [LIST, &quot;MIV  - 'oblate'&quot;],
+        [LIST, &quot;MV   - 'ellipsoid'&quot;],
+        [PARAGRAPH, &quot;This approach has the advantage of eliminating the need 
for an initial estimate of a global diffusion tensor and removing all the 
problems associated with the initial estimate.&quot;],
+        [PARAGRAPH, &quot;It is important that the number of parameters in a 
model does not exceed the number of relaxation data sets for that spin.  If 
this is the case, the list of models in the mf_models and local_tm_models 
variables will need to be trimmed.&quot;],
+        [SUBSECTION, &quot;Model I - Local tm&quot;],
+        [PARAGRAPH, &quot;This will optimise the diffusion model whereby all spin 
of the molecule have a local tm value, i.e. there is no global diffusion 
tensor.  This model needs to be optimised prior to optimising any of the 
other diffusion models.  Each spin is fitted to the multiple model-free 
models separately, where the parameter tm is included in each model.&quot;],
+        [PARAGRAPH, &quot;AIC model selection is used to select the models for 
each spin.&quot;],
+        [SUBSECTION, &quot;Model II - Sphere&quot;],
+        [PARAGRAPH, &quot;This will optimise the isotropic diffusion model.  
Multiple steps are required, an initial optimisation of the diffusion tensor, 
followed by a repetitive optimisation until convergence of the diffusion 
tensor.  Each of these steps requires this script to be rerun. For the 
initial optimisation, which will be placed in the directory './sphere/init/', 
the following steps are used:&quot;],
+        [PARAGRAPH, &quot;The model-free models and parameter values for each 
spin are set to those of diffusion model MI.&quot;],
+        [PARAGRAPH, &quot;The local tm parameter is removed from the models.&quot;],
+        [PARAGRAPH, &quot;The model-free parameters are fixed and a global 
spherical diffusion tensor is minimised.&quot;],
+        [PARAGRAPH, &quot;For the repetitive optimisation, each minimisation is 
named from 'round_1' onwards.  The initial 'round_1' optimisation will 
extract the diffusion tensor from the results file in './sphere/init/', and 
the results will be placed in the directory './sphere/round_1/'.  Each 
successive round will take the diffusion tensor from the previous round.  The 
following steps are used:&quot;],
+        [PARAGRAPH, &quot;The global diffusion tensor is fixed and the multiple 
model-free models are fitted to each spin.&quot;],
+        [PARAGRAPH, &quot;AIC model selection is used to select the models for 
each spin.&quot;],
+        [PARAGRAPH, &quot;All model-free and diffusion parameters are allowed to 
vary and a global optimisation of all parameters is carried out.&quot;],
+        [SUBSECTION, &quot;Model III - Prolate spheroid&quot;],
+        [PARAGRAPH, &quot;The methods used are identical to those of diffusion 
model MII, except that an axially symmetric diffusion tensor with Da &gt;= 0 is 
used.  The base directory containing all the results is './prolate/'.&quot;],
+        [SUBSECTION, &quot;Model IV - Oblate spheroid&quot;],
+        [PARAGRAPH, &quot;The methods used are identical to those of diffusion 
model MII, except that an axially symmetric diffusion tensor with Da &lt;= 0 is 
used.  The base directory containing all the results is './oblate/'.&quot;],
+        [SUBSECTION, &quot;Model V - Ellipsoid&quot;],
+        [PARAGRAPH, &quot;The methods used are identical to those of diffusion 
model MII, except that a fully anisotropic diffusion tensor is used (also 
known as rhombic or asymmetric diffusion).  The base directory is 
'./ellipsoid/'.&quot;],
+        [SUBSECTION, &quot;Final run&quot;],
+        [PARAGRAPH, &quot;Once all the diffusion models have converged, the final 
run can be executed.  This is done by setting the variable diff_model to 
'final'.  This consists of two steps, diffusion tensor model selection, and 
Monte Carlo simulations.  Firstly AIC model selection is used to select 
between the diffusion tensor models.  Monte Carlo simulations are then run 
solely on this selected diffusion model.  Minimisation of the model is 
bypassed as it is assumed that the model is already fully optimised (if this 
is not the case the final run is not yet appropriate).&quot;],
+        [PARAGRAPH, &quot;The final black-box model-free results will be placed 
in the file 'final/results'.&quot;]
+]
+
+
+# Build the module docstring.
+__doc__ = to_docstring(doc)
 
 
 



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Mon Dec 27 13:20:02 2010</div>  
</body>
</html>
