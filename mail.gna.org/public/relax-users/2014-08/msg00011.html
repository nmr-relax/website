<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: R1rho RD analysis -->
<!--X-From-R13: Febryf Szgrxæe Zvaarg &#60;gyvaargNaze&#45;erynk.pbz> -->
<!--X-Date: Wed, 13 Aug 2014 10:56:53 +0200 -->
<!--X-Message-Id: CA+CBx2PuOqF_mxB4q3p9quRDU3&#45;2CN&#45;DP8rKine92Kpo5Ggy3w@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: mailman.0.1400242739.20441.relax&#45;users@gna.org -->
<!--X-Reference: 537A143C.3020901@ibs.fr -->
<!--X-Reference: CAED9pY8GmeRj=HfGGb9x0Gk00bn1vBQYfYsUFDTzRmgyY7B_VA@mail.gmail.com -->
<!--X-Reference: 537E0B05.3060000@ibs.fr -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: R1rho RD analysis -- August 13, 2014 - 10:56</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: R1rho RD analysis</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00011" class="tabs">Index by Date</a> | <a href="threads.html#00011" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00010.html">Date Prev</a>] [<a href="msg00012.html">Date Next</a>] [<a href="msg00010.html">Thread Prev</a>] [<a href="msg00029.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: pma &lt;Peixiang.Ma@xxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Wed, 13 Aug 2014 10:56:02 +0200</li>
<li class="menuitem">
<em>Cc</em>: &quot;relax-users@xxxxxxx&quot; &lt;relax-users@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113; h=mime-version:sender:in-reply-to:references:from:date:message-id :subject:to:cc:content-type; bh=TxF2XjAP9+QNjMWpnmwIH6+PZQHzLk8gSkZ6T2jSiS0=; b=GREqIBQ8SSvYVSa0kUrq5PqDY4QhMV7PJkozzhQxua3K4dTxSkfdcXxMEk71emomAe GtshcrCGaeLV1tmdUhgOxsK9srbv8jM8voxto9yy1dz/6C+d8KAtleikyxIs9REIX8lE DAzlHtroSy07ADr8aEMttj5iwejahNTEtL3Rb5z23orYqzyFQoV1eTwaroZ5pOeBdjDs u2yO2onci+5ihyfipdNFc2OD33KyQ7snLVI1jdDWhzHWQbtb6ukkOqH455J1xrImtA+q mOkwKkTczBf0S1onzvmDxTkOtBbVp3my4e2HD1LaPZUxJdUIFi0uxng098kfyYEt0srh 1+LQ==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00011.html">CA+CBx2PuOqF_mxB4q3p9quRDU3-2CN-DP8rKine92Kpo5Ggy3w@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;mailman.0.1400242739.20441.relax-users@gna.org&gt; &lt;537A143C.3020901@ibs.fr&gt; &lt;CAED9pY8GmeRj=HfGGb9x0Gk00bn1vBQYfYsUFDTzRmgyY7B_VA@mail.gmail.com&gt; &lt;537E0B05.3060000@ibs.fr&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Troels Emtekær Linnet</strong> on August 13, 2014 - 10:56:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Dear Peixiang.

I have just discovered a bug in relax, where the 'relax_times' is not
properly loaded from the data-store and sent to the target function of
model NS R1rho 2-site.

This means that currently 'NS R1rho 2-site' can only be used for fixed
time at the moment.

This bug has no influence on all other R1rho models, as they don't use
relax_time in their equations.

Best
Troels

2014-05-22 16:34 GMT+02:00 pma &lt;Peixiang.Ma@xxxxxx&gt;:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi, Edward,

Thanks for you reply. I used the script mode in linux.

I tried with 'r1rho_on_res_m61.py', but I think in the script it has a
mistake.
in line27 ds.fixed = True, I think it should be False, because this
experiment has different time period, they do not need the ref. I changed to
False, the M61 model still give right result.

But I still have some other questions.

1. How did you declare replicates in such Variable relaxation period
experiments? I saw in the example r1rho_on_res_m61.py, you read all the data
into a big Matrix data and did not declare the replicate. But for the fixed
time period you declare by the spectrum ID. Did you have a solution for
this?

2.  I want to test NS R1rho 2-site, so I simply add it into the MODELS in
'r1rho_on_res_m61.py'. It seems does not work.
first, they give the warning when it comes to NS R1rho 2-site, (grid_inc =8
)
------------------------------------------------------------------------------------------------------------------------------
Searching through 32768 grid nodes.
lib/dispersion/ns_r1rho_2site.py:118: RuntimeWarning: divide by zero
encountered in double_scalars
  theta = atan(spin_lock_fields[i]/dA)
lib/dispersion/ns_r1rho_2site.py:132: RuntimeWarning: invalid value
encountered in double_scalars
  back_calc[i]= -inv_relax_time * log(MA)
-----------------------------------------------------------------------------------------------------------------------------
I think the grid search is too heavy for the NS model, do you have a
solution to constrain it?

Or for example, if I want to limit grid search only for kex and pA, but not
for others, how can I declare that?

For RuntimeWarning: divide by zero encountered in double_scalars, do you
have suggestions for this?

The final results for 'NS R1rho 2-site' did not fit at all, so the data for
M61 can only be fit with M61 model but not other models?

Thanks a lot!

Peixiang


On 05/19/2014 05:49 PM, Edward d'Auvergne wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">

Hi Peixiang,

Welcome to the relax mailing lists!  The relaxation dispersion
analysis implemented in relax is quite flexible, and the data you have
is supported.  This is well documented in the relax manual which you
should have with your copy of relax (the docs/relax.pdf file).  Have a
look at section 'The R2eff model' in the dispersion chapter of the
manual (<a  rel="nofollow" href="http://www.nmr-relax.com/manual/R2eff_model.html">http://www.nmr-relax.com/manual/R2eff_model.html</a>),
specifically the 'Variable relaxation period experiments' subsection.

Unfortunately the sample scripts are all for the fixed time dispersion
experiments.  However you could have a look at one of the scripts used
for the test suite in relax:

test_suite/system_tests/scripts/relax_disp/exp_fit.py

This script is run in the test suite to ensue that the data you have
will always be supported.  There are many more scripts in that
directory which you might find interesting.  The 'r1rho_on_res_m61.py'
script also involve an exponential fit with many different relaxation
time periods.

You could also try using the relax graphical user interface (GUI) by
running:

$ relax -g

Here you simply load the peak list data via the 'Add' button in the
'Spectra list' GUI element and, when you reach the relaxation time
wizard page, simply specify different times for the different spectra
- relax will handle the rest.  Have a look at
<a  rel="nofollow" href="http://www.nmr-relax.com/manual/Dispersion_GUI_mode_loading_data.html">http://www.nmr-relax.com/manual/Dispersion_GUI_mode_loading_data.html</a>
(the GUI section of the dispersion chapter).  The GUI should be much
easier to use than the script UI, though a lot less flexible if you
wish to perform custom, non-standard analyses.

Regards,

Edward



On 19 May 2014 16:25, pma &lt;Peixiang.Ma@xxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">

Hi, all,

Did anybody manage to fit the R1rho relaxation dispersion from some
calculated R2 data (e.g. I fitted the different relax_delay time to
extract
R1rho, then calculate R2 = R1rho/sin^2 - R1/tan^2 )

I found a tutorial on wiki, but it stopped after processing the spectra,
actually I finished this part already. Besides,in the manual for R1rho
calc
(page 173 in the manual) in the R2eff model, it defined
R1rho(w1)=-1/T*ln(I1(w1)/I0), e.g. it assume the mono-dispersion between
time 0 and a fix time point. We did a bit different, we recorded a series
of
time points and got the R1rho for each w1.

Now I have all the R2s, I want to use the implemented R1rho models to fit
my
data.

I think relax should be possible to do the fitting with custom calculated
R2, what kind of format should I use? Can anyone show an example of
import
file and the processing scripts? Then I could reformat my data to the
template format.

Now my data looks like the following: for each RF_frq the R2 has such
format

res_num    w1(Hz)    value    error
            1    1200 30.7734534261 2.68087025208
            1    2000 23.0503960923 1.53567705225
             ...................


Thanks a lot!

Peixiang

On 05/16/2014 02:18 PM, relax-users-request@xxxxxxx wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">

Welcome to the relax-users@xxxxxxx mailing list!

To post to this list, send your message to:

    relax-users@xxxxxxx

</pre></blockquote><pre style="margin: 0em;">_______________________________________________
relax (<a  rel="nofollow" href="http://www.nmr-relax.com">http://www.nmr-relax.com</a>)

This is the relax-users mailing list
relax-users@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="https://mail.gna.org/listinfo/relax-users">https://mail.gna.org/listinfo/relax-users</a>
</pre></blockquote></blockquote><pre style="margin: 0em;">



_______________________________________________
relax (<a  rel="nofollow" href="http://www.nmr-relax.com">http://www.nmr-relax.com</a>)

This is the relax-users mailing list
relax-users@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="https://mail.gna.org/listinfo/relax-users">https://mail.gna.org/listinfo/relax-users</a>
</pre></blockquote><pre style="margin: 0em;">


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Thu Aug 28 11:40:16 2014</div>  
</body>
</html>
