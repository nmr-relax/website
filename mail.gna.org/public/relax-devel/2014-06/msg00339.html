<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [bug #22212] Plotting of graphs in disp speed branch is broken -->
<!--X-From-R13: Febryf Szgrxæe Zvaarg &#60;gyvaargNaze&#45;erynk.pbz> -->
<!--X-Date: Wed, 18 Jun 2014 11:18:48 +0200 -->
<!--X-Message-Id: CA+CBx2NCzQS&#45;At&#45;2rZeoKr6EhXAPxux2HcKR1q5HahEBzgJ0Ew@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 20140617&#45;194604.sv20529.7988@gna.org -->
<!--X-Reference: CAED9pY8uWpNF=R2KZzGQS3vZ=V8KP5H0X0dYYW7yHjDsd6kKew@mail.gmail.com -->
<!--X-Reference: CA+CBx2Mt5&#45;Mj70bnERnnYb7K6K8P=an4eUTEc9g58T8N_Ozx9A@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [bug #22212] Plotting of graphs in disp speed branch is broken -- June 18, 2014 - 11:18</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: [bug #22212] Plotting of graphs in disp speed branch is broken</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00339" class="tabs">Index by Date</a> | <a href="threads.html#00339" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00338.html">Date Prev</a>] [<a href="msg00340.html">Date Next</a>] [<a href="msg00338.html">Thread Prev</a>] [<a href="msg00341.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: &quot;Edward d'Auvergne&quot; &lt;edward@xxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Wed, 18 Jun 2014 11:17:57 +0200</li>
<li class="menuitem">
<em>Cc</em>: &quot;Troels E. Linnet&quot; &lt;NO-REPLY.INVALID-ADDRESS@xxxxxxx&gt;, &quot;relax-devel@xxxxxxx&quot; &lt;relax-devel@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113; h=mime-version:sender:in-reply-to:references:from:date:message-id :subject:to:cc:content-type; bh=g5cnmA3EWpbhOmcYyidv3+ZMF4Yb/ee8ASWDU5BGfpw=; b=q1nMmxd0xnl/3sifngmY5wH3TiwLjSfoXxO9w8nZx1GMV28UfMZc1UbHhtQAz95oU1 nyTIxF1a2/uA0UqB7KJVxO/ASeQ9G68XvfK+vEoCXAptXvo0kxXRBbgRFslL7YuXV49C 5BIOkFLxSGFkgPrAGEjeuOTikiAXemLgCgOI6UPIvfCwmXOo/2b5r0EWluVFv1thdL6x fFDbVHJOKJvYhywQ/EZ2et96sKj0pqLCIeDk1JEWBGcNviPXi4MbhT69SzHo9HzKk43s 5h4+y/4mph5rtToy3oXx0aDVAGyw/TtzU4BfdWiNsArUslRg7CYPj5Lt/ndEO+k6Q2qj doYQ==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00339.html">CA+CBx2NCzQS-At-2rZeoKr6EhXAPxux2HcKR1q5HahEBzgJ0Ew@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;<a href="msg00315.html">20140617-194604.sv20529.7988@gna.org</a>&gt; &lt;CAED9pY8uWpNF=R2KZzGQS3vZ=V8KP5H0X0dYYW7yHjDsd6kKew@mail.gmail.com&gt; &lt;CA+CBx2Mt5-Mj70bnERnnYb7K6K8P=an4eUTEc9g58T8N_Ozx9A@mail.gmail.com&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Troels Emtekær Linnet</strong> on June 18, 2014 - 11:18:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">And

                pack_back_calc_r2eff(spin=memo.spins[spin_index],
spin_id=memo.spin_ids[spin_index], si=si, back_calc=self.back_calc,
proton_mmq_flag=proton_mmq_flag)

And should I make a:
self.get_missing() function?


2014-06-18 11:12 GMT+02:00 Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxxxxxx&gt;:

</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi Ed.

I worry about this, in specific_analyses/relax_disp/data.py
specific_analyses/relax_disp/optimisation.py
should
back_calc=model.back_calc
be
back_calc=model.get_back_calc()

        # Create the result command object to send back to the master.
        processor.return_object(Disp_result_command(processor=processor,
memo_id=self.memo_id, param_vector=param_vector, chi2=chi2,
iter_count=iter_count, f_count=f_count, g_count=g_count, h_count=h_count,
warning=warning, missing=self.missing, back_calc=model.back_calc,
completed=False))



2014-06-17 23:23 GMT+02:00 Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt;:

Hi,
</pre><blockquote class="blockquote"><pre style="margin: 0em;">

It's not really necessary to create a bug report for the development
branches, as the bug tracker is more for communicating with users and
the users will not use the branch code.  We can just discuss on the
list.  For this, I would strongly suggest you consider adding
get_back_calc() method to the dispersion target function class:

<a  rel="nofollow" href="http://thread.gmane.org/gmane.science.nmr.relax.scm/21692/focus=6238">http://thread.gmane.org/gmane.science.nmr.relax.scm/21692/focus=6238</a>
<a  rel="nofollow" href="http://thread.gmane.org/gmane.science.nmr.relax.devel/6264/focus=6265">http://thread.gmane.org/gmane.science.nmr.relax.devel/6264/focus=6265</a>

I believe this problem will keep biting you until you solve it ;)
This is used in a few places in the dispersion modules:

$ grep back_calc specific_analyses/relax_disp/*

It would save you future pain to make sure this new numpy array
structure is either converted back to a list of lists with no blank
dispersion points by get_back_calc(), or the new structure is handled
correctly everywhere by carefully checking all code accessing it.

Regards,

Edward



On 17 June 2014 21:46, Troels E. Linnet
&lt;NO-REPLY.INVALID-ADDRESS@xxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">URL:
  &lt;<a  rel="nofollow" href="http://gna.org/bugs/?22212">http://gna.org/bugs/?22212</a>&gt;

                 Summary: Plotting of graphs in disp speed branch is
</pre></blockquote><pre style="margin: 0em;">broken
</pre><blockquote class="blockquote"><pre style="margin: 0em;">                 Project: relax
            Submitted by: tlinnet
            Submitted on: Tue 17 Jun 2014 07:46:04 PM UTC
                Category: None
Specific analysis category: None
                Priority: 5 - Normal
                Severity: 3 - Normal
                  Status: None
             Assigned to: tlinnet
         Originator Name:
        Originator Email:
             Open/Closed: Open
                 Release: Branches
         Discussion Lock: Any
        Operating System: None

    _______________________________________________________

Details:

Something is wrong with the plotting of data



    _______________________________________________________

File Attachments:


-------------------------------------------------------
Date: Tue 17 Jun 2014 07:46:04 PM UTC  Name: disp_1_N.png  Size: 9kB
</pre></blockquote><pre style="margin: 0em;">By:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">tlinnet

&lt;<a  rel="nofollow" href="http://gna.org/bugs/download.php?file_id=21070">http://gna.org/bugs/download.php?file_id=21070</a>&gt;

    _______________________________________________________

Reply to this item at:

  &lt;<a  rel="nofollow" href="http://gna.org/bugs/?22212">http://gna.org/bugs/?22212</a>&gt;

_______________________________________________
  Message sent via/by Gna!
  <a  rel="nofollow" href="http://gna.org/">http://gna.org/</a>


_______________________________________________
relax (<a  rel="nofollow" href="http://www.nmr-relax.com">http://www.nmr-relax.com</a>)

This is the relax-devel mailing list
relax-devel@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="https://mail.gna.org/listinfo/relax-devel">https://mail.gna.org/listinfo/relax-devel</a>
</pre></blockquote><pre style="margin: 0em;">

</pre></blockquote><pre style="margin: 0em;">


</pre></blockquote><pre style="margin: 0em;">

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00341" href="msg00341.html">Re: [bug #22212] Plotting of graphs in disp speed branch is broken</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00315" href="msg00315.html">[bug #22212] Plotting of graphs in disp speed branch is broken</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
<li><strong><a name="00321" href="msg00321.html">Re: [bug #22212] Plotting of graphs in disp speed branch is broken</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00338" href="msg00338.html">Re: [bug #22212] Plotting of graphs in disp speed branch is broken</a></strong>
<ul><li><em>From:</em> Troels Emtekær Linnet</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Wed Jun 18 11:40:15 2014</div>  
</body>
</html>
