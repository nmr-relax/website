<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: [sr #3078] Parse spin.model names to the value.write user	function. -->
<!--X-From-R13: "Sqjneq q'Ohiretar" <rqjneq.qnhiretarNtznvy.pbz> -->
<!--X-Date: Tue, 10 Sep 2013 18:20:38 +0200 -->
<!--X-Message-Id: CAED9pY&#45;Oad0nKJ5kNjXkr9F&#45;CkoMPOZqsPioKADKvTkXU6ZF&#45;Q@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 20130910&#45;135824.sv20529.32975@gna.org -->
<!--X-Reference: 20130910&#45;142256.sv20529.84341@gna.org -->
<!--X-Reference: CAED9pY&#45;HCH&#45;1kVZzJ2R8gTEp=AwN568HcaOeYThdmjLwidc1tA@mail.gmail.com -->
<!--X-Reference: CA+CBx2PNMC_ZdCeX_+pcFOb0_1nGsoCz1QGuByqr+zsFqi+OFQ@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [sr #3078] Parse spin.model names to the value.write user	function. -- September 10, 2013 - 18:20</title>
<link rel="stylesheet" type="text/css" href="/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="https://gna.org/images/gna.theme/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: [sr #3078] Parse spin.model names to the value.write user	function.</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00136" class="tabs">Index by Date</a> | <a href="threads.html#00136" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00135.html">Date Prev</a>] [<a href="msg00137.html">Date Next</a>] [<a href="msg00137.html">Thread Prev</a>] [Thread Next]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Tue, 10 Sep 2013 18:20:06 +0200</li>
<li class="menuitem">
<em>Cc</em>: &quot;Troels E. Linnet&quot; &lt;NO-REPLY.INVALID-ADDRESS@xxxxxxx&gt;,	&quot;relax-devel@xxxxxxx&quot; &lt;relax-devel@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;	h=mime-version:in-reply-to:references:date:message-id:subject:from:to	:cc:content-type:content-transfer-encoding;	bh=m/r6mrHcWkbDsoPz5YRsNLsSawSZBm6FT104k4XURSk=;	b=PMp+lZkITYxMmESHZPf7REYPPrwFZHvEjwrnjj/1t1r2a+OqHif8eONgIy0Xl8IYvg	3O7cmzHuAU1IMe7z4jlKscB370Lo5/Rsw+qplUVuxD0upXGTWgiUUc4bQf3ImVIhvCZN	p6hlMYFVzI29WTcHWIZeiFrFbREfHQgCnd16TnBwfet+mSMtRPl3mhOz+gxpQT5HDEnQ	wh6i67BPLF5ZZhbiFeuv0mXFvDA6YTbUj1vOmq23v4Ab1RmsrgaEpdwRhU57BNfwccQX	5DxStnJI9QHl88jjPSJ3mFgVc2h+rY8YskEpD6bzfGQwzjPJBETazKUCFrMyFhGzd+wb	rm9Q==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00136.html">CAED9pY-Oad0nKJ5kNjXkr9F-CkoMPOZqsPioKADKvTkXU6ZF-Q@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;20130910-135824.sv20529.32975@xxxxxxx&gt;	&lt;20130910-142256.sv20529.84341@xxxxxxx&gt;	&lt;CAED9pY-HCH-1kVZzJ2R8gTEp=AwN568HcaOeYThdmjLwidc1tA@xxxxxxxxxxxxxx&gt;	&lt;CA+CBx2PNMC_ZdCeX_+pcFOb0_1nGsoCz1QGuByqr+zsFqi+OFQ@xxxxxxxxxxxxxx&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on September 10, 2013 - 18:20:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Hi,

Please see below:


On 10 September 2013 16:59, Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Well well well.

That's very smart with the list of things which should be written out.

So, I think it now boils down to a level of convenience.

----------
* Problem

When I look in the &quot;final&quot; run directory, I do not readily have access
to a file (or a plot ref:
<a  rel="nofollow" href="http://article.gmane.org/gmane.science.nmr.relax.devel/4425">http://article.gmane.org/gmane.science.nmr.relax.devel/4425</a>)
which tells me which model has been used per spin.
</pre></blockquote><pre style="margin: 0em;">

This is a bit of an aside, but why does the model matter?  From the
biological perspective what matters is the dynamics, or how the system
is moving.  The information about the model itself does not say
anything about what is happening in the system being studied.  And the
differences between the models is only statistical significance.  What
would be of more interest would be a plot of the parameters onto the
3D structure in PyMOL or MOLMOL.  This is by far the best way to
extract the biological story from the results.

Note that most of the models should be removed from the analysis
unless it is considered valid for the data.  So for example if you
know that all spins are undergoing fast exchange, then the slow
exchange models should not be used, and vice versa.  Or if you are not
interested in the analytic models, then you can skip those (using the
CR72 model would speed up the calculations though).  But when the
analytic models are within their range of validity, the dynamics
parameters should be very similar to the numeric parameter values.
The list of models you use in the end should be quite limited and they
should give similar results.  The main comparison will be to the 'No
Rex' model.  You would then use this model information to plan how you
would perform a subsequent analysis with clustering.

For this point though, I think that having a 'model.out' file is
reasonable.  The information in a 'model.out' file could be useful for
planning the next analysis with clustering.


</pre><blockquote class="blockquote"><pre style="margin: 0em;">I see this information as vital, and I believe it should be presented
as easy as possible.
</pre></blockquote><pre style="margin: 0em;">

Why is it vital?  What does it say?  The model is simply a tool to
extract information, it is not the information itself.

The way this would be normally performed in the GUI is that, once the
auto-analysis has completed, the user would produce any additional
output they wish with the user function menu entries.  Or they would
use one of the sample scripts as described below.


</pre><blockquote class="blockquote"><pre style="margin: 0em;">I can create such a list in relax, but is is not &quot;easily reached&quot;.
</pre></blockquote><pre style="margin: 0em;">

Using the user functions and the sample scripts, once the analysis is
complete, this is relatively easy.


</pre><blockquote class="blockquote"><pre style="margin: 0em;">I do not understand why there is a desire not to include a column with
the spin.model information.
There is probably a deeper lying reason for this.
</pre></blockquote><pre style="margin: 0em;">

Because the information of which model was selected has zero
biological relevance.  It is a huge distraction to the user and gets
in their way from concentrating on the truly interesting part of the
analysis - the dynamics.  When looking at the timescale of motional
processes in a biomolecule, your conclusions as to the biological
significance of this motion will not be influenced by the choice of
model.  I have deliberately prevented users from accessing this
information in the model-free part of relax because there were too
many instances of users presenting a 'plot' of the selected model and
concentrating on the per spin model rather than the timescales and
amplitudes of motion.  It really does not say anything about the
motion, it is simply a distraction for the user.  The user should be
looking at the dynamics and why that is important, and not the model.
This aspect is also a strong reason why the Kay group have abandoned
the use of analytic models - there is far too much emphasis on models
and selecting between them - but the model is of zero interest.  The
numeric models can replace all of the analytic models.  Using only the
numeric model has the equivalent effect of slapping the user in the
face and telling them to stop looking at the model.

I do not want to prevent this from being done, relax is designed to be
flexible enough to do as anyone wishes.  But the default would be not
to present this to the user.  It is better that the user concentrate
on the dynamics, not the model information.  The logs and the
'model.out' file would be the only places where a user can access that
information (apart from generating custom tables after the analysis
completes).  From that together with the dispersion plot, they can
then judge if the analysis should be repeated without that model.


</pre><blockquote class="blockquote"><pre style="margin: 0em;">But where should I tackle this problem?
</pre></blockquote><pre style="margin: 0em;">

I think that what you are after could be better served by adding a new
sample script.  Have a look at the following files:

sample_scripts/model_free/table_csv.py
sample_scripts/model_free/table_latex.py

These scripts will take the final results file and produce either a
CSV or LaTeX file containing a table of all spins with all model names
and all parameter values.  These scripts are used to generate a table
of all results to be added to supplementary material for publications.
 They are deliberately not part of the auto-analyses, the user should
not be using them for trying to understand the dynamics of the system
or to answer their biological questions.  It should be possible to
create this with the value.write user function, but a custom script
like the two above might be best.  Is this what you had in mind?


</pre><blockquote class="blockquote"><pre style="margin: 0em;">1) The spin.model is included as column in the value.write parameter file.
- Cons: This information is superfluous for the writing of each of the 
models.
- Cons: Change of file formats can give un-expected problems for users.
</pre></blockquote><pre style="margin: 0em;">

The biggest con is that each user believes that a different piece of
information is the most important to have - especially sitting side by
side with the results they are looking at.  And for each analysis type
in relax, what is considered important would always be different.  So
we could also include arguments for the selection flag, for the
'fixed' flag, for the pseudo-contact shift value, for the chemical
shift, for the minimisation warning flags, for the chi-squared value,
for the number of data sets analysed, for the parameter list, for the
J-coupling value, etc.  The list is endless.  If we were to include
the model information, then by exactly the same argument all of the
other information should also be included.  This is not feasible.
There are also many analysis types in relax where there is no such
thing as different models.  But it is feasible for a user to generate
the exact data combination they are after with the value.write user
function or a custom sample script.


</pre><blockquote class="blockquote"><pre style="margin: 0em;">2) The spin.model is included as column in the value.write parameter
file for the &quot;final&quot; round.
- Pro: This gives the overview I am looking for.
- Cons: Change of file formats can give problems.
</pre></blockquote><pre style="margin: 0em;">

As above, it doesn't fit in with the other analysis types.


</pre><blockquote class="blockquote"><pre style="margin: 0em;">3) A &quot;model&quot; file is written out for the &quot;final&quot; round.
- Cons: It is annoying to compare between two files.
</pre></blockquote><pre style="margin: 0em;">

I think this can and should be done.


</pre><blockquote class="blockquote"><pre style="margin: 0em;">4) Duplicates of all parameter files, where the copy include the
spin.model as a column.
Well, dublicate of files is not &quot;nice&quot;.
</pre></blockquote><pre style="margin: 0em;">

This is not ideal, and I believe that the user should not be presented
with this by default.  They can always use a sample script to create
the massive comparison table.


</pre><blockquote class="blockquote"><pre style="margin: 0em;">Given that linux have the ability to merge text files:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">paste kex.out dw.out
</pre></blockquote><pre style="margin: 0em;">

I can &quot;survive&quot; with option 3, and I think this is what you are hinting for.
</pre></blockquote><pre style="margin: 0em;">

</pre><blockquote class="blockquote"><pre style="margin: 0em;">From this, I believe that a table with all results with a column for
</pre></blockquote><pre style="margin: 0em;">the spin information, the spin selection flag, the model selected, and
then all parameters and errors would produce the file you are after.
Would the full results tables described above cover this?

Regards,

Edward


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00126" href="msg00126.html">[sr #3078] Parse spin.model names to the value.write user function.</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
<li><strong><a name="00131" href="msg00131.html">[sr #3078] Parse spin.model names to the value.write user function.</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
<li><strong><a name="00133" href="msg00133.html">Re: [sr #3078] Parse spin.model names to the value.write user	function.</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00134" href="msg00134.html">Re: [sr #3078] Parse spin.model names to the value.write user	function.</a></strong>
<ul><li><em>From:</em> Troels Emtekær Linnet</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer">You are on the <a href="http://gna.org">Gna!</a> mail server.</div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Tue Sep 10 18:40:06 2013</div>  
</body>
</html>
