<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: r14364 &#45; /1.3/test_suite/system_tests/model_free.py -->
<!--X-From-R13: Eéonfgvra [beva <fronfgvra.zbeva.1Nhyniny.pn> -->
<!--X-Date: Thu, 11 Aug 2011 17:43:13 +0200 -->
<!--X-Message-Id: 4E43F873.5090001@ulaval.ca -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: E1QrWgC&#45;0005ux&#45;Qw@subversion.gna.org -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: r14364 - /1.3/test_suite/system_tests/model_free.py -- August 11, 2011 - 17:43</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: r14364 - /1.3/test_suite/system_tests/model_free.py</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00029" class="tabs">Index by Date</a> | <a href="threads.html#00029" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00028.html">Date Prev</a>] [<a href="msg00030.html">Date Next</a>] [<a href="msg00024.html">Thread Prev</a>] [<a href="msg00030.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: &quot;relax-devel@xxxxxxx&quot; &lt;relax-devel@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Thu, 11 Aug 2011 17:42:43 +0200</li>
<li class="menuitem">
<em>Cc</em>: &quot;edward@xxxxxxxxxxxxx&quot; &lt;edward@xxxxxxxxxxxxx&gt;,	&quot;relax-commits@xxxxxxx&quot; &lt;relax-commits@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00029.html">4E43F873.5090001@ulaval.ca</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;E1QrWgC-0005ux-Qw@xxxxxxxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>User-agent</em>: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.6;	rv:5.0) Gecko/20110624 Thunderbird/5.0</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Sébastien Morin</strong> on August 11, 2011 - 17:43:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">
Hi Ed,

What a coincidence !!!

</pre><tt>This morning, I tested the installation of relax 1.3.10 on Linux Fedora 
</tt><tt>and I had problem with two tests (namely 
</tt><tt>&quot;test_opt_constr_bfgs_back_S2_0_970_te_2048_Rex_0_149&quot; and 
</tt><tt>&quot;test_opt_constr_bfgs_mt_S2_0_970_te_2048_Rex_0_149 
</tt><tt>(test_suite.system_tests.model_free.Mf)&quot;), probably because of the same 
</tt><tt>issue fixed in the current revision...
</tt><pre style="margin: 0em;">

</pre><tt>Below is the output of &quot;relax -s&quot;. Could you check if the problem is the 
</tt><tt>same and, if needed, fix it as you did for MS Windows..?
</tt><pre style="margin: 0em;">

Thanks !


Séb  :)

==============
[jurgen@pake relax-1.3.10]$ ./relax -s
Echoing of user function calls has been enabled.




#############################
# System / functional tests #
#############################


...............................................................................................FF.............................................................................................................
======================================================================
</pre><tt>FAIL: test_opt_constr_bfgs_back_S2_0_970_te_2048_Rex_0_149 
</tt><tt>(test_suite.system_tests.model_free.Mf)
</tt><tt>Constrained BFGS opt, backtracking line search {S2=0.970, te=2048, 
</tt><tt>Rex=0.149}
</tt><pre style="margin: 0em;">
----------------------------------------------------------------------

relax&gt; pipe.create(pipe_name='mf', pipe_type='mf')



                                            relax 1.3.10

                              Molecular dynamics by NMR data analysis

                             Copyright (C) 2001-2006 Edward d'Auvergne
                         Copyright (C) 2006-2011 the relax development team

</pre><tt>This is free software which you are welcome to modify and redistribute 
</tt><tt>under the conditions of the
</tt><tt>GNU General Public License (GPL).  This program, including all modules, 
</tt><tt>is licensed under the GPL
</tt><tt>and comes with absolutely no warranty.  For details type 'GPL' within 
</tt><tt>the relax prompt.
</tt><pre style="margin: 0em;">

</pre><tt>Assistance in using the relax prompt and scripting interface can be 
</tt><tt>accessed by typing 'help' within
</tt><pre style="margin: 0em;">
the prompt.


</pre><tt>relax&gt; sequence.read(file='noe.500.out', 
</tt><tt>dir='/s/relax-1.3.10/test_suite/shared_data/model_free/S2_0.970_te_2048_Rex_0.149', 
</tt><tt>spin_id_col=None, mol_name_col=None, res_num_col=1, res_name_col=2, 
</tt><tt>spin_num_col=None, spin_name_col=None, sep=None, spin_id=None)
</tt><tt>Opening the file 
</tt><tt>'/s/relax-1.3.10/test_suite/shared_data/model_free/S2_0.970_te_2048_Rex_0.149/noe.500.out' 
</tt><tt>for reading.
</tt><pre style="margin: 0em;">



</pre><tt>relax&gt; relax_data.read(ri_label='R1', frq_label='600', frq=600000000.0, 
</tt><tt>file='r1.600.out', 
</tt><tt>dir='/s/relax-1.3.10/test_suite/shared_data/model_free/S2_0.970_te_2048_Rex_0.149', 
</tt><tt>spin_id_col=None, mol_name_col=None, res_num_col=1, res_name_col=2, 
</tt><tt>spin_num_col=None, spin_name_col=None, data_col=3, error_col=4, 
</tt><tt>sep=None, spin_id=None)
</tt><tt>Opening the file 
</tt><tt>'/s/relax-1.3.10/test_suite/shared_data/model_free/S2_0.970_te_2048_Rex_0.149/r1.600.out' 
</tt><tt>for reading.
</tt><pre style="margin: 0em;">

</pre><tt>relax&gt; relax_data.read(ri_label='R2', frq_label='600', frq=600000000.0, 
</tt><tt>file='r2.600.out', 
</tt><tt>dir='/s/relax-1.3.10/test_suite/shared_data/model_free/S2_0.970_te_2048_Rex_0.149', 
</tt><tt>spin_id_col=None, mol_name_col=None, res_num_col=1, res_name_col=2, 
</tt><tt>spin_num_col=None, spin_name_col=None, data_col=3, error_col=4, 
</tt><tt>sep=None, spin_id=None)
</tt><tt>Opening the file 
</tt><tt>'/s/relax-1.3.10/test_suite/shared_data/model_free/S2_0.970_te_2048_Rex_0.149/r2.600.out' 
</tt><tt>for reading.
</tt><pre style="margin: 0em;">

</pre><tt>relax&gt; relax_data.read(ri_label='NOE', frq_label='600', frq=600000000.0, 
</tt><tt>file='noe.600.out', 
</tt><tt>dir='/s/relax-1.3.10/test_suite/shared_data/model_free/S2_0.970_te_2048_Rex_0.149', 
</tt><tt>spin_id_col=None, mol_name_col=None, res_num_col=1, res_name_col=2, 
</tt><tt>spin_num_col=None, spin_name_col=None, data_col=3, error_col=4, 
</tt><tt>sep=None, spin_id=None)
</tt><tt>Opening the file 
</tt><tt>'/s/relax-1.3.10/test_suite/shared_data/model_free/S2_0.970_te_2048_Rex_0.149/noe.600.out' 
</tt><tt>for reading.
</tt><pre style="margin: 0em;">

</pre><tt>relax&gt; relax_data.read(ri_label='R1', frq_label='500', frq=500000000.0, 
</tt><tt>file='r1.500.out', 
</tt><tt>dir='/s/relax-1.3.10/test_suite/shared_data/model_free/S2_0.970_te_2048_Rex_0.149', 
</tt><tt>spin_id_col=None, mol_name_col=None, res_num_col=1, res_name_col=2, 
</tt><tt>spin_num_col=None, spin_name_col=None, data_col=3, error_col=4, 
</tt><tt>sep=None, spin_id=None)
</tt><tt>Opening the file 
</tt><tt>'/s/relax-1.3.10/test_suite/shared_data/model_free/S2_0.970_te_2048_Rex_0.149/r1.500.out' 
</tt><tt>for reading.
</tt><pre style="margin: 0em;">

</pre><tt>relax&gt; relax_data.read(ri_label='R2', frq_label='500', frq=500000000.0, 
</tt><tt>file='r2.500.out', 
</tt><tt>dir='/s/relax-1.3.10/test_suite/shared_data/model_free/S2_0.970_te_2048_Rex_0.149', 
</tt><tt>spin_id_col=None, mol_name_col=None, res_num_col=1, res_name_col=2, 
</tt><tt>spin_num_col=None, spin_name_col=None, data_col=3, error_col=4, 
</tt><tt>sep=None, spin_id=None)
</tt><tt>Opening the file 
</tt><tt>'/s/relax-1.3.10/test_suite/shared_data/model_free/S2_0.970_te_2048_Rex_0.149/r2.500.out' 
</tt><tt>for reading.
</tt><pre style="margin: 0em;">

</pre><tt>relax&gt; relax_data.read(ri_label='NOE', frq_label='500', frq=500000000.0, 
</tt><tt>file='noe.500.out', 
</tt><tt>dir='/s/relax-1.3.10/test_suite/shared_data/model_free/S2_0.970_te_2048_Rex_0.149', 
</tt><tt>spin_id_col=None, mol_name_col=None, res_num_col=1, res_name_col=2, 
</tt><tt>spin_num_col=None, spin_name_col=None, data_col=3, error_col=4, 
</tt><tt>sep=None, spin_id=None)
</tt><tt>Opening the file 
</tt><tt>'/s/relax-1.3.10/test_suite/shared_data/model_free/S2_0.970_te_2048_Rex_0.149/noe.500.out' 
</tt><tt>for reading.
</tt><pre style="margin: 0em;">

</pre><tt>relax&gt; diffusion_tensor.init(params=1e-08, time_scale=1.0, d_scale=1.0, 
</tt><tt>angle_units='deg', param_types=0, spheroid_type=None, fixed=True)
</tt><pre style="margin: 0em;">

</pre><tt>relax&gt; value.set(val=1.0200000000000001e-10, param='bond_length', 
</tt><tt>spin_id=None)
</tt><pre style="margin: 0em;">

relax&gt; value.set(val=-0.00015999999999999999, param='csa', spin_id=None)

relax&gt; value.set(val='15N', param='heteronucleus', spin_id=None)

relax&gt; value.set(val='1H', param='proton', spin_id=None)

relax&gt; value.display(param='csa')

</pre><tt># mol_name res_num    res_name   spin_num   spin_name  
</tt><tt>value                error
</tt><tt>None       1          GLY        None       None                   
</tt><tt>-0.00016                 None
</tt><tt>None       2          ALA        None       None                   
</tt><tt>-0.00016                 None
</tt><pre style="margin: 0em;">

relax&gt; value.write(param='proton', file='devnull', dir=None, force=False)
Opening the null device file for writing.

relax&gt; model_free.select_model(model='m4', spin_id=None)

</pre><tt>relax&gt; value.set(val=[1.0, 0.0, 0.0], param=['S2', 'te', 'Rex'], 
</tt><tt>spin_id=None)
</tt><pre style="margin: 0em;">

</pre><tt>relax&gt; minimise(*args=('bfgs', 'back'), func_tol=1e-25, 
</tt><tt>max_iterations=10000000, constraints=True, scaling=True, verbosity=1)
</tt><pre style="margin: 0em;">


Over-fit spin deselection.

</pre><tt>RelaxWarning: The spin ':1&amp;:GLY' has been deselected because of 
</tt><tt>insufficient relaxation data, 3 or more data points are required.
</tt><pre style="margin: 0em;">
Only the model-free parameters for single spins will be used.


Fitting to spin ':2&amp;:ALA'
~~~~~~~~~~~~~~~~~~~~~~~~~


Method of Multipliers
~~~~~~~~~~~~~~~~~~~~~

</pre><tt>k: 0       xk: array([ 1.,  0.,  
</tt><tt>0.])                                           fk: 3.9844117908982288
</tt><pre style="margin: 0em;">
Entering sub-algorithm.

        Quasi-Newton BFGS minimisation
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        Line search:  Backtracking line search.

</pre><tt>        k: 0        xk: [           1,           0,           0] fk: 
</tt><tt>3.9844117909
</tt><pre style="margin: 0em;">

</pre><tt>        Parameter values: [0.90905501681906287, 74.369295545631317, 
</tt><tt>1.2231009087192337]
</tt><pre style="margin: 0em;">
        Function value:   -1447.7789206950388
        Iterations:       37
        Function calls:   93
        Gradient calls:   38
        Hessian calls:    0
        Warning:          None


</pre><tt>k: 1       xk: array([  0.90905502,  74.36929555,   
</tt><tt>1.22310091])                fk: 48.121412825285702
</tt><pre style="margin: 0em;">
Entering sub-algorithm.

        Quasi-Newton BFGS minimisation
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        Line search:  Backtracking line search.

</pre><tt>        k: 0        xk: [     0.90906,      74.369,      1.2231] fk: 
</tt><tt>46.0715795854
</tt><pre style="margin: 0em;">

</pre><tt>        Parameter values: [0.98956103824007713, 408.92212422897256, 
</tt><tt>0.12789912795489747]
</tt><pre style="margin: 0em;">
        Function value:   1.5767184829472947
        Iterations:       37
        Function calls:   209
        Gradient calls:   38
        Hessian calls:    0
        Warning:          None


</pre><tt>k: 2       xk: array([  9.89561038e-01,   4.08922124e+02,   
</tt><tt>1.27899128e-01])    fk: 3.6265517227850839
</tt><pre style="margin: 0em;">
Entering sub-algorithm.

        Quasi-Newton BFGS minimisation
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        Line search:  Backtracking line search.

</pre><tt>        k: 0        xk: [     0.98956,      408.92,      0.1279] fk: 
</tt><tt>3.62655172279
</tt><pre style="margin: 0em;">

</pre><tt>        Parameter values: [0.98280664757781688, 601.68994600419194, 
</tt><tt>0.055870730706586783]
</tt><pre style="margin: 0em;">
        Function value:   2.7803077415960757
        Iterations:       30
        Function calls:   149
        Gradient calls:   31
        Hessian calls:    0
        Warning:          None


</pre><tt>k: 3       xk: array([  9.82806648e-01,   6.01689946e+02,   
</tt><tt>5.58707307e-02])    fk: 2.7803077415960757
</tt><pre style="margin: 0em;">
Entering sub-algorithm.

        Quasi-Newton BFGS minimisation
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        Line search:  Backtracking line search.

</pre><tt>        k: 0        xk: [     0.98281,      601.69,    0.055871] fk: 
</tt><tt>2.7803077416
</tt><pre style="margin: 0em;">

</pre><tt>        Parameter values: [0.97000000000262465, 2047.9999999849369, 
</tt><tt>0.14899999993840687]
</tt><pre style="margin: 0em;">
        Function value:   4.3399069883879782e-20
        Iterations:       70
        Function calls:   212
        Gradient calls:   71
        Hessian calls:    0
        Warning:          None


</pre><tt>k: 4       xk: array([  9.70000000e-01,   2.04800000e+03,   
</tt><tt>1.49000000e-01])    fk: 4.3399069883879782e-20
</tt><pre style="margin: 0em;">
Entering sub-algorithm.

        Quasi-Newton BFGS minimisation
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        Line search:  Backtracking line search.

</pre><tt>        k: 0        xk: [        0.97,        2048,       0.149] fk: 
</tt><tt>4.33990698839e-20
</tt><pre style="margin: 0em;">

</pre><tt>        Parameter values: [0.96999999999990616, 2047.9999999849369, 
</tt><tt>0.14900000000189087]
</tt><pre style="margin: 0em;">
        Function value:   8.4298981584870517e-23
        Iterations:       11
        Function calls:   36
        Gradient calls:   12
        Hessian calls:    0
        Warning:          None


</pre><tt>k: 5       xk: array([  9.70000000e-01,   2.04800000e+03,   
</tt><tt>1.49000000e-01])    fk: 8.4298981584870517e-23
</tt><pre style="margin: 0em;">
Entering sub-algorithm.

        Quasi-Newton BFGS minimisation
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        Line search:  Backtracking line search.

</pre><tt>        k: 0        xk: [        0.97,        2048,       0.149] fk: 
</tt><tt>8.42989815849e-23
</tt><pre style="margin: 0em;">

</pre><tt>        Parameter values: [0.96999999999991904, 2047.9999999849369, 
</tt><tt>0.14900000000155103]
</tt><pre style="margin: 0em;">
        Function value:   8.2908269286295164e-23
        Iterations:       6
        Function calls:   41
        Gradient calls:   7
        Hessian calls:    0
        Warning:          None


</pre><tt>k: 6       xk: array([  9.70000000e-01,   2.04800000e+03,   
</tt><tt>1.49000000e-01])    fk: 8.2908269286295164e-23
</tt><pre style="margin: 0em;">
Entering sub-algorithm.

        Quasi-Newton BFGS minimisation
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        Line search:  Backtracking line search.

</pre><tt>        k: 0        xk: [        0.97,        2048,       0.149] fk: 
</tt><tt>8.29082692863e-23
</tt><pre style="margin: 0em;">

</pre><tt>        Parameter values: [0.96999999999991871, 2047.9999999849369, 
</tt><tt>0.149000000001551]
</tt><pre style="margin: 0em;">
        Function value:   8.290677155630973e-23
        Iterations:       3
        Function calls:   40
        Gradient calls:   4
        Hessian calls:    0
        Warning:          None


</pre><tt>Parameter values: [0.96999999999991871, 2047.9999999849369, 
</tt><tt>0.149000000001551]
</tt><pre style="margin: 0em;">
Function value:   8.290677155630973e-23
Iterations:       194
Function calls:   780
Gradient calls:   201
Hessian calls:    0
Warning:          None

Traceback (most recent call last):
</pre><tt>  File &quot;/s/relax-1.3.10/test_suite/system_tests/model_free.py&quot;, line 
</tt><tt>826, in test_opt_constr_bfgs_back_S2_0_970_te_2048_Rex_0_149
</tt><tt>    self.value_test(spin, select=select, s2=s2, te=te, rex=rex, 
</tt><tt>chi2=chi2, iter=iter, f_count=f_count, g_count=g_count, h_count=h_count, 
</tt><tt>warning=warning)
</tt><tt>  File &quot;/s/relax-1.3.10/test_suite/system_tests/model_free.py&quot;, line 
</tt><tt>2544, in value_test
</tt><pre style="margin: 0em;">
    self.assert_(spin.iter in iter, msg=mesg)
AssertionError: Optimisation failure.

System:           Linux
Release:          2.6.35.13-92.fc14.i686.PAE
Version:          #1 SMP Sat May 21 17:33:09 UTC 2011
Win32 version:
Distribution:     fedora 14 Laughlin
Architecture:     32bit ELF
Machine:          i686
Processor:        i686
Python version:   2.7.0
Numpy version:    1.4.1
Libc version:     glibc 2.0

s2:                         0.9699999999999187
te (ps):                        2047.999999985
rex:                         0.149000000001551
chi2:                    8.290677155630973e-23
iter:                                      194
f_count:                                   780
g_count:                                   201
h_count:                                     0
warning:                                  None


======================================================================
</pre><tt>FAIL: test_opt_constr_bfgs_mt_S2_0_970_te_2048_Rex_0_149 
</tt><tt>(test_suite.system_tests.model_free.Mf)
</tt><tt>Constrained BFGS opt, More and Thuente line search {S2=0.970, te=2048, 
</tt><tt>Rex=0.149}
</tt><pre style="margin: 0em;">
----------------------------------------------------------------------

relax&gt; pipe.create(pipe_name='mf', pipe_type='mf')



                                            relax 1.3.10

                              Molecular dynamics by NMR data analysis

                             Copyright (C) 2001-2006 Edward d'Auvergne
                         Copyright (C) 2006-2011 the relax development team

</pre><tt>This is free software which you are welcome to modify and redistribute 
</tt><tt>under the conditions of the
</tt><tt>GNU General Public License (GPL).  This program, including all modules, 
</tt><tt>is licensed under the GPL
</tt><tt>and comes with absolutely no warranty.  For details type 'GPL' within 
</tt><tt>the relax prompt.
</tt><pre style="margin: 0em;">

</pre><tt>Assistance in using the relax prompt and scripting interface can be 
</tt><tt>accessed by typing 'help' within
</tt><pre style="margin: 0em;">
the prompt.


</pre><tt>relax&gt; sequence.read(file='noe.500.out', 
</tt><tt>dir='/s/relax-1.3.10/test_suite/shared_data/model_free/S2_0.970_te_2048_Rex_0.149', 
</tt><tt>spin_id_col=None, mol_name_col=None, res_num_col=1, res_name_col=2, 
</tt><tt>spin_num_col=None, spin_name_col=None, sep=None, spin_id=None)
</tt><tt>Opening the file 
</tt><tt>'/s/relax-1.3.10/test_suite/shared_data/model_free/S2_0.970_te_2048_Rex_0.149/noe.500.out' 
</tt><tt>for reading.
</tt><pre style="margin: 0em;">



</pre><tt>relax&gt; relax_data.read(ri_label='R1', frq_label='600', frq=600000000.0, 
</tt><tt>file='r1.600.out', 
</tt><tt>dir='/s/relax-1.3.10/test_suite/shared_data/model_free/S2_0.970_te_2048_Rex_0.149', 
</tt><tt>spin_id_col=None, mol_name_col=None, res_num_col=1, res_name_col=2, 
</tt><tt>spin_num_col=None, spin_name_col=None, data_col=3, error_col=4, 
</tt><tt>sep=None, spin_id=None)
</tt><tt>Opening the file 
</tt><tt>'/s/relax-1.3.10/test_suite/shared_data/model_free/S2_0.970_te_2048_Rex_0.149/r1.600.out' 
</tt><tt>for reading.
</tt><pre style="margin: 0em;">

</pre><tt>relax&gt; relax_data.read(ri_label='R2', frq_label='600', frq=600000000.0, 
</tt><tt>file='r2.600.out', 
</tt><tt>dir='/s/relax-1.3.10/test_suite/shared_data/model_free/S2_0.970_te_2048_Rex_0.149', 
</tt><tt>spin_id_col=None, mol_name_col=None, res_num_col=1, res_name_col=2, 
</tt><tt>spin_num_col=None, spin_name_col=None, data_col=3, error_col=4, 
</tt><tt>sep=None, spin_id=None)
</tt><tt>Opening the file 
</tt><tt>'/s/relax-1.3.10/test_suite/shared_data/model_free/S2_0.970_te_2048_Rex_0.149/r2.600.out' 
</tt><tt>for reading.
</tt><pre style="margin: 0em;">

</pre><tt>relax&gt; relax_data.read(ri_label='NOE', frq_label='600', frq=600000000.0, 
</tt><tt>file='noe.600.out', 
</tt><tt>dir='/s/relax-1.3.10/test_suite/shared_data/model_free/S2_0.970_te_2048_Rex_0.149', 
</tt><tt>spin_id_col=None, mol_name_col=None, res_num_col=1, res_name_col=2, 
</tt><tt>spin_num_col=None, spin_name_col=None, data_col=3, error_col=4, 
</tt><tt>sep=None, spin_id=None)
</tt><tt>Opening the file 
</tt><tt>'/s/relax-1.3.10/test_suite/shared_data/model_free/S2_0.970_te_2048_Rex_0.149/noe.600.out' 
</tt><tt>for reading.
</tt><pre style="margin: 0em;">

</pre><tt>relax&gt; relax_data.read(ri_label='R1', frq_label='500', frq=500000000.0, 
</tt><tt>file='r1.500.out', 
</tt><tt>dir='/s/relax-1.3.10/test_suite/shared_data/model_free/S2_0.970_te_2048_Rex_0.149', 
</tt><tt>spin_id_col=None, mol_name_col=None, res_num_col=1, res_name_col=2, 
</tt><tt>spin_num_col=None, spin_name_col=None, data_col=3, error_col=4, 
</tt><tt>sep=None, spin_id=None)
</tt><tt>Opening the file 
</tt><tt>'/s/relax-1.3.10/test_suite/shared_data/model_free/S2_0.970_te_2048_Rex_0.149/r1.500.out' 
</tt><tt>for reading.
</tt><pre style="margin: 0em;">

</pre><tt>relax&gt; relax_data.read(ri_label='R2', frq_label='500', frq=500000000.0, 
</tt><tt>file='r2.500.out', 
</tt><tt>dir='/s/relax-1.3.10/test_suite/shared_data/model_free/S2_0.970_te_2048_Rex_0.149', 
</tt><tt>spin_id_col=None, mol_name_col=None, res_num_col=1, res_name_col=2, 
</tt><tt>spin_num_col=None, spin_name_col=None, data_col=3, error_col=4, 
</tt><tt>sep=None, spin_id=None)
</tt><tt>Opening the file 
</tt><tt>'/s/relax-1.3.10/test_suite/shared_data/model_free/S2_0.970_te_2048_Rex_0.149/r2.500.out' 
</tt><tt>for reading.
</tt><pre style="margin: 0em;">

</pre><tt>relax&gt; relax_data.read(ri_label='NOE', frq_label='500', frq=500000000.0, 
</tt><tt>file='noe.500.out', 
</tt><tt>dir='/s/relax-1.3.10/test_suite/shared_data/model_free/S2_0.970_te_2048_Rex_0.149', 
</tt><tt>spin_id_col=None, mol_name_col=None, res_num_col=1, res_name_col=2, 
</tt><tt>spin_num_col=None, spin_name_col=None, data_col=3, error_col=4, 
</tt><tt>sep=None, spin_id=None)
</tt><tt>Opening the file 
</tt><tt>'/s/relax-1.3.10/test_suite/shared_data/model_free/S2_0.970_te_2048_Rex_0.149/noe.500.out' 
</tt><tt>for reading.
</tt><pre style="margin: 0em;">

</pre><tt>relax&gt; diffusion_tensor.init(params=1e-08, time_scale=1.0, d_scale=1.0, 
</tt><tt>angle_units='deg', param_types=0, spheroid_type=None, fixed=True)
</tt><pre style="margin: 0em;">

</pre><tt>relax&gt; value.set(val=1.0200000000000001e-10, param='bond_length', 
</tt><tt>spin_id=None)
</tt><pre style="margin: 0em;">

relax&gt; value.set(val=-0.00015999999999999999, param='csa', spin_id=None)

relax&gt; value.set(val='15N', param='heteronucleus', spin_id=None)

relax&gt; value.set(val='1H', param='proton', spin_id=None)

relax&gt; value.display(param='csa')

</pre><tt># mol_name res_num    res_name   spin_num   spin_name  
</tt><tt>value                error
</tt><tt>None       1          GLY        None       None                   
</tt><tt>-0.00016                 None
</tt><tt>None       2          ALA        None       None                   
</tt><tt>-0.00016                 None
</tt><pre style="margin: 0em;">

relax&gt; value.write(param='proton', file='devnull', dir=None, force=False)
Opening the null device file for writing.

relax&gt; model_free.select_model(model='m4', spin_id=None)

</pre><tt>relax&gt; value.set(val=[1.0, 0.0, 0.0], param=['S2', 'te', 'Rex'], 
</tt><tt>spin_id=None)
</tt><pre style="margin: 0em;">

</pre><tt>relax&gt; minimise(*args=('bfgs', 'mt'), func_tol=1e-25, 
</tt><tt>max_iterations=10000000, constraints=True, scaling=True, verbosity=1)
</tt><pre style="margin: 0em;">


Over-fit spin deselection.

</pre><tt>RelaxWarning: The spin ':1&amp;:GLY' has been deselected because of 
</tt><tt>insufficient relaxation data, 3 or more data points are required.
</tt><pre style="margin: 0em;">
Only the model-free parameters for single spins will be used.


Fitting to spin ':2&amp;:ALA'
~~~~~~~~~~~~~~~~~~~~~~~~~


Method of Multipliers
~~~~~~~~~~~~~~~~~~~~~

</pre><tt>k: 0       xk: array([ 1.,  0.,  
</tt><tt>0.])                                           fk: 3.9844117908982288
</tt><pre style="margin: 0em;">
Entering sub-algorithm.

        Quasi-Newton BFGS minimisation
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        Line search:  More and Thuente line search.

</pre><tt>        k: 0        xk: [           1,           0,           0] fk: 
</tt><tt>3.9844117909
</tt><pre style="margin: 0em;">

</pre><tt>        Parameter values: [0.90905506221776622, 74.369430109433466, 
</tt><tt>1.2231015622357264]
</tt><pre style="margin: 0em;">
        Function value:   -1447.7789206948671
        Iterations:       22
        Function calls:   50
        Gradient calls:   50
        Hessian calls:    0
        Warning:          None


</pre><tt>k: 1       xk: array([  0.90905506,  74.36943011,   
</tt><tt>1.22310156])                fk: 48.121371716752286
</tt><pre style="margin: 0em;">
Entering sub-algorithm.

        Quasi-Newton BFGS minimisation
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        Line search:  More and Thuente line search.

</pre><tt>        k: 0        xk: [     0.90906,      74.369,      1.2231] fk: 
</tt><tt>46.0715179226
</tt><pre style="margin: 0em;">

</pre><tt>        Parameter values: [0.99493663077922057, 88.138505759196732, 
</tt><tt>-3.7928107668617891e-05]
</tt><pre style="margin: 0em;">
        Function value:   1.9644199917083982
        Iterations:       38
        Function calls:   128
        Gradient calls:   128
        Hessian calls:    0
</pre><tt>        Warning:          The gradient at point 0 of this line search 
</tt><tt>is positive, ie p is not a descent direction and the line search will 
</tt><tt>not work. (fatal minimisation error).
</tt><pre style="margin: 0em;">


</pre><tt>k: 2       xk: array([  9.94936631e-01,   8.81385058e+01,  
</tt><tt>-3.79281077e-05])    fk: 144.63963445541734
</tt><pre style="margin: 0em;">
Entering sub-algorithm.

        Quasi-Newton BFGS minimisation
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        Line search:  More and Thuente line search.

</pre><tt>        k: 0        xk: [     0.99494,      88.139, -3.7928e-05] fk: 
</tt><tt>4.0147053483
</tt><pre style="margin: 0em;">

</pre><tt>        Parameter values: [0.9700000000020782, 2048.0000000119967, 
</tt><tt>0.14899999998332922]
</tt><pre style="margin: 0em;">
        Function value:   -7.1927067566113556e-05
        Iterations:       56
        Function calls:   129
        Gradient calls:   129
        Hessian calls:    0
        Warning:          None


</pre><tt>k: 3       xk: array([  9.70000000e-01,   2.04800000e+03,   
</tt><tt>1.49000000e-01])    fk: 1.5560391211796852e-20
</tt><pre style="margin: 0em;">
Entering sub-algorithm.

        Quasi-Newton BFGS minimisation
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        Line search:  More and Thuente line search.

</pre><tt>        k: 0        xk: [        0.97,        2048,       0.149] fk: 
</tt><tt>1.55603912118e-20
</tt><pre style="margin: 0em;">

</pre><tt>        Parameter values: [0.97000000000063413, 2048.0000000119967, 
</tt><tt>0.14899999998330257]
</tt><pre style="margin: 0em;">
        Function value:   2.6082858480886141e-21
        Iterations:       1
        Function calls:   4
        Gradient calls:   4
        Hessian calls:    0
        Warning:          None


</pre><tt>k: 4       xk: array([  9.70000000e-01,   2.04800000e+03,   
</tt><tt>1.49000000e-01])    fk: 2.6082858480886141e-21
</tt><pre style="margin: 0em;">
Entering sub-algorithm.

        Quasi-Newton BFGS minimisation
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        Line search:  More and Thuente line search.

</pre><tt>        k: 0        xk: [        0.97,        2048,       0.149] fk: 
</tt><tt>2.60828584809e-21
</tt><pre style="margin: 0em;">

</pre><tt>        Parameter values: [0.97000000000006326, 2048.0000000119967, 
</tt><tt>0.14899999999880381]
</tt><pre style="margin: 0em;">
        Function value:   5.1869486534269492e-23
        Iterations:       2
        Function calls:   7
        Gradient calls:   7
        Hessian calls:    0
        Warning:          None


</pre><tt>k: 5       xk: array([  9.70000000e-01,   2.04800000e+03,   
</tt><tt>1.49000000e-01])    fk: 5.1869486534269492e-23
</tt><pre style="margin: 0em;">
Entering sub-algorithm.

        Quasi-Newton BFGS minimisation
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        Line search:  More and Thuente line search.

</pre><tt>        k: 0        xk: [        0.97,        2048,       0.149] fk: 
</tt><tt>5.18694865343e-23
</tt><pre style="margin: 0em;">

</pre><tt>        Parameter values: [0.97000000000006315, 2048.0000000119967, 
</tt><tt>0.14899999999880381]
</tt><pre style="margin: 0em;">
        Function value:   5.1821311776197656e-23
        Iterations:       3
        Function calls:   68
        Gradient calls:   68
        Hessian calls:    0
        Warning:          None


</pre><tt>Parameter values: [0.97000000000006315, 2048.0000000119967, 
</tt><tt>0.14899999999880381]
</tt><pre style="margin: 0em;">
Function value:   5.1821311776197656e-23
Iterations:       122
Function calls:   386
Gradient calls:   386
Hessian calls:    0
Warning:          None

Traceback (most recent call last):
</pre><tt>  File &quot;/s/relax-1.3.10/test_suite/system_tests/model_free.py&quot;, line 
</tt><tt>1011, in test_opt_constr_bfgs_mt_S2_0_970_te_2048_Rex_0_149
</tt><tt>    self.value_test(spin, select=select, s2=s2, te=te, rex=rex, 
</tt><tt>chi2=chi2, iter=iter, f_count=f_count, g_count=g_count, h_count=h_count, 
</tt><tt>warning=warning)
</tt><tt>  File &quot;/s/relax-1.3.10/test_suite/system_tests/model_free.py&quot;, line 
</tt><tt>2544, in value_test
</tt><pre style="margin: 0em;">
    self.assert_(spin.iter in iter, msg=mesg)
AssertionError: Optimisation failure.

System:           Linux
Release:          2.6.35.13-92.fc14.i686.PAE
Version:          #1 SMP Sat May 21 17:33:09 UTC 2011
Win32 version:
Distribution:     fedora 14 Laughlin
Architecture:     32bit ELF
Machine:          i686
Processor:        i686
Python version:   2.7.0
Numpy version:    1.4.1
Libc version:     glibc 2.0

s2:                         0.9700000000000631
te (ps):                        2048.000000012
rex:                       0.14899999999880381
chi2:                   5.1821311776197656e-23
iter:                                      122
f_count:                                   386
g_count:                                   386
h_count:                                     0
warning:                                  None


----------------------------------------------------------------------
Ran 206 tests in 436.606s

FAILED (failures=2)




###################################
# Summary of the relax test suite #
###################################


# Optional packages/modules
###########################

No tests skipped due to missing modules.

# Synopsis
##########

System/functional tests ......................................... [ Failed ]

==============


On 11-08-11 4:56 PM, edward@xxxxxxxxxxxxx wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">
Author: bugman
Date: Thu Aug 11 16:56:16 2011
New Revision: 14364

URL: <a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax?rev=14364&amp;view=rev">http://svn.gna.org/viewcvs/relax?rev=14364&amp;view=rev</a>
Log:
Fix for the test_opt_constr_bfgs_mt_S2_0_970_te_2048_Rex_0_149 model-free 
system test on MS Windows.

The te parameter check was too strict.


Modified:
     1.3/test_suite/system_tests/model_free.py

Modified: 1.3/test_suite/system_tests/model_free.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/1.3/test_suite/system_tests/model_free.py?rev=14364&amp;r1=14363&amp;r2=14364&amp;view=diff">http://svn.gna.org/viewcvs/relax/1.3/test_suite/system_tests/model_free.py?rev=14364&amp;r1=14363&amp;r2=14364&amp;view=diff</a>
==============================================================================
--- 1.3/test_suite/system_tests/model_free.py (original)
+++ 1.3/test_suite/system_tests/model_free.py Thu Aug 11 16:56:16 2011
@@ -2523,7 +2523,7 @@

          # te correlation time.
          if type(te) == float:
-            self.assertAlmostEqual(spin.te / 1e-12, te, 6, msg=mesg)
+            self.assertAlmostEqual(spin.te / 1e-12, te, 5, msg=mesg)
          elif te == None:
              self.assertEqual(spin.te, None, msg=mesg)



_______________________________________________
relax (<a  rel="nofollow" href="http://nmr-relax.com">http://nmr-relax.com</a>)

This is the relax-commits mailing list
relax-commits@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="http://www.nmr-relax.com/mail.gna.org/listinfo/relax-commits">https://mail.gna.org/listinfo/relax-commits</a>
</pre></blockquote><pre style="margin: 0em;">

--
Sébastien Morin, Ph.D.
Postdoctoral Fellow, S. Grzesiek NMR Laboratory
Department of Structural Biology
Biozentrum, Universität Basel
Klingelbergstrasse 70
4056 Basel
Switzerland



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00030" href="msg00030.html">Re: r14364 - /1.3/test_suite/system_tests/model_free.py</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Fri Aug 12 19:00:12 2011</div>  
</body>
</html>
