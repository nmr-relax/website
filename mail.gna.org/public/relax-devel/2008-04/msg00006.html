<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: [bug #11004] Model elimination -->
<!--X-From-R13: Eéonfgvra [beva <fronfgvra.zbeva.1Nhyniny.pn> -->
<!--X-Date: Thu, 03 Apr 2008 15:25:49 +0200 -->
<!--X-Message-Id: 47F4CCAE.1010603@ulaval.ca -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: 20080207&#45;193155.sv7147.18805@gna.org -->
<!--X-Reference: 7f080ed10803210618y23bcca0al47b49b95befdfcad@mail.gmail.com -->
<!--X-Reference: 47F0FE03.7020408@ulaval.ca -->
<!--X-Reference: 7f080ed10804030115u45488a53n84baaafce5642d7e@mail.gmail.com -->
<!--X-Reference: 7f080ed10804030151o2a11a187m644f164eb06c9e3d@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [bug #11004] Model elimination -- April 03, 2008 - 15:25</title>
<link rel="stylesheet" type="text/css" href="/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="https://gna.org/images/gna.theme/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: [bug #11004] Model elimination</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00006" class="tabs">Index by Date</a> | <a href="threads.html#00006" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00005.html">Date Prev</a>] [<a href="msg00007.html">Date Next</a>] [<a href="msg00004.html">Thread Prev</a>] [<a href="msg00003.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Edward d'Auvergne &lt;edward.dauvergne@xxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Thu, 03 Apr 2008 08:25:18 -0400</li>
<li class="menuitem">
<em>Cc</em>: Sébastien Morin &lt;NO-REPLY.INVALID-ADDRESS@xxxxxxx&gt;,	relax-devel@xxxxxxx</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00006.html">47F4CCAE.1010603@ulaval.ca</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;20080207-193155.sv7147.18805@xxxxxxx&gt;		&lt;7f080ed10803210618y23bcca0al47b49b95befdfcad@xxxxxxxxxxxxxx&gt;		&lt;47F0FE03.7020408@xxxxxxxxx&gt;		&lt;7f080ed10804030115u45488a53n84baaafce5642d7e@xxxxxxxxxxxxxx&gt;	&lt;7f080ed10804030151o2a11a187m644f164eb06c9e3d@xxxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>User-agent</em>: Thunderbird 2.0.0.12 (X11/20080228)</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Sébastien Morin</strong> on April 03, 2008 - 15:25:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<table width="100%"><tr><td bgcolor="#ffffff" style="background-color: #ffffff; color: #000000; "><font color="#000000">



Hi Ed,<br>
<br>
The problem doesn't arise anymore.<br>
<br>
Thanks for solving this issue !!!<br>
<br>
Have a nice day !<br>
<br>
<br>
S&eacute;b<br>
<br>
<br>
<br>
Edward d'Auvergne wrote:
<blockquote
 cite=""
 type="cite">
  <pre wrap="">Ok, the new fix is in the repository for both relax lines.  Could you
please check again to see that the bug is completely fixed?

Cheers,

Edward


On Thu, Apr 3, 2008 at 10:15 AM, Edward d'Auvergne
<a rel="nofollow" class="moz-txt-link-rfc2396E" href="mailto:edward.dauvergne@xxxxxxxxx">&lt;edward.dauvergne@xxxxxxxxx&gt;</a> wrote:
  </pre>
  <blockquote type="cite">
    <pre wrap="">Hi,

 This new issue is triggered by the same element - model elimination.
 However bug #11004 (<a rel="nofollow" class="moz-txt-link-freetext" href="http://gna.org/bugs/?11004">http://gna.org/bugs/?11004</a>) is due to the
 elimination of models whereas the new bug you've encountered has been
 triggered by the elimination of Monte Carlo simulations.  They are
 different bugs, but the source and fix are the same.  So, I'll just
 modify your bug report to include these new details.

 Cheers,

 Edward





 On Mon, Mar 31, 2008 at 5:06 PM, S&eacute;bastien Morin
 <a rel="nofollow" class="moz-txt-link-rfc2396E" href="mailto:sebastien.morin.1@xxxxxxxxx">&lt;sebastien.morin.1@xxxxxxxxx&gt;</a> wrote:
 &gt;
 &gt;  Hi Ed !
 &gt;
 &gt;  I ran the problematic models (m5, m6, m7, m8) and they all seem to work
 &gt; fine... Now, models m0 to m9 all run successfully. Thanks for solving this
 &gt; issue !
 &gt;
 &gt;  ...
 &gt;
 &gt;  However, I also tried the some local_tm models and got an error with model
 &gt; tm2 (after the command "relax&gt; monte_carlo.error_analysis(run='tm2',
 &gt; prune=0.0)") which is different from the error encountered in bug 11004.
 &gt;
 &gt;  =============================================================
 &gt;
 &gt;
 &gt;    File "/home/semor/packages/relax-1.2/relax", line 454, in ?
 &gt;      Relax()
 &gt;    File "/home/semor/packages/relax-1.2/relax", line 166, in __init__
 &gt;      self.interpreter.run()
 &gt;    File "/home/semor/packages/relax-1.2/prompt/interpreter.py", line 216, in
 &gt; run
 &gt;      run_script(intro=self.relax.intro_string, local=self.local,
 &gt; script_file=self.relax.script_file, quit=1)
 &gt;    File "/home/semor/packages/relax-1.2/prompt/interpreter.py", line 391, in
 &gt; run_script
 &gt;      console.interact(intro, local, script_file, quit)
 &gt;    File "/home/semor/packages/relax-1.2/prompt/interpreter.py", line 343, in
 &gt; interact_script
 &gt;      execfile(script_file, local)
 &gt;    File "./model2_tm", line 42, in ?
 &gt;
 &gt;      monte_carlo.error_analysis(name)
 &gt;    File "/home/semor/packages/relax-1.2/prompt/monte_carlo.py", line 145, in
 &gt; error_analysis
 &gt;      self.__relax__.generic.monte_carlo.error_analysis(run=run, prune=prune)
 &gt;    File "/home/semor/packages/relax-1.2/generic_fns/monte_carlo.py", line
 &gt; 240, in error_analysis
 &gt;      sd = sqrt(sd / (float(n) - 1.0))
 &gt;  ZeroDivisionError: float division
 &gt;
 &gt;  =============================================================
 &gt;
 &gt;  Maybe important for diagnostic is the many many lines like :
 &gt;
 &gt;  =============================================================
 &gt;
 &gt;  The local tm parameter of 2.0000000000000002e-07 is greater than
 &gt; 5.0000000000000004e-08, eliminating spin system 103 ASN of the run 'tm2
 &gt;
 &gt;  =============================================================
 &gt;
 &gt;  encountered during model-free models elimination ("eliminate(run='tm2',
 &gt; function=None, args=None)"). The problem is probably due to the
 &gt; underestimation of the correlation time causing the ts values to rise
 &gt; artefactully (like you pointed in your previous mail of the same thread).
 &gt; However, relax shouldn't break and should be able to continue after such a
 &gt; problem.
 &gt;
 &gt;  Note also that this problem does not arise for models tm0, tm1, tm3, tm4
 &gt; and tm9 (I haven't had time yet to run the models tm5 to tm8).
 &gt;
 &gt;  Do you have an idea about the reason for this new bug..?
 &gt;  Should I submit a new bug report for this issue ?
 &gt;
 &gt;  Thanks !
 &gt;
 &gt;
 &gt;  S&eacute;b  :)
 &gt;
 &gt;
 &gt;
 &gt;
 &gt;
 &gt;
 &gt;  Edward d'Auvergne wrote:
 &gt;  Hi,
 &gt;
 &gt; I've fixed this bug, although I think other issues will arise. From
 &gt; the attached 'tail_1000_lines_log_model_5' file, it looks pretty
 &gt; obvious that the global correlation time of 6.7 ns used in the script
 &gt; is an underestimation. The result is all the ts values are absorbing
 &gt; this underestimation causing them to shoot up to values slower than
 &gt; the global tumbling. Of course it could be another issue causing the
 &gt; large ts values. Anyway, I have a feeling that this issue may cause
 &gt; other bugs to be uncovered in relax. Seb, could you test to see if
 &gt; the 1.2 line now works?
 &gt;
 &gt; Cheers,
 &gt;
 &gt; Edward
 &gt;
 &gt;
 &gt;
 &gt; On Fri, Feb 8, 2008 at 1:31 AM, S&eacute;bastien Morin
 &gt; <a rel="nofollow" class="moz-txt-link-rfc2396E" href="mailto:NO-REPLY.INVALID-ADDRESS@xxxxxxx">&lt;NO-REPLY.INVALID-ADDRESS@xxxxxxx&gt;</a> wrote:
 &gt;
 &gt;
 &gt;  URL:
 &gt;  <a rel="nofollow" class="moz-txt-link-rfc2396E" href="http://gna.org/bugs/?11004">&lt;http://gna.org/bugs/?11004&gt;</a>
 &gt;
 &gt;  Summary: Model elimination
 &gt;  Project: relax
 &gt;  Submitted by: semor
 &gt;  Submitted on: Thursday 02/07/2008 at 19:31
 &gt;  Category: relax's source code
 &gt;  Severity: 3 - Normal
 &gt;  Priority: 5 - Normal
 &gt;  Status: None
 &gt;  Privacy: Public
 &gt;  Assigned to: None
 &gt;  Originator Name:
 &gt;  Originator Email:
 &gt;  Open/Closed: Open
 &gt;  Discussion Lock: Any
 &gt;  Release: Repository: 1.2 line
 &gt;  Operating System: GNU/Linux
 &gt;
 &gt;  _______________________________________________________
 &gt;
 &gt;  Details:
 &gt;
 &gt;  Hi,
 &gt;
 &gt;  I recently got into a small problem related to model elimination, I think.
 &gt;
 &gt;  The relax version used was 1.2 from the repository (r4938).
 &gt;
 &gt;  The script used consisted of minimizing one model-free model, doing Monte
 &gt;  Carlo simulations, eliminating bad simulations and calculating errors (just
 &gt;  as in the sample script on page 30, section 6.2.1, of the manual, v1.2.11,
 &gt;  see attached file for an example with model 5).
 &gt;
 &gt;  R1s, R2s and NOEs were available from 2 magnetic fields for most residues,
 &gt;  some of which only had data from 1 magnetic field. For some models
 &gt; (5,6,7,8),
 &gt;  model elimination eliminated lots of simulations... When reaching the
 &gt;  'monte_carlo.error_analysis' call, relax crashed (the saved state just
 &gt; after
 &gt;  the eliminate() call, just before relax crashing, is available at :
 &gt;  <a rel="nofollow" class="moz-txt-link-freetext" href="http://maple.rsvs.ulaval.ca/users/semor/tmp/save_after_eliminate.bz2">http://maple.rsvs.ulaval.ca/users/semor/tmp/save_after_eliminate.bz2</a>) with
 &gt;  the following error :
 &gt;
 &gt;  ==============================================================
 &gt;  relax&gt; monte_carlo.error_analysis(run='m5', prune=0.0)
 &gt;  Traceback (most recent call last):
 &gt;  File "/home/semor/packages/relax-1.2/relax", line 454, in ?
 &gt;  Relax()
 &gt;  File "/home/semor/packages/relax-1.2/relax", line 166, in __init__
 &gt;  self.interpreter.run()
 &gt;  File "/home/semor/packages/relax-1.2/prompt/interpreter.py", line 216, in
 &gt;  run
 &gt;  run_script(intro=self.relax.intro_string, local=self.local,
 &gt;  script_file=self.relax.script_file, quit=1)
 &gt;  File "/home/semor/packages/relax-1.2/prompt/interpreter.py", line 391, in
 &gt;  run_script
 &gt;  console.interact(intro, local, script_file, quit)
 &gt;  File "/home/semor/packages/relax-1.2/prompt/interpreter.py", line 343, in
 &gt;  interact_script
 &gt;  execfile(script_file, local)
 &gt;  File "./model_5.py", line 43, in ?
 &gt;  monte_carlo.error_analysis(name)
 &gt;  File "/home/semor/packages/relax-1.2/prompt/monte_carlo.py", line 145, in
 &gt;  error_analysis
 &gt;  self.__relax__.generic.monte_carlo.error_analysis(run=run, prune=prune)
 &gt;  File "/home/semor/packages/relax-1.2/generic_fns/monte_carlo.py", line 220,
 &gt;  in error_analysis
 &gt;  Xav = Xsum / float(n)
 &gt;  ZeroDivisionError: float division
 &gt;  ==============================================================
 &gt;
 &gt;  It seems 'n' was zero for at least one residue...
 &gt;
 &gt;  Thanks for help with this !
 &gt;
 &gt;
 &gt;  S&eacute;b
 &gt;
 &gt;
 &gt;
 &gt;
 &gt;  _______________________________________________________
 &gt;
 &gt;  File Attachments:
 &gt;
 &gt;
 &gt;  -------------------------------------------------------
 &gt;  Date: Thursday 02/07/2008 at 19:31 Name: model_5.py Size: 1kB By: semor
 &gt;
 &gt;  <a rel="nofollow" class="moz-txt-link-rfc2396E" href="http://gna.org/bugs/download.php?file_id=3760">&lt;http://gna.org/bugs/download.php?file_id=3760&gt;</a>
 &gt;
 &gt;  _______________________________________________________
 &gt;
 &gt;  Reply to this item at:
 &gt;
 &gt;  <a rel="nofollow" class="moz-txt-link-rfc2396E" href="http://gna.org/bugs/?11004">&lt;http://gna.org/bugs/?11004&gt;</a>
 &gt;
 &gt;  _______________________________________________
 &gt;  Message sent via/by Gna!
 &gt;  <a rel="nofollow" class="moz-txt-link-freetext" href="http://gna.org/">http://gna.org/</a>
 &gt;
 &gt;
 &gt;
 &gt;
 &gt;

    </pre>
  </blockquote>
  <pre wrap=""><!---->
  </pre>
</blockquote>


</font></td></tr></table>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00000" href="msg00000.html">Re: [bug #11004] Model elimination</a></strong>
<ul><li><em>From:</em> Sébastien Morin</li></ul></li>
<li><strong><a name="00001" href="msg00001.html">Re: [bug #11004] Model elimination</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00004" href="msg00004.html">Re: [bug #11004] Model elimination</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer">You are on the <a href="http://gna.org">Gna!</a> mail server.</div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Thu Apr 03 17:41:53 2008</div>  
</body>
</html>
