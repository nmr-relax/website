<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: Removal of the reduce() builtin function from the relaxation dispersion code in the trunk. -->
<!--X-From-R13: "Sqjneq q'Ohiretar" &#60;rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Wed, 30 Jul 2014 18:44:50 +0200 -->
<!--X-Message-Id: CAED9pY_peoxT+_TUoHjSPCHmZpD26F4YJQ+JucretNFcz7yeYA@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: CAED9pY8rPUvuvG7wB3=oYddgpZQHmyMX7Rjw&#45;B&#45;F7MndcN2zjQ@mail.gmail.com -->
<!--X-Reference: CA+CBx2OFNTJeN+v3Yd6wrX_JUQv08p+6P8w5X79610muzWsU+g@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: Removal of the reduce() builtin function from the relaxation dispersion code in the trunk. -- July 30, 2014 - 18:44</title>
<link rel="stylesheet" type="text/css" href="/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="https://gna.org/images/gna.theme/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: Removal of the reduce() builtin function from the relaxation dispersion code in the trunk.</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00066" class="tabs">Index by Date</a> | <a href="threads.html#00066" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00065.html">Date Prev</a>] [<a href="msg00067.html">Date Next</a>] [<a href="msg00065.html">Thread Prev</a>] [<a href="msg00067.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Wed, 30 Jul 2014 18:44:13 +0200</li>
<li class="menuitem">
<em>Cc</em>: &quot;relax-devel@xxxxxxx&quot; &lt;relax-devel@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113; h=mime-version:sender:in-reply-to:references:date:message-id:subject :from:to:cc:content-type:content-transfer-encoding; bh=8e/kbyqpGxVjXZjh6oLhvq00HgX9U9pe77Z0QZGwBgU=; b=wMW6k9CDP/8azBDHr7ZGYcT41Zh+QoJoCDypThQdff6vc/AfBuwnovmzeTyk5HKqeb enPK9I0LBbcOcGTG1/pxtJMDFZyGXPZ/NzjJBXKsw90f7ILw1JhkP4OlYNJVo433JRgh snmoAgSuYLX2aUuW42Mz4z2u+1HCwreezoSxTFI0BT+vZxfKWfWm0//4VmGFEoLKYQew Bi4BpgjVogL+b747ByAIDqI+zciqla7UXfYdtQxVkOjQHuGi7fm2zm0eOvW5HdVQBt24 i09ADoGoCicUnCd1hkQWiIyv7jpvtWjop7zmsA3ucORpHXtte0q0dxUSWkEwuX1zetGH hgew==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00066.html">CAED9pY_peoxT+_TUoHjSPCHmZpD26F4YJQ+JucretNFcz7yeYA@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;CAED9pY8rPUvuvG7wB3=oYddgpZQHmyMX7Rjw-B-F7MndcN2zjQ@mail.gmail.com&gt; &lt;<a href="msg00065.html">CA+CBx2OFNTJeN+v3Yd6wrX_JUQv08p+6P8w5X79610muzWsU+g@mail.gmail.com</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on July 30, 2014 - 18:44:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Hi,

Strange!  This is for the current version of the trunk (r24850).  When
I run the command, I see:

$ grep -r &quot;reduce(&quot; . --exclude-dir=.svn
./specific_analyses/relax_disp/optimisation.py:
print(&quot;Unconstrained grid search size: %s (constraints may decrease
this size).\n&quot; % reduce(mul, inc, 1))
./specific_analyses/relax_disp/optimisation.py:
print(&quot;Unconstrained grid search size: %s (constraints may decrease
this size).\n&quot; % reduce(mul, self.inc, 1))
./extern/numpy_future.py:    return
add.reduce(sorted[indexer]*weights, axis=axis, out=out)/sumval
$

The first two matches are preventing the code from working on Python 3.

Regards,

Edward




On 30 July 2014 18:40, Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi Ed.

I cannot find the reduce problem?

A search gives:
grep -r &quot;reduce(&quot; .
./extern/numpy_future.py:    return
add.reduce(sorted[indexer]*weights, axis=axis, out=out)/sumval

So the &quot;reduce&quot; is here an extension to numpy.add.

Have you seen this problem anywhere else?

Best
troels



2014-07-30 18:16 GMT+02:00 Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt;:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi Troels,

Would you be able to remove you additions of the reduce() function in
the relax trunk?  This was introduced with the merger of the
disp_spin_speed branch.  However this function is not present in
Python 3, hence the relaxation dispersion analysis no longer operates
for these Python versions.  To find the failure points, just run the
Relax_disp system tests on Python 3.  This problem is a release
blocker.

For some history, here is the reason directly from Guido van Rossum:

<a  rel="nofollow" href="http://www.artima.com/weblogs/viewpost.jsp?thread=98196">http://www.artima.com/weblogs/viewpost.jsp?thread=98196</a>

This post is the main reason why I try to avoid map(), lambda,
reduce(), etc.  These functions in relax have always caused pain as
Python has evolved.

Cheers,

Edward
</pre></blockquote></blockquote><pre style="margin: 0em;">


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00067" href="msg00067.html">Re: Removal of the reduce() builtin function from the relaxation dispersion code in the trunk.</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00061" href="msg00061.html">Removal of the reduce() builtin function from the relaxation dispersion code in the trunk.</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00065" href="msg00065.html">Re: Removal of the reduce() builtin function from the relaxation dispersion code in the trunk.</a></strong>
<ul><li><em>From:</em> Troels Emtekær Linnet</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer">You are on the <a href="http://gna.org">Gna!</a> mail server.</div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Wed Jul 30 19:00:18 2014</div>  
</body>
</html>
