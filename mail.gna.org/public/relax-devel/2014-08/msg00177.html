<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: r25098 &#45; /trunk/auto_analyses/relax_disp.py -->
<!--X-From-R13: "Sqjneq q'Ohiretar" &#60;rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Wed, 20 Aug 2014 16:29:37 +0200 -->
<!--X-Message-Id: CAED9pY969EsU4SU8UnC&#45;THt8Myh2zdnWD+JRZpoXdv+MUkzAsQ@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: E1XK6SN&#45;0002Hp&#45;NF@subversion.gna.org -->
<!--X-Reference: CAED9pY&#45;iJy2Pw=xPUVJ&#45;1ODo7cMnc8EVA+4AuAvBu6DzQoSgng@mail.gmail.com -->
<!--X-Reference: CAED9pY8FYE5cjxToH8&#45;DG8pGciC2jCo4B&#45;7fg0hwn=XWRf2fpw@mail.gmail.com -->
<!--X-Reference: CA+CBx2NWYJ&#45;cePPneR0D6cMG35ErKBVims=gaFCkWsKncyO_5g@mail.gmail.com -->
<!--X-Reference: CAED9pY&#45;c&#45;XZ&#45;Ha0&#45;=x4&#45;vAe&#45;xU&#45;S33XvZNoNp&#45;w32qCpkmXCMQ@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: r25098 - /trunk/auto_analyses/relax_disp.py -- August 20, 2014 - 16:29</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: r25098 - /trunk/auto_analyses/relax_disp.py</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00177" class="tabs">Index by Date</a> | <a href="threads.html#00177" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00176.html">Date Prev</a>] [<a href="msg00178.html">Date Next</a>] [<a href="msg00176.html">Thread Prev</a>] [<a href="msg00175.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Wed, 20 Aug 2014 16:29:07 +0200</li>
<li class="menuitem">
<em>Cc</em>: &quot;relax-devel@xxxxxxx&quot; &lt;relax-devel@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113; h=mime-version:sender:in-reply-to:references:date:message-id:subject :from:to:cc:content-type:content-transfer-encoding; bh=swjmsPQL9dlSZnN03wtUegUnOlL21GyjFq/DllzebtA=; b=bYrpohToonOwLOGDGRL2dK+gOikTLByBCPbqPPBFG/kQXau2dtxSjEnTl+xbwcHDxd vW/DCncEe+qKrAZDj/OZGitlkRZ7o3hEL2zwqgx9l6kE+Yym0mzAvPJfqZpHA9OgAB7E NaF2pYc2HZ9A57dVcUxzaf2LVzjOdmTVrYqPnhBkGAREtoiF19LfYALf7q0QWNA75xdj W/gdMmU8I3A+RZFZV4OKXAJbkS3rGEQRc0xCcjqIZilwh1cnVFoL1geNYKL0SMOmEsdv mO1VzQ9m2/xVV4vuIK7H9Yni7TebGMzEbNLz0V65lHWxh8CgZEgh8H155Rg9yA5B7Dq/ HWcA==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00177.html">CAED9pY969EsU4SU8UnC-THt8Myh2zdnWD+JRZpoXdv+MUkzAsQ@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;E1XK6SN-0002Hp-NF@subversion.gna.org&gt; &lt;CAED9pY-iJy2Pw=xPUVJ-1ODo7cMnc8EVA+4AuAvBu6DzQoSgng@mail.gmail.com&gt; &lt;CAED9pY8FYE5cjxToH8-DG8pGciC2jCo4B-7fg0hwn=XWRf2fpw@mail.gmail.com&gt; &lt;CA+CBx2NWYJ-cePPneR0D6cMG35ErKBVims=gaFCkWsKncyO_5g@mail.gmail.com&gt; &lt;CAED9pY-c-XZ-Ha0-=x4-vAe-xU-S33XvZNoNp-w32qCpkmXCMQ@mail.gmail.com&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on August 20, 2014 - 16:29:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">By temporary, I mean an important infrastructure stepping stone to be
followed by a more advanced 'No Rex' model which uses your
infrastructure.

Regards,

Edward

On 20 August 2014 16:26, Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi,

For the 'No Rex' to 'No Rex R1rho off res' model conversion, this is
probably not necessary.  But for future relax developments, this
conversion will be redundant anyway as we cannot support these two
models and handle CPMG and R1rho data simultaneously (see
<a  rel="nofollow" href="http://thread.gmane.org/gmane.science.nmr.relax.scm/22850/focus=6728">http://thread.gmane.org/gmane.science.nmr.relax.scm/22850/focus=6728</a>).
So I see the 'No Rex R1rho off res' model as a temporary development.

Regards,

Edward


On 20 August 2014 16:13, Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxxxxxx&gt; 
wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi Edward.

Just to make sure.

A warning will then always be raised for off resonance analyses.
The 'No Rex' conversion will raise this?

Best
Troerls

2014-08-20 16:09 GMT+02:00 Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt;:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">For the r1ho_translated flag, the text could be shortened and put into
one line, and the &quot;IMPORTANT&quot; part removed as the &quot;RelaxWarning&quot;
printout is the important message.  You shouldn't use multiple
RelaxWarnings for this part.

Cheers,

Edward

On 20 August 2014 16:08, Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi Troels,

Could you rather use RelaxWarnings here for all of the conversion
printouts?  The printouts for the previous list and new list of models
are fine, but normally when a major change is made for the user a
RelaxWarning is used to inform them.  In many cases the user has made
a mistake, i.e. chosen the wrong model or not loaded the R1 data.  The
RelaxWarning system allows the user to more easily find where they
have made possible errors.

Cheers,

Edward


On 20 August 2014 16:01,  &lt;tlinnet@xxxxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Author: tlinnet
Date: Wed Aug 20 16:01:43 2014
New Revision: 25098

URL: <a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax?rev=25098&amp;view=rev">http://svn.gna.org/viewcvs/relax?rev=25098&amp;view=rev</a>
Log:
Inserted into relax_disp auto_analyses, to convert the input models.

This will convert/insert the correct 'No Rex' to the corresponding 'No 
Rex' model for R1rho off-resonance models.
It will also translate to the corresponding 'R1 fit' model, if no 'R1 
data' has been loaded with relax_data.read() function.

Modified:
    trunk/auto_analyses/relax_disp.py

Modified: trunk/auto_analyses/relax_disp.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/trunk/auto_analyses/relax_disp.py?rev=25098&amp;r1=25097&amp;r2=25098&amp;view=diff">http://svn.gna.org/viewcvs/relax/trunk/auto_analyses/relax_disp.py?rev=25098&amp;r1=25097&amp;r2=25098&amp;view=diff</a>
==============================================================================
--- trunk/auto_analyses/relax_disp.py   (original)
+++ trunk/auto_analyses/relax_disp.py   Wed Aug 20 16:01:43 2014
@@ -39,7 +39,7 @@
 from prompt.interpreter import Interpreter
 from specific_analyses.relax_disp.data import 
has_exponential_exp_type, has_cpmg_exp_type, has_fixed_time_exp_type, 
has_r1rho_exp_type, loop_frq
 from specific_analyses.relax_disp.data import INTERPOLATE_DISP, 
INTERPOLATE_OFFSET, X_AXIS_DISP, X_AXIS_W_EFF, X_AXIS_THETA, 
Y_AXIS_R2_R1RHO, Y_AXIS_R2_EFF
-from specific_analyses.relax_disp.model import nesting_model, 
nesting_param
+from specific_analyses.relax_disp.model import convert_no_rex_fit_r1, 
nesting_model, nesting_param
 from specific_analyses.relax_disp.variables import EQ_ANALYTIC, 
EQ_NUMERIC, EQ_SILICO, MODEL_LIST_ANALYTIC, MODEL_LIST_NEST, 
MODEL_LIST_NUMERIC, MODEL_LIST_R1RHO_FIT_R1, MODEL_LIST_R1RHO_W_R1, 
MODEL_LIST_R1RHO_FULL, MODEL_NOREX, MODEL_NOREX_R1RHO, 
MODEL_NOREX_R1RHO_FIT_R1, MODEL_PARAMS, MODEL_R2EFF, PARAMS_R20
 from status import Status; status = Status()

@@ -100,7 +100,6 @@
         self.pipe_name = pipe_name
         self.pipe_bundle = pipe_bundle
         self.results_dir = results_dir
-        self.models = models
         self.grid_inc = grid_inc
         self.mc_sim_num = mc_sim_num
         self.exp_mc_sim_num = exp_mc_sim_num
@@ -112,6 +111,35 @@
         self.numeric_only = numeric_only
         self.mc_sim_all_models = mc_sim_all_models
         self.eliminate = eliminate
+
+        # Possible convert the models for analyses.
+        # Determine if any model in the list of all models should be 
replaced or inserted as the correct 'No Rex' model.
+        # Also translate the R1rho off-resonance model to the 
corresponding 'R1 fit' models, if R1 is not loaded.
+        converted_models, no_rex_translated, no_rex_inserted, 
r1ho_translated = convert_no_rex_fit_r1(self_models=deepcopy(models))
+
+        if converted_models != models:
+            # Printout.
+            section(file=sys.stdout, text=&quot;Converting models.&quot;, 
prespace=2)
+
+            # If 'No Rex' model was translated.
+            if no_rex_translated:
+                no_rex_index = models.index(MODEL_NOREX)
+                print(&quot;\nThe 'No Rex' model for R1rho off-resonance 
models has been translated to the model: 
'%s'.&quot;%(converted_models[no_rex_index]))
+            if no_rex_inserted:
+                no_rex_index = models.index(MODEL_NOREX) + 1
+                print(&quot;\nThe 'No Rex' model for R1rho off-resonance 
models has been inserted as model: 
'%s'.&quot;%(converted_models[no_rex_index]))
+            if r1ho_translated:
+                print(&quot;\nIMPORTANT: R1 data is missing for this 
data-pipe.&quot;)
+                print(&quot;Therefore all of the R1rho off-resonance model 
has been translated into the corresponding models where R1 is fitted.&quot;)
+                print(&quot;If the R1 parameter should not fitted, consult 
the help pages: help(relax_data.read), to read how to load 'R1 data' 
before analysis.&quot;)
+
+            print(&quot;\nPrevious list of models: %s&quot; % (models))
+            print(&quot;\nNew list of models: %s&quot; % (converted_models))
+
+            # Store the new order of models.
+            self.models = converted_models
+        else:
+            self.models = models

         # No results directory, so default to the current directory.
         if not self.results_dir:


_______________________________________________
relax (<a  rel="nofollow" href="http://www.nmr-relax.com">http://www.nmr-relax.com</a>)

This is the relax-commits mailing list
relax-commits@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="http://www.nmr-relax.com/mail.gna.org/listinfo/relax-commits">https://mail.gna.org/listinfo/relax-commits</a>
</pre></blockquote></blockquote><pre style="margin: 0em;">

_______________________________________________
relax (<a  rel="nofollow" href="http://www.nmr-relax.com">http://www.nmr-relax.com</a>)

This is the relax-devel mailing list
relax-devel@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="http://www.nmr-relax.com/mail.gna.org/listinfo/relax-devel">https://mail.gna.org/listinfo/relax-devel</a>
</pre></blockquote></blockquote></blockquote><pre style="margin: 0em;">


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00172" href="msg00172.html">Re: r25098 - /trunk/auto_analyses/relax_disp.py</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00173" href="msg00173.html">Re: r25098 - /trunk/auto_analyses/relax_disp.py</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00174" href="msg00174.html">Re: r25098 - /trunk/auto_analyses/relax_disp.py</a></strong>
<ul><li><em>From:</em> Troels Emtekær Linnet</li></ul></li>
<li><strong><a name="00176" href="msg00176.html">Re: r25098 - /trunk/auto_analyses/relax_disp.py</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Wed Aug 20 16:40:13 2014</div>  
</body>
</html>
