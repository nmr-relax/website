<!-- MHonArc v2.6.18 -->
<!--X-Subject: r24863 &#45; /branches/r1rho_plotting/test_suite/system_tests/relax_disp.py -->
<!--X-From-R13: gyvaargNaze&#45;erynk.pbz -->
<!--X-Date: Wed, 30 Jul 2014 22:27:29 +0200 -->
<!--X-Message-Id: E1XCaTB&#45;00082k&#45;8v@subversion.gna.org -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>r24863 - /branches/r1rho_plotting/test_suite/system_tests/relax_disp.py -- July 30, 2014 - 22:27</title>
<link rel="stylesheet" type="text/css" href="/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="https://gna.org/images/gna.theme/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />r24863 - /branches/r1rho_plotting/test_suite/system_tests/relax_disp.py</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00497" class="tabs">Index by Date</a> | <a href="threads.html#00497" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00496.html">Date Prev</a>] [<a href="msg00498.html">Date Next</a>] [<a href="msg00496.html">Thread Prev</a>] [<a href="msg00498.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: relax-commits@xxxxxxx</li>
<li class="menuitem">
<em>Date</em>: Wed, 30 Jul 2014 20:27:29 -0000</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00497.html">E1XCaTB-00082k-8v@subversion.gna.org</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>tlinnet</strong> on July 30, 2014 - 22:27:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Author: tlinnet
Date: Wed Jul 30 22:27:28 2014
New Revision: 24863

URL: <a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax?rev=24863&amp;view=rev">http://svn.gna.org/viewcvs/relax?rev=24863&amp;view=rev</a>
Log:
Code validation of systemtest file for Relax_disp.

sr #3124(<a  rel="nofollow" href="https://gna.org/support/?3124">https://gna.org/support/?3124</a>): Grace graphs production for R1rho 
analysis with R2_eff as function of Omega_eff.
sr #3138(<a  rel="nofollow" href="https://gna.org/support/?3138">https://gna.org/support/?3138</a>): Interpolating theta through 
spin-lock offset [Omega], rather than spin-lock field strength [w1].

Modified:
    branches/r1rho_plotting/test_suite/system_tests/relax_disp.py

Modified: branches/r1rho_plotting/test_suite/system_tests/relax_disp.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/r1rho_plotting/test_suite/system_tests/relax_disp.py?rev=24863&amp;r1=24862&amp;r2=24863&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/r1rho_plotting/test_suite/system_tests/relax_disp.py?rev=24863&amp;r1=24862&amp;r2=24863&amp;view=diff</a>
==============================================================================
--- branches/r1rho_plotting/test_suite/system_tests/relax_disp.py       
(original)
+++ branches/r1rho_plotting/test_suite/system_tests/relax_disp.py       Wed 
Jul 30 22:27:28 2014
@@ -239,9 +239,7 @@
 
 
     def setup_r1rho_kjaergaard(self, cluster_ids=[], read_R1=True):
-        &quot;&quot;&quot;Set up the data for the test_r1rho_kjaergaard_*() system tests.
-
-        &quot;&quot;&quot;
+        &quot;&quot;&quot;Set up the data for the test_r1rho_kjaergaard_*() system tests.&quot;&quot;&quot;
 
         # The path to the data files.
         data_path = status.install_path + 
sep+'test_suite'+sep+'shared_data'+sep+'dispersion'+sep+'Kjaergaard_et_al_2013'
@@ -249,7 +247,7 @@
         # Set pipe name, bundle and type.
         ds.pipe_name = 'base pipe'
         ds.pipe_bundle = 'relax_disp'
-        ds.pipe_type= 'relax_disp'
+        ds.pipe_type = 'relax_disp'
 
         # Create the data pipe.
         self.interpreter.pipe.create(pipe_name=ds.pipe_name, 
bundle=ds.pipe_bundle, pipe_type=ds.pipe_type)
@@ -284,7 +282,7 @@
         # Count settings
         j = 0
         for i in range(len(expfileslines)):
-            line=expfileslines[i]
+            line = expfileslines[i]
             if line[0] == &quot;#&quot;:
                 continue
             else:
@@ -787,10 +785,10 @@
 
         # Set up the metadata for the experiments.
         # This value is used in Baldwin.py. It is the 1H Larmor frequency.
-        sfrq= 200. * 1E6
+        sfrq = 200. * 1E6
 
         # Total time of CPMG block.
-        Trelax=0.04
+        Trelax = 0.04
 
         # First set the
         for i in range(len(ids)):
@@ -900,7 +898,7 @@
             grid_results.append([spin.r2[r20_key], spin.dw, spin.pA, 
spin.kex, spin.chi2, spin_id, resi, resn])
 
         ## Now do minimisation.
-        # Standard parameters are: func_tol=1e-25, grad_tol=None, 
max_iter=10000000,
+        # Standard parameters are: func_tol = 1e-25, grad_tol = None, 
max_iter = 10000000,
         set_func_tol = 1e-10
         set_max_iter = 1000
         self.interpreter.minimise(min_algor='simplex', 
func_tol=set_func_tol, max_iter=set_max_iter, constraints=True, scaling=True, 
verbosity=1)
@@ -918,15 +916,15 @@
 
         # Reference values from Baldwin.py.
         # Exchange rate = k+ + k- (s-1)
-        kex=1000.
+        kex = 1000.
         # Fractional population of excited state k+/kex
-        pb=0.01
+        pb = 0.01
         # deltaOmega in ppm
-        dw_ppm=2.
+        dw_ppm = 2.
         #relaxation rate of ground (s-1)
-        R2g=2.
+        R2g = 2.
         #relaxation rate of excited (s-1)
-        R2e=2.
+        R2e = 2.
 
         # Test the parameters which created the data.
         # This is for the 1H spin.
@@ -940,7 +938,8 @@
     def test_baldwin_synthetic_full(self):
         &quot;&quot;&quot;Test synthetic data of Andrew J. Baldwin B14 model. Support 
requst sr #3154 U{<a  rel="nofollow" href="https://gna.org/support/index.php?3154}">https://gna.org/support/index.php?3154}</a>.
 
-        This uses the synthetic data from paper U{DOI: 
10.1016/j.jmr.2014.02.023 &lt;<a  rel="nofollow" href="http://dx.doi.org/10.1016/j.jmr.2014.02.023">http://dx.doi.org/10.1016/j.jmr.2014.02.023</a>&gt;}.&quot;&quot;&quot;
+        This uses the synthetic data from paper U{DOI: 
10.1016/j.jmr.2014.02.023 &lt;<a  rel="nofollow" href="http://dx.doi.org/10.1016/j.jmr.2014.02.023">http://dx.doi.org/10.1016/j.jmr.2014.02.023</a>&gt;}.
+        &quot;&quot;&quot;
 
         # The path to the data files.
         data_path = status.install_path + 
sep+'test_suite'+sep+'shared_data'+sep+'dispersion'+sep+'Baldwin_2014'
@@ -971,10 +970,10 @@
 
         # Set up the metadata for the experiments.
         # This value is used in Baldwin.py. It is the 1H Larmor frequency.
-        sfrq= 200. * 1E6
+        sfrq = 200. * 1E6
 
         # Total time of CPMG block.
-        Trelax=0.04
+        Trelax = 0.04
 
         # First set the
         for i in range(len(ids)):
@@ -1085,7 +1084,7 @@
             grid_results.append([spin.r2a[r20_key], spin.r2b[r20_key], 
spin.dw, spin.pA, spin.kex, spin.chi2, spin_id, resi, resn])
 
         ## Now do minimisation.
-        # Standard parameters are: func_tol=1e-25, grad_tol=None, 
max_iter=10000000,
+        # Standard parameters are: func_tol = 1e-25, grad_tol = None, 
max_iter = 10000000,
         set_func_tol = 1e-11
         set_max_iter = 10000
         self.interpreter.minimise(min_algor='simplex', 
func_tol=set_func_tol, max_iter=set_max_iter, constraints=True, scaling=True, 
verbosity=1)
@@ -1105,15 +1104,15 @@
 
         # Reference values from Baldwin.py.
         # Exchange rate = k+ + k- (s-1)
-        kex=1000.
+        kex = 1000.
         # Fractional population of excited state k+/kex
-        pb=0.01
+        pb = 0.01
         # deltaOmega in ppm
-        dw_ppm=2.
+        dw_ppm = 2.
         #relaxation rate of ground (s-1)
-        R2g=2.
+        R2g = 2.
         #relaxation rate of excited (s-1)
-        R2e=100.
+        R2e = 100.
 
         # Test the parameters which created the data.
         # This is for the 1H spin.
@@ -4715,7 +4714,7 @@
         MODSEL = 'AIC'
 
         # Execute the auto-analysis (fast).
-        # Standard parameters are: func_tol=1e-25, grad_tol=None, 
max_iter=10000000,
+        # Standard parameters are: func_tol = 1e-25, grad_tol = None, 
max_iter = 10000000,
         OPT_FUNC_TOL = 1e-1
         relax_disp.Relax_disp.opt_func_tol = OPT_FUNC_TOL
         OPT_MAX_ITERATIONS = 1000
@@ -4775,7 +4774,7 @@
         MODSEL = 'AIC'
 
         # Execute the auto-analysis (fast).
-        # Standard parameters are: func_tol=1e-25, grad_tol=None, 
max_iter=10000000,
+        # Standard parameters are: func_tol = 1e-25, grad_tol = None, 
max_iter = 10000000,
         OPT_FUNC_TOL = 1e-1
         relax_disp.Relax_disp.opt_func_tol = OPT_FUNC_TOL
         OPT_MAX_ITERATIONS = 1000
@@ -4921,7 +4920,7 @@
         MC_NUM = 3
 
         # Execute the auto-analysis (fast).
-        # Standard parameters are: func_tol=1e-25, grad_tol=None, 
max_iter=10000000,
+        # Standard parameters are: func_tol = 1e-25, grad_tol = None, 
max_iter = 10000000,
         OPT_FUNC_TOL = 1e-1
         OPT_MAX_ITERATIONS = 1000
 
@@ -5119,7 +5118,7 @@
         MODSEL = 'AIC'
 
         # Execute the auto-analysis (fast).
-        # Standard parameters are: func_tol=1e-25, grad_tol=None, 
max_iter=10000000,
+        # Standard parameters are: func_tol = 1e-25, grad_tol = None, 
max_iter = 10000000,
         OPT_FUNC_TOL = 1e-1
         relax_disp.Relax_disp.opt_func_tol = OPT_FUNC_TOL
         OPT_MAX_ITERATIONS = 1000
@@ -5536,7 +5535,7 @@
         MODSEL = 'AIC'
 
         # Execute the auto-analysis (fast).
-        # Standard parameters are: func_tol=1e-25, grad_tol=None, 
max_iter=10000000.
+        # Standard parameters are: func_tol = 1e-25, grad_tol = None, 
max_iter = 10000000,
         OPT_FUNC_TOL = 1e-1
         relax_disp.Relax_disp.opt_func_tol = OPT_FUNC_TOL
         OPT_MAX_ITERATIONS = 1000
@@ -5663,7 +5662,7 @@
         # Then select model.
         self.interpreter.relax_disp.select_model(model=MODEL)
 
-        # GRID inc of 7 was found to be appropriate not to find pA=0.5.
+        # GRID inc of 7 was found to be appropriate not to find pA = 0.5.
         GRID_INC = 7
 
         # Store grid and minimisations results.
@@ -5686,7 +5685,7 @@
             grid_results.append([spin.r2[r20_key_600], spin.r2[r20_key_500], 
spin.dw, spin.pA, spin.kex, spin.chi2, spin_id, resi, resn])
 
         ## Now do minimisation.
-        # Standard parameters are: func_tol=1e-25, grad_tol=None, 
max_iter=10000000,
+        # Standard parameters are: func_tol = 1e-25, grad_tol = None, 
max_iter = 10000000,
         set_func_tol = 1e-9
         set_max_iter = 100000
         self.interpreter.minimise(min_algor='simplex', 
func_tol=set_func_tol, max_iter=set_max_iter, constraints=True, scaling=True, 
verbosity=1)
@@ -6577,7 +6576,7 @@
         # Set pipe name, bundle and type.
         pipe_name = 'base pipe'
         pipe_bundle = 'relax_disp'
-        pipe_type= 'relax_disp'
+        pipe_type = 'relax_disp'
 
         # The path to the data files.
         data_path = status.install_path + 
sep+'test_suite'+sep+'shared_data'+sep+'dispersion'+sep+'Kjaergaard_et_al_2013'
@@ -6624,7 +6623,7 @@
         MODSEL = 'AIC'
 
         # Execute the auto-analysis (fast).
-        # Standard parameters are: func_tol=1e-25, grad_tol=None, 
max_iter=10000000,
+        # Standard parameters are: func_tol = 1e-25, grad_tol = None, 
max_iter = 10000000,
         OPT_FUNC_TOL = 1e-1
         relax_disp.Relax_disp.opt_func_tol = OPT_FUNC_TOL
         OPT_MAX_ITERATIONS = 1000



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer">You are on the <a href="http://gna.org">Gna!</a> mail server.</div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Wed Jul 30 22:40:02 2014</div>  
</body>
</html>
