<!-- MHonArc v2.6.10 -->
<!--X-Subject: Re: r2860 &#45;	/branches/test_suite/test_suite/unit_tests/unit_test_runner.py -->
<!--X-From-R13: "Sqjneq q'Ohiretar" <rqjneq.qnhiretarNtznvy.pbz> -->
<!--X-Date: Sat, 02 Dec 2006 15:38:45 +0100 -->
<!--X-Message-Id: 7f080ed10612020637x2562239brd6600b08543157d5@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: E1Gm6CG&#45;0002eM&#45;Cf@subversion.gna.org -->
<!--X-Reference: 7f080ed10611200602p1912311dx90e3423c7abcab8c@mail.gmail.com -->
<!--X-Reference: 4561CEEF.7030201@bmb.leeds.ac.uk -->
<!--X-Reference: 7f080ed10611210032x481f53afod115b9102a5919e3@mail.gmail.com -->
<!--X-Reference: 45700351.5080904@bmb.leeds.ac.uk -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: r2860 -	/branches/test_suite/test_suite/unit_tests/unit_test_runner.py -- December 02, 2006 - 15:38</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: r2860 -	/branches/test_suite/test_suite/unit_tests/unit_test_runner.py</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00006" class="tabs">Index by Date</a> | <a href="threads.html#00006" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00005.html">Date Prev</a>] [<a href="msg00009.html">Date Next</a>] [<a href="msg00005.html">Thread Prev</a>] [<a href="msg00002.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: &quot;Gary S. Thompson&quot; &lt;garyt@xxxxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Sun, 3 Dec 2006 01:37:57 +1100</li>
<li class="menuitem">
<em>Cc</em>: relax-devel@xxxxxxx</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00006.html">7f080ed10612020637x2562239brd6600b08543157d5@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;E1Gm6CG-0002eM-Cf@subversion.gna.org&gt;	&lt;7f080ed10611200602p1912311dx90e3423c7abcab8c@mail.gmail.com&gt;	&lt;4561CEEF.7030201@bmb.leeds.ac.uk&gt;	&lt;7f080ed10611210032x481f53afod115b9102a5919e3@mail.gmail.com&gt;	&lt;<a href="msg00001.html">45700351.5080904@bmb.leeds.ac.uk</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on December 02, 2006 - 15:38:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<blockquote class="blockquote"><pre style="margin: 0em;">&gt;&gt; &gt; I'll look into this once I
&gt;&gt; &gt; attempt to migrate the system/function tests to use parts or all of
&gt;&gt; &gt; the unittest framework.  At the moment though, we could simply have
&gt;&gt; &gt; relax run the unit tests followed by the system/function tests (or the
&gt;&gt; &gt; other way around).
&gt;&gt;
&gt;&gt;
&gt;&gt; The intention was to have a functional test that ran the unit_tester ;-)
&gt;
&gt;
&gt; It could be implemented that way.  It may be better to keep a
&gt; separation between the different types of test though, especially
&gt; considering how big the unit tests may become.  Then relax can present
&gt; a report of each category, and only pass if all categories pass.  It
&gt; will allow more categories of tests to be added separately - for
&gt; example installation tests, compilation tests, etc.
&gt;
&gt;
My thoughts are that unit tests should be a category in the test suite.
Certainly running relax with a command line flag such as -test or
-test_suite should run all the tests available as a default (because
this is what the user generally wants). If we need the ability to test
sub sets of tests then we  need some extra options (philosophically we
should be aiming for users testers and in fact everyone to run all the
tests by default, we catch more bugs that way...)
</pre></blockquote><pre style="margin: 0em;"><br>As in my previous post, I would say that both the unit tests and the
system/functional tests would be classified as two categories of tests
at the highest level.  For the running of different categories of
tests separately, which would be useful for when you are coding, what
would be the best way to do this?  What type of granularity should
this be implemented to?  For example, could the unit tests be run by
themselves using say the --unit-test flag?  Or should the running of
individual categories of tests be lower level (maybe even individual
tests)?</pre><br>
<br>
<blockquote class="blockquote"><pre style="margin: 0em;">&gt;&gt; Two other questions
&gt;&gt;
&gt;&gt; 1. do you use the '_'function_name convention for private functions
&gt;
&gt;
&gt; Currently relax doesn't have private functions - I don't see a need
&gt; for this,</pre><br>
<pre style="margin: 0em;">Actually I see quite a strong impetus for private methods/classes in
code that is used/developed by more than one person.  In general a class
should define a public interface (bits shat shouldn't go away) and
private methods (implimentation details)...
</pre></blockquote><pre style="margin: 0em;"><br>Although I don't have a problem with having private names in relax, I
don't believe that these are very important within the Python
language.  This can be seen by grepping the Python source code.  For
example if I go into my Python installation directory
(/usr/lib/python2.4), I get the following method/function counts:</pre><br>
<pre style="margin: 0em;">[edward@p2800 python2.4]$ grep -rIP &quot;def __[a-z]*__\(&quot; * | wc -l
4495
[edward@p2800 python2.4]$ grep -rIP &quot;def __[a-z]*\(&quot; * | wc -l
80
[edward@p2800 python2.4]$ grep -rIP &quot;def [a-z]*\(&quot; * | wc -l
7674</pre><br>
<pre style="margin: 0em;">If just the site-packages are grepped:</pre><br>
<pre style="margin: 0em;">[edward@p2800 site-packages]$ grep -rIP &quot;def __[a-z]*__\(&quot; * | wc -l
2244
[edward@p2800 site-packages]$ grep -rIP &quot;def __[a-z]*\(&quot; * | wc -l
45
[edward@p2800 site-packages]$ grep -rIP &quot;def [a-z]*\(&quot; * | wc -l
3119</pre><br>
<pre style="margin: 0em;">These numbers are very telling.  Also, I don't think we need to
enforce the fact that certain methods of the public interface
shouldn't be overwritten.  If a user does this, then that is their
problem.  For example after importing the 'math' module, I can without
problem do the following:</pre><br>
<blockquote class="blockquote"><blockquote class="blockquote"><blockquote class="blockquote"><tt>math.sin = 1
</tt></blockquote></blockquote></blockquote><pre style="margin: 0em;"><br></pre><br>
<blockquote class="blockquote"><pre style="margin: 0em;">&gt; except of course for the eventual conversion of 'float.py'
&gt; into a separate Python module.  I have used the 'self._xxxx()' style
&gt; only in the automatic diffusion tensor object creation code and this
&gt; only hides these functions by a search statement within the
&gt; 'self.__repr__()' methods of the relax data structure
&gt; 'self.relax.data'.  I know Python fudges private functions using the
&gt; 'self.__xxxx()' notation, but I have a feeling site-packages do this
&gt; differently, not through private objects but by other methods.  I
&gt; could be wrong though.
&gt;
Actually I am pretty sure you are right. Though if you ask guido he
would tell you that the __ thing isn't a fudge it is just a marker
(almost all public/private systems can be compromised by a determined
programmer so why bother with anything other than information?)</pre><br>
<pre style="margin: 0em;">Further points. My intention wa to rename all the system tests so they
were of the form test_&lt;function&gt;.py so that we can use the unit test
automatic discovery and then rewrite main.py to use a TestRunner and
TestCase setup (headings etc would then come from instance variables) I
can try and create something that does what is already in parallel using
the new infrastructure (maybe we should leave the test suite branch up
for the moment?)
</pre></blockquote><pre style="margin: 0em;"><br>The first thing that needs to be done is making 'relax --test-suite'
work.  I would then suggest the following structure of the system
tests.  In 'test_suite/system_tests' create the directories
'model_free', etc.  Then 'model_free.py' could be split (by svn cp)
into multiple 'test_&lt;category&gt;.py' files.  For example
'test_suite/system_tests/model_free/test_optimisation.py'.  This could
be done for all the system tests.</pre><br>
<pre style="margin: 0em;">As for headings, these could be incorporated into one large printout
when a failure occurs.  I.e. for debugging merge the heading, the
relax print outs, and the traceback messages into a single string
which is written to stderr.  If you would like to do the work on the
unit tests and the system/functional tests, this can occur directly in
the 1.3 line.  As long a relax runs, it shouldn't matter what state
the test suite is in in the unstable 1.3 line.</pre><br>
<pre style="margin: 0em;">Edward</pre><br>
<br>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00001" href="msg00001.html">Re: r2860 -	/branches/test_suite/test_suite/unit_tests/unit_test_runner.py</a></strong>
<ul><li><em>From:</em> Gary S. Thompson</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Sun Dec 03 02:00:18 2006</div>  
</body>
</html>
