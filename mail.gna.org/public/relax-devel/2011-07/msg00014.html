<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: [bug #18391] Palmer extract. Error in chi2 read when 'sims' is	different from 0 -->
<!--X-From-R13: "Sqjneq q'Ohiretar" <rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Fri, 22 Jul 2011 16:55:00 +0200 -->
<!--X-Message-Id: CAED9pY&#45;dKdDj1mpxxJbD7AMk_r7DHJPqZjRVHJ+szVy=HiXrXg@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 20110721&#45;124246.sv17817.55686@gna.org -->
<!--X-Reference: 4E294E72.9060903@ulaval.ca -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [bug #18391] Palmer extract. Error in chi2 read when 'sims' is	different from 0 -- July 22, 2011 - 16:55</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: [bug #18391] Palmer extract. Error in chi2 read when 'sims' is	different from 0</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00014" class="tabs">Index by Date</a> | <a href="threads.html#00014" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00013.html">Date Prev</a>] [<a href="msg00015.html">Date Next</a>] [<a href="msg00010.html">Thread Prev</a>] [<a href="msg00011.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Sébastien Morin &lt;sebastien.morin.1@xxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Fri, 22 Jul 2011 16:54:29 +0200</li>
<li class="menuitem">
<em>Cc</em>: Paolo Calligari &lt;NO-REPLY.INVALID-ADDRESS@xxxxxxx&gt;,	&quot;relax-devel@xxxxxxx&quot; &lt;relax-devel@xxxxxxx&gt;,	Paolo Calligari &lt;paolo.calligari@xxxxxx&gt;</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=gamma;	h=mime-version:sender:in-reply-to:references:date	:x-google-sender-auth:message-id:subject:from:to:cc:content-type	:content-transfer-encoding;	bh=aOo3o/96aoVak5BYXZL1s8czi/rAV5NuE3h8HyKZlaA=;	b=VSaZM8HbZkWIPaSYsurXBIuxwwPGbE+5mJK3jSd931xcFdN1LZVkgCIhBAU3r8lRr7	ky5spMyP5/BLJS779vfdJ93srkizqy96GNPLgJ6vaOdFMMWktE7cTB5+nCAoP856Wg3e	jcg+IGYx9EKdc7Ct7vf0kEfFDOyP8EViTaRZ8=</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00014.html">CAED9pY-dKdDj1mpxxJbD7AMk_r7DHJPqZjRVHJ+szVy=HiXrXg@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;20110721-124246.sv17817.55686@xxxxxxx&gt;	&lt;4E294E72.9060903@xxxxxxxxx&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on July 22, 2011 - 16:55:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Hi Paolo,

Welcome to the relax mailing lists.  I've looked at your suggestion,
and it might work.  Unfortunately I wrote this mfout parsing code a
long, long time ago, and it is not very flexible.  There is now the
pystarlib project (<a  rel="nofollow" href="http://code.google.com/p/pystarlib/">http://code.google.com/p/pystarlib/</a>) which would be
a much better way of processing these STAR formatted mfout files.
This is included with the bmrblib project
(<a  rel="nofollow" href="http://gna.org/projects/bmrblib/">http://gna.org/projects/bmrblib/</a>) which will be bundled with relax in
the future.  However, considering that Art Palmer has stopped
development of his program Modelfree for over a decade (it's been in
maintenance mode since 04/15/98), this solution would probably be too
much effort.

As Seb said, would you be able to share some of your data?  If you
could attach an mfout file with and without simulations to the bug
report (<a  rel="nofollow" href="http://gna.org/bugs/?18391">http://gna.org/bugs/?18391</a>), that would be much appreciated.
This only needs to have data for 1 or 2 spins (in the mfdata, etc
files), and this truncated data can be randomised if total secrecy is
needed.  I would then be able to add both files to the relax test
suite and add checks to see if relax can read the files and data
correctly.  This will guarantee that relax will be able to read these
mfout file for eternity.

Another advantage of adding this to the test suite will be that I can
compare the reading of different mfout files.  I have an old file from
2002 generated by Modelfree 4.15 which relax 1.3 can read perfectly as
the code currently is.  Which version of Modelfree have you used?
Maybe this is a version difference.

Cheers,

Edward


P. S.  If you insist on using Modelfree4, I would recommend a few
source code changes so that you obtain much better results.  Firstly
you need to massively increase the precision by the following change:

diff -r modelfree/fglob.F modelfree_orig/fglob.F
49c49
&lt;       parameter (maxit=10000000,convrg=1E-25)
---
</pre><blockquote class="blockquote"><pre style="margin: 0em;">      parameter (maxit=50,convrg=0.0001)
</pre></blockquote><pre style="margin: 0em;">

These numbers are much more reasonable and match the default precision
of relax.  This low precision was because this code was originally
written to work on this <a  rel="nofollow" href="http://en.wikipedia.org/wiki/VAX">http://en.wikipedia.org/wiki/VAX</a>, without
taking a lifetime to complete.  The high precision calculations are no
longer a problem for modern machines.




On 22 July 2011 12:18, Sébastien Morin &lt;sebastien.morin.1@xxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Dear Paolo,

First of all, welcome to relax.

Second, thanks for submitting this bug report as well as a solution.

Have you tested the solution with data without MC simulations performed ?

Could you share a part of your dataset (possibly randomized) such that we
can reproduce the bug and include the data into the test suite for the bug
never to come back again, please ?

Thanks !


Séb  :)


On 11-07-21 2:42 PM, Paolo Calligari wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">

URL:
  &lt;<a  rel="nofollow" href="http://gna.org/bugs/?18391">http://gna.org/bugs/?18391</a>&gt;

                 Summary: Palmer extract. Error in chi2 read when 'sims'
is
different from 0
                 Project: relax
            Submitted by: pcalligari
            Submitted on: Thu 21 Jul 2011 12:42:45 PM GMT
                Category: relax's source code
                Severity: 3 - Normal
                Priority: 5 - Normal
                  Status: None
                 Privacy: Public
             Assigned to: None
         Originator Name:
        Originator Email:
             Open/Closed: Open
         Discussion Lock: Any
                 Release: 1.3.10
        Operating System: All systems

    _______________________________________________________

Details:

When trying to read palmer's modelfree output performed with MC
simulations,
the module palmer.extract(dir) fails.

Looking to the code, I'd say that line 731 in generic_fns/palmer.py
should be changed from

row = split(mfout_lines[chi2_pos + 2 + 22*pos])

to

row = split(mfout_lines[chi2_pos + 2 + 41*pos])


I've tried this change and now it works fine.

cheers,
Paolo





    _______________________________________________________

Reply to this item at:

  &lt;<a  rel="nofollow" href="http://gna.org/bugs/?18391">http://gna.org/bugs/?18391</a>&gt;

_______________________________________________
  Message sent via/by Gna!
  <a  rel="nofollow" href="http://gna.org/">http://gna.org/</a>


_______________________________________________
relax (<a  rel="nofollow" href="http://nmr-relax.com">http://nmr-relax.com</a>)

This is the relax-devel mailing list
relax-devel@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="https://mail.gna.org/listinfo/relax-devel">https://mail.gna.org/listinfo/relax-devel</a>
</pre></blockquote><pre style="margin: 0em;">

--
Sébastien Morin, Ph.D.
Postdoctoral Fellow, S. Grzesiek NMR Laboratory
Department of Structural Biology
Biozentrum, Universität Basel
Klingelbergstrasse 70
4056 Basel
Switzerland


_______________________________________________
relax (<a  rel="nofollow" href="http://nmr-relax.com">http://nmr-relax.com</a>)

This is the relax-devel mailing list
relax-devel@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="https://mail.gna.org/listinfo/relax-devel">https://mail.gna.org/listinfo/relax-devel</a>

</pre></blockquote><pre style="margin: 0em;">


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00009" href="msg00009.html">[bug #18391] Palmer extract. Error in chi2 read when 'sims' is	different from 0</a></strong>
<ul><li><em>From:</em> Paolo Calligari</li></ul></li>
<li><strong><a name="00010" href="msg00010.html">Re: [bug #18391] Palmer extract. Error in chi2 read when 'sims' is	different from 0</a></strong>
<ul><li><em>From:</em> Sébastien Morin</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Fri Jul 22 19:40:12 2011</div>  
</body>
</html>
