<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: gui vs wx python -->
<!--X-From-R13: Eéonfgvra [beva <fronfgvra.zbeva.1Nhyniny.pn> -->
<!--X-Date: Mon, 06 Jun 2011 15:32:14 +0200 -->
<!--X-Message-Id: 4DECD6BF.4010700@ulaval.ca -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 4DB47A25.3000605@unibas.ch -->
<!--X-Reference: 4DB53313.7060505@ulaval.ca -->
<!--X-Reference: 4DB574AB.4040706@ulaval.ca -->
<!--X-Reference: BANLkTikQa2csoOx1hKsf8+Uv+JDsnXhVjw@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: gui vs wx python -- June 06, 2011 - 15:32</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: gui vs wx python</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00018" class="tabs">Index by Date</a> | <a href="threads.html#00018" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00017.html">Date Prev</a>] [<a href="msg00019.html">Date Next</a>] [<a href="msg00017.html">Thread Prev</a>] [<a href="msg00019.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Edward d'Auvergne &lt;edward.dauvergne@xxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Mon, 06 Jun 2011 15:31:43 +0200</li>
<li class="menuitem">
<em>Cc</em>: &quot;relax-devel@xxxxxxx&quot; &lt;relax-devel@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00018.html">4DECD6BF.4010700@ulaval.ca</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;4DB47A25.3000605@xxxxxxxxx&gt;	&lt;4DB53313.7060505@xxxxxxxxx&gt;	&lt;4DB574AB.4040706@xxxxxxxxx&gt;	&lt;BANLkTikQa2csoOx1hKsf8+Uv+JDsnXhVjw@xxxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>User-agent</em>: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; en-US;	rv:1.9.2.17) Gecko/20110414 Lightning/1.0b2 Thunderbird/3.1.10	ThunderBrowse/3.3.5</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Sébastien Morin</strong> on June 06, 2011 - 15:32:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">
Hi Ed,

Thanks for your help !

</pre><tt>I checked the wxPython website more carefully and found something quite 
</tt><tt>interesting:
</tt><pre style="margin: 0em;">

===============
Mac OSX Binaries
</pre><tt>The wxPython binaries for OSX are mountable disk images. Simply double 
</tt><tt>click to mount the image and then run the installer application in the 
</tt><tt>image. Be sure to download the image that matches the version of Python 
</tt><tt>that you want to use it with.
</tt><pre style="margin: 0em;">

</pre><tt>The files with &quot;carbon&quot; in the name use the Carbon API for implementing 
</tt><tt>the GUI, are compatible with PPC and i386 machines are will work on OSX 
</tt><tt>10.4 and onwards. Since they use the Carbon API they are limited to 
</tt><tt>running in 32-bit mode.
</tt><pre style="margin: 0em;">

</pre><tt>The file with &quot;cocoa&quot; in the name use the Cocoa API for implementing the 
</tt><tt>GUI, requires at least OSX 10.5, and supports either 32-bit or 64-bit 
</tt><tt>architectures. If you would like to have both the Carbon and Cocoa 
</tt><tt>versions installed you will need to do something like install the Carbon 
</tt><tt>build for Python 2.6 and install the Cocoa build for Python 2.7.
</tt><pre style="margin: 0em;">

wxPython2.9-osx-carbon-py2.5
wxPython2.9-osx-carbon-py2.6
wxPython2.9-osx-carbon-py2.7
wxPython2.9-osx-cocoa-py2.7
===============

</pre><tt>So, I installed Python-2.7.1 and wxPython-2.9 using Cocoa (64-bit 
</tt><tt>compatible). Everything was smooth and wx could be import in 
</tt><tt>python-2.7.1. Of course, for relax to be happy, I also had to install 
</tt><tt>numpy for python-2.7.1. Numpy was easy using successively &quot;git clone 
</tt><tt>git://github.com/numpy/numpy.git numpy&quot;, &quot;python setup.py build&quot;, and 
</tt><tt>&quot;python setup.py install&quot;.
</tt><pre style="margin: 0em;">

</pre><tt>For scipy, manual installation did not work because of a problem in the 
</tt><tt>&quot;umfpack&quot; module. However, when removing the module (by commenting out 
</tt><tt>the line &quot;&quot; in &quot;&quot;), the program compiled without problem. However, as 
</tt><tt>for the compiled package using Mac installer, there was a 32/64-bit 
</tt><tt>problem with &quot;cephes.so&quot; when starting relax. Since scipy is not a 
</tt><tt>strict dependence for relax (i.e. it is only needed for the frame order 
</tt><tt>theory analysis), I decided to go on without (after more than an hour 
</tt><tt>struggling).
</tt><pre style="margin: 0em;">

...

</pre><tt>Then, I tried starting the gui..! The splash screen appeared (!), but it 
</tt><tt>then crashed with the following error:
</tt><pre style="margin: 0em;">

=====
$  ./relax -g
Traceback (most recent call last):
  File &quot;./relax&quot;, line 381, in &lt;module&gt;
    Relax()
  File &quot;./relax&quot;, line 127, in __init__
    app = gui.App(script=self.script_file)
</pre><tt>  File 
</tt><tt>&quot;/Users/semor/Documents/pse-4/collaborations/relax/relax-1.3/gui/__init__.py&quot;, 
</tt><tt>line 84, in __init__
</tt><tt>    super(App, self).__init__(redirect=redirect, filename=filename, 
</tt><tt>useBestVisual=useBestVisual, clearSigInt=clearSigInt)
</tt><tt>  File 
</tt><tt>&quot;/usr/local/lib/wxPython-2.9.1.1/lib/python2.7/site-packages/wx-2.9.1-osx_cocoa/wx/_core.py&quot;, 
</tt><tt>line 8470, in __init__
</tt><pre style="margin: 0em;">
    self._BootstrapApp()
</pre><tt>  File 
</tt><tt>&quot;/usr/local/lib/wxPython-2.9.1.1/lib/python2.7/site-packages/wx-2.9.1-osx_cocoa/wx/_core.py&quot;, 
</tt><tt>line 8035, in _BootstrapApp
</tt><pre style="margin: 0em;">
    return _core_.PyApp__BootstrapApp(*args, **kwargs)
</pre><tt>  File 
</tt><tt>&quot;/Users/semor/Documents/pse-4/collaborations/relax/relax-1.3/gui/__init__.py&quot;, 
</tt><tt>line 94, in OnInit
</tt><pre style="margin: 0em;">
    main = Main(parent=None, id=-1, title=&quot;&quot;, script=self.script)
</pre><tt>  File 
</tt><tt>&quot;/Users/semor/Documents/pse-4/collaborations/relax/relax-1.3/gui/relax_gui.py&quot;, 
</tt><tt>line 121, in __init__
</tt><pre style="margin: 0em;">
    self.build_main_window()
</pre><tt>  File 
</tt><tt>&quot;/Users/semor/Documents/pse-4/collaborations/relax/relax-1.3/gui/relax_gui.py&quot;, 
</tt><tt>line 244, in build_main_window
</tt><tt>    self.analysis_frames[self.hardcoded_index_r1_3] = Auto_r1(self, 
</tt><tt>self.notebook_frq_3, hardcoded_index=self.r1_index[2])
</tt><tt>  File 
</tt><tt>&quot;/Users/semor/Documents/pse-4/collaborations/relax/relax-1.3/gui/analyses/auto_rx_base.py&quot;, 
</tt><tt>line 82, in __init__
</tt><pre style="margin: 0em;">
    main_box = self.build_main_box()
</pre><tt>  File 
</tt><tt>&quot;/Users/semor/Documents/pse-4/collaborations/relax/relax-1.3/gui/analyses/auto_rx_base.py&quot;, 
</tt><tt>line 370, in build_main_box
</tt><pre style="margin: 0em;">
    right_box = self.build_right_box()
</pre><tt>  File 
</tt><tt>&quot;/Users/semor/Documents/pse-4/collaborations/relax/relax-1.3/gui/analyses/auto_rx_base.py&quot;, 
</tt><tt>line 406, in build_right_box
</tt><tt>    self.peak_intensity = Peak_intensity(gui=self.gui, 
</tt><tt>parent=self.parent, data=self.data, label=self.label, box=box)
</tt><tt>  File 
</tt><tt>&quot;/Users/semor/Documents/pse-4/collaborations/relax/relax-1.3/gui/components/spectrum.py&quot;, 
</tt><tt>line 152, in __init__
</tt><pre style="margin: 0em;">
    sizer_grid.Add(self.field_rx_list[-1], 0, wx.ADJUST_MINSIZE, 0)
</pre><tt>  File 
</tt><tt>&quot;/usr/local/lib/wxPython-2.9.1.1/lib/python2.7/site-packages/wx-2.9.1-osx_cocoa/wx/_core.py&quot;, 
</tt><tt>line 14035, in Add
</tt><pre style="margin: 0em;">
    return _core_.Sizer_Add(*args, **kwargs)
</pre><tt>wx._core.PyAssertionError: C++ assertion &quot;Assert failure&quot; failed at 
</tt><tt>/BUILD/wxPython-src-2.9.1.1/src/common/sizer.cpp(1369) in DoInsert(): 
</tt><tt>too many items (21 &gt; 2*10) in grid sizer (maybe you should omit the 
</tt><tt>number of either rows or columns?)
</tt><pre style="margin: 0em;">
=====

</pre><tt>Is this a bug in relax with how it deals with grid sizer, or is it a 
</tt><tt>problem with wxPython ???
</tt><pre style="margin: 0em;">
Any idea how I can solve this issue ??

...

</pre><tt>Finally, you proposed that the Mac people should maybe get a relax 
</tt><tt>package which has everything bundled together. This would be great, but 
</tt><tt>I am not sure if this is necessary... However, maybe more information on 
</tt><tt>the steps to get the system working properly for relax would be good...
</tt><pre style="margin: 0em;">

...

Thanks a lot again !!!!!!!!!!!!

Cheers,


Séb  :)



On 11-05-16 10:44 AM, Edward d'Auvergne wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">
Hi,

Sorry for not responding earlier.  I would not worry about the 32-bit
vs. 64-bit issues.  This appears to simply be a badly packaged
wxPython file for 64-bit Mac OS X.  Could you try the source wxPython
package and see if you can compile it?  You could possible try older
version of wxPython from here
<a  rel="nofollow" href="http://sourceforge.net/projects/wxpython/files/wxPython/">http://sourceforge.net/projects/wxpython/files/wxPython/</a> as well to
see if it is a version issue.  The real issue is within wxPython and
not anything else.  I'm starting to wonder if the Mac OS X people need
a relax package which has everything bundled together (python,
wxPython, minfx (<a  rel="nofollow" href="http://gna.org/projects/minfx/">http://gna.org/projects/minfx/</a>), bmrblib
(<a  rel="nofollow" href="http://gna.org/projects/bmrblib/">http://gna.org/projects/bmrblib/</a>), python-devel, scipy, scientific,
etc.).  This would be a huge effort though and would need to be
automated via scripts to build the package.

Regards,

Edward



On 25 April 2011 15:18, Sébastien Morin&lt;sebastien.morin.1@xxxxxxxxx&gt;  wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">
Hi,

Instead of switching the system python installation to its 32-bit version
using &quot;export VERSIONER_PYTHON_PREFER_32_BIT=yes&quot;, as stated before, I
manually switched to using 32-bit python (2.6.6), numpy (1.5.1) and scipy
(0.9.0) from fink (instead of 64-bit python 2.6.1, numpy 2.0.0, and scipy
0.10.0 directly under Mac OS X). As relax uses the &quot;/usr/bin/env python&quot; in
order to get the python path (header of executable file &quot;relax&quot;), I had to
manually change it to &quot;/sw/bin/python2.6&quot; (the fink path for python-2.6
binary) to do so.

The unit tests all passed without the warnings discussed before (post at
<a  rel="nofollow" href="/mail.gna.org/public/relax-devel/2011-04/msg00050.html">https://mail.gna.org/public/relax-devel/2011-04/msg00050.html</a> ; Message-id:
&lt;4DB419A4.1030201@xxxxxxxxx&gt;). The warnings were also absent from the system
tests, although 9 errors arose because of the unavailability of the C
modules:

====
RelaxError: RelaxError: Relaxation curve fitting is not available.  Try
compiling the C modules on your platform.
====

The C modules, however, compiled without error using scons-1.2.0-2 (also
from fink). However, when starting the relax prompt, the following error
arose:

====
ImportError:
dlopen(/Users/semor/Documents/pse-4/collaborations/relax/relax-1.3/maths_fns/relax_fit.so,
2): no suitable image found.  Did find:

  
/Users/semor/Documents/pse-4/collaborations/relax/relax-1.3/maths_fns/relax_fit.so:
mach-o, but wrong architecture
Relaxation curve fitting is unavailable, try compiling the C modules.
====

It is as if, although python is switched to the 32-bit version from fink,
scons still compiles the executables for the 64-bit Mac OS X system...
Indeed, the command file yields the following output:

====
./maths_fns/relax_fit.so: Mach-O 64-bit bundle x86_64
./maths_fns/c_chi2.os:      Mach-O 64-bit object x86_64
./maths_fns/exponential.os: Mach-O 64-bit object x86_64
./maths_fns/relax_fit.os:   Mach-O 64-bit object x86_64
====

Moreover, in addition to the C modules not being compiled properly, it turns
out that fink does not allow the installation of wxPython. Hence, I had to
use the module installed for the system 64-bit python. In 32-bit python,
this module loaded without error. However, when starting the gui (&quot;relax
-g&quot;, the following error arose:

====
This program needs access to the screen.
Please run with 'pythonw', not 'python', and only when you are logged
in on the main display of your Mac.
====

Apparently, pythonw is present for the system (which is, unfortunately,
64-bit, thus incompatible to wxPython), but not present with the fink
installation (which is 32-bit, but since lacks pythonw, can't have access to
the graphical interface)...

This situaiton is becoming more and more complicated...
Maybe a simpler fix would be to find  simple way to really use a 32-bit
version of the system python installation...
Any idea how to solve this ?


Séb  :)



On 11-04-25 10:38 AM, Sébastien Morin wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">
Hi,

In order to test the gui by manually changing to 32-bit python, I typed
the following command:

      export VERSIONER_PYTHON_PREFER_32_BIT=yes

Python was then working in 32-bit mode, which allowed the import of wx
within python, hence allowing the dependency check for wx to pass and
the launch of the gui.

However, I then got the following error:

====
ImportError:

dlopen(/Library/Python/2.6/site-packages/scipy-0.10.0.dev_20110325-py2.6-macosx-10.6-universal.egg/scipy/special/_cephes.so,
2): Symbol not found: _aswfa_
    Referenced from:

/Library/Python/2.6/site-packages/scipy-0.10.0.dev_20110325-py2.6-macosx-10.6-universal.egg/scipy/special/_cephes.so
    Expected in: flat namespace
   in

/Library/Python/2.6/site-packages/scipy-0.10.0.dev_20110325-py2.6-macosx-10.6-universal.egg/scipy/special/_cephes.so
====

Testing further, it turns out that the relax prompt yields the same
error, similarly to the relax test-suite (i.e. the following commands
all yield the same error: &quot;relax&quot;, &quot;relax -g&quot;, &quot;relax -u&quot;, &quot;relax -s&quot;,
&quot;relax -t&quot;, &quot;relax -h&quot;, etc).

My scipy version is 0.10.0.dev (running under python 6.2.1, now in
32-bit mode). As reported in a recent post at
<a  rel="nofollow" href="/mail.gna.org/public/relax-devel/2011-04/msg00050.html">https://mail.gna.org/public/relax-devel/2011-04/msg00050.html</a>
(Message-id:&lt;4DB419A4.1030201@xxxxxxxxx&gt;), testing scipy yielded some
errors and failures which could be related to the current problem (or
not).

Any idea what this could be a problem with running 32-bit python under
Mac OS X, or a problem specific to relax ???

Anyway, it turns out that simply switching from 64-bit to 32-bit python
under Mac OS X does not allow the use of the gui...

Thanks a lot !!!!!!


Séb  :)



On 11-04-24 9:29 PM, Sébastien Morin wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">
Hi,

I just installed wxPython on my Mac running OS X in order to be able to
run the relax gui.

I installed &quot;wxPython2.8-osx-unicode-py2.6&quot; from
&quot;<a  rel="nofollow" href="http://www.wxpython.org/download.php#stable&quot">http://www.wxpython.org/download.php#stable&quot</a>;.

When trying to start the gui, I get the following message:

       &quot;&quot;RelaxError: To use the GUI, the wx python module must be
installed.&quot;

When I try to import wx withon python, the module seems there, but not
working, as I get the following error:

====
import wx
Traceback (most recent call last):
     File &quot;&lt;stdin&gt;&quot;, line 1, in&lt;module&gt;
     File

&quot;//usr/local/lib/wxPython-unicode-2.8.12.0/lib/python2.6/site-packages/wx-2.8-mac-unicode/wx/__init__.py&quot;,
line 45, in&lt;module&gt;
       from wx._core import *
     File

&quot;//usr/local/lib/wxPython-unicode-2.8.12.0/lib/python2.6/site-packages/wx-2.8-mac-unicode/wx/_core.py&quot;,
line 4, in&lt;module&gt;
       import _core_
ImportError:

/usr/local/lib/wxPython-unicode-2.8.12.0/lib/python2.6/site-packages/wx-2.8-mac-unicode/wx/_core_.so:
no appropriate 64-bit architecture (see &quot;man python&quot; for running in
32-bit mode)
====

On the wx python website, it is said that &quot;These binaries should work on
all versions of OSX from 10.3.9 onwards on either PPC or i386
architectures. Since they use the Carbon API they are limited to running
in 32-bit mode.&quot;

However, my machine, a Macbook pro, is 64 bit and python runs in 64 bits
by default. I found that python can be set to use 32 or 64 bits.
However, I am afraid that these settings are system-wide. Would there be
a way that relax tells the system to run python in 32 bit mode, maybe
only when the gui is invoked ?

Maybe this is too much asked... However, if it is simple, I guess it
would simplify the life of many users with recent Mac computers...

Thanks a lot !


Séb  :)

</pre></blockquote></blockquote><pre style="margin: 0em;">
--
Sébastien Morin, Ph.D.
Postdoctoral fellow
S. Grzesiek NMR Laboratory
Biozentrum, Universität Basel
Basel, Switzerland


_______________________________________________
relax (<a  rel="nofollow" href="http://nmr-relax.com">http://nmr-relax.com</a>)

This is the relax-devel mailing list
relax-devel@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="/mail.gna.org/listinfo/relax-devel">https://mail.gna.org/listinfo/relax-devel</a>

</pre></blockquote></blockquote><pre style="margin: 0em;">

--
Sébastien Morin, Ph.D.
Postdoctoral Fellow, S. Grzesiek NMR Laboratory
Department of Structural Biology
Biozentrum, Universität Basel
Klingelbergstrasse 70
4056 Basel
Switzerland



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00019" href="msg00019.html">Re: gui vs wx python</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Wed Jun 08 13:20:13 2011</div>  
</body>
</html>
