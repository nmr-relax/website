<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [bug #22052] scons build error on mac -->
<!--X-From-R13: "Sqjneq q'Ohiretar" &#60;rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Mon, 19 May 2014 14:26:26 +0200 -->
<!--X-Message-Id: CAED9pY8pr1oZPGHNYj0kr5ndAKQP=8zADHEMRPr9ExQ+Tvt&#45;Sg@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 20140518&#45;192933.sv20529.78626@gna.org -->
<!--X-Reference: 20140518&#45;200511.sv20529.35615@gna.org -->
<!--X-Reference: CAED9pY_zyJeZLPPJ32RaG8+YMdktaOrZ1Ae0ENBHu4&#45;DULAuhQ@mail.gmail.com -->
<!--X-Reference: CA+CBx2OJh22Q629k+_uMoFYUmtrr1F2fu&#45;LS0VsRn1cEBXuhwg@mail.gmail.com -->
<!--X-Reference: CAED9pY9HhgVPE=vJZrXyum6UAHZOwNTg+bjf1Kq9q07E=BfcAQ@mail.gmail.com -->
<!--X-Reference: CA+CBx2Mz=KXr2A+HW8TX6hzxhbto8C+C&#45;zjw7S+kSmpFR9biqQ@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [bug #22052] scons build error on mac -- May 19, 2014 - 14:26</title>
<link rel="stylesheet" type="text/css" href="/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="https://gna.org/images/gna.theme/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: [bug #22052] scons build error on mac</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00373" class="tabs">Index by Date</a> | <a href="threads.html#00373" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00372.html">Date Prev</a>] [<a href="msg00374.html">Date Next</a>] [<a href="msg00364.html">Thread Prev</a>] [<a href="msg00346.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Mon, 19 May 2014 14:25:35 +0200</li>
<li class="menuitem">
<em>Cc</em>: &quot;Troels E. Linnet&quot; &lt;NO-REPLY.INVALID-ADDRESS@xxxxxxx&gt;, &quot;relax-devel@xxxxxxx&quot; &lt;relax-devel@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113; h=mime-version:sender:in-reply-to:references:date:message-id:subject :from:to:cc:content-type:content-transfer-encoding; bh=uo7kutMOQ+/+wSfSlKcgJHg45/JdEDafxDUuki/OktQ=; b=jatyvOjDn+3NSfzp/VG1hJrYtzU/zpLej9U09wMlG5EHBEw5Z7AnMUDL+8O74aKDmE a+fQkofZvcg3+kGk9gfyfm26XUViIPJ6/7CqIMpGIc3FxBKGy2BivsqrS2aA09UAOqQ8 QKkJ+0lCAnMWtCL8GKDicbN2n9eONn5G87i3Vtg+rbQiCJnk2fPpeed4qgfbDDl7A6p5 b5DJKYtup1dccz/RtGKeOjvF2b6EQRYOVqavEuYXyG8HUEua/vGNj6AojuTmjSTZ5JLw 4ZJr4rXgo1+QjCuFW3Cr8pi5TjCDu6QOiJzFd/vJ4wYcSsrmjOe/v0t30FfTp4527ihk HbSA==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;CAED9pY8pr1oZPGHNYj0kr5ndAKQP=8zADHEMRPr9ExQ+Tvt-Sg@mail.gmail.com&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;<a href="msg00338.html">20140518-192933.sv20529.78626@gna.org</a>&gt; &lt;<a href="msg00339.html">20140518-200511.sv20529.35615@gna.org</a>&gt; &lt;<a href="msg00344.html">CAED9pY_zyJeZLPPJ32RaG8+YMdktaOrZ1Ae0ENBHu4-DULAuhQ@mail.gmail.com</a>&gt; &lt;<a href="msg00355.html">CA+CBx2OJh22Q629k+_uMoFYUmtrr1F2fu-LS0VsRn1cEBXuhwg@mail.gmail.com</a>&gt; &lt;CAED9pY9HhgVPE=vJZrXyum6UAHZOwNTg+bjf1Kq9q07E=BfcAQ@mail.gmail.com&gt; &lt;CA+CBx2Mz=KXr2A+HW8TX6hzxhbto8C+C-zjw7S+kSmpFR9biqQ@mail.gmail.com&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on May 19, 2014 - 14:26:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">So, this is exactly the test we need to perform in the 'sconstruct'
script :)  Such a test is often performed by the 'configure' scripts
distributed with source code, and we need to do that same.  I'll look
into it later.

Regards,

Edward

On 19 May 2014 13:21, Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi Ed:

tlinnet@linmac:Downloads$ gcc -arch ppc hello.c -o hello &gt; log.txt
In file included from hello.c:1:
In file included from /usr/include/stdio.h:64:
/usr/include/sys/cdefs.h:658:2: error: Unsupported architecture
#error Unsupported architecture
 ^
In file included from hello.c:1:
In file included from /usr/include/stdio.h:67:
In file included from /usr/include/_types.h:27:
In file included from /usr/include/sys/_types.h:33:
/usr/include/machine/_types.h:34:2: error: architecture not supported
#error architecture not supported
 ^
In file included from hello.c:1:
In file included from /usr/include/stdio.h:67:
In file included from /usr/include/_types.h:27:
/usr/include/sys/_types.h:94:9: error: unknown type name '__int64_t'
typedef __int64_t       __darwin_blkcnt_t;      /* total blocks */
        ^
/usr/include/sys/_types.h:95:9: error: unknown type name '__int32_t'
typedef __int32_t       __darwin_blksize_t;     /* preferred block size */
        ^
/usr/include/sys/_types.h:96:9: error: unknown type name '__int32_t'
typedef __int32_t       __darwin_dev_t;         /* dev_t */
        ^
/usr/include/sys/_types.h:99:9: error: unknown type name '__uint32_t'
typedef __uint32_t      __darwin_gid_t;         /* [???] process and
group IDs */
        ^
/usr/include/sys/_types.h:100:9: error: unknown type name '__uint32_t'
typedef __uint32_t      __darwin_id_t;          /* [XSI] pid_t, uid_t,
or gid_t*/
        ^
/usr/include/sys/_types.h:101:9: error: unknown type name '__uint64_t'
typedef __uint64_t      __darwin_ino64_t;       /* [???] Used for 64
bit inodes */
        ^
/usr/include/sys/_types.h:107:9: error: unknown type name 
'__darwin_natural_t'
typedef __darwin_natural_t __darwin_mach_port_name_t; /* Used by mach */
        ^
/usr/include/sys/_types.h:109:9: error: unknown type name '__uint16_t'
typedef __uint16_t      __darwin_mode_t;        /* [???] Some file 
attributes */
        ^
/usr/include/sys/_types.h:110:9: error: unknown type name '__int64_t'
typedef __int64_t       __darwin_off_t;         /* [???] Used for file 
sizes */
        ^
/usr/include/sys/_types.h:111:9: error: unknown type name '__int32_t'
typedef __int32_t       __darwin_pid_t;         /* [???] process and
group IDs */
        ^
/usr/include/sys/_types.h:131:9: error: unknown type name '__uint32_t'
typedef __uint32_t      __darwin_sigset_t;      /* [???] signal set */
        ^
/usr/include/sys/_types.h:132:9: error: unknown type name '__int32_t'
typedef __int32_t       __darwin_suseconds_t;   /* [???] microseconds */
        ^
/usr/include/sys/_types.h:133:9: error: unknown type name '__uint32_t'
typedef __uint32_t      __darwin_uid_t;         /* [???] user IDs */
        ^
/usr/include/sys/_types.h:134:9: error: unknown type name '__uint32_t'
typedef __uint32_t      __darwin_useconds_t;    /* [???] microseconds */
        ^
In file included from hello.c:1:
In file included from /usr/include/stdio.h:71:
/usr/include/sys/_types/_va_list.h:31:9: error: unknown type name
'__darwin_va_list'; did you mean '__builtin_va_list'?
typedef __darwin_va_list va_list;
        ^
note: '__builtin_va_list' declared here
In file included from hello.c:1:
In file included from /usr/include/stdio.h:72:
/usr/include/sys/_types/_size_t.h:30:9: error: unknown type name
'__darwin_size_t'; did you mean '__darwin_ino_t'?
typedef __darwin_size_t        size_t;
        ^
/usr/include/sys/_types.h:103:26: note: '__darwin_ino_t' declared here
typedef __darwin_ino64_t __darwin_ino_t;        /* [???] Used for inodes */
                         ^
In file included from hello.c:1:
In file included from /usr/include/stdio.h:434:
/usr/include/sys/_types/_ssize_t.h:30:9: error: unknown type name
'__darwin_ssize_t'
typedef __darwin_ssize_t        ssize_t;
        ^
hello.c:3:1: warning: type specifier missing, defaults to 'int' 
[-Wimplicit-int]
main() {
^~~~
1 warning and 19 errors generated.


##########
tlinnet@linmac:Downloads$ gcc -arch x86_64 hello.c -o hello
hello.c:3:1: warning: type specifier missing, defaults to 'int' 
[-Wimplicit-int]
main() {
^~~~
1 warning generated.

2014-05-19 11:01 GMT+02:00 Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt;:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi,

Could you try creating the hello.c file with:

&quot;&quot;&quot;
#include&lt;stdio.h&gt;

main() {
    printf(&quot;Hello world\n&quot;);
}
&quot;&quot;&quot;

Then type:

$ gcc -arch ppc hello.c -o hello
$ ./hello

What does this show on your system?  Does the gcc command fail?  This
would be the exact extension of the det_arch() method.

Regards,

Edward




On 19 May 2014 10:51, Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi Ed.

I actually had to set: 'i386', 'x86_64'
Since my python is 32 bit from the EPD.

If I compiled only with 'x86_64', and did &quot;from target_functions
import relax_fit&quot;
I got at error relating to &quot;relax_fit.so&quot; being a wrong architecture.

I cannot do ppc.

Best
Trpeæs

2014-05-19 9:34 GMT+02:00 Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt;:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi Troels,

Maybe the proper way to solve this is for the det_arch() method to
create a simple 'hello world' C program, dump it in a temporary
directory, try to compile it with the different -arch flags, and then
see if a binary was created.  As the current test shows that all 3
architectures are supported
(<a  rel="nofollow" href="http://thread.gmane.org/gmane.science.nmr.relax.devel/4756/focus=4764">http://thread.gmane.org/gmane.science.nmr.relax.devel/4756/focus=4764</a>),
a proper compilation test might be required.  My build machine is Mac
OS 10.6, simply to allow support for all 3 architectures in a
'univeral binary', as XCode for Mac OS &gt;= 10.7 drops support 'ppc'.  I
also have a 10.8 test machine and compilation works fine there.

Regards,

Edward


On 18 May 2014 22:05, Troels E. Linnet 
&lt;NO-REPLY.INVALID-ADDRESS@xxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Update of bug #22052 (project relax):

                  Status:                    None =&gt; Wont Fix
             Assigned to:                    None =&gt; tlinnet
             Open/Closed:                    Open =&gt; Closed

    _______________________________________________________

Follow-up Comment #1:

Solution found here:
<a  rel="nofollow" href="http://permalink.gmane.org/gmane.science.nmr.relax.devel/4758">http://permalink.gmane.org/gmane.science.nmr.relax.devel/4758</a>

Change sconstruct

sed -i &quot;&quot; &quot;s/archs = \['i386', 'ppc', 'x86\_64']/archs = 
\['x86\_64'\]/g&quot;
sconstruct

    _______________________________________________________

Reply to this item at:

  &lt;<a  rel="nofollow" href="http://gna.org/bugs/?22052">http://gna.org/bugs/?22052</a>&gt;

_______________________________________________
  Message sent via/by Gna!
  <a  rel="nofollow" href="http://gna.org/">http://gna.org/</a>


_______________________________________________
relax (<a  rel="nofollow" href="http://www.nmr-relax.com">http://www.nmr-relax.com</a>)

This is the relax-devel mailing list
relax-devel@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="https://mail.gna.org/listinfo/relax-devel">https://mail.gna.org/listinfo/relax-devel</a>
</pre></blockquote></blockquote></blockquote></blockquote></blockquote><pre style="margin: 0em;">


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00338" href="msg00338.html">[bug #22052] scons build error on mac</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
<li><strong><a name="00339" href="msg00339.html">[bug #22052] scons build error on mac</a></strong>
<ul><li><em>From:</em> Troels E. Linnet</li></ul></li>
<li><strong><a name="00344" href="msg00344.html">Re: [bug #22052] scons build error on mac</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00355" href="msg00355.html">Re: [bug #22052] scons build error on mac</a></strong>
<ul><li><em>From:</em> Troels Emtekær Linnet</li></ul></li>
<li><strong><a name="00358" href="msg00358.html">Re: [bug #22052] scons build error on mac</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00364" href="msg00364.html">Re: [bug #22052] scons build error on mac</a></strong>
<ul><li><em>From:</em> Troels Emtekær Linnet</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer">You are on the <a href="http://gna.org">Gna!</a> mail server.</div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Mon May 19 15:20:14 2014</div>  
</body>
</html>
