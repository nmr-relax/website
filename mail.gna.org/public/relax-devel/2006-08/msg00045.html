<!-- MHonArc v2.6.10 -->
<!--X-Subject: [Fwd: Re: Proposed solution to bug #6503.] -->
<!--X-From-R13: "Unel E. Fubzcfba" <tnelgNozo.yrrqf.np.hx> -->
<!--X-Date: Wed, 09 Aug 2006 18:00:25 +0200 -->
<!--X-Message-Id: 44DA0670.2060602@bmb.leeds.ac.uk -->
<!--X-Content-Type: multipart/mixed -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>[Fwd: Re: Proposed solution to bug #6503.] -- August 09, 2006 - 18:00</title>
<link rel="stylesheet" type="text/css" href="/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="https://gna.org/images/gna.theme/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />[Fwd: Re: Proposed solution to bug #6503.]</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00045" class="tabs">Index by Date</a> | <a href="threads.html#00045" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00044.html">Date Prev</a>] [<a href="msg00046.html">Date Next</a>] [<a href="msg00038.html">Thread Prev</a>] [<a href="msg00052.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: relax-devel@xxxxxxx</li>
<li class="menuitem">
<em>Date</em>: Wed, 09 Aug 2006 16:59:44 +0100</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00045.html">44DA0670.2060602@bmb.leeds.ac.uk</a>&gt;</li>
<li class="menuitem">
<em>User-agent</em>: Mozilla Thunderbird 1.0 (X11/20041206)</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Gary S. Thompson</strong> on August 09, 2006 - 18:00:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;"><br>--
-------------------------------------------------------------------
Dr Gary Thompson
Astbury Centre for Structural Molecular Biology,
University of Leeds, Astbury Building,
Leeds, LS2 9JT, West-Yorkshire, UK             Tel. +44-113-3433024
email: garyt@xxxxxxxxxxxxxxx                   Fax  +44-113-2331407
-------------------------------------------------------------------</pre><br>
<br>
<blockquote><small>---&nbsp;<i>Begin&nbsp;Message</i>&nbsp;---</small>
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Chris MacRaild &lt;c.a.macraild@xxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Wed, 09 Aug 2006 12:42:43 +0100</li>
<li class="menuitem">
<em>Message-id</em>: &lt;44D9CA33.9090000@bmb.leeds.ac.uk&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;<a href="msg00029.html">7f080ed10608082240r114cf35an60af62836fcc81bf@mail.gmail.com</a>&gt;	&lt;<a href="msg00031.html">1155116086.28764.393.camel@fbsdpcu021</a>&gt;	&lt;<a href="msg00032.html">7f080ed10608090248i5c3a5832h166bc8c07f2cbc93@mail.gmail.com</a>&gt;	&lt;<a href="msg00034.html">1155120829.28764.436.camel@fbsdpcu021</a>&gt;</li>
<li class="menuitem">
<em>User-agent</em>: Mozilla Thunderbird 1.0 (X11/20041206)</li>
</ul>
<pre style="margin: 0em;">Chris MacRaild wrote:</pre><br>
<blockquote class="blockquote"><tt>On Wed, 2006-08-09 at 19:48 +1000, Edward d'Auvergne wrote:<br>
 </tt><br>
<br>
<blockquote class="blockquote"><blockquote class="blockquote"><blockquote class="blockquote"><tt>As the function 'self.grid_search()' executes 'self.minimise()' this<br>
single change will cover both the grid search and minimisation.  The<br>
function 'isnan()' currently non-existent but could be implemented as<br>
Gary previously mentioned by checking the hex bit pattern of NaN.<br>
       </tt><br>
<br>
</blockquote><tt>If isnan() is to be implimented in this way, then a similar isinf() is<br>
by far the best way to go. float('inf') is platform dependent, and<br>
certainly will not work under Windows (I think I'm right in saying<br>
windows has no valid string representation of inf or nan that would work<br>
in that context).<br>
     </tt><br>
<br>
</blockquote><tt>That one I didn't know about.  I thought Python handled inf correctly<br>
but checking the bit value should be easy.  What about checking that<br>
the value is less than 1e300 instead, as that is the arbitrary<br>
starting point for the grid search?<br>
   </tt><br>
<br>
</blockquote><tt><br>In practise I'm fairly sure that will work. The purist might say that<br>
the starting value should be INF, and the test should be for INF, but I<br>
can't imagine anyone wanting to accept a grid search with Chi2 &gt; 1e300<br>
 </tt><br>
<br>
</blockquote><pre style="margin: 0em;"><br>does comparison against inf work on all architectures/compilers....</pre><br>
<blockquote class="blockquote"><tt> </tt><br>
<br>
<blockquote class="blockquote"><blockquote class="blockquote"><blockquote class="blockquote"><tt>This avoids fpconst.py and the switch from Numeric to Numpy.  The<br>
question is whether to use the RelaxErrors or set some warning?  Would<br>
this be alleviated by Gary's proposal of saving the program state just<br>
prior to throwing the error?  For example using the function<br>
'self.save()' within 'generic_fns/state.py', printing the error<br>
message, then quitting.<br>
       </tt><br>
<br>
</blockquote><tt>Saving state as part of the exception handling is a nice idea, but has<br>
its limitations. Because the error could be thrown before, during or<br>
after some change to the program state, the state which is saved will be<br>
undefined and possibly inconsistent. As such a saved state may be of<br>
limited use to most users. It would be a very valuable tool for<br>
debugging, though.<br>
     </tt><br>
<br>
</blockquote><tt>I suppose it will probably leave too many temporary files lying<br>
around.  relax tends to throw errors if you do the slightest thing<br>
wrong.<br>
   </tt><br>
<br>
</blockquote><pre style="margin: 0em;"><br>True. One option would be to leave the current behaviour as default, and
have an optional debugging mode which would allow for saving of state on
exceptions. Another feature which might be modified in debugging mode is
the suppression of tracebacks on KeyboardInterupt - it is sometimes nice
to know exactly what you have interupted when you are forced to ctrl-c</pre><br>
<tt> </tt><br>
<br>
<blockquote class="blockquote"><blockquote class="blockquote"><blockquote class="blockquote"><tt>What do you think?  I think I covered most of the issues.  I've made a<br>
branch of the 1.2 line located at<br>
svn://svn.gna.org/svn/relax/branches/nan_catch_test which has all<br>
these changes.  Feel free to play around and modify this branch.<br>
       </tt><br>
<br>
</blockquote><tt>I'll have a bit more of a look, but it seems like a good fix.<br>
     </tt><br>
<br>
</blockquote><pre style="margin: 0em;">But does it resolve the issue of whether the program should throw an
error and terminate or throw a warning and continue?</pre><br>
<tt>   </tt><br>
<br>
</blockquote><pre style="margin: 0em;"><br>See my response on the previous thread. I'll post a small proposed
modification later.</pre><br>
<pre style="margin: 0em;">Chris</pre><br>
<tt> </tt><br>
<br>
<blockquote class="blockquote"><pre style="margin: 0em;">Edward</pre><br>
<tt>   </tt><br>
<br>
</blockquote><pre style="margin: 0em;"><br></pre><br>
<pre style="margin: 0em;">_______________________________________________
relax (<a  href="http://nmr-relax.com">http://nmr-relax.com</a>)</pre><br>
<pre style="margin: 0em;">This is the relax-devel mailing list
relax-devel@xxxxxxx</pre><br>
<pre style="margin: 0em;">To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  href="https://mail.gna.org/listinfo/relax-devel">https://mail.gna.org/listinfo/relax-devel</a></pre><br>
<pre style="margin: 0em;">.</pre><br>
<tt> </tt><br>
<br>
</blockquote><pre style="margin: 0em;"><br></pre><br>
<pre style="margin: 0em;">--
-------------------------------------------------------------------
Dr Gary Thompson
Astbury Centre for Structural Molecular Biology,
University of Leeds, Astbury Building,
Leeds, LS2 9JT, West-Yorkshire, UK             Tel. +44-113-3433024
email: garyt@xxxxxxxxxxxxxxx                   Fax  +44-113-2331407
-------------------------------------------------------------------</pre><br>
<pre style="margin: 0em;"><br></pre><br>
<br><small>---&nbsp;<i>End Message</i>&nbsp;---</small></blockquote>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer">You are on the <a href="http://gna.org">Gna!</a> mail server.</div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Thu Aug 17 14:20:57 2006</div>  
</body>
</html>
