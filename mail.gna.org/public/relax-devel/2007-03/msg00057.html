<!-- MHonArc v2.6.10 -->
<!--X-Subject: Re: Vote for the design of the relax data storage object singleton. -->
<!--X-From-R13: Quevf [npDnvyq <p.n.znpenvyqNyrrqf.np.hx> -->
<!--X-Date: Thu, 15 Mar 2007 13:10:45 +0100 -->
<!--X-Message-Id: 1173960604.8066.341.camel@mrspell -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 7f080ed10703140609p70d35295ye10ee5939da494a2@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: Vote for the design of the relax data storage object singleton. -- March 15, 2007 - 13:10</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: Vote for the design of the relax data storage object singleton.</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00057" class="tabs">Index by Date</a> | <a href="threads.html#00057" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00056.html">Date Prev</a>] [<a href="msg00058.html">Date Next</a>] [<a href="msg00062.html">Thread Prev</a>] [<a href="msg00058.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Thu, 15 Mar 2007 12:10:03 +0000</li>
<li class="menuitem">
<em>Cc</em>: relax-devel@xxxxxxx</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00057.html">1173960604.8066.341.camel@mrspell</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;<a href="msg00046.html">7f080ed10703140609p70d35295ye10ee5939da494a2@mail.gmail.com</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Chris MacRaild</strong> on March 15, 2007 - 13:10:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">On Thu, 2007-03-15 at 00:09 +1100, Edward d'Auvergne wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">On 3/14/07, Chris MacRaild &lt;c.a.macraild@xxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">On Tue, 2007-03-13 at 19:51 +1100, Edward d'Auvergne wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Gary,

I've written some unit tests which are located in the file
'test_suite/unit_tests/data/__init__.py'.  Would you know what
modifications I need to apply to make these tests run?  These tests
are for the methods of the Data singleton class (the relax data
storage object) which is located in 'data/__init__.py'.  I haven't
used the statement 'from x import Data' for this class so it is the
legal and ubiquitous usage of an __init__.py file.  Would
'unit_test_runner.py' handle this code?

Thanks,

Edward


P.S.  These tests demonstrate the utility of subclassing the singleton
and is one reason I was arguing for the use of the class import rather
than reference import.

</pre></blockquote><pre style="margin: 0em;">

It is of course correct that the Singleton implimentation I proposed
does not allow for subclassing. This however might well be seen as a
design feature, given the well known conceptual problems with
subclassing Singleton. Essentially, subclassing violates the Singleton
Design Pattern:

class Singleton:
    def __new__(self):
        ...

class Sub(Singleton): pass

</pre><blockquote class="blockquote"><blockquote class="blockquote"><blockquote class="blockquote"><pre style="margin: 0em;">a = Singleton()
b = Sub()
isinstance(a,Singleton)
</pre></blockquote></blockquote></blockquote><pre style="margin: 0em;">True
</pre><blockquote class="blockquote"><blockquote class="blockquote"><blockquote class="blockquote"><pre style="margin: 0em;">isinstance(b,Singleton)
</pre></blockquote></blockquote></blockquote><pre style="margin: 0em;">True
</pre><blockquote class="blockquote"><blockquote class="blockquote"><blockquote class="blockquote"><pre style="margin: 0em;">a is b
</pre></blockquote></blockquote></blockquote><pre style="margin: 0em;">False
</pre><blockquote class="blockquote"><blockquote class="blockquote"><blockquote class="blockquote"><pre style="margin: 0em;">a == b
</pre></blockquote></blockquote></blockquote><pre style="margin: 0em;">False

ie. we have 2 instances of Singleton that are not the same thing, and
not even equal! If this is the behaviour you want, then you need
something other than Singleton. On the other hand, if you really want
Singleton, then you can't also hope for subclassability.
</pre></blockquote><pre style="margin: 0em;">

Actually one is an instance of Singleton and the other is an instance
of Sub.  
</pre></blockquote><pre style="margin: 0em;">

The definition of inheritance is that an instance of the subclass is
also an instance of the parent class. ie. b is an instance of both Sub
and Singleton. Inheritance from a Singleton class is therefore a logical
contradiction.

My vote is for B


Chris



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00058" href="msg00058.html">Re: Vote for the design of the relax data storage object singleton.</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00046" href="msg00046.html">Vote for the design of the relax data storage object singleton.</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Thu Mar 15 15:40:31 2007</div>  
</body>
</html>
