<!-- MHonArc v2.6.10 -->
<!--X-Subject: Re: Accounting for N1 and N3 CSA differences in RNA -->
<!--X-From-R13: "Sqjneq q'Ohiretar" <rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Wed, 04 Oct 2006 17:23:38 +0200 -->
<!--X-Message-Id: 7f080ed10610040823u7c39550em97578b716236355b@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 481156b20609280917q6bc4edbapa4ca0cc3fc9636e5@mail.gmail.com -->
<!--X-Reference: 7f080ed10609280947v963a98dy126f47813a29b292@mail.gmail.com -->
<!--X-Reference: 481156b20610031057k263a23act6aa2bb6729edf9a1@mail.gmail.com -->
<!--X-Reference: 7f080ed10610032153o4571935bq138d2739f55ca3bd@mail.gmail.com -->
<!--X-Reference: 481156b20610040717u35e6ab20v16d8083f24338d76@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: Accounting for N1 and N3 CSA differences in RNA -- October 04, 2006 - 17:23</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: Accounting for N1 and N3 CSA differences in RNA</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00006" class="tabs">Index by Date</a> | <a href="threads.html#00006" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00005.html">Date Prev</a>] [<a href="msg00007.html">Date Next</a>] [<a href="msg00004.html">Thread Prev</a>] [<a href="msg00003.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: &quot;Alexandar Hansen&quot; &lt;viochemist@xxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Thu, 5 Oct 2006 01:23:00 +1000</li>
<li class="menuitem">
<em>Cc</em>: relax-users@xxxxxxx</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00006.html">7f080ed10610040823u7c39550em97578b716236355b@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;481156b20609280917q6bc4edbapa4ca0cc3fc9636e5@mail.gmail.com&gt;	&lt;7f080ed10609280947v963a98dy126f47813a29b292@mail.gmail.com&gt;	&lt;<a href="msg00001.html">481156b20610031057k263a23act6aa2bb6729edf9a1@mail.gmail.com</a>&gt;	&lt;<a href="msg00002.html">7f080ed10610032153o4571935bq138d2739f55ca3bd@mail.gmail.com</a>&gt;	&lt;<a href="msg00004.html">481156b20610040717u35e6ab20v16d8083f24338d76@mail.gmail.com</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on October 04, 2006 - 17:23:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">There's no need to worry about breakages.  As these proposed changes
will occur in the 1.3 repository line, breaking scripts from the
previous minor version (1.2) is acceptable.  It will be safe to
continue using the 1.2 versions which will not break the scripts.  The
possibility of script incompatibility between minor version numbers is
necessary to allow the program to expand, evolve, and become more
useful and flexible.  In the next few days I will post a message to
the relax-devel mailing list
(<a  href="/mail.gna.org/listinfo/relax-devel/">https://mail.gna.org/listinfo/relax-devel/</a>) with a proposal for
future versions of relax which will affect every aspect of the program
(this does not include the 1.2 line which will remain supported).
Everything in the 1.3 line will break and retaining script
compatibility will be impossible.</pre><br>
<pre style="margin: 0em;">If someone would like to add a utility to relax which will translate
1.2 version scripts to 1.3 scripts, this would be most welcome.  It
could even be implemented as part of relax so that you could type
something along the lines of:</pre><br>
<pre style="margin: 0em;">$ relax --translate 1.2 1.3 my_script.py new_script.py</pre><br>
<pre style="margin: 0em;">Until the soon-to-be proposed changes occur within the 1.3 line and
stable versions are possible, this utility is not needed.  Anyway,
depending upon the changes it may never be possible to write a
converter as new essential user functions may be added which have no
equivalent in previous minor versions.</pre><br>
<pre style="margin: 0em;">Edward</pre><br>
<pre style="margin: 0em;"><br></pre><br>
<tt>On 10/5/06, Alexandar Hansen &lt;viochemist@xxxxxxxxx&gt; wrote:
</tt><blockquote class="blockquote"><pre style="margin: 0em;">I think that's pretty much perfect.  Is there any reason why you can't leave
pdb.read flexible for those who would only use 1 nucleus type.  That way,
scripts wouldn't need to be broken.</pre><br>
<pre style="margin: 0em;">Alex</pre><br>
<pre style="margin: 0em;"><br>On 10/4/06, Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx &gt; wrote:
&gt; Unfortunately this approach for setting the heteronucleus name won't
&gt; work.  It is assumed in relax that the heteronucleus name will be the
&gt; same for each residue.  That's a big mistake on my part!  Back in
&gt; August 2004 I merged the user functions 'pdb()' and 'vectors()' into
&gt; the single user function 'pdb()'.  This occurred at r1312 of the 0.3
&gt; versions of relax
(<a  href="http://svn.gna.org/viewcvs/relax/0.3/?rev=1387">http://svn.gna.org/viewcvs/relax/0.3/?rev=1387</a> vs
&gt; <a  href="http://svn.gna.org/viewcvs/relax/0.3/?rev=1388">http://svn.gna.org/viewcvs/relax/0.3/?rev=1388</a> ).  For
proteins when
&gt; either the backbone NH or backbone CH relaxation data is being
&gt; studied, there was no need for the two user functions.  This obviously
&gt; isn't the case when studying RNA.
&gt;
&gt; I have an elegant solution which should fix this issue.  I first
&gt; propose to split the 'pdb()' user function back into the original two
&gt; user functions.  However as they are related my idea is to create a
&gt; function class which contains both user functions.  These two
&gt; functions could be called ' pdb.read()' and 'pdb.set_vectors()'.
&gt;
&gt; The second change would be to add the two function arguments 'res_num'
&gt; and 'res_name' to the 'pdb.set_vectors()' user function.  Then for
&gt; Alex's example you could use following lines in the script:
&gt;
&gt; pdb.read(name, self.alex_pdb)
&gt; pdb.set_vectors(name, heteronuc='N1', proton='H1', res_name='G')
&gt; pdb.set_vectors(name, heteronuc='N3', proton='H3', res_name='U')
&gt;
&gt; These changes break script compatibility, i.e. a script written for
&gt; relax version 1.2.7 which uses the 'pdb()' user function will no
&gt; longer work with these changes.  Therefore the changes must occur in
&gt; the next relax minor number - the 1.3 versions.
&gt;
&gt; What do you think?
&gt;
&gt; Edward
&gt;
&gt;
&gt; On 10/4/06, Alexandar Hansen &lt;viochemist@xxxxxxxxx&gt; wrote:
&gt; &gt; Great!  I'm glad the CSA should be easy.  However, I realized another
&gt; &gt; problem with multiple nuclei.  How do we choose different PDB nuclei to
form
&gt; &gt; the bond?  Again, i was thinking something along the lines of:
&gt; &gt;
&gt; &gt; Also, will this work in full analysis?
&gt; &gt;
&gt; &gt;             # Load the PDB file.
&gt; &gt;             if not local_tm:
&gt; &gt;                 if residue.name == 'G'
&gt; &gt;                     pdb(name, self.alex_pdb, heteronuc='N1',
proton='H1')
&gt; &gt;                 if residue.name == 'U'
&gt; &gt;                     pdb(name, self.alex_pdb, heteronuc='N3',
proton='H3')
&gt; &gt;
&gt; &gt;
&gt; &gt; self.alex_pdb is my pdb which I decided to define where I define
&gt; &gt; local_tm/sphere/etc.
&gt; &gt;
&gt; &gt; Is this anywhere close to something that would work?
&gt; &gt;
&gt; &gt; Alex H.
&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt; On 9/28/06, Edward d'Auvergne &lt; edward.dauvergne@xxxxxxxxx&gt; wrote:
&gt; &gt; &gt; Unfortunately this approach won't work.  You would need to create an
&gt; &gt; &gt; additional loop where you loop through the residues (in the future
&gt; &gt; &gt; maybe data sets) and set the value on a per residue basis.  You would
&gt; &gt; &gt; need something like:
&gt; &gt; &gt;
&gt; &gt; &gt;              value.set(name, 1.01 * 1e-10, 'bond_length')
&gt; &gt; &gt;
&gt; &gt; &gt;              # Loop over the sequence.
&gt; &gt; &gt;              for residue in self.relax.data.res:
&gt; &gt; &gt;                  # Guanium.
&gt; &gt; &gt;                  if residue.name == 'G':
&gt; &gt; &gt;                      value.set(name,- 130 * 1e-6, 'csa',
&gt; &gt; &gt; res_num=residue.num, res_name=residue.name )
&gt; &gt; &gt;
&gt; &gt; &gt;                  # Uracil.
&gt; &gt; &gt;                  if residue.name == 'U':
&gt; &gt; &gt;                      value.set(name, -100 * 1e-6, 'csa',
&gt; &gt; &gt; res_num=residue.num, res_name= residue.name)
&gt; &gt; &gt;
&gt; &gt; &gt;
&gt; &gt; &gt; That should do the job.  However a much more powerful approach would
&gt; &gt; &gt; be to take this out of the hands of the user.  This could be done by
&gt; &gt; &gt; modifying the 'value.set()' user function to set values based on the
&gt; &gt; &gt; residue name.  Actually, I just checked the code - I implemented this
&gt; &gt; &gt; feature years ago!!!  That simplifies things, all you need to do is
&gt; &gt; &gt; supply the residue name to the 'value.set()' function and it will set
&gt; &gt; &gt; the values based on the name.  The solution is therefore extremely
&gt; &gt; &gt; basic:
&gt; &gt; &gt;
&gt; &gt; &gt;              # Set the bond length.
&gt; &gt; &gt;              value.set(name, 1.01 * 1e-10, 'bond_length')
&gt; &gt; &gt;
&gt; &gt; &gt;              # Set the NH CSA values of the four bases.
&gt; &gt; &gt;              value.set(name, - 130 * 1e-6, 'csa', res_name='G')
&gt; &gt; &gt;              value.set(name, - 100 * 1e-6, 'csa', res_name='U')
&gt; &gt; &gt;
&gt; &gt; &gt; That's it!
&gt; &gt; &gt;
&gt; &gt; &gt; Edward
&gt; &gt; &gt;
&gt; &gt; &gt;
&gt; &gt; &gt;
&gt; &gt; &gt; On 9/29/06, Alexandar Hansen &lt; viochemist@xxxxxxxxx&gt; wrote:
&gt; &gt; &gt; &gt; As I was running the full_analysis.py for an RNA data set of U and G
&gt; &gt; data, I
&gt; &gt; &gt; &gt; realized that it's trying to use the same CSA for each residue.
Looking
&gt; &gt; &gt; &gt; into the script, it would seem to be relatively easy to code the
&quot;set
&gt; &gt; the
&gt; &gt; &gt; &gt; bond length and CSA values&quot; section in such a way that it chooses a
&gt; &gt; &gt; &gt; different CSA value for the given residue types. Currently it's
simply:
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;             value.set(name, 1.02 * 1e-10, 'bond_length')
&gt; &gt; &gt; &gt;             value.set (name, -170 * 1e-6, 'csa')
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; to modify this for RNA, could one edit it to say:
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;             value.set(name, 1.01 * 1e-10, 'bond_length')
&gt; &gt; &gt; &gt;             if residuename = G
&gt; &gt; &gt; &gt;                 value.set(name, -130 * 1e-6, 'csa')
&gt; &gt; &gt; &gt;             else if residuename = U
&gt; &gt; &gt; &gt;                 value.set(name, -100 * 1e-6, 'csa')
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; Am I overtrivializing this, or should it be pretty straight forward?
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; Alex Hansen
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; _______________________________________________
&gt; &gt; &gt; &gt; relax ( <a  href="http://nmr-relax.com">http://nmr-relax.com</a>)
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; This is the relax-users mailing list
&gt; &gt; &gt; &gt; relax-users@xxxxxxx
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; To unsubscribe from this list, get a password
&gt; &gt; &gt; &gt; reminder, or change your subscription options,
&gt; &gt; &gt; &gt; visit the list information page at
&gt; &gt; &gt; &gt; <a  href="/mail.gna.org/listinfo/relax-users">https://mail.gna.org/listinfo/relax-users</a>
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt;</pre><br>
<pre style="margin: 0em;"><br></pre><br>
</blockquote><pre style="margin: 0em;"><br></pre><br>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00001" href="msg00001.html">Re: Accounting for N1 and N3 CSA differences in RNA</a></strong>
<ul><li><em>From:</em> Alexandar Hansen</li></ul></li>
<li><strong><a name="00002" href="msg00002.html">Re: Accounting for N1 and N3 CSA differences in RNA</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00004" href="msg00004.html">Re: Accounting for N1 and N3 CSA differences in RNA</a></strong>
<ul><li><em>From:</em> Alexandar Hansen</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Wed Oct 04 18:00:15 2006</div>  
</body>
</html>
