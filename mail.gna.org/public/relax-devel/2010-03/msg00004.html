<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: [task #6847] The Bieri graphical user interface. -->
<!--X-From-R13: "Sqjneq q'Ohiretar" <rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Fri, 05 Mar 2010 10:58:17 +0100 -->
<!--X-Message-Id: 7f080ed11003050157m71c87e07w519c40dc277a0a3c@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 20091111&#45;140551.sv2782.60504@gna.org -->
<!--X-Reference: 20100205&#45;010032.sv15425.30320@gna.org -->
<!--X-Reference: 20100216&#45;024934.sv15425.2345@gna.org -->
<!--X-Reference: 20100217&#45;041050.sv15425.24865@gna.org -->
<!--X-Reference: 20100218&#45;044933.sv15425.74889@gna.org -->
<!--X-Reference: 20100219&#45;005434.sv15425.85985@gna.org -->
<!--X-Reference: 20100225&#45;102647.sv15425.4228@gna.org -->
<!--X-Reference: 20100304&#45;103031.sv15425.56700@gna.org -->
<!--X-Reference: 7f080ed11003040556w757ae827ia7546d265f948058@mail.gmail.com -->
<!--X-Reference: 4B903062.1040900@gmx.ch -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [task #6847] The Bieri graphical user interface. -- March 05, 2010 - 10:58</title>
<link rel="stylesheet" type="text/css" href="/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="https://gna.org/images/gna.theme/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: [task #6847] The Bieri graphical user interface.</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00004" class="tabs">Index by Date</a> | <a href="threads.html#00004" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00003.html">Date Prev</a>] [<a href="msg00005.html">Date Next</a>] [<a href="msg00003.html">Thread Prev</a>] [<a href="msg00009.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Michael Bieri &lt;michael.bieri@xxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Fri, 5 Mar 2010 10:57:33 +0100</li>
<li class="menuitem">
<em>Cc</em>: relax-devel@xxxxxxx</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00004.html">7f080ed11003050157m71c87e07w519c40dc277a0a3c@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;20091111-140551.sv2782.60504@xxxxxxx&gt;	&lt;20100205-010032.sv15425.30320@xxxxxxx&gt;	&lt;20100216-024934.sv15425.2345@xxxxxxx&gt;	&lt;20100217-041050.sv15425.24865@xxxxxxx&gt;	&lt;20100218-044933.sv15425.74889@xxxxxxx&gt;	&lt;20100219-005434.sv15425.85985@xxxxxxx&gt;	&lt;20100225-102647.sv15425.4228@xxxxxxx&gt;	&lt;20100304-103031.sv15425.56700@xxxxxxx&gt;	&lt;7f080ed11003040556w757ae827ia7546d265f948058@xxxxxxxxxxxxxx&gt;	&lt;4B903062.1040900@xxxxxx&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on March 05, 2010 - 10:58:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Hi,

This is a very strange problem.  Can you try it again with a
completely unmodified version of the bieri_gui branch?  Running the
test suite with 'relax -x' passes perfectly.  But when I change line
157 from:

                print((&quot;Simulation &quot; + repr(i+1)))

to:

                rint((&quot;Simulation &quot; + repr(i+1)))

Then the test suite fails with 5 system test errors &quot;NameError: global
name 'rint' is not defined&quot;.  This is a clear indication that
threading is causing the problem, and that the problem lies elsewhere.
 The &quot;print 'Test'&quot; replacement might just have been lucky and the
thread failure was avoided.  Have you made any changes to your local
copy of the branch?  Note that the test suite does not run any of the
tests in a thread.  I don't know if that is even possible.

Regards,

Edward



On 4 March 2010 23:12, Michael Bieri &lt;michael.bieri@xxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi Edward

It was the problem in line 157 in minimise.py. I just replaced it with
'print 'Test' (I know it is silly) and it works fine!

i was also thinking to replace the threading, as with the other modules,
we will be able to kill processes much easier (cancel button in controller).

Cheers
Michael


Edward d'Auvergne schrieb:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi,

For this problem, I think we need to first implement proper exception
handling in threads.  This will allow the errors to be properly
reported.  And this is up to the GUI as this runs the auto-analyses in
threaded mode.  According to the 'thread' module documentation
(<a  rel="nofollow" href="http://docs.python.org/library/thread.html">http://docs.python.org/library/thread.html</a>), &quot;The threading module
provides an easier to use and higher-level threading API built on top
of this module&quot;.  I really think we should be using this instead, and
the thread handling should be more advanced (and exceptions should be
better handled).  Low level modules should only be touched by
hard-core coders who like pain - and 'thread' is one of those modules.
 I used it back before Gary wrote the multi-processor code, so I know
the pain.  I switched to the 'threading' module and, although this is
much easier, it can still be quite painful to run correctly.

The threading module will require study
(<a  rel="nofollow" href="http://docs.python.org/library/threading.html">http://docs.python.org/library/threading.html</a>).  Threads are complex
beasts and need to be handled very carefully.  To help, there are many
tutorials on the Internet that can be found through Google
(<a  rel="nofollow" href="http://www.google.com/search?hl=en&amp;safe=off&amp;q=python+threading+tutorial&amp;aq=1&amp;aqi=g10&amp;aql=&amp;oq=python+threading">http://www.google.com/search?hl=en&amp;safe=off&amp;q=python+threading+tutorial&amp;aq=1&amp;aqi=g10&amp;aql=&amp;oq=python+threading</a>).
 Once threads are correctly handled, then these error messages will
make more sense.  Note that this traceback is not actually where the
problem occurred!  That line 157 of generic_fns/minimise.py is
perfectly fine.  Therefore until we switch to the 'threading' module
and have exceptions properly handled, we will never know what went
wrong.

Regards,

Edward



On 4 March 2010 00:30, Michael Bieri &lt;NO-REPLY.INVALID-ADDRESS@xxxxxxx&gt; 
wrote:

</pre><blockquote class="blockquote"><pre style="margin: 0em;">Follow-up Comment #40, task #6847 (project relax):

Hi Edward

There seems to be a problem during dauvergne.py automatic model-free
analysis; i.e. during the final calculation.

I get the error message:

relax&gt; minimise(*args=('newton',), func_tol=1e-25, 
max_iterations=10000000,
constraints=True, scaling=True, verbosity=1)


Over-fit spin deselection.


Simulation 1Unhandled exception in thread started by
Traceback (most recent call last):
 File
&quot;/home/mbieri/LinuxBox/bieri_gui/gui_bieri/analyses/auto_model_free.py&quot;, 
line
835, in execute_thread
   dAuvergne_protocol(diff_model=global_model, mf_models=data.mf_models,
local_tm_models=data.local_tm_models, pdb_file=data.structure_file,
seq_args=data.seq_args, het_name=data.het_name, 
relax_data=data.relax_data,
unres=data.unres, exclude=data.exclude, bond_length=data.bond_length,
csa=data.csa, hetnuc=data.hetnuc, proton=data.proton, 
grid_inc=data.grid_inc,
min_algor=data.min_algor, mc_num=data.mc_num, conv_loop=data.conv_loop)
 File 
&quot;/home/mbieri/LinuxBox/bieri_gui/auto_analyses/dauvergne_protocol.py&quot;,
line 395, in __init__
   self.interpreter.minimise(self.min_algor)
 File &quot;/home/mbieri/LinuxBox/bieri_gui/prompt/minimisation.py&quot;, line 294, 
in
minimise
   minimise.minimise(min_algor=min_algor, min_options=min_options,
func_tol=func_tol, grad_tol=grad_tol, max_iterations=max_iterations,
constraints=constraints, scaling=scaling, verbosity=verbosity)
 File &quot;/home/mbieri/LinuxBox/bieri_gui/generic_fns/minimise.py&quot;, line 157,
in minimise
   print((&quot;Simulation &quot; + repr(i+1)))


Cheers
Michael


p.s.: I will work on the code next week, so reverting the auto_analysis
changes.

   _______________________________________________________

Reply to this item at:

 &lt;<a  rel="nofollow" href="http://gna.org/task/?6847">http://gna.org/task/?6847</a>&gt;

_______________________________________________
 Nachricht geschickt von/durch Gna!
 <a  rel="nofollow" href="http://gna.org/">http://gna.org/</a>


_______________________________________________
relax (<a  rel="nofollow" href="http://nmr-relax.com">http://nmr-relax.com</a>)

This is the relax-devel mailing list
relax-devel@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="https://mail.gna.org/listinfo/relax-devel">https://mail.gna.org/listinfo/relax-devel</a>


</pre></blockquote><pre style="margin: 0em;">


</pre></blockquote><pre style="margin: 0em;">

_______________________________________________
relax (<a  rel="nofollow" href="http://nmr-relax.com">http://nmr-relax.com</a>)

This is the relax-devel mailing list
relax-devel@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="https://mail.gna.org/listinfo/relax-devel">https://mail.gna.org/listinfo/relax-devel</a>

</pre></blockquote><pre style="margin: 0em;">


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00001" href="msg00001.html">[task #6847] The Bieri graphical user interface.</a></strong>
<ul><li><em>From:</em> Michael Bieri</li></ul></li>
<li><strong><a name="00002" href="msg00002.html">Re: [task #6847] The Bieri graphical user interface.</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00003" href="msg00003.html">Re: [task #6847] The Bieri graphical user interface.</a></strong>
<ul><li><em>From:</em> Michael Bieri</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer">You are on the <a href="http://gna.org">Gna!</a> mail server.</div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Mon Mar 15 00:00:38 2010</div>  
</body>
</html>
