<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: error while running relax&#45;GUI tutorial -->
<!--X-From-R13: "Sqjneq q'Ohiretar" &#60;rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Mon, 24 Nov 2014 10:18:41 +0100 -->
<!--X-Message-Id: CAED9pY_sKqZ59mRL93mvMXTHr6QCTkHMGVdVB1BrxGs2k5+i0w@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: CACVefHJOvsTEt1ZxYm20hLGcuoqTSbwtNUf2w_f4EjjuknXVHg@mail.gmail.com -->
<!--X-Reference: CA+CBx2OOh+XZ8xCcxZEQ4_MPTgag4pnZjEK1nb0ByYHdOYdwsw@mail.gmail.com -->
<!--X-Reference: CA+CBx2P1qYnNOFPD1CgdrjHsq_an8d&#45;L4Gzs9b73935Z9BhAZQ@mail.gmail.com -->
<!--X-Reference: CAED9pY8X6c1quuq5H4ezchVWztYPBztf6Y_5zySao&#45;ZuOv6AJw@mail.gmail.com -->
<!--X-Reference: CACVefHJ8mPYvqniFoFQa1q=Fd&#45;Dx185qxJutXQ3GGq6jAMT6RQ@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: error while running relax-GUI tutorial -- November 24, 2014 - 10:18</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: error while running relax-GUI tutorial</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00014" class="tabs">Index by Date</a> | <a href="threads.html#00014" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00013.html">Date Prev</a>] [Date Next] [<a href="msg00013.html">Thread Prev</a>] [<a href="msg00012.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Prem Raj Joseph &lt;prbj123relax@xxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Mon, 24 Nov 2014 10:18:10 +0100</li>
<li class="menuitem">
<em>Cc</em>: &quot;relax-users@xxxxxxx&quot; &lt;relax-users@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113; h=mime-version:sender:in-reply-to:references:date:message-id:subject :from:to:cc:content-type:content-transfer-encoding; bh=2iFJyvfsbRoyPXVmslFed8hyp1NMJMx3iez0J0no9vA=; b=Rs/mc7rEu8X+3p5e0d8OFUV6gARtAJN0SSzodBoWS85lhlFKjJdJ1QLijGw1FiyHD/ 3pTnIsoLj6vc+8tqZg+pAnj50FvRKrWQQfi3bC7lCNY0gLfV5zzCrcxJ/95pcuvgtRgO HRr3A27cN99S+mUEiWrHZ1HZ6pPh0H0lgU/6aBUr+wp87tjIWiUxnq/TJQmpkKUVVaN7 NGRG9+b+ekIn7uVQStdxwOLiF6jhP+SYE5J/YCqK34h+XLgwo8fA74MIdwHKaAVabmbj 5HNXhxOfYGOU1P17y1kOHpZAmGoShF2r1Vtn+UJHMfJsYfs6qTcKvsjmV7jei8BdTkIR ytqw==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00014.html">CAED9pY_sKqZ59mRL93mvMXTHr6QCTkHMGVdVB1BrxGs2k5+i0w@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;<a href="msg00005.html">CACVefHJOvsTEt1ZxYm20hLGcuoqTSbwtNUf2w_f4EjjuknXVHg@mail.gmail.com</a>&gt; &lt;<a href="msg00007.html">CA+CBx2OOh+XZ8xCcxZEQ4_MPTgag4pnZjEK1nb0ByYHdOYdwsw@mail.gmail.com</a>&gt; &lt;<a href="msg00008.html">CA+CBx2P1qYnNOFPD1CgdrjHsq_an8d-L4Gzs9b73935Z9BhAZQ@mail.gmail.com</a>&gt; &lt;<a href="msg00009.html">CAED9pY8X6c1quuq5H4ezchVWztYPBztf6Y_5zySao-ZuOv6AJw@mail.gmail.com</a>&gt; &lt;CACVefHJ8mPYvqniFoFQa1q=Fd-Dx185qxJutXQ3GGq6jAMT6RQ@mail.gmail.com&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on November 24, 2014 - 10:18:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Hi Prem,

</pre><blockquote class="blockquote"><pre style="margin: 0em;">From the error message, this is within the automated analysis for
</pre></blockquote><pre style="margin: 0em;">relaxation dispersion.  Creating the data pipe 'R2eff - relax_disp
(Mon Nov 17 10:50:08 2014)' can only happen once, as the 'R2eff' model
is only optimised once (there is a loop over all models).  There is
only one thing I can think of, and that is that the analysis was run
with OpenMPI.  However if the &quot;--multi='mpi4py'&quot; part of the full
command:

$ mpirun -np 8 relax --multi='mpi4py'

is missing, as:

$ mpirun -np 8 relax

Then this problem might be encountered.  Could that be what happened?
Another cause could be if the 'R2eff' model is passed into the
dispersion auto-analysis more than once in the model list though, as
you are using the GUI, this is not possible.

Cheers,

Edward




On 18 November 2014 at 22:58, Prem Raj Joseph &lt;prbj123relax@xxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hello Edward,

I tried the GUI version of the setup again for the relaxation dispersion
(on the test data) and it ran without any error this time. Its possible I
made some mistake during the setup thr last time.

Thank again for the help

Prem



On Tue, Nov 18, 2014 at 5:27 AM, Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt;
wrote:

</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi Troels and Prem,

Troels, for a suggestion for improving the script in your tutorial,
you could use:

&quot;&quot;&quot;
from time import asctime, localtime

pipe_bundle = &quot;relax_disp (%s)&quot; % asctime(localtime())
pipe_name = &quot;origin - %s&quot; % pipe_bundle
&quot;&quot;&quot;

This is how the new analysis wizard in relax creates these names
(
<a  rel="nofollow" href="http://www.nmr-relax.com/api/3.3/gui.analyses.wizard-pysrc.html#Data_pipe_page.on_display">http://www.nmr-relax.com/api/3.3/gui.analyses.wizard-pysrc.html#Data_pipe_page.on_display</a>
).
This script really saves a lot of time.  But, as it does not replicate
the bug, Prem, could you still create the bug report and include all
steps required to produce the error you observed?

Cheers,

Edward



On 18 November 2014 12:08, Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxxxxxx&gt;
wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi Prem.

I added the tutorial here:


</pre></blockquote><pre style="margin: 0em;"><a  rel="nofollow" href="http://wiki.nmr-relax.com/Tutorial_for_The_relaxation_dispersion_auto-analysis_in_the_GUI">http://wiki.nmr-relax.com/Tutorial_for_The_relaxation_dispersion_auto-analysis_in_the_GUI</a>
</pre><blockquote class="blockquote"><pre style="margin: 0em;">

I tried to take power of the scripting, to get around the tedious work on
defining the experiment settings for all spectra.

So this script should take you to the &quot;end point&quot; before staring the
analysis.

Best
Troels



2014-11-18 11:51 GMT+01:00 Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxxxxxx
:

</pre><blockquote class="blockquote"><pre style="margin: 0em;">Dear Prem.

Welcome to the mailing list!

I guess that you mean the manual at:
<a  rel="nofollow" href="http://www.nmr-relax.com/manual/Contents.html">http://www.nmr-relax.com/manual/Contents.html</a>

The relaxation dispersion auto-analysis in the GUI


</pre></blockquote></blockquote><pre style="margin: 0em;"><a  rel="nofollow" href="http://www.nmr-relax.com/manual/The_relaxation_dispersion_auto_analysis_in_the_GUI.html">http://www.nmr-relax.com/manual/The_relaxation_dispersion_auto_analysis_in_the_GUI.html</a>
</pre><blockquote class="blockquote"><blockquote class="blockquote"><pre style="margin: 0em;">

Where the test data is in:
test_suite/shared_data/dispersion/Hansen

I will write it up here as a script instead.
This goes a little faster testing.

You can also find more inspiration at the wiki:
<a  rel="nofollow" href="http://wiki.nmr-relax.com">http://wiki.nmr-relax.com</a>
<a  rel="nofollow" href="http://wiki.nmr-relax.com/Category:Tutorials">http://wiki.nmr-relax.com/Category:Tutorials</a>

In terminal
mkdir -p $HOME/test
cd $HOME/test
gedit test.py

Then I build the script onwards.
I run relax repeatedly, to execute code. Then I write new code in the
script, and run again.
relax test.py

When I am satisfied, you can then do like this.

relax -g -t log.txt
User functions -&gt; Script -&gt; test.py

THEN:
View -&gt; Data pipe editor -&gt; Right click on pipe -&gt; Associate with a new
Auto analysis

This should bring you to a window, where all settings have been set.

Relaxations dispersion models: ['R2eff', 'No Rex', 'CR72', 'NS CPMG
</pre></blockquote></blockquote><pre style="margin: 0em;">2-site
</pre><blockquote class="blockquote"><blockquote class="blockquote"><pre style="margin: 0em;">expanded']
Grid increements: 11 (For speed-up in test phase)
Monte-Carlo simulations number: 5 (For speed up in test phase)

Then a quick click on spin.isotope function, and GO.



test.py
----------------
#python modules
import os
import glob

# relax modules
from lib.io import sort_filenames

# Set path to data
data =

</pre></blockquote></blockquote><pre style="margin: 0em;">'/sbinlab2/tlinnet/software/NMR-relax/relax_trunk/test_suite/shared_data/dispersion/Hansen'
</pre><blockquote class="blockquote"><blockquote class="blockquote"><pre style="margin: 0em;">

# Create the data pipe.
pipe_name = 'origin - relax_disp (Tue Nov 18 10:39:36 2014)'
pipe_bundle = 'relax_disp (Tue Nov 18 10:39:36 2014)'
pipe.create(pipe_name=pipe_name, bundle=pipe_bundle,
pipe_type='relax_disp')

# Create spin to hold data.
sequence.read(file='fake_sequence.in', dir=data, res_num_col=1,
res_name_col=2)
deselect.read(file='unresolved', dir=data+os.sep+'500_MHz',
spin_id_col=None, mol_name_col=None, res_num_col=1, boolean='AND',
change_all=False)
deselect.read(file='unresolved', dir=data+os.sep+'800_MHz',
spin_id_col=None, mol_name_col=None, res_num_col=1, res_name_col=2,
boolean='AND', change_all=False)

# Give the spins attributes.
spin.isotope(isotope='15N', spin_id='@*', force=True)
spin.name(name='N')

# Do for 800.
###############################################
# Change directory.
os.chdir(data + os.sep + '500_MHz')

# Get the file list, and sort the file list Alphanumeric.
flist500 = glob.glob('*.in_sparky')
flist500 = sort_filenames(filenames=flist500)

# Make ID
ID500 = []
for f in flist500: ID500.append(&quot;500_&quot;+f.split(&quot;.in_sparky&quot;)[0])

# Then Read
spectrum.read_intensities(file=flist500, spectrum_id=ID500)

# Repeat for the replicated spectra.
flist500rep = glob.glob('*in.bis_sparky')
flist500rep = sort_filenames(filenames=flist500rep)

# Make ID
ID500rep = []
for f in flist500rep:
ID500rep.append(&quot;500_&quot;+f.split(&quot;.in.bis_sparky&quot;)[0]+'b')

# Then Read
spectrum.read_intensities(file=flist500rep, spectrum_id=ID500rep)

# Then map replicated
for b_id in ID500rep:
    a_id = b_id[:-1]
    spectrum.replicated(spectrum_ids=[a_id, b_id])

# Then check
print cdp.replicates

# Then repeat for 800.
###############################################
# Change directory.
os.chdir(data + os.sep + '800_MHz')

# Get the file list, and sort the file list Alphanumeric.
flist800 = glob.glob('*.in_sparky')
flist800 = sort_filenames(filenames=flist800)

# Make ID
ID800 = []
for f in flist800: ID800.append(&quot;800_&quot;+f.split(&quot;.in_sparky&quot;)[0])

# Then Read
spectrum.read_intensities(file=flist800, spectrum_id=ID800)

# Repeat for the replicated spectra.
flist800rep = glob.glob('*in.bis_sparky')
flist800rep = sort_filenames(filenames=flist800rep)

# Make ID
ID800rep = []
for f in flist800rep:
ID800rep.append(&quot;800_&quot;+f.split(&quot;.in.bis_sparky&quot;)[0]+'b')

# Then Read
spectrum.read_intensities(file=flist800rep, spectrum_id=ID800rep)

# Then map replicated
for b_id in ID800rep:
    a_id = b_id[:-1]
    spectrum.replicated(spectrum_ids=[a_id, b_id])

# Then check
print cdp.replicates
################################################
print len(ID500), len(ID500rep), len(ID800), len(ID800rep)

# Then set spectrum properties
all_ID = ID500 + ID500rep + ID800 + ID800rep

for cur_id in all_ID:
    # Split from name
    sfrq_str, vcpmg_str = cur_id.split(&quot;_&quot;)

    if vcpmg_str == 'reference':
         vcpmg = None
    else:
        vcpmg = float(vcpmg_str.split(&quot;b&quot;)[0])
    print cur_id, sfrq_str, vcpmg

    # Set the current experiment type.
    relax_disp.exp_type(spectrum_id=cur_id, exp_type='SQ CPMG')

    # Set the NMR field strength of the spectrum.
    spectrometer.frequency(id=cur_id, frq=float(sfrq_str), units='MHz')

    # Relaxation dispersion CPMG constant time delay T (in s).
    relax_disp.relax_time(spectrum_id=cur_id, time=0.03)

    # Set the relaxation dispersion CPMG frequencies.
    relax_disp.cpmg_setup(spectrum_id=cur_id, cpmg_frq=vcpmg)
-------------------------------------------------------





2014-11-18 0:06 GMT+01:00 Prem Raj Joseph &lt;prbj123relax@xxxxxxxxx&gt;:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">

Hello all,

I was using the GUI version of the software to run the tutorial
</pre></blockquote></blockquote></blockquote><pre style="margin: 0em;">available
</pre><blockquote class="blockquote"><blockquote class="blockquote"><blockquote class="blockquote"><pre style="margin: 0em;">in the manual for analysis of relaxation dispersion.
When i execute the run I get the following error

RelaxPipeError: RelaxError: The data pipe 'R2eff - relax_disp (Mon
</pre></blockquote></blockquote></blockquote><pre style="margin: 0em;">Nov 17
</pre><blockquote class="blockquote"><blockquote class="blockquote"><blockquote class="blockquote"><pre style="margin: 0em;">10:50:08 2014)' already exists.

Not sure where the error is arising from. Any help is greatly
</pre></blockquote><pre style="margin: 0em;">appreciated.
</pre><blockquote class="blockquote"><pre style="margin: 0em;">

Thanks

Prem

Department of Biochemistry and Molecular Biology
Sealy Center for Structural Biology and Molecular Biophysics
5.142 Medical Branch  Building
University of Texas Medical Branch
Galveston, TX 77555-1055
Lab: 409-772-2181
Cell: 409-354-8536

!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
Error analysis
==============

Skipping the error analysis as it has already been performed.

relax&gt; relax_disp.r1_fit(fit=False)



---------------------
- The 'R2eff' model -
---------------------


relax&gt; pipe.copy(pipe_from='origin - relax_disp (Mon Nov 17 10:50:08
2014)', pipe_to='R2eff - relax_disp (Mon Nov 17 10:50:08 2014)',
bundle_to='relax_disp (Mon Nov 17 10:50:08 2014)')
Exception raised in thread.

Traceback (most recent call last):
  File &quot;/home/prem/programs/relax-3.3.2/gui/analyses/execute.py&quot;, line
</pre></blockquote><pre style="margin: 0em;">87,
</pre><blockquote class="blockquote"><pre style="margin: 0em;">in run
    self.run_analysis()
  File
</pre></blockquote></blockquote></blockquote><pre style="margin: 0em;">&quot;/home/prem/programs/relax-3.3.2/gui/analyses/auto_relax_disp.py&quot;,
</pre><blockquote class="blockquote"><blockquote class="blockquote"><blockquote class="blockquote"><pre style="margin: 0em;">line 726, in run_analysis
    Relax_disp(pipe_name=self.data.pipe_name,
pipe_bundle=self.data.pipe_bundle, results_dir=self.data.save_dir,
models=self.data.models, grid_inc=self.data.inc,
mc_sim_num=self.data.mc_sim_num,
</pre></blockquote></blockquote></blockquote><pre style="margin: 0em;">exp_mc_sim_num=self.data.exp_mc_sim_num,
</pre><blockquote class="blockquote"><blockquote class="blockquote"><blockquote class="blockquote"><pre style="margin: 0em;">pre_run_dir=self.data.pre_run_dir,
mc_sim_all_models=self.data.mc_sim_all_models,
insignificance=self.data.insignificance,
numeric_only=self.data.numeric_only, r1_fit=self.data.r1_fit)
  File &quot;/home/prem/programs/relax-3.3.2/auto_analyses/relax_disp.py&quot;,
</pre></blockquote><pre style="margin: 0em;">line
</pre><blockquote class="blockquote"><pre style="margin: 0em;">137, in __init__
    self.run()
  File &quot;/home/prem/programs/relax-3.3.2/auto_analyses/relax_disp.py&quot;,
</pre></blockquote><pre style="margin: 0em;">line
</pre><blockquote class="blockquote"><pre style="margin: 0em;">614, in run
    self.interpreter.pipe.copy(pipe_from=self.pipe_name,
pipe_to=model_pipe, bundle_to=self.pipe_bundle)
  File &quot;/home/prem/programs/relax-3.3.2/prompt/uf_objects.py&quot;, line
</pre></blockquote></blockquote></blockquote><pre style="margin: 0em;">225,
</pre><blockquote class="blockquote"><blockquote class="blockquote"><pre style="margin: 0em;">in
</pre><blockquote class="blockquote"><pre style="margin: 0em;">__call__
    self._backend(*new_args, **uf_kargs)
  File &quot;/home/prem/programs/relax-3.3.2/pipe_control/pipes.py&quot;, line
</pre></blockquote></blockquote></blockquote><pre style="margin: 0em;">191,
</pre><blockquote class="blockquote"><blockquote class="blockquote"><blockquote class="blockquote"><pre style="margin: 0em;">in copy
    raise RelaxPipeError(pipe_to)
RelaxPipeError: RelaxError: The data pipe 'R2eff - relax_disp (Mon
</pre></blockquote></blockquote></blockquote><pre style="margin: 0em;">Nov 17
</pre><blockquote class="blockquote"><blockquote class="blockquote"><blockquote class="blockquote"><pre style="margin: 0em;">10:50:08 2014)' already exists.
_______________________________________________
relax (<a  rel="nofollow" href="http://www.nmr-relax.com">http://www.nmr-relax.com</a>)

This is the relax-users mailing list
relax-users@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="http://www.nmr-relax.com/mail.gna.org/listinfo/relax-users">https://mail.gna.org/listinfo/relax-users</a>
</pre></blockquote><pre style="margin: 0em;">

</pre></blockquote><pre style="margin: 0em;">_______________________________________________
relax (<a  rel="nofollow" href="http://www.nmr-relax.com">http://www.nmr-relax.com</a>)

This is the relax-users mailing list
relax-users@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="http://www.nmr-relax.com/mail.gna.org/listinfo/relax-users">https://mail.gna.org/listinfo/relax-users</a>
</pre></blockquote><pre style="margin: 0em;">

</pre></blockquote><pre style="margin: 0em;">_______________________________________________
relax (<a  rel="nofollow" href="http://www.nmr-relax.com">http://www.nmr-relax.com</a>)

This is the relax-users mailing list
relax-users@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="http://www.nmr-relax.com/mail.gna.org/listinfo/relax-users">https://mail.gna.org/listinfo/relax-users</a>
</pre></blockquote><pre style="margin: 0em;">


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00005" href="msg00005.html">error while running relax-GUI tutorial</a></strong>
<ul><li><em>From:</em> Prem Raj Joseph</li></ul></li>
<li><strong><a name="00007" href="msg00007.html">Re: error while running relax-GUI tutorial</a></strong>
<ul><li><em>From:</em> Troels Emtekær Linnet</li></ul></li>
<li><strong><a name="00008" href="msg00008.html">Re: error while running relax-GUI tutorial</a></strong>
<ul><li><em>From:</em> Troels Emtekær Linnet</li></ul></li>
<li><strong><a name="00009" href="msg00009.html">Re: error while running relax-GUI tutorial</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00013" href="msg00013.html">Re: error while running relax-GUI tutorial</a></strong>
<ul><li><em>From:</em> Prem Raj Joseph</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Mon Nov 24 10:20:31 2014</div>  
</body>
</html>
