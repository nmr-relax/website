<!-- MHonArc v2.6.10 -->
<!--X-Subject: Re: how to parallelise model_free minimise -->
<!--X-From-R13: "tnel gubzcfba" <tnelgNozo.yrrqf.np.hx> -->
<!--X-Date: Tue, 27 Mar 2007 09:21:49 +0200 -->
<!--X-Message-Id: f001463a0703270020w381abf44t28eff5cd19b466a4@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 7f080ed10703191030h79036e06w56912aa1d9130f48@mail.gmail.com -->
<!--X-Reference: 1174384147.29205.20.camel@pc172&#45;31&#45;2&#45;63.biochem.unimelb.edu.au -->
<!--X-Reference: 45FFEC5C.7060205@bmb.leeds.ac.uk -->
<!--X-Reference: 7f080ed10703200727l5fad8e72if4cf9aff74bc21@mail.gmail.com -->
<!--X-Reference: 45FFF714.7070903@bmb.leeds.ac.uk -->
<!--X-Reference: 7f080ed10703200813x323ec212l471796641855a7ff@mail.gmail.com -->
<!--X-Reference: 4603EA08.60801@bmb.leeds.ac.uk -->
<!--X-Reference: 7f080ed10703252217x7db43e6bxfe7324ad0379c778@mail.gmail.com -->
<!--X-Reference: 4607F0AB.6000807@bmb.leeds.ac.uk -->
<!--X-Reference: 7f080ed10703261026l4d783b65o1e34f01315a95024@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: how to parallelise model_free minimise -- March 27, 2007 - 09:21</title>
<link rel="stylesheet" type="text/css" href="/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="https://gna.org/images/gna.theme/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: how to parallelise model_free minimise</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00132" class="tabs">Index by Date</a> | <a href="threads.html#00132" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00131.html">Date Prev</a>] [<a href="msg00133.html">Date Next</a>] [<a href="msg00130.html">Thread Prev</a>] [<a href="msg00135.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: relax-devel@xxxxxxx</li>
<li class="menuitem">
<em>Date</em>: Tue, 27 Mar 2007 08:20:58 +0100</li>
<li class="menuitem">
<em>Dkim-signature</em>: a=rsa-sha1; c=relaxed/relaxed; d=gmail.com; s=beta;	h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;	b=kOiEgXFXN2z+7cKHTQDuxwtz3tSodcFFZ6LJwXi2y9POj+IFycVIUlFwLH7DGoOwBlnHtf1a+Gum3AcPpo2rY6sJgz69p02sZPazc3Ga91dw5IqT7O1YWn149LmtgMtR7yF2QApP8ZHeOi7XvVn2OVG6L9S1e+wrrsolUVAFK1Q=</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00132.html">f001463a0703270020w381abf44t28eff5cd19b466a4@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;<a href="msg00092.html">7f080ed10703191030h79036e06w56912aa1d9130f48@mail.gmail.com</a>&gt;	&lt;<a href="msg00097.html">1174384147.29205.20.camel@pc172-31-2-63.biochem.unimelb.edu.au</a>&gt;	&lt;<a href="msg00107.html">45FFEC5C.7060205@bmb.leeds.ac.uk</a>&gt;	&lt;<a href="msg00110.html">7f080ed10703200727l5fad8e72if4cf9aff74bc21@mail.gmail.com</a>&gt;	&lt;<a href="msg00112.html">45FFF714.7070903@bmb.leeds.ac.uk</a>&gt;	&lt;<a href="msg00114.html">7f080ed10703200813x323ec212l471796641855a7ff@mail.gmail.com</a>&gt;	&lt;<a href="msg00124.html">4603EA08.60801@bmb.leeds.ac.uk</a>&gt;	&lt;<a href="msg00126.html">7f080ed10703252217x7db43e6bxfe7324ad0379c778@mail.gmail.com</a>&gt;	&lt;<a href="msg00128.html">4607F0AB.6000807@bmb.leeds.ac.uk</a>&gt;	&lt;<a href="msg00130.html">7f080ed10703261026l4d783b65o1e34f01315a95024@mail.gmail.com</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>gary thompson</strong> on March 27, 2007 - 09:21:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<tt>On 3/26/07, Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt; wrote:
</tt><blockquote class="blockquote"><pre style="margin: 0em;">&gt; &gt;&gt; i.e for six residues and 3 nodes
&gt; &gt;&gt;
&gt; &gt;&gt; node 1 calculates
&gt; &gt;&gt; res 1 [m1 m2 m3...]
&gt; &gt;&gt; res 2 [[m1 m2 m3..]
&gt; &gt;&gt;
&gt; &gt;&gt; node 2 calculates
&gt; &gt;&gt; res 3 [m1 m2 m3...]
&gt; &gt;&gt; res 4 [[m1 m2 m3..]
&gt; &gt;&gt;
&gt; &gt;&gt; node 3 calculates
&gt; &gt;&gt; res 5 [m1 m2 m3...]
&gt; &gt;&gt; res 6 [[m1 m2 m3..]
&gt; &gt;&gt;
&gt; &gt;&gt; this obviously places some limitations of the design of the
&gt; &gt;&gt; minimisation function as it might needs to have a set and tear down
&gt; &gt;&gt; region that cope with this batched data....
&gt; &gt;
&gt; &gt; The minimise() main loop is the finest grain parallelisation you can
&gt; &gt; get without writing a specific parallelised optimisation algorithm.
&gt; &gt;
&gt;
&gt; actually what i was aiming for was as coarse grained and well load
&gt; balanced a set of calculations as possible (i.e. minimum of
&gt; communication overhead (i.e. bigger chunks of data with similar
&gt; computations times going over the wire))</pre><br>
<pre style="margin: 0em;">The coarse grained target of the looping over data pipes, which the
user must specifically ask for, will limit the number of active nodes
to the number of data pipes, which could be a specific list of
model-free models (assuming this is the only target).  The next level
is the main loop over the minimisation instances.  Finally, the finest
grain is from the parallelised grid search of grid searches (as
discussed in the thread starting at
<a  href="https://mail.gna.org/public/relax-devel/2007-03/msg00088.html">https://mail.gna.org/public/relax-devel/2007-03/msg00088.html</a>,
Message-id: &lt;45FEAC46.8020307@xxxxxxxxxxxxxxx&gt;).  Can you see anything
else which could be targeted for parallelisation?</pre><br>
</blockquote><pre style="margin: 0em;">no see above if you combine the calculations from the various models
with those by spin etc you get the largest number of calculations that
need/can to be carried out together...</pre><br>
<blockquote class="blockquote"><pre style="margin: 0em;"><br>&gt; just as another comment (or two)
&gt;
&gt; 1. why does do we send no arguments to the fucntions e.g.
&gt; -#-num_frq [2]
&gt; -#-frq [[750800000.0, 599.71900000000005]]</pre><br>
<pre style="margin: 0em;">Sorry, again I don't understand the question.  I'll try to answer it
anyway.  The num_frq value is used to deconvolute the 'remap_table',
'frq', 'ri_labels', and 'relax_data'.  This can vary for different
spin systems.  The frequencies are essential for the calculation of
the spectral density values (and hence the chi-squared value).</pre><br>
</blockquote><pre style="margin: 0em;"><br></pre><br>
<pre style="margin: 0em;">what is the difference between
num_frq
and the number of numbers in
frq [[750800000.0, 599.71900000000005]]</pre><br>
<br>
<blockquote class="blockquote"><pre style="margin: 0em;">&gt; 2. how does the data return from minimisation work (specifically why is
&gt; param_vector  a  instance vaiable of  Model_free
&gt; e.g. we have
&gt;
&gt; self.param_vector, self.func, iter, fc, gc, hc, self.warning = results
&gt;
&gt; ....
&gt;
&gt; # Disassemble the parameter vector.
&gt; self.disassemble_param_vector(index=index, sim_index=sim_index)
&gt;
&gt;
&gt;
&gt; inside a tight loop. So even though self.param_vector is an instance
&gt; variable it doesn't contain state for a Model_free object it just keeps
&gt; being overwritten by the latest contents of the result
&gt;
&gt; so why not
&gt;
&gt; param_vector, self.func, iter, fc, gc, hc, self.warning = results
&gt;
&gt; ....
&gt;
&gt; # Disassemble the parameter vector.
&gt; self.disassemble_param_vector(param_vector, index=index,
&gt; sim_index=sim_index)</pre><br>
<pre style="margin: 0em;">Yes, this is probably how this should be done.  Grep for
'self.param_vector' in 'specific_fns/model_free.py' to see why there
has been an inertia for me to make this change.  If necessary for the
MPI code, please try to minimise the number of changes to this setup
as possible.
</pre></blockquote><pre style="margin: 0em;"><br>I will</pre><br>
<tt>Sorry about the legacy code, but because of the nature
</tt><blockquote class="blockquote"><tt>of the multi_processor branch you may need to work with it.
</tt></blockquote><pre style="margin: 0em;"><br>of course, I have made my bed and (be it nails or feathers)  am having
a good go at lying in it!</pre><br>
<tt>Hopefully
</tt><blockquote class="blockquote"><pre style="margin: 0em;">I'll have all these legacy issues completely removed in the 1.3 line
once the data model redesign is complete.  That being said, if you
need to, please feel free to make the above changes.</pre><br>
</blockquote><pre style="margin: 0em;"><br>I don't need to change this ;-) it was more a question trying to
understand the way things are, ask the obvious question, and check
that I am not missing something deep...
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Cheers,</pre><br>
<pre style="margin: 0em;">Edward</pre><br>
<pre style="margin: 0em;">_______________________________________________
relax (<a  href="http://nmr-relax.com">http://nmr-relax.com</a>)</pre><br>
<pre style="margin: 0em;">This is the relax-devel mailing list
relax-devel@xxxxxxx</pre><br>
<pre style="margin: 0em;">To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  href="https://mail.gna.org/listinfo/relax-devel">https://mail.gna.org/listinfo/relax-devel</a></pre><br>
</blockquote><pre style="margin: 0em;"><br></pre><br>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00135" href="msg00135.html">Re: how to parallelise model_free minimise</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00092" href="msg00092.html">relax and Grid computing.</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00097" href="msg00097.html">relax, MPI, and Grid computing.</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00107" href="msg00107.html">Re: relax, MPI, and Grid computing.</a></strong>
<ul><li><em>From:</em> Gary S. Thompson</li></ul></li>
<li><strong><a name="00110" href="msg00110.html">Re: relax, MPI, and Grid computing.</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00112" href="msg00112.html">Re: relax, MPI, and Grid computing.</a></strong>
<ul><li><em>From:</em> Gary S. Thompson</li></ul></li>
<li><strong><a name="00114" href="msg00114.html">Re: relax, MPI, and Grid computing.</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00124" href="msg00124.html">how to parallelise model_free minimise</a></strong>
<ul><li><em>From:</em> Gary S. Thompson</li></ul></li>
<li><strong><a name="00126" href="msg00126.html">Re: how to parallelise model_free minimise</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00128" href="msg00128.html">Re: how to parallelise model_free minimise</a></strong>
<ul><li><em>From:</em> Gary S. Thompson</li></ul></li>
<li><strong><a name="00130" href="msg00130.html">Re: how to parallelise model_free minimise</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer">You are on the <a href="http://gna.org">Gna!</a> mail server.</div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Tue Mar 27 17:22:06 2007</div>  
</body>
</html>
