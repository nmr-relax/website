<!-- MHonArc v2.6.18 -->
<!--X-Subject: r23367 &#45; in /branches/frame_order_cleanup: ./ test_suite/unit_tests/_lib/_dispersion/test_ns_cpmg_2site_expanded.py version.py -->
<!--X-From-R13: rqjneqNaze&#45;erynk.pbz -->
<!--X-Date: Fri, 23 May 2014 09:19:45 +0200 -->
<!--X-Message-Id: E1WnjlY&#45;0006wg&#45;SP@subversion.gna.org -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>r23367 - in /branches/frame_order_cleanup: ./ test_suite/unit_tests/_lib/_dispersion/test_ns_cpmg_2site_expanded.py version.py -- May 23, 2014 - 09:19</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />r23367 - in /branches/frame_order_cleanup: ./ test_suite/unit_tests/_lib/_dispersion/test_ns_cpmg_2site_expanded.py version.py</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00470" class="tabs">Index by Date</a> | <a href="threads.html#00470" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00469.html">Date Prev</a>] [<a href="msg00471.html">Date Next</a>] [<a href="msg00469.html">Thread Prev</a>] [<a href="msg00471.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: relax-commits@xxxxxxx</li>
<li class="menuitem">
<em>Date</em>: Fri, 23 May 2014 07:19:44 -0000</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00470.html">E1WnjlY-0006wg-SP@subversion.gna.org</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>edward</strong> on May 23, 2014 - 09:19:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Author: bugman
Date: Fri May 23 09:19:44 2014
New Revision: 23367

URL: <a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax?rev=23367&amp;view=rev">http://svn.gna.org/viewcvs/relax?rev=23367&amp;view=rev</a>
Log:
Merged revisions 23362,23365-23366 via svnmerge from 
svn+ssh://bugman@xxxxxxxxxxx/svn/relax/trunk

........
  r23362 | bugman | 2014-05-22 19:55:47 +0200 (Thu, 22 May 2014) | 9 lines
  
  Created the test_ns_cpmg_2site_expanded_no_rex8() relaxation dispersion 
unit test.
  
  This is a demonstration commit, showing the 'NS CPMG 2-site expanded' model 
with no exchange when
  kex = 1e5.  I.e. when the motion is too fast for exchange to be observed.  
This test should be used
  for all dispersion models to make sure that they model this edge case 
correctly as well.
  
  This follows from 
<a  rel="nofollow" href="http://article.gmane.org/gmane.science.nmr.relax.devel/5906">http://article.gmane.org/gmane.science.nmr.relax.devel/5906</a>.
........
  r23365 | bugman | 2014-05-23 09:03:27 +0200 (Fri, 23 May 2014) | 7 lines
  
  Attempt at fixing bug #22071, the relax unit test and system test not 
functioning.
  
  This is reported at <a  rel="nofollow" href="https://web.archive.org/web/https://gna.org/bugs/?22071">https://gna.org/bugs/?22071</a>.
  
  The fix here is that the git commands to show the current subversion 
revision number only works when
  run from the relax base directory, or one of the subdirectories.  This 
should now be fixed, as the
  pipe running the command will first 'cd' to the relax base directory.
........
  r23366 | bugman | 2014-05-23 09:18:34 +0200 (Fri, 23 May 2014) | 6 lines
  
  Another attempt at fixing bug #22071, the relax unit test and system test 
not functioning.
  
  This is reported at <a  rel="nofollow" href="https://web.archive.org/web/https://gna.org/bugs/?22071">https://gna.org/bugs/?22071</a>.
  
  This time the complicated shell command &quot;cd %s; git svn find-rev $(git 
rev-parse HEAD)&quot; has been
  replaced with &quot;cd %s; git svn info&quot;.
........

Modified:
    branches/frame_order_cleanup/   (props changed)
    
branches/frame_order_cleanup/test_suite/unit_tests/_lib/_dispersion/test_ns_cpmg_2site_expanded.py
    branches/frame_order_cleanup/version.py

Propchange: branches/frame_order_cleanup/
------------------------------------------------------------------------------
--- svnmerge-integrated (original)
+++ svnmerge-integrated Fri May 23 09:19:44 2014
@@ -1 +1 @@
-/trunk:1-23360
+/trunk:1-23366

Modified: 
branches/frame_order_cleanup/test_suite/unit_tests/_lib/_dispersion/test_ns_cpmg_2site_expanded.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/frame_order_cleanup/test_suite/unit_tests/_lib/_dispersion/test_ns_cpmg_2site_expanded.py?rev=23367&amp;r1=23366&amp;r2=23367&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/frame_order_cleanup/test_suite/unit_tests/_lib/_dispersion/test_ns_cpmg_2site_expanded.py?rev=23367&amp;r1=23366&amp;r2=23367&amp;view=diff</a>
==============================================================================
--- 
branches/frame_order_cleanup/test_suite/unit_tests/_lib/_dispersion/test_ns_cpmg_2site_expanded.py
  (original)
+++ 
branches/frame_order_cleanup/test_suite/unit_tests/_lib/_dispersion/test_ns_cpmg_2site_expanded.py
  Fri May 23 09:19:44 2014
@@ -57,7 +57,7 @@
 
         # Check all R2eff values.
         for i in range(self.num_points):
-            self.assertAlmostEqual(self.R2eff[i], 2.0)
+            self.assertAlmostEqual(self.R2eff[i], 2.0, 5)
 
 
     def param_conversion(self, pA=None, kex=None):
@@ -154,3 +154,13 @@
 
         # Calculate and check the R2eff values.
         self.calc_r2eff()
+
+
+    def test_ns_cpmg_2site_expanded_no_rex8(self):
+        &quot;&quot;&quot;Test the r2eff_ns_cpmg_2site_expanded() function for no exchange 
when kex = 1e5.&quot;&quot;&quot;
+
+        # Parameter reset.
+        self.kex = 1e5
+
+        # Calculate and check the R2eff values.
+        self.calc_r2eff()

Modified: branches/frame_order_cleanup/version.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/frame_order_cleanup/version.py?rev=23367&amp;r1=23366&amp;r2=23367&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/frame_order_cleanup/version.py?rev=23367&amp;r1=23366&amp;r2=23367&amp;view=diff</a>
==============================================================================
--- branches/frame_order_cleanup/version.py     (original)
+++ branches/frame_order_cleanup/version.py     Fri May 23 09:19:44 2014
@@ -71,7 +71,7 @@
                 return str(row[1])
 
     # Try git-svn, reading the output if there are no errors.
-    pipe = Popen('git svn find-rev $(git rev-parse HEAD)', shell=True, 
stdin=PIPE, stdout=PIPE, stderr=PIPE, close_fds=False)
+    pipe = Popen('cd %s; git svn info' % status.install_path, shell=True, 
stdin=PIPE, stdout=PIPE, stderr=PIPE, close_fds=False)
     if not pipe.stderr.readlines():
         # Loop over the output lines.
         for line in pipe.stdout.readlines():
@@ -79,9 +79,12 @@
             if hasattr(line, 'decode'):
                 line = line.decode()
 
+            # Split up the line.
+            row = line.split()
+
             # The revision.
-            if search('^[0-9]', line):
-                return str(line[:-1])
+            if len(row) and row[0] == 'Revision:':
+                return str(row[1])
 
 
 def url():



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Fri May 23 10:20:03 2014</div>  
</body>
</html>
