<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: Sebastien Morin's relaxation dispersion in relax. -->
<!--X-From-R13: Eéonfgvra [beva <fronfgvnabzbevabNtznvy.pbz> -->
<!--X-Date: Thu, 11 Apr 2013 22:31:13 +0200 -->
<!--X-Message-Id: 51671D6F.4030906@gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: CAED9pY9wY9K8YdiDK8KOW8trzUB8BCGcE98z7jqjEVq&#45;bpHBVw@mail.gmail.com -->
<!--X-Reference: 515C8E00.1060100@gmail.com -->
<!--X-Reference: CAED9pY_4RAP6g+&#45;QPJq5fgt&#45;pJJ4dNRaoFy4PLmMR3vobER9tQ@mail.gmail.com -->
<!--X-Reference: CAED9pY82w9MwWiPuODZv5c4226=PqL&#45;LoPk&#45;NN2N991RAU_U+w@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: Sebastien Morin's relaxation dispersion in relax. -- April 11, 2013 - 22:31</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: Sebastien Morin's relaxation dispersion in relax.</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00023" class="tabs">Index by Date</a> | <a href="threads.html#00023" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00022.html">Date Prev</a>] [<a href="msg00024.html">Date Next</a>] [<a href="msg00022.html">Thread Prev</a>] [<a href="msg00024.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Thu, 11 Apr 2013 22:30:39 +0200</li>
<li class="menuitem">
<em>Cc</em>: &quot;relax-devel@xxxxxxx&quot; &lt;relax-devel@xxxxxxx&gt;,	Paul Schanda &lt;paul.schanda@xxxxxx&gt;</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;	h=x-received:message-id:date:from:user-agent:mime-version:to:cc	:subject:references:in-reply-to:content-type	:content-transfer-encoding;	bh=LBuAHaAY7IGwi1eW67HkLOsK2w8TiVUpiOtSLx9AF9I=;	b=L+noOWEu1fUXw8H9BMx/QCD7oEFgppXyVF+Y883EfRaQQr/rXd7V+MG5luadHoh9ii	xyauiaw9MGm5uwxQlkxM38DZPFYMR5sKRbE67Jd/6AW2ahfs4BThfgAnfROyDsYRdToC	b6OejVt8E5Kz5oAl2FHPuexZQVSczQ7Ir8WoWNRKVyVZD9qglU5vJsD0MSWktat9yki3	0FM1TZQfotzRXIa7l3gkl/53RHjs3rZj4gmdbFgbGl2/2VXQ2n9ujOQwkVA8OsjFLtUj	IcANRCxwWlCsl8qi+ssHOgo1NmA3zxCvxabHMcJfPT9992ZCqn/AeSf0VV6uXkGy5Ui3	E1Kg==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00023.html">51671D6F.4030906@gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;CAED9pY9wY9K8YdiDK8KOW8trzUB8BCGcE98z7jqjEVq-bpHBVw@xxxxxxxxxxxxxx&gt;	&lt;515C8E00.1060100@xxxxxxxxx&gt;	&lt;CAED9pY_4RAP6g+-QPJq5fgt-pJJ4dNRaoFy4PLmMR3vobER9tQ@xxxxxxxxxxxxxx&gt;	&lt;CAED9pY82w9MwWiPuODZv5c4226=PqL-LoPk-NN2N991RAU_U+w@xxxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>User-agent</em>: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.6;	rv:17.0) Gecko/20130328 Thunderbird/17.0.5</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Sébastien Morin</strong> on April 11, 2013 - 22:31:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">
Hi Ed,
Hi all,

</pre><tt>Thanks for you messages, especially for the second message sparing my 
</tt><tt>effort.
</tt><pre style="margin: 0em;">

Would you have any other question, please feel free to ask...

</pre><tt>Just as an update, I am no longer in active research (although I will 
</tt><tt>always be happy to help research, if I can) since I joined the 
</tt><tt>International AIDS Society (based in Geneva) as the Research Officer for 
</tt><tt>the Industry Liaison Forum (www.iasociety.org/ilf.aspx).
</tt><pre style="margin: 0em;">

Best of the best for your research around protein dynamics !

Sincerely,


Seb  :)



On 13-04-11 5:09 PM, Edward d'Auvergne wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">
Hi Seb,

Don't worry about my questions about Flemming Hansen's data in relax,
I just looked at his original paper
(<a  rel="nofollow" href="http://dx.doi.org/10.1021/jp074793o">http://dx.doi.org/10.1021/jp074793o</a>) and remembered again that this
data uses the formula:

R2,eff(νCPMG) = -1/Trelax * ln(I1(νCPMG)/I0)

So this requires no exponential curve-fitting, just a simple direct
calculation prior to fitting the dispersion curves.

Regards,

Edward



On 11 April 2013 15:55, Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">
Hi Seb,

Thanks for the response.  As I have some R1rho dispersion data I am
measuring and as NESSY is in no state to handle this data, I decided
to resurrect your branch.  This was for my own personal use and is the
fastest way for me to process the data.  This didn't take much effort.
  The changes I needed to perform were:

- port all of your commits to a new dispersion branch (the old branch
was too out of date),
- enable clustering of spins (requiring large infrastructure changes),
- the outputting of 2D Grace curves of R2eff values (for example for
the dispersion curves),
- a better, more flexible design of the target function class to allow
different diffusion equations,
- shifted the dispersion equation Python code, converted from your
original C code, to lib/dispersion/equations.py (that was trivial),
- some trivial Python 3 fixes,
- some updates of your old code for the newer relax design,
- some new, quite simple user functions (relax_disp.spin_lock_field,
relax_disp.relax_time) and modified relax_disp.cpmg_frq,
- created a basic 'auto-analysis' which will enable a GUI front end to
be created for the dispersion analysis (probably only requiring 1-2
days of work).

This was really only a few days of work.  I do not have your fast and
slow 2-site equations for CPMG data running yet and had a question
about the dispersion data Fleming Hansen sent you.  I am looking at
making your system tests for fast and slow 2-site exchange pass.  For
this, would you be able to forward me the original email from Fleming
which contains the data?

The reason is because the data in relax test suite appears to be
incomplete.  Unless the data is the R2eff values already obtained form
the peak intensities, but the numbers in the *.in files are on the
order of 1000 so they must be peak intensities.  But there should be
one peak intensity for each relaxation time to have exponential
curves.  The current way to analyse this data is the same as in the R1
and R2 analysis, in that relax will read in peak intensities from
Sparky, NMRView, XEasy or generic peak lists, and optimise both the
exponential curves together with the chosen dispersion model.  If you
can remember, I was also wondering how you created the *.in_sparky
files with chemical shifts?  The data doesn't appear to be the same as
that which is distributed with CATIA
(<a  rel="nofollow" href="http://pound.med.utoronto.ca/~flemming/catia/">http://pound.med.utoronto.ca/~flemming/catia/</a>), but it looks like the
*.in files correspond to the *.out files in the
Examples/Ncp_CW/data_500 and Examples/Ncp_CW/data_800 directories.  If
you could, in your spare time, dig out this old information that would
be much appreciated.

Cheers,

Edward



On 3 April 2013 22:16, Sébastien Morin &lt;sebastianomorino@xxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">
Hi all,

Thanks Edward for keeping me posted on this topic.

It is very long ago that I started implementing the relaxation dispersion
code in relax, however with very little success.

Although I felt this was important, changing project and missing time were
major reasons for giving up. I ma happy to learn that Paul might be able to
really complete this task, making relax useful for a broader set of
analysis.

Relaxation dispersion experiments are increasingly used, often using
in-house and/or black box program. An open source transparent and highly
dynamic program implementing relaxation dispersion codes would be very much
welcome !

If I can be of any help (although I doubt it), please feel free to contact
me..!

Best,


Sébastien


On 13-03-23 3:20 PM, Edward d'Auvergne wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">
Hi Paul,

I would like to help you with the conversion of your Matlab code for
the numerical integration of the Bloch-McConnell equations to Python
and its incorporation into an existing open source project, as you
discussed on the NESSY development mailing list:

<a  rel="nofollow" href="http://www.nmr-relax.com/mail.gna.org/public/nessy-devel/2013-03/msg00000.html">https://mail.gna.org/public/nessy-devel/2013-03/msg00000.html</a>

and in private messages.  Note that I am the caretaker of the NESSY
project and am not too familiar with the codebase, so I would not be
able to help you too much.  Though I should be able to point you in
the right direction when needed.  You should also note that there are
some major bugs which you would need to be aware of, as they might
influence your endevours:

<a  rel="nofollow" href="https://web.archive.org/web/https://gna.org/bugs/?group=nessy">https://gna.org/bugs/?group=nessy</a>
<a  rel="nofollow" href="http://www.nmr-relax.com/mail.gna.org/public/nessy-users/2012-12/msg00002.html">https://mail.gna.org/public/nessy-users/2012-12/msg00002.html</a> (the
response by James Nyirenda to that message is not correct).
<a  rel="nofollow" href="http://www.nmr-relax.com/mail.gna.org/public/nessy-users/2012-12/msg00000.html">https://mail.gna.org/public/nessy-users/2012-12/msg00000.html</a>

Importantly, the R1rho side of NESSY is non-functional and requires
major surgery:

<a  rel="nofollow" href="http://www.nmr-relax.com/mail.gna.org/public/nessy-users/2012-06/msg00010.html">https://mail.gna.org/public/nessy-users/2012-06/msg00010.html</a>

However I didn't have and still don't have the time to refactor this
codebase:

<a  rel="nofollow" href="http://www.nmr-relax.com/mail.gna.org/public/nessy-users/2012-06/msg00011.html">https://mail.gna.org/public/nessy-users/2012-06/msg00011.html</a>

The reason I am writing on this list is because I would like to point
to you a large quantity of work already present in relax specifically
for relaxation dispersion.  Sebastien Morin has an almost complete
relaxation dispersion analysis coded into relax for the optimisation
of the parameters of the 2-site model using the analytically derived
equations.  The code is in the relax_disp relax branch:

<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/">http://svn.gna.org/viewcvs/relax/branches/</a>

Also, Dr Flemming Hansen helped us by giving us some of his CPMG data
to use as test data for the test suite.  You can see it in the
test_suite/shared_data/curve_fitting_disp/Hansen/ directory of the
branch at:


<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/relax_disp/test_suite/shared_data/curve_fitting_disp/Hansen/">http://svn.gna.org/viewcvs/relax/branches/relax_disp/test_suite/shared_data/curve_fitting_disp/Hansen/</a>

The readme file explains the data.  Note that the branch is now quite
old.  Therefore to use it I would suggest that a new branch is created
and each of Sebastien's commits be ported to the new branch.  I would
also suggest not using C code for the relaxation dispersion equations.

Because relax has active developers and has been designed with extreme
flexibility in mind, together with Sebastien's work you may find it
easier to incorporate your Matlab -&gt; Python converted functions into
relax.  Seb might even have some opinions on the subject ;)

Also, because of the relax design, it should be possible to copy the
Python functions directly into NESSY and the whack the GUI into shape
to use them without modification.  However NESSY would probably
require major heart surgery to get minfx into it to allow the R1rho
data type to be used, which you may be required to perform.

If you do decide to go with either NESSY or relax, could I ask you to
communicate on the public mailing lists?  Cheers.  Also, for the
Matlab script and other files, I would open a special task for you in
either project where files can be attached (note that attaching files
to the task tracker is permanent - they can never be deleted).  I
would also recommend that you sign up with Gna! and then we can set
you up as a developer of either (or both) projects and create a branch
that you can play with.  For NESSY you would automatically be a
developer, but for relax I would give you restricted access to just
your branch, and then later on the relax developers can vote to have
you as a full developer.

Regards,

Edward


P. S.  Note that I would be helping you in my spare time - i.e. after
work and on weekends, so you may sometimes have to wait for a
response.  Especially if I needed to help you with the coding.


</pre></blockquote><pre style="margin: 0em;">
--
Sébastien Morin, Ph.D.
1183 Bursins, Switzerland
---- sebastianomorino AT gmail.com ----

</pre></blockquote></blockquote></blockquote><pre style="margin: 0em;">

--
Sébastien Morin, Ph.D.
1183 Bursins, Switzerland
---- sebastianomorino AT gmail.com ----



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00024" href="msg00024.html">Re: Sebastien Morin's relaxation dispersion in relax.</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00017" href="msg00017.html">Re: Sebastien Morin's relaxation dispersion in relax.</a></strong>
<ul><li><em>From:</em> Sébastien Morin</li></ul></li>
<li><strong><a name="00021" href="msg00021.html">Re: Sebastien Morin's relaxation dispersion in relax.</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00022" href="msg00022.html">Re: Sebastien Morin's relaxation dispersion in relax.</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Fri Apr 12 09:20:07 2013</div>  
</body>
</html>
