<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: Relaxation dispersion clustering calculation time -->
<!--X-From-R13: Febryf Szgrxæe Zvaarg &#60;gyvaargNaze&#45;erynk.pbz> -->
<!--X-Date: Tue, 09 Sep 2014 10:42:11 +0200 -->
<!--X-Message-Id: CA+CBx2PFz_Kh8joqZ18wWHMM5SwKvZKTAg_duMJ1Fa7_9j&#45;eqw@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 1410211972.2015.YahooMailNeo@web120004.mail.ne1.yahoo.com -->
<!--X-Reference: 1FB1296D&#45;09F0&#45;4AEB&#45;81A7&#45;909E56E6ED11@ibms.sinica.edu.tw -->
<!--X-Reference: CAED9pY9J_HmN+rMyPkfGZYXZNTN=5HZ&#45;Y2dguZyELkEGJXSobw@mail.gmail.com -->
<!--X-Reference: CA+CBx2PuE=P5EaL9rqYpgr9RuztabsB=7HQFAK=AD4yVZCJeAw@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: Relaxation dispersion clustering calculation time -- September 09, 2014 - 10:42</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: Relaxation dispersion clustering calculation time</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00005" class="tabs">Index by Date</a> | <a href="threads.html#00005" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00004.html">Date Prev</a>] [<a href="msg00006.html">Date Next</a>] [<a href="msg00011.html">Thread Prev</a>] [<a href="msg00019.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: &quot;Edward d'Auvergne&quot; &lt;edward@xxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Tue, 9 Sep 2014 10:41:21 +0200</li>
<li class="menuitem">
<em>Cc</em>: &quot;relax-users@xxxxxxx&quot; &lt;relax-users@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113; h=mime-version:sender:in-reply-to:references:from:date:message-id :subject:to:cc:content-type:content-transfer-encoding; bh=uQWW103T2z7n1HDZFmiCzRFmjbxlIkoLicl7U8TzqWE=; b=w+GHwIvSO+R4C1Nl2+zBe3j6ISO5C7mK9P+4oKmt7H9Kb2/6LH4TKYIN77Hsb02Q8r ed/oBs6BjdmAUhrT35PXuPPMsG+8OWurX3+qBSmQrE6CuUXuqrjy+JNbLS7fRIKXn94w cyv2gSba2xaQDQ5qRlOlSNrLMa2DWAkld1oHBJBoFew6nOcvIh0vpONyiXJ6czj/r58E 1AyDobpaGFxwf09ITy2DSqUtlWV9tYneR6vSDdANTRyOXJSz8Ey+atH7iGRx1X74lqke bxk9gY+dvoeVORkkfUidR9mNJKb/3l22xnbymJDF1Loc8koaxSe8qhrKfWvTnVBKj7FB 5weg==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00005.html">CA+CBx2PFz_Kh8joqZ18wWHMM5SwKvZKTAg_duMJ1Fa7_9j-eqw@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;<a href="msg00000.html">1410211972.2015.YahooMailNeo@web120004.mail.ne1.yahoo.com</a>&gt; &lt;<a href="msg00001.html">1FB1296D-09F0-4AEB-81A7-909E56E6ED11@ibms.sinica.edu.tw</a>&gt; &lt;CAED9pY9J_HmN+rMyPkfGZYXZNTN=5HZ-Y2dguZyELkEGJXSobw@mail.gmail.com&gt; &lt;CA+CBx2PuE=P5EaL9rqYpgr9RuztabsB=7HQFAK=AD4yVZCJeAw@mail.gmail.com&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Troels Emtekær Linnet</strong> on September 09, 2014 - 10:42:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">By the way.

You can start a new analysis from the old results.

I would do this.

1) Upgrade relax
2) Make backup with previous data
3) Start relax in GUI
4) Start a Relaxation dispersion analysis
5) Create the pipe
6) Then go to &quot;user functions&quot; -&gt; results -&gt;  read
7) Point to the file &quot;results.bz2&quot; from a previous run.


This should bring up the setting in the GUI.

Then inspect the clustering is as you wish:
Menu View -&gt; Relax prompt

And write:
cdp.clustering

{'test': [':2@N'], 'free spins': [':3@N', ':4@N']}

Here all spins in 'test', will be fitted together.
All in 'free spins' are fitted individual.

If you then take the models:
CR72, CR72 Full, B14 Full,
then relax will first minimise for CR72.

When it proceeds to CR72 Full, and B14 Full, the nesting mechanism
will take similar parameters from
CR72, and use that as the start for minimisation.

Best
Troels


2014-09-09 10:25 GMT+02:00 Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxxxxxx&gt;:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi Chung-ke.

Can you put the information about which version of relax you use?

You can in terminal do:
relax -i

and write it here.

And then there is the question if you used data from one field or two
spectrometer fields.

Fitting to one field, can give problems.
This is described here:

&quot;&quot;&quot;Faithful estimation of dynamics parameters from CPMG relaxation
dispersion measurements.&quot;&quot;&quot;
Kovrigin, Evgenii L; Kempf, James G; Grey, Michael J; Loria, J Patrick
Journal of magnetic resonance, 2006, Vol 180, p 93-104.
<a  rel="nofollow" href="http://www.ncbi.nlm.nih.gov/pubmed/16458551">http://www.ncbi.nlm.nih.gov/pubmed/16458551</a>
DOI: 10.1016/j.jmr.2006.01.010

Figure 9 and 10 shows these &quot;rotten bananas&quot;.

Clustering data, in some way overcome this problem.
Since you now starts to add more data, compared to number of fitting 
parameters.

The problem though, is that if you start from &quot;single fitted&quot; data,
and go to &quot;Clustering of data&quot;, that
an average of the global parameter will be taken for the single fitted data.

In previous version of relax (a version or two ago), we changed from
taking the average to take the median of the parameters.
This was to prevent taking the average of an outliers, if one of the
single fitted spins have been fitted &quot;crazy&quot;.
You don't want to start with a global kex at 10000.

I have discussed the CR72 Full model with my supervisor.
He have actually never seen it in use in any paper.
Always the assumption R20A=R20B is used.

If you only have one field, I would not even try this model.
If you still would like to try it, please consider using the B14 full
model as well, to compare.
<a  rel="nofollow" href="http://wiki.nmr-relax.com/B14_full">http://wiki.nmr-relax.com/B14_full</a>

Abstract: &quot;Faithful estimation of dynamics parameters from CPMG
relaxation dispersion measurements.&quot;
This work examines the robustness of fitting of parameters describing
conformational exchange (k(ex), p(a/b), and Deltaomega) processes from
CPMG relaxation dispersion data. We have analyzed the equations
describing conformational exchange processes for the intrinsic
inter-dependence of their parameters that leads to the existence of
multiple equivalent solutions, which equally satisfy the experimental
data. We have used Monte-Carlo simulations and fitting to the
synthetic data sets as well as the direct 3-D mapping of the parameter
space of k(ex), p(a/b), and Deltaomega to quantitatively assess the
degree of the parameter inter-dependence. The demonstrated high
correlation between parameters can preclude accurate dynamics
parameter estimation from NMR spin-relaxation data obtained at a
single static magnetic field. The strong parameter inter-dependence
can readily be overcome through acquisition of spin-relaxation data at
more than one static magnetic field thereby allowing accurate
assessment of conformational exchange properties.


Troels Emtekær Linnet
PhD student
Copenhagen University
SBiNLab, 3-0-41

2014-09-09 9:48 GMT+02:00 Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt;:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi Chung-ke,

Welcome to the relax mailing lists!  Thanks to the hard work of one of
the relax developers - Troels Linnet - this long calculation time
should now be much, much shorter.  Have a look at the following
release announcement:

<a  rel="nofollow" href="http://wiki.nmr-relax.com/Relax_3.3.0">http://wiki.nmr-relax.com/Relax_3.3.0</a>

For the 'CR72 full' model (<a  rel="nofollow" href="http://wiki.nmr-relax.com/CR72_full">http://wiki.nmr-relax.com/CR72_full</a>), the
clustering example here gives a ~22x speed up so your calculation time
would then drop from ~20,000 min to ~1000 min.  If you would like to
receive announcements about new relax versions, please subscribe to
the relax-announce mailing list
(<a  rel="nofollow" href="http://www.nmr-relax.com/mail.gna.org/listinfo/relax-announce/">https://mail.gna.org/listinfo/relax-announce/</a>).  This list only
receives ~10 emails per year.  See
<a  rel="nofollow" href="http://news.gmane.org/gmane.science.nmr.relax.announce">http://news.gmane.org/gmane.science.nmr.relax.announce</a>.

I have a few questions about how you performed the analysis.  Did you
use a non-clustered set of results to seed the clustered analysis?  In
the dispersion auto-analysis protocol exposed via the GUI, the results
from the non-clustered analysis will be taken as the starting point
for optimisation of the clustered analysis, as described in Morin et
al., 2014 (<a  rel="nofollow" href="http://dx.doi.org/10.1093/bioinformatics/btu166">http://dx.doi.org/10.1093/bioinformatics/btu166</a>).  If you
wish, and are capable with scripting, you can also create your own
analysis protocol via a relax script and not use the auto-analysis.
The relax software is very flexible and you can create quite complex
analysis protocols - the auto-analyses are just large relax scripts.

Also, did you look at the results from the non-clustered analysis to
see if the kinetics of all 13 residues are similar?  Or if the
dispersion curves look reasonable?  Some data might be of low quality
and causing difficulties with the optimisation.  You should also note
that most dispersion data is not good enough to differentiate R20A
from R20B.  Do the final results (non-clustered and clustered) look
reasonable for these two parameters?  It could be that differentiating
R20A from R20B in your system is difficult and causing optimisation to
take much longer than normal.  Do you see the same optimisation times
with the clustered CR72 model where R20A=R20B=R20
(<a  rel="nofollow" href="http://wiki.nmr-relax.com/CR72">http://wiki.nmr-relax.com/CR72</a>)?  Also, have a look at the log file
from the analysis and see if the total number of minimisation
iterations is much longer for the 'CR72 full' model compared to the
CR72 model.  This will tell you if the optimisation problem is much
more complicated for the 'full' model.

Regards,

Edward


On 9 September 2014 09:19, Chung-ke Chang &lt;chungke@xxxxxxxxxxxxxxxxxx&gt; 
wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Dear all,

This is my first post here, and I have a question regarding the time it 
takes for a relaxation dispersion clustering process to finish. I have 
one clustering calculation that has been running for ~ 20,000 min on a 
single Xeon 2.66 GHz core. The cluster consists of 13 residues being fit 
to the ‘CR72 full’ model. I wonder if the long time it is taking is 
normal? Would it be possible that relax has been stuck in an infinite 
loop of some sort, without showing up in the log file? Any input would be 
greatly appreciated. By the way, using a cluster of only 11 residues out 
of the 13 did finish in ~13,000 min.

Chung-ke Chang
Biomacromolecular NMR Lab
Institute of Biomedical Science
Academia Sinica, Taiwan
_______________________________________________
relax (<a  rel="nofollow" href="http://www.nmr-relax.com">http://www.nmr-relax.com</a>)

This is the relax-users mailing list
relax-users@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="http://www.nmr-relax.com/mail.gna.org/listinfo/relax-users">https://mail.gna.org/listinfo/relax-users</a>
</pre></blockquote><pre style="margin: 0em;">

_______________________________________________
relax (<a  rel="nofollow" href="http://www.nmr-relax.com">http://www.nmr-relax.com</a>)

This is the relax-users mailing list
relax-users@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="http://www.nmr-relax.com/mail.gna.org/listinfo/relax-users">https://mail.gna.org/listinfo/relax-users</a>
</pre></blockquote></blockquote><pre style="margin: 0em;">


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00000" href="msg00000.html">Regarding Relax-3.3.0 NMR installation</a></strong>
<ul><li><em>From:</em> Arun Gupta</li></ul></li>
<li><strong><a name="00001" href="msg00001.html">Relaxation dispersion clustering calculation time</a></strong>
<ul><li><em>From:</em> Chung-ke Chang</li></ul></li>
<li><strong><a name="00002" href="msg00002.html">Re: Relaxation dispersion clustering calculation time</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00003" href="msg00003.html">Re: Relaxation dispersion clustering calculation time</a></strong>
<ul><li><em>From:</em> Troels Emtekær Linnet</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Mon Sep 15 12:40:11 2014</div>  
</body>
</html>
