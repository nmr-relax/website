<!-- MHonArc v2.6.10 -->
<!--X-Subject: Re: Multiple test cases and the splitting up of large modules. -->
<!--X-From-R13: "Sqjneq q'Ohiretar" <rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Thu, 08 Mar 2007 10:00:41 +0100 -->
<!--X-Message-Id: 7f080ed10703080100h75191236j177eeb9be4552258@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: E1HO9rU&#45;0004g2&#45;14@subversion.gna.org -->
<!--X-Reference: 45EBEA6A.7030809@bmb.leeds.ac.uk -->
<!--X-Reference: 7f080ed10703052357i7fc20379n835048c0cc3c84c1@mail.gmail.com -->
<!--X-Reference: 45ED2A08.6090207@bmb.leeds.ac.uk -->
<!--X-Reference: 1173174583.8066.223.camel@mrspell -->
<!--X-Reference: 1173248473.29411.21.camel@pc172&#45;31&#45;2&#45;63.biochem.unimelb.edu.au -->
<!--X-Reference: 45EFC94F.6000101@bmb.leeds.ac.uk -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: Multiple test cases and the splitting up of large modules. -- March 08, 2007 - 10:00</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: Multiple test cases and the splitting up of large modules.</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00021" class="tabs">Index by Date</a> | <a href="threads.html#00021" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00020.html">Date Prev</a>] [<a href="msg00022.html">Date Next</a>] [<a href="msg00018.html">Thread Prev</a>] [<a href="msg00022.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: &quot;Gary S. Thompson&quot; &lt;garyt@xxxxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Thu, 8 Mar 2007 20:00:06 +1100</li>
<li class="menuitem">
<em>Cc</em>: relax-devel@xxxxxxx</li>
<li class="menuitem">
<em>Dkim-signature</em>: a=rsa-sha1; c=relaxed/relaxed; d=gmail.com; s=beta;	h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:cc:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;	b=s0c31mj7YQzR5Y8Boojc7IwdJtlvNFaz+Clxsf73mutc3p8FmYJqL16O0NHL2xbmFRqFtbGgomx4FC7KgqhC350Rn2hwegT/KgHatYPdkItNsnqszIkJKkh5fWWnB2GdDsSRgifZF0BeFv3fgIOAIQnZrwOPwpOvtnl/wekFVfE=</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00021.html">7f080ed10703080100h75191236j177eeb9be4552258@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;E1HO9rU-0004g2-14@subversion.gna.org&gt;	&lt;<a href="msg00004.html">45EBEA6A.7030809@bmb.leeds.ac.uk</a>&gt;	&lt;<a href="msg00005.html">7f080ed10703052357i7fc20379n835048c0cc3c84c1@mail.gmail.com</a>&gt;	&lt;<a href="msg00008.html">45ED2A08.6090207@bmb.leeds.ac.uk</a>&gt; &lt;<a href="msg00009.html">1173174583.8066.223.camel@mrspell</a>&gt;	&lt;<a href="msg00010.html">1173248473.29411.21.camel@pc172-31-2-63.biochem.unimelb.edu.au</a>&gt;	&lt;<a href="msg00018.html">45EFC94F.6000101@bmb.leeds.ac.uk</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on March 08, 2007 - 10:00:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<tt>On 3/8/07, Gary S. Thompson &lt;garyt@xxxxxxxxxxxxxxx&gt; wrote:
</tt><blockquote class="blockquote"><pre style="margin: 0em;">Edward d'Auvergne wrote:</pre><br>
<pre style="margin: 0em;">&gt;On Tue, 2007-03-06 at 09:49 +0000, Chris MacRaild wrote:
&gt;
&gt;
&gt;&gt;On Tue, 2007-03-06 at 08:44 퍍㐙ꫲ S. Thompson wrote:
&gt;&gt;
&gt;&gt;
&gt;&gt;&gt;Edward d'Auvergne wrote:
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;snip
&gt;&gt;
&gt;&gt;
&gt;&gt;&gt;&gt;Also do you think that we should have a single unit test
&gt;&gt;&gt;&gt;file per relax module?  I can see value in not enforcing this rule.
&gt;&gt;&gt;&gt;For example the 'specific_fns.model_free' module contains a very large
&gt;&gt;&gt;&gt;number of class methods.  This could be better served by a directory
&gt;&gt;&gt;&gt;such as 'test_suite/unit_tests/specific_fns/model_free/' and allowing
&gt;&gt;&gt;&gt;that directory to have a separate unit test model per class methods
&gt;&gt;&gt;&gt;(each containing numerous tests of that one method).  As each relax
&gt;&gt;&gt;&gt;function or method will require numerous tests for proper functioning,
&gt;&gt;&gt;&gt;proper throwing of RelaxErrors, etc, the unit test modules could
&gt;&gt;&gt;&gt;become quite large and unwieldy, especially if the self.setUp and
&gt;&gt;&gt;&gt;self.tearDown() methods need to be different for different
&gt;&gt;&gt;&gt;functions/methods.
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;It would be ideal to have one file per because then we can check for
&gt;&gt;&gt;basic coverage and overlooked unit tests. However there is nothing to
&gt;&gt;&gt;stop you adding imports to auxiliary classes to carry out the individual
&gt;&gt;&gt;tests....
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;Although I take the point about multiple tests, setUps and tearDowns per
&gt;&gt;method, I'd generally suggest that if the unit test file is getting too
&gt;&gt;unwieldy, the related module probably is too. So perhaps we should
&gt;&gt;enforce this rule, and split modules when neccessary, not split unit
&gt;&gt;test files. (still more work, still more breakages, but that might be
&gt;&gt;the cost of a manageable code base)
&gt;&gt;
&gt;&gt;
&gt;
&gt;
&gt;We could have multiple test case classes derived from TestCase within
&gt;the single module file (corresponding to the single relax source
&gt;file).  That way we can, if needed, have one class per function. I
&gt;think this is really important as the data structures, etc that need to
&gt;be created for that one function will be different to what is needed
&gt;for another function (if common self.setUp() and self.tearDown()
&gt;methods are needed for different functions, we can simply use
&gt;inheritance or the same class).  For example the setUp() for the
&gt;'calc_jw()' function of the module 'maths_fns.jw_mf.py' may need to be
&gt;different to that of the subsequent function 'calc_S2_jw()' (then again
&gt;maybe not).  In fact each of the 128 functions in that single module
&gt;may need different setUp() and tearDown() methods (that code was an
&gt;absolute nightmare to debug back in 2003, but this setup is very
&gt;important for numerical efficiency).  A better example might be the
&gt;'self.execute()' and 'self.create()' methods of the module
&gt;'generic_fns.dasha' which execute Dasha and create Dasha input files
&gt;respectively.  The tearDown() method for the input file creation tests
&gt;will require the deletion of the temporary input files whereas
&gt;tearDown() for Dasha execution will be different.
&gt;
&gt;
Hi Ed
    Setup and teardown whould only be for common stae between a set of
unit tests... os function specific setup and teardown whould go in the
inviviual functions. If a number of   functions share specific setup and
teardown functionality that could go in a separate utiltiy function.</pre><br>
<pre style="margin: 0em;">On another note one of the things that the the unit test framework
allows us to do is to return a test suite when we load a unit test from
a file (testsuite and test case are polymorphic)... Obviously this
allows multiple different test_cases or suites to be loaded from one
file.. However. overall i agree with chris that if the the files are too
complex they should be split
</pre></blockquote><pre style="margin: 0em;"><br>Yep, I've already set up a framework for splitting the most complex of
relax's modules, 'specific_fns/model_free.py'.  This can be used for
other modules.  Even if we do break up the complex modules, there will
still be a need for different setUp and tearDown methods for different
categories of relax functions (of the same module).  These special
methods are important as the Python unittest code will execute
tearDown no matter how badly the code fails during the test and setUp
is rerun for each of the unittests of the TestCase.  These setups and
cleanups shouldn't be in the individual functions.  Unittest will take
all the classes subclassed from TestCase in the given module and run
them.  So if we have a different TestCase class for each time we need
different setups, then we can have one test suite module corresponding
to one relax module - mimicking the directory and file structure -
while still retaining the flexibility of doing completely different
things in the unit tests of that module.  Another example of where
setUp and tearDown need to be different between two functions of a
relax module is in 'generic_fns/structure.py'.  For the method
add_atom(), we will need to create the 'self.atomic_data' structure
prior to the unit tests.  This structure is however not used by the
method uniform_vect_dist_spherical_angles(), and hence the setUp for
its tests will be different.  For the method write_pdb_file(), the
resultant file will need to be deleted by the tearDown() TestCase
method.</pre><br>
<pre style="margin: 0em;">Cheers,</pre><br>
<tt>Edward
</tt>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00004" href="msg00004.html">Re: r3080 - /1.3/test_suite/unit_tests/unit_test_runner.py</a></strong>
<ul><li><em>From:</em> Gary S. Thompson</li></ul></li>
<li><strong><a name="00005" href="msg00005.html">Re: r3080 - /1.3/test_suite/unit_tests/unit_test_runner.py</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00008" href="msg00008.html">Re: r3080 - /1.3/test_suite/unit_tests/unit_test_runner.py</a></strong>
<ul><li><em>From:</em> Gary S. Thompson</li></ul></li>
<li><strong><a name="00009" href="msg00009.html">Re: r3080 - /1.3/test_suite/unit_tests/unit_test_runner.py</a></strong>
<ul><li><em>From:</em> Chris MacRaild</li></ul></li>
<li><strong><a name="00010" href="msg00010.html">Multiple test cases and the splitting up of large modules.</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00018" href="msg00018.html">Re: Multiple test cases and the splitting up of large modules.</a></strong>
<ul><li><em>From:</em> Gary S. Thompson</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Thu Mar 08 10:20:26 2007</div>  
</body>
</html>
