<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: BMRB diffusion tensor saveframes. -->
<!--X-From-R13: "Sqjneq q'Ohiretar" <rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Tue, 17 Nov 2009 17:30:22 +0100 -->
<!--X-Message-Id: 7f080ed10911170829y3fac504an4846aa0dafc9525d@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 7f080ed10911120710u49e09af0o699e914821af8475@mail.gmail.com -->
<!--X-Reference: 4AFC2B1B.1090208@bmrb.wisc.edu -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: BMRB diffusion tensor saveframes. -- November 17, 2009 - 17:30</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: BMRB diffusion tensor saveframes.</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00029" class="tabs">Index by Date</a> | <a href="threads.html#00029" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00028.html">Date Prev</a>] [<a href="msg00030.html">Date Next</a>] [<a href="msg00020.html">Thread Prev</a>] [<a href="msg00036.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Eldon Ulrich &lt;elu@xxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Tue, 17 Nov 2009 17:29:41 +0100</li>
<li class="menuitem">
<em>Cc</em>: relax-devel@xxxxxxx</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00029.html">7f080ed10911170829y3fac504an4846aa0dafc9525d@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;7f080ed10911120710u49e09af0o699e914821af8475@xxxxxxxxxxxxxx&gt;	&lt;4AFC2B1B.1090208@xxxxxxxxxxxxx&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on November 17, 2009 - 17:30:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Eldon,

Would you be able to help me with a few questions about the Tensor
save frame that I am about to create?  Sorry for the length :S  This
save frame, from memory, was a general save frame for all types of
rank-2 tensors, was it not?  It could therefore hold diffusion
tensors, alignment tensors, Saupe order matrices, CS tensors, etc.?
This appears to be an expansion of shielding tensor save frame.  Below
are a few suggestions for additions and some mock ups that I will code
relax (<a  rel="nofollow" href="http://nmr-relax.com">http://nmr-relax.com</a>) and bmrblib
(<a  rel="nofollow" href="http://gna.org/projects/bmrblib/">http://gna.org/projects/bmrblib/</a>) to produce.


</pre><blockquote class="blockquote"><pre style="margin: 0em;">_Tensor.Reduceable_matrix_1_1_val
_Tensor.Reduceable_matrix_1_2_val
_Tensor.Reduceable_matrix_1_3_val
_Tensor.Reduceable_matrix_2_1_val
_Tensor.Reduceable_matrix_2_2_val
_Tensor.Reduceable_matrix_2_3_val
_Tensor.Reduceable_matrix_3_1_val
_Tensor.Reduceable_matrix_3_2_val
_Tensor.Reduceable_matrix_3_3_val
</pre></blockquote><pre style="margin: 0em;">

Firstly, I'm guessing this matrix is in the structure frame (the PDB
frame).  But how should we specify the PDB frame?  For example I could
be analysing CaM using Ad Bax's high quality, yet different PDB
structures for each domain separately, i.e. model 2 of 1J7P and model
3 of 1J7O.  Should I specify PDBs and model numbers, or dump all
coordinate info of the structures?  This information is needed because
the diffusion tensor is attached to a structure and the structures are
in random orientations within the PDB frame.

One problem I see is how do we specify the tensor type?  Maybe a tag
such as _Tensor_list.Tensor_type with fixed enumerations such as
'diffusion', 'CS', 'shielding', and 'alignment'?  These tensors are
often described quite differently - though the
_Tensor.Reduceable_matrix_* form applies to all.  For example the
total information content of a spheroidal diffusion tensor from relax
in XML form looks like:

        &lt;diff_tensor desc=&quot;Diffusion tensor&quot; type=&quot;spheroid&quot;&gt;
            &lt;Da ieee_754_byte_array=&quot;[213, 118, 248, 246, 40, 53, 91, 65]&quot;&gt;
                7132323.85892
            &lt;/Da&gt;
            &lt;fixed&gt;
                False
            &lt;/fixed&gt;
            &lt;phi ieee_754_byte_array=&quot;[224, 227, 53, 166, 165, 212, 3, 64]&quot;&gt;
                2.47883157589
            &lt;/phi&gt;
            &lt;spheroid_type&gt;
                'prolate'
            &lt;/spheroid_type&gt;
            &lt;theta ieee_754_byte_array=&quot;[147, 6, 168, 205, 63, 251, 238, 63]&quot;&gt;
                0.968170072243
            &lt;/theta&gt;
            &lt;tm ieee_754_byte_array=&quot;[78, 9, 5, 238, 170, 132, 67, 62]&quot;&gt;
                9.08888558914e-09
            &lt;/tm&gt;
        &lt;/diff_tensor&gt;

Note that in this axially symmetric case there are, in fact, infinite
matrix forms.  Therefore just an axis and tm and Da are used to
specify this.  But multiple parameters can be used to specify a
diffusion tensor, and different definitions/equations of properties
such as rhombicity are used all over the place.  Therefore the _Tensor
save frame will require a little refinement, or that this is used as a
template for specific tensor save frames.

Below are some mock ups of diffusion tensors using the _Tensor save
frame, with a few additional tags.  I think I can use a separate save
frame for each diffusion tensor, so maybe 2 saveframes for a 2 domain
system?  It could probably all go into one frame, but might be nicer
to group these into individual frames, especially if tensors overlap!
I've added the _Tensor_list.*_val_type tags to handle different
definitions of anisotropy and rhombicity as these can be defined in
many different ways!  This is the minimal information I need to
deposit and then re-read the data.


# Spherical diffusion mock up (unused tags removed).

save_diff_tensor
   _Tensor_list.Sf_category tensor
   _Tensor_list.Sf_framecode spherical_tensor_1
   _Tensor_list.ID 1
   _Tensor_list.Tensor_type diffusion        # New.
   _Tensor_list.Matrix_val_units s-1        # New (this is the units
of the matrix form, and could be ppm for CS, etc.).
   _Tensor_list.Isotropic_val_type &quot;Diso = 1/(6.tm)&quot;        # New.
   _Tensor_list.Details &quot;spherical diffusion&quot;

   loop_
      _Tensor.ID
      _Tensor.Entity_ID
      _Tensor.Comp_index_ID
      _Tensor.Comp_ID
      _Tensor.Atom_ID
      _Tensor.Atom_type
      _Tensor.Atom_isotope_number
      _Tensor.Isotropic_val
      _Tensor.Anisotropic_val
      _Tensor.Rhombic_val
      _Tensor.Tensor_list_ID

1 1 9 Gln N N 15 12985705.377075171 0.0 0.0 1
2 1 10 Gln N N 15 12985705.377075171 0.0 0.0 1

   stop_

save_



# Spheroidal diffusion mock up (unused tags removed).
# Note that _Tensor_list.Spheroid_type can be determined by the sign
of Da (_Tensor.Anisotropic_val) when using Da = Dpar - Dper.
# Also note that the polar (theta) and azimuthal angle (phi) are in
this example, as in most cases, defined as 0 &lt;= theta &lt;= pi; 0 &lt;= phi
&lt;= 2pi.

save_diff_tensor
   _Tensor_list.Sf_category tensor
   _Tensor_list.Sf_framecode spheroidal_tensor_1
   _Tensor_list.ID 1
   _Tensor_list.Tensor_type diffusion        # New.
   _Tensor_list.Matrix_val_units s-1        # New (this is the units
of the matrix form, and could be ppm for CS, etc.).
   _Tensor_list.Spheroid_type prolate        # New.
   _Tensor_list.Angle_units rad        # New (for polar and azimuthal
angles, as well as the 3 Euler angles).
   _Tensor_list.Isotropic_val_formula &quot;Diso = 1/(6.tm)&quot;        # New.
   _Tensor_list.Anisotropic_val_formula &quot;Da = Dpar - Dper&quot;       # New.
   _Tensor_list.Details &quot;spheroidal diffusion&quot;

   loop_
      _Tensor.ID
      _Tensor.Entity_ID
      _Tensor.Comp_index_ID
      _Tensor.Comp_ID
      _Tensor.Atom_ID
      _Tensor.Atom_type
      _Tensor.Atom_isotope_number
      _Tensor.Axial_sym_axis_polar_angle        # New.
      _Tensor.Axial_sym_axis_azimuthal_angle        # New.
      _Tensor.Isotropic_val
      _Tensor.Anisotropic_val
      _Tensor.Rhombic_val
      _Tensor.Tensor_list_ID

1 1 9 Gln N N 15 0.96817007224326956 2.4788315758892034
18337414.970415145 7132323.8589150626 0.0 1
2 1 10 Gln N N 15 0.96817007224326956 2.4788315758892034
18337414.970415145 7132323.8589150626 0.0 1

   stop_

save_



# Ellipsoidal diffusion mock up (unused tags removed).

save_diff_tensor
   _Tensor_list.Sf_category tensor
   _Tensor_list.Sf_framecode ellipsoidal_tensor_1
   _Tensor_list.ID 1
   _Tensor_list.Tensor_type diffusion        # New.
   _Tensor_list.Matrix_val_units s-1        # New (this is the units
of the matrix form, and could be ppm for CS, etc.).
   _Tensor_list.Angle_units rad        # New (for polar and azimuthal
angles, as well as the 3 Euler angles).
   _Tensor_list.Euler_angle_type zyz        # New.
   _Tensor_list.Isotropic_val_formula &quot;Diso = 1/(6.tm)&quot;        # New.
   _Tensor_list.Anisotropic_val_formula &quot;Da = Dpar - Dper&quot;       # New.
   _Tensor_list.Rhombic_val_formula &quot;Dr = (Dy - Dx)/2Da&quot;       # New.
   _Tensor_list.Details &quot;ellipsoidal diffusion&quot;

   loop_
      _Tensor.ID
      _Tensor.Entity_ID
      _Tensor.Comp_index_ID
      _Tensor.Comp_ID
      _Tensor.Atom_ID
      _Tensor.Atom_type
      _Tensor.Atom_isotope_number
      _Tensor.Euler_angle_alpha
      _Tensor.Euler_angle_beta
      _Tensor.Euler_angle_gamma
      _Tensor.Isotropic_val
      _Tensor.Anisotropic_val
      _Tensor.Rhombic_val
      _Tensor.Tensor_list_ID

1 1 9 Gln N N 15 1.22079138007 2.61076471643 0.632663091701
39314097.38005387 235884584.281 9.58992200396e-17 1
2 1 10 Gln N N 15  1.22079138007 2.61076471643 0.632663091701
39314097.38005387 235884584.281 9.58992200396e-17 1

   stop_

save_



Ok, that should be hopefully it for this save frame.  When I can work
on it, I'll get relax and bmrblib to produce these mock ups.

Cheers,

Edward


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00038" href="msg00038.html">Re: BMRB diffusion tensor saveframes.</a></strong>
<ul><li><em>From:</em> Eldon Ulrich</li></ul></li>
<li><strong><a name="00036" href="msg00036.html">Re: BMRB diffusion tensor saveframes.</a></strong>
<ul><li><em>From:</em> Eldon Ulrich</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00015" href="msg00015.html">BMRB diffusion tensor saveframes.</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00016" href="msg00016.html">Re: BMRB diffusion tensor saveframes.</a></strong>
<ul><li><em>From:</em> Eldon Ulrich</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Thu Nov 19 00:40:14 2009</div>  
</body>
</html>
