<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: relaxGUI, local_tm / sphere and the need for a structure model -->
<!--X-From-R13: "Sqjneq q'Ohiretar" <rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Mon, 30 Jul 2012 12:04:30 +0200 -->
<!--X-Message-Id: CAED9pY976_2Kpk1yfVyOb761aJwPV1pANFz+SKjgffXXGrOjvg@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: B9C8685B&#45;9E9C&#45;44A2&#45;8745&#45;E3968CC9BBEC@fmp&#45;berlin.de -->
<!--X-Reference: CAED9pY9f2UVhw40&#45;C6x8PywOoBoaboRPA&#45;buw9uqnigGty4t&#45;A@mail.gmail.com -->
<!--X-Reference: F27CB4A6&#45;A6C2&#45;445D&#45;92AB&#45;4A0CA75A9C78@fmp&#45;berlin.de -->
<!--X-Reference: CAED9pY9GxMLM&#45;h8+9LmGQddcrm9EqMp&#45;t+&#45;QMCMDG92WRh_MRA@mail.gmail.com -->
<!--X-Reference: 40120A1D&#45;7B98&#45;48D9&#45;9EB4&#45;917610979284@fmp&#45;berlin.de -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: relaxGUI, local_tm / sphere and the need for a structure model -- July 30, 2012 - 12:04</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: relaxGUI, local_tm / sphere and the need for a structure model</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00018" class="tabs">Index by Date</a> | <a href="threads.html#00018" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00017.html">Date Prev</a>] [<a href="msg00019.html">Date Next</a>] [<a href="msg00016.html">Thread Prev</a>] [<a href="msg00015.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Martin Ballaschk &lt;ballaschk@xxxxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Mon, 30 Jul 2012 12:04:00 +0200</li>
<li class="menuitem">
<em>Cc</em>: relax-users@xxxxxxx</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;	h=mime-version:sender:in-reply-to:references:date	:x-google-sender-auth:message-id:subject:from:to:cc:content-type	:content-transfer-encoding;	bh=BWjRLT0QiP978L4wUSJ4lioeskvrgOujF/6y8sw12V4=;	b=A9FkDucsxK/OkNdT10AHpqKAc9XBhd0HX0uu0gJxZUUz1vLmsFNp7/DapzmlztXezZ	ZPwqEL8rSkxoQjI1hgIV9g5iaO+u+SKZcdjXcfok/snKZlUGQ1GBQ1+BHTXm1d31XshN	QsTLiNAQc47bMwlQn0OZGrgOoqWiN4CxVTADJc5qerhTL2Lci3AV521uStrXE/XX+hZH	Ihr0UmOlkUpcYdfGp277qlzm8EAmtkMDYpj8iN423cS/3Ph1i4EIu4mfpzRFq/wxLnTp	vguW/dyB8wBadCeGCRRMs+VARWEDbVfrfAdB5YMggV5vtGSNyJzPkIeIXZXaUmxsLhZz	JwGg==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00018.html">CAED9pY976_2Kpk1yfVyOb761aJwPV1pANFz+SKjgffXXGrOjvg@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;B9C8685B-9E9C-44A2-8745-E3968CC9BBEC@xxxxxxxxxxxxx&gt;	&lt;CAED9pY9f2UVhw40-C6x8PywOoBoaboRPA-buw9uqnigGty4t-A@xxxxxxxxxxxxxx&gt;	&lt;F27CB4A6-A6C2-445D-92AB-4A0CA75A9C78@xxxxxxxxxxxxx&gt;	&lt;CAED9pY9GxMLM-h8+9LmGQddcrm9EqMp-t+-QMCMDG92WRh_MRA@xxxxxxxxxxxxxx&gt;	&lt;40120A1D-7B98-48D9-9EB4-917610979284@xxxxxxxxxxxxx&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on July 30, 2012 - 12:04:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">I couldn't reproduce it either.  Somehow it looks like a PDB file
called '1shg-H.pdb' was being loaded, but from your messages I
couldn't see where.  I'll close the bug report, but it can be reopened
later if the bug resurfaces.

Cheers,

Edward


On 30 July 2012 09:57, Martin Ballaschk &lt;ballaschk@xxxxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi Edward,

I couldn't reproduce the error with fresh data sets made on my linux 
machine. So this seems to be non-issue in the end ...

Cheers
Martin

On 25.07.2012, at 14:42, Edward d'Auvergne &lt;edward@xxxxxxxxxxxxx&gt; wrote:

</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi,

This looks to be a genuine bug.  If you could create a bug report, it
would be much appreciated (see
<a  rel="nofollow" href="https://web.archive.org/web/https://gna.org/bugs/?func=additem&amp;group=relax">https://gna.org/bugs/?func=additem&amp;group=relax</a>).  It would be useful
to include the information from your mail.  You could also attach the
results file there, if you wish.  Did you use the GUI for this, or a
script for testing?  It would be good to attach the output of running
relax with teeing mode on (relax --tee log_file).

An ideal case would be if you created a set of test files which only
include information for one or two spins which still reproduce the
problem.  That way I'll be able to easily reproduce the bug and come
up with a solution within a few minutes (hopefully).  Without the test
data, I would have to spend a few hours or days trying to come up with
a data set which triggers the bug.  I could then also include this in
the relax test suite to ensure that the problem never returns.  The
test data can be randomised for confidentiality, if needed.

Cheers,

Edward



On 25 July 2012 14:27, Martin Ballaschk &lt;ballaschk@xxxxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">

Hi Edward,

thank you for your quick response. Thanks also for your help.

There's still a problem when trying to setup the dipole pair, maybe I 
messed something up:

</pre><blockquote class="blockquote"><pre style="margin: 0em;">dipole_pair.set_dist(spin_id1='@N', spin_id2='@H', ave_dist=1.02e-10)
Traceback (most recent call last):
 File &quot;gui/interpreter.pyc&quot;, line 299, in run
 File &quot;generic_fns/dipole_pair.pyc&quot;, line 237, in set_dist
 File &quot;generic_fns/interatomic.pyc&quot;, line 234, in interatomic_loop
KeyError: '#1shg-H_mol1:7@N'
</pre></blockquote><pre style="margin: 0em;">

I don't really know what that means.

Here's what I set up:


1. Read @N spins from a relaxation output file, via the spin editor, 
works nicely:

relax&gt; sequence.read(file='rx_t1.out', dir=None, spin_id_col=None, 
mol_name_col=None, res_num_col=2, res_name_col=3, spin_num_col=None, 
spin_name_col=5, sep=None, spin_id=None)
Opening the file 'rx_t1.out' for reading.
# mol_name    res_num    res_name    spin_num    spin_name
None          6          LYS         None        N
.
.
.


2. Attach protons:

relax&gt; sequence.attach_protons()


3. Set isotope and element types:

relax&gt; spin.isotope(isotope='15N', spin_id='@N', force=True)

relax&gt; spin.isotope(isotope='1H', spin_id='@H', force=True)

relax&gt; spin.element(element='N', spin_id=':*@N', force=True)

4. Define NH pairs:

relax&gt; dipole_pair.define(spin_id1='@N', spin_id2='@H', direct_bond=True)
Magnetic dipole-dipole interactions are now defined for the following 
spins:

# Spin_ID_1    Spin_ID_2
':6@N'         ':6@H'
':7@N'         ':7@H'
.
.
.

5. set the distance between N and H in the NH:

relax&gt; dipole_pair.set_dist(spin_id1='@N', spin_id2='@H', 
ave_dist=1.02e-10)
Traceback (most recent call last):
 File &quot;gui/interpreter.pyc&quot;, line 299, in run
 File &quot;generic_fns/dipole_pair.pyc&quot;, line 237, in set_dist
 File &quot;generic_fns/interatomic.pyc&quot;, line 234, in interatomic_loop
KeyError: '#1shg-H_mol1:7@N'

So I don't know where this comes from. The NH pairs are set up, and 
dipole_pair.set_dist takes just the three parameters. Oddly, relax does 
not complain about the first residue (6), but the second in the sequence 
(7). From how it shows up in the spin editor, there is actually no 
difference between the two.

The relax state can be found here, if you want to have a look: 
<a  rel="nofollow" href="https://www.dropbox.com/s/heukkeycpwzsvmb/state2.bz2">https://www.dropbox.com/s/heukkeycpwzsvmb/state2.bz2</a>

I'd appreciate your support :)

Regards
Martin


On 24.07.2012, at 16:20, Edward d'Auvergne wrote:

</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi Martin,

In the new relax versions, you'll have to do things a little
differently.  In the case where no structure is available, you can
just click on the 'Skip' buttons for the structural parts of the
dipolar relaxation wizard.  I was thinking about having a page at the
start of the wizard to ask if structural data is available, and use
this to skip the 2 structure related wizard pages (structure.read_pdb
and structure.get_pos), but it's a lot of effort considering most
users will have a 3D structure.  Note that you'll also have to have
both proton and nitrogen spins set up in the new relax versions to
define the magnetic dipole-dipole interaction.  This will allow
multi-pole relaxation support to be added to relax in the future.

I hope this info helps.  You may encounter other problems in the GUI
if you don't have a structure.  The flexibility of the scripting mode
is lost in the GUI, so it is hard to bring back all the features into
the GUI.  But relax will handle an analysis without a structure.

Regards,

Edward



On 24 July 2012 16:05, Martin Ballaschk &lt;ballaschk@xxxxxxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi Edward,

I was wondering if it is possible to run relaxGUI's model-free routine 
if there is no structure model available. Of course, only the local_tm 
or spherical &quot;global&quot; models could be used for an analysis, then.

In the current 2.1.0 release, the user is forced to load a structure 
file (&quot;dipolar relaxation&quot; button). Shouldn't relax run without loading 
any structural information if I select &quot;sphere&quot; or &quot;local_tm&quot; in the 
protocol mode field? Looking at the sample scripts in the manual, this 
could easily be done via a relax script (I haven't tried), but is it 
possible also via the GUI?

Cheers
Martin
</pre></blockquote></blockquote></blockquote></blockquote><pre style="margin: 0em;">

--
Martin Ballaschk
AG Schmieder
Leibniz-Institut für Molekulare Pharmakologie
Robert-Rössle-Str. 10
13125 Berlin
ballaschk@xxxxxxxxxxxxx
Tel.: +49-30-94793-234/315
Büro: A 1.26
Labor: C 1.10

</pre></blockquote><pre style="margin: 0em;">


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00009" href="msg00009.html">relaxGUI, local_tm / sphere and the need for a structure model</a></strong>
<ul><li><em>From:</em> Martin Ballaschk</li></ul></li>
<li><strong><a name="00010" href="msg00010.html">Re: relaxGUI, local_tm / sphere and the need for a structure model</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00011" href="msg00011.html">Re: relaxGUI, local_tm / sphere and the need for a structure model</a></strong>
<ul><li><em>From:</em> Martin Ballaschk</li></ul></li>
<li><strong><a name="00012" href="msg00012.html">Re: relaxGUI, local_tm / sphere and the need for a structure model</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00016" href="msg00016.html">Re: relaxGUI, local_tm / sphere and the need for a structure model</a></strong>
<ul><li><em>From:</em> Martin Ballaschk</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Tue Jul 31 03:00:08 2012</div>  
</body>
</html>
