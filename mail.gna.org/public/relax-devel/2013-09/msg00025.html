<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: System test fail, test_hansen_cpmg_data_to_ns_cpmg_2site_star -->
<!--X-From-R13: "Sqjneq q'Ohiretar" <rqjneqNaze&#45;erynk.pbz> -->
<!--X-Date: Tue, 03 Sep 2013 09:21:43 +0200 -->
<!--X-Message-Id: CAED9pY8hrS52=PndQGC=Z_w5_0idX7ztrzugQvAf+_MNY0aimw@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: CA+CBx2NN85Jb6w051tQ3XPaWyvkHXSr1&#45;50JmS&#45;hepULa2NUEQ@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: System test fail, test_hansen_cpmg_data_to_ns_cpmg_2site_star -- September 03, 2013 - 09:21</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: System test fail, test_hansen_cpmg_data_to_ns_cpmg_2site_star</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00025" class="tabs">Index by Date</a> | <a href="threads.html#00025" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00024.html">Date Prev</a>] [<a href="msg00026.html">Date Next</a>] [<a href="msg00023.html">Thread Prev</a>] [Thread Next]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Tue, 3 Sep 2013 09:21:11 +0200</li>
<li class="menuitem">
<em>Cc</em>: &quot;relax-devel@xxxxxxx&quot; &lt;relax-devel@xxxxxxx&gt;</li>
<li class="menuitem">
<em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;	h=mime-version:sender:in-reply-to:references:date:message-id:subject	:from:to:cc:content-type:content-transfer-encoding;	bh=5PhYu07rQh9HBDZ8XJnmlT49Z9Hp7ZQZMfEOj4BvrTw=;	b=u2vu0uFtZ4PBRqIHTkrOtFyDldcMWKR3LtoRzFfVENeIhFClAwgU3664cWFomiSr5u	BvBvzKAku0t+sKQU2uP/vH/yfVaNuo5I4BCH221VgUNkOSsYyUhTot7aYsNCtXjNWJo/	U5tLleQCdgU8wEdOq/Au9/Myl/rVm75Ga/x7clgc429ZGMzHImjSGencIWudRh47k4i5	lsrR64yHj5JwCWqIpAsmrGcEzCds5knb1lyHj2Czojm2z1YUOTat49I4odBy8FOa3kJe	avoOSaceS2nx0CbZPFTEDlQZ1dNJrxNoBzlBb0/Z8yb3Y+MSLTVcevdEOzTYTJZ3L2ak	nE/A==</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00025.html">CAED9pY8hrS52=PndQGC=Z_w5_0idX7ztrzugQvAf+_MNY0aimw@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;CA+CBx2NN85Jb6w051tQ3XPaWyvkHXSr1-50JmS-hepULa2NUEQ@xxxxxxxxxxxxxx&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on September 03, 2013 - 09:21:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Hi,

This is not really a bug.  It's just that the numerical precision on
MS Windows is not as good as on Linux and Mac, and therefore many
system tests have to be made less stringent for MS Windows.  Despite
this, the results are pretty much the same.  I'll fix this one.

Regards,

Edward



On 2 September 2013 23:08, Troels Emtekær Linnet &lt;tlinnet@xxxxxxxxx&gt; wrote:
</pre><blockquote class="blockquote"><pre style="margin: 0em;">Hi.

I have a system test fail:

Calling:
relax -s Relax_disp.test_hansen_cpmg_data_to_ns_cpmg_2site_star

Is this a bug?

=============================
= System / functional tests =
=============================

F
======================================================================
FAIL: test_hansen_cpmg_data_to_ns_cpmg_2site_star
(test_suite.system_tests.relax_disp.Relax_disp)
Optimisation of Dr. Flemming Hansen's CPMG data to the 'NS CPMG 2-site star'
dispersion model.
----------------------------------------------------------------------

relax&gt; pipe.create(pipe_name='relax_disp', pipe_type='relax_disp',
bundle=None)

relax&gt; pipe.create(pipe_name='base pipe', pipe_type='relax_disp',
bundle=None)

relax&gt;
results.read(file='C:\\WinPython27\\relax\\relax_disp\\test_suite\\shared_data\\dispersion\\Hansen\\base_pipe',
dir=None)
Opening the file
'C:\\WinPython27\\relax\\relax_disp\\test_suite\\shared_data\\dispersion\\Hansen\\base_pipe.bz2'
for reading.

relax&gt; spin.isotope(isotope='15N', spin_id=None, force=False)

relax&gt; pipe.create(pipe_name='R2eff', pipe_type='relax_disp', bundle=None)

relax&gt; pipe.switch(pipe_name='R2eff')

relax&gt;
results.read(file='C:\\WinPython27\\relax\\relax_disp\\test_suite\\shared_data\\dispersion\\Hansen\\r2eff_pipe',
dir=None)
Opening the file
'C:\\WinPython27\\relax\\relax_disp\\test_suite\\shared_data\\dispersion\\Hansen\\r2eff_pipe.bz2'
for reading.

relax&gt; pipe.copy(pipe_from='base pipe', pipe_to='NS CPMG 2-site star',
bundle_to='relax_disp')

relax&gt; pipe.switch(pipe_name='NS CPMG 2-site star')

relax&gt; relax_disp.select_model(model='NS CPMG 2-site star')
The numerical reduced solution for the 2-site Bloch-McConnell equations for
CPMG data using complex conjugate matrices, whereby the simplification R20A
= R20B is assumed.


relax&gt; value.copy(pipe_from='R2eff', pipe_to='NS CPMG 2-site star',
param='r2eff')

relax&gt; minimise(min_algor='simplex', line_search=None, hessian_mod=None,
hessian_type=None, func_tol=1e-05, grad_tol=None, max_iter=1000,
constraints=False, scaling=True,
 verbosity=1)


Fitting to the spin block [':70@N']
-----------------------------------


Simplex minimisation
~~~~~~~~~~~~~~~~~~~~

k: 0        xk: [   0.6996327746,    0.9452051268,     5.644862195,
0.9897519798,    0.1723820567]    fk: 18.1084550687
k: 100      xk: [   0.6993370616,    0.9451812929,     5.641863707,
0.9897487812,    0.1724861979]    fk: 18.0898622831

Parameter values: [0.69933709785769582, 0.94518128839624382,
5.6418635141462259, 0.98974878081309914, 0.1724861988987203]
Function value:   18.089785814826453
Iterations:       109
Function calls:   253
Gradient calls:   0
Hessian calls:    0
Warning:          None


Optimised parameter values:
r2 (500.000 MHz):            6.993370978576959
r2 (800.000 MHz):            9.451812883962438
dw:                          5.641863514146226
pA:                          0.989748780813099
kex:                      1724.861988987202949


Fitting to the spin block [':71@N']
-----------------------------------


Simplex minimisation
~~~~~~~~~~~~~~~~~~~~

k: 0        xk: [   0.4978654237,    0.9276918959,     4.577891393,
0.9968032899,    0.1830044597]    fk: 1.37022318277

Parameter values: [0.49810082210753637, 0.95128284016159537,
4.5690931023020607, 0.99680135212783216, 0.1831062464247688]
Function value:   1.3691246829648778
Iterations:       92
Function calls:   225
Gradient calls:   0
Hessian calls:    0
Warning:          None


Optimised parameter values:
r2 (500.000 MHz):            4.981008221075363
r2 (800.000 MHz):            9.512828401615954
dw:                          4.569093102302061
pA:                          0.996801352127832
kex:                      1831.062464247688013


Optimised parameters:

Parameter            Value (:70)          Value (:71)
R2 (500 MHz)             6.99337097857696     4.98100822107536
R2 (800 MHz)             9.45181288396244     9.51282840161595
pA                      0.989748780813099    0.996801352127832
dw                       5.64186351414623     4.56909310230206
kex                       1724.8619889872     1831.06246424769
chi2                     18.0897858148265     1.36912468296488

Traceback (most recent call last):
  File
&quot;C:\WinPython27\relax\relax_disp\test_suite\system_tests\relax_disp.py&quot;,
line 679, in test_hansen_cpmg_data_to_ns_cpmg_2site_star
    self.assertAlmostEqual(spin70.r2[0], 6.99632787205716, 4)
AssertionError: 6.9933709785769587 != 6.99632787205716 within 4 places

----------------------------------------------------------------------
Ran 1 test in 15.216s

FAILED (failures=1)


===================================
= Summary of the relax test suite =
===================================



Optional packages/modules
=========================

No tests skipped due to missing modules.



Synopsis
========

System/functional tests
................................................................. [ Failed ]


Troels Emtekær Linnet

_______________________________________________
relax (<a  rel="nofollow" href="http://www.nmr-relax.com">http://www.nmr-relax.com</a>)

This is the relax-devel mailing list
relax-devel@xxxxxxx

To unsubscribe from this list, get a password
reminder, or change your subscription options,
visit the list information page at
<a  rel="nofollow" href="http://www.nmr-relax.com/mail.gna.org/listinfo/relax-devel">https://mail.gna.org/listinfo/relax-devel</a>

</pre></blockquote><pre style="margin: 0em;">


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00023" href="msg00023.html">System test fail, test_hansen_cpmg_data_to_ns_cpmg_2site_star</a></strong>
<ul><li><em>From:</em> Troels Emtekær Linnet</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Tue Sep 03 10:20:06 2013</div>  
</body>
</html>
