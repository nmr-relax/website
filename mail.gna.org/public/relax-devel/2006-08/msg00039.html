<!-- MHonArc v2.6.10 -->
<!--X-Subject: Re: Proposed solution to bug #6503. -->
<!--X-From-R13: "Sqjneq q'Ohiretar" <rqjneq.qnhiretarNtznvy.pbz> -->
<!--X-Date: Wed, 09 Aug 2006 17:18:29 +0200 -->
<!--X-Message-Id: 7f080ed10608090817u4ee62fa7g6418a4b68cc3b334@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 7f080ed10608082240r114cf35an60af62836fcc81bf@mail.gmail.com -->
<!--X-Reference: 1155116086.28764.393.camel@fbsdpcu021 -->
<!--X-Reference: 7f080ed10608090248i5c3a5832h166bc8c07f2cbc93@mail.gmail.com -->
<!--X-Reference: 1155120829.28764.436.camel@fbsdpcu021 -->
<!--X-Reference: 44D9CA33.9090000@bmb.leeds.ac.uk -->
<!--X-Reference: 1155128346.28764.450.camel@fbsdpcu021 -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: Proposed solution to bug #6503. -- August 09, 2006 - 17:18</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />Re: Proposed solution to bug #6503.</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00039" class="tabs">Index by Date</a> | <a href="threads.html#00039" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00038.html">Date Prev</a>] [<a href="msg00040.html">Date Next</a>] [<a href="msg00036.html">Thread Prev</a>] [<a href="msg00043.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: &quot;Chris MacRaild&quot; &lt;c.a.macraild@xxxxxxxxxxx&gt;</li>
<li class="menuitem">
<em>Date</em>: Thu, 10 Aug 2006 01:17:48 +1000</li>
<li class="menuitem">
<em>Cc</em>: relax-devel@xxxxxxx</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00039.html">7f080ed10608090817u4ee62fa7g6418a4b68cc3b334@mail.gmail.com</a>&gt;</li>
<li class="menuitem">
<em>References</em>: &lt;<a href="msg00029.html">7f080ed10608082240r114cf35an60af62836fcc81bf@mail.gmail.com</a>&gt;	&lt;<a href="msg00031.html">1155116086.28764.393.camel@fbsdpcu021</a>&gt;	&lt;<a href="msg00032.html">7f080ed10608090248i5c3a5832h166bc8c07f2cbc93@mail.gmail.com</a>&gt;	&lt;<a href="msg00034.html">1155120829.28764.436.camel@fbsdpcu021</a>&gt;	&lt;44D9CA33.9090000@bmb.leeds.ac.uk&gt;	&lt;<a href="msg00036.html">1155128346.28764.450.camel@fbsdpcu021</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>Edward d'Auvergne</strong> on August 09, 2006 - 17:18:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<tt>On 8/9/06, Chris MacRaild wrote:
</tt><blockquote class="blockquote"><pre style="margin: 0em;">On Wed, 2006-08-09 at 12:42 +0100, Gary S. Thompson wrote:
&gt; Chris MacRaild wrote:
&gt;
&gt; &gt;On Wed, 2006-08-09 at 19:48 +1000, Edward d'Auvergne wrote:
&gt; &gt;
&gt; &gt;
&gt; &gt;&gt;&gt;&gt;As the function 'self.grid_search()' executes 'self.minimise()' this
&gt; &gt;&gt;&gt;&gt;single change will cover both the grid search and minimisation.  The
&gt; &gt;&gt;&gt;&gt;function 'isnan()' currently non-existent but could be implemented as
&gt; &gt;&gt;&gt;&gt;Gary previously mentioned by checking the hex bit pattern of NaN.
&gt; &gt;&gt;&gt;&gt;
&gt; &gt;&gt;&gt;&gt;
&gt; &gt;&gt;&gt;If isnan() is to be implimented in this way, then a similar isinf() is
&gt; &gt;&gt;&gt;by far the best way to go. float('inf') is platform dependent, and
&gt; &gt;&gt;&gt;certainly will not work under Windows (I think I'm right in saying
&gt; &gt;&gt;&gt;windows has no valid string representation of inf or nan that would work
&gt; &gt;&gt;&gt;in that context).
&gt; &gt;&gt;&gt;
&gt; &gt;&gt;&gt;
&gt; &gt;&gt;That one I didn't know about.  I thought Python handled inf correctly
&gt; &gt;&gt;but checking the bit value should be easy.  What about checking that
&gt; &gt;&gt;the value is less than 1e300 instead, as that is the arbitrary
&gt; &gt;&gt;starting point for the grid search?
&gt; &gt;&gt;
&gt; &gt;&gt;
&gt; &gt;
&gt; &gt;In practise I'm fairly sure that will work. The purist might say that
&gt; &gt;the starting value should be INF, and the test should be for INF, but I
&gt; &gt;can't imagine anyone wanting to accept a grid search with Chi2 &gt; 1e300
&gt; &gt;
&gt; &gt;
&gt;
&gt; does comparison against inf work on all architectures/compilers....
&gt;</pre><br>
<pre style="margin: 0em;">The official line is that all Python behaviour with respect to special
float values is an accident arising from the specific
architecture/compiler comination. This applies to NaN, +INF, -INF, and
signed zero. That said, I dont recall INF behaviour being raised as an
issue in the various email list discussions I've read. I've just done a
quick test on my machine and see none of the craziness I saw with NaN
comparisons.
</pre></blockquote><pre style="margin: 0em;"><br>Maybe we could add to the test-suite two tests, one to see if the
isnan() functions properly and the other to test if isinf() functions.
The NaN and Inf values can be generated and the functions tested to
see if they recognise them.  These two functions need to be added to
the 'nan_catch_test' branch.  An idea may be to implement both of
these within a file called something like 'float.py' in the base relax
directory.  Both functions could be accessible in the structure
'self.relax.float'.  Gary, would you like to use the information in
your post at <a  href="http://www.nmr-relax.com/mail.gna.org/public/relax-devel/2006-08/msg00013.html">https://mail.gna.org/public/relax-devel/2006-08/msg00013.html</a>
and try to implement the NaN bit pattern matching function?  Do you
think signalling NaNs are an issue or would the generated NaN be a
quite NaN?</pre><br>
<pre style="margin: 0em;">Edward</pre><br>
<br>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00043" href="msg00043.html">Re: Proposed solution to bug #6503.</a></strong>
<ul><li><em>From:</em> Gary S. Thompson</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00029" href="msg00029.html">Proposed solution to bug #6503.</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00031" href="msg00031.html">Re: Proposed solution to bug #6503.</a></strong>
<ul><li><em>From:</em> Chris MacRaild</li></ul></li>
<li><strong><a name="00032" href="msg00032.html">Re: Proposed solution to bug #6503.</a></strong>
<ul><li><em>From:</em> Edward d'Auvergne</li></ul></li>
<li><strong><a name="00034" href="msg00034.html">Re: Proposed solution to bug #6503.</a></strong>
<ul><li><em>From:</em> Chris MacRaild</li></ul></li>
<li><strong><a name="00036" href="msg00036.html">Re: Proposed solution to bug #6503.</a></strong>
<ul><li><em>From:</em> Chris MacRaild</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Wed Aug 09 18:00:36 2006</div>  
</body>
</html>
