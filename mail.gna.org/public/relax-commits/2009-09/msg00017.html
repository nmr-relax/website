<!-- MHonArc v2.6.16 -->
<!--X-Subject: r9455 &#45; in /branches/bmrb: bmrblib/ prompt/ pystarlib/ -->
<!--X-From-R13: rqjneqNaze&#45;erynk.pbz -->
<!--X-Date: Thu, 03 Sep 2009 15:38:21 +0200 -->
<!--X-Message-Id: E1MjCIz&#45;0003ZS&#45;5L@subversion.gna.org -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>r9455 - in /branches/bmrb: bmrblib/ prompt/ pystarlib/ -- September 03, 2009 - 15:38</title>
<link rel="stylesheet" type="text/css" href="/mail.gna.org/archives-color-gna.css"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<h2><img src="/mail.gna.org/images/mail.orig.png" width="48" height="48"
alt="mail" class="pageicon" />r9455 - in /branches/bmrb: bmrblib/ prompt/ pystarlib/</h2>
<br />
<div class="topmenu">
<a href="../" class="tabs">Others Months</a> | <a href="index.html#00017" class="tabs">Index by Date</a> | <a href="threads.html#00017" class="tabs">Thread Index</a><br />
<span class="smaller">&gt;&gt;&nbsp;&nbsp;
[<a href="msg00016.html">Date Prev</a>] [<a href="msg00018.html">Date Next</a>] [<a href="msg00016.html">Thread Prev</a>] [<a href="msg00018.html">Thread Next</a>]
</div>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h3><a name="header" href="#header">Header</a></h3>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul class="headdata">
<li class="menuitem">
<em>To</em>: relax-commits@xxxxxxx</li>
<li class="menuitem">
<em>Date</em>: Thu, 03 Sep 2009 13:24:49 -0000</li>
<li class="menuitem">
<em>Message-id</em>: &lt;<a href="msg00017.html">E1MjCIz-0003ZS-5L@subversion.gna.org</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div><!-- end headdata -->
<br />
<h3><a name="content" href="#content">Content</a></h3>
<div class="postedby">Posted by <strong>edward</strong> on September 03, 2009 - 15:38:</div>
<div class="msgdata">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Author: bugman
Date: Thu Sep  3 15:24:48 2009
New Revision: 9455

URL: <a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax?rev=9455&amp;view=rev">http://svn.gna.org/viewcvs/relax?rev=9455&amp;view=rev</a>
Log:
More updates for Python3k.

The command used was:
2to3 -w \
-f buffer \
-f idioms \
-f set_literal \
-f ws_comma \
-x except \
-x import \
-x imports \
-x long \
-x numliterals \
-x xrange \
relax .

This is from the docs/2to3_checklist document.


Modified:
    branches/bmrb/bmrblib/base_classes.py
    branches/bmrb/bmrblib/misc.py
    branches/bmrb/prompt/bmrb.py
    branches/bmrb/pystarlib/File.py
    branches/bmrb/pystarlib/FileTest.py
    branches/bmrb/pystarlib/TagTable.py
    branches/bmrb/pystarlib/TagTableTest.py
    branches/bmrb/pystarlib/Text.py
    branches/bmrb/pystarlib/TextTest.py
    branches/bmrb/pystarlib/Utils.py
    branches/bmrb/pystarlib/UtilsTest.py

Modified: branches/bmrb/bmrblib/base_classes.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/bmrb/bmrblib/base_classes.py?rev=9455&amp;r1=9454&amp;r2=9455&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/bmrb/bmrblib/base_classes.py?rev=9455&amp;r1=9454&amp;r2=9455&amp;view=diff</a>
==============================================================================
--- branches/bmrb/bmrblib/base_classes.py (original)
+++ branches/bmrb/bmrblib/base_classes.py Thu Sep  3 15:24:48 2009
@@ -39,7 +39,7 @@
         &quot;&quot;&quot;
 
         # The data ID values.
-        self.data_ids = translate(range(1,N+1))
+        self.data_ids = translate(range(1, N+1))
 
 
 

Modified: branches/bmrb/bmrblib/misc.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/bmrb/bmrblib/misc.py?rev=9455&amp;r1=9454&amp;r2=9455&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/bmrb/bmrblib/misc.py?rev=9455&amp;r1=9454&amp;r2=9455&amp;view=diff</a>
==============================================================================
--- branches/bmrb/bmrblib/misc.py (original)
+++ branches/bmrb/bmrblib/misc.py Thu Sep  3 15:24:48 2009
@@ -37,7 +37,7 @@
     missing = False
 
     # List data.
-    if type(data) == list:
+    if isinstance(data, list):
         # Loop over the data.
         for i in range(len(data)):
             if data[i] == None or data[i] == 'None':
@@ -60,7 +60,7 @@
     &quot;&quot;&quot;
 
     # List data.
-    if type(data) == list:
+    if isinstance(data, list):
         # Loop over the data.
         new_data = []
         for i in range(len(data)):

Modified: branches/bmrb/prompt/bmrb.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/bmrb/prompt/bmrb.py?rev=9455&amp;r1=9454&amp;r2=9455&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/bmrb/prompt/bmrb.py?rev=9455&amp;r1=9454&amp;r2=9455&amp;view=diff</a>
==============================================================================
--- branches/bmrb/prompt/bmrb.py (original)
+++ branches/bmrb/prompt/bmrb.py Thu Sep  3 15:24:48 2009
@@ -80,11 +80,11 @@
             print(text)
 
         # File.
-        if type(file) != str:
+        if not isinstance(file, str):
             raise RelaxStrError('file name', file)
 
         # Directory.
-        if dir != None and type(dir) != str:
+        if dir != None and not isinstance(dir, str):
             raise RelaxNoneStrError('directory name', dir)
 
         # Execute the functional code.
@@ -122,15 +122,15 @@
             print(text)
 
         # File.
-        if type(file) != str and not hasattr(file, 'write'):
+        if not isinstance(file, str) and not hasattr(file, 'write'):
             raise RelaxStrFileError('file name', file)
 
         # Directory.
-        if dir != None and type(dir) != str:
+        if dir != None and not isinstance(dir, str):
             raise RelaxNoneStrError('directory name', dir)
 
         # The force flag.
-        if type(force) != bool:
+        if not isinstance(force, bool):
             raise RelaxBoolError('force flag', force)
 
         # Execute the functional code.

Modified: branches/bmrb/pystarlib/File.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/bmrb/pystarlib/File.py?rev=9455&amp;r1=9454&amp;r2=9455&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/bmrb/pystarlib/File.py?rev=9455&amp;r1=9454&amp;r2=9455&amp;view=diff</a>
==============================================================================
--- branches/bmrb/pystarlib/File.py (original)
+++ branches/bmrb/pystarlib/File.py Thu Sep  3 15:24:48 2009
@@ -172,12 +172,12 @@
                 print('Items looked for are a begin or end of a saveframe, 
or')
                 print('a begin of a tagtable(free or looped).')
                 print() 
-                print(&quot;At text (before pos=&quot; , pos , &quot;):&quot;)
+                print(&quot;At text (before pos=&quot;, pos, &quot;):&quot;)
                 start = pos-70
                 if start &lt; 0:
                     start = 0
                 print(&quot;[&quot; + text[start:pos] + &quot;]&quot;)
-                print(&quot;At text (starting pos=&quot; , pos , &quot;):&quot;)
+                print(&quot;At text (starting pos=&quot;, pos, &quot;):&quot;)
                 print(&quot;[&quot; + text[pos:pos+70]+ &quot;]&quot;)
                 return None
             

Modified: branches/bmrb/pystarlib/FileTest.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/bmrb/pystarlib/FileTest.py?rev=9455&amp;r1=9454&amp;r2=9455&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/bmrb/pystarlib/FileTest.py?rev=9455&amp;r1=9454&amp;r2=9455&amp;view=diff</a>
==============================================================================
--- branches/bmrb/pystarlib/FileTest.py (original)
+++ branches/bmrb/pystarlib/FileTest.py Thu Sep  3 15:24:48 2009
@@ -56,7 +56,7 @@
 
 ;    BOGUS_CATEGORY     stop_ save_
 &quot;&quot;&quot;
-            self.assertTrue(Utils.equalIgnoringWhiteSpace(exp,st))
+            self.assertTrue(Utils.equalIgnoringWhiteSpace(exp, st))
 
         def testread2(self):
             &quot;&quot;&quot;STAR File read&quot;&quot;&quot;
@@ -77,7 +77,7 @@
     &quot;&amp;program=STAR&amp;request_type=archive&amp;subtype=full&amp;type=entry&quot;) % (stage, 
stage, entry)
     fnamezip = entry+&quot;.zip&quot;
 #    print &quot;DEBUG: downloading url:&quot;, urlLocation
-    urllib.request.urlretrieve(urlLocation,fnamezip)
+    urllib.request.urlretrieve(urlLocation, fnamezip)
 #    print &quot;DEBUG: opening local zip file:&quot;, fnamezip
     zfobj = zipfile.ZipFile(fnamezip)
     fname = None
@@ -122,12 +122,12 @@
                 cmd = &quot;diff --ignore-all-space --ignore-blank-lines %s %s &gt; 
%s&quot; % ( pystarlibWrittenFile, wattosWrittenFile, diffPystarWattosFile)
                 os.system(cmd)
                 if not os.path.exists(diffPystarWattosFile):
-                    print(&quot;WARNING: failed to diff file: 
&quot;,pystarlibWrittenFile, wattosWrittenFile)
+                    print(&quot;WARNING: failed to diff file: &quot;, 
pystarlibWrittenFile, wattosWrittenFile)
     #            print &quot;Most likely the below diff will fail because it 
depends on diff being installed&quot;
                 cmd = &quot;diff --ignore-all-space --ignore-blank-lines %s %s &gt; 
%s&quot; % ( orgWattosWrittenFile, wattosWrittenFile, diffOrgWattosWattosFile)
                 os.system(cmd)
                 if not os.path.exists(diffOrgWattosWattosFile):
-                    print(&quot;WARNING: failed to diff file: 
&quot;,orgWattosWrittenFile, wattosWrittenFile)
+                    print(&quot;WARNING: failed to diff file: &quot;, 
orgWattosWrittenFile, wattosWrittenFile)
         except:
     #        print &quot;DEBUG: failed the rewrite or diff but as mentioned 
that's totally understandable.&quot;
             pass

Modified: branches/bmrb/pystarlib/TagTable.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/bmrb/pystarlib/TagTable.py?rev=9455&amp;r1=9454&amp;r2=9455&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/bmrb/pystarlib/TagTable.py?rev=9455&amp;r1=9454&amp;r2=9455&amp;view=diff</a>
==============================================================================
--- branches/bmrb/pystarlib/TagTable.py (original)
+++ branches/bmrb/pystarlib/TagTable.py Thu Sep  3 15:24:48 2009
@@ -413,7 +413,7 @@
                     if (c == &quot;'&quot; or c == '&quot;') and bc != &quot; &quot;:
                         # JFD the next line takes an expensive slice of the 
pie?
 #                        tempendpos = idxstart + 
string.find(text[idxstart:],' ')                      
-                        tempendpos = string.find(text,' ',idxstart)
+                        tempendpos = string.find(text, ' ', idxstart)
                     else:                    
                         tempendpos = idxstart
 
@@ -458,8 +458,8 @@
                   % ( col_length, tag_id ))
             print(&quot;Tag names of this table are:&quot;)
             print(self.tagnames)            
-            for xxx in range(0,len(self.tagvalues[0])):             
-                for yyy in range(0,len(self.tagvalues)):
+            for xxx in range(0, len(self.tagvalues[0])):             
+                for yyy in range(0, len(self.tagvalues)):
                     print(self.tagvalues[yyy][xxx])              
                 print('-----------------------------------------------')     
         
             pos = 0

Modified: branches/bmrb/pystarlib/TagTableTest.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/bmrb/pystarlib/TagTableTest.py?rev=9455&amp;r1=9454&amp;r2=9455&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/bmrb/pystarlib/TagTableTest.py?rev=9455&amp;r1=9454&amp;r2=9455&amp;view=diff</a>
==============================================================================
--- branches/bmrb/pystarlib/TagTableTest.py (original)
+++ branches/bmrb/pystarlib/TagTableTest.py Thu Sep  3 15:24:48 2009
@@ -17,7 +17,7 @@
                         tagvalues = [],
                         verbosity = __init__.verbosity)
         pos = tt.parse( text = text, pos = 0)
-        self.assertEqual(pos,len(text))
+        self.assertEqual(pos, len(text))
         
         tt.tagvalues[0][0] = &quot;A&quot;
         tt.tagvalues[0][1] = &quot;B\nC\n&quot;
@@ -51,7 +51,7 @@
 &quot;&quot;&quot;        
 #        print exp
 #        print tt.star_text()
-        self.assertEqual(exp,tt.star_text())
+        self.assertEqual(exp, tt.star_text())
     
 
 if __name__ == &quot;__main__&quot;:

Modified: branches/bmrb/pystarlib/Text.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/bmrb/pystarlib/Text.py?rev=9455&amp;r1=9454&amp;r2=9455&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/bmrb/pystarlib/Text.py?rev=9455&amp;r1=9454&amp;r2=9455&amp;view=diff</a>
==============================================================================
--- branches/bmrb/pystarlib/Text.py (original)
+++ branches/bmrb/pystarlib/Text.py Thu Sep  3 15:24:48 2009
@@ -172,7 +172,7 @@
 &quot;&quot;&quot;
 
 def pattern_unquoted_find(text, pattern, pos=0):    
-    while 1:
+    while True:
         match = pattern.search( text, pos)
         if not match:
             ## No match at all
@@ -363,7 +363,7 @@
         print(&quot;ERROR in semicolon_block_collapse for text starting at: [&quot;+ 
text[startpos:startpos+100]+ &quot;]&quot;)            
         raise
     
-      text_replace = re.sub(&quot;\n&quot;, eol_string,text[startpos:endpos])
+      text_replace = re.sub(&quot;\n&quot;, eol_string, text[startpos:endpos])
 
       # This is bulky and not very elegant but works
       text= text[0:startpos] + text_replace + text[endpos:]
@@ -442,7 +442,7 @@
 &quot;&quot;&quot;
 def semicolons_add( text, possible_bad_char=None ):
     if possible_bad_char:
-        lines       = string.split(text,'\n')
+        lines       = string.split(text, '\n')
         text   = ''
         for line in lines:
             text = text + prepending_string + line + '\n'
@@ -493,7 +493,7 @@
 
     if __init__.verbosity &gt;= 9:
         print('Done [%s] comment subs' % count)
-    text = string.join(lines,&quot;\n&quot;)
+    text = string.join(lines, &quot;\n&quot;)
     return text
 
 &quot;&quot;&quot;

Modified: branches/bmrb/pystarlib/TextTest.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/bmrb/pystarlib/TextTest.py?rev=9455&amp;r1=9454&amp;r2=9455&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/bmrb/pystarlib/TextTest.py?rev=9455&amp;r1=9454&amp;r2=9455&amp;view=diff</a>
==============================================================================
--- branches/bmrb/pystarlib/TextTest.py (original)
+++ branches/bmrb/pystarlib/TextTest.py Thu Sep  3 15:24:48 2009
@@ -26,7 +26,7 @@
         t2noComment = &quot;&quot;&quot;
  
 &quot;&quot;&quot;
-        self.assertEqual(t2noComment,comments_strip( t2 ))
+        self.assertEqual(t2noComment, comments_strip( t2 ))
 
     def testcomments_strip(self):
         &quot;&quot;&quot;comments_strip&quot;&quot;&quot;

Modified: branches/bmrb/pystarlib/Utils.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/bmrb/pystarlib/Utils.py?rev=9455&amp;r1=9454&amp;r2=9455&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/bmrb/pystarlib/Utils.py?rev=9455&amp;r1=9454&amp;r2=9455&amp;view=diff</a>
==============================================================================
--- branches/bmrb/pystarlib/Utils.py (original)
+++ branches/bmrb/pystarlib/Utils.py Thu Sep  3 15:24:48 2009
@@ -36,8 +36,7 @@
 
     def attrnames(self):
         result=''
-        keys = list(self.__dict__.keys())
-        keys.sort()
+        keys = sorted(self.__dict__.keys())
         for attr in keys:
             if attr[:2] == &quot;__&quot;:
                 result = result + &quot;\tname %s=&lt;built-in&gt;\n&quot; % attr
@@ -71,15 +70,15 @@
 &quot;&quot;&quot;
 def equalIgnoringWhiteSpace( a, b):
     pattern   = re.compile(&quot;\s+&quot; )
-    a = re.sub(pattern, ' ',a)
-    b = re.sub(pattern, ' ',b)
+    a = re.sub(pattern, ' ', a)
+    b = re.sub(pattern, ' ', b)
 #    print &quot;a[&quot;+a+&quot;]&quot;
 #    print &quot;b[&quot;+b+&quot;]&quot;
     return a == b
 
 def dos2unix(text):
-    return re.sub('\r\n', '\n',text)
+    return re.sub('\r\n', '\n', text)
 def unix2dos(text):
-    return re.sub('([^\r])(\n)', '\1\r\n',text)
+    return re.sub('([^\r])(\n)', '\1\r\n', text)
 def mac2unix(text):
-    return re.sub('\r', '\n',text)
+    return re.sub('\r', '\n', text)

Modified: branches/bmrb/pystarlib/UtilsTest.py
URL: 
<a  rel="nofollow" href="http://svn.gna.org/viewcvs/relax/branches/bmrb/pystarlib/UtilsTest.py?rev=9455&amp;r1=9454&amp;r2=9455&amp;view=diff">http://svn.gna.org/viewcvs/relax/branches/bmrb/pystarlib/UtilsTest.py?rev=9455&amp;r1=9454&amp;r2=9455&amp;view=diff</a>
==============================================================================
--- branches/bmrb/pystarlib/UtilsTest.py (original)
+++ branches/bmrb/pystarlib/UtilsTest.py Thu Sep  3 15:24:48 2009
@@ -1,12 +1,12 @@
 from unittest import TestCase
-import Utils,unittest
+import Utils, unittest
 
 
 class AllChecks(TestCase):
     def test(self):
         &quot;&quot;&quot;STAR Utils&quot;&quot;&quot;
-        m1 = [ [1,2], [3,4] ]
-        m2 = [ (1,3), (2,4) ]        
+        m1 = [ [1, 2], [3, 4] ]
+        m2 = [ (1, 3), (2, 4) ]        
         m1t= Utils.transpose(m1)
         self.assertTrue(m1t==m2)
 if __name__ == &quot;__main__&quot;:



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div><!-- end msgdata -->
<br />
<h3><a name="related" href="#related">Related Messages</a></h3>
<div class="relateddata">
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
</div><!-- end relateddata -->
<!-- NoBotLinksApartFromRelatedMessages -->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<div class="footer"></div><br />
<div class="right">Powered by <a href="http://www.mhonarc.org">MHonArc</a>, Updated Thu Sep 03 15:40:04 2009</div>  
</body>
</html>
